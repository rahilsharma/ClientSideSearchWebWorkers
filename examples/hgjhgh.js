/**
 * Created by Rahil on 25-04-2016.
 */
webpackJsonp([19], [function(t, e, i) {
    "use strict";
    var n, o, r;
    i(20), n = i(363), o = i(2), r = window.initData, r.block_symbol_autolink(n), delete r.block_symbol_autolink, $(function() {
        function t() {
            return n.bindAutoLoad(1200), i.remove(), !1
        }

        function e() {
            var t = is_authenticated ? $(".tv-header .header-search input") : $(".index-learnmore-header .symbol-input input");
            o.registerAutoFocus(t)
        }
        n.prepareLayout(r.is_user_staff, {
            notAutoLoad: !0
        }), n.onSearchBySymbol.subscribe(this, function(t) {
            window.headerSearch && ($(".header-search input").attr("placeholder", $.t("Chart or Quote, eg.") + " '" + t.short_name + "'"), window.headerSearch.updateOptions({
                defaultSymbol: t.resolved_symbol
            }))
        }), n.init(r.symbol_info, r.symbols_list, r.tag_info);
        var i = $("#index-stream-load-more");
        i.on("click", function() {
            return n.showMore(!0), t(), !1
        }), n._filterChanged.subscribe(null, t, !0), window.trendingPeople($(".search-results")), TradingView.applySearchResetHandler($(".column-trending-header input[name=q]")), new TradingView.GoToChartField($(".index-learnmore-header .symbol-input")), loginStateChange.subscribe(null, e), e()
    })
}, function(t, e, i) {
    "use strict";

    function n(t) {
        return $.extend(this, t), this.buttons = {}, this.configs = this.getConfigs(), $.each(this.codes, function(t, e) {
            this.buttons[e] = new o(this, e)
        }.bind(this)), this
    }

    function o(t, e) {
        this.name = e, this.bbCodes = t, this.tag = t.configs[e].tag, this.$btn = t.$buttons.find(".bb-" + e), this.$btn.addClass("apply-common-tooltip").attr("title", t.configs[e].tooltip), t.configs[e].click ? this.$btn.on("click", t.configs[e].click.bind(this)) : t.configs[e].submit ? this.$btn.on("click", t.configs._defaults.clickForm.bind(this)) : this.$btn.on("click", t.configs._defaults.clickNoForm.bind(this)), t.configs[e].submit && (this.$form = t.$forms.find(".bbcode-" + e + "-form"), this.$form.on("touchstartoutside mousedownoutside", function(t) {
            this.$form.hasClass("active") && !$(t.target).parents().andSelf().is(".bb-" + e + ", ." + e + "-edit-popup") && this.toggleForm(!1)
        }.bind(this)), this.$submit = this.$form.find("." + e + "-submit"), this.$submit.on("click", t.configs[e].submit.bind(this)), this.$input = this.$form.find("input"), this.$input.attr("placeholder", t.configs[e].placeholder).on("keypress", function(i) {
            $(i.target).parents().andSelf().is("." + e + "-edit-popup") || 13 === i.keyCode && t.configs[e].submit.bind(this)(i)
        }.bind(this))), t.configs[e].init && t.configs[e].init.bind(this)()
    }
    var r = i(2);
    n.prototype.getChunks = function() {
        var t, e = this.$textarea.val() || "",
            i = this.$textarea.prop("selectionStart");
        return null == i && (i = e.length, t = e.length), t = this.$textarea.prop("selectionEnd"), null == t && (t = e.length), [e.substring(0, i), e.substring(i, t), e.substring(t)]
    }, n.prototype.setChunks = function(t, e) {
        var i = t.slice(0, e).join("").length;
        this.$textarea.val(t.join("")), this.$textarea.prop("selectionEnd", i), this.$textarea.prop("selectionStart", i), this.$textarea.focus()
    }, o.prototype.toggleForm = function(t) {
        this.$form && (this.$form.toggleClass("active", !!t), this.$btn.toggleClass("active", !!t), t ? this.$input.attr("disabled", !1).focus() : this.$input.attr("disabled", !0).blur())
    }, o.prototype.insertTag = function(t) {
        var e = !0,
            i = 4,
            n = this.tag,
            o = this.bbCodes.getChunks();
        t && (e = t(o), e.tag && (n = e.tag), e.chunks && (o = e.chunks)), n && e && ("string" == typeof n ? (i = 3, o.splice(2, 0, n)) : "object" == typeof n && ("" === o[1] && (i = 3), o.splice(2, 0, n[1]), o.splice(1, 0, n[0])), this.bbCodes.setChunks(o, i), this.toggleForm(!1))
    }, n.prototype.getConfigs = function() {
        return {
            _defaults: {
                clickNoForm: function(t) {
                    t.preventDefault(), this.insertTag()
                },
                clickForm: function(t) {
                    t.preventDefault(), this.toggleForm(!0), this.$input.val("").focus()
                }
            },
            bold: {
                tooltip: $.t("Bold"),
                tag: ["[b]", "[/b]"]
            },
            italic: {
                tooltip: $.t("Italic"),
                tag: ["[i]", "[/i]"]
            },
            list: {
                tooltip: $.t("List or list item"),
                tag: {
                    list: ["[list]\n[*]", "\n[/list]"],
                    item: ["\n[*]", ""]
                },
                click: function(t) {
                    t.preventDefault(), this.insertTag(function(t) {
                        var e = !1;
                        return t[0].replace(/\[(\/)?list\]/gi, function(t, i) {
                            e = !i
                        }), e ? {
                            tag: this.tag.item
                        } : {
                            tag: this.tag.list
                        }
                    }.bind(this))
                }
            },
            link: {
                tooltip: $.t("URL"),
                placeholder: $.t("URL"),
                submit: function(t) {
                    t.preventDefault(), this.insertTag(function(t) {
                        var e = this.$input.val(),
                            i = /(https?:\/\/|www\.)[^\s\/$.?#].[^\s]*/.test(e);
                        return this.$input.val(""), e ? i ? {
                            tag: ["[url=" + e + "]", "[/url]"]
                        } : (this.bbCodes.showError($.t("Please enter a valid URL")), !1) : (this.toggleForm(!1), !1)
                    }.bind(this))
                }
            },
            embed: {
                tooltip: $.t("Idea or chart snapshot image"),
                placeholder: $.t("Published idea or chart image URL"),
                submit: function(t) {
                    t.preventDefault(), this.insertTag(function(t) {
                        var e = this.$input.val(),
                            i = /\/(v|(chart\/[0-9a-zA-Z:+*\-()!]+?)|script)\/[0-9a-zA-Z]{8}/.test(e),
                            n = /\/(i|x)\/[0-9a-zA-Z]{8}/.test(e);
                        return this.$input.val(""), !e || i || n ? i ? {
                            tag: "[chart]" + e + "[/chart]"
                        } : n ? {
                            tag: "[image]" + e + "[/image]"
                        } : void 0 : (this.bbCodes.showError($.t("Please enter a valid idea URL or chart image URL")), !1)
                    }.bind(this))
                }
            },
            symbol: {
                tooltip: $.t("Symbol"),
                placeholder: $.t("Symbol"),
                init: function() {
                    r.bindToInput(this.$input, {
                        ignoreInterval: !0,
                        callback: this.bbCodes.configs[this.name].submit.bind(this)
                    })
                },
                submit: function(t) {
                    t && t.preventDefault && t.preventDefault(), this.insertTag(function(t) {
                        var e = this.$input.val();
                        return this.$input.val(""), "" === t[1] && (t[1] = e), {
                            tag: ['[symbol="' + e + '"]', "[/symbol]"],
                            chunks: t
                        }
                    }.bind(this))
                }
            }
        }
    }, t.exports = n
}, function(t, e, i) {
    (function(e, n, o, r) {
        "use strict";
        var s = i(11),
            a = i(14),
            l = i(16),
            c = function() {
                function t(i) {
                    var n, o, r;
                    if (!(this instanceof t)) throw new TypeError("SymbolSearch is a constructor");
                    if (this._inputParserMixin = e.enabled("symbol_search_parser_mixin") && t.canShowSpreadActions() ? new s(this) : void 0, i = i || {}, this._inputElement = $(i.input).get(0), !this._inputElement) throw new TypeError("options.input must be a DOM element, jQuery object or selector");
                    if (this.$list = $(i.list).eq(0), 0 === this.$list.size() && delete this.$list, void 0 !== i.callback) {
                        if ("function" != typeof i.callback) throw new TypeError("options.callback must be function");
                        this._callback = i.callback
                    }
                    if (void 0 !== i.onValueChanged) {
                        if ("function" != typeof i.onValueChanged) throw new TypeError("options.onValueChanged must be function");
                        this._onValueChanged = i.onValueChanged
                    }
                    if (void 0 !== i.onEmptyApply) {
                        if ("function" != typeof i.onEmptyApply) throw new TypeError("options.onEmptyApply must be function");
                        this._onEmptyApply = i.onEmptyApply
                    }
                    if (i.ignoreInterval && (this._ignoreInterval = !0), t.resetStoredInterval(), i.hidePro && (this._hidePro = !0), i.allowMultipleSymbols && (this._allowMultipleSymbols = !0), void 0 !== i.onParse) {
                        if ("function" != typeof i.onParse) throw new TypeError("options.onParse must be function");
                        this._onParse = i.onParse
                    }
                    for (this._state = {}, this._quandlFilter = new m(T), $(this._inputElement).data("symbol-search-instance", this), n = this._boundListener = this._eventListener.bind(this), o = this.boundTimeoutListener = function(t) {
                        setTimeout(function() {
                            n(t)
                        }, 0)
                    }, r = 0; r < x.length; r++) x[r].immediate ? $(this._inputElement).on(x[r].name, n) : $(this._inputElement).on(x[r].name, o);
                    this._boundOnKeyDown = this._onKeyDown.bind(this), this._boundOnKeyPress = this._onKeyPress.bind(this), $(this._inputElement).on("keydown", this._boundOnKeyDown).on("keypress", this._boundOnKeyPress), this._eventListener(), i.autoFocus && t.registerAutoFocus(this)
                }

                function c(t, e) {
                    var i = ChartApiInstance.supportedSymbolsTypes(),
                        n = TVSettings.getValue("symboledit.filter");
                    return !i.some(function(t) {
                        return t.value === n
                    }) && i.length > 0 && (n = i[0].value), 0 === i.length ? !1 : (i.forEach(function(i) {
                        var o = i.value,
                            r = $('<a class="type-filter">').attr("href", "#" + o).text($.t(i.name));
                        o === n && r.addClass("active"), r.on("click", function(i) {
                            i.preventDefault(), e.find(".type-filter").removeClass("active"), $(this).addClass("active"), t.typeFilter(o), TVSettings.setValue("symboledit.filter", o)
                        }), r.appendTo(e)
                    }), t.typeFilter(n), !0)
                }

                function h() {
                    var t = ChartApiInstance.supportedExchangesList(),
                        e = {
                            BMFBOVESPA: "brasil"
                        };
                    return t.filter(function(t) {
                        return t.flag
                    }).forEach(function(t) {
                        e[t.value] = t.flag, t.value !== t.name && (e[t.name] = t.flag)
                    }), e
                }

                function d(t, e) {
                    function i(t) {
                        var e = n[t];
                        e && (o = o.concat(e.sort(function(t, e) {
                            return t.name.localeCompare(e.name)
                        })), delete n[t])
                    }
                    var n, o, r = RegExp("country-([a-z*]+)", "i"),
                        s = Object.keys(P).filter(function(t) {
                            return "forex" !== t && "bitcoin" !== t
                        }).sort(),
                        a = ["forex", "country-usa", "country-canada", "country-uk", "country-europe", "country-austria", "country-germany", "country-ireland", "country-italy", "country-norway", "country-spain", "country-sweden", "country-switzerland", "country-turkey", "country-brasil", "country-*", "country-japan", "country-russia", "bitcoin"];
                    return e && e.order && (a = e.order), n = {}, $.each(P, function(t) {
                        n[t] = []
                    }), o = [], t.forEach(function(t) {
                        t.flag && n[t.flag].push(t), t.value || o.push(t)
                    }), a.forEach(function(t) {
                        var e, n;
                        "forex" === t || "bitcoin" === t ? i(t) : (e = r.exec(t), n = e && e[1], "*" === n ? s.forEach(function(t) {
                            i(t)
                        }) : i(n))
                    }), $.each(n, function(t) {
                        i(t)
                    }), o
                }

                function u(t, i) {
                    var o, r, s, a = e.enabled("symbol_search_flags") ? d(ChartApiInstance.supportedExchangesList()) : ChartApiInstance.supportedExchangesList();
                    return e.enabled("symbol_search_limited_exchanges") && (a = a.filter(function(t) {
                        return !("bitcoin" === t.flag || t.hideInSymbolSearch)
                    })), o = TVSettings.getValue("symboledit.exchangefilter"), "bovespa" !== TradingView.widgetCustomer ? (!a.some(function(t) {
                        return t.value === o
                    }) && a.length > 0 && (o = a[0].value), 0 === a.length ? !1 : (r = $('<div id="exchange-filter" class="exchange-filter">').appendTo(i), s = $("<select>").appendTo(r), a.forEach(function(t) {
                        var e = t.value,
                            i = t.name || e,
                            r = t.desc || i,
                            a = $("<option>").addClass("filter-item").attr("value", e).text($.t(i)).data("custom-option-text", $.t(r)).appendTo(s),
                            l = P[t.flag];
                        l && a.data("custom-option-prepend", n(P[t.flag], {
                            "class": "flag sbIcon"
                        })), t.value === o && a.attr("selected", !0)
                    }), s.change(function() {
                        var e = $(this).val() || "";
                        TVSettings.setValue("symboledit.exchangefilter", e), t.setExchangeFilter(e)
                    }), s.selectbox({
                        speed: 0,
                        useCustomPrependWithSelector: "after",
                        customPrependSelectorClass: "exchange-with-flag",
                        classHolder: "tv-unstyled-select-container tv-symbol-select",
                        classOptions: e.enabled("symbol_search_three_columns_exchanges") ? "sbOptions three-column-filter" : "sbOptions"
                    }), t.setExchangeFilter(o), !0)) : void 0
                }

                function p(t) {
                    var i, n;
                    return (e.enabled("symbol_search_quandl") && TradingView.isFeatureEnabled("quandl_search") || e.enabled("force_quandl_search")) && (t._quandlFilter.load(), i = new g(b, t._quandlFilter), i.makeQuandlFilter(t, t.$filterContainer)), n = u(t, t.$filterContainer), t.selectExchangeFilter(), n
                }

                function f(t) {
                    var e, i, n, o, r, s, a, l, h, d, u = $('<div class="symbol-edit-popup">').appendTo(document.body),
                        f = $('<div class="filter">').appendTo(u);
                    return t.$filterContainer = f, c(t, f), p(t, f), e = $('<div class="table-wrapper">').appendTo(u), i = $(t._inputElement), n = i.offset(), o = 0, r = Math.max(0, Math.min(n.left + o, $(window).width() - u.outerWidth())), u.css("left", r + "px"), u.css("top", n.top + i.outerHeight() + 1), s = parseInt($(window).height(), 10), a = f.outerHeight(), l = $(window).scrollTop(), h = i.height(), d = s - (n.top - l) - h / 2, e.css("maxHeight", d - h - a + "px"), {
                        popup: u,
                        listWrapper: e
                    }
                }

                function _(t) {
                    return t.ctrlKey ? !1 : t.metaKey ? !1 : t.charCode ? !t.which || t.which <= 32 ? !1 : /^(input|textarea)$/i.test(t.target.tagName) ? !1 : !TVDialogs.modalDialog : !1
                }

                function g(t, e) {
                    this.databases = t, this.filter = e, this.request = null, this.start = 0, this.renderCount = 100
                }

                function m(t) {
                    this.model = t
                }
                var v, y, w, b, S, T, x = [{
                        name: "input",
                        immediate: !0
                    }, {
                        name: "sync",
                        immediate: !0
                    }, {
                        name: "keypress"
                    }, {
                        name: "keydown"
                    }, {
                        name: "keyup"
                    }, {
                        name: "mousedown"
                    }, {
                        name: "mouseup"
                    }, {
                        name: "cut"
                    }, {
                        name: "paste"
                    }],
                    C = [/^e\-m/i],
                    P = {
                        canada: "flag-ca",
                        bitcoin: "flag-btc",
                        uk: "flag-uk",
                        usa: "flag-us",
                        europe: "flag-eu",
                        russia: "flag-ru",
                        japan: "flag-jp",
                        india: "flag-in",
                        forex: "flag-fx",
                        brasil: "flag-br",
                        germany: "flag-de",
                        switzerland: "flag-ch",
                        turkey: "flag-tr",
                        italy: "flag-it",
                        spain: "flag-es",
                        ireland: "flag-ie",
                        sweden: "flag-se",
                        norway: "flag-no",
                        austria: "flag-at"
                    },
                    k = null;
                return t.registerAutoFocus = function(e) {
                    if (e instanceof jQuery && (e = e.data("symbol-search-instance")), !(e instanceof t)) throw new TypeError("arg must be an SymbolSearch instance of jQuery input with bound SymbolSearch object");
                    TradingView.keyboardBinder.registerListener("symbolEdit", function(t) {
                        if (_(t)) {
                            t.preventDefault(), this.resetState(), this._skipAutoFocus = !0, this._inputElement.focus();
                            var e = String.fromCharCode(t.charCode);
                            "function" == typeof this._setInputValue ? this._setInputValue(e) : this._inputElement.value = e, this._eventListener()
                        }
                    }.bind(e))
                }, t.prototype.serachRequestDelay = 0, t.setSearchRequestDelay = function(e) {
                    t.prototype.serachRequestDelay = e
                }, t.prototype.resetState = function() {
                    this._state = {}
                }, t.prototype.typeFilter = function(t) {
                    return arguments.length > 0 ? void(t !== this._state.typeFilter && (null == t ? delete this._state.typeFilter : this._state.typeFilter = t + "", delete this._state.keepListFor, this._onSelectionChanged(), this.selectExchangeFilter())) : this._state.typeFilter
                }, t.prototype.setExchangeFilter = function(t) {
                    t !== this._state.exchangeFilter && (null == t ? delete this._state.exchangeFilter : this._state.exchangeFilter = t + "", delete this._state.keepListFor, this._onSelectionChanged())
                }, t.prototype.getExchangeFilter = function() {
                    return this._state.typeFilter === t.QUANDL ? this._quandlFilter.getValue() : this._state.exchangeFilter
                }, t.prototype._moveSelection = function(t, e) {
                    var i, n, o, r, s, a, l;
                    this._state.suggestOptions && 0 !== this._state.suggestOptions.length && (i = this.$list.find("tbody tr:not(.group-close):not(.hidden)"), n = this.$list.find("tr.symbol-edit-popup-active"), o = -1, n.size() ? (o = i.index(n), r = Math.max(0, Math.min(o + t, i.size() - 1))) : r = 0, o !== r && (s = i.eq(r), a = s.data("item"), n.length && n.removeClass("symbol-edit-popup-active"), a.groupTitle ? (s.addClass("symbol-edit-popup-active"), this._selectedGroupItem = a, delete this._state.highlightIndex, this._scrollHighlightIntoView()) : (this._selectedGroupItem && (this._selectedGroupItem = null), l = this._state.suggestOptions.indexOf(a), this._highlightOption(~l && l || 0, !0, e))))
                }, t.prototype._groupSetCollapsed = function(t, e) {
                    t.groupTitle && this._groupListHandler && this._groupListHandler.setCollapsed(t.root, e)
                }, t.prototype._onKeyDown = function(t) {
                    40 !== t.keyCode && 38 !== t.keyCode || (this._moveSelection(40 === t.keyCode ? 1 : -1, !0), t.preventDefault()), !this._selectedGroupItem || 37 !== t.keyCode && 39 !== t.keyCode || (this._groupSetCollapsed(this._selectedGroupItem, 37 === t.keyCode), t.preventDefault())
                }, t.prototype._onKeyPress = function(t) {
                    if (40 === t.keyCode || 38 === t.keyCode) {
                        if (t.charCode) return;
                        if (this._boundOnKeyDown) return $(this._inputElement).off("keydown", this._boundOnKeyDown), delete this._boundOnKeyDown, void t.preventDefault();
                        this._moveSelection(40 === t.keyCode ? 1 : -1), t.preventDefault()
                    }
                    13 === t.keyCode && (this._selectedGroupItem ? (this._groupSetCollapsed(this._selectedGroupItem, !1), t.preventDefault()) : this.acceptTypeIn())
                }, t.prototype._eventListener = function(t, e) {
                    var i, n, o, r = this._inputElement,
                        s = this._getInputValue().toUpperCase(),
                        a = !1;
                    this._state.value !== s && (ChartApiInstance._symbolSearchRequest && ChartApiInstance._symbolSearchRequest.abort(), this._state.hasOwnProperty("value") && this._onValueChanged && this._onValueChanged(s), this._state.value = s, a = !0, this._inputParserMixin && this._inputParserMixin.parse()), this._fixIntervalCase(), i = this._limitInputSelectionValue("selectionStart"), this._state.selectionStart !== i && (this._state.selectionStart = i, a = !0), n = this._limitInputSelectionValue("selectionEnd"), this._state.selectionEnd !== n && (this._state.selectionEnd = n, a = !0), this._state.selectionDirection !== r.selectionDirection && (this._state.selectionDirection = r.selectionDirection, a = !0), a && (this._onSelectionChanged(void 0, e), o = !1, this._getInputValue() !== this._state.value && (this._setInputValue(this._state.value), o = !0), (o || this._state.selectionStart !== this._limitInputSelectionValue("selectionStart") || this._state.selectionEnd !== this._limitInputSelectionValue("selectionEnd")) && r.setSelectionRange && r.setSelectionRange(this._state.selectionStart, this._state.selectionEnd, this._state.selectionDirection))
                }, t.prototype._fixIntervalCase = function() {
                    if (this._selectionInsideInterval()) {
                        var e = t.detachInterval(this._inputElement.value);
                        /[a-z]/.test(e.detached) && (this._inputElement.value = e.rest + e.detached.toUpperCase())
                    }
                }, t.prototype._selectionInsideInterval = function(e) {
                    if (this._ignoreInterval) return !1;
                    var i = t.detachInterval(this._inputElement.value);
                    return i ? "string" == typeof e ? this._inputElement[e] > i.rest.length : this._inputElement.selectionStart > i.rest.length && this._inputElement.selectionEnd > i.rest.length : !1
                }, t.prototype._limitInputSelectionValue = function(e) {
                    return this._selectionInsideInterval(e) ? t.detachInterval(this._inputElement.value).rest.length : e in this._inputElement ? this._inputElement[e] : this._inputElement.value.length
                }, t.prototype._getInputValue = function() {
                    if (this._ignoreInterval) return this._inputElement.value;
                    var e = t.detachStoreInterval(this._inputElement.value);
                    return $(this._inputElement).toggleClass("interval-error", t.intervalError()), e
                }, t.prototype._setInputValue = function(e) {
                    this._ignoreInterval ? this._inputElement.value = e : this._inputElement.value = t.recallAttachInterval(e)
                }, t.prototype._onSelectionChanged = function(t, e) {
                    function i(t, e, i, n) {
                        o._state.contextTicker = t, o._state.contextExchange = e, o._state.contextType = i, o._state.keepListFor && o._state.keepListFor === n || (o._getSuggestList(), delete o._state.keepListFor)
                    }
                    var n, o = this,
                        r = C.some(function(t) {
                            return t.test(o._state.value)
                        });
                    !r && this._inputParserMixin && e !== !0 ? this._inputParserMixin.onSelectionChanged(i) : (n = this._state.value, i(n, this.getExchangeFilter(), this._state.typeFilter, this._state._selectedTicker || n))
                }, t.prototype._clearSelectionState = function() {
                    delete this._state.contextTicker, delete this._state.contextExchange, delete this._state.contextType, delete this._state.contextToken, delete this._state.keepListFor
                }, t.prototype._clearSearchTimeout = function() {
                    this._searchTimeout && (clearTimeout(this._searchTimeout), this._searchTimeout = null)
                }, t.prototype._doGetSuggestList = function() {
                    var e, i, n, o;
                    this._clearSearchTimeout(), e = this._state.contextTicker || "", i = this._state.contextExchange || this.getExchangeFilter() || "", n = this._state.typeFilter || "", this._showLoading(), o = this, ChartApiInstance.searchSymbols(e, i, n, "undefined" != typeof chartWidget ? chartWidget : void 0, function(r) {
                        var s = e !== (o._state.contextTicker || "") || i !== (o._state.contextExchange || o.getExchangeFilter() || "") || n !== (o._state.typeFilter || "");
                        s || (n === t.QUANDL && (r = o._processQuandlResponse(r)), o._renderSuggestList(r), o._onResponse(r))
                    })
                }, t.prototype._getSuggestList = function() {
                    this._clearSearchTimeout(), this._searchTimeout = setTimeout(this._doGetSuggestList.bind(this), t.prototype.serachRequestDelay)
                }, t.prototype._showLoading = function() {
                    if (this.$list) {
                        this._clearSuggestList();
                        var t = $('<div class="symbol-search-loading">').appendTo(this.$list);
                        this._spinner = TradingView.unifiedSpinner("mini").spin(t.get(0))
                    }
                }, t.prototype._renderSuggestList = function(i) {
                    var n, o, r, s, a, l, c, h, d, u, p, f;
                    if (this.$list) {
                        if (n = this, o = this._state, this._clearSuggestList(), r = o.suggestOptions = [], s = TradingView.RegExpEscape(o.contextTicker).trim(), a = RegExp(s.replace(" ", "|"), "i" + (s.length > 1 ? "g" : "")), delete o.highlightIndex, this._hidePro && (i = i.filter(function(t) {
                                return !t.params || -1 === t.params.indexOf("pro")
                            })), 0 === i.length) return void this.$list.html('<div style="text-align: center; padding: 7px 0; font-style: italic;">' + $.t("No symbols matched your criteria") + "</div>");
                        for (l = $('<table class="symbol-edit-popup">'), c = new t.GroupListHandler(l, a), i.forEach(function(t) {
                            var e, i, o;
                            switch (t.ticker || (t.ticker = t.full_name), e = $('<tr class="symbol-edit-popup">'), i = $('<td class="symbol-edit-popup-td name apply-overflow-tooltip">'), i.html(t.symbol.replace(a, "<strong>$&</strong>")), i.appendTo(e), $('<td class="symbol-edit-popup-td desc apply-overflow-tooltip">').html(a.test(t.symbol) ? t.description : t.description.replace(a, "<strong>$&</strong>")).appendTo(e), o = $('<td class="symbol-edit-popup-td type apply-overflow-tooltip">').appendTo(e), void 0 !== t.params && ~t.params.indexOf("eod") && ($("<i>").text("eod").addClass("eod").prependTo(o), o.append("&nbsp;")), t.type) {
                                case "index":
                                    o.append($.t(t.type));
                                    break;
                                default:
                                    o.append($.t(t.type) + " - " + t.exchange)
                            }
                            o.appendTo(e), $('<td class="symbol-edit-popup-td flag apply-overflow-tooltip">').html(n._getItemFlag(t)).appendTo(e), "futures" === t.type ? c.append(t, e) : e.appendTo(l), t._$tr = e, e.data("item", t)
                        }), e.enabled("expand_symbolsearch_items") || c.collapse(), this._groupListHandler = c, h = 0, d = l.find("tr:not(.group-close)"); h < d.size(); h++) u = d.eq(h), p = u.data("item"), r.push(p), p.ticker === o.contextTicker && p.exchange === o.contextExchange && void 0 === f && (f = h);
                        "number" == typeof f && this._highlightOption(f), l.on("click", "tr", function(t) {
                            if (!t.isDefaultPrevented() && (t.preventDefault(), n._state.suggestOptions)) {
                                var e = $(this).data("item");
                                e && e.full_name && n.accept(e.full_name, e.ticker)
                            }
                        }), l.appendTo(this.$list)
                    }
                }, t.prototype._highlightOption = function(t, e, i) {
                    var n, o = this._state;
                    o.highlightIndex !== t && (void 0 !== o.highlightIndex && o.suggestOptions[this._state.highlightIndex]._$tr && o.suggestOptions[this._state.highlightIndex]._$tr.removeClass("symbol-edit-popup-active"), o.highlightIndex = t, n = o.suggestOptions[t]._$tr, n && n.addClass("symbol-edit-popup-active"), this._scrollHighlightIntoView(), e && this._replaceCurrentSymbol(i))
                }, t.prototype._scrollHighlightIntoView = function() {
                    var t = this.$list.find("tr.symbol-edit-popup-active");
                    t.length && (t.offset().top < this.$list.offset().top ? this.$list.scrollTop(this.$list.scrollTop() - (this.$list.offset().top - t.offset().top)) : t.offset().top + t.outerHeight() > this.$list.offset().top + this.$list.outerHeight() && this.$list.scrollTop(this.$list.scrollTop() + (t.offset().top + t.outerHeight() - (this.$list.offset().top + this.$list.outerHeight()))))
                }, t.prototype._clearSuggestList = function() {
                    delete this._state.suggestOptions, this._spinner && (this._spinner.stop(), delete this._spinner), this.$list && this.$list.empty()
                }, t.prototype._showErrorNotice = function() {
                    this.$list && (this._clearSuggestList(), this.$list.text("Invalid expression"))
                }, t.prototype._getItemFlag = function(t) {
                    var e = "";
                    return "forex" === t.type || "FXCM" === t.exchange ? e = "forex" : (k = k || h(), e = k[t.full_name.split(":")[0]]), e ? n(P[e], {
                        "class": e
                    }) : ""
                }, t.prototype._replaceCurrentSymbol = function(t) {
                    var e, i, n, o, r = this._state;
                    if (r.suggestOptions && void 0 !== r.highlightIndex) {
                        if (e = r.suggestOptions[r.highlightIndex], i = "", n = 0, this._inputParserMixin && t !== !0) {
                            if (o = this._inputParserMixin.replaceCurrentSymbol(e), !o.ok) return;
                            i = o.newValue, n = o.newCaretPos, r.keepListFor = o.keepListFor
                        } else i = t === !0 && e.full_name && this._inputParserMixin ? e.full_name : e.symbol, n = i.length, this._state._selectedTicker = r.keepListFor = e.ticker || e.symbol;
                        this._setInputValue(i), this._inputElement.setSelectionRange ? this._inputElement.setSelectionRange(n, n) : this._inputElement.select(), this._eventListener(void 0, t)
                    }
                }, t.prototype.splitAndAcceptUserInput = function() {
                    var t, e = this._getInputValue().split(",");
                    for (t = 0; t < e.length; t++) this.acceptSymbolIn(e[t])
                }, t.prototype.acceptSymbolIn = function(t) {
                    var e, i;
                    this._inputParserMixin ? e = this._inputParserMixin.parseSymbol(t) : (e = t, i = this._state._selectedTicker || t), this.accept(e, i)
                }, t.prototype.acceptTypeIn = function() {
                    this._allowMultipleSymbols ? this.splitAndAcceptUserInput() : this.acceptSymbolIn(this._getInputValue())
                }, t.prototype.accept = function(e, i) {
                    if (i = i || e) {
                        delete this._state.keepListFor;
                        var n = this._ignoreInterval ? void 0 : t.getInterval(!0);
                        this._inputElement.value = e, this._eventListener(), this._callback && this._callback(i, n), $(this._inputElement).trigger("accept-symbol", [i])
                    }
                }, t.prototype.bindListWrapper = function(t) {
                    if (t = $(t).eq(0), 0 === t.size()) throw new TypeError("element must be a DOM element, jQuery object or selector");
                    this.$list = t, this._clearSelectionState(), this._eventListener()
                }, t.prototype.removeListWrapper = function() {
                    delete this.$list, this._clearSuggestList(), this._clearSelectionState(), this._eventListener()
                }, t.prototype.selectExchangeFilter = function() {
                    this.$filterContainer.find(".exchange-filter").hide(), this._state.typeFilter === t.QUANDL ? this.$filterContainer.find("#quandl-filter").show() : this._state.typeFilter !== t.ECONOMIC && this.$filterContainer.find("#exchange-filter").show()
                }, t.prototype._onResponse = function(e) {
                    if (e.length > 0) {
                        var i = this._state.typeFilter;
                        i === t.QUANDL && this._showNotification()
                    }
                }, t.prototype._showNotification = function() {
                    var t, e, i;
                    TVSettings.getBool("symboledit.show_quandl_notification", !0) && (t = $.t("Quandl is a huge financial database that we have connected to TradingView. Most of its data is EOD and is not updated in real-time, however the information may be extremely useful for fundamental analysis.") + ' <a target="_blank" href="' + ("ru" === window.language ? "http://blog.tradingview.com/?p=1530&lang=ru" : "http://blog.tradingview.com/?p=1530") + '">' + $.t("Read our blog for more info!") + "</a>", e = $('<div class="symbol-edit-notification">').prependTo(this.$list), e.html(t), e.find("a").click(function(t) {
                        t.preventDefault();
                        var e = $(this).attr("href");
                        window.open(e, "_blank")
                    }), i = $('<a class="close">').appendTo(e), i.click(function() {
                        TVSettings.setValue("symboledit.show_quandl_notification", !1), e.remove()
                    }))
                }, t.prototype._processQuandlResponse = function(t) {
                    return t.datasets.filter(function(t) {
                        return !t.premium
                    }).map(function(t) {
                        return {
                            description: t.name,
                            exchange: t.database_code,
                            full_name: "QUANDL:" + t.database_code + "/" + t.dataset_code,
                            params: ["eod"],
                            symbol: t.dataset_code,
                            type: "quandl"
                        }
                    })
                }, t.showDialog = function(e) {
                    var n, o, r, a, l, h, d, u, f, _, g, m, v = i(18);
                    return e = e || {}, n = "Symbol Search", TVDialogs.get(n) ? void 0 : (o = TVDialogs.createDialog(n, {
                        hideTitle: !0,
                        hideCloseCross: !0,
                        dragHandle: ".filter",
                        width: "750px",
                        dragOptions: {
                            cancel: ".sbOptions"
                        },
                        content: v.dialogs.symbolSearch
                    }), TVDialogs.positionDialog(o), r = o.find("._tv-dialog-content").addClass("symbol-search-dialog"), a = r.find(".results"), a.mousewheel(function(t, e) {
                        var i = $(this);
                        e > 0 ? i.scrollTop(i.scrollTop() - 15) : i.scrollTop(i.scrollTop() + 15)
                    }), l = r.find("input").get(0), e.initialValue && (l.value = e.initialValue), "selectionStart" in l && (l.selectionStart = l.selectionEnd = l.value.length), l.focus(), this.canShowSpreadActions() && (e.ignoreInterval || (d = t.getInputValueGetter(l), u = t.getInputValueSetter(l)), h = s.addSpreadActions(r.find(".spread-actions"), l, d, u)), f = new t({
                        input: l,
                        list: r.find(".results").get(0),
                        callback: function(t, i) {
                            e.callback && e.callback(t, i), TVDialogs.destroy(n)
                        },
                        onParse: h,
                        ignoreInterval: e.ignoreInterval
                    }), _ = r.find(".filter"), f.$filterContainer = _, g = c(f, _), m = p(f, _), g || m || _.attr("style", "display: none"), TVDialogs.resizeContent(o.height(), a), TVDialogs.applyHandlers(o), TVDialogs.positionDialog(o), o.on("destroy", function() {
                        TVSettings.setValue("symboledit.dialog_last_entry", l.value)
                    }), o)
                }, t.bindToInput = function(i, n) {
                    function o() {
                        _ && (w.removeListWrapper(), _.off(), _.remove(), _ = null, TradingView.Tooltip.hide())
                    }

                    function r(t) {
                        t.preventDefault()
                    }

                    function a() {
                        var t, i, n, o;
                        if (_ || (t = f(w), _ = t.popup, w.bindListWrapper(t.listWrapper), _.on("focus", "*", r), _.on("click", "*", r), _.on("mousedown", "*", r)), e.enabled("charting_library_base") && (i = this._state, i.keepListFor)) {
                            if (!i.suggestOptions || void 0 === i.highlightIndex) return void delete this._state.keepListFor;
                            n = i.suggestOptions[i.highlightIndex], o = this._getInputValue().toUpperCase(), n.symbol !== o && delete this._state.keepListFor
                        }
                    }

                    function c(e, i) {
                        var n;
                        return i ? (RegExp("^" + t.QUANDL, "i").test(e) ? (n = e.split(/\//), n.length && (e = n[n.length - 1])) : e = l.seriesShortSymbol.value() || e, e) : e
                    }

                    function h(t) {
                        var e = l.symbol.value() || "";
                        e = c(e, t), i.val(e), w.resetState()
                    }
                    var d, u, p, _, g, m, v, y, w, b, S;
                    return n = n || {}, i = $(i).eq(0), d = n.callback, u = null, p = null, _ = null, m = n.spreadActions && $(n.spreadActions).eq(0), m && m.size() && this.canShowSpreadActions() && (n.ignoreInterval || (v = t.getInputValueGetter(i.get(0)), y = t.getInputValueSetter(i.get(0))), g = s.addSpreadActions(m, i.get(0), v, y)), w = new t({
                        input: i,
                        onValueChanged: a,
                        callback: function(t, e) {
                            o(), "function" == typeof p && p(t, e) || ("function" == typeof d && d(t, e), "function" == typeof u && u(t, e)), n.clearAfterAccept && i.val(""), n.keepFocus ? i.get(0).focus() : i.get(0).blur(), w.resetState()
                        },
                        hidePro: n.hidePro,
                        autoFocus: n.autoFocus,
                        onEmptyApply: n.onEmptyApply,
                        onParse: g,
                        allowMultipleSymbols: n.allowMultipleSymbols,
                        ignoreInterval: n.ignoreInterval
                    }), b = !1, i.on("focus", function(t, e) {
                        b = !0, w._skipAutoFocus ? delete w._skipAutoFocus : setTimeout(function() {
                            b && i.get(0).select()
                        }, 0)
                    }), i.on("blur", function(t) {
                        var e, n, r, s;
                        return _ && (e = document.activeElement, n = _.is(e), r = _.has(e).length > 0, s = -1 !== navigator.userAgent.indexOf("Trident") || -1 !== navigator.userAgent.indexOf("MSIE"), s && (n || r)) ? (t.preventDefault(), t.stopImmediatePropagation(), void setTimeout(function() {
                            i.focus()
                        }, 0)) : (b = !1, void setTimeout(function() {
                            b || o()
                        }, 0))
                    }), n.syncWithChartWidget && (h(!0), l.seriesShortSymbol.subscribe(function() {
                        h(!0)
                    }), u = function(t, e) {
                        t && l.symbol.setValue(t), e && l.interval.setValue(e)
                    }, p = function(t, e) {
                        return e ? !1 : t === l.symbol.value() ? !0 : t === l.seriesShortSymbol.value() ? !0 : void 0
                    }, S = function() {
                        i.get(0).blur(), h(!1)
                    }, i.on("keypress", function(t) {
                        27 === t.keyCode && S()
                    }), i.on("keydown", function(t) {
                        27 === t.keyCode && S()
                    })), w
                }, t.GroupListHandler = function(t, e) {
                    this._$container = t, this._tickerRegExp = e, this._roots = {}
                }, t.GroupListHandler.prototype.addRoot = function(t, e, i, n) {
                    var o, r = this,
                        s = n.clone().addClass("group-title").click(function(e) {
                            e.preventDefault(), r[s.hasClass("collapsed") ? "expand" : "collapse"](t)
                        });
                    s.find("td.name").html("<div>" + e.replace(this._tickerRegExp, "<strong>$&</strong>") + "</div>"), s.find("td.type").html(i.type + (i.exchange && " - " + i.exchange || "")), s.appendTo(this._$container), s.data("item", {
                        groupTitle: !0,
                        root: t
                    }), o = $('<tr class="group-close"><td colspan="3"></td></tr>').appendTo(this._$container), this._roots[t] = {
                        titleRow: s,
                        closeRow: o
                    }
                }, t.GroupListHandler.prototype.append = function(t, e) {
                    var i, n, o = ChartApiInstance.futuresRegex(),
                        r = o.exec(t.symbol + "");
                    return r ? (i = r[1], n = (t.exchange || "unknown") + "_" + i, this._roots[n] || this.addRoot(n, i, t, e), void e.addClass("root-" + n).insertBefore(this._roots[n].closeRow)) : void e.appendTo(this._$container)
                }, t.GroupListHandler.prototype.setCollapsed = function(t, e) {
                    var i;
                    if (t) this._roots[t] && (i = e === !0 ? "addClass" : "removeClass", this._roots[t].titleRow[i]("collapsed"), this._$container.find("tr.root-" + t)[i]("hidden"));
                    else
                        for (t in this._roots) this.setCollapsed(t, e)
                }, t.GroupListHandler.prototype.collapse = function(t) {
                    this.setCollapsed(t, !0)
                }, t.GroupListHandler.prototype.expand = function(t) {
                    this.setCollapsed(t, !1)
                }, t.isIntervalInit = function(t) {
                    return /[\d,]/.test(t) && e.enabled("show_interval_dialog_on_key_press")
                }, t.isIntervalChar = function(t) {
                    return e.enabled("seconds_resolution") ? /[\dhdwms]/i.test(t) : /[\dhdwm]/i.test(t)
                }, t.parseIntervalValue = function(t) {
                    var e = /^[,\s]*(\d*)\s*([hdwms]?)\s*$/i.exec(t) || [],
                        i = ~~e[1],
                        n = e[2] && e[2].toUpperCase(),
                        o = {
                            qty: !i && n ? 1 : i,
                            unit: n || null
                        };
                    return o.error = !i && !n, o.intraday = !(o.error || o.unit && "H" !== o.unit), o
                }, t.sanitizeIntervalValue = function(e) {
                    var i = t.parseIntervalValue(e),
                        n = i.qty,
                        o = i.unit;
                    return i.error ? null : ("H" === o && (n *= 60, o = null), n && !o ? n + "" : o && (!n || 1 === n && "S" !== o) ? o : n + o)
                }, t.detachInterval = function(t) {
                    var e = /,[^,]*$/i.exec(t) || [];
                    if (e[0]) return {
                        rest: t.substr(0, t.length - e[0].length),
                        detached: e[0]
                    }
                }, t.intervalIsSupported = function(i) {
                    var n, o, r;
                    return e.enabled("allow_supported_resolutions_set_only") ? (n = this.sanitizeIntervalValue(i), null === n ? !1 : a.isAvailable(n)) : (o = t.parseIntervalValue(i), o.error ? !1 : o.intraday ? l.intraday.value() : (r = l.supportedResolutions.value(), r ? !!~r.indexOf(o.unit) : !0))
                },
                    function() {
                        var e = "",
                            i = null;
                        t.resetStoredInterval = function() {
                            e = "", i = null
                        }, t.detachStoreInterval = function(n) {
                            var o = t.detachInterval(n);
                            return o ? (e = o.detached, i = t.sanitizeIntervalValue(e), o.rest) : (t.resetStoredInterval(), n)
                        }, t.recallAttachInterval = function(t) {
                            return t + e
                        }, t.getInterval = function(e) {
                            var n = i;
                            return e === !0 && t.resetStoredInterval(), n
                        }, t.getInputValueGetter = function(e) {
                            return function() {
                                return t.detachStoreInterval(e.value)
                            }
                        }, t.getInputValueSetter = function(e) {
                            return function(i) {
                                e.value = t.recallAttachInterval(i)
                            }
                        }, t.intervalError = function() {
                            return !e || /^,\s*$/.test(e) ? !1 : !i
                        }
                    }(), t.registerDialogKeypressHandler = function(e) {
                    if (!e) throw new TypeError("chartWidget is required");
                    TradingView.keyboardBinder.pushBackListener("symbolEdit", function(e) {
                        var n, o = i(19);
                        _(e) && (e.preventDefault(), n = String.fromCharCode(e.charCode), t.isIntervalInit(n) ? new o({
                            callback: function(t) {
                                l.interval.setValue(t)
                            }
                        }).show(n) : t.showDialog({
                            initialValue: n,
                            callback: function(t, e) {
                                l.symbol.setValue(t), e && l.interval.setValue(e)
                            }
                        }))
                    })
                }, t.canShowSpreadActions = function() {
                    return void 0 !== s && "cme" !== TradingView.widgetCustomer && "bovespa" !== TradingView.widgetCustomer;
                }, t.QUANDL = "quandl", t.ECONOMIC = "economic", t.QUANDL_API_KEY = "qehT7XPzZvLj-wmBB7Gk", v = o.Model.extend({
                    defaults: {
                        database_code: null,
                        name: null
                    },
                    getName: function() {
                        return 0 === this.get("database_code").length ? this.get("name") : this.get("database_code")
                    },
                    getDesc: function() {
                        return 0 === this.get("database_code").length ? this.get("name") : this.get("database_code") + " - " + this.get("name")
                    }
                }), y = function() {}, w = o.Collection.extend({
                    url: "https://www.quandl.com/api/v3/databases.json",
                    model: v,
                    initialize: function(t) {
                        this.next_page = 1, this.prev_page = null
                    },
                    parse: function(t) {
                        return this.next_page = t.meta.next_page, this.prev_page = t.meta.prev_page, r.where(t.databases, {
                            premium: !1
                        })
                    },
                    loadMore: function() {
                        if (null == this.next_page) throw new y("No bliny left.");
                        return this.fetch({
                            remove: !1,
                            data: {
                                page: this.next_page,
                                api_key: t.QUANDL_API_KEY
                            }
                        })
                    }
                }), b = new w, S = "", T = new v({
                    database_code: S,
                    name: "All providers",
                    id: 0
                }), g.prototype.renderItem = function(t) {
                    var e = t.get("database_code"),
                        i = t.getName(),
                        n = t.getDesc(),
                        o = $("<option>").addClass("filter-item").attr("value", e).text(i).data("custom-option-text", n).appendTo(this.$providerSelect);
                    e === this.filter.getValue() && o.attr("selected", !0)
                }, g.prototype.renderListTip = function() {
                    var t = this,
                        e = [T];
                    "" !== this.filter.getValue() && e.push(this.filter.model), r.each(e, function(e) {
                        t.renderItem(e)
                    }), this.$providerSelect.selectbox("refresh", this.start), this.start += e.length
                }, g.prototype.renderList = function() {
                    var t = this,
                        e = this.databases.slice(this.start, this.start + this.renderCount);
                    r.each(e, function(e) {
                        var i = e.get("database_code");
                        i !== t.filter.getValue() && t.renderItem(e)
                    }), this.$providerSelect.selectbox("refresh", this.start), this.start += e.length
                }, g.prototype.showSpinner = function() {
                    var t = this.$providerSelect.selectbox("option", "sbOptions"),
                        e = $('<li class="spinner-container">').appendTo(t);
                    TradingView.unifiedSpinner("mini").spin(e.get(0))
                }, g.prototype.hideSpinner = function() {
                    var t = $(this.$providerSelect.selectbox("option", "sbOptions"));
                    t.find(".spinner-container").remove()
                }, g.prototype.loadMore = function() {
                    var t = this;
                    if (!(this.request || this.start < this.databases.length)) try {
                        this.request = this.databases.loadMore(), this.showSpinner(), this.request.done(this.renderList.bind(this)).always(function() {
                            t.$providerSelect.selectbox("close").selectbox("open"), delete t.request, t.hideSpinner()
                        })
                    } catch (e) {
                        if (!(e instanceof y)) throw e
                    }
                }, g.prototype.makeQuandlFilter = function(t, e) {
                    var i, n = $('<div id="quandl-filter" class="exchange-filter">').appendTo(e);
                    this.$providerSelect = $("<select>").appendTo(n), this.$providerSelect.selectbox({
                        speed: 0,
                        classHolder: "tv-unstyled-select-container tv-symbol-select",
                        classOptions: "sbOptions tv-quandl-select",
                        onOpen: this.onOpen.bind(this)
                    }), i = this.$providerSelect.selectbox("option", "sbOptions"), this.addScrollListener(i), this.renderListTip(), this.renderList(), this.addChangeListener(t)
                }, g.prototype.onOpen = function() {
                    0 === b.length && this.loadMore()
                }, g.prototype.addScrollListener = function(t) {
                    var e = this,
                        i = 0,
                        n = 20,
                        o = function(t) {
                            var o = $(this).scrollTop();
                            o > i && o > $(this).get(0).scrollHeight - $(this).height() - n && (e.renderList(), e.loadMore()), i = o
                        };
                    t.scroll(o)
                }, g.prototype.addChangeListener = function(t) {
                    var e = this;
                    this.$providerSelect.change(function() {
                        var i = $(this).val() || "";
                        "" === i ? e.filter.model = T : e.filter.model = e.databases.findWhere({
                            database_code: i
                        }), e.filter.save(), t._onSelectionChanged()
                    })
                }, m.prototype.getValue = function() {
                    return this.model.get("database_code")
                }, m.prototype.load = function() {
                    var t = TVSettings.getJSON("symboledit.quandlprovider");
                    return t && (this.model = new v(t)), this.model
                }, m.prototype.save = function() {
                    TVSettings.setJSON("symboledit.quandlprovider", this.model)
                }, t
            }();
        t.exports = c
    }).call(e, i(3), i(5), i(7), i(8))
}, function(t, e, i) {
    (function(t) {
        var e = function() {
            var t, i, n, o, r, s, a, l, c, h, d = {};
            if (void 0 !== e) return e;
            t = {
                custom_items_in_context_menu: {},
                websocket_connection: {},
                countdown: {},
                extended_hours: {},
                symbol_search_parser_mixin: {},
                show_pro_features: {},
                daily_timeframe_suffix: {},
                symbollist_context_menu: {},
                pay_attention_to_ticker_not_symbol: {},
                graying_disabled_tools_enabled: {},
                update_study_formatter_on_symbol_resolve: {},
                constraint_dialogs_movement: {},
                same_data_requery: {},
                phone_verification: {},
                show_interval_dialog_on_key_press: {},
                header_interval_dialog_button: {
                    subsets: ["show_interval_dialog_on_key_press"]
                },
                header_fullscreen_button: {},
                header_symbol_search: {},
                header_resolutions: {
                    subsets: ["header_interval_dialog_button"]
                },
                header_chart_type: {},
                header_settings: {},
                header_indicators: {},
                header_compare: {},
                header_undo_redo: {},
                header_screenshot: {},
                header_saveload: {},
                header_saveload_to_the_right: {},
                header_widget: {
                    subsets: ["header_widget_dom_node", "header_symbol_search", "header_resolutions", "header_chart_type", "header_settings", "header_indicators", "header_compare", "header_undo_redo", "header_fullscreen_button", "compare_symbol"]
                },
                compare_symbol: {
                    subsets: ["header_compare"]
                },
                chart_property_page: {
                    subsets: ["chart_property_page_style", "chart_property_page_scales", "chart_property_page_background", "chart_property_page_timezone_sessions", "chart_property_page_evetns_alerts", "chart_property_page_trading", "chart_property_page_template_button"]
                },
                disable_userlink_popup: {},
                left_toolbar: {},
                control_bar: {},
                widget_logo: {},
                timeframes_toolbar: {},
                edit_buttons_in_legend: {},
                pane_context_menu: {},
                scales_context_menu: {},
                legend_context_menu: {},
                context_menus: {
                    subsets: ["pane_context_menu", "scales_context_menu", "legend_context_menu"]
                },
                items_favoriting: {},
                save_chart_properties_to_local_storage: {},
                use_localstorage_for_settings: {
                    subsets: ["items_favoriting", "save_chart_properties_to_local_storage"]
                },
                plain_studymarket: {},
                trading_watch_positions: {},
                disable_resolution_rebuild: {},
                border_around_the_chart: {},
                narrow_chart_enabled: {},
                charting_library_debug_mode: {},
                log_data_request_time: {},
                saveload_requires_authentication: {},
                saveload_storage_customization: {},
                new_chart_creation_available: {},
                volume_force_overlay: {},
                create_volume_indicator_by_default: {},
                saved_charts_count_restriction: {},
                lean_chart_load: {},
                stop_study_on_restart: {},
                star_some_intervals_by_default: {},
                predefined_items_only_may_be_starred: {},
                move_logo_to_main_pane: {},
                show_logo_on_all_charts: {},
                link_to_tradingview: {},
                right_bar_stays_on_scroll: {},
                chart_content_overrides_by_deafults: {},
                14851: {},
                show_dialog_on_snapshot_ready: {},
                allow_supported_resolutions_set_only: {},
                study_market_minimized: {},
                widgetbar_tabs: {},
                collapsible_header: {},
                show_extension_popup: {},
                study_templates: {},
                side_toolbar_in_fullscreen_mode: {},
                remove_library_container_border: {},
                whotrades_auth_only: {},
                support_multicharts: {},
                display_market_status: {},
                datasource_copypaste: {},
                line_tool_templates: {},
                expand_symbolsearch_items: {},
                symbol_search_three_columns_exchanges: {},
                symbol_search_flags: {},
                symbol_search_limited_exchanges: {},
                symbol_search_quandl: {},
                footer_share_buttons: {},
                footer_publish_idea_button: {},
                text_notes: {},
                symbol_info: {},
                no_bars_status: {},
                clear_bars_on_series_error: {},
                hide_loading_screen_on_series_error: {},
                seconds_resolution: {},
                dont_show_boolean_study_arguments: {},
                hide_last_na_study_output: {},
                price_scale_always_last_bar_value: {},
                cqg_trading_confirm_risks: {},
                trading_notifications: {},
                linetoolpropertieswidget_template_button: {},
                use_overrides_for_overlay: {},
                timezone_menu: {},
                onchart_messages: {},
                custom_resolutions_box: {},
                referral_program_for_widget_owners: {},
                referral_program_policy_aggressive: {
                    subsets: ["referral_program_policy_passive", "referral_program_policy_normal"]
                },
                referral_program_policy_normal: {
                    subsets: ["referral_program_policy_passive", "header_fake_features_buttons", "custom_resolutions_box"]
                },
                tv_production: {
                    subsets: ["show_pro_features", "countdown", "extended_hours", "symbol_search_parser_mixin", "symbollist_context_menu", "websocket_connection", "header_fullscreen_button", "header_widget", "left_toolbar", "control_bar", "timeframes_toolbar", "context_menus", "edit_buttons_in_legend", "use_localstorage_for_settings", "saveload_requires_authentication", "volume_force_overlay", "new_chart_creation_available", "saved_charts_count_restriction", "create_volume_indicator_by_default", "charts_auto_save", "right_bar_stays_on_scroll", "save_old_chart_before_save_as", "chart_property_page_trading", "chart_content_overrides_by_deafults", "alerts", "show_dialog_on_snapshot_ready", "show_extension_popup", "header_saveload", "header_saveload_to_the_right", "header_layouttoggle", "datasource_copypaste", "alerts", "show_saved_watchlists", "watchlists_from_to_file", "chart_property_page", "show_chart_property_page", "support_multicharts", "display_market_status", "support_manage_drawings", "widgetbar_tabs", "study_templates", "collapsible_header", "line_tool_templates", "caption_buttons_text_if_possible", "footer_share_buttons", "footer_publish_idea_button", "text_notes", "trading_watch_positions", "symbol_info", "linetoolpropertieswidget_template_button", "cqg_trading_confirm_risks", "trading_notifications", "symbol_search_three_columns_exchanges", "symbol_search_flags", "symbol_search_limited_exchanges", "symbol_search_quandl", "phone_verification", "chart_events", "onchart_messages", "custom_resolutions_box", "compare_symbol", "timezone_menu"]
                },
                browser_extension: {
                    subsets: ["disable_userlink_popup", "show_pro_features", "show_saved_watchlists", "display_market_status", "widgetbar_tabs"]
                },
                widget: {
                    subsets: ["show_pro_features", "countdown", "extended_hours", "symbol_search_parser_mixin", "symbollist_context_menu", "websocket_connection", "left_toolbar", "control_bar", "timeframes_toolbar", "context_menus", "edit_buttons_in_legend", "use_localstorage_for_settings", "saveload_requires_authentication", "volume_force_overlay", "create_volume_indicator_by_default", "right_bar_stays_on_scroll", "show_dialog_on_snapshot_ready", "header_widget_dom_node", "header_symbol_search", "header_resolutions", "header_chart_type", "header_compare", "header_indicators", "header_resolutions", "header_symbol_search", "header_widget_dom_node", "left_toolbar", "saveload_requires_authentication", "show_dialog_on_snapshot_ready", "star_some_intervals_by_default", "symbol_search_parser_mixin", "symbollist_context_menu", "timeframes_toolbar", "use_localstorage_for_settings", "volume_force_overlay", "websocket_connection", "display_market_status", "symbol_info", "linetoolpropertieswidget_template_button", "symbol_search_three_columns_exchanges", "symbol_search_flags", "symbol_search_limited_exchanges", "widgetbar_tabs", "force_quandl_search", "compare_symbol", "timezone_menu"]
                },
                bovespa_widget: {
                    subsets: ["widget", "header_settings", "extended_hours", "chart_property_page_timezone_sessions", "linetoolpropertieswidget_template_button"]
                },
                charting_library_base: {
                    subsets: ["14851", "adapt_onchart_logo_background", "allow_supported_resolutions_set_only", "border_around_the_chart", "collapsible_header", "constraint_dialogs_movement", "context_menus", "control_bar", "create_volume_indicator_by_default", "custom_items_in_context_menu", "datasource_copypaste", "daily_timeframe_suffix", "display_market_status", "edit_buttons_in_legend", "graying_disabled_tools_enabled", "header_widget", "lean_chart_load", "left_toolbar", "trading_watch_positions", "link_to_tradingview", "pay_attention_to_ticker_not_symbol", "plain_studymarket", "predefined_items_only_may_be_starred", "refresh_saved_charts_list_on_dialog_show", "right_bar_stays_on_scroll", "saveload_storage_customization", "show_dialog_on_snapshot_ready", "stop_study_on_restart", "study_market_minimized", "timeframes_toolbar", "update_study_formatter_on_symbol_resolve", "update_timeframes_set_on_symbol_resolve", "use_localstorage_for_settings", "volume_force_overlay", "widget_logo", "countdown", "use_overrides_for_overlay", "trading_notifications", "compare_symbol", "symbol_info", "timezone_menu", "show_chart_property_page", "chart_property_page_style", "chart_property_page_scales", "chart_property_page_background", "chart_property_page_timezone_sessions", "chart_property_page_evetns_alerts"]
                },
                charting_library: {
                    subsets: ["charting_library_base", "header_screenshot", "header_saveload"]
                },
                static_charts_service: {
                    subsets: ["charting_library", "disable_resolution_rebuild", "log_data_request_time", "same_data_requery"]
                },
                trading_terminal: {
                    subsets: ["charting_library_base", "header_saveload_to_the_right", "header_saveload", "support_multicharts", "header_layouttoggle", "chart_property_page_trading"]
                },
                cqg_terminal: {
                    subsets: ["charting_library_base", "chart_property_page_trading", "header_saveload", "header_saveload_to_the_right", "expand_symbolsearch_items", "caption_buttons_text_if_possible", "clear_bars_on_series_error", "no_bars_status", "hide_loading_screen_on_series_error", "support_multicharts", "header_layouttoggle", "same_data_requery"]
                },
                amp_terminal: {
                    subsets: ["cqg_terminal"]
                }
            }, i = {};
            for (n in t) {
                for (o = t[n].subsets || [], r = 0; r < o.length; ++r) i[o[r]] = 1;
                i[n] = 1
            }
            s = {};
            for (n in i)
                for (a in i) l = t[a], void 0 !== l && l.subsets && l.subsets.indexOf(n) >= 0 && (s.hasOwnProperty(n) || (s[n] = []), s[n].push(a));
            return c = {}, h = function(t) {
                return c[t]
            }, d.enabled = function(t) {
                var i, n, o = s.hasOwnProperty(t) ? s[t] : [];
                if (0 == h(t)) return !1;
                for (i = h(t), n = 0; n < o.length; ++n) i |= e.enabled(o[n]);
                return i
            }, d._uniqueSets = function() {
                return Object.keys(i)
            }, d.enable = function(t) {
                c[t] = !0
            }, d.setEnabled = function(t, e) {
                c[t] = e
            }, "undefined" != typeof __initialDisabledFeaturesets && __initialDisabledFeaturesets && __initialDisabledFeaturesets.forEach(function(t) {
                d.setEnabled(t, !1)
            }), "undefined" != typeof __initialEnabledFeaturesets && __initialEnabledFeaturesets && __initialEnabledFeaturesets.forEach(function(t) {
                d.enable(t)
            }), d
        }();
        window.Featuresets = e, void 0 !== t && t && t.exports && (t.exports = e)
    }).call(e, i(4)(t))
}, , , , , , , , function(t, e, i) {
    "use strict";

    function n(t) {
        this._search = t
    }
    var o = i(12);
    n.prototype._isEntityToken = function(t) {
        return t instanceof o.SymbolToken || t instanceof o.NumberToken
    }, n.prototype.parse = function() {
        var t, e = this._search,
            i = e._state,
            n = $(e._inputElement);
        i.parsed = o.tokenize(e._state.value, {
            recover: !0
        }), n.removeClass("incomplete error"), t = o.validate(e._state.parsed), i.isError = !!t.errors, i.isIncomplete = !!t.warnings, i.isEmpty = !!t.isEmpty, i.isError ? n.addClass("error") : i.isIncomplete && !i.isEmpty && n.addClass("incomplete"), t.errors || "var" === t.currentState || i.parsed.push(new o.IncompleteSymbolToken("")), e._onParse && e._onParse(i.parsed, t)
    }, n.prototype.onSelectionChanged = function(t) {
        var e, i, n, r = this._search,
            s = this._getSelectedToken();
        this._isEntityToken(s) && r.$list ? (s instanceof o.SymbolToken ? (e = s.ticker() || "", i = s.exchange() || r.getExchangeFilter() || "", n = r._state.typeFilter || "") : (e = s.value || "", i = r.getExchangeFilter() || "", n = r._state.typeFilter || ""), r._state.contextToken = s, e === r._state.contextTicker && i === r._state.contextExchange && n === r._state.contextType || t(e, i, n, "" + s)) : r._state.contextToken && (r._clearSuggestList(), r._clearSelectionState())
    }, n.prototype.replaceCurrentSymbol = function(t) {
        var e, i, n, o = this._search,
            r = o._state;
        return r.contextToken ? (e = "", i = 0, n = r.contextToken, t.full_name ? (n.value = t.full_name, n.parse(), n.hasOwnProperty("_exchange") || TradingView.logError("Can't find exchange in full_name (" + t.full_name + ")"), n.hasOwnProperty("_ticker") || TradingView.logError("Can't find ticker in full_name (" + t.full_name + ")")) : (n.exchange(t.exchange), n.ticker(t.symbol), n.value = "" + n), r.parsed.forEach(function(t) {
            e += t.hasOwnProperty("value") ? t.value : "" + t, t === n && (i = e.length)
        }), {
            ok: !0,
            newValue: e,
            newCaretPos: i,
            keepListFor: "" + n
        }) : {
            ok: !1
        }
    }, n.prototype._getSelectedToken = function() {
        var t, e, i, n, o = this._search,
            r = o._state,
            s = 0;
        for (t = 0; t < r.parsed.length; t++)
            if (e = r.parsed[t], i = s, s += e.value.length, n = s, r.selectionStart >= i && (r.selectionEnd < n || r.selectionEnd === n && !this._isEntityToken(r.parsed[t + 1]))) return e
    }, n.prototype.parseSymbol = function(t) {
        var e = this._search,
            i = o.tokenize(t, {
                recover: !0
            }),
            n = o.validate(i);
        return n.warnings || n.errors ? ("" === t.trim() && e._onEmptyApply && e._onEmptyApply(), "") : (o.normalizeTokens(i), i = o.factorOutBraces(i), i.join(""))
    }, n.addSpreadActions = function(t, e, i, n) {
        function r(t) {
            var o = "function" == typeof i ? i() : e.value,
                r = o + t;
            "function" == typeof n ? n(r) : e.value = r, e.selectionStart = e.selectionEnd = r.length, $(e).trigger("sync")
        }
        var s = [{
            className: "div",
            insert: "/",
            type: "binaryOp"
        }, {
            className: "minus",
            insert: "-",
            type: "binaryOp"
        }, {
            className: "plus",
            insert: "+",
            type: "binaryOp"
        }, {
            className: "mult",
            insert: "*",
            type: "binaryOp"
        }, {
            className: "power",
            insert: "^",
            type: "binaryOp"
        }, {
            className: "flip",
            type: "complete",
            callback: function() {
                var t, r = o.tokenize("function" == typeof i ? i() : e.value, {
                        recover: !0
                    }),
                    s = o.validate(r);
                s.errors || s.warnings || (t = o.flip(r).join(""), "function" == typeof n ? n(t) : e.value = t, e.selectionStart = e.selectionEnd = t.length, $(e).trigger("sync"))
            }
        }];
        return s.forEach(function(e) {
            e.button = $('<button class="disabled"><span class="action-icon"><span class="sprite"></span></span></button>').addClass(e.className).appendTo(t), e.button.on("mousedown mouseup", function(t) {
                t && t.preventDefault && t.preventDefault()
            }).on("click", function(t) {
                $(this).is(".disabled") || (e.insert && r(e.insert), e.callback && e.callback(t))
            })
        }),
            function(t, e) {
                s.forEach(function(t) {
                    var i = !1;
                    if (!e.errors) switch (t.type) {
                        case "binaryOp":
                            i = "var" === e.currentState;
                            break;
                        case "openBrace":
                            i = "var" !== e.currentState;
                            break;
                        case "closeBrace":
                            i = "var" === e.currentState && e.braceBalance > 0;
                            break;
                        case "complete":
                            i = !e.errors && !e.warnings
                    }
                    t.button.toggleClass("disabled", !i)
                })
            }
    }, t.exports = n
}, function(t, e, i) {
    (function(e) {
        "use strict";
        var n = i(13).futuresRoots,
            o = function() {
                function t(t, e) {
                    var i = function() {};
                    return i.prototype = e.prototype, t.prototype = new i, t
                }

                function i(t) {
                    return t.replace(/[\^\$\(\)\[\]\{\}\*\+\?\|\\]/g, "\\$&")
                }

                function o() {}

                function r(t) {
                    this.value = t
                }

                function s() {}

                function a() {}

                function l() {}

                function c() {}

                function h() {}

                function d() {}

                function u() {}

                function p() {}

                function f(t) {
                    this.value = t
                }

                function _(t) {
                    this.value = t
                }

                function g(t) {
                    this.value = t
                }

                function m() {
                    f.apply(this, arguments)
                }

                function v() {
                    _.apply(this, arguments)
                }

                function y(t, e) {
                    var i, n, o, s, a, l, c, h, d = [];
                    t: for (; i = $.exec(t);) {
                        for (n = B.length; n--;)
                            if (i[n + 1]) {
                                B[n].ctor && (o = new B[n].ctor(i[n + 1]), o._offset = i.index, d.push(o));
                                continue t
                            }
                        s = new g(i[0]), s._offset = i.index, d.push(s)
                    }
                    if (e && e.recover)
                        for (n = d.length; n--;) l = d[n], l instanceof _ || l instanceof f ? (void 0 !== a && (c = new f(""), h = d.splice(n, a - n + 1, c), c.value = h.map(function(t) {
                            return t.value
                        }).join("")), a = n) : l instanceof r || (a = void 0);
                    return d
                }

                function w(t) {
                    var i, n, o, c, h, d, u, p, m, v;
                    if (e.enabled("charting_library_base")) return {
                        currentState: "var"
                    };
                    for (i = "init", n = "var", o = "operator", c = i, h = {
                        warnings: [],
                        errors: [],
                        isEmpty: !0
                    }, d = [], u = 0; u < t.length; u++)
                        if (p = t[u], !(p instanceof r))
                            if (delete h.isEmpty, p.isIncomplete && (m = {
                                    status: "incomplete",
                                    reason: "incomplete_token",
                                    offset: p._offset,
                                    token: p
                                }, p.incompleteSuggest && (m.recover = {
                                    append: p.incompleteSuggest()
                                }), h.warnings.push(m), u !== t.length - 1)) m.status = "error";
                            else if (p instanceof f || p instanceof _) {
                                if (c === n) {
                                    h.errors.push({
                                        status: "error",
                                        reason: "unexpected_token",
                                        offset: p._offset,
                                        token: p
                                    });
                                    continue
                                }
                                c = n
                            } else if (p instanceof l) {
                                if (c !== n) {
                                    h.errors.push({
                                        status: "error",
                                        reason: "unexpected_token",
                                        offset: p._offset,
                                        token: p
                                    });
                                    continue
                                }
                                c = o
                            } else if (p instanceof s) {
                                if (c === n) {
                                    h.errors.push({
                                        status: "error",
                                        reason: "unexpected_token",
                                        offset: p._offset,
                                        token: p
                                    });
                                    continue
                                }
                                d.push(p), c = i
                            } else if (p instanceof a) {
                                if (c !== n) {
                                    h.errors.push({
                                        status: "error",
                                        reason: "unexpected_token",
                                        offset: p._offset,
                                        token: p
                                    });
                                    continue
                                }
                                v = d.pop(), v || h.errors.push({
                                    status: "error",
                                    reason: "unbalanced_brace",
                                    offset: p._offset,
                                    token: p,
                                    recover: {
                                        prepend: new s
                                    }
                                }), c = n
                            } else p instanceof g && h.errors.push({
                                status: "error",
                                reason: "unparsed_entity",
                                offset: p._offset,
                                token: p
                            });
                    for (h.braceBalance = d.length, c !== n && h.warnings.push({
                        status: "incomplete"
                    }), v = null; d.length;) p = d.pop(), m = {
                        status: "incomplete",
                        reason: "unbalanced_brace",
                        offset: p._offset,
                        token: p
                    }, c === n && (m.recover = {
                        append: new a
                    }), h.warnings.push(m);
                    return h.currentState = c, 0 === h.warnings.length && delete h.warnings, 0 === h.errors.length && delete h.errors, h
                }

                function b(t) {
                    var e, i = [];
                    for (e = 0; e < t.length; e++) t[e] instanceof r || i.push(t[e]);
                    return i
                }

                function S(t) {
                    var e, i, n, o, r, c, h;
                    for (t = b(t), e = [], i = [], o = 0; o < t.length; o++) r = t[o], r instanceof l ? i.length && i[i.length - 1].minPrecedence > r.precedence && (i[i.length - 1].minPrecedence = r.precedence) : r instanceof s ? i.push(n = {
                        minPrecedence: 1 / 0,
                        openBraceIndex: o
                    }) : r instanceof a && (n = i.pop(), c = t[n.openBraceIndex - 1], h = t[o + 1], h instanceof l && !(h.precedence <= n.minPrecedence) || !(!(c instanceof l) || c.precedence < n.minPrecedence || c.precedence === n.minPrecedence && c.commutative) || (e.unshift(n.openBraceIndex), e.push(o), i.length && i[i.length - 1].minPrecedence > n.minPrecedence && (i[i.length - 1].minPrecedence = n.minPrecedence)));
                    for (o = e.length; o--;) t.splice(e[o], 1);
                    return t
                }

                function T(t) {
                    for (var e = 0; e < t.length; e++) t[e].parse && t[e].parse();
                    return t
                }

                function x(t) {
                    var e = C(t);
                    return S(e ? e : [new _("1"), new u, new s].concat(t).concat(new a))
                }

                function C(t) {
                    var e, i, n, o = 0,
                        c = 1,
                        h = 2,
                        d = 3,
                        p = o,
                        f = 0;
                    for (i = 0; i < t.length; i++)
                        if (n = t[i], !(n instanceof r)) switch (p) {
                            case o:
                                if (!(n instanceof _ && 1 === +n.value)) return !1;
                                p = c;
                                break;
                            case c:
                                if (!(p === c && n instanceof u)) return !1;
                                p = h, e = i + 1;
                                break;
                            case h:
                                if (n instanceof s) p = d, f = 1;
                                else if (n instanceof l) return !1;
                                break;
                            case d:
                                n instanceof s ? f++ : n instanceof a && (f--, 0 >= f && (p = h))
                        }
                    return t.slice(e)
                }

                function P(t) {
                    return new f(t).ticker()
                }

                function k(t) {
                    if ("string" == typeof t) t = y(t);
                    else if (!Array.isArray(t)) throw new TypeError("expression must be a string or token array");
                    return t.some(function(t) {
                        return t instanceof f && "BATS" === (t.exchange() || "").toUpperCase()
                    })
                }

                function I(t) {
                    if ("string" == typeof t) t = y(t);
                    else if (!Array.isArray(t)) throw new TypeError("expression must be a string or token array");
                    return t.some(function(t) {
                        return t instanceof f && -1 !== (t.exchange() || "").toUpperCase().indexOf("_EOD")
                    })
                }

                function E(t) {
                    if ("string" == typeof t) t = y(t);
                    else if (!Array.isArray(t)) throw new TypeError("expression must be a string or token array");
                    return t.some(function(t) {
                        return t instanceof f && "CHXEUR" === (t.exchange() || "").toUpperCase()
                    })
                }

                function L(t) {
                    var e = ["MOEX_DLY", "LSE_DLY", "LSIN_DLY", "BSE_DLY", "CME_DL", "CME_MINI_DL", "CBOT_DL", "CBOT_MINI_DL", "COMEX_DL", "COMEX_MINI_DL", "NYMEX_DL", "NYMEX_MINI_DL"];
                    if ("string" == typeof t) t = y(t);
                    else if (!Array.isArray(t)) throw new TypeError("expression must be a string or token array");
                    return t.some(function(t) {
                        return t instanceof f && -1 !== e.indexOf((t.exchange() || "").toUpperCase())
                    })
                }

                function V(t, e) {
                    if ("string" != typeof t) throw new TypeError("expression must be a string");
                    return t = y(t), 1 !== t.length ? !1 : t[0].exchange().substr(0, e.length) === e
                }

                function M(t) {
                    if ("string" != typeof t) throw new TypeError("expression must be a string");
                    var e = S(b(y(t)));
                    return e.forEach(function(t) {
                        t instanceof f && t.exchange(null)
                    }), D(e)
                }

                function A(t) {
                    if ("string" != typeof t) throw new TypeError("expression must be a string");
                    var e = S(b(y(t)));
                    return D(e)
                }

                function D(t) {
                    return t.join("")
                }
                var O, R, $, B = [{
                    pattern: "(",
                    ctor: s
                }, {
                    pattern: ")",
                    ctor: a
                }, {
                    pattern: "+",
                    ctor: c
                }, {
                    pattern: "-",
                    ctor: h
                }, {
                    pattern: "*",
                    ctor: d
                }, {
                    pattern: "/",
                    ctor: u
                }, {
                    pattern: "^",
                    ctor: p
                }, {
                    pattern: /\d+(?:\.\d*|(?![a-zA-Z0-9_!:\.&]))|\.\d+/,
                    ctor: _
                }, {
                    pattern: /\./,
                    ctor: v
                }, {
                    pattern: e.enabled("charting_library_base") ? /[a-zA-Z0-9_\u4e00-\u9fa5^][a-zA-Z0-9_\u4e00-\u9fa5_!:\.&]*|'.+?'/ : /[a-zA-Z0-9][a-zA-Z0-9_!|:\.&]*|'.+?'/,
                    ctor: f
                }, {
                    pattern: /'[^']*/,
                    ctor: m
                }, {
                    pattern: /[\0-\x20\s]+/,
                    ctor: r
                }];
                return o.prototype.toString = function() {
                    return this.value
                }, t(r, o), t(s, o), s.prototype.value = "(", t(a, o), a.prototype.value = ")", t(l, o), t(c, l), c.prototype.value = "+", c.prototype.precedence = 0, c.prototype.commutative = !0, t(h, l), h.prototype.value = "-", h.prototype.precedence = 0, h.prototype.commutative = !1, t(d, l), d.prototype.value = "*", d.prototype.precedence = 1, d.prototype.commutative = !0, t(u, l), u.prototype.value = "/", u.prototype.precedence = 1, u.prototype.commutative = !1, t(p, l), p.prototype.value = "^", p.prototype.precedence = 2, p.prototype.commutative = !1, O = /^'?(?:([A-Z0-9_]+):)?(.*?)'?$/i, R = /[\+\-\/\*]/, t(f, o), f.prototype.toString = function() {
                    if (this.hasOwnProperty("_ticker")) {
                        var t = R.test(this._ticker) ? "'" : "";
                        return t + (this._exchange ? this._exchange + ":" : "") + this._ticker + t
                    }
                    return this.value
                }, f.prototype.parse = function() {
                    var t = O.exec(this.value);
                    t[1] && (this._exchange = t[1]), this._ticker = t[2]
                }, f.prototype.parseAsFutures = function() {
                    var t, e, i;
                    if (n)
                        for (this.hasOwnProperty("_ticker") || this.parse(), t = function(t) {
                            return n.some(function(e) {
                                return e.t === t
                            })
                        }, e = 2; e >= 1; --e)
                            if (i = this._ticker.slice(0, e), t(i)) {
                                this._root = i, this._contract = this._ticker.slice(e);
                                break
                            }
                }, f.prototype.exchange = function(t) {
                    return this.hasOwnProperty("_ticker") || this.parse(), arguments.length > 0 ? void(null === t || void 0 === t ? delete this._exchange : this._exchange = t + "") : this._exchange
                }, f.prototype.ticker = function(t) {
                    return this.hasOwnProperty("_ticker") || this.parse(), arguments.length > 0 ? (null === t || void 0 === t ? delete this._ticker : this._ticker = t + "", delete this._root, delete this._contract, void 0) : this._ticker
                }, f.prototype.root = function(t) {
                    return this.hasOwnProperty("_root") || this.parseAsFutures(), arguments.length > 0 ? void(null === t || void 0 === t ? delete this._root : (this._root = t + "", this._root && (this._ticker = this._root + (this._contract || "")))) : this._root
                }, f.prototype.contract = function(t) {
                    return this.hasOwnProperty("_contract") || this.parseAsFutures(), arguments.length > 0 ? void(null === t || void 0 === t ? delete this._contract : (this._contract = t + "", this._root && (this._ticker = this._root + this._contract))) : this._root
                }, t(_, o), _.prototype.toString = function() {
                    return this.hasOwnProperty("_normalizedValue") ? this._normalizedValue : this.value
                }, _.prototype.parse = function() {
                    this._normalizedValue = this.value.replace(/^0+|\.0*$/g, "").replace(/(\.\d*?)0+$/, "$1").replace(/^(\.|$)/, "0$1")
                }, g.prototype.toString = function() {
                    return this.value
                }, t(m, f), m.prototype.isIncomplete = !0, m.prototype.incompleteSuggest = function() {
                    return "'" !== this.value ? "'" : void 0
                }, t(v, _), v.prototype.isIncomplete = !0, $ = RegExp(B.map(function(t) {
                    return "(" + ("string" == typeof t.pattern ? i(t.pattern) : t.pattern.source) + ")"
                }).concat(".").join("|"), "g"), {
                    tokenize: y,
                    validate: w,
                    factorOutBraces: S,
                    normalizeTokens: T,
                    flip: x,
                    hasBatsSymbols: k,
                    hasEodSymbols: I,
                    hasChxeurSymbols: E,
                    hasFreeDelaySymbols: L,
                    isExchange: V,
                    SymbolToken: f,
                    IncompleteSymbolToken: m,
                    NumberToken: _,
                    BinaryOperatorToken: l,
                    OpenBraceToken: s,
                    CloseBraceToken: a,
                    ticker: P,
                    shortName: M,
                    normalize: A
                }
            }();
        t.exports = o
    }).call(e, i(3))
}, function(t, e) {
    "use strict";
    e.availableTimezones = TradingView.availableTimezones = [{
        id: "Etc/UTC",
        title: $.t("UTC")
    }, {
        id: "exchange",
        title: $.t("Exchange")
    }, {
        id: "Pacific/Honolulu",
        title: $.t("Honolulu")
    }, {
        id: "America/Vancouver",
        title: $.t("Vancouver")
    }, {
        id: "America/Los_Angeles",
        title: $.t("Los Angeles")
    }, {
        id: "America/Phoenix",
        title: $.t("Phoenix")
    }, {
        id: "America/Chicago",
        title: $.t("Chicago")
    }, {
        id: "America/El_Salvador",
        title: $.t("San Salvador")
    }, {
        id: "America/Toronto",
        title: $.t("Toronto")
    }, {
        id: "America/New_York",
        title: $.t("New York")
    }, {
        id: "America/Bogota",
        title: $.t("Bogota")
    }, {
        id: "America/Argentina/Buenos_Aires",
        title: $.t("Buenos Aires")
    }, {
        id: "America/Sao_Paulo",
        title: $.t("Sao Paulo")
    }, {
        id: "Europe/London",
        title: $.t("London")
    }, {
        id: "Europe/Madrid",
        title: $.t("Madrid")
    }, {
        id: "Europe/Paris",
        title: $.t("Paris")
    }, {
        id: "Europe/Berlin",
        title: $.t("Berlin")
    }, {
        id: "Europe/Warsaw",
        title: $.t("Warsaw")
    }, {
        id: "Europe/Athens",
        title: $.t("Athens")
    }, {
        id: "Europe/Moscow",
        title: $.t("Moscow")
    }, {
        id: "Asia/Tehran",
        title: $.t("Tehran")
    }, {
        id: "Asia/Dubai",
        title: $.t("Dubai")
    }, {
        id: "Asia/Ashkhabad",
        title: $.t("Ashkhabad")
    }, {
        id: "Asia/Kolkata",
        title: $.t("Kolkata")
    }, {
        id: "Asia/Almaty",
        title: $.t("Almaty")
    }, {
        id: "Asia/Bangkok",
        title: $.t("Bangkok")
    }, {
        id: "Asia/Taipei",
        title: $.t("Taipei")
    }, {
        id: "Asia/Singapore",
        title: $.t("Singapore")
    }, {
        id: "Asia/Shanghai",
        title: $.t("Shanghai")
    }, {
        id: "Asia/Hong_Kong",
        title: $.t("Hong Kong")
    }, {
        id: "Asia/Seoul",
        title: $.t("Seoul")
    }, {
        id: "Asia/Tokyo",
        title: $.t("Tokyo")
    }, {
        id: "Australia/Brisbane",
        title: $.t("Brisbane")
    }, {
        id: "Australia/Adelaide",
        title: $.t("Adelaide")
    }, {
        id: "Australia/Sydney",
        title: $.t("Sydney")
    }, {
        id: "Pacific/Auckland",
        title: $.t("New Zealand")
    }, {
        id: "Pacific/Fakaofo",
        title: $.t("Tokelau")
    }, {
        id: "Pacific/Chatham",
        title: $.t("Chatham Islands")
    }], e.monthsShort = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], e.futuresRoots = [{
        d: "E-Mini S&P 500",
        t: "ES"
    }, {
        d: "E-Mini Nasdaq 100",
        t: "NQ"
    }, {
        d: "Gold",
        t: "GC"
    }, {
        d: "Silver",
        t: "SI"
    }, {
        d: "Crude Oil WTI",
        t: "CL"
    }, {
        d: "Natural Gas",
        t: "NG"
    }, {
        d: "Australian Dollar",
        t: "6A"
    }, {
        d: "Australian Dollar (Floor)",
        t: "AD"
    }, {
        d: "Euro FX",
        t: "6E"
    }, {
        d: "Euro FX (Floor)",
        t: "EC"
    }, {
        d: "Corn",
        t: "ZC"
    }, {
        d: "Corn (Floor)",
        t: "C"
    }, {
        d: "Eurodollar",
        t: "GE"
    }, {
        d: "Eurodollar (Floor)",
        t: "ED"
    }]
}, function(t, e, i) {
    "use strict";

    function n() {}
    var o = i(15),
        r = i(16);
    n.isAvailable = function(t) {
        var e, i = r.supportedResolutions.value(),
            n = !1;
        return n = void 0 !== i ? -1 !== i.indexOf(t) : !0, e = r.intraday.value(), e ? n : o.isDWM(t) && n
    }, t.exports = n
}, function(t, e) {
    (function(e) {
        "use strict";

        function i(t, e) {
            return void 0 === e && t !== i.INVALID ? i.parse(t) : (this._kind = t, void(this._multiplier = e))
        }
        "undefined" == typeof window && (e.TradingView = {}), i.SECONDS = "seconds", i.MINUTES = "minutes", i.HOURS = "hours", i.DAYS = "days", i.WEEKS = "weeks", i.MONTHS = "months", i.INVALID = "invalid", i.IntadayRegExp = RegExp("^([0-9]*)$"), i.DWMSRegExp = RegExp("^(\\d*)([DWMS])$"), i.prototype.kind = function() {
            return this._kind
        }, i.prototype.multiplier = function() {
            return this._multiplier
        }, i.prototype.isValid = function() {
            return this.kind() !== i.INVALID
        }, i.prototype.isDWM = function() {
            return this.isValid() && !this.isIntraday()
        }, i.prototype.isIntraday = function() {
            return -1 !== [i.SECONDS, i.MINUTES, i.HOURS].indexOf(this.kind())
        }, i.prototype.letter = function() {
            return this.isValid() && this.kind() !== i.MINUTES ? this.kind()[0].toUpperCase() : ""
        }, i.prototype.value = function() {
            return this.isValid() ? this.kind() === i.MINUTES ? this.multiplier() + "" : this.multiplier() + this.letter() : ""
        }, i.prototype.isEqualTo = function(t) {
            if (!(t instanceof i)) throw Error("Argument is not an Interval");
            return this.kind() === i.INVALID || t.kind() === i.INVALID ? !1 : this.kind() === t.kind() && this.multiplier() === t.multiplier()
        }, i.isEqual = function(t, e) {
            return i.parse(t).isEqualTo(i.parse(e))
        }, i.parse = function(t) {
            var e, n;
            return t = (t + "").toUpperCase(), e = {
                D: i.DAYS,
                W: i.WEEKS,
                M: i.MONTHS,
                H: i.HOURS,
                S: i.SECONDS
            }, (n = i.IntadayRegExp.exec(t)) ? new i(i.MINUTES, parseInt(t, 10)) : (n = i.DWMSRegExp.exec(t), n ? new i(e[n[2]], parseInt(n[1], 10) ? parseInt(n[1], 10) : 1) : new i(i.INVALID))
        }, i.isDWM = function(t) {
            return i.parse(t).isDWM()
        }, i.kind = function(t) {
            return i.parse(t).kind()
        }, i.isValid = function(t) {
            return i.parse(t).isValid()
        }, t.exports = i
    }).call(e, function() {
        return this
    }())
}, function(t, e, i) {
    (function(e, n) {
        "use strict";
        var o = (i(12), function() {
            function t(t, e) {
                function i(o) {
                    function p(i) {
                        (n.enabled("same_data_requery") || b.value() !== i) && (e ? e.setSymbol(i) : t.setSymbol(i))
                    }

                    function f() {
                        r.setValue(b.value())
                    }

                    function _(t) {
                        a.setValue(t.pro_name || window.tradingController && (t.full_name || t.name))
                    }

                    function g() {
                        s.setValue(w.shortName.value());
                        var t = y.symbolInfo();
                        t ? (_(t), t.hasOwnProperty("supported_resolutions") ? h.setValue(t.supported_resolutions) : h.setValue(void 0), c.setValue(!!t.has_intraday)) : (c.deleteValue(), a.deleteValue())
                    }

                    function m(i) {
                        (n.enabled("same_data_requery") || S.value() !== i) && (e ? e.setResolution(i) : t.setResolution(i))
                    }

                    function v() {
                        l.setValue(S.value())
                    }
                    var y, w, b, S;
                    t.modelCreated().unsubscribe(null, i), y = t.model().mainSeries(), w = y.properties(), b = w.symbol, b.subscribe(null, f), r.setValue(b.value()), r.subscribe(p), y.onSymbolResolved().subscribe(null, _), r.hook = function(t) {
                        return y.symbolSameAsCurrent(t) && (t = y.actualSymbol()), t
                    }, y.onSymbolResolved().subscribe(null, g), y.onSymbolError().subscribe(null, g), g(), S = w.interval, S.subscribe(null, v), l.setValue(S.value()), l.subscribe(m), t.readOnly() && (r.writeLock = !0), d = function() {
                        b.unsubscribe(null, f), r.unsubscribe(p), y.onSymbolResolved().unsubscribe(null, g), y.onSymbolError().unsubscribe(null, g), S.unsubscribe(null, v), l.unsubscribe(m), delete r.hook, delete r.writeLock, d = function() {}, u = function() {}
                    }
                }
                var o, p;
                d(), u = function() {
                    return t
                }, o = t.model(), o ? i(o) : (t.modelCreated().subscribe(null, i), d = function() {
                    t.modelCreated().unsubscribe(null, i), d = function() {}, u = function() {}
                }, p = t.properties().mainSeriesProperties, r.setValue(p.symbol.value()), l.setValue(p.interval.value()))
            }

            function i(t) {
                function e(t) {
                    n = !0, r.setValue(t.resolved_symbol), n = !1
                }

                function i(e) {
                    n || t.search(e)
                }
                p();
                var n = !1;
                t.onSearchBySymbol.subscribe(null, e), r.subscribe(i), p = function() {
                    t.onSearchBySymbol.unsubscribe(null, e), r.unsubscribe(i), p = function() {}
                }
            }

            function o(e) {
                d(), e.activeChartWidget.subscribe(function(i) {
                    d(), t(i, e)
                }, {
                    callWithLast: !0
                })
            }
            var r = new e,
                s = new e,
                a = new e,
                l = new e,
                c = new e,
                h = new e,
                d = function() {},
                u = function() {},
                p = function() {};
            return {
                symbol: r,
                proSymbol: a,
                seriesShortSymbol: s.readonly(),
                interval: l,
                intraday: c.readonly(),
                supportedResolutions: h.readonly(),
                bindToChartWidget: t,
                unbindFromChartWidget: function() {
                    d()
                },
                getChartWidget: function() {
                    return u()
                },
                bindToSearchCharts: i,
                unbindFromSearchCharts: function() {
                    p()
                },
                bindToChartWidgetCollection: o
            }
        }());
        TradingView.Linking = o, t.exports = o
    }).call(e, i(17), i(3))
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function e() {}

        function i(t) {
            return this instanceof i ? (arguments.length > 0 && (this._value = t), void(this._listeners = [])) : new i(t)
        }
        i.prototype.value = function() {
            return this._owner ? this._owner._value : this._value
        }, i.prototype.setValue = function(t, e) {
            var i, n, o, r = this._owner ? this._owner : this;
            if ("function" == typeof r.hook && (t = r.hook(t)), r.writeLock) return r._value;
            if (!e && r._value === t && r.hasOwnProperty("_value")) return t;
            for (r._value = t, i = r._listeners.slice(), n = 0, o = 0; o < i.length; o++) i[o].once && (r._listeners.splice(o - n, 1), n++), i[o].cb(t);
            return t
        }, i.prototype.deleteValue = function() {
            var t, e, i, n = this._owner ? this._owner : this;
            if (n.hasOwnProperty("_value")) {
                if (n.writeLock) return n._value;
                for (delete n._value, t = n._listeners.slice(), e = 0, i = 0; i < t.length; i++) t[i].once && (n._listeners.splice(i - e, 1), e++), t[i].cb()
            }
        }, i.prototype.subscribe = function(t, e) {
            var i, n, o;
            if ("function" != typeof t) throw new TypeError("callback must be a function");
            i = !!e && !!e.once, n = !!e && !!e.callWithLast, o = this._owner ? this._owner : this, n && o.hasOwnProperty("_value") && (t(o._value), i) || o._listeners.push({
                cb: t,
                owner: this,
                once: !!e && !!e.once
            })
        }, i.prototype.unsubscribe = function(t) {
            var e, i, n = this._owner ? this._owner : this;
            for (void 0 === t && (t = null), e = n._listeners, i = e.length; i--;) e[i].owner !== this && n !== this || e[i].cb !== t && null !== t || e.splice(i, 1)
        }, i.prototype.readonly = function() {
            if (this._readonlyInstance) return this._readonlyInstance;
            var t = this._readonlyInstance = new e;
            return t.subscribe = this.subscribe.bind(this), t.unsubscribe = this.unsubscribe.bind(this), t.value = this.value.bind(this), t.when = this.when.bind(this), t
        }, i.prototype.spawn = function() {
            var t = new i;
            return delete t._listeners, t._owner = this._owner || this, t.destroy = function() {
                this.unsubscribe(), delete this._owner
            }, t
        }, i.prototype.when = function(t) {
            var e, i = this;
            return this.value() ? void t() : (e = function(n) {
                n && (i.unsubscribe(e), t())
            }, void i.subscribe(e))
        }, i.prototype.opposite = function() {
            var t, e;
            return this._opposite || (t = this, e = new i(!this.value()), this.subscribe(function(t) {
                e.setValue(!t)
            }), e.subscribe(function(e) {
                t.setValue(!e)
            }), this._opposite = e), this._opposite
        }, "undefined" != typeof window && (window.WatchedValue = i), void 0 !== t && t && t.exports && (t.exports = i)
    }).call(e, i(4)(t))
}, function(t, e, i) {
    (function(e) {
        "use strict";
        t.exports = TradingView.templates = {
            index: {
                chartsSection: '<div class="index-charts-tab active" id="index-charts-tab-{{index}}"><div class="index-charts-tab-sizer"><div class="index-charts-tab-container"><div class="clear"></div></div><div class="index-charts-spinner"></div></div><div class="show-more"><a href="/chart/?q=&sort={{url}}" id="show-more-button">' + $.t("More {{sectionName}} Ideas") + "</a></div></div>",
                chartsSectionItem: '<div class="item" id="chart-{{id}}"><a href="{{published_chart_url}}"><img class="chart-img" src="{{image_mid_url}}" alt="" /></a><div class="caption">{{>iconedFollowSymbolButton}} <a href="/chart/{{short_name}}/{{#full_name_required}}?exg={{exchange}}{{/full_name_required}}" class="symbol" data-symbol="{{symbol}}">{{short_name}}</a>, <span class="interval">{{interval}}</span> <span class="count views"><span class="icon icon-eye" title="' + $.t("Views") + '"></span> {{views_count}}</span><span class="count comments"><span class="icon icon-comment" title="' + $.t("Comments") + '"></span> {{comment_count}}</span></div><a class="cover{{#is_online}} online{{/is_online}}" href="{{published_chart_url}}"><img class="avatar-pic" src="{{user_picture}}" alt="{{full_name}}"/><div class="user-info">{{full_name}}{{#is_moderator}}<sup class="user-badge mod" title="' + $.t("Moderator") + '}">' + $.t("mod") + '</sup>{{/is_moderator}} {{^is_moderator}}{{#is_pro}}<sup class="user-badge pro{{#is_realtime}} realtime{{/is_realtime}}{{#is_trial}} trial{{/is_trial}}" title="' + $.t("Pro") + "{{#is_realtime}} " + $.t("Realtime") + "{{/is_realtime}}{{#is_trial}} " + $.t("Trial") + '{{/is_trial}}">' + $.t("Pro") + '</sup>{{/is_pro}} {{/is_moderator}}<br/><span class="icon icon-charts" title="' + $.t("Charts") + '"></span> {{user_charts}} <span class="icon icon-rating-small" title="' + $.t("Rating") + '"></span> {{followers_count}}</div><div class="clear"></div><div class="name">{{name}}</div><div class="desc">{{desc}}</div><div class="date">{{created_time}}</div><div class="icons">{{> chartBadges}}<span class="chart-direction-label direction-{{direction}}">{{#direction_name}}{{direction}}{{/direction_name}}</span></div></a></div>'
            },
            addressInputsRows: '<tr><td colspan="12"><p>' + $.t("Address") + '</p><input class="address-autocomplete" type="text" value="" placeholder="{{#addressPlaceholder}}{{addressPlaceholder}}{{/addressPlaceholder}}{{^addressPlaceholder}}' + $.t("Enter your ZIP code") + '{{/addressPlaceholder}}"/></td></tr><tr><td colspan="12"><input type="text" autocomplete-name="route" name="STREET" value="{{#reference_transaction_billing_address.STREET}}{{reference_transaction_billing_address.STREET}}{{/reference_transaction_billing_address.STREET}}{{^reference_transaction_billing_address.STREET}}{{ user.billing_street }}{{/reference_transaction_billing_address.STREET}}" placeholder="' + $.t("Street") + '" disabled="true"/></td></tr><tr><td colspan="6"><input type="text" autocomplete-name="locality" name="CITY" value="{{#reference_transaction_billing_address.CITY}}{{reference_transaction_billing_address.CITY}}{{/reference_transaction_billing_address.CITY}}{{^reference_transaction_billing_address.CITY}}{{ user.billing_city }}{{/reference_transaction_billing_address.CITY}}" placeholder="' + $.t("City") + '" disabled="true"/></td><td colspan="6"><input type="text" autocomplete-name="administrative_area_level_1" name="STATE" value="{{#reference_transaction_billing_address.STATE}}{{reference_transaction_billing_address.STATE}}{{/reference_transaction_billing_address.STATE}}{{^reference_transaction_billing_address.STATE}}{{ user.billing_state }}{{/reference_transaction_billing_address.STATE}}" placeholder="' + $.t("State/Region") + '" disabled="true"/></td></tr><tr><td colspan="6"><input type="text" autocomplete-name="country" name="COUNTRY" value="{{#reference_transaction_billing_address.COUNTRY}}{{reference_transaction_billing_address.COUNTRY}}{{/reference_transaction_billing_address.COUNTRY}}{{^reference_transaction_billing_address.COUNTRY}}{{ user.billing_country }}{{/reference_transaction_billing_address.COUNTRY}}" placeholder="' + $.t("Country") + '" disabled="true"/><input type="hidden" autocomplete-name="country_code" name="COUNTRYCODE" value="{{#reference_transaction_billing_address.COUNTRYCODE}}{{reference_transaction_billing_address.COUNTRYCODE}}{{/reference_transaction_billing_address.COUNTRYCODE}}{{^reference_transaction_billing_address.COUNTRYCODE}}{{ user.billing_countrycode }}{{/reference_transaction_billing_address.COUNTRYCODE}}" /></td><td colspan="6"><input type="text" autocomplete-name="postal_code" name="ZIP" value="{{#reference_transaction_billing_address.ZIP}}{{reference_transaction_billing_address.ZIP}}{{/reference_transaction_billing_address.ZIP}}{{^reference_transaction_billing_address.ZIP}}{{ user.billing_zip }}{{/reference_transaction_billing_address.ZIP}}" placeholder="' + $.t("Zip Code") + '" disabled="true"/></td></tr>',
            dialogs: {
                paymentMethod: '<table class="_tv-dialog-colomn-table"><tr><td><div class="_tv-dialog-title"><span class="_tv-dialog-title-text">{{title}}</span><a class="_tv-dialog-title-close"></a></div><div class="main">{{#message}}{{{message}}}{{/message}}{{#pnref}}<div class="order-detail-head" data-method="oneclick-form"><h3><span class="order-checkbox radio active"></span>' + $.t("Make payment with previously used details") + '</h3></div>{{/pnref}}<div class="order-detail-head" data-method="cc-form"><h3><span class="order-checkbox radio{{^pnref}} active{{/pnref}}"></span>' + $.t("Credit Card") + '</h3></div><div class="order-detail-head" data-method="expresscheckout-form"><h3><span class="order-checkbox radio"></span>' + $.t("PayPal") + '</h3></div>{{#pnref}}<div class="order-detail-body oneclick-form active">{{#cchint}}<p>' + $.t("Your credit card on file is XXXX-XXXX-XXXX") + '-{{ cchint }}</p>{{/cchint}}<form action="/paypal/oneclick/" id="oneclick-form" class="payment-form" method="post"><input type="hidden" name="pnref" value="{{ pnref }}" /><input type="hidden" name="billing_cycle" value="{{billing_cycle}}" /> <input type="hidden" name="child_products" value="{{child_products}}" /> <input type="hidden" name="exchanges_only" value="{{exchanges_only}}" /> <input type="hidden" name="is_upgrade_from_m" value="{{is_upgrade_from_m}}" /> {{#reference_transaction_billing_address_is_full}}<input name="ZIP" value="{{reference_transaction_billing_address.ZIP}}" type="hidden"><input name="STREET" value="{{reference_transaction_billing_address.STREET}}" type="hidden"><input name="CITY" value="{{reference_transaction_billing_address.CITY}}" type="hidden"><input name="STATE" value="{{reference_transaction_billing_address.STATE}}" type="hidden"><input name="COUNTRY" value="{{reference_transaction_billing_address.COUNTRY}}" type="hidden"><input name="COUNTRYCODE" value="{{reference_transaction_billing_address.COUNTRYCODE}}" type="hidden">{{/reference_transaction_billing_address_is_full}}{{^reference_transaction_billing_address_is_full}}<table id="oneclick-table">{{#is_empty_user_credentials}}<tr><td colspan="6"><p>' + $.t("First Name") + '</p><input type="text" name="BILLTOFIRSTNAME" value="{{ user.first_name }}" /></td><td colspan="6"><p>' + $.t("Last Name") + '</p><input type="text" name="BILLTOLASTNAME" value="{{ user.last_name }}" /></td></tr>{{/is_empty_user_credentials}}{{#address}}{{>addressInputsRows}}{{/address}}</table>{{/reference_transaction_billing_address_is_full}}</form></div>{{/pnref}}<div class="order-detail-body expresscheckout-form"><p>' + $.t("You will be automatically redirected to PayPal in order to finish your purchase.") + '</p><form action="/paypal/expresscheckout/" id="expresscheckout-form" class="payment-form" method="post"><input type="hidden" name="billing_cycle" value="{{billing_cycle}}" /> <input type="hidden" name="child_products" value="{{child_products}}" /> <input type="hidden" name="exchanges_only" value="{{exchanges_only}}" /> <input type="hidden" name="is_upgrade_from_m" value="{{is_upgrade_from_m}}" /> </form></div><div class="order-detail-body cc-form{{^pnref}} active{{/pnref}}"><form action="https://{{ api_host }}" id="cc-form" class="payment-form" method="post"><input type="hidden" name="SECURETOKEN" value="" /><input type="hidden" name="SECURETOKENID" value="" /><input type="hidden" name="EXPDATE" value="" /> <table id="cc-table">{{#credentials}}<tr><td colspan="6"><p>' + $.t("First Name") + '</p><input type="text" name="BILLTOFIRSTNAME" value="{{ user.first_name }}" /></td><td colspan="6"><p>' + $.t("Last Name") + '</p><input type="text" name="BILLTOLASTNAME" value="{{ user.last_name }}" /></td></tr>{{/credentials}}{{#address}}{{>addressInputsRows}}{{/address}}{{#email}}<tr><td colspan="12"><p>' + $.t("Email") + '</p><input type="text" name="BILLTOEMAIL" value="{{ user.email }}" /></td></tr>{{/email}}<tr class="cc-row"><td colspan="5"><p>' + $.t("Card Number") + '</p><input class="tv-cc-number" type="text" name="ACCT_visible" value="" /></td><input type="hidden" name="ACCT" value="" /></td><td colspan="3"><p>' + $.t("CVV/CSC") + ' <span id="cc-table-csc-help-link" href="#csc-help">?</span></p><input class="tv-cc-cvv" type="text" name="CVV2" value="" /></td><td colspan="4"><p>' + $.t("Expiration Date (MM/YY)") + '</p><input class="exp-date" type="text" name="EXPDATEMM" value="" /><span class="slash">/</span><input class="exp-date" type="text" name="EXPDATEYY" value="" /></td></tr></table></form></div><div class="order-purchase-button"><a href="#subscribe" class="green" id="order-subscribe">{{#okText}}{{okText}}{{/okText}}{{^okText}}' + $.t("Subscribe") + '{{/okText}}</a></div></div></td>{{#showTotalColumn}}<td class="_tv-dialog-right-colomn"><div class="main"><div class="slip-header">' + $.t("Your Order") + '</div><table class="slip-table">{{#totalsList}}<tr><td>{{name}} ({{billing_cycle_readable}})</td><td>${{cost}}</td></tr>{{/totalsList}}<tr class="slip-divider"><td colspan="2"></td></tr><tr class="slip-total"><td><b>' + $.t("Total") + '</b></td><td>${{total}}</td></tr></table></div><div class="cc-logos"></div></td>{{/showTotalColumn}}</tr></table>',
                proiritySupport: "<p><strong>" + $.t("Priority phone support") + "</strong>: +1 (614) 285-3457<br><br> " + $.t("Average waiting time on the phone is less than one minute. Phone support is available Monday-Friday from 6:30 AM until 3:00 PM EST.") + "</p><p><strong>" + $.t("Priority email support") + '</strong>: <a href="mailto:premium@tradingview.com">premium@tradingview.com</a><br><br>' + $.t("E-mail support hours are 4:00 AM â€“ 3 PM EST Monday - Friday. Typical response time is 1 hour during business hours.") + "</p>",
                publishIntro: '<div class="fake-handle"></div><div class="left-annotation">' + e.code("publish-idea-intro") + '</div><div class="main clearfix"><p><strong>' + $.t("Read before publishing") + "</strong></p><p>" + $.t("TradingView celebrates open communication and creative ideas. We want you to express yourself freely and use TradingView to share insights, learn from others, make friends and share the love for finance. Before publishing an idea make sure you read our House Rules and Community Guidelines. There youâ€™ll find info on how to post awesome analysis & get lots of views. You will also see examples of good ideas and ones that need improvement.") + '<br/><a target="_blank" href="/house-rules/">' + $.t("Read House Rules.") + '</a></p><div class="caption-text"><input id="_tv-dialog-donotshow-checkbox" type="checkbox" name="donotshow"{{#do_not_show}} checked="checked"{{/do_not_show}}/><span class="_tv-dialog-checkbox-mask donotshow{{#do_not_show}} _tv-dialog-checkbox-mask-active{{/do_not_show}}"></span> <label for="_tv-dialog-donotshow-checkbox"><strong>' + $.t("Do not show this message again") + '</strong></label></div><div class="_tv-dialogs-bottom-button"><a class="_tv-dialog-button-blue tv-left" id="publish-intro-continue">' + $.t("Continue Publishing") + "</a></div></div>",
                publishChartWidget: '<div class="main"><form id="publish-chart-form" autocomplete="off"><div class="caption first">' + $.t("IDEA TITLE AND DESCRIPTION") + '*</div><div class="publish-text"><input type="text" name="name" maxlength="64" placeholder="' + $.t("A clear title that describes your idea. Don't just write &ldquo;MSFT&rdquo; or &ldquo;MSFT Short&rdquo;.") + '"/></div><div class="empty-caption"></div><div class="publish-text autowidth jsfluid"><textarea name="description" placeholder="' + $.t("Describe what you think and WHY you think that. Good fundamental analysis always helps. Put yourself in reader's shoes and see if you'd understand the context based on what you wrote. Clearly state Profit Target and Stop Loss areas if you are making a prediction. This significantly helps others understand what you meant.") + '"></textarea></div><div class="empty-caption"></div><input type="hidden" name="tags"/><div class="publish-direction-buttons clearfix"><div class="col-short"><a class="_tv-button short" data-val="2">' + $.t("SHORT") + '</a></div><div class="col-long"><a class="_tv-button long" data-val="1">' + $.t("LONG") + '</a></div><div class="col-neutral"><a class="_tv-button neutral active" data-val="0">' + $.t("NEUTRAL") + '</a></div></div><div class="_tv-dialogs-bottom-button"><a class="_tv-dialog-button-blue tv-right" id="publish-dialog-do-publish">{{^editMode}}' + $.t("PUBLISH IDEA") + "{{/editMode}}{{#editMode}}" + $.t("EDIT IDEA") + '{{/editMode}}</a><span class="_tv-dialog-layoutpicker tv-right"></span><span class="_tv-dialog-cancel-button tv-right">' + $.t("Cancel") + '</span></div><input type="hidden" name="direction" value="0"/></form></div>',
                publishChart: '<div class="main"><form id="publish-chart-form" autocomplete="off"><div class="caption first">{{^isScript}}' + $.t("IDEA TITLE AND DESCRIPTION") + "*{{/isScript}}{{#isScript}}" + $.t("SCRIPT TITLE AND DESCRIPTION") + '*{{/isScript}}</div><div class="publish-text"><input {{#strictEditMode}}disabled{{/strictEditMode}} type="text" name="name" maxlength="64" placeholder="{{^isScript}}' + $.t("A clear title that describes your idea. Don't just write &ldquo;MSFT&rdquo; or &ldquo;MSFT Short&rdquo;.") + '{{/isScript}}"/></div><div class="empty-caption"></div>{{^strictEditMode}}<div class="bbcode-buttons clearfix"><span tabindex="-1" class="bbcode-button bb-bold"><svg xmlns="http://www.w3.org/2000/svg" width="35" height="29"><path d="M12.699 7.579h3.916c3.797-.089 5.041.962 5.151 3.896.072 1.909-1.75 2.441-2.622 2.598v.098c2.103.358 3.155 1.283 3.154 3.311-.002 3.047-2.479 3.925-4.766 3.945h-4.834zm1.611 5.928c2.418.132 5.948.008 5.85-2.344-.11-2.632-3.385-2.242-5.85-2.197zm0 1.367v5.176c2.514.154 6.377.26 6.26-2.676-.104-2.597-3.656-2.5-6.26-2.5z"/></svg></span><span tabindex="-1" class="bbcode-button bb-italic"><svg xmlns="http://www.w3.org/2000/svg" width="35" height="29"><path d="M15.624 7.579l-.28 1.281h2.563l-2.463 11.25h-2.563l-.287 1.313h6.782l.287-1.313h-2.594l2.463-11.25h2.594l.28-1.281h-6.782z"/></svg></span><span tabindex="-1" class="bbcode-button bb-list"><svg xmlns="http://www.w3.org/2000/svg" width="35" height="29"><path d="M8 8h2v2h-2zM8 13h2v2h-2zM8 18h2v2h-2zM14 8h12v2h-12zM14 13h13v2h-13zM14 18h9v2h-9z"/></svg></span><span tabindex="-1" class="bbcode-button bb-link"><svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg" width="18" height="15"><path d="M29.298 63.47l-4.048 4.02c-3.51 3.48-9.216 3.482-12.723 0-1.686-1.672-2.612-3.894-2.612-6.256s.927-4.585 2.61-6.258l14.9-14.783c3.09-3.062 8.898-7.57 13.132-3.372 1.943 1.93 5.08 1.92 7.01-.02 1.93-1.943 1.918-5.08-.025-7.01-7.197-7.14-17.834-5.82-27.098 3.37l-14.9 14.784C1.967 51.49 0 56.21 0 61.234s1.968 9.744 5.544 13.293C9.224 78.177 14.054 80 18.887 80c4.834 0 9.667-1.824 13.348-5.476l4.05-4.02c1.943-1.93 1.954-5.067.024-7.01-1.93-1.94-5.07-1.952-7.015-.023zM74.454 6.045c-7.73-7.67-18.538-8.086-25.694-.986l-5.046 5.01c-1.943 1.925-1.955 5.062-.025 7.005 1.93 1.943 5.064 1.954 7.01.025l5.04-5.004c3.708-3.68 8.56-2.155 11.728.986 1.69 1.674 2.615 3.897 2.615 6.26 0 2.362-.928 4.585-2.613 6.258L51.576 41.37c-7.27 7.213-10.68 3.828-12.134 2.384-1.943-1.928-5.08-1.916-7.01.026-1.93 1.942-1.918 5.08.025 7.01 3.337 3.31 7.146 4.953 11.14 4.953 4.888 0 10.052-2.463 14.962-7.338l15.893-15.77C78.03 29.082 80 24.362 80 19.338c0-5.022-1.97-9.743-5.546-13.294z"/></svg></span><span tabindex="-1" class="bbcode-button bb-embed"><svg xmlns="http://www.w3.org/2000/svg" width="35" height="29"><path d="M26.516 6.394a.85.85 0 0 0-.594.438l-6.719 11.094-4.406-5.469.031-.156c0-.713-.569-1.313-1.281-1.313-.713 0-1.281.6-1.281 1.313l.031.125-4.313 6.688a.85.85 0 1 0 1.438.906l4.125-6.438 4.406 5.5-.031.125c0 .713.569 1.313 1.281 1.313.713 0 1.281-.6 1.281-1.313v-.063l6.906-11.437a.85.85 0 0 0-.781-1.313.85.85 0 0 0-.094 0z"/></svg></span><span tabindex="-1" class="bbcode-button bb-symbol"><svg xmlns="http://www.w3.org/2000/svg" height="15" width="18" viewBox="2 6 27.1 22"><path d="M12.1 24h-2v-1h.4c-.5-.3-.9-.7-1.4-1.2v.2H4v-1h4.3c-.3-.3-.5-.7-.7-1H4v-1h3c-.2-.3-.3-.7-.4-1H4v-1h2.3c-.2-.8-.3-1.6-.3-2.5 0-1.6.4-3.1 1-4.5H2v18h15v-3h-.5c-1.6 0-3.1-.4-4.4-1zM9 26H4v-1h5v1zm0-2H4v-1h5v1zm6 2h-5v-1h5v1zm8.5-6.6c1-1.4 1.5-3 1.5-4.9C25 9.8 21.2 6 16.5 6S8 9.8 8 14.5s3.8 8.5 8.5 8.5c1.8 0 3.5-.6 4.9-1.5l5.6 5.6 2.1-2.1-5.6-5.6zM22 18.1L20.1 20c-1 .7-2.3 1.1-3.6 1.1-3.6 0-6.5-2.9-6.5-6.5S12.9 8 16.5 8s6.5 2.9 6.5 6.5c0 1.3-.4 2.5-1 3.6z"></path></svg></span><div class="bbcode-block"><div class="bbcode-link-form"><input type="text" class="link" disabled><span class="_tv-dialog-button-blue link-submit">Insert</span></div><div class="bbcode-embed-form"><input type="text" class="embed" disabled><span class="_tv-dialog-button-blue embed-submit">' + $.t("Insert") + '</span></div><div class="bbcode-symbol-form"><input type="text" class="symbol" disabled><span class="_tv-dialog-button-blue symbol-submit">' + $.t("Insert") + '</span></div></div></div>{{/strictEditMode}}<div class="publish-text autowidth jsfluid"><textarea {{#strictEditMode}}disabled{{/strictEditMode}} name="description" placeholder="{{^isScript}}' + $.t("Describe what you think and WHY you think that. Good fundamental analysis always helps. Put yourself in reader's shoes and see if you'd understand the context based on what you wrote. Clearly state Profit Target and Stop Loss areas if you are making a prediction. This significantly helps others understand what you meant.") + '{{/isScript}}"></textarea></div>{{^editMode}}{{^isScript}}<div class="empty-caption"></div><div class="publish-direction-buttons clearfix"><div class="col-short"><a class="_tv-button short" data-val="2">' + $.t("SHORT") + '</a></div><div class="col-long"><a class="_tv-button long" data-val="1">' + $.t("LONG") + '</a></div><div class="col-neutral"><a class="_tv-button neutral active" data-val="0">' + $.t("NEUTRAL") + '</a></div></div>{{/isScript}}{{/editMode}}{{^isScript}}<div class="caption">' + $.t("LINK TO RELATED IDEAS") + '</div><input class="publish-related" placeholder="' + $.t("Pick your idea or paste url to someone's else idea.") + '">{{/isScript}}<div class="caption">' + $.t("TAGS") + '</div><input class="publish-tags"><div class="_tv-dialogs-bottom-button">{{^isScript}}{{^editMode}}<label class="publish-dialog-privacy tv-right" title="' + $.t("Private Chart Publishing") + '"><input name="public" type="checkbox" checked="checked"/><span class="publish-dialog-privacy-icon"></span></label>{{/editMode}}{{/isScript}}<a class="_tv-dialog-button-blue tv-right" id="publish-dialog-do-publish">{{#isScript}}{{#editMode}}' + $.t("EDIT SCRIPT") + "{{/editMode}}{{/isScript}}{{#isScript}}{{^editMode}}" + $.t("PUBLISH SCRIPT") + "{{/editMode}}{{/isScript}}{{^isScript}}{{#editMode}}" + $.t("EDIT IDEA") + "{{/editMode}}{{/isScript}}{{^isScript}}{{^editMode}}" + $.t("PUBLISH IDEA") + '{{/editMode}}{{/isScript}}</a>{{^editMode}}<span class="_tv-dialog-layoutpicker tv-right"></span>{{/editMode}}<span class="_tv-dialog-cancel-button tv-right">' + $.t("Cancel") + '</span>{{^editMode}}<div class="tv-left repost-to"><span class="repost-to-label">' + $.t("Repost to") + '</span><input id="_tv-dialog-twitter-checkbox" type="checkbox" name="twitter"{{#has_twitter}} checked="checked"{{/has_twitter}}/><label for="_tv-dialog-twitter-checkbox" class="repost-to-twitter"><span class="icon"></span></label><input id="_tv-dialog-stocktwits-checkbox" type="checkbox" name="stocktwits"{{^has_twitter}}{{#has_stocktwits}} checked="checked"{{/has_stocktwits}}{{/has_twitter}}/><label for="_tv-dialog-stocktwits-checkbox" class="repost-to-stocktwits"><span class="icon"></span></label><div class="clear"></div></div>{{/editMode}}</div><input type="hidden" name="direction" value="0"/></form></div>',
                goPro: {
                    layout: '<div class="col-main"><div class="col-copy"></div><div class="actions-block">{{^noButton}}<a class="no-button">' + $.t("No, thank you") + '</a>{{^exchangesButton}}{{^trialButton}}<a href="/gopro/" target="_blank" class="yes-button">' + $.t("Upgrade now") + '<span class="arrow-icon"></span></a>{{/trialButton}}{{#trialButton}}<a href="/gopro/" target="_blank" class="yes-button">' + $.t("30 Days Free Trial") + '</a>{{/trialButton}}{{/exchangesButton}}{{#exchangesButton}}<a href="/gopro/" target="_blank" class="yes-button" onclick="pro.visitExchangesPage({newWindow: true}); return false;">' + $.t("Add real-time markets") + '</a>{{/exchangesButton}}{{/noButton}}</div></div><div class="col-aside"><div class="col-bg"></div><div class="col-copy"><h2>' + $.t("Why <em>Go Pro</em>?") + "</h2><ul><li>" + $.t("Official real-time &amp; intraday data") + "</li><li>" + $.t("Intraday Renko, Kagi, Line Break, PnF charts") + "</li><li>" + $.t("Intraday Spread Charts") + "</li><li>" + $.t("Volume Profile Indicators") + "</li><li>" + $.t("Custom Intervals") + "</li><li>" + $.t("Multiple Watch Lists") + "</li><li>" + $.t("Hot Lists") + "</li><li>" + $.t("PRO Badge &amp; Adding Value") + "</li><li>" + $.t("Extended Trading Hours") + "</li><li>" + $.t("Multiple Charts Layout") + '</li><li><a href="/gopro/" target="_blank">' + $.t("Learn about all PRO features") + '</a></li></ul></div></div><div class="clear"></div>',
                    defaultCopy: "<h2>" + $.t("Upgrade your account") + "</h2><p>" + $.t("This functionality is available only to PRO users.") + "</p><p>" + $.t("Please consider subscribing to our PRO service which includes many other features not available in the free membership.") + "</p>",
                    features: {
                        proRtSymbol: "<h2>" + $.t("Official AMEX, NYSE&nbsp;&amp; NASDAQ Real-time Data") + "</h2><p>" + $.t("You requested a symbol that is available only to PRO Plus and Premium users. You will now be switched to the equivalent BATS symbol.") + "</p><p>" + $.t("NASDAQ and NYSE charge exchange and per-user fees, which means we canâ€™t give this for free to everyone (as much as we'd love&nbsp;to). Our free feed is provided by BATS electronic exchange, which offers approximate volumes and prices with fewer updates.") + "</p><p>" + $.t("If you need only the most complete and accurate data, then consider subscribing to the PRO Plus or Premium service from only $19.95/m that offers actual real-time data from the NYSE/NASDAQ/AMEX exchanges and much more.") + "</p>",
                        kagiRenko: "<h2>" + $.t("Renko, Kagi, Line Break, Point&nbsp;&amp;&nbsp;Figure") + "</h2><p>" + $.t("Only PRO Plus and Premium subscribers can access intraday Renko, Kagi, Line Break, Point & Figure charts. You will now be switched to a Daily (D) interval.") + "</p><p>" + $.t("Intraday Renko, Kagi, Line Break and Point & Figure charts take considerable resources, so we can't give them out for free to everyone (as much as we'd like&nbsp;to). We can, however, give out these charts for free in the Daily and Weekly resolutions.") + "</p><p>" + $.t("If you do intraday analysis consider subscribing to PRO Plus or Premium service from only $19.95/m.") + "</p>",
                        hotLists: "<h2>" + $.t("Hot Lists") + "</h2><p>" + $.t("You requested a hotlist that is available only to PRO users.") + "</p><p>" + $.t("HotLists continuously scan the US stock market to identify best trading opportunities and take considerable resources, so we can't give them out for free to everyone (as much as we'd like&nbsp;to).") + "</p><p>" + $.t("If you want to identify opportunities in an efficient manner, consider subscribing to our PRO service for only $9.95/m. This subscription includes many other features not available in the free membership.") + "</p>",
                        intradaySpread: "<h2>" + $.t("Intraday Spread") + "</h2><p>" + $.t("You requested an intraday spread symbol that is available only to PRO Plus and Premium users. You will now be switched to a Daily (D) interval.") + "</p><p>" + $.t("Spreads for intraday charts are calculated based on 1-minute bars, and then recompiled into the selected interval. This approach is the only correct one, but requires significant server power. This means we can't give spread charts for free to everyone (as much as we'd like&nbsp;to).") + "</p><p>" + $.t("If you do intraday spread analysis consider subscribing to PRO Plus or Premium service from only $19.95/m.") + "</p>",
                        customIntervals: "<h2>" + $.t("Custom Intervals") + "</h2><p>" + $.t("You requested a custom interval that is available only to PRO&nbsp;users.") + "</p><p>" + $.t("This feature allows you to create any chart, such as 7&nbsp;minutes, 12&nbsp;minutes, or 8&nbsp;hours. If you want to identify opportunities on custom intervals in an efficient manner, consider subscribing to our PRO service for only $9.95/m. This subscription includes many other features not available in the free membership.") + "</p>",
                        multipleWatchLists: "<h2>" + $.t("Multiple Watch Lists") + "</h2><p>" + $.t("Multiple Watch Lists available only to  PRO users.") + "</p><p>" + $.t("Any custom watchlist can be saved under a unique name and loaded at any time with one click. All lists are available from any computer, so you have your workspace wherever you go.") + "</p><p>" + $.t("If you want to use different watchlists to quickly assess different sectors of the market, consider subscribing to our PRO service for only $9.95/m. This subscription includes many other features not available in the free membership.") + "</p>",
                        extendedHours: "<h2>" + $.t("Extended Trading Hours") + "</h2><p>" + $.t("Only PRO Plus and Premium subscribers can access extended hours data on the charts.  Extended trading hours include both pre-market and after hours sessions each day the market is open.") + "</p><p>" + $.t("If you want to act quickly to news and events that occur when the regular market is closed, please consider subscribing to PRO Plus or Premium service from only $19.95/m.") + "</p>",
                        multipleCharts: "<h2>" + $.t("Multiple Charts Layout") + "</h2><p>" + $.t("Multiple Charts Layout available only to PRO users.") + "</p><p>" + $.t("You can plot up to 8 charts in one tab of your browser. Moreover, itâ€™s possible to link your charts by resolutions or symbols. And even use global cursor that synchronizes many charts.") + "</p><p>" + $.t("If you want to unlock the power of multiple time frame analysis and add multiple symbols to the same chart layout, consider subscribing to our PRO service for only $9.95/m. This subscription includes many other features not available in the free membership.") + "</p>",
                        alerts: "<h2>" + $.t("Unlimited server-side alerts") + "</h2><p>" + $.t("You already set {{options.maxAlertsNumber}} alerts. Upgrade to PRO Plus to set unlimited custom alerts and improve your experience!") + "</p><p>" + $.t("TradingView alerts run on powerful and backed-up servers, so youâ€™ll always get notified when something happens and wonâ€™t miss a beat. This takes considerable resources, so we can't give an unlimited number of alerts to everyone for free (as much as we'd like to).") + "</p><p>" + $.t("Become a PRO Plus user for just $19.95 and get unlimited alerts! You also get a ton of other useful features, like multiple charts on the same screen, custom chart timeframe like 3-min charts, and our sincere thanks!") + "</p>",
                        intradayExchange: "<h2>" + $.t("Official real-time, intraday and volume data") + "</h2><p>" + $.t("Only PRO, PRO Plus and Premium users that have a subscription to {{exchange}} Exchange can get official data on real-time prices, volume and intraday history. You'll now be switched to the Daily (D) interval, which is available to all users.") + "</p><p>" + $.t("Exchanges charge per-user fees and redistribution fees from TradingView for delivery of intraday and real-time data. So, we can't give this data for free to everyone (as much as we'd like to).") + "</p><p>" + $.t("If you do intraday analysis, consider subscribing to the {{exchange}} exchange.{{^exchangesButton}} You must subscribe to PRO, PRO Plus or Premium service first (from only 9.95/m).{{/exchangesButton}}") + "</p>",
                        savedChartsLimit: "<h2>" + $.t("Unlimited Saved Charts") + "</h2><p>" + $.t("You can save up to 5 charts with your subscription. Upgrade to PRO, PRO Plus or Premium  membership and save unlimited charts, along with many other exciting features. Starting from only $9.95 a month - upgrade today!") + "</p>",
                        studyLimit: "<h2>" + $.t("Unlimited number of indicators on a chart") + "</h2><p>" + $.t("Your free account allows you to apply up to 10 studies to a chart. Upgrade to PRO, PRO Plus or Premium account to have as many studies on a chart as you want, as well as many other exciting features.") + "</p><p>" + $.t("We are happy to give away as many things for free as possible, however studies are server-based and this takes considerable resources. So we can't give an unlimited number of indicators to everyone for free (as much as we'd like to).") + "</p><p>" + $.t("Become a Pro user for just $9.95 and get unlimited studies! You also get a ton of other useful features, like multiple charts on the same screen, custom chart timeframe like 3-min charts, and our sincere thanks because you support further development of TradingView!") + "</p>",
                        savedChartsForAlertLimit: "<h2>" + $.t("Unlimited Saved Charts") + "</h2><p>" + $.t("To set an alert on a drawing requires the chart to be saved. Unfortunately you have already saved 5 charts. Upgrade to PRO, PRO Plus or Premium  account and save as many charts as you want, along with many other exciting features. Starts from only $9.95 a month - upgrade today!") + "</p>",
                        DataQualityPopup: "<h2>" + $.t("Tick by tick push data. Never miss a thing.") + "</h2><p>" + $.t("Free plans get up to one price update per second, while upgraded plans have feature real-time tick by tick push data (all the trades in real-time).") + "</p><p>" + $.t("To catch every small change, you need to see every trade. Upgrade to any paid plan and never miss a beat!") + "</p>",
                        BATSExchangePopup: "<h2>" + $.t("Get the Most Accurate Market Data") + "</h2><p>" + $.t("Free plans feature real-time US stock data from the BATS BZX exchange. Upgraded plans come with an option to add more market data, such as NYSE, NASDAQ and AMEX feeds (charged separately).") + "</p><p>" + $.t("What's the difference?") + "</p><ul><li>" + $.t("BATS prices may not match most commonly quoted prices (like the ones on the news, other sites or trading software)") + "</li><li>" + $.t("BATS shows less volume for most stocks") + "</li><li>" + $.t("Some thinly traded stocks may not appear on BATS at all") + "</li><li>" + $.t("BATS doesn't charge per-user fees (so we can distribute without charging separately)") + "</li></ul><p>" + $.t("To get the most accurate US stock data - grab any upgraded plan and add the â€œAMEX + NASDAQ + NYSEâ€ package for just $6 / month. The plans also come with a ton of other useful features to help your trading.") + "</p>",
                        CHXEURExchangePopup: "<h2>" + $.t("Get the Most Accurate Market Data") + "</h2><p>" + $.t("Free plans feature real-time UK stock data from the CHXEUR exchange. Upgraded plans come with an option to add more market data, such as LSE and LSIN feeds (charged separately).") + "</p><p>" + $.t("What's the difference?") + "</p><ul><li>" + $.t("CHXEUR prices may not match most commonly quoted prices (like the ones on the news, other sites or trading software)") + "</li><li>" + $.t("CHXEUR shows less volume for most stocks") + "</li><li>" + $.t("Some thinly traded stocks may not appear on CHXEUR at all") + "</li><li>" + $.t("CHXEUR doesn't charge per-user fees (so we can distribute without charging separately)") + "</li></ul><p>" + $.t("To get the most accurate UK stock data - grab any upgraded plan and add LSE or LSIN package. The plans also come with a ton of other useful features to help your trading.") + "</p>",
                        editCreatePublicChat: "<h2>" + $.t("New Public Chat") + "</h2><p>" + $.t("Only upgraded plan holders can suggest new rooms! New chat rooms are for interesting topics that are not yet covered - please search existing rooms before suggesting. Topics interesting to a wider audience work best!") + "</p><p>" + $.t("Creating new public chats is reserved only for PRO Plus and Premium users.") + "</p>"
                    }
                },
                addSymbol: ' <div class="main"> <div class="symbol-edit-place"></div>{{#overlayOption}} <div class="_tv-dialog-relative">	<input id="_tv-dialog-addsymbol-overlay-checkbox" type="checkbox" name="addsymbol-overlay" {{#overlayOptionChecked}}checked="checked"{{/overlayOptionChecked}} />	<span class="_tv-dialog-checkbox-mask _tv-dialog-checkbox-mask{{#overlayOptionChecked}}-active{{/overlayOptionChecked}}"></span>	<label for="_tv-dialog-addsymbol-overlay-checkbox">' + $.t("Overlay the main chart") + '</label> </div>{{/overlayOption}} <div class="_tv-dialogs-bottom-button"> <span class="_tv-button tv-right tv-uppercase ok">{{okButtonTitle}}</span> </div> </div>',
                billingCycleSelection: '<div class="main billing-cycle-dialog"><div class="bcd-title">' + $.t("Subscription Plans") + '</div><div class="bcd-subtitle">' + $.t("You're subscribing to {{ product_title }}") + '</div><div class="bcd-choice-container clearfix"><div class="bcd-choice active" data-cycle="y"><div class="bcd-choice-bg"></div><div class="bcd-choice-marker"></div><div class="bcd-choice-copy"><h5>' + $.t("Buy Annual") + '</h5><div class="bcd-prices"><p>${{price_1_m}} ' + $.t("per month") + "</p><p>${{price_1_y}} " + $.t("per year") + "</p><p>" + $.t("Save ${{savings}}") + "</p><p>" + $.t("No monthly invoices") + '</p></div></div></div><div class="bcd-choice" data-cycle="m"><div class="bcd-choice-bg"></div><div class="bcd-choice-marker"></div><div class="bcd-choice-copy"><h5>' + $.t("Buy Monthly") + '</h5><div class="bcd-prices"><p>${{price_2_m}} ' + $.t("per month") + "</p><p>${{price_2_y}} " + $.t("per year") + "</p><p>" + $.t("Invoiced every month") + '</p></div></div></div></div><div class="bcd-continue"><a class="bcd-continue-button">' + $.t("Continue") + "</a></div></div>",
                symbolSearch: '<div class="symbol-block"><div class="spread-actions"></div><div class="symbol-block-inputspacer"><input maxlength="' + TradingView.SYMBOL_SEARCH_MAX_LENGTH + '" /><div class="search-cion"></div></div></div><div class="filter"></div><div class="results"></div>',
                proRTTrialOffer: '<div class="main"><h3>' + $.t("Your Personal Invitation to&nbsp;Go&nbsp;PRO Plus") + "</h3><p>" + $.t("For a limited time, weâ€™re offering a <strong>FREE 1 month</strong> subscription of PRO Plus (no credit card required, no catches or hidden autobilling).") + "</p><p>" + $.t('Our PRO Plus users see amazing benefits. You get advanced trading opportunities using multi symbol statistical arbitrage techniques. <a href="/gopro/" target="_blank">Read more about PRO Plus features</a>.') + '</p><div class="big-buttons two-buttons"><a href="javascript://" class="big-button trial">' + $.t("Activate Offer and GO PRO") + '</a><a href="javascript://" class="big-button nothanks">' + $.t("No, thank you") + "</a></div></div>",
                upgradeForYearOffer1: '<div class="main"><h3>' + $.t("GET 6 MONTHS FREE") + "</h3><p>" + $.t("You already spent ${0}, and if you continue to pay every month, the year will cost you ${1}.").format("{{spent}}", "{{year_cost}}") + "</p><p>" + $.t("Donâ€™t let your money go to waste - upgrade now to an annual plan for just ${0}. Itâ€™s time to stop spending and start investing, get 6 months free!").format("{{cost}}") + '</p><div class="big-buttons two-buttons"><a href="javascript://" class="big-button js-yes-btn tv-yes-btn">' + $.t("Yes, get 6 months free!") + '</a><a href="javascript://" class="big-button js-no-btn tv-no-btn">' + $.t("No, continue with monthly payments of ${0}").format("{{monthly_cost}}") + "</a></div></div>",
                upgradeForYearOffer2: '<div class="main"><h3>' + $.t("GET 6 MONTHS FREE") + "</h3><p>" + $.t("Endless monthly payments can drain your account. Donâ€™t waste your money - weâ€™ll apply what you already paid toward an annual plan. Pay just ${0} and use your plan for another 10 months (includes 6 free months).").format("{{cost}}") + '</p><div class="big-buttons two-buttons"><a href="javascript://" class="big-button js-yes-btn tv-yes-btn">' + $.t("Yes, get 6 months free!") + '</a><a href="javascript://" class="big-button js-no-btn tv-no-btn">' + $.t("No, continue with monthly payments of ${0}").format("{{monthly_cost}}") + "</a></div></div>",
                upgradeForYearOffer3: '<div class="main"><h3>' + $.t("GET 6 MONTHS FREE") + "</h3><p>" + $.t("Investments in the right things is what makes you wealthy. Spending money every month is not.") + "</p><p>" + $.t("You already paid for {0} months - pay just as much and weâ€™ll throw in 6 free months! Thatâ€™s just ${1} for another {2} months, the best investment you can make.").format("{{paid_months}}", "{{cost}}", "{{unpaid_months}}") + '</p><div class="big-buttons two-buttons"><a href="javascript://" class="big-button js-yes-btn tv-yes-btn">' + $.t("Yes, get 6 months free!") + '</a><a href="javascript://" class="big-button js-no-btn tv-no-btn">' + $.t("No, continue with monthly payments of ${0}").format("{{monthly_cost}}") + "</a></div></div>",
                earlyAccess: '<div class="main"><h3>{{#is_finished}}' + $.t("Last Reminder &ndash; 50% off Pro Plus!") + "{{/is_finished}}{{^is_finished}}" + $.t("Intro Offer &ndash; 50% off Pro Plus!") + "{{/is_finished}}</h3>{{#is_1wk}}<p>" + $.t("Upgrade to Pro Plus during your trial and get up to 50% off when comparing to the monthly price. There are 3&nbsp;more weeks, so take a good look around! Any time during the trial you can upgrade to 12&nbsp;months of Pro Plus for just $179.") + "</p><p>" + $.t("Top 3 most popular weapons in your arsenal with ProPlus:") + "</p><ul><li>" + $.t("Easily monitor many markets at once using a multiple charts layout") + "</li><li>" + $.t("Instantly spot hidden opportunities using the watchlists and hotlists") + "</li><li>" + $.t("Add real-time data from markets around the globe to your account") + "</li></ul>{{/is_1wk}}{{#is_2wk}}<p>" + $.t("How much is a typical latte? $5. How much is a month of getting the most out of Tradingview? Just under 3 lattes. Special intro offer lasts for another 2&nbsp;weeks - get a full year of Pro Plus for just $179.") + "</p><p>" + $.t("Drive to victory with these top 3 most discussed tools:") + "</p><ul><li>" + $.t("Always stay aware with unlimited {0} to your computer and phone").format('<a href="https://www.tradingview.com/stock-charts-support/index.php/Alerts" target="_blank">' + $.t("server-side alerts") + "</a>") + "</li><li>" + $.t("Easily identify profitable trends with intraday {0}, {1}, {2}, {3} charts").format('<a href="https://www.tradingview.com/stock-charts-support/index.php/Renko_Charts" target="_blank">' + $.t("Renko") + "</a>", '<a href="https://www.tradingview.com/stock-charts-support/index.php/Kagi_Charts" target="_blank">' + $.t("Kagi") + "</a>", '<a href="https://www.tradingview.com/stock-charts-support/index.php/Line_Break_Charts" target="_blank">' + $.t("Line Break") + "</a>", '<a href="https://www.tradingview.com/stock-charts-support/index.php/Point_and_Figure_(PnF)_Charts" target="_blank">' + $.t("PnF") + "</a>") + "</li><li>" + $.t("Master the charts with as many technical indicators on any chart as you need (or want)") + "</li></ul>{{/is_2wk}}{{#is_3wk}}<p>" + $.t("Just 1&nbsp;week left in your trial and the intro offer - get 12&nbsp;months of ProPlus for just $179. Have you explored it all? There are hidden treasures that could make your day.") + "</p><p>" + $.t("Top 3 little known tools in Pro Plus most folks donâ€™t know about:") + "</p><ul><li>" + $.t("Immediately see key trading levels with {0}").format('<a href="https://www.tradingview.com/stock-charts-support/index.php/Volume_Profile" target="_blank">' + $.t("volume profile indicators") + "</a>") + "</li><li>" + $.t("See what happens before and after main market activity with {0}").format('<a href="https://www.tradingview.com/stock-charts-support/index.php/Extended_Trading_Hours" target="_blank">' + $.t("extended hours") + "</a>") + "</li><li>" + $.t("Get unique insights by comparing any symbol to any another using {0}").format('<a href="https://www.tradingview.com/stock-charts-support/index.php/Spread_Charts" target="_blank">' + $.t("spread charts") + "</a>") + "</li></ul>{{/is_3wk}}{{#is_finished}}<p>" + $.t("Hope you enjoyed it! This is your FINAL opportunity to grab 12&nbsp;months of Pro Plus for just $179 (regular monthly is $360, annual is $300). Come on, join us!") + "</p><p>" + $.t("With Pro Plus you get:") + "</p><ul><li>" + $.t("Monitor many markets at once using a multiple charts layout") + "</li><li>" + $.t("Find hidden opportunities using the watchlists and hotlists") + "</li><li>" + $.t("Dive into symbol details with custom intervals") + "</li><li>" + $.t("Always be aware with unlimited {0}").format('<a href="https://www.tradingview.com/stock-charts-support/index.php/Alerts" target="_blank">' + $.t("server-side alerts") + "</a>") + "</li><li>" + $.t("See where trends are going with intraday {0}, {1}, {2}, {3}").format('<a href="https://www.tradingview.com/stock-charts-support/index.php/Renko_Charts" target="_blank">' + $.t("Renko") + "</a>", '<a href="https://www.tradingview.com/stock-charts-support/index.php/Kagi_Charts" target="_blank">' + $.t("Kagi") + "</a>", '<a href="https://www.tradingview.com/stock-charts-support/index.php/Line_Break_Charts" target="_blank">' + $.t("Line Break") + "</a>", '<a href="https://www.tradingview.com/stock-charts-support/index.php/Point_and_Figure_(PnF)_Charts" target="_blank">' + $.t("PnF") + "</a>") + "</li><li>" + $.t("Compare any symbol to another using {0}").format('<a href="https://www.tradingview.com/stock-charts-support/index.php/Spread_Charts" target="_blank">' + $.t("spread charts") + "</a>") + "</li><li>" + $.t("Identify key trading levels with {0}").format('<a href="https://www.tradingview.com/stock-charts-support/index.php/Volume_Profile" target="_blank">' + $.t("volume profile indicators") + "</a>") + "</li><li>" + $.t("Get the scoop before and after main market activity with {0}").format('<a href="https://www.tradingview.com/stock-charts-support/index.php/Extended_Trading_Hours" target="_blank">' + $.t("extended hours") + "</a>") + "</li><li>" + $.t("Compare market movements with {0}").format('<a href="/stock-charts-support/index.php/Scailing_Options" target="_blank">' + $.t("different scales") + "</a>") + '</li></ul>{{/is_finished}}<br/><div class="big-buttons"><a href="javascript://" class="big-button ordernow">' + $.t("Ready to upgrade") + '</a></div><div class="more-controls"><a href="javascript://" class="nothanks">' + $.t("Decide later") + "</a></div></div>",
                auth: '<div class="main"><div class="auth-dialog-socials"><a class="auth-dialog-social-facebook" title="Facebook">' + e.code("facebook") + '</a><a class="auth-dialog-social-twitter" title="Twitter">' + e.code("twitter") + '</a><a class="auth-dialog-social-google-oauth2" title="Google+">' + e.code("googleplus") + '</a><a class="auth-dialog-social-yahoo" title="Yahoo!">' + e.code("yahoo") + '</a><a class="auth-dialog-social-linkedin" title="Linked In">' + e.code("linkedin") + '</a><a class="auth-dialog-social-stocktwits" title="StockTwits">' + e.code("stocktwits") + '</a></div><div class="auth-dialog-separator"><span class="auth-dialog-separator-copy">' + $.t("Or") + '</span></div><form id="signup-form" action="/accounts/signup/">{{#defsigup}}<input name="email" type="text" placeholder="' + $.t("E-mail") + '"><input name="username" type="text" placeholder="' + $.t("Username") + '"><input name="password" type="password" placeholder="' + $.t("Password") + '">{{#referralSessionId}}<input name="referral_session_id" type="hidden" value="{{referralSessionId}}">{{/referralSessionId}}{{/defsigup}}{{#dailyfx}}<table class="_tv-dialog-colomn-table"><tr><td><input name="email" type="text" placeholder="' + $.t("E-mail") + '"></td><td><input name="phone" type="text" placeholder="' + $.t("Phone") + '"></td></tr><tr><td><input name="firstname" type="text" placeholder="' + $.t("First Name") + '"></td><td><input name="lastname" type="text" placeholder="' + $.t("Last Name") + '"></td></tr><tr><td><input name="username" type="text" placeholder="' + $.t("Username") + '"></td><td><input name="password" type="password" placeholder="' + $.t("Password") + '"></td></tr></table>{{/dailyfx}}<input type="hidden" name="signup_trial" value="0"><div class="auth-dialog-notice"><p>' + $.t('By clicking on &ldquo;Sign Up&rdquo; you are agreeing to the <a href="/policies/" target="_blank">Terms&nbsp;of&nbsp;Service</a>.') + '</p></div><button class="" type="submit">' + $.t("Sign Up") + "</button></form></div>",
                signin: '<div class="main"><div class="auth-dialog-socials"><a class="auth-dialog-social-facebook" title="Facebook">' + e.code("facebook") + '</a><a class="auth-dialog-social-twitter" title="Twitter">' + e.code("twitter") + '</a><a class="auth-dialog-social-google-oauth2" title="Google+">' + e.code("googleplus") + '</a><a class="auth-dialog-social-yahoo" title="Yahoo!">' + e.code("yahoo") + '</a><a class="auth-dialog-social-linkedin" title="Linked In">' + e.code("linkedin") + '</a><a class="auth-dialog-social-stocktwits" title="StockTwits">' + e.code("stocktwits") + '</a></div><div class="auth-dialog-separator"><span class="auth-dialog-separator-copy">' + $.t("Or") + '</span></div><form id="signin-form" action="/accounts/signin/"><input name="username" type="text" placeholder="' + $.t("Username") + '"><input name="password" type="password" placeholder="' + $.t("Password") + '"><div class="auth-dialog-options"><label class="auth-dialog-remember"><span class="auth-dialog-remember-pseudo"><input type="checkbox" name="remember" checked /><i></i></span><span class="auth-dialog-remember-text">' + $.t("Remember me") + '</span></label><a class="auth-dialog-recover recover-link">' + $.t("Forgot password?") + '</a></div><button type="submit">' + $.t("Sign In") + "</button></form></div>",
                afterSocialSign: '<form class="main" id="save-form" action="/accounts/first_login_data/"><label><span class="auth-dialog-label-text">' + $.t("Username") + '</span><input name="username" type="text" value="{{username}}"></label>{{^email}}<label><span class="auth-dialog-label-text">' + $.t("E-mail") + '</span><input name="email" type="text"></label>{{/email}}{{#dailyfx}}<label><span class="auth-dialog-label-text">' + $.t("Phone") + '</span><input name="phone" type="text"></label><label><span class="auth-dialog-label-text">' + $.t("First Name") + '</span><input name="firstname" value="{{firstname}}" type="text"></label><label><span class="auth-dialog-label-text">' + $.t("Last Name") + '</span><input name="lastname" value="{{lastname}}" type="text"></label>{{/dailyfx}}{{#referralSessionId}}<input name="referral_session_id" type="hidden" value="{{referralSessionId}}">{{/referralSessionId}}<button type="submit">{{buttonCaption}}</button></form>',
                recover: '<div class="main"><h2 class="auth-dialog-title recover"><span class="">' + $.t("Recover Password") + '</span></h2><form id="recover-form" action="/accounts/forgot_password/"><input name="email" type="text"placeholder="' + $.t("E-mail") + '"><button type="submit">' + $.t("Recover") + "</button></form></div>",
                browserExtension: '<div class="main-browser-extension"><div class="_tv-dialog-title _tv-dialog-title-hidden"><a class="_tv-dialog-title-close"></a></div><div class="left"><div class="extension-poster"></div></div><div class="right"><div class="browser-info"><img class="logo" src="{{ browser.logo }}"><div class="name ">{{ browser.name }}</div><div class="info">' + $.t("Extension") + '</div><div class="clearfix"></div></div><h1>' + $.t("TradingView Free Quotes and Chat") + "</h1><p>" + $.t("Follow free market quotes, your watchlist, public and private chats from TradingView, while surfing the web in any browser tab.") + '</p><a href="{{{ browser.href }}}" class="install-extension" target="_blank"><button>' + $.t("Install") + '</button></a></div><div class="clearfix"></div></div>',
                chartingLibraryForm: '<div class="main"><div class="line"></div><p class="lead-in">' + $.t("Here are a few steps to get your Charting Library:") + '</p><form action="/send-charting-library-mail/"><div class="agreement"><div class="dropzone"></div><div class="description">' + $.t('Download our <a href="{0}" target="_blank">License Agreement</a>, sign it, scan it, and attach. Please make sure that the document you attached contains all pages and your name and signature are readable.').format("https://s3.amazonaws.com/tradingview/charting_library_license_agreement.pdf") + '</div></div><div class="clear two-columns"><div class="column-wrap"><div class="description">' + $.t("Your name:") + '</div><input type="text" name="name" placeholder="' + $.t("Username") + '"/></div><div class="column-wrap"><div class="description">' + $.t("Enter your email address:") + '</div><input type="text" name="email" placeholder="user@email.com"/></div></div><div><div class="description">' + $.t("List the link to your individual (not org) GitHub profile:") + '</div><input type="text" name="github" placeholder="github.com/username"/></div><div><div class="description">' + $.t("URL of your website. Free library only licensed for public use:") + '</div><input type="text" name="website" placeholder="http://www.yoursite.com"/></div><div><div class="description">' + $.t("Describe your company and project in a few sentences:") + '</div><textarea name="description" placeholder="' + $.t("Eg. I have a financial website/app at <URL> and need interactive charts for <abc>") + '"></textarea></div></form><p>' + $.t("We will review your application and grant access within 1-2 business days.") + '</p><div class="big-buttons"><button class="cancel-button">' + $.t("Cancel") + '</button><button class="big-button">' + $.t("Send") + "</button></div></div>",
                chartingLibraryHelp: '<div class="main"><div class="line"></div><p>' + $.t('Your setup is almost complete. Access will granted within 1-2 business days once we review the application. Youâ€™ll get an email notification (check Spam folder) with an acceptance link, or visit <a target="_blank" href="{0}">our page</a>.').format("https://github.com/tradingview") + "</p><p>" + $.t("Resources") + '</p><ol><li><a target="_blank" href="http://demo_chart.tradingview.com/">' + $.t("Demo Charting Library") + '</a></li><li><a target="_blank" href="https://github.com/tradingview/charting_library/wiki">' + $.t("Wiki on Github") + '</a>*</li><li><a target="_blank" href="https://github.com/tradingview/charting_library/wiki/Running-Your-Charting-Library">' + $.t("Article on Github") + '</a>*</li><li><a target="_blank" href="https://github.com/tradingview/charting_library/issues">' + $.t("Bugtracker on Github") + "</a>*</li></ol><small>" + $.t("*&nbsp;You have to be logged into your authorized Github profile to access. Otherwise it will show â€œ404 Not Found.â€") + "</small><p>" + $.t("If youâ€™d like to remove our logo from the charts, we have a commercial version. Let me know if this option is something you are interested in, and Iâ€™ll be happy to jump on a quick call to discuss.") + "</p><p><div>" + $.t("Stan Bokov") + "</div><div>" + $.t("Co-Founder, COO") + '</div><a class="email" href="mailto:founders@tradingview.com">founders@tradingview.com</a><div>1-312-442-0949</div></p><div class="big-buttons"><button class="big-button">' + $.t("Close") + "</button></div></div>",
                highlightCommentDialog: '<div class="main"><div class="message"><textarea></textarea></div><div class="dialog-buttons"><a class="_tv-button ok">' + $.t("Ok") + '</a><a class="_tv-button cancel">' + $.t("Skip") + "</a></div></div>",
                languagePopup: {
                    ru: '<img src="/static/images/dialogs/kremlin.png" alt="kremlin" class="splash-image ru"/><div class="wrap with-image"><h3>TradingView Ñ‚ÐµÐ¿ÐµÑ€ÑŒ Ð½Ð° Ñ€ÑƒÑÑÐºÐ¾Ð¼!</h3>ÐŸÑ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÑÐµÐ¼ Ð²Ð°ÑˆÐµÐ¼Ñƒ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸ÑŽ Ñ€ÑƒÑÑÐºÐ¾ÑÐ·Ñ‹Ñ‡Ð½ÑƒÑŽ Ð²ÐµÑ€ÑÐ¸ÑŽ TradingView, Ð¿ÐµÑ€ÐµÐ¹Ð´Ñ Ð½Ð° ÐºÐ¾Ñ‚Ð¾Ñ€ÑƒÑŽ, Ð²Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ:<ul><li>Ð‘ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ñ‹Ðµ ÐºÐ¾Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ¸ Ñ€Ñ‹Ð½ÐºÐ¾Ð² ÐœÐ¾ÑÐºÐ¾Ð²ÑÐºÐ¾Ð¹ Ð‘Ð¸Ñ€Ð¶Ð¸ Ð² Ñ€ÐµÐ¶Ð¸Ð¼Ðµ Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸</li><li>Ð ÑƒÑÑÐºÐ¾ÑÐ·Ñ‹Ñ‡Ð½Ñ‹Ð¹ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¸ ÑÐ¾Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð¾Ð¹ ÑÐµÑ‚Ð¸</li><li>Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ¾Ð²Ð°Ñ‚ÑŒ Ð¸Ð´ÐµÐ¸ Ð½Ð° Ñ€ÑƒÑÑÐºÐ¾Ð¼</li><li>ÐŸÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ Ñ‡Ð°Ñ‚Ñ‹ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½Ð° Ñ€ÑƒÑÑÐºÐ¾Ð¼</li><li>ÐÐµÐ·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð°Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð° Ñ€ÐµÐ¹Ñ‚Ð¸Ð½Ð³Ð° Ð°Ð²Ñ‚Ð¾Ñ€Ð¾Ð²</li></ul>Ð’Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒÑÑ Ð¿Ñ€ÑÐ¼Ð¾ ÑÐµÐ¹Ñ‡Ð°Ñ Ð¸Ð»Ð¸ Ð² Ð»ÑŽÐ±Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°Ñ‚ÐµÐ»ÑŒ ÑÐ·Ñ‹ÐºÐ° Ð² Ð²ÐµÑ€Ñ…Ð½ÐµÐ¼ Ð¼ÐµÐ½ÑŽ.<br><br><a href="#" class="yes lang-button">ÐŸÐ•Ð Ð•Ð™Ð¢Ð˜ ÐÐ Ð Ð£Ð¡Ð¡ÐšÐžÐ¯Ð—Ð«Ð§ÐÐ£Ð® Ð’Ð•Ð Ð¡Ð˜Ð®</a><br><a href="#" class="no lang-button inverse">ÐžÐ¡Ð¢ÐÐ¢Ð¬Ð¡Ð¯ ÐÐ ÐÐÐ“Ð›ÐžÐ¯Ð—Ð«Ð§ÐÐžÐ™ Ð’Ð•Ð Ð¡Ð˜Ð˜</a><br><div class="center"><a href="#" class="no">I don\'t understand this message, close the window.</a></div></div>',
                    ja: '<img src="/static/images/dialogs/popup_jpn.png" alt="japanese" class="splash-image ja"/><div class="wrap with-image"><h3>TradingView æ—¥æœ¬ãƒãƒ¼ã‚¸ãƒ§ãƒ³å…¬é–‹ï¼</h3>æ—¥æœ¬ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã ã‘ã®ç‰¹å¾´ã‚’ã”ç´¹ä»‹ï¼š<ul><li>Chi-X Japan ã‹ã‚‰ã®ç„¡æ–™ãƒ‡ãƒ¼ã‚¿é…ä¿¡ï¼ˆæ±äº¬è¨¼åˆ¸å–å¼•æ‰€ã®ã™ã¹ã¦ã®æ—¥æœ¬æ ªãƒ‡ãƒ¼ã‚¿ã‚’é…ä¿¡ï¼‰</li><li>æ—¥æœ¬èªžã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨ã€SNSå¯¾å¿œ</li><li>æ—¥æœ¬èªžã§è­°è«–ã—ãŸã‚Šã€ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å…¬é–‹ã§ãã¾ã™ã€‚</li><li>æ—¥æœ¬èªžé™å®šã§ãƒãƒ£ãƒ¼ãƒˆã‚’å…¬é–‹ã§ãã‚‹æ©Ÿèƒ½</li><li>ä½œè€…ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚‚ã€æ—¥æœ¬èªžã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã ã‘ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°</li></ul>æ—¥æœ¬èªžç‰ˆã¸ã®åˆ‡ã‚Šæ›¿ãˆã¯ã€ä»Šã™ãã§ã‚‚ã€ãŠç”³ã—è¾¼ã¿å¾Œã«ã‚‚å¤‰æ›´ã§ãã¾ã™ã€‚è¨­å®šã¯ã€ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®ä¸Šéƒ¨ã«ã‚ã‚‹è¨€èªžè¨­å®šã§åˆ‡ã‚Šæ›¿ãˆã§ãã¾ã™ã€‚<br><br><a href="#" class="yes lang-button">æ—¥æœ¬ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«åˆ‡ã‚Šæ›¿ãˆ</a><br><a href="#" class="no lang-button inverse">è‹±èªžãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¶­æŒã™ã‚‹</a><br><div class="center"><a href="#" class="no">I don\'t understand this message, close the window.</a></div></div>'
                },
                phoneDialog: {
                    base: '<div class="main"><div class="iphone-wrap">' + e.code("iphone") + '</div><div class="form-wrap loading"><h2 class="title"></h2><form class="phone-add-verify-form" action="#"><div class="form-body"><div class="message-wrap"><p class="message"></p><p>' + $.t("Phone verification is the chosen method to reduce the number of fake and spam accounts on TradingView and provide a much better user experience for the entire trading community.") + '</p><p class="form-message"></p><p class="sms-notice">' + $.t("If you have any problem with receiving the verification code, please contact us: {0}").format('<a href="mailto:support@tradingview.com">support@tradingview.com</a>') + '</p></div><div class="inputs"></div></div><div class="buttons"><input type="button" value="{{cancel_button_text}}" class="cancel"><input type="submit" value="' + $.t("Next") + '" class="_tv-button ok"></div></form></div></div>',
                    phoneForm: '<select name="phone_country_code">{{#options}}<option value="{{value}}"{{#selected}} selected{{/selected}}>{{caption}}</option>{{/options}}</select><div class="input-wrap phone"><i class="country-code"></i><input type="text" name="phone" autocomplete="off"></div>',
                    codeForm: '<div class="counter-wrap">' + $.t("If you won't receive code in {0}, you'll be able to send a new one.").format('<span class="count"></span>') + '</div><input type="text" name="code" placeholder="' + $.t("Verification code") + '">'
                }
            },
            lists: {
                savedCharts: "<ul>{{#charts}}<li><a href='/chart/{{url}}/'><span class='name'>{{name}}</span> <span class='subscript'>{{modified}}{{#short_symbol}} | {{short_symbol}}{{#interval}}, {{interval}}{{/interval}}{{/short_symbol}}</span> <span class='icon icon-carousel-item-delete-dark' title='" + $.t("Delete") + "' data-id='{{url}}'></span></a></li>{{/charts}}</ul>"
            },
            billingUpgradeForYear: '<div class="tv-billing-upgrade tv-profile-area"><h3 class="no-border billing-upgrade-header">' + $.t("GET 6 MONTHS FREE") + '</h3><div class="tv-billing-upgrade-body"><span>' + $.t("You already spent ${0}, and if you continue to pay every month, the year will cost you ${1}. Don't let your money go to waste - upgrade now to an annual plan for just ${2}. It's time to stop spending and start investing, get 6 months free!").format("{{spent}}", "{{year_cost}}", "{{cost}}") + '</span><p><input type="button" class="btn light-blue js-upgrade-for-year tv-upgrade-for-year" value="' + $.t("GET 6 MONTHS FREE!") + '"</p></div></div>',
            userlink: "<a href='/u/{{username}}/' class='userlink'>{{username}}</a>{{> userBadge}}",
            userBadge: "{{#is_top}}{{> topBadge}}{{/is_top}}{{^is_top}}{{#is_moderator}}{{> modBadge}}{{/is_moderator}}{{^is_moderator}}{{#is_pro}}{{> proBadge}}{{/is_pro}}{{/is_moderator}}{{/is_top}}",
            userBadgeChat: "{{#is_top}}{{#is_moderator}}{{> modBadge}}{{/is_moderator}}{{^is_moderator}}{{> topBadge}}{{/is_moderator}}{{/is_top}}{{^is_top}}{{#is_moderator}}{{> modBadge}}{{/is_moderator}}{{^is_moderator}}{{#is_pro}}{{> proBadge}}{{/is_pro}}{{/is_moderator}}{{/is_top}}",
            proBadge: '<{{badge_tag}}{{^badge_tag}}a href="/gopro/"{{/badge_tag}} class="apply-common-tooltip user-badge pro{{#is_realtime}} realtime{{/is_realtime}}{{#is_premium}} premium{{/is_premium}}{{#is_trial}} trial{{/is_trial}}{{#large_badge}} large{{/large_badge}}" title="{{#is_realtime}}' + $.t("Pro Realtime") + "{{/is_realtime}}{{#is_premium}}" + $.t("Premium") + "{{/is_premium}}{{#is_trial}}" + $.t("Pro Trial") + '{{/is_trial}}{{^is_realtime}}{{^is_premium}}{{^is_trial}}Pro{{/is_trial}}{{/is_premium}}{{/is_realtime}}">' + $.t("pro") + "</{{badge_tag}}{{^badge_tag}}a{{/badge_tag}}>",
            modBadge: "<{{badge_tag}}{{^badge_tag}}a href='/house-rules/'{{/badge_tag}} class='user-badge mod{{#large_badge}} large{{/large_badge}} apply-common-tooltip' title='" + $.t("Moderator") + "'>mod</{{badge_tag}}{{^badge_tag}}a{{/badge_tag}}>",
            topBadge: "<{{badge_tag}}{{^badge_tag}}a href='/people/'{{/badge_tag}} class='user-badge top{{#large_badge}} large{{/large_badge}} {{badge_class}} apply-common-tooltip' title='{{badge_title}}'>top</{{badge_tag}}{{^badge_tag}}a{{/badge_tag}}>",
            chartBadges: "",
            iconedFollowSymbolButton: '{{#pro_symbol}}<button class="follow-symbol iconed{{#current_user_follows_symbol}} active{{/current_user_follows_symbol}}" data-symbol="{{pro_symbol}}" title="' + $.t("Follow {{pro_symbol}}") + '"></button>{{/pro_symbol}}',
            globalNotification: '<div class="tv-global-notification" id="global-notification-{{ id }}"><div class="tv-layout-width"><span class="icon icon-notification-info"></span>{{{ text }}}</div><span class="global-notification-close"><i class="icon icon-notification-close"></i></span></div>',
            actionsLog: '<div class="entry"><b>{{#is_system}}<img src="/static/images/small-logo.png" class="log-system-message"/>system{{/is_system}}{{^is_system}}<a href="/u/{{username}}" target="_blank">{{username}}</a>{{/is_system}}</b><div class="entry-time time-upd">{{ created_timestamp }}</div> <div class="message">{{{text}}}</div></div>',
            onChartMessage: '<div class="onchart-message"><span class="onchart-message-close"></span><div class="onchart-message-top"><div class="onchart-message-copy"></div></div><div class="onchart-message-bottom"><div class="onchart-message-ear"></div></div></div>',
            userlinkPopup: '<div class="msg-userlink-popup" data-id="{{ id }}"><div class="msg-userlink-popup-container"><a class="userpic" href="/u/{{ username }}/"><img class="userpic" src="{{#has_picture}}{{big_picture_url}}{{/has_picture}}{{^has_picture}}{{mid_picture_url}}{{/has_picture}}"/></a><div class="content"><div class="username">{{> userlink}}<span class="btc-tip"></span></div><div class="user-stats-small"><span class="user-stats-followers" title="' + $.t("Followers") + '">{{followers_count}}</span><span class="user-stats-charts" title="' + $.t("Charts") + '">{{charts_count}}</span><span class="user-stats-reputation" title="' + $.t("Reputation") + '">{{reputation}}</span></div>{{^is_self}}{{#show_buttons}}<div class="action-buttons"><button class="follow-user follow-user-{{ id }}{{#follow_status}} active{{/follow_status}}" title="{{#follow_status}}' + $.t("Unfollow") + "{{/follow_status}}{{^follow_status}}" + $.t("Follow") + '{{/follow_status}}" data-id="{{ id }}"><span class="follow">' + $.t("Follow") + '</span><span class="following">' + $.t("Followed") + '</span><span class="unfollow">' + $.t("Unfollow") + '</span></button> <button class="message-user message active" title="' + $.t("Send message") + '" data-username="{{ username }}" data-id="{{ id }}"><span class="message">' + $.t("Message") + '</span></button></div>{{/show_buttons}}{{/is_self}}</div><div class="clear"></div>{{#status}}<div class="user-status">{{status}}</div>{{/status}}<div class="send-form"><p>' + $.t("To:") + ' <strong>{{ username }}</strong></p><p><textarea name="message-text"></textarea></p><p class="actions"><button class="message-user active send">' + $.t("Send") + '</button><button class="message-user cancel">' + $.t("Cancel") + "</button></p></div></div></div>",
            miniWidgetWizardAddSymbol: '<tr class="symbol-item"><td>{{symbol}}</td><td>{{description}}</td><td>{{timeframe}}</td><td><div class="remove-symbol"></div></td></tr>',
            userInfoWidgetButtons1: '<div class="buttons layout-2-buttons"><button class="profile-action profile-edit" data-id="{{ id }}" data-username="{{ username }}" title="' + $.t("Edit profile") + '"><span class="">' + $.t("Edit") + '</span></button><button class="profile-action profile-signout" title="' + $.t("Sign out") + '" onclick="TradingView.signOut(); return false;"><span class="">' + $.t("Sign out") + '</span></button><div class="clear"></div></div>',
            userInfoWidgetButtons2: '<div class="buttons layout-1-buttons"><button class="follow-user {{ is_followed_css }} follow-user-{{ id }}" data-id="{{ id }}"><span class="follow" title="' + $.t("Follow") + '"></span><span class="following" title="' + $.t("Following") + '"></span><span class="unfollow" title="' + $.t("Unfollow") + '"></span></button><div class="clear"></div></div>',
            userInfoWidgetButtons3: '<div class="buttons layout-1-buttons"><button class="profile-action profile-signin" title="' + $.t("Sign in") + '" onclick="runOrSignIn(function() {}, { source: "User info widget sign in" }); return false;"><span class="">' + $.t("Sign in") + '</span></button><div class="clear"></div></div>',
            textNotesWidgetLayout: '<div class="notes-block"><div class="textnotes-search-header"><div class="search-input-block">' + e.code("chat-search") + '<div class="search-clean"></div><input type="text" class="search-input" placeholder="' + $.t("Search Note") + '" maxlength="1000" autocomplete="off"></div><div class="new-note-btn">' + e.code("add-note") + $.t("NEW") + '</div></div><div class="notes-wrapper"><div class="notes"></div></div></div><div class="notes-desc-block"><div class="notes-desc-wrapper"><div class="notes-desc-inner"><div class="remove-note-btn">' + e.code("removenote") + '</div><div class="title-wrap"><input type="text" maxlength="40" value="" class="title"></div><div class="date"><span class="created">' + $.t("Created ") + '<span class="created-val"></span>. </span><span class="modified">' + $.t("Last edited ") + '<span class="modified-val"></span></span></div><textarea></textarea></div></div></div>',
            textNotesWidgetItem: '<div class="note"><div class="note-header"><div {{#symbol}}title="' + $.t("Open") + " {{symbol}} " + $.t("Text Note") + '"{{/symbol}} class="title {{#symbol}}title_with-badge{{/symbol}}">{{title}}</div>{{#symbol}}<div class="symbol-badge">' + e.code("badge") + '<span class="symbol">{{symbol}}</span></div>{{/symbol}}</div><div class="note-desc">{{description}}</div><span class="favorite"></span></div>',
            tvDataTable: '<table class="tv-data-table {{className}}"><thead class="tv-data-table__thead"><tr class="tv-data-table__stroke">{{#columns}}<th class="tv-data-table__cell tv-data-table__cell--bold {{className}}">{{#notSortable}}{{label}}{{/notSortable}}{{^notSortable}}<span class="tv-data-table__cell-text tv-data-table__sortable {{#help}}apply-common-tooltip{{/help}}" {{#help}}title="{{help}}"{{/help}}>{{label}}</span>{{/notSortable}}</th>{{/columns}}</tr></thead>{{#bodys}}<tbody class="tv-data-table__tbody {{className}}">{{#strokes}}<tr class="tv-data-table__stroke">{{#cells}}<td class="tv-data-table__cell {{className}}"{{#colspan}}colspan="{{colspan}}"{{/colspan}}>{{#contain}}{{{contain}}}{{/contain}}</td>{{/cells}}</tr>{{/strokes}}</tbody>{{/bodys}}</table>',
            tvDataTableRow: '<tr class="tv-data-table__stroke">{{#columns}}<td class="tv-data-table__cell {{className}}">{{#contain}}{{{contain}}}{{/contain}}</td>{{/columns}}</tr>',
            tvDataTableCell: '<td class="tv-data-table__cell {{className}}">{{#contain}}{{{contain}}}{{/contain}}</td>',
            tvWidgetChartLikeButton: '<div data-id="{{chartId}}" class="tv-widget-chart-like-button {{typeClass}}"><span class="tv-widget-chart-like-button__icon-place">' + e.code("like") + '</span><span class="js-likes-counter"></span></div>',
            widgetReferrals: {
                features: {
                    alerts: $.t("Stay on top of market moves! Alerts are immediate notifications when markets meet your custom criteria. Pick from visual popups, audio signals & email alerts."),
                    pinescript: $.t("Create your own indicators and strategies! Pine Script is a flexible and efficient language for doing just that."),
                    saveload: $.t("Save the analysis you do! Your custom settings, indicator setups and so on are saved onsite as individual charts for later access from anywhere."),
                    customIntervals: $.t("Customize how you look at the markets! View charts in custom timeframes, such as 7 minutes, 12 minutes, or even 8 hours per bar."),
                    kagiRenko: $.t("Get a new look at the markets with advanced chart types! Use Kagi and Renko charts with intraday resolutions for a complete picture.")
                }
            }
        }
    }).call(e, i(5))
}, function(t, e, i) {
    "use strict";

    function n(t) {
        this._options = t || {}, this._setInput(), this._caption = $('<i class="interval-caption">').html("&nbsp;"), this._helpTooltipTrigger = $('<i class="help-tooltip-trigger apply-common-tooltip common-tooltip-below">').text("?").attr("title", $.t("interval_dialog_description")), this._dialogTitle = $.t("Change Interval")
    }
    var o = i(16),
        r = i(2);
    n.prototype._setInput = function() {
        this._input = $('<input type="text" class="change-interval-input" autocomplete="off" maxlength="4">'), this._input.on("keypress", this._handleInput.bind(this)).on("input", function() {
            this._validate(), this._updateCaption()
        }.bind(this)).on("blur", function() {
            setTimeout(this._submit.bind(this), 0)
        }.bind(this))
    }, n.prototype._validate = function() {
        var t, e = this._input.val();
        this._parsed = r.parseIntervalValue(e), this._valid = !this._parsed.error, this._supported = !this._parsed.error && r.intervalIsSupported(e), !this._supported || this._parsed.unit && "H" !== this._parsed.unit || (t = this._parsed.qty * ("H" === this._parsed.unit ? 60 : 1), t > 1440 && (this._supported = !1))
    }, n.prototype._updateCaption = function() {
        var t, e, i;
        this._valid && this._supported ? (e = this._parsed.qty || 1, i = this._parsed.unit ? {
            H: "hour",
            D: "day",
            W: "week",
            M: "month",
            S: "second"
        }[this._parsed.unit] : "minute", t = e + " " + $.t(i, {
                count: e
            }), this._input.add(this._caption).removeClass("error")) : (t = this._parsed.error ? "&nbsp;" : $.t("Not applicable"), this._input.add(this._caption).addClass("error")), this._caption.html(t)
    }, n.prototype._handleInput = function(t) {
        return 13 === t.which ? void this._submit() : void(t.ctrlKey || t.metaKey || !t.charCode || !t.which || t.which <= 32 || r.isIntervalChar(String.fromCharCode(t.charCode)) || t.preventDefault())
    }, n.prototype._submit = function() {
        var t, e;
        TVDialogs.isOpen(this._dialogTitle) && (this._valid && this._supported && (t = r.sanitizeIntervalValue(this._input.val()), e = o.interval.value(), t && e !== t && "function" == typeof this._options.callback && this._options.callback(t)), TVDialogs.destroy(this._dialogTitle))
    }, n.prototype._setInitialValue = function(t) {
        var e, i;
        t = t || this._options.initialValue, e = "", i = !1, t && "," !== t ? e = r.sanitizeIntervalValue(t) || "" : (t = o.interval.value(), e = t, i = !0), this._input.val(e), i && this._input.select()
    }, n.prototype.isValid = function() {
        return !!this._valid
    }, n.prototype.show = function(t) {
        var e = TVDialogs.createDialog(this._dialogTitle, {
                hideCloseCross: !0,
                addClass: "change-interval-dialog"
            }),
            i = e.find("._tv-dialog-content");
        return e.css("min-width", 0), i.css("min-width", 0).mousedown(function(t) {
            this._input.is(t.target) || t.preventDefault()
        }.bind(this)).append(this._input.add(this._caption).add(this._helpTooltipTrigger)), TVDialogs.applyHandlers(e), TVDialogs.positionDialog(e), this._setInitialValue(t), this._validate(), this._updateCaption(), e
    }, t.exports = n
}, function(t, e, i) {
    "use strict";
    var n, o, r, s, a, l, c;
    i(21), i(348), i(349), i(16), n = window.initData || {}, o = i(354), r = i(47), s = i(355), i(357), i(358), a = i(359), l = i(320), c = i(360), i(342), n.lfs && ! function(t) {
        r.prototype.disconnect = function(e) {
            e || t()
        }
    }(r.prototype.disconnect), n.block_global_notification(), n.language_popup ? TVDialogs.showLanguagePopup(n.language_popup) : TradingView.checkUserLanguage(), o.loadWidgetBarModules = function(t) {
        i.e(3, function(e) {
            t({
                Watchlist: i(384),
                NewsWidget: i(367),
                Detail: i(373),
                CalendarWidget: i(435),
                DfxCalendarWidget: i(436),
                HotlistWidget: i(438),
                Messages: i(440),
                PublicChatsWidget: i(441),
                NotificationsWidgets: i(447),
                NotesWidget: i(448),
                AlertsManageWidget: i(449),
                AlertsLogWidget: i(455),
                MarketSummaryWidget: i(457),
                ChatWidget: i(442),
                UserBugReportDialog: i(458),
                ChartHelpMenu: i(460)
            })
        })
    }, jQuery.error = function(t) {
        _gaq.push(["_trackEvent", "jQuery Error", t, navigator.userAgent, 0, !0])
    }, loginStateChange.subscribe(window, function(t) {
        user && is_authenticated && TVLocalStorage.getItem("last_username") !== user.username && TVLocalStorage.setItem("last_username", user.username)
    }), $(function() {
        a.askPermission(), "function" == typeof n.block_symbol_autolink && n.block_symbol_autolink(), n.block_widgetbar(s), n.block_header_init(), "#signin" === window.location.hash ? TVDialogs.showSignInDialog(TradingView.phoneVerification.verifyIfRequired.bind(null, {
            source: "Sign In"
        }), {
            mode: "signin",
            source: "Redirect"
        }) : "#signup" === window.location.hash && TVDialogs.showSignInDialog(null, {
            mode: "signup",
            source: "Redirect"
        }), $(".youtube-video-popup").on("click", function(t) {
            $.fancybox({
                overlayColor: "#000",
                width: 640,
                height: 360,
                href: this.href.replace(/watch\?v=/i, "v/"),
                type: "swf",
                swf: {
                    wmode: "transparent",
                    allowfullscreen: "true"
                }
            }), t.preventDefault()
        }), TradingView.followButtonToolipAll(), $(".time-upd").timeUpdate(), $(".header-logo .feedback-item").on("click", function() {
            return window.feedback_widget.show(), !1
        })
    }), n.block_common_quote_multiplexer(c, l), ChartApiInstance.connectDfd && ChartApiInstance.connectDfd.done(function() {
        TradingView.onChartPage && TradingView.isPro() || (TradingView.log(3, "low quality mode is enabled"), ChartApiInstance.enableLowQualityMode())
    }), n.block_pro(), n.market_summary && i(362)
}, function(t, e, i) {
    "use strict";

    function n(t) {
        return t.keys().map(t)
    }
    window.TradingView = window.TradingView || {}, window.requireAll = n, i(22), i(28), i(29), i(30), i(31), i(32), i(34), i(35), i(36), i(37), i(38), i(39), i(42), i(43), i(44), i(45), i(46), i(47), i(319), i(320), i(321), i(322), i(323), i(324), i(325), i(326), i(327), i(106), i(339), i(340), i(344), i(347), i(330)
}, function(t, e, i) {
    "use strict";
    var n = i(23);
    window.language && (n.locale(window.language, {
        months: [$.t("January"), $.t("February"), $.t("March"), $.t("April"), $.t("May"), $.t("June"), $.t("July"), $.t("August"), $.t("September"), $.t("October"), $.t("November"), $.t("December")],
        monthsShort: [$.t("Jan"), $.t("Feb"), $.t("Mar"), $.t("Apr"), $.t("May"), $.t("Jun"), $.t("Jul"), $.t("Aug"), $.t("Sep"), $.t("Oct"), $.t("Nov"), $.t("Dec")],
        weekdays: [$.t("Sunday"), $.t("Monday"), $.t("Tuesday"), $.t("Wednesday"), $.t("Thursday"), $.t("Friday"), $.t("Saturday")],
        weekdaysShort: [$.t("Sun"), $.t("Mon"), $.t("Tue"), $.t("Wed"), $.t("Thu"), $.t("Fri"), $.t("Sat")],
        weekdaysMin: [$.t("Su", {
            context: "day_of_week"
        }), $.t("Mo", {
            context: "day_of_week"
        }), $.t("Tu", {
            context: "day_of_week"
        }), $.t("We", {
            context: "day_of_week"
        }), $.t("Th", {
            context: "day_of_week"
        }), $.t("Fr", {
            context: "day_of_week"
        }), $.t("Sa", {
            context: "day_of_week"
        })],
        longDateFormat: {
            LT: $.t("HH:mm"),
            LTS: $.t("HH:mm:ss"),
            L: $.t("MM/DD/YYYY"),
            l: $.t("M/D/YYYY"),
            LL: $.t("D MMMM YYYY"),
            ll: $.t("D MMM LT"),
            LLL: $.t("D MMMM YYYY LT"),
            lll: $.t("D MMM YYYY LT"),
            LLLL: $.t("ddd D MMMM YYYY LT"),
            llll: $.t("ddd D MMM YYYY LT")
        },
        calendar: {
            sameDay: $.t("[Today at] LT"),
            nextDay: $.t("[Tomorrow at] LT"),
            nextWeek: $.t("dddd [at] LT"),
            lastDay: $.t("[Yesterday at] LT"),
            lastWeek: $.t("[Last] dddd [at] LT"),
            sameElse: "L"
        },
        relativeTime: {
            future: function(t) {
                return t === $.t("just now") ? t : $.t("in %s", {
                    context: "time_range"
                }).replace("%s", t)
            },
            past: function(t) {
                return t === $.t("just now") ? t : $.t("%s ago", {
                    context: "time_range"
                }).replace("%s", t)
            },
            s: $.t("just now"),
            m: function(t) {
                return $.t("%d minute", {
                    count: t
                }).replace("%d", t)
            },
            mm: function(t) {
                return $.t("%d minute", {
                    count: t
                }).replace("%d", t)
            },
            h: $.t("an hour"),
            hh: function(t) {
                return $.t("%d hour", {
                    count: t
                }).replace("%d", t)
            },
            d: $.t("a day"),
            dd: function(t) {
                return $.t("%d day", {
                    count: t
                }).replace("%d", t)
            },
            M: $.t("a month"),
            MM: function(t) {
                return $.t("%d month", {
                    count: t
                }).replace("%d", t)
            },
            y: $.t("a year"),
            yy: function(t) {
                return $.t("%d year", {
                    count: t
                }).replace("%d", t)
            }
        },
        week: {
            dow: 1,
            doy: 4
        }
    }), n.locale(window.language))
}, , , , , , function(t, e) {
    "use strict";
    ! function(t) {
        t.fn.contextMenu = function(e) {
            t(this).bind("contextmenu", function(t) {
                return e(t), !1
            })
        }
    }(jQuery)
}, function(t, e) {
    "use strict";
    ! function(t) {
        t.fn.selectable = function(e) {
            return this.each(function() {
                var i = t(this);
                i.css("user-select", e ? "text" : "none"), i.css("-moz-user-select", e ? "text" : "-moz-none"), i.css("-webkit-user-select", e ? "auto" : "none"), (t.browser.msie || t.browser.opera) && i.attr("unselectable", e ? "off" : "on")
            })
        }
    }(jQuery)
}, function(module, exports) {
    (function() {
        "use strict";
        this.JSON || (this.JSON = {}),
            function() {
                function f(t) {
                    return 10 > t ? "0" + t : t
                }

                function quote(t) {
                    return escapable.lastIndex = 0, escapable.test(t) ? '"' + t.replace(escapable, function(t) {
                        var e = meta[t];
                        return "string" == typeof e ? e : "\\u" + ("0000" + t.charCodeAt(0).toString(16)).slice(-4)
                    }) + '"' : '"' + t + '"'
                }

                function str(t, e) {
                    var i, n, o, r, s, a = gap,
                        l = e[t];
                    switch (l && "object" == typeof l && "function" == typeof l.toJSON && (l = l.toJSON(t)), "function" == typeof rep && (l = rep.call(e, t, l)), typeof l) {
                        case "string":
                            return quote(l);
                        case "number":
                            return isFinite(l) ? l + "" : "null";
                        case "boolean":
                        case "null":
                            return l + "";
                        case "object":
                            if (!l) return "null";
                            if (gap += indent, s = [], "[object Array]" === Object.prototype.toString.apply(l)) {
                                for (r = l.length, i = 0; r > i; i += 1) s[i] = str(i, l) || "null";
                                return o = 0 === s.length ? "[]" : gap ? "[\n" + gap + s.join(",\n" + gap) + "\n" + a + "]" : "[" + s.join(",") + "]", gap = a, o
                            }
                            if (rep && "object" == typeof rep)
                                for (r = rep.length, i = 0; r > i; i += 1) n = rep[i], "string" == typeof n && (o = str(n, l), o && s.push(quote(n) + (gap ? ": " : ":") + o));
                            else
                                for (n in l) Object.hasOwnProperty.call(l, n) && (o = str(n, l), o && s.push(quote(n) + (gap ? ": " : ":") + o));
                            return o = 0 === s.length ? "{}" : gap ? "{\n" + gap + s.join(",\n" + gap) + "\n" + a + "}" : "{" + s.join(",") + "}", gap = a, o
                    }
                }
                "function" != typeof Date.prototype.toJSON && (Date.prototype.toJSON = function(t) {
                    return isFinite(this.valueOf()) ? this.getUTCFullYear() + "-" + f(this.getUTCMonth() + 1) + "-" + f(this.getUTCDate()) + "T" + f(this.getUTCHours()) + ":" + f(this.getUTCMinutes()) + ":" + f(this.getUTCSeconds()) + "Z" : null
                }, String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function(t) {
                    return this.valueOf()
                });
                var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
                    escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
                    gap, indent, meta = {
                        "\b": "\\b",
                        "	": "\\t",
                        "\n": "\\n",
                        "\f": "\\f",
                        "\r": "\\r",
                        '"': '\\"',
                        "\\": "\\\\"
                    },
                    rep;
                "function" != typeof JSON.stringify && (JSON.stringify = function(t, e, i) {
                    var n;
                    if (gap = "", indent = "", "number" == typeof i)
                        for (n = 0; i > n; n += 1) indent += " ";
                    else "string" == typeof i && (indent = i);
                    if (rep = e, e && "function" != typeof e && ("object" != typeof e || "number" != typeof e.length)) throw Error("JSON.stringify");
                    return str("", {
                        "": t
                    })
                }), "function" != typeof JSON.parse && (JSON.parse = function(text, reviver) {
                    function walk(t, e) {
                        var i, n, o = t[e];
                        if (o && "object" == typeof o)
                            for (i in o) Object.hasOwnProperty.call(o, i) && (n = walk(o, i), void 0 !== n ? o[i] = n : delete o[i]);
                        return reviver.call(t, e, o)
                    }
                    var j;
                    if (text += "", cx.lastIndex = 0, cx.test(text) && (text = text.replace(cx, function(t) {
                            return "\\u" + ("0000" + t.charCodeAt(0).toString(16)).slice(-4)
                        })), /^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) return j = eval("(" + text + ")"), "function" == typeof reviver ? walk({
                        "": j
                    }, "") : j;
                    throw new SyntaxError("JSON.parse")
                })
            }()
    }).call(window)
}, function(t, e, i) {
    (function(t) {
        var e = window.TradingView = window.TradingView || {};
        window.PineAddons = {}, e.className = function(t) {
            for (var i in this)
                if (e[i] === t) return i;
            return null
        }, e.isMobileView = /mobile=1/i.test(window.location.search), e.isOnFeaturePage = /on-features-page=1/i.test(window.location.search), e.wrapUrl = function(e) {
            return t.enabled("charting_library_base") && (e = e.replace("/static/", "")), e
        }, e.RESOURCES_ROOT = e.wrapUrl("/static/chart-client/css/"), e.THEME_RESOURCES_ROOT = e.wrapUrl("/static/chart-client/css/images/"), e.resourceFullPath = function(t) {
            return e.RESOURCES_ROOT + t
        }, e.themeResourceFullPath = function(t) {
            return e.THEME_RESOURCES_ROOT + t
        }, e.isMobile = function() {
            var t = /Android/i.test(navigator.userAgent),
                i = /BlackBerry/i.test(navigator.userAgent),
                n = /iPhone|iPad|iPod/i.test(navigator.userAgent),
                o = /Opera Mini/i.test(navigator.userAgent),
                r = e.winMobileMode,
                s = e.isMobileView || t || i || n || o || r;
            return {
                Android: function() {
                    return t
                },
                BlackBerry: function() {
                    return i
                },
                iOS: function() {
                    return n
                },
                Opera: function() {
                    return o
                },
                Windows: function() {
                    return r
                },
                any: function() {
                    return s
                }
            }
        }(), e.supportTouch = function() {
            return Modernizr.touch || e.isMobile.any()
        }, e.onWidget = function() {
            return /widgetembed|widgetpopup|idea-popup/.test(window.location.pathname)
        }, e.onOrder = function() {
            return "/order/" === window.location.pathname
        }, "undefined" != typeof jQuery && (e.debugReady = $.Deferred())
    }).call(e, i(3))
}, function(t, e, i) {
    (function(t) {
        "use strict";
        var e, i, n, o = [t.INDEXEDDB, t.LOCALSTORAGE, t.WEBSQL],
            r = [t.LOCALSTORAGE, t.WEBSQL, t.INDEXEDDB];
        window.localForageReady = $.Deferred(), e = window.console || {}, "undefined" != typeof TradingView && TradingView.debugReady && (e = {
            log: function(t) {
                TradingView.debugReady.done(function() {
                    TradingView.logNormal(t)
                })
            },
            error: function(t) {
                TradingView.debugReady.done(function() {
                    TradingView.logError(t)
                })
            }
        }), i = function(i) {
            e.log("localForage driver: " + JSON.stringify(i));
            var n = {
                name: "tradingview",
                driver: i
            };
            t.config(n), window.localForageReady.resolve()
        };
        try {
            n = window.indexedDB.open("tradingviewCheckIndexedDB"), n.onerror = function(t) {
                e.error("IndexedDB is NOT available"), i(r)
            }, n.onsuccess = function(t) {
                e.log("IndexedDB is available"), i(o)
            }
        } catch (s) {
            e.error("IndexedDB is NOT available, " + s), i(r)
        }
    }).call(e, i(33))
}, , function(t, e) {
    "use strict";
    ! function(t, e, i) {
        "$:nomunge";

        function n(n, o) {
            function r(e) {
                t(s).each(function() {
                    var i = t(this);
                    this === e.target || i.has(e.target).length || i.triggerHandler(o, [e.target])
                })
            }
            o = o || n + i;
            var s = t(),
                a = n + "." + o + "-special-event";
            t.event.special[o] = {
                setup: function() {
                    s = s.add(this), delete s.prevObject, 1 === s.length && t(e).bind(a, r)
                },
                teardown: function() {
                    s = s.not(this), delete s.prevObject, 0 === s.length && t(e).unbind(a)
                },
                add: function(t) {
                    var e = t.handler;
                    t.handler = function(t, i) {
                        t.target = i, e.apply(this, arguments)
                    }
                }
            }
        }
        t.map("click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup".split(" "), function(t) {
            n(t)
        }), n("focusin", "focus" + i), n("focusout", "blur" + i), Modernizr.touch && (n("touchstart", "mousedown" + i), n("touchmove", "mousemove" + i), n("touchend", "mouseup" + i)), t.addOutsideEvent = n
    }(jQuery, document, "outside")
}, function(t, e) {
    "use strict";
    ! function(t) {
        t.fn.mousecapture = function(e) {
            var i = t(document);
            return this.each(function() {
                var n = t(this),
                    o = {};
                n.mousedown(function(t) {
                    var r, s, a;
                    return e.move && (r = function(t) {
                        e.move.call(n, t, o)
                    }, i.mousemove(r)), a = function() {
                        e.move && i.unbind("mousemove", r), i.unbind("mouseup", s)
                    }, s = e.up ? function(t) {
                        return a(), e.up.call(n, t, o)
                    } : a, i.mouseup(s), e.down.call(n, t, o)
                })
            }), this
        }
    }(jQuery)
}, function(t, e) {
    "use strict";
    ! function(t) {
        function e(t, e) {
            if (!(t.originalEvent.touches.length > 1)) {
                t.preventDefault();
                var i = t.originalEvent.changedTouches[0],
                    n = document.createEvent("MouseEvents");
                n.initMouseEvent(e, !0, !0, window, 1, i.screenX, i.screenY, i.clientX, i.clientY, !1, !1, !1, !1, 0, null), t.target.dispatchEvent(n)
            }
        }
        if (t.support.touch = "ontouchend" in document, t.support.touch) {
            var i, n = t.ui.mouse.prototype,
                o = n._mouseInit,
                r = n._mouseDestroy;
            n._touchStart = function(t) {
                var n = this;
                !i && n._mouseCapture(t.originalEvent.changedTouches[0]) && (i = !0, n._touchMoved = !1, e(t, "mouseover"), e(t, "mousemove"), e(t, "mousedown"))
            }, n._touchMove = function(t) {
                i && (this._touchMoved = !0, e(t, "mousemove"))
            }, n._touchEnd = function(t) {
                i && (e(t, "mouseup"), e(t, "mouseout"), this._touchMoved || e(t, "click"), i = !1)
            }, n._mouseInit = function() {
                var e = this;
                e.element.bind({
                    touchstart: t.proxy(e, "_touchStart"),
                    touchmove: t.proxy(e, "_touchMove"),
                    touchend: t.proxy(e, "_touchEnd")
                }), o.call(e)
            }, n._mouseDestroy = function() {
                var e = this;
                e.element.unbind({
                    touchstart: t.proxy(e, "_touchStart"),
                    touchmove: t.proxy(e, "_touchMove"),
                    touchend: t.proxy(e, "_touchEnd")
                }), r.call(e)
            }
        }
    }(jQuery)
}, function(t, e) {
    TradingView.guid = function() {
        return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(t) {
            var e = 16 * Math.random() | 0,
                i = "x" === t ? e : 3 & e | 8;
            return i.toString(16)
        })
    }, TradingView.randomHash = function() {
        return TradingView.randomHashN(12)
    }, TradingView.randomHashN = function(t) {
        var e, i, n = "0123456789abcdefghijklmopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",
            o = "";
        for (e = 0; t > e; e++) i = Math.round(Math.random() * (n.length - 1)), o += n[i];
        return o
    }
}, function(t, e, i) {
    (function(t) {
        function e(t) {
            return "number" == typeof t && isFinite(t)
        }

        function i(t) {
            return null === t || void 0 === t ? !1 : t.constructor === Function
        }

        function n(t, e) {
            t.prototype = Object.create(e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), t.prototype.superclass = e
        }
        var o, r = Array.isArray || function(t) {
                return "[object Array]" === Object.prototype.toString.call(t)
            };
        "undefined" != typeof window ? (o = window.TradingView = window.TradingView || {}, window.isNumber = e, window.isFunction = i, window.inherit = n, window.isArray = r) : o = this.TradingView = this.TradingView || {}, o.isNaN = function(t) {
            return !(0 >= t || t > 0)
        }, o.isAbsent = function(t) {
            return null === t || void 0 === t
        }, o.isExistent = function(t) {
            return null !== t && void 0 !== t
        }, Number.isNaN = Number.isNaN || function(t) {
                return t != t
            }, o.isSameType = function(t, e) {
            return Number.isNaN(t) || Number.isNaN(e) ? Number.isNaN(t) === Number.isNaN(e) : {}.toString.call(t) === {}.toString.call(e)
        }, o.isInteger = function(t) {
            return "number" == typeof t && t % 1 === 0
        }, o.parseBool = function(t) {
            return t === !0 || "true" === t
        }, o.isBoolean = function(t) {
            return t === !0 || t === !1
        }, o.isString = function(t) {
            return null === t || void 0 === t ? !1 : t.constructor === String
        }, o.declareClassAsPureInterface = function(t, e) {
            for (var i in t.prototype) "function" == typeof t.prototype[i] && t.prototype.hasOwnProperty(i) && (t.prototype[i] = function() {
                throw Error(e + "::" + i + " is an interface member declaration and must be overloaded in order to be called")
            })
        }, o.requireFullInterfaceImplementation = function(t, e, i, n) {
            for (var o in i.prototype)
                if ("function" == typeof i.prototype[o] && !t.prototype[o]) throw Error("Interface implementation assertion failed: " + e + " does not implement " + n + "::" + o + " function")
        }, o.isInherited = function(t, e) {
            return t === e ? !0 : t && t.prototype ? void 0 === t.prototype.superclass || null === t.prototype.superclass ? !1 : t.prototype.superclass === e ? !0 : o.isInherited(t.prototype.superclass, e) : !1
        }, o.TypeValidator = function(t) {
            this.m_type = t
        }, o.TypeValidator.prototype.check = function(t) {
            return t.constructor === this.m_type || o.isInherited(t.constructor, this.m_type)
        }, o.PredicateValidator = function(t) {
            this.m_predicate = t
        }, o.PredicateValidator.prototype.check = function(t) {
            return this.m_predicate(t)
        }, o.clone = function(t) {
            var e, i, n;
            if (!t || "object" != typeof t) return t;
            e = "function" == typeof t.pop ? [] : {};
            for (i in t) t.hasOwnProperty(i) && (n = t[i], n && "object" == typeof n ? e[i] = o.clone(n) : e[i] = n);
            return e
        }, o.deepEquals = function(t, e, n) {
            var s, a, l, c, h;
            if (n || (n = ""), t === e) return [!0, n];
            if (i(t) && (t = void 0), i(e) && (e = void 0), void 0 === t && void 0 !== e) return [!1, n];
            if (void 0 === e && void 0 !== t) return [!1, n];
            if (null === t && null !== e) return [!1, n];
            if (null === e && null !== t) return [!1, n];
            if (o.isString(t) && o.isString(e)) return [t === e, n];
            if (Array.isArray(t) && Array.isArray(e)) {
                if (s = t.length, a = e.length, s !== a) return [!1, n];
                for (l = 0; s > l; l++)
                    if (c = o.deepEquals(t[l], e[l], n + "[" + l + "]"), !c[0]) return c;
                return [!0, n]
            }
            if (r(t) || r(e)) return [!1, n];
            for (h in t)
                if (c = o.deepEquals(t[h], e[h], n + "[" + h + "]"), !c[0]) return c;
            return [!0, n]
        }, o.merge = function(t, e) {
            for (var i in e) "object" == typeof e[i] && t.hasOwnProperty(i) ? o.merge(t[i], e[i]) : t[i] = e[i];
            return t
        }, o.mergeObj = function(t, e) {
            for (var i in e) e[i].constructor === Object && t.hasOwnProperty(i) ? o.mergeObj(t[i], e[i]) : t[i] = e[i];
            return t
        }, o.mergeWithRules = function(t, e, i, n) {
            var r, s;
            for (r in e) s = n ? n + "." + r : r, i && s in i ? t[r] = i[s](t[r], e[r]) : "object" == typeof e[r] && t.hasOwnProperty(r) ? o.merge(t[r], e[r], i, s) : t[r] = e[r]
        }, o.sortMultipleFunction = function() {
            var t = [].slice.call(arguments),
                e = t.length;
            return function(i, n) {
                var o, r, s, a, l, c, h;
                for (h = 0; e > h && (c = 0, s = t[h], a = "string" == typeof s ? s : s.name, o = i[a], r = n[a], "function" == typeof s.fn && (o = s.fn(o), r = s.fn(r)), l = s.reverse ? -1 : 1, r > o && (c = -1 * l), o > r && (c = 1 * l), 0 === c); h++);
                return c
            }
        }, void 0 !== t && t && t.exports && (t.exports = {
            inherit: n,
            merge: o.merge,
            isNumber: e,
            isInteger: o.isInteger,
            isBoolean: o.isBoolean,
            isString: o.isString,
            isNaN: o.isNaN,
            isAbsent: o.isAbsent,
            isExistent: o.isExistent,
            isSameType: o.isSameType
        })
    }).call(e, i(4)(t))
}, function(t, e, i) {
    (function(e) {
        var n = window.CanvasEx = i(41);
        TradingView.resizeCanvas = function(t, e, i) {
            var n, o, r, s, a, l = t.prop("height"),
                c = t.prop("width");
            l && c && (l /= window.hidpiCanvasRatio || 1, c /= window.hidpiCanvasRatio || 1, n = $("<canvas>").prop("width", c).prop("height", l), o = n.get(0).getContext("2d"), r = Math.min(c, e), s = Math.min(l, i), r && s && o.drawImage(t.get(0), 0, 0, r, s, 0, 0, r, s), t.prop("height", i).prop("width", e), a = t.get(0).getContext("2d"), r && s && a.drawImage(n.get(0), 0, 0, r, s, 0, 0, r, s), n.remove())
        }, n.computeDashPattern = function(t) {
            var e = [
                [t.lineWidth, 2 * t.lineWidth],
                [3 * t.lineWidth, 2 * t.lineWidth],
                [6 * t.lineWidth, 6 * t.lineWidth]
            ];
            return e[t.lineStyle - 1]
        }, n.drawLine = function(t, e, i, o, r) {
            isFinite(e) && isFinite(o) && isFinite(i) && isFinite(r) && (t.lineStyle === n.LINESTYLE_DASHED || t.lineStyle === n.LINESTYLE_DOTTED ? t.drawDashedLine(t, e, i, o, r) : n.drawSolidLine(t, e, i, o, r))
        }, n.drawArrow = function(t, e, i, n, o) {
            isFinite(e) && isFinite(n) && isFinite(i) && isFinite(o) && (t.beginPath(), t.moveTo(n, o), t.lineTo(e, i), t.moveTo(e + 2, i + 2), t.lineTo(e - 2, i + 2), t.moveTo(e - 1, i + 1), t.lineTo(e + 1, i + 1), t.stroke())
        }, n.drawSolidLine = function(t, e, i, n, o) {
            t.beginPath(), t.moveTo(e, i), t.lineTo(n, o), t.stroke()
        }, n.setLineStyle = function(t, e) {
            t.lineStyle = e;
            var i = [];
            e !== n.LINESTYLE_SOLID && (i = n.computeDashPattern(t)), "function" == typeof t.setLineDash ? t.setLineDash(i) : void 0 !== t.mozDash ? t.mozDash = i : void 0 !== t.webkitLineDash && (t.webkitLineDash = i)
        }, n.drawPoly = function(t, e, i) {
            var n, o;
            for (t.beginPath(), t.moveTo(e[0].x, e[0].y), n = 0; n < e.length; n++) o = e[n], t.lineTo(o.x, o.y);
            t.closePath(), t.stroke(), i && t.fill()
        }, n.lineStyles = [], "undefined" != typeof CanvasRenderingContext2D && (CanvasRenderingContext2D.prototype.setFont = function(t) {
            if (this.font !== t) try {
                this.font = t
            } catch (e) {}
        }, CanvasRenderingContext2D.prototype.lineStyle = n.LINESTYLE_SOLID, n.originalSave = CanvasRenderingContext2D.prototype.save, n.originalRestore = CanvasRenderingContext2D.prototype.restore, CanvasRenderingContext2D.prototype.save = function() {
            n.lineStyles.push(this.lineStyle), n.originalSave.call(this)
        }, CanvasRenderingContext2D.prototype.restore = function() {
            n.lineStyles.length > 0 && (this.lineStyle = n.lineStyles.pop(), n.originalRestore.call(this))
        }, CanvasRenderingContext2D.prototype.drawDashedLine = function(t, e, i, o, r) {
            t.save();
            var s = n.computeDashPattern(t);
            if (t.beginPath(), "function" == typeof t.setLineDash) t.setLineDash(s);
            else if (void 0 !== t.mozDash) t.mozDash = s;
            else {
                if (void 0 === t.webkitLineDash) return t.dashedLineTo(e, i, o, r, s), t.stroke(), void t.restore();
                t.webkitLineDash = s
            }
            t.moveTo(e, i), t.lineTo(o, r), t.stroke(), t.restore()
        }, CanvasRenderingContext2D.prototype.dashedLineTo = function(t, i, n, o, r) {
            var s, a, l, c, h, d, u = {
                    thereYet: e.greaterThan,
                    cap: Math.min
                },
                p = {
                    thereYet: e.greaterThan,
                    cap: Math.min
                };
            for (i - o > 0 && (p.thereYet = e.lessThan, p.cap = Math.max), t - n > 0 && (u.thereYet = e.lessThan, u.cap = Math.max), this.moveTo(t, i), s = t, a = i, l = 0, c = !0; !u.thereYet(s, n) || !p.thereYet(a, o);) h = Math.atan2(o - i, n - t), d = r[l], s = u.cap(n, s + Math.cos(h) * d), a = p.cap(o, a + Math.sin(h) * d), c ? this.lineTo(s, a) : this.moveTo(s, a), l = (l + 1) % r.length, c = !c
        }, CanvasRenderingContext2D.prototype.roundRect = function(t, e, i, n, o) {
            this.beginPath(), this.moveTo(t + o, e), this.lineTo(t + i - o, e), this.arcTo(t + i, e, t + i, e + o, o), this.lineTo(t + i, e + n - o), this.arcTo(t + i, e + n, t + i - o, e + n, o), this.lineTo(t + o, e + n), this.arcTo(t, e + n, t, e + n - o, o), this.lineTo(t, e + o), this.arcTo(t, e, t + o, e, o)
        }), t.exports = n
    }).call(e, i(40))
}, function(t, e) {
    "use strict";
    var i = {};
    i.lessThan = function(t, e) {
        return e >= t
    }, i.greaterThan = function(t, e) {
        return t >= e
    }, i.clamp = function(t, e, i) {
        return Math.min(Math.max(t, e), i)
    }, i.sign = function(t) {
        return 0 > t ? -1 : t > 0 ? 1 : 0
    }, i.isBaseDecimal = function(t) {
        if (0 > t) return TradingView.logDebugChart("MathEx.isBaseDecimal: argument less zero"), !1;
        for (var e = t; e > 1; e /= 10)
            if (e % 10 !== 0) return !1;
        return !0
    }, i.greaterOrEqual = function(t, e, i) {
        return i >= e - t
    }, i.equal = function(t, e, i) {
        return Math.abs(t - e) < i
    }, i.log10 = function(t) {
        return 0 >= t ? void TradingView.logDebugChart("MathEx.log10: argument less or equal zero") : Math.log(t) / Math.log(10)
    }, i.defComparator = function(t, e) {
        return e > t ? -1 : t > e ? 1 : 0
    }, i.min = function(t, e) {
        var n, o;
        if (!Array.isArray(t)) throw Error("argument is not array");
        if (t.length < 1) throw Error("array is empty");
        for (e || (e = i.defComparator), n = t[0], o = 0; o < t.length; ++o) e(t[o], n) < 0 && (n = t[o]);
        return n
    }, i.max = function(t, e) {
        var n, o;
        if (!Array.isArray(t)) throw Error("argument is not array");
        if (t.length < 1) throw Error("array is empty");
        for (e || (e = i.defComparator), n = t[0], o = 0; o < t.length; ++o) e(t[o], n) > 0 && (n = t[o]);
        return n
    }, i.Point = function(t, e) {
        this.x = t, this.y = e
    }, i.Point.prototype.add = function(t) {
        return new i.Point(this.x + t.x, this.y + t.y)
    }, i.Point.prototype.addScaled = function(t, e) {
        return new i.Point(this.x + e * t.x, this.y + e * t.y)
    }, i.Point.prototype.substract = function(t) {
        return new i.Point(this.x - t.x, this.y - t.y)
    }, i.Point.prototype.dotProduct = function(t) {
        return this.x * t.x + this.y * t.y
    }, i.Point.prototype.length = function() {
        return Math.sqrt(this.x * this.x + this.y * this.y)
    }, i.Point.prototype.scaled = function(t) {
        return new i.Point(this.x * t, this.y * t)
    }, i.Point.prototype.normalized = function() {
        return this.scaled(1 / this.length())
    }, i.Point.prototype.transponed = function() {
        return new i.Point(-this.y, this.x)
    }, i.Point.prototype.clone = function() {
        return new i.Point(this.x, this.y)
    }, i.Matrix = function() {
        this._rows = [
            [1, 0, 0],
            [0, 1, 0],
            [0, 0, 1]
        ]
    }, i.Matrix.prototype.mult = function(t) {
        var e, n, o, r, s;
        if (t instanceof i.Matrix) {
            for (e = new i.Matrix, n = 0; 3 > n; n++)
                for (o = 0; 3 > o; o++)
                    for (e._rows[n][o] = 0, r = 0; 3 > r; r++) e._rows[n][o] += this._rows[n][r] * t._rows[r][o];
            return e
        }
        if (t instanceof i.Point) {
            for (s = [t.x, t.y, 1], e = [0, 0, 0], n = 0; 3 > n; n++)
                for (o = 0; 3 > o; o++) e[n] += s[o] * this._rows[n][o];
            return new i.Point(e[0], e[1])
        }
        throw Error("unsupported type")
    }, i.Matrix.rotate = function(t) {
        var e = new i.Matrix;
        return e._rows[0][0] = Math.cos(t), e._rows[1][1] = Math.cos(t), e._rows[0][1] = -Math.sin(t), e._rows[1][0] = Math.sin(t), e
    }, i.Matrix.scale = function(t, e) {
        var n = new i.Matrix;
        return n._rows[0][0] = t, n._rows[1][1] = e, n
    }, i.Matrix.translate = function(t, e) {
        var n = new i.Matrix;
        return n._rows[0][2] = t, n._rows[1][2] = e, n
    }, i.distanceToLine = function(t, e, i) {
        var n = e.substract(t),
            o = i.substract(t),
            r = o.dotProduct(n) / n.dotProduct(n),
            s = t.addScaled(n, r);
        return {
            distance: s.substract(i).length(),
            coeff: r
        }
    }, i.distanceToSegment = function(t, e, n) {
        var o, r, s = i.distanceToLine(t, e, n);
        return 0 <= s.coeff && s.coeff <= 1 ? s : (o = t.substract(n).length(), r = e.substract(n).length(), r > o ? {
            distance: o,
            coeff: 0
        } : {
            distance: r,
            coeff: 1
        })
    }, i.intersectLines = function(t, e, i, n) {
        var o, r, s, a = e.substract(t),
            l = n.substract(i),
            c = a.x * l.y - a.y * l.x;
        return Math.abs(c) < 1e-6 ? null : (o = t.substract(i), r = o.y * l.x - o.x * l.y, s = r / c)
    }, i.intersectSegment = function(t, e, n, o) {
        var r, s, a, l = i.intersectLines(t, e, n, o);
        return null === l ? null : (r = e.substract(t), s = r.scaled(l).add(t), a = i.distanceToSegment(n, o, s), Math.abs(a.distance) < 1e-6 ? l : null)
    }, i.pointInRect = function(t, e, i) {
        return t.x >= e.x && t.x <= i.x && t.y >= e.y && t.y <= i.y
    }, i.pointInTriangle = function(t, e, n, o) {
        var r = t.add(e).scaled(.5),
            s = r.add(n).scaled(.5),
            a = i.intersectSegment(t, e, s, o);
        return null !== a ? !1 : (a = i.intersectSegment(e, n, s, o), null !== a ? !1 : (a = i.intersectSegment(n, t, s, o), null === a))
    }, i.intersectRayWithRect = function(t, e, n, o) {
        var r, s, a = i.intersectLines(t, e, n, new i.Point(o.x, n.y)),
            l = i.intersectLines(t, e, new i.Point(o.x, n.y), o),
            c = i.intersectLines(t, e, o, new i.Point(n.x, o.y)),
            h = i.intersectLines(t, e, new i.Point(n.x, o.y), n),
            d = [];
        return a && a >= 0 && d.push(a), l && l >= 0 && d.push(l), c && c >= 0 && d.push(c), h && h >= 0 && d.push(h), 0 === d.length ? null : (d.sort(function(t, e) {
            return t - e
        }), r = i.pointInRect(t, n, o) ? d[0] : d[d.length - 1], s = t.addScaled(e.substract(t), r))
    }, i.isInPolygon = function(t, e) {
        var i, n, o = 0,
            r = t.length - 1,
            s = !1,
            a = e.x,
            l = e.y;
        for (o = 0; o < t.length; o++) i = t[o], n = t[r], (i.y < l && n.y >= l || n.y < l && i.y >= l) && i.x + (l - i.y) / (n.y - i.y) * (n.x - i.x) < a && (s = !s), r = o;
        return s
    }, i.isInCircle = function(t, e, i) {
        var n = (i.x - t.x) * (i.x - t.x) + (i.y - t.y) * (i.y - t.y),
            o = e * e;
        return o >= n
    }, i.optionalCorner = function(t, e, n, o) {
        return Math.abs(t.x - e.x) > 1e-6 && Math.abs(t.y - e.y) > 1e-6 ? 0 === Math.round(t.x) || 0 === Math.round(e.x) ? 0 === Math.round(t.y) || 0 === Math.round(e.y) ? new i.Point(0, 0) : new i.Point(0, o) : 0 === Math.round(t.y) || 0 === Math.round(e.y) ? new i.Point(n, 0) : new i.Point(n, o) : null
    }, t.exports = i
}, function(t, e, i) {
    (function(t) {
        var e = {};
        e.LINESTYLE_SOLID = 0, e.LINESTYLE_DOTTED = 1, e.LINESTYLE_DASHED = 2, e.LINESTYLE_LARGE_DASHED = 3, e.TEXTPOS_TOPLEFT = 0, e.TEXTPOS_TOPCENTER = 1, e.TEXTPOS_TOPRIGHT = 2, e.TEXTPOS_MIDDLELEFT = 3, e.TEXTPOS_MIDDLECENTER = 4, e.TEXTPOS_MIDDLERIGHT = 5, e.TEXTPOS_BOTTOMLEFT = 6, e.TEXTPOS_BOTTOMCENTER = 7, e.TEXTPOS_BOTTOMRIGHT = 8, e.SIZE_AUTO = "auto", e.SIZE_TINY = "tiny", e.SIZE_SMALL = "small", e.SIZE_NORMAL = "normal", e.SIZE_LARGE = "large", e.SIZE_HUGE = "huge", e.MARKLOC_ABOVEBAR = "AboveBar", e.MARKLOC_BELOWBAR = "BelowBar", e.MARKLOC_TOP = "Top", e.MARKLOC_BOTTOM = "Bottom", e.MARKLOC_RIGHT = "Right", e.MARKLOC_LEFT = "Left", e.MARKLOC_ABSOLUTE = "Absolute", e.MARKLOC_ABSOLUTEUP = "AbsoluteUp", e.MARKLOC_ABSOLUTEDOWN = "AbsoluteDown", e.HHISTLOC_RELATIVE = "relative", e.HHISTLOC_ABSOLUTE = "absolute", e.HHISTDIR_LEFTTORIGHT = "left_to_right", e.HHISTDIR_RIGHTTOLEFT = "right_to_left", void 0 !== t && t && t.exports && (t.exports = e)
    }).call(e, i(4)(t))
}, function(t, e) {
    String.prototype.left = function(t) {
        if (!TradingView.isInteger(t)) throw Error("invalid length");
        if (t > this.length) throw Error("invalid length");
        return this.substring(0, t)
    }, String.prototype.right = function(t) {
        if (!TradingView.isInteger(t)) throw Error("invalid length");
        if (t > this.length) throw Error("invalid length");
        return this.substring(this.length - t, this.length)
    }, String.prototype.trimmed = function() {
        return this.replace(/^\s*/, "").replace(/\s*$/, "")
    }, String.prototype.startsWith = function(t) {
        return t.length > this.length ? !1 : this.left(t.length) === t
    }
}, function(t, e) {
    "use strict";
    ! function(t) {
        function e() {
            return "-tvtags-" + Math.random().toString(16).replace(/^0./, "")
        }

        function i(i, n) {
            function o(t, e) {
                return n.caseInsensitive ? t.toLowerCase() === e.toLowerCase() : t === e
            }

            function r(t) {
                B = t, K.val(t)
            }

            function s(t) {
                var e;
                return e = "string" == typeof t ? {
                    str: t
                } : {
                    str: t.str || "",
                    readonly: !!t.readonly
                }, e.str ? (D.push(e.str), void Z(e.str, function(t) {
                    var n, o;
                    for (n = D.length; n--;)
                        if (D[n] === e.str) {
                            D.splice(n, 1);
                            break
                        }
                    return t ? (o = T(e.str), null == o ? void k.call(i) : (a(o), e.str = o, A.push(e), P.call(i), void h())) : void k.call(i)
                })) : void k.call(i)
            }

            function a(t) {
                for (var e = A.length; e--;) o(A[e].str, t) && A.splice(e, 1)
            }

            function l() {
                A.splice(0, A.length)
            }

            function c(e) {
                var i, n = x(e);
                return n || (n = {
                    str: e.str
                }), "string" == typeof n && (n = {
                    str: n
                }), i = t(document.createElement("span")).addClass("tvtags-tag"), n.addClass && i.addClass(n.addClass), e.readonly ? i.addClass("tvtags-tag-readonly") : (t(document.createElement("span")).addClass("tvtags-removetag").appendTo(i), i.addClass("tvtags-tag-deletable")), t(document.createElement("span")).addClass("tvtags-tag-content").text(n.str).appendTo(i), i
            }

            function h() {
                var e, n, o;
                if (G.empty(), t.each(A, function(e, i) {
                        var n = t(c(i));
                        n.find(".tvtags-removetag").on("click", function(t) {
                            a(i.str), h()
                        }), n.appendTo(G)
                    }), e = A.join(E), i.val() !== e) {
                    for (n = [], o = 0; o < A.length; o++) n.push(A[o].str);
                    i.val(n.join(E)), i.trigger("change")
                }
                A.length > 0 ? K.removeAttr("placeholder") : M && K.attr("placeholder", M)
            }

            function d(t) {
                var e, i = t.keyCode,
                    n = !!t.shiftKey;
                if ("keydown" === t.type && -1 !== R.indexOf(i)) O[i] = !0;
                else if ("keypress" === t.type && O[i]) return;
                switch (t.keyCode) {
                    case 13:
                        return void(-1 !== L.indexOf("\n") && (t.preventDefault(), v(!0)));
                    case 9:
                        return void(-1 !== L.indexOf("	") && (t.preventDefault(), v(!0)));
                    case 8:
                        if (0 === K.prop("selectionStart") && 0 === K.prop("selectionStart"))
                            for (t.preventDefault(), e = A.length; e--;)
                                if (!A[e].readonly) return a(A[e].str), void h();
                        return;
                    case 40:
                        if (!n) return t.preventDefault(), void m(1);
                        break;
                    case 38:
                        if (!n) return t.preventDefault(), void m(-1);
                        break;
                    case 27:
                        return t.preventDefault(), void f()
                }
            }

            function u() {
                setTimeout(function() {
                    var t = K.val();
                    if (t !== B) {
                        if (V <= A.length) return void r(B);
                        v(), t = K.val(), $ = t.length > (B ? B.length : 0), B = t, p()
                    }
                }, 0)
            }

            function p() {
                var t, e = K.val();
                null != U && e === U ? e = F : U = void 0, e !== F && (z = null, t = {}, N = t, I(e, function(e) {
                    t === N && (z = e, N = null, _(), g())
                })), (N || z) && j.addClass("tvtags-open"), F = e
            }

            function f() {
                j.removeClass("tvtags-open"), J.empty(), t(document.createElement("div")).addClass("tvtags-suggest-message").text("Searching...").appendTo(J), z = null, N = null, H = void 0, F = void 0, W = [], U = void 0
            }

            function _() {
                var e, i, n = K.val();
                if (J.empty(), !z) return void f();
                for (H = void 0, W = t.map(z, function(e, i) {
                    var n, s, a, l, c;
                    for ("string" == typeof e && (e = {
                        str: e
                    }), n = e.str, s = T(n), a = A.length; a--;)
                        if (o(s, A[a].str)) return;
                    for (a = D.length; a--;)
                        if (n === D[a]) return;
                    return l = C(e), c = t(document.createElement("div")).addClass("tvtags-suggest"), l.content ? c.append(l.content) : c.text(l.str), l.addClass && c.addClass(l.addClass), c.on("mousedown", !1), c.on("click", function(t) {
                        r(n), v(!0)
                    }), c.appendTo(J), {
                        $element: c,
                        str: n
                    }
                }), e = W.length; e--;) W[e] || W.splice(e, 1);
                for (e = 0; e < W.length; e++)
                    if (o(W[e].str, n)) {
                        H = e;
                        break
                    }
                if ($ && null == H && K.prop("selectionEnd") === n.length && K.prop("selectionStart") === n.length)
                    for (e = 0; e < W.length; e++)
                        if (i = W[e].str, o(i.substr(0, n.length), n)) {
                            H = e, r(n + i.substr(n.length)), K.prop("selectionStart", n.length), K.prop("selectionEnd", i.length);
                            break
                        }
                0 === W.length && (j.removeClass("tvtags-open"), J.empty(), t(document.createElement("div")).addClass("tvtags-suggest-message").text("No matches").appendTo(J))
            }

            function g() {
                var t, e, i, n, o, r = W[H],
                    s = null;
                r && (s = r.$element), s !== q && (q && q.removeClass("tvtags-suggest-active"), q = s, s && (s.addClass("tvtags-suggest-active"), t = s.position().top, e = -t, e > 0 ? J.scrollTop(J.scrollTop() - e) : (i = s.outerHeight(), n = J.height(), o = t + i - n, o > 0 && J.scrollTop(J.scrollTop() + o))))
            }

            function m(t) {
                if (H = isFinite(H) ? (H + W.length + t) % W.length : 1 > t ? W.length - 1 : 0, W[H]) {
                    var e = W[H].str;
                    U = e, r(e)
                }
                p(), g()
            }

            function v(t) {
                for (var e, i, n, o, a, l, c, h = K.val(), d = h; h;) {
                    for (e = 1 / 0, i = "", n = L.length; n--;) o = L[n], o instanceof RegExp ? (a = o.exec(h), a && (l = a.index, (e > l || l === e && a[0].length > i.length) && (e = l, i = a[0]))) : (l = h.indexOf(o), -1 !== l && (e > l || l === e && o.length > i.length) && (e = l, i = o));
                    if (!isFinite(e)) {
                        t && h && (s(h), h = "");
                        break
                    }
                    c = h.substr(0, e), c && s(h.substr(0, e)), h = h.substr(e + i.length)
                }
                h !== d && r(h), !h && d && f()
            }

            function y(t) {
                return t ? (l(), r(t), v(!0), void h()) : void S()
            }

            function w() {
                var t, e = [];
                for (t = 0; t < A.length; t++) e.push(A[t].str);
                return e
            }

            function b() {
                var t, e = w();
                for (t = 0; t < D.length; t++) e.push(T(D[t]));
                return e
            }

            function S() {
                r(""), l(), h(), i.val("")
            }
            var T, x, C, P, k, I, E, L, V, M, A, D, O, R, $, B, z, N, H, F, W, U, q, Y, j, G, X, K, Q, J, Z = function(t, e) {
                e(!0)
            };
            return "function" == typeof n.validate && (Z = n.validate), T = function(t) {
                return t
            }, "function" == typeof n.transform && (T = n.transform), x = function(t) {
                return {
                    str: t.str,
                    addClass: ""
                }
            }, "function" == typeof n.format && (x = n.format), C = function(t) {
                return {
                    str: t.str,
                    addClass: ""
                }
            }, "function" == typeof n.formatSuggest && (C = n.formatSuggest), P = function() {}, "function" == typeof n.onTagAdded && (P = n.onTagAdded), k = function() {}, "function" == typeof n.onTagError && (k = n.onTagError), I = function(t, e) {
                e()
            }, "function" == typeof n.suggest && (I = n.suggest), E = n.separator || ",", L = ["\n", ","], n.keys && n.keys.slice ? L = n.keys.slice() : "string" == typeof n.keys && (L = n.keys.split("")), V = 1 / 0, n.maxTagsNumber && (V = parseInt(n.maxTagsNumber)), M = i.attr("placeholder"), A = [], D = [], O = {}, R = [13, 9, 8, 40, 38], $ = !1, z = null, N = null, W = [], q = null, Y = e(), j = t(document.createElement("label")).addClass("tvtags-main").attr("for", Y).insertAfter(i), n.addClass && j.addClass(n.addClass), i.addClass("tvtags-value").appendTo(j), t(document.createElement("span")).addClass("tvtags-suggestarrow").appendTo(j).on("mousedown", !1).on("click", function(t) {
                t.preventDefault(), j.is(".tvtags-open") ? f() : p()
            }), G = t(document.createElement("div")).addClass("tvtags-tags").appendTo(j), X = t(document.createElement("div")).addClass("tvtags-input-container").appendTo(j), K = t(document.createElement("input")).addClass("tvtags-input").attr("id", Y).appendTo(X), M && K.attr("placeholder", M), n.maxLength && isFinite(n.maxLength) && K.attr("maxlength", +n.maxLength), Q = t(document.createElement("div")).addClass("tvtags-suggests-anchor").appendTo(j), J = t(document.createElement("div")).addClass("tvtags-suggests").appendTo(Q), j.data("bridge", {
                showSuggests: p,
                setTags: y,
                getTagsStr: w,
                getTagsStrWithPending: b,
                extractTags: v,
                reset: S
            }), r(i.val()), v(!0), K.on("focus", function() {
                j.addClass("tvtags-focused")
            }).on("blur", function() {
                f(), j.removeClass("tvtags-focused")
            }).on("keypress keydown", d).on("keypress keydown keyup input copy paste cut", u), j
        }

        function n(e, n) {
            var o;
            return n = n || {}, null == e && (e = "init"), this.each(function() {
                var o, r, s = t(this);
                if (s.is("input, textarea")) return o = s.parent(".tvtags-main"), 0 === o.size() ? void("init" === e && i(s, n)) : void("showSuggests" === e ? (r = o.data("bridge"), r && r.showSuggests()) : "extractTags" === e ? (r = o.data("bridge"), r && r.extractTags(!0)) : "reset" === e ? (r = o.data("bridge"), r && r.reset()) : "setTags" === e && (r = o.data("bridge"), r && r.setTags(n.tags)))
            }), "tags" === e ? (o = t(this).parent(".tvtags-main").data("bridge"), o ? o.getTagsStr() : void 0) : "tagsWithPending" === e ? (o = t(this).parent(".tvtags-main").data("bridge"), o ? o.getTagsStrWithPending() : void 0) : this
        }
        t.fn.tvtags = n
    }(jQuery), t.exports = $
}, function(t, e) {
    "use strict";
    $.fn.lastCharSup = function() {
        function t(e) {
            var i, n;
            if (3 === e.nodeType && e.data.trim()) return e;
            if (e.childNodes)
                for (i = e.childNodes.length; i--;)
                    if (n = t(e.childNodes[i])) return n;
            return null
        }
        var e, i, n, o, r;
        for (e = 0; e < this.size(); e++)
            if (i = t(this.get(e)), n = i.data, i) {
                if (i.parentNode && i.parentNode.tagName && "sup" === i.parentNode.tagName.toLowerCase()) continue;
                o = /^([^]*)(\S)(\s*)$/.exec(n), o && (i.data = o[1], r = $(document.createElement("sup")).text(o[2]).insertAfter(i), o[3] && $(document.createTextNode(o[3])).insertAfter(r))
            }
        return this
    }, t.exports = $
}, function(t, e) {
    (function() {
        "use strict";

        function t(e, i) {
            return this.target = e, this.remoteTypeCache = {}, this.remoteInstanceCache = {}, this.remoteFunctionCache = {}, this.localFunctionCache = {}, this.bridgeID = t.nextBridgeID++, this.name = i, this.nextLocalFuncID = 0, t.instances[this.name] = this, t.idMap[this.bridgeID] = this, this
        }

        function e(t) {
            return this.fb_instance_id = t, this
        }
        var i, n, o;
        this.io = {
            version: "0.6.2",
            setPath: function(t) {
                window.console && console.error && console.error("io.setPath will be removed. Please set the variable WEB_SOCKET_SWF_LOCATION pointing to WebSocketMain.swf"), this.path = /\/$/.test(t) ? t : t + "/", i = t + "lib/vendor/web-socket-js/WebSocketMain.swf"
            }
        }, "jQuery" in this && (jQuery.io = this.io), "undefined" != typeof window && void 0 === i && (i = "/socket.io/lib/vendor/web-socket-js/WebSocketMain.swf"),
            function() {
                var t = !1;
                io.util = {
                    ios: !1,
                    load: function(e) {
                        return /loaded|complete/.test(document.readyState) || t ? e() : void("attachEvent" in window ? window.attachEvent("onload", e) : window.addEventListener("load", e, !1))
                    },
                    inherit: function(t, e) {
                        for (var i in e.prototype) t.prototype[i] = e.prototype[i]
                    },
                    indexOf: function(t, e, i) {
                        for (var n = t.length, o = 0 > i ? Math.max(0, n + i) : i || 0; n > o; o++)
                            if (t[o] === e) return o;
                        return -1
                    },
                    isArray: function(t) {
                        return "[object Array]" === Object.prototype.toString.call(t)
                    },
                    merge: function(t, e) {
                        for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
                    }
                }, io.util.ios = /iphone|ipad/i.test(navigator.userAgent), io.util.android = /android/i.test(navigator.userAgent), io.util.opera = /opera/i.test(navigator.userAgent), io.util.load(function() {
                    t = !0
                })
            }(),
            function() {
                var t = "~m~",
                    e = function(t) {
                        return "[object Object]" == Object.prototype.toString.call(t) ? "JSON" in window ? "~j~" + JSON.stringify(t) : ("console" in window && console.error && console.error("Trying to encode as JSON, but JSON.stringify is missing."), '{ "$error": "Invalid message" }') : t + ""
                    },
                    i = io.Transport = function(t, e) {
                        this.base = t, this.options = {
                            timeout: 6e4
                        }, io.util.merge(this.options, e)
                    };
                i.prototype.send = function() {
                    throw Error("Missing send() implementation")
                }, i.prototype.connect = function() {
                    throw Error("Missing connect() implementation")
                }, i.prototype.disconnect = function() {
                    throw Error("Missing disconnect() implementation")
                }, i.prototype._encode = function(i) {
                    var n, o, r, s = "";
                    for (i = io.util.isArray(i) ? i : [i], o = 0, r = i.length; r > o; o++) n = null === i[o] || void 0 === i[o] ? "" : e(i[o]), s += t + n.length + t + n;
                    return s
                }, i.prototype._decode = function(e) {
                    var i, n, o, r, s = [];
                    do {
                        if (e.substr(0, 3) !== t) return s;
                        for (e = e.substr(3), i = "", n = "", o = 0, r = e.length; r > o; o++) {
                            if (n = +e.substr(o, 1), e.substr(o, 1) != n) {
                                e = e.substr(i.length + t.length), i = +i;
                                break
                            }
                            i += n
                        }
                        s.push(e.substr(0, i)), e = e.substr(i)
                    } while ("" !== e);
                    return s
                }, i.prototype._onData = function(t) {
                    var e, i, n;
                    if (this._setTimeout(), e = this._decode(t), e && e.length)
                        for (i = 0, n = e.length; n > i; i++) this._onMessage(e[i])
                }, i.prototype._setTimeout = function() {
                    var t = this;
                    this._timeout && clearTimeout(this._timeout), this._timeout = setTimeout(function() {
                        t._onTimeout()
                    }, this.options.timeout)
                }, i.prototype._onTimeout = function() {
                    this._onDisconnect({
                        code: 4e3,
                        reason: "socket.io timeout",
                        wasClean: !1
                    })
                }, i.prototype._onMessage = function(t) {
                    this.sessionid ? "~h~" == t.substr(0, 3) ? this._onHeartbeat(t.substr(3)) : "~j~" == t.substr(0, 3) ? this.base._onMessage(JSON.parse(t.substr(3))) : this.base._onMessage(t) : (this.sessionid = t, this._onConnect())
                }, i.prototype._onHeartbeat = function(t) {
                    this.send("~h~" + t)
                }, i.prototype._onConnect = function() {
                    this.connected = !0, this.connecting = !1, this.base._onConnect(), this._setTimeout()
                }, i.prototype._onDisconnect = function(t) {
                    this.connecting = !1, this.connected = !1, this.sessionid = null, this.base._onDisconnect(t)
                }, i.prototype._prepareUrl = function() {
                    return (this.base.options.secure ? "https" : "http") + "://" + this.base.host + ":" + this.base.options.port + "/" + this.base.options.resource + "/" + this.type + (this.sessionid ? "/" + this.sessionid : "/")
                }
            }(),
            function() {
                var t = function() {},
                    e = function() {
                        if (!("XMLHttpRequest" in window)) return !1;
                        var t = new XMLHttpRequest;
                        return void 0 != t.withCredentials
                    }(),
                    i = function(t) {
                        var i, n;
                        if ("XDomainRequest" in window && t) return new XDomainRequest;
                        if ("XMLHttpRequest" in window && (!t || e)) return new XMLHttpRequest;
                        if (!t) {
                            try {
                                return i = new ActiveXObject("MSXML2.XMLHTTP")
                            } catch (o) {}
                            try {
                                return n = new ActiveXObject("Microsoft.XMLHTTP")
                            } catch (o) {}
                        }
                        return !1
                    },
                    n = io.Transport.XHR = function() {
                        io.Transport.apply(this, arguments), this._sendBuffer = []
                    };
                io.util.inherit(n, io.Transport), n.prototype.connect = function() {
                    return this._get(), this
                }, n.prototype._checkSend = function() {
                    if (!this._posting && this._sendBuffer.length) {
                        var t = this._encode(this._sendBuffer);
                        this._sendBuffer = [], this._send(t)
                    }
                }, n.prototype.send = function(t) {
                    return io.util.isArray(t) ? this._sendBuffer.push.apply(this._sendBuffer, t) : this._sendBuffer.push(t), this._checkSend(), this
                }, n.prototype._send = function(e) {
                    var i = this;
                    this._posting = !0, this._sendXhr = this._request("send", "POST"), this._sendXhr.onreadystatechange = function() {
                        var e;
                        if (4 == i._sendXhr.readyState) {
                            i._sendXhr.onreadystatechange = t;
                            try {
                                e = i._sendXhr.status
                            } catch (n) {}
                            i._posting = !1, 200 == e ? i._checkSend() : i._onDisconnect()
                        }
                    }, this._sendXhr.send("data=" + encodeURIComponent(e))
                }, n.prototype.disconnect = function() {
                    return this._onDisconnect(), this
                }, n.prototype._onDisconnect = function() {
                    if (this._xhr) {
                        this._xhr.onreadystatechange = t;
                        try {
                            this._xhr.abort()
                        } catch (e) {}
                        this._xhr = null
                    }
                    if (this._sendXhr) {
                        this._sendXhr.onreadystatechange = t;
                        try {
                            this._sendXhr.abort()
                        } catch (e) {}
                        this._sendXhr = null
                    }
                    this._sendBuffer = [], io.Transport.prototype._onDisconnect.call(this)
                }, n.prototype._request = function(t, e, n) {
                    var o = i(this.base._isXDomain());
                    return n && (o.multipart = !0), o.open(e || "GET", this._prepareUrl() + (t ? "/" + t : "")), "POST" == e && "setRequestHeader" in o && o.setRequestHeader("Content-type", "application/x-www-form-urlencoded; charset=utf-8"), o
                }, n.check = function(t) {
                    try {
                        if (i(t)) return !0
                    } catch (e) {}
                    return !1
                }, n.xdomainCheck = function() {
                    return n.check(!0)
                }, n.request = i
            }(),
            function() {
                var t = io.Transport.websocket = function() {
                    io.Transport.apply(this, arguments)
                };
                io.util.inherit(t, io.Transport), t.prototype.type = "websocket", t.prototype.connect = function() {
                    var t = this;
                    return this.socket = new WebSocket(this._prepareUrl()), this.socket.onmessage = function(e) {
                        t._onData(e.data)
                    }, this.socket.onclose = function(e) {
                        t._onClose(e)
                    }, this.socket.onerror = function(e) {
                        t._onError(e)
                    }, this
                }, t.prototype.send = function(t) {
                    return this.socket && this.socket.send(this._encode(t)), this
                }, t.prototype.disconnect = function() {
                    return this.socket && this.socket.close(), this
                }, t.prototype._onClose = function(t) {
                    return this._onDisconnect(t), this
                }, t.prototype._onError = function(t) {
                    this.base.emit("error", [t])
                }, t.prototype._prepareUrl = function() {
                    var t = (this.base.options.secure ? "wss" : "ws") + "://" + this.base.host + (this.base.options.port ? ":" + this.base.options.port : "") + "/" + this.base.options.resource + "/" + this.type + (this.sessionid ? "/" + this.sessionid : "");
                    return t
                }, t.check = function() {
                    return "WebSocket" in window && WebSocket.prototype && WebSocket.prototype.send && !!("" + WebSocket.prototype.send).match(/native/i) && "undefined" != typeof WebSocket
                }, t.xdomainCheck = function() {
                    return !0
                }
            }(),
            function() {
                var t = io.Transport.flashsocket = function() {
                    io.Transport.websocket.apply(this, arguments)
                };
                io.util.inherit(t, io.Transport.websocket), t.prototype.type = "flashsocket", t.prototype.connect = function() {
                    var t = this,
                        e = arguments;
                    return WebSocket.__addTask(function() {
                        io.Transport.websocket.prototype.connect.apply(t, e)
                    }), this
                }, t.prototype.send = function() {
                    var t = this,
                        e = arguments;
                    return WebSocket.__addTask(function() {
                        io.Transport.websocket.prototype.send.apply(t, e)
                    }), this
                }, t.check = function() {
                    if ("undefined" == typeof WebSocket || !("__addTask" in WebSocket)) return !1;
                    if ("navigator" in window && "plugins" in navigator && navigator.plugins["Shockwave Flash"]) return !!navigator.plugins["Shockwave Flash"].description;
                    if ("ActiveXObject" in window) try {
                        return !!new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")
                    } catch (t) {}
                    return !1
                }, t.xdomainCheck = function() {
                    return !0
                }
            }(),
            function() {
                var t = io.Transport.htmlfile = function() {
                    io.Transport.XHR.apply(this, arguments)
                };
                io.util.inherit(t, io.Transport.XHR), t.prototype.type = "htmlfile", t.prototype._get = function() {
                    var t = this;
                    this._open(), window.attachEvent("onunload", function() {
                        t._destroy()
                    })
                }, t.prototype._open = function() {
                    this._doc = new ActiveXObject("htmlfile"), this._doc.open(), this._doc.write("<html></html>"), this._doc.parentWindow.s = this, this._doc.close();
                    var t = this._doc.createElement("div");
                    this._doc.body.appendChild(t), this._iframe = this._doc.createElement("iframe"), t.appendChild(this._iframe), this._iframe.src = this._prepareUrl() + "/" + +new Date
                }, t.prototype._ = function(t, e) {
                    this._onData(t);
                    var i = e.getElementsByTagName("script")[0];
                    i.parentNode.removeChild(i)
                }, t.prototype._destroy = function() {
                    this._iframe && (this._iframe.src = "about:blank", this._doc = null, CollectGarbage())
                }, t.prototype.disconnect = function() {
                    return this._destroy(), io.Transport.XHR.prototype.disconnect.call(this)
                }, t.check = function() {
                    if ("ActiveXObject" in window) try {
                        var t = new ActiveXObject("htmlfile");
                        return t && io.Transport.XHR.check()
                    } catch (e) {}
                    return !1
                }, t.xdomainCheck = function() {
                    return !1
                }
            }(),
            function() {
                var t = io.Transport["xhr-multipart"] = function() {
                    io.Transport.XHR.apply(this, arguments)
                };
                io.util.inherit(t, io.Transport.XHR), t.prototype.type = "xhr-multipart", t.prototype._get = function() {
                    var t = this;
                    this._xhr = this._request("", "GET", !0), this._xhr.onreadystatechange = function() {
                        4 == t._xhr.readyState && t._onData(t._xhr.responseText)
                    }, this._xhr.send(null)
                }, t.check = function() {
                    return "XMLHttpRequest" in window && "prototype" in XMLHttpRequest && "multipart" in XMLHttpRequest.prototype
                }, t.xdomainCheck = function() {
                    return !0
                }
            }(),
            function() {
                var t = function() {},
                    e = io.Transport["xhr-polling"] = function() {
                        io.Transport.XHR.apply(this, arguments)
                    };
                io.util.inherit(e, io.Transport.XHR), e.prototype.type = "xhr-polling", e.prototype.connect = function() {
                    if (io.util.ios || io.util.android) {
                        var t = this;
                        io.util.load(function() {
                            setTimeout(function() {
                                io.Transport.XHR.prototype.connect.call(t)
                            }, 10)
                        })
                    } else io.Transport.XHR.prototype.connect.call(this)
                }, e.prototype._get = function() {
                    var e = this;
                    this._xhr = this._request(+new Date, "GET"), this._xhr.onreadystatechange = function() {
                        var i;
                        if (4 == e._xhr.readyState) {
                            e._xhr.onreadystatechange = t;
                            try {
                                i = e._xhr.status
                            } catch (n) {}
                            200 == i ? (e._onData(e._xhr.responseText), e._get()) : e._onDisconnect()
                        }
                    }, this._xhr.send(null)
                }, e.check = function() {
                    return io.Transport.XHR.check()
                }, e.xdomainCheck = function() {
                    return io.Transport.XHR.xdomainCheck()
                }
            }(), io.JSONP = [], n = io.Transport["jsonp-polling"] = function() {
            io.Transport.XHR.apply(this, arguments), this._insertAt = document.getElementsByTagName("script")[0], this._index = io.JSONP.length, io.JSONP.push(this)
        }, io.util.inherit(n, io.Transport["xhr-polling"]), n.prototype.type = "jsonp-polling", n.prototype._send = function(t) {
            function e() {
                i(), a._posting = !1, a._checkSend()
            }

            function i() {
                a._iframe && a._form.removeChild(a._iframe);
                try {
                    s = document.createElement('<iframe name="' + a._iframeId + '">')
                } catch (t) {
                    s = document.createElement("iframe"), s.name = a._iframeId
                }
                s.id = a._iframeId, a._form.appendChild(s), a._iframe = s
            }
            var n, o, r, s, a = this;
            "_form" in this || (n = document.createElement("FORM"), o = document.createElement("TEXTAREA"), r = this._iframeId = "socket_io_iframe_" + this._index, n.style.position = "absolute", n.style.top = "-1000px", n.style.left = "-1000px", n.target = r, n.method = "POST", n.action = this._prepareUrl() + "/" + +new Date + "/" + this._index, o.name = "data", n.appendChild(o), this._insertAt.parentNode.insertBefore(n, this._insertAt), document.body.appendChild(n), this._form = n, this._area = o), i(), this._posting = !0, this._area.value = t;
            try {
                this._form.submit()
            } catch (l) {}
            this._iframe.attachEvent ? s.onreadystatechange = function() {
                "complete" == a._iframe.readyState && e()
            } : this._iframe.onload = e
        }, n.prototype._get = function() {
            var t = this,
                e = document.createElement("SCRIPT");
            this._script && (this._script.parentNode.removeChild(this._script), this._script = null), e.async = !0, e.src = this._prepareUrl() + "/" + +new Date + "/" + this._index, e.onerror = function() {
                t._onDisconnect()
            }, this._insertAt.parentNode.insertBefore(e, this._insertAt), this._script = e
        }, n.prototype._ = function() {
            return this._onData.apply(this, arguments), this._get(), this
        }, n.check = function() {
            return !0
        }, n.xdomainCheck = function() {
            return !0
        },
            function() {
                var t = io.Socket = function(t, e) {
                    this.host = t || document.domain, this.options = {
                        secure: !1,
                        document: document,
                        port: document.location.port || 80,
                        resource: "socket.io",
                        transports: ["websocket", "flashsocket"],
                        transportOptions: {
                            "xhr-polling": {
                                timeout: 25e3
                            },
                            "jsonp-polling": {
                                timeout: 25e3
                            }
                        },
                        connectTimeout: 5e3,
                        tryTransportsOnConnectTimeout: !0,
                        rememberTransport: !0
                    }, io.util.merge(this.options, e), this.connected = !1, this.connecting = !1, this._events = {}, this.transport = this.getTransport(), !this.transport && "console" in window && console.error("No transport available")
                };
                t.prototype.getTransport = function(t) {
                    var e, i, n, o = t || this.options.transports;
                    for (this.options.rememberTransport && !t && (e = this.options.document.cookie.match("(?:^|;)\\s*socketio=([^;]*)"), e && (this._rememberedTransport = !0, o = [decodeURIComponent(e[1])])), i = 0; n = o[i]; i++)
                        if (io.Transport[n] && io.Transport[n].check() && (!this._isXDomain() || io.Transport[n].xdomainCheck())) return new io.Transport[n](this, this.options.transportOptions[n] || {});
                    return null
                }, t.prototype.connect = function() {
                    return this.transport && !this.connected && (this.connecting && this.disconnect(), this.connecting = !0, this.emit("connecting", [this.transport.type]), this.transport.connect()), this
                }, t.prototype.send = function(t) {
                    return this.transport && this.transport.connected ? (this.transport.send(t), this) : this._queue(t)
                }, t.prototype.disconnect = function() {
                    return this.connectTimeoutTimer && clearTimeout(this.connectTimeoutTimer), this.transport.disconnect(), this
                }, t.prototype.on = function(t, e) {
                    return t in this._events || (this._events[t] = []), this._events[t].push(e), this
                }, t.prototype.emit = function(t, e) {
                    var i, n, o;
                    if (t in this._events)
                        for (i = this._events[t].concat(), n = 0, o = i.length; o > n; n++) i[n].apply(this, void 0 === e ? [] : e);
                    return this
                }, t.prototype.removeEvent = function(t, e) {
                    if (t in this._events)
                        for (var i = 0, n = this._events[t].length; n > i; i++) this._events[t][i] == e && this._events[t].splice(i, 1);
                    return this
                }, t.prototype._queue = function(t) {
                    return "_queueStack" in this || (this._queueStack = []), this._queueStack.push(t), this
                }, t.prototype._doQueue = function() {
                    return "_queueStack" in this && this._queueStack.length ? (this.transport.send(this._queueStack), this._queueStack = [], this) : this
                }, t.prototype._isXDomain = function() {
                    return this.host !== document.domain
                }, t.prototype._onConnect = function() {
                    this.connected = !0, this.connecting = !1, this._doQueue(), this.options.rememberTransport && (this.options.document.cookie = "socketio=" + encodeURIComponent(this.transport.type)), this.emit("connect")
                }, t.prototype._onMessage = function(t) {
                    this.emit("message", [t])
                }, t.prototype._onDisconnect = function(t) {
                    var e = this.connected,
                        i = this.connecting;
                    this.connected = !1, this.connecting = !1, this._queueStack = [], (e || i) && this.emit("disconnect", [t])
                }, t.prototype.fire = t.prototype.emit, t.prototype.addListener = t.prototype.addEvent = t.prototype.addEventListener = t.prototype.on
            }(), t.TYPE_ASINSTANCE = 1, t.TYPE_ASFUNCTION = 2, t.TYPE_JSFUNCTION = 3, t.TYPE_ANONYMOUS = 4, t.initCallbacks = {}, t.userTypes = {}, t.addToUserTypes = function() {
            for (var e = 0; e < arguments.length; e++) t.userTypes[arguments[e]] = {
                typeName: arguments[e],
                enriched: !1
            }
        }, t.argsToArray = function(t) {
            var e, i = [];
            for (e = 0; e < t.length; e++) i[e] = t[e];
            return i
        }, t.addInitializationCallback = function(e, i) {
            var n, o = t.instances[e];
            return void 0 != o ? void i.call(o) : (n = t.initCallbacks[e], null == n && (t.initCallbacks[e] = n = []), void n.push(i))
        }, t.nextBridgeID = 0, t.instances = {}, t.idMap = {}, t.refCount = 0, t.extractBridgeFromID = function(e) {
            var i = e >> 16;
            return t.idMap[i]
        }, t.attachBridge = function(e, i) {
            var n, o, r = new t(e, i);
            if (t[i] = r, n = t.initCallbacks[i], null != n) {
                for (o = 0; o < n.length; o++) n[o].call(r);
                delete t.initCallbacks[i]
            }
        }, t.blockedMethods = {
            toString: !0,
            get: !0,
            set: !0,
            call: !0
        }, t.prototype = {
            root: function() {
                return this.deserialize(this.target.getRoot())
            },
            releaseASObjects: function() {
                return this.target.releaseASObjects()
            },
            releaseNamedASObject: function(t) {
                if ("object" != typeof t) return !1;
                var e = this.target.releaseNamedASObject(t.fb_instance_id);
                return e
            },
            create: function(t) {
                return this.deserialize(this.target.create(t))
            },
            makeID: function(t) {
                return (this.bridgeID << 16) + t
            },
            getPropertyFromAS: function(e, i) {
                if (t.refCount > 0) throw Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");
                return t.refCount++, retVal = this.target.getPropFromAS(e, i), retVal = this.handleError(retVal), t.refCount--, retVal
            },
            setPropertyInAS: function(e, i, n) {
                if (t.refCount > 0) throw Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");
                return t.refCount++, retVal = this.target.setPropInAS(e, i, this.serialize(n)), retVal = this.handleError(retVal), t.refCount--, retVal
            },
            callASFunction: function(e, i) {
                if (t.refCount > 0) throw Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");
                return t.refCount++, retVal = this.target.invokeASFunction(e, this.serialize(i)), retVal = this.handleError(retVal), t.refCount--, retVal
            },
            callASMethod: function(e, i, n) {
                if (t.refCount > 0) throw Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");
                return t.refCount++, n = this.serialize(n), retVal = this.target.invokeASMethod(e, i, n), retVal = this.handleError(retVal), t.refCount--, retVal
            },
            invokeLocalFunction: function(t, e) {
                var i, n = this.localFunctionCache[t];
                return void 0 != n && (i = this.serialize(n.apply(null, this.deserialize(e)))), i
            },
            getTypeFromName: function(t) {
                return this.remoteTypeCache[t]
            },
            createProxy: function(t, i) {
                var n, o = this.getTypeFromName(i);
                return e.prototype = o, n = new e(t), this.remoteInstanceCache[t] = n, n
            },
            getProxy: function(t) {
                return this.remoteInstanceCache[t]
            },
            addTypeDataToCache: function(e) {
                var i, n, r = new o(this, e.name),
                    s = e.accessors;
                for (i = 0; i < s.length; i++) this.addPropertyToType(r, s[i]);
                for (n = e.methods, i = 0; i < n.length; i++) void 0 == t.blockedMethods[n[i]] && this.addMethodToType(r, n[i]);
                return this.remoteTypeCache[r.typeName] = r, r
            },
            addPropertyToType: function(t, e) {
                var i, n, o = e.charAt(0);
                o >= "a" && "z" >= o ? (n = "get" + o.toUpperCase() + e.substr(1), i = "set" + o.toUpperCase() + e.substr(1)) : (n = "get" + e, i = "set" + e), t[i] = function(t) {
                    this.bridge.setPropertyInAS(this.fb_instance_id, e, t)
                }, t[n] = function() {
                    return this.bridge.deserialize(this.bridge.getPropertyFromAS(this.fb_instance_id, e))
                }
            },
            addMethodToType: function(e, i) {
                e[i] = function() {
                    return this.bridge.deserialize(this.bridge.callASMethod(this.fb_instance_id, i, t.argsToArray(arguments)))
                }
            },
            getFunctionProxy: function(e) {
                var i = this;
                return null == this.remoteFunctionCache[e] && (this.remoteFunctionCache[e] = function() {
                    i.callASFunction(e, t.argsToArray(arguments))
                }), this.remoteFunctionCache[e]
            },
            getFunctionID: function(t) {
                return void 0 == t.__bridge_id__ && (t.__bridge_id__ = this.makeID(this.nextLocalFuncID++), this.localFunctionCache[t.__bridge_id__] = t), t.__bridge_id__
            },
            serialize: function(e) {
                var i, n = {},
                    r = typeof e;
                if ("number" == r || "string" == r || "boolean" == r || null == r || void 0 == r) n = e;
                else if (e instanceof Array)
                    for (n = [], i = 0; i < e.length; i++) n[i] = this.serialize(e[i]);
                else "function" == r ? (n.type = t.TYPE_JSFUNCTION, n.value = this.getFunctionID(e)) : e instanceof o ? (n.type = t.TYPE_ASINSTANCE, n.value = e.fb_instance_id) : (n.type = t.TYPE_ANONYMOUS, n.value = e);
                return n
            },
            deserialize: function(e) {
                var i, n, o, r = typeof e;
                if ("number" == r || "string" == r || "boolean" == r || null == e || void 0 == e) i = this.handleError(e);
                else if (e instanceof Array)
                    for (i = [], n = 0; n < e.length; n++) i[n] = this.deserialize(e[n]);
                else if ("object" == r) {
                    for (n = 0; n < e.newTypes.length; n++) this.addTypeDataToCache(e.newTypes[n]);
                    for (o in e.newRefs) this.createProxy(o, e.newRefs[o]);
                    e.type == t.TYPE_PRIMITIVE ? i = e.value : e.type == t.TYPE_ASFUNCTION ? i = this.getFunctionProxy(e.value) : e.type == t.TYPE_ASINSTANCE ? i = this.getProxy(e.value) : e.type == t.TYPE_ANONYMOUS && (i = e.value)
                }
                return i
            },
            addRef: function(t) {
                this.target.incRef(t.fb_instance_id)
            },
            release: function(t) {
                this.target.releaseRef(t.fb_instance_id)
            },
            handleError: function(e) {
                if ("string" == typeof e && 0 == e.indexOf("__FLASHERROR")) {
                    var i = e.split("||");
                    throw t.refCount > 0 && t.refCount--, Error(i[1])
                }
                return e
            }
        }, o = function(t, e) {
            return this.bridge = t, this.typeName = e, this
        }, o.prototype = {
            get: function(t) {
                return this.bridge.deserialize(this.bridge.getPropertyFromAS(this.fb_instance_id, t))
            },
            set: function(t, e) {
                this.bridge.setPropertyInAS(this.fb_instance_id, t, e)
            },
            call: function(t, e) {
                this.bridge.callASMethod(this.fb_instance_id, t, e)
            },
            addRef: function() {
                this.bridge.addRef(this)
            },
            release: function() {
                this.bridge.release(this)
            }
        },
            function() {
                function t() {
                    return !!navigator.appVersion.match(/\/5\.[^\/]*?Safari\//)
                }
                var e, n;
                if (window.WEB_SOCKET_FORCE_FLASH || t());
                else {
                    if (window.WebSocket) return;
                    if (window.MozWebSocket) return void(window.WebSocket = MozWebSocket)
                }
                return e = function() {
                    function t() {
                        var t, e, i;
                        if (!U) {
                            try {
                                t = $.getElementsByTagName("body")[0].appendChild(m("span")), t.parentNode.removeChild(t)
                            } catch (n) {
                                return
                            }
                            for (U = !0, e = N.length, i = 0; e > i; i++) N[i]()
                        }
                    }

                    function i(t) {
                        U ? t() : N[N.length] = t
                    }

                    function n(t) {
                        if (typeof R.addEventListener != E) R.addEventListener("load", t, !1);
                        else if (typeof $.addEventListener != E) $.addEventListener("load", t, !1);
                        else if (typeof R.attachEvent != E) v(R, "onload", t);
                        else if ("function" == typeof R.onload) {
                            var e = R.onload;
                            R.onload = function() {
                                e(), t()
                            }
                        } else R.onload = t
                    }

                    function o() {
                        z ? r() : s()
                    }

                    function r() {
                        var t, e, i = $.getElementsByTagName("body")[0],
                            n = m(L);
                        n.setAttribute("type", A), t = i.appendChild(n), t ? (e = 0, function() {
                            if (typeof t.GetVariable != E) {
                                var o = t.GetVariable("$version");
                                o && (o = o.split(" ")[1].split(","), j.pv = [parseInt(o[0], 10), parseInt(o[1], 10), parseInt(o[2], 10)])
                            } else if (10 > e) return e++, void setTimeout(arguments.callee, 10);
                            i.removeChild(n), t = null, s()
                        }()) : s()
                    }

                    function s() {
                        var t, e, i, n, o, r, s, d, u, p, f, _ = H.length;
                        if (_ > 0)
                            for (t = 0; _ > t; t++)
                                if (e = H[t].id, i = H[t].callbackFn, n = {
                                        success: !1,
                                        id: e
                                    }, j.pv[0] > 0) {
                                    if (o = g(e))
                                        if (!y(H[t].swfVersion) || j.wk && j.wk < 312)
                                            if (H[t].expressInstall && l()) {
                                                for (r = {}, r.data = H[t].expressInstall, r.width = o.getAttribute("width") || "0", r.height = o.getAttribute("height") || "0", o.getAttribute("class") && (r.styleclass = o.getAttribute("class")), o.getAttribute("align") && (r.align = o.getAttribute("align")), s = {}, d = o.getElementsByTagName("param"), u = d.length, p = 0; u > p; p++) "movie" != d[p].getAttribute("name").toLowerCase() && (s[d[p].getAttribute("name")] = d[p].getAttribute("value"));
                                                c(r, s, e, i)
                                            } else h(o), i && i(n);
                                        else b(e, !0), i && (n.success = !0, n.ref = a(e), i(n))
                                } else b(e, !0), i && (f = a(e), f && typeof f.SetVariable != E && (n.success = !0, n.ref = f), i(n))
                    }

                    function a(t) {
                        var e, i = null,
                            n = g(t);
                        return n && "OBJECT" == n.nodeName && (typeof n.SetVariable != E ? i = n : (e = n.getElementsByTagName(L)[0], e && (i = e))), i
                    }

                    function l() {
                        return !q && y("6.0.65") && (j.win || j.mac) && !(j.wk && j.wk < 312)
                    }

                    function c(t, e, i, n) {
                        var o, r, s, a;
                        q = !0, C = n || null, P = {
                            success: !1,
                            id: i
                        }, o = g(i), o && ("OBJECT" == o.nodeName ? (T = d(o), x = null) : (T = o, x = i), t.id = D, (typeof t.width == E || !/%$/.test(t.width) && parseInt(t.width, 10) < 310) && (t.width = "310"), (typeof t.height == E || !/%$/.test(t.height) && parseInt(t.height, 10) < 137) && (t.height = "137"), $.title = $.title.slice(0, 47) + " - Flash Player Installation", r = j.ie && j.win ? "ActiveX" : "PlugIn", s = "MMredirectURL=" + ("" + R.location).replace(/&/g, "%26") + "&MMplayerType=" + r + "&MMdoctitle=" + $.title, typeof e.flashvars != E ? e.flashvars += "&" + s : e.flashvars = s, j.ie && j.win && 4 != o.readyState && (a = m("div"), i += "SWFObjectNew", a.setAttribute("id", i), o.parentNode.insertBefore(a, o), o.style.display = "none", function() {
                            4 == o.readyState ? o.parentNode.removeChild(o) : setTimeout(arguments.callee, 10)
                        }()), u(t, e, i))
                    }

                    function h(t) {
                        if (j.ie && j.win && 4 != t.readyState) {
                            var e = m("div");
                            t.parentNode.insertBefore(e, t), e.parentNode.replaceChild(d(t), e), t.style.display = "none",
                                function() {
                                    4 == t.readyState ? t.parentNode.removeChild(t) : setTimeout(arguments.callee, 10)
                                }()
                        } else t.parentNode.replaceChild(d(t), t)
                    }

                    function d(t) {
                        var e, i, n, o, r = m("div");
                        if (j.win && j.ie) r.innerHTML = t.innerHTML;
                        else if (e = t.getElementsByTagName(L)[0], e && (i = e.childNodes))
                            for (n = i.length, o = 0; n > o; o++) 1 == i[o].nodeType && "PARAM" == i[o].nodeName || 8 == i[o].nodeType || r.appendChild(i[o].cloneNode(!0));
                        return r
                    }

                    function u(t, e, i) {
                        var n, o, r, s, a, l, c, h, d = g(i);
                        if (j.wk && j.wk < 312) return n;
                        if (d)
                            if (typeof t.id == E && (t.id = i), j.ie && j.win) {
                                o = "";
                                for (r in t) t[r] != Object.prototype[r] && ("data" == r.toLowerCase() ? e.movie = t[r] : "styleclass" == r.toLowerCase() ? o += ' class="' + t[r] + '"' : "classid" != r.toLowerCase() && (o += " " + r + '="' + t[r] + '"'));
                                s = "";
                                for (a in e) e[a] != Object.prototype[a] && (s += '<param name="' + a + '" value="' + e[a] + '" />');
                                d.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + o + ">" + s + "</object>", F[F.length] = t.id, n = g(t.id)
                            } else {
                                l = m(L), l.setAttribute("type", A);
                                for (c in t) t[c] != Object.prototype[c] && ("styleclass" == c.toLowerCase() ? l.setAttribute("class", t[c]) : "classid" != c.toLowerCase() && l.setAttribute(c, t[c]));
                                for (h in e) e[h] != Object.prototype[h] && "movie" != h.toLowerCase() && p(l, h, e[h]);
                                d.parentNode.replaceChild(l, d), n = l
                            }
                        return n
                    }

                    function p(t, e, i) {
                        var n = m("param");
                        n.setAttribute("name", e), n.setAttribute("value", i), t.appendChild(n)
                    }

                    function f(t) {
                        var e = g(t);
                        e && "OBJECT" == e.nodeName && (j.ie && j.win ? (e.style.display = "none", function() {
                            4 == e.readyState ? _(t) : setTimeout(arguments.callee, 10)
                        }()) : e.parentNode.removeChild(e))
                    }

                    function _(t) {
                        var e, i = g(t);
                        if (i) {
                            for (e in i) "function" == typeof i[e] && (i[e] = null);
                            i.parentNode.removeChild(i)
                        }
                    }

                    function g(t) {
                        var e = null;
                        try {
                            e = $.getElementById(t)
                        } catch (i) {}
                        return e
                    }

                    function m(t) {
                        return $.createElement(t)
                    }

                    function v(t, e, i) {
                        t.attachEvent(e, i), W[W.length] = [t, e, i]
                    }

                    function y(t) {
                        var e = j.pv,
                            i = t.split(".");
                        return i[0] = parseInt(i[0], 10), i[1] = parseInt(i[1], 10) || 0, i[2] = parseInt(i[2], 10) || 0, e[0] > i[0] || e[0] == i[0] && e[1] > i[1] || e[0] == i[0] && e[1] == i[1] && e[2] >= i[2]
                    }

                    function w(t, e, i, n) {
                        var o, r, s;
                        j.ie && j.mac || (o = $.getElementsByTagName("head")[0], o && (r = i && "string" == typeof i ? i : "screen", n && (k = null, I = null), k && I == r || (s = m("style"), s.setAttribute("type", "text/css"), s.setAttribute("media", r), k = o.appendChild(s), j.ie && j.win && typeof $.styleSheets != E && $.styleSheets.length > 0 && (k = $.styleSheets[$.styleSheets.length - 1]), I = r), j.ie && j.win ? k && typeof k.addRule == L && k.addRule(t, e) : k && typeof $.createTextNode != E && k.appendChild($.createTextNode(t + " {" + e + "}"))))
                    }

                    function b(t, e) {
                        if (Y) {
                            var i = e ? "visible" : "hidden";
                            U && g(t) ? g(t).style.visibility = i : w("#" + t, "visibility:" + i)
                        }
                    }

                    function S(t) {
                        var e = /[\\\"<>\.;]/,
                            i = null != e.exec(t);
                        return i && typeof encodeURIComponent != E ? encodeURIComponent(t) : t
                    }
                    var T, x, C, P, k, I, E = "undefined",
                        L = "object",
                        V = "Shockwave Flash",
                        M = "ShockwaveFlash.ShockwaveFlash",
                        A = "application/x-shockwave-flash",
                        D = "SWFObjectExprInst",
                        O = "onreadystatechange",
                        R = window,
                        $ = document,
                        B = navigator,
                        z = !1,
                        N = [o],
                        H = [],
                        F = [],
                        W = [],
                        U = !1,
                        q = !1,
                        Y = !0,
                        j = function() {
                            var t, e = typeof $.getElementById != E && typeof $.getElementsByTagName != E && typeof $.createElement != E,
                                i = B.userAgent.toLowerCase(),
                                n = B.platform.toLowerCase(),
                                o = n ? /win/.test(n) : /win/.test(i),
                                r = n ? /mac/.test(n) : /mac/.test(i),
                                s = /webkit/.test(i) ? parseFloat(i.replace(/^.*webkit\/(\d+(\.\d+)?).*$/, "$1")) : !1,
                                a = !1,
                                l = [0, 0, 0],
                                c = null;
                            if (typeof B.plugins != E && typeof B.plugins[V] == L) c = B.plugins[V].description, !c || typeof B.mimeTypes != E && B.mimeTypes[A] && !B.mimeTypes[A].enabledPlugin || (z = !0, a = !1, c = c.replace(/^.*\s+(\S+\s+\S+$)/, "$1"), l[0] = parseInt(c.replace(/^(.*)\..*$/, "$1"), 10), l[1] = parseInt(c.replace(/^.*\.(.*)\s.*$/, "$1"), 10), l[2] = /[a-zA-Z]/.test(c) ? parseInt(c.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0);
                            else if (typeof R.ActiveXObject != E) try {
                                t = new ActiveXObject(M), t && (c = t.GetVariable("$version"), c && (a = !0, c = c.split(" ")[1].split(","), l = [parseInt(c[0], 10), parseInt(c[1], 10), parseInt(c[2], 10)]))
                            } catch (h) {}
                            return {
                                w3: e,
                                pv: l,
                                wk: s,
                                ie: a,
                                win: o,
                                mac: r
                            }
                        }();
                    (function() {
                        j.w3 && ((typeof $.readyState != E && "complete" == $.readyState || typeof $.readyState == E && ($.getElementsByTagName("body")[0] || $.body)) && t(), U || (typeof $.addEventListener != E && $.addEventListener("DOMContentLoaded", t, !1), j.ie && j.win && ($.attachEvent(O, function() {
                            "complete" == $.readyState && ($.detachEvent(O, arguments.callee), t())
                        }), R == top && ! function() {
                            if (!U) {
                                try {
                                    $.documentElement.doScroll("left")
                                } catch (e) {
                                    return void setTimeout(arguments.callee, 0)
                                }
                                t()
                            }
                        }()), j.wk && ! function() {
                            return U ? void 0 : /loaded|complete/.test($.readyState) ? void t() : void setTimeout(arguments.callee, 0)
                        }(), n(t)))
                    })(),
                        function() {
                            j.ie && j.win && window.attachEvent("onunload", function() {
                                var t, i, n, o, r, s = W.length;
                                for (t = 0; s > t; t++) W[t][0].detachEvent(W[t][1], W[t][2]);
                                for (i = F.length, n = 0; i > n; n++) f(F[n]);
                                for (o in j) j[o] = null;
                                j = null;
                                for (r in e) e[r] = null;
                                e = null
                            })
                        }();
                    return {
                        registerObject: function(t, e, i, n) {
                            if (j.w3 && t && e) {
                                var o = {};
                                o.id = t, o.swfVersion = e, o.expressInstall = i, o.callbackFn = n, H[H.length] = o, b(t, !1)
                            } else n && n({
                                success: !1,
                                id: t
                            })
                        },
                        getObjectById: function(t) {
                            return j.w3 ? a(t) : void 0
                        },
                        embedSWF: function(t, e, n, o, r, s, a, h, d, p) {
                            var f = {
                                success: !1,
                                id: e
                            };
                            j.w3 && !(j.wk && j.wk < 312) && t && e && n && o && r ? (b(e, !1), i(function() {
                                var i, _, g, m, v, w;
                                if (n += "", o += "", i = {}, d && typeof d === L)
                                    for (_ in d) i[_] = d[_];
                                if (i.data = t, i.width = n, i.height = o, g = {}, h && typeof h === L)
                                    for (m in h) g[m] = h[m];
                                if (a && typeof a === L)
                                    for (v in a) typeof g.flashvars != E ? g.flashvars += "&" + v + "=" + a[v] : g.flashvars = v + "=" + a[v];
                                if (y(r)) w = u(i, g, e), i.id == e && b(e, !0), f.success = !0, f.ref = w;
                                else {
                                    if (s && l()) return i.data = s, void c(i, g, e, p);
                                    b(e, !0)
                                }
                                p && p(f)
                            })) : p && p(f)
                        },
                        switchOffAutoHideShow: function() {
                            Y = !1
                        },
                        ua: j,
                        getFlashPlayerVersion: function() {
                            return {
                                major: j.pv[0],
                                minor: j.pv[1],
                                release: j.pv[2]
                            }
                        },
                        hasFlashPlayerVersion: y,
                        createSWF: function(t, e, i) {
                            return j.w3 ? u(t, e, i) : void 0
                        },
                        showExpressInstall: function(t, e, i, n) {
                            j.w3 && l() && c(t, e, i, n)
                        },
                        removeSWF: function(t) {
                            j.w3 && f(t)
                        },
                        createCSS: function(t, e, i, n) {
                            j.w3 && w(t, e, i, n)
                        },
                        addDomLoadEvent: i,
                        addLoadEvent: n,
                        getQueryParamValue: function(t) {
                            var e, i, n = $.location.search || $.location.hash;
                            if (n) {
                                if (/\?/.test(n) && (n = n.split("?")[1]), null == t) return S(n);
                                for (e = n.split("&"), i = 0; i < e.length; i++)
                                    if (e[i].substring(0, e[i].indexOf("=")) == t) return S(e[i].substring(e[i].indexOf("=") + 1))
                            }
                            return ""
                        },
                        expressInstallCallback: function() {
                            if (q) {
                                var t = g(D);
                                t && T && (t.parentNode.replaceChild(T, t), x && (b(x, !0), j.ie && j.win && (T.style.display = "block")), C && C(P)), q = !1
                            }
                        }
                    }
                }(), n = window.WEB_SOCKET_LOGGER ? WEB_SOCKET_LOGGER : window.console && window.console.log && window.console.error ? window.console : {
                    log: function() {},
                    error: function() {}
                }, e.getFlashPlayerVersion().major < 10 ? void n.error("Flash Player >= 10.0.0 is required.") : ("file:" == location.protocol && n.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."), window.WebSocket = function(t, e, i, n, o) {
                    var r = this;
                    r.__id = WebSocket.__nextId++, WebSocket.__instances[r.__id] = r, r.readyState = WebSocket.CONNECTING, r.bufferedAmount = 0, r.__events = {}, e ? "string" == typeof e && (e = [e]) : e = [], r.__createTask = setTimeout(function() {
                        WebSocket.__addTask(function() {
                            r.__createTask = null, WebSocket.__flash.create(r.__id, t, e, i || null, n || 0, o || null)
                        })
                    }, 0)
                }, WebSocket.prototype.send = function(t) {
                    if (this.readyState == WebSocket.CONNECTING) throw "INVALID_STATE_ERR: Web Socket connection has not been established";
                    var e = WebSocket.__flash.send(this.__id, encodeURIComponent(t));
                    return 0 > e ? !0 : (this.bufferedAmount += e, !1)
                }, WebSocket.prototype.close = function() {
                    return this.__createTask ? (clearTimeout(this.__createTask), this.__createTask = null, void(this.readyState = WebSocket.CLOSED)) : void(this.readyState != WebSocket.CLOSED && this.readyState != WebSocket.CLOSING && (this.readyState = WebSocket.CLOSING, WebSocket.__flash.close(this.__id)))
                }, WebSocket.prototype.addEventListener = function(t, e, i) {
                    t in this.__events || (this.__events[t] = []), this.__events[t].push(e)
                }, WebSocket.prototype.removeEventListener = function(t, e, i) {
                    var n, o;
                    if (t in this.__events)
                        for (n = this.__events[t], o = n.length - 1; o >= 0; --o)
                            if (n[o] === e) {
                                n.splice(o, 1);
                                break
                            }
                }, WebSocket.prototype.dispatchEvent = function(t) {
                    var e, i, n = this.__events[t.type] || [];
                    for (e = 0; e < n.length; ++e) n[e](t);
                    i = this["on" + t.type], i && i.apply(this, [t])
                }, WebSocket.prototype.__handleEvent = function(t) {
                    var e, i;
                    if ("readyState" in t && (this.readyState = t.readyState), "protocol" in t && (this.protocol = t.protocol), "open" == t.type || "error" == t.type) e = this.__createSimpleEvent(t.type);
                    else if ("close" == t.type) e = this.__createSimpleEvent("close"), e.wasClean = !!t.wasClean, e.code = t.code, e.reason = t.reason;
                    else {
                        if ("message" != t.type) throw "unknown event type: " + t.type;
                        i = decodeURIComponent(t.message), e = this.__createMessageEvent("message", i)
                    }
                    this.dispatchEvent(e)
                }, WebSocket.prototype.__createSimpleEvent = function(t) {
                    if (document.createEvent && window.Event) {
                        var e = document.createEvent("Event");
                        return e.initEvent(t, !1, !1), e
                    }
                    return {
                        type: t,
                        bubbles: !1,
                        cancelable: !1
                    }
                }, WebSocket.prototype.__createMessageEvent = function(t, e) {
                    if (document.createEvent && window.MessageEvent && !window.opera) {
                        var i = document.createEvent("MessageEvent");
                        return i.initMessageEvent("message", !1, !1, e, null, null, window, null), i
                    }
                    return {
                        type: t,
                        data: e,
                        bubbles: !1,
                        cancelable: !1
                    }
                }, WebSocket.CONNECTING = 0, WebSocket.OPEN = 1, WebSocket.CLOSING = 2, WebSocket.CLOSED = 3, WebSocket.__initialized = !1, WebSocket.__flash = null, WebSocket.__instances = {}, WebSocket.__tasks = [], WebSocket.__nextId = 0, WebSocket.loadFlashPolicyFile = function(t) {
                    WebSocket.__addTask(function() {
                        WebSocket.__flash.loadManualPolicyFile(t)
                    })
                }, WebSocket.__initialize = function() {
                    var t, o, r;
                    if (!WebSocket.__initialized) {
                        if (WebSocket.__initialized = !0, WebSocket.__swfLocation && (window.WEB_SOCKET_SWF_LOCATION = WebSocket.__swfLocation), !window.WEB_SOCKET_SWF_LOCATION) return void n.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");
                        window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR || i.match(/(^|\/)WebSocketMainInsecure\.swf(\?.*)?$/) || !i.match(/^\w+:\/\/([^\/]+)/) || (t = RegExp.$1, location.host != t && n.error("[WebSocket] You must host HTML and WebSocketMain.swf in the same host ('" + location.host + "' != '" + t + "'). See also 'How to host HTML file and SWF file in different domains' section in README.md. If you use WebSocketMainInsecure.swf, you can suppress this message by WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR = true;")), o = document.createElement("div"), o.id = "webSocketContainer", o.style.position = "absolute", WebSocket.__isFlashLite() ? (o.style.left = "0px", o.style.top = "0px") : (o.style.left = "-100px", o.style.top = "-100px"), r = document.createElement("div"), r.id = "webSocketFlash", o.appendChild(r), document.body.appendChild(o), e.embedSWF(i, "webSocketFlash", "1", "1", "10.0.0", null, null, {
                            hasPriority: !0,
                            swliveconnect: !0,
                            allowScriptAccess: "always"
                        }, null, function(t) {
                            t.success || n.error("[WebSocket] swfobject.embedSWF failed")
                        })
                    }
                }, WebSocket.__onFlashInitialized = function() {
                    setTimeout(function() {
                        WebSocket.__flash = document.getElementById("webSocketFlash"), WebSocket.__flash.setCallerUrl(location.href), WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);
                        for (var t = 0; t < WebSocket.__tasks.length; ++t) WebSocket.__tasks[t]();
                        WebSocket.__tasks = []
                    }, 0)
                }, WebSocket.__onFlashEvent = function() {
                    return setTimeout(function() {
                        var t, e;
                        try {
                            for (t = WebSocket.__flash.receiveEvents(), e = 0; e < t.length; ++e) WebSocket.__instances[t[e].webSocketId].__handleEvent(t[e])
                        } catch (i) {
                            n.error(i)
                        }
                    }, 0), !0
                }, WebSocket.__log = function(t) {
                    n.log(decodeURIComponent(t))
                }, WebSocket.__error = function(t) {
                    n.error(decodeURIComponent(t))
                }, WebSocket.__addTask = function(t) {
                    WebSocket.__flash ? t() : WebSocket.__tasks.push(t)
                }, WebSocket.__isFlashLite = function() {
                    if (!window.navigator || !window.navigator.mimeTypes) return !1;
                    var t = window.navigator.mimeTypes["application/x-shockwave-flash"];
                    return t && t.enabledPlugin && t.enabledPlugin.filename ? !!t.enabledPlugin.filename.match(/flashlite/i) : !1
                }, void(window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION || e.addDomLoadEvent(function() {
                    WebSocket.__initialize()
                })))
            }()
    }).call(window)
}, function(t, e) {
    "use strict";
    ! function() {
        function t(t) {
            var e, i;
            return t.symbol ? null == t.follow && Object.prototype.hasOwnProperty.call(h, t.symbol) ? h[t.symbol].promise : (e = $.Deferred(), i = e.promise(), h[t.symbol] || (h[t.symbol] = {}), h[t.symbol].promise = i, $.post("/social/follow-the-symbol/", t, "json").done(function(i) {
                i.error ? e.reject(i) : (e.resolve(i), i.symbol !== t.symbol && (h[i.symbol] = h[t.symbol]))
            }).fail(function() {
                e.reject.apply(e, arguments)
            }), i) : $.Deferred().reject().promise()
        }

        function e(e, n) {
            return t({
                symbol: e,
                follow: +!!n
            }).done(function(t) {
                var n = t.followTheSymbol;
                i(e, n)
            }).promise()
        }

        function i(t, e) {
            $(l).each(function() {
                var i = $(this);
                i.data("symbol") === t && i.toggleClass("active", e)
            })
        }

        function n(e) {
            var i, n, o;
            return e = e || {}, i = e.$button, n = e.symbol, o = e.classNames, i ? i.addClass(i.is("button") ? "follow-symbol" : "button-follow-symbol") : i = $('<button class="follow-symbol"></button>'), n || (n = i.data("symbol")), n ? (t({
                symbol: n
            }).pipe(function(t) {
                i.attr("data-symbol", t.symbol), t.followTheSymbol ? (i.addClass("active"), s(i, "Following", n), a(i, "Unfollow", n)) : a(i, "Follow", n), o && i.addClass(o)
            }), i) : (TradingView.logError("[FollowSymbols] symbol is required"), i)
        }

        function o() {
            for (var t in h) delete h[t];
            $(l).removeClass("active")
        }

        function r() {
            o(), $(l).each(function() {
                var e = $(this).data("symbol");
                e && (Object.prototype.hasOwnProperty.call(h, e) || t({
                    symbol: e
                }).done(function(t) {
                    i(t.symbol, t.followTheSymbol)
                }))
            })
        }

        function s(t, e, i) {
            var n = i.split(":");
            switch (n[1] && (n = n[1]), e) {
                case "Follow":
                    t.html($.t("Follow __symbol__", {
                        symbol: n
                    }));
                    break;
                case "Following":
                    t.html($.t("Following __symbol__", {
                        symbol: n
                    }));
                    break;
                case "Unfollow":
                    t.html($.t("Unfollow __symbol__", {
                        symbol: n
                    }));
                    break;
                default:
                    t.html($.t("__symbol__", {
                        symbol: n
                    }))
            }
        }

        function a(t, e, i) {
            switch (e) {
                case "Follow":
                    t.attr("title", $.t("Follow __symbol__", {
                        symbol: i
                    }));
                    break;
                case "Unfollow":
                    t.attr("title", $.t("Unfollow __symbol__", {
                        symbol: i
                    }));
                    break;
                default:
                    t.attr("title", $.t("__symbol__", {
                        symbol: i
                    }))
            }
        }
        var l = "button.follow-symbol, .button-follow-symbol",
            c = ".button-follow-symbol._tv-button.active",
            h = {};
        TradingView.FollowSymbols = {
            changeState: e,
            makeButton: n,
            request: t
        }, $(document).on("mouseover", c, function(t) {
            var e = $(this),
                i = e.data("symbol");
            i && s(e, "Unfollow", i)
        }), $(document).on("mouseout", c, function(t) {
            var e = $(this),
                i = e.data("symbol");
            i && s(e, "Following", i)
        }), $(document).on("click", l, function(t) {
            var i = $(this),
                n = i.data("symbol");
            n && (i.one("mouseout", function() {
                this.blur()
            }), runOrSignIn(function() {
                var t = i.hasClass("active"),
                    o = e(n, !t);
                i.toggleClass("active", !t), o.fail(function() {
                    i.toggleClass("active", t)
                })
            }, {
                source: "Follow symbol button"
            }))
        }), $(document).on("click", ".button-follow-symbol._tv-button", function(t) {
            var e = $(this),
                i = e.data("symbol");
            i && (e.hasClass("active") ? s(e, "Following", i) : s(e, "Follow", i))
        }), $(function() {
            loginStateChange.subscribe(TradingView.FollowSymbols, function(t) {
                t || (window.is_authenticated ? r() : o())
            })
        })
    }()
}, function(t, e, i) {
    (function(t, e, n) {
        "use strict";

        function o() {
            this._socket = null, this._notificationHandlers = [], this._sessions = [], this.studyCounter = 0
        }
        var r, s, a, l, c, h;
        a = i(48), r = a.ChartApiInterface, s = a.HandlerInfo, l = i(49), c = i(51), h = i(52), o.prototype.defaultWatchlistSymbols = function() {
            var t;
            switch (window.language) {
                case "ru":
                    t = ["MOEX:MICEX", "MOEX:RTSI", "MOEX:USDRUB_TOM", "MOEX:EURRUB_TOM", "MOEX:SBER", "MOEX:GAZP", "MOEX:VTBR", "MOEX:LKOH", "MOEX:MGNT", "FX:UKOIL", "FX:USOIL", "FX:NGAS", "FX:NAS100", "FX:EUSTX50", "FX:GER30", "FX:ITA40"];
                    break;
                case "ja":
                    t = ["FX:SPX500", "FX:JPN225", "FX:AUS200", "FX:USDJPY", "FX:EURJPY", "CHXJPY:7203", "CHXJPY:9437", "CHXJPY:7267", "CHXJPY:9433", "CHXJPY:8411", "CHXJPY:8306", "OTC:IHRMF", "AMEX:AIA", "CME:NY1!"];
                    break;
                default:
                    t = ["FX:SPX500", "AMEX:SPY", "FX:NAS100", "INDEX:DOWI", "INDEX:DXY", "FX:UK100", "FX:GER30", "FX:JPN225", "FX:EURUSD", "BITSTAMP:BTCUSD", "FX:UKOIL", "FX:XAUUSD", "AMEX:DIA", "AMEX:GLD", "AMEX:FXE"]
            }
            return t
        }, o.prototype.availableTimeFrames = function(t, e) {
            var n = i(53),
                o = {};
            return o[n.STATUS_DELAYED] = [{
                text: $.t("All"),
                value: "all",
                targetResolution: "M"
            }, {
                text: $.t("5y"),
                value: "60m",
                targetResolution: "W"
            }, {
                text: $.t("1y"),
                value: "12m",
                targetResolution: "D"
            }, {
                text: $.t("ytd"),
                value: "ytd",
                targetResolution: "D"
            }], o[n.STATUS_READY] = [{
                text: $.t("All"),
                value: "all",
                targetResolution: "M"
            }, {
                text: $.t("5y"),
                value: "60m",
                targetResolution: "W"
            }, {
                text: $.t("1y"),
                value: "12m",
                targetResolution: "D"
            }, {
                text: $.t("YTD"),
                value: "ytd",
                targetResolution: "D"
            }, {
                text: $.t("6m"),
                value: "6m",
                targetResolution: "120"
            }, {
                text: $.t("3m"),
                value: "3m",
                targetResolution: "60"
            }, {
                text: $.t("1m"),
                value: "1m",
                targetResolution: "30"
            }, {
                text: $.t("5d"),
                value: "5d",
                targetResolution: "5"
            }, {
                text: $.t("1d"),
                value: "1d",
                targetResolution: "1"
            }], e === n.STATUS_DELAYED_STREAMING && (e = n.STATUS_READY), o[e]
        }, o.prototype.defaultResolutions = function() {
            return {
                1: 1,
                3: 1,
                5: 1,
                15: 1,
                30: 1,
                45: 1,
                60: 1,
                120: 1,
                180: 1,
                240: 1,
                D: 1,
                W: 1,
                M: 1
            }
        }, o.prototype.supportedSymbolsTypes = function() {
            var e, n, o, r = [{
                name: $.t("All"),
                value: ""
            }, {
                name: $.t("Stock"),
                value: "stock"
            }, {
                name: $.t("Futures"),
                value: "futures"
            }, {
                name: $.t("Forex"),
                value: "forex"
            }, {
                name: $.t("CFD"),
                value: "cfd"
            }, {
                name: $.t("Bitcoin"),
                value: "bitcoin"
            }, {
                name: $.t("Index"),
                value: "index"
            }, {
                name: $.t("Economy"),
                value: "economic"
            }];
            return (TradingView.isFeatureEnabled("quandl_search") || t.enabled("force_quandl_search")) && (n = i(2), e = {
                name: $.t("Quandl"),
                value: n.QUANDL
            }, r.push(e)), "bovespa" === TradingView.widgetCustomer && (r = $.grep(r, function(t) {
                return -1 !== ["", "stock", "futures", "index"].indexOf(t.value)
            })), "cme" === TradingView.widgetCustomer && (o = r.indexOf(e), ~o && r.splice(o, 1)), r
        }, o.prototype.supportedExchangesList = function() {
            return [{
                value: "",
                name: "All Exchanges",
                desc: $.t("All Exchanges"),
                flag: ""
            }, {
                value: "796",
                name: "796",
                desc: "796",
                flag: "bitcoin"
            }, {
                value: "COINFLOOR",
                name: "COINFLOOR",
                desc: "COINFLOOR",
                flag: "bitcoin"
            }, {
                value: "LSE",
                name: "LSE",
                desc: $.t("LSE - London Stock Exchange (UK Companies) "),
                flag: "uk"
            }, {
                value: "LSIN",
                name: "LSIN",
                desc: $.t("LSIN - London Stock Exchange (International Companies)"),
                flag: "uk"
            }, {
                value: "AMEX",
                name: "AMEX",
                desc: $.t("AMEX - American Stock Exchange"),
                flag: "usa"
            }, {
                value: "EUREX",
                name: "EUREX",
                desc: $.t("EUREX Futures"),
                flag: "europe"
            }, {
                value: "MGEX",
                name: "MGEX",
                desc: "MGEX - Futures",
                flag: "usa",
                hideInSymbolSearch: !0
            }, {
                value: "MOEX",
                name: "MOEX",
                desc: $.t("MOEX - Moscow Stock Exchange"),
                flag: "russia"
            }, {
                value: "BITSTAMP",
                name: "BITSTAMP",
                desc: "BITSTAMP",
                flag: "bitcoin"
            }, {
                value: "FX",
                name: "FXCM",
                desc: $.t("FXCM - Forex"),
                flag: "forex"
            }, {
                value: "MERCADO",
                name: "MERCADO",
                desc: "MERCADO",
                flag: "bitcoin"
            }, {
                value: "BTCE",
                name: "BTC-e",
                desc: "BTC-E",
                flag: "bitcoin"
            }, {
                value: "GOCIO",
                name: "GOCIO",
                desc: "GOCIO",
                flag: "bitcoin"
            }, {
                value: "NASDAQ",
                name: "NASDAQ",
                desc: $.t("NASDAQ - NASDAQ Stock Market"),
                flag: "usa"
            }, {
                value: "BTCYOU",
                name: "BTCYOU",
                desc: "BTCYOU",
                flag: "bitcoin"
            }, {
                value: "HITBTC",
                name: "HITBTC",
                desc: "HITBTC",
                flag: "bitcoin"
            }, {
                value: "NYMEX",
                name: "NYMEX",
                desc: $.t("NYMEX Futures (E-mini included)"),
                flag: "usa"
            }, {
                value: "BSE",
                name: "BSE",
                desc: $.t("BSE - Bombay Stock Exchange"),
                flag: "india"
            }, {
                value: "NYMEX_MINI",
                name: "NYMEX E-mini",
                desc: $.t("NYMEX E-mini Futures"),
                flag: "usa"
            }, {
                value: "COMEX",
                name: "COMEX",
                desc: $.t("COMEX Futures (E-mini included)"),
                flag: "usa"
            }, {
                value: "ICEUSA",
                name: "ICEUSA",
                desc: $.t("ICEUSA Futures"),
                flag: "usa"
            }, {
                value: "NYSE",
                name: "NYSE",
                desc: $.t("NYSE - New York Stock Exchange"),
                flag: "usa"
            }, {
                value: "COMEX_MINI",
                name: "COMEX E-mini",
                desc: $.t("COMEX E-mini Futures"),
                flag: "usa"
            }, {
                value: "ICEEUR",
                name: "ICEEUR",
                desc: $.t("ICEEUR Futures"),
                flag: "europe"
            }, {
                value: "NLIF",
                name: "NYSE LIFFE",
                desc: "NYSE LIFFE Futures (E-mini included)",
                flag: "usa",
                hideInSymbolSearch: !0
            }, {
                value: "CBOE",
                name: "CBOE",
                desc: $.t("CBOE - Chicago Board Options Exchange"),
                flag: "usa"
            }, {
                value: "NSE",
                name: "NSE",
                desc: $.t("NSE - National Stock Exchange of India"),
                flag: "india"
            }, {
                value: "CBOT",
                name: "CBOT",
                desc: $.t("CBOT Futures (E-mini included)"),
                flag: "usa"
            }, {
                value: "KCBT",
                name: "KCBT",
                desc: "KCBT Futures",
                flag: "usa",
                hideInSymbolSearch: !0
            }, {
                value: "OKCOIN",
                name: "OKCOIN",
                desc: "OKCOIN",
                flag: "bitcoin"
            }, {
                value: "CBOT_MINI",
                name: "CBOT E-mini",
                desc: $.t("CBOT E-mini Futures"),
                flag: "usa"
            }, {
                value: "KRAKEN",
                name: "KRAKEN",
                desc: "KRAKEN",
                flag: "bitcoin"
            }, {
                value: "OTC",
                name: "OTC",
                desc: $.t("OTC - OTC Markets"),
                flag: "usa"
            }, {
                value: "CME",
                name: "CME",
                desc: $.t("CME Globex Futures (E-mini included)"),
                flag: "usa"
            }, {
                value: "TSXV",
                name: "TSXV",
                desc: $.t("TSXV - Toronto Stock Venture Exchange"),
                flag: "canada"
            }, {
                value: "TSX",
                name: "TSX",
                desc: $.t("TSX - Toronto Stock Exchange"),
                flag: "canada"
            }, {
                value: "CME_MINI",
                name: "CME E-mini",
                desc: $.t("CME E-mini Futures"),
                flag: "usa"
            }, {
                value: "BTCCHINA",
                name: "BTCCHINA",
                desc: "BTCCHINA",
                flag: "bitcoin"
            }, {
                value: "HUOBI",
                name: "HUOBI",
                desc: "HUOBI",
                flag: "bitcoin"
            }, {
                value: "KORBIT",
                name: "KORBIT",
                desc: "KORBIT",
                flag: "bitcoin"
            }, {
                value: "THEROCKTRADING",
                name: "THEROCKTRADING",
                desc: "THEROCKTRADING",
                flag: "bitcoin"
            }, {
                value: "ANX",
                name: "ANX",
                desc: "ANX",
                flag: "bitcoin"
            }, {
                value: "MEXBT",
                name: "MEXBT",
                desc: "MEXBT",
                flag: "bitcoin"
            }, {
                value: "ITBIT",
                name: "ITBIT",
                desc: "ITBIT",
                flag: "bitcoin"
            }, {
                value: "FOXBIT",
                name: "FOXBIT",
                desc: "FOXBIT",
                flag: "bitcoin"
            }, {
                value: "XCOIN",
                name: "XCOIN",
                desc: "XCOIN",
                flag: "bitcoin"
            }, {
                value: "BITVC",
                name: "BITVC",
                desc: "BITVC",
                flag: "bitcoin"
            }, {
                value: "BITYES",
                name: "BITYES",
                desc: "BITYES",
                flag: "bitcoin"
            }, {
                value: "BXTH",
                name: "BXTH",
                desc: "BXTH",
                flag: "bitcoin"
            }, {
                value: "BITMEX",
                name: "BITMEX",
                desc: "BITMEX",
                flag: "bitcoin"
            }, {
                value: "FX_IDC",
                name: "IDC",
                desc: $.t("IDC - Forex"),
                flag: "forex"
            }, {
                value: "CEXIO",
                name: "CEX.IO",
                desc: "CEX.IO",
                flag: "bitcoin"
            }, {
                value: "BITSO",
                name: "BITSO",
                desc: "BITSO",
                flag: "bitcoin"
            }, {
                value: "BITFINEX",
                name: "BITFINEX",
                desc: "BITFINEX",
                flag: "bitcoin"
            }, {
                value: "MTGOX",
                name: "MTGOX",
                desc: "MTGOX - Bitcoin",
                flag: "bitcoin"
            }, {
                value: "POLONIEX",
                name: "POLONIEX",
                desc: "POLONIEX - Bitcoin",
                flag: "bitcoin"
            }, {
                value: "BMFBOVESPA",
                name: "BM&F",
                desc: $.t("BM&F Bovespa"),
                flag: "brasil"
            }, {
                value: "NAG",
                name: "NAG",
                desc: $.t("NAG - Nagoya Stock Exchange"),
                flag: "japan"
            }, {
                value: "TSE",
                name: "TSE",
                desc: $.t("TSE - Tokyo Stock Exchange"),
                flag: "japan"
            }, {
                value: "EURONEXT",
                name: "Euronext",
                desc: $.t("Euronext - European stock exchange"),
                flag: "europe"
            }, {
                value: "OMX",
                name: "OMX",
                desc: $.t("OMX - Helsinki Stock Exchange"),
                flag: "sweden"
            }, {
                value: "FRA",
                name: "FRA",
                desc: $.t("FRA - Frankfurt Stock Exchange"),
                flag: "germany"
            }, {
                value: "BME",
                name: "BME",
                desc: $.t("BME - Madrid Stock Exchange"),
                flag: "spain"
            }, {
                value: "DUB",
                name: "DUB",
                desc: $.t("DUB - Irish Stock Exchange"),
                flag: "ireland"
            }, {
                value: "MIL",
                name: "MIL",
                desc: $.t("MIL - Milan Stock Exchange"),
                flag: "italy"
            }, {
                value: "OSL",
                name: "OSL",
                desc: $.t("OSL - Oslo Stock Exchange"),
                flag: "norway"
            }, {
                value: "VIE",
                name: "VIE",
                desc: $.t("VIE - Vienna Stock Exchange"),
                flag: "austria"
            }, {
                value: "IST",
                name: "IST",
                desc: $.t("IST - Istanbul Stock Exchange"),
                flag: "turkey"
            }, {
                value: "SWX",
                name: "SWX",
                desc: $.t("SWX - Swiss Stock Exchange"),
                flag: "switzerland"
            }]
        }, o.prototype.futuresRegex = function() {
            return /^(.+)([12]!|\w\d{4})$/
        }, o.prototype.enableLowQualityMode = function() {
            this._sendRequest("set_data_quality", ["low"])
        }, o.prototype.setLoadNew = function(t) {
            this._loadNewBars = !!t
        }, o.prototype.quoteCreateSession = function(t) {
            this._sendRequest("quote_create_session", [t])
        }, o.prototype.quoteDeleteSession = function(t) {
            this._sendRequest("quote_delete_session", [t])
        }, o.prototype.quoteSetFields = function(t, e) {
            var i = [t].concat(e);
            this._sendRequest("quote_set_fields", i)
        }, o.prototype.quoteAddSymbols = function(t, e) {
            var i = [t].concat(e);
            this._sendRequest("quote_add_symbols", i)
        }, o.prototype.quoteRemoveSymbols = function(t, e) {
            var i = [t].concat(e);
            this._sendRequest("quote_remove_symbols", i)
        }, o.prototype.quoteFastSymbols = function(t, e) {
            this._sendRequest("quote_fast_symbols", [t].concat(e))
        }, o.prototype.quoteHibernateAll = function(t) {
            this._sendRequest("quote_hibernate_all", [t])
        }, o.prototype.depthCreateSession = function(t, e, i) {
            this._sendRequest("depth_create_session", [t, e, i])
        }, o.prototype.depthDeleteSession = function(t) {
            this._sendRequest("depth_delete_session", [t])
        }, o.prototype.depthSetSymbol = function(t, e) {
            this._sendRequest("depth_set_symbol", [t, e])
        }, o.prototype.depthClearSymbol = function(t) {
            this._sendRequest("depth_clear_symbol", [t])
        }, o.prototype.depthSetScale = function(t, e) {
            this._sendRequest("depth_set_scale", [t, e])
        }, o.prototype.chartCreateSession = function(t, e) {
            this._sendRequest("chart_create_session", [t, e ? "disable_statistics" : ""])
        }, o.prototype.chartDeleteSession = function(t) {
            this._sendRequest("chart_delete_session", [t])
        }, o.prototype.createSession = function(t, e) {
            this._sessions[t] = e, this._notificationHandlers[t] = e, this.connected() && e.onMessage({
                method: "connected",
                params: []
            })
        }, o.prototype.removeSession = function(t) {
            delete this._sessions[t], delete this._notificationHandlers[t], this.chartDeleteSession(t)
        }, o.prototype.connected = function() {
            return !!this._isConnected
        }, o.prototype._getHost = function(t) {
            return TradingView.isFeatureEnabled("pro_backend") && window.pro && window.pro.hasPaidSubscription() && ("staging" === window.environment || "battle" === window.environment) && (!this._reconnectCount || this._reconnectCount < 3) && -1 === window.location.href.indexOf("ws_host") ? "prodata.tradingview.com" : "widgetdata.tradingview.com" === t && this._reconnectCount > 3 ? "data.tradingview.com" : t
        }, o.prototype._isSafari5 = function() {
            return !!navigator.appVersion.match(/\/5\.[^\/]*?Safari\//)
        }, o.prototype._isIE9 = function() {
            return !!navigator.appVersion.match(/MSIE 9/)
        }, o.prototype._isIOS5 = function() {
            return !!navigator.appVersion.match(/iPad, CPU 5/)
        }, o.prototype._getPort = function(t) {
            var e = 8081;
            return this._isSafari5() || this._isIE9() ? e : t
        }, o.prototype._isWidget = function() {
            return window.WEBSOCKET_HOST && "widgetdata.tradingview.com" === window.WEBSOCKET_HOST
        }, o.prototype.serverTimeOffset = function() {
            return this._serverTimeOffset ? this._serverTimeOffset : 0
        }, o.disconnectReason = function(t) {
            return 1e3 === t ? "Normal closure, meaning that the purpose for which the connection was established has been fulfilled." : 1001 === t ? 'An endpoint is "going away", such as a server going down or a browser having navigated away from a page.' : 1002 === t ? "An endpoint is terminating the connection due to a protocol error" : 1003 === t ? "An endpoint is terminating the connection because it has received a type of data it cannot accept (e.g., an endpoint that understands only text data MAY send this if it receives a binary message)." : 1004 === t ? "Reserved. The specific meaning might be defined in the future." : 1005 === t ? "No status code was actually present." : 1006 === t ? "The connection was closed abnormally, e.g., without sending or receiving a Close control frame" : 1007 === t ? "An endpoint is terminating the connection because it has received data within a message that was not consistent with the type of the message (e.g., non-UTF-8 [http://tools.ietf.org/html/rfc3629] data within a text message)." : 1008 === t ? 'An endpoint is terminating the connection because it has received a message that "violates its policy". This reason is given either if there is no other sutible reason, or if there is a need to hide specific details about the policy.' : 1009 === t ? "An endpoint is terminating the connection because it has received a message that is too big for it to process." : 1010 === t ? "An endpoint (client) is terminating the connection because it has expected the server to negotiate one or more extension, but the server didn't return them in the response message of the WebSocket handshake. <br /> Specifically, the extensions that are needed are: " + event.reason : 1011 === t ? "A server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request." : 1015 === t ? "The connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)." : "Unknown reason"
        }, o.prototype._getAuthTokenDfd = function(e) {
            var i, n;
            return this._loadNewBars ? $.Deferred().resolve("load_new_token") : this._isWidget() || -1 !== window.location.href.indexOf("widget_token") ? $.Deferred().resolve("widget_user_token") : t.enabled("widget") ? $.Deferred().resolve() : (i = this, i._authTokenManager || (n = new l, i._authTokenManager = n, i._authTokenManager.invalidated.subscribe(null, function(t) {
                i._authTokenManager.get().done(function(t) {
                    t && i.connected() && i._sendRequest("set_auth_token", [t])
                })
            })), i._authTokenManager.get(e))
        }, o.prototype.connect = function(t) {
            var e, i, n, r;
            return t = t || {}, this._socket ? void 0 : (e = this, i = "https:" === location.protocol && io.Transport.websocket.check(), n = this.connectDfd = $.Deferred(), r = this._getAuthTokenDfd(t.tokenGrabSession), e._socket = new io.Socket(e._getHost(window.WEBSOCKET_HOST), {
                port: e._getPort(window.WEBSOCKET_PORT),
                rememberTransport: !1,
                secure: i
            }), e._socket._tv_messageQueue = [], e._socket.connect(), e._socket.on("connect", function() {
                var t, i;
                e._isConnected = !0, e.sessionid = e._socket.transport.sessionid, TradingView.logNormal("connect session:" + e.sessionid, null, !0);
                try {
                    if (t = JSON.parse(e.sessionid), t.redirect) return void(window.WEBSOCKET_HOST = t.redirect);
                    e._metadataServerHash = t.studies_metadata_hash || null, i = t.timestamp - (new Date).valueOf() / 1e3, e._serverTimeOffset = i
                } catch (o) {
                    e._serverTimeOffset = 0
                }
                TradingView.logNormal("Time shift with server:" + Math.round(e._serverTimeOffset) + " seconds.", null, !0), r && r.done(function(t) {
                    var i, n;
                    for (r = null, i = e._socket._tv_messageQueue, delete e._socket._tv_messageQueue, t && e._sendRequest("set_auth_token", [t]), n = 0; n < i.length; n++) e._sendRequest(i[n][0], i[n][1]);
                    i = null, e._notifySessions({
                        method: "connected",
                        params: []
                    })
                }), TradingView.WEB_SOCKET_WAS_CONNECTED = !0, delete e._reconnectCount, clearTimeout(e._telemetryDisconnectTimeout), n.resolve()
            }), e._socket.on("message", function(t) {
                e._onMessage(t)
            }), e._socket.on("disconnect", function(t) {
                var i, r, s;
                if (delete e._isConnected, e.studyCounter = 0, TradingView.logNormal("disconnect session:" + e.sessionid + ", code:" + t.code + ", reason:" + t.reason + ", client reason:" + o.disconnectReason(t.code), null, !0), 1e3 !== t.code && (TradingView.logNormal("sending telemetry error due to abnormal disconnecting", null, !0), h.sendReport("websocket_error", {
                        code: t.code,
                        reason: t.reason,
                        clientReason: o.disconnectReason(t.code)
                    }, !0)), e._notifySessions({
                        method: "disconnected",
                        params: []
                    }), i = !e._socket, delete e._socket, delete e._metadataCallback, this && this._events)
                    for (r in this._events) delete this._events[r];
                if (e._disconnectCount = (e._disconnectCount || 0) + 1, !i)
                    if (e._telemetryDisconnectTimeout = setTimeout(function() {
                            h.sendReport("disconnect", {
                                reason: t.reason,
                                code: t.code
                            }, !0)
                        }, 5e3), e._reconnectCount = (e._reconnectCount || 0) + 1, e._reconnectCount >= e.MAX_RECONNECTS) e._notifySessions({
                        method: "reconnect_bailout",
                        params: []
                    }), n.reject();
                    else {
                        switch (typeof e.reconnectTimeout) {
                            case "function":
                                s = e.reconnectTimeout(e._reconnectCount);
                                break;
                            case "number":
                                s = e.reconnectTimeout;
                                break;
                            default:
                                s = 3e3
                        }
                        setTimeout(function() {
                            e.connected() || e.connect()
                        }, s)
                    }
            }), e._socket.on("error", function(t) {
                TradingView.logNormal(new Date + " session:" + e.sessionid + " websocket error:" + t, null, !0), h.sendReport("websocket_error", {}, !0)
            }), n)
        }, o.prototype.disconnect = function(t) {
            if (this._socket) {
                var e = this._socket;
                delete this._socket, e.disconnect()
            }
            return !0
        }, o.prototype.switchTimezone = function(t, e) {
            this._sendRequest("switch_timezone", [t, e])
        }, o.prototype.resolveSymbol = function(t, e, i, n) {
            this._notificationHandlers[t][e] = new s(n, e);
            var o = [t, e, i];
            this._sendRequest("resolve_symbol", o)
        }, o.prototype.createSeries = function(t, e, i, n, o, r, a) {
            i = i || "", this._notificationHandlers[t][e] = new s(a, e), this._sendRequest("create_series", [t, e, i, n, o, r])
        }, o.prototype.removeSeries = function(t, e, i) {
            this._notificationHandlers[t][e] = new s(i, e), this._sendRequest("remove_series", [t, e])
        }, o.prototype.modifySeries = function(t, e, i, n, o, r) {
            i = i || "", this._notificationHandlers[t][e] = new s(r, e), this._sendRequest("modify_series", [t, e, i, n, o])
        }, o.prototype.requestMoreData = function(t, e, i, n) {
            this._notificationHandlers[t][e] = new s(n, e), this._sendRequest("request_more_data", [t, e, i])
        }, o.prototype.requestMetadata = function(i, n, o) {
            var r, s, a, l, c = this;
            return c._metadataCallback ? void c._metadataCallback.handlers.push(o) : (r = t.enabled("widget"), s = r ? "studies_metadata_widget" : "studies_metadata", a = "pro_hash", l = [], c._metadataCallback = function(t) {
                var i, n;
                for (c._metadataCallback = null, e.setItem(s, TradingView.clone(t)).then(function() {
                    if (TradingView.logNormalChart("Updated studies_metadata cache"), !r) {
                        var t = pro.hash();
                        e.setItem(a, TradingView.clone(t)).then(function() {
                            TradingView.logNormalChart("Updated pro_hash cache")
                        })["catch"](function(t) {
                            TradingView.logError("Cannot update pro_hash cache, reason: " + t)
                        })
                    }
                })["catch"](function(t) {
                    TradingView.logError("Cannot update studies_metadata cache, reason: " + t)
                }), i = 0; i < l.length; i++)(n = l[i])(TradingView.clone(t))
            }, c._metadataCallback.handlers = l, c._metadataCallback.handlers.push(o), void e.getItem(a).then(function(t) {
                var o = pro.hash();
                null !== t && t === o || r ? e.getItem(s).then(function(t) {
                    var e, o, r = null !== t && t.params[1].hash || null;
                    if (null === r || null === c._metadataServerHash || c._metadataServerHash !== r) TradingView.logNormalChart("Metadata hash has changed (cached:'" + r + "', server:'" + c._metadataServerHash + "'')"), c._requestMetadataFromServer(i, n, c._metadataCallback);
                    else {
                        if (TradingView.logNormalChart("Using studies_metadata from browser cache"), !c._metadataCallback) return;
                        for (e = 0; e < c._metadataCallback.handlers.length; e++)(o = c._metadataCallback.handlers[e])(TradingView.clone(t));
                        c._metadataCallback = null
                    }
                })["catch"](function(t) {
                    TradingView.logError("Cannot get studies_metadata, reason: " + t), c._requestMetadataFromServer(i, n, c._metadataCallback)
                }) : (TradingView.logNormalChart("Pro hash has changed (cached: '" + t + "', current:'" + o + "')"), c._requestMetadataFromServer(i, n, c._metadataCallback))
            })["catch"](function(t) {
                TradingView.logError("Cannot get studies_metadata, reason: " + t), c._requestMetadataFromServer(i, n, c._metadataCallback)
            }))
        }, o.prototype._requestMetadataFromServer = function(t, e, i) {
            i && (TradingView.logNormalChart("Request studies_metadata from server"), this._notificationHandlers[t][e] = new s(i, e), this._sendRequest("request_studies_metadata", [t, e]))
        }, o.prototype.isCanCreateStudy = function() {
            return this.studyCounter < TradingView.STUDY_COUNT_LIMIT
        }, o.prototype.createStudy = function(t, e, i, n, o, r, a) {
            if (!this.isCanCreateStudy()) return void TVDialogs.showTooManyStudiesNotice();
            i = i || "", this._notificationHandlers[t][e] = new s(a, e);
            var l = [t, e, i, n, o].concat(r);
            this._sendRequest("create_study", l), this.studyCounter++
        }, o.prototype.removeStudy = function(t, e, i) {
            this._notificationHandlers[t][e] = new s(i, e), this._sendRequest("remove_study", [t, e]), this.studyCounter--
        }, o.prototype.modifyStudy = function(t, e, i, n, o) {
            i = i || "", this._notificationHandlers[t][e] = new s(o, e);
            var r = [t, e, i].concat(n);
            this._sendRequest("modify_study", r)
        }, o.prototype.createPointset = function(t, e, i, n, o, r, a) {
            i = i || "", this._notificationHandlers[t][e] = new s(a, e);
            var l = [t, e, i, n, o].concat(r);
            this._sendRequest("create_pointset", l)
        }, o.prototype.modifyPointset = function(t, e, i, n, o) {
            i = i || "", this._notificationHandlers[t][e] = new s(o, e);
            var r = [t, e, i].concat(n);
            this._sendRequest("modify_pointset", r)
        }, o.prototype.removePointset = function(t, e, i) {
            this._notificationHandlers[t][e] = new s(i, e), this._sendRequest("remove_pointset", [t, e])
        }, o.prototype.requestMoreTickmarks = function(t, e, i, n) {
            this._notificationHandlers[t][e] = new s(n, e), this._sendRequest("request_more_tickmarks", [t, e, i])
        }, o.prototype.requestFirstBarTime = function(t, e, i, n) {
            this._notificationHandlers[t][e] = new s(n, e), this._sendRequest("get_first_bar_time", [t, e, i])
        }, o.prototype.reconnectCount = function() {
            return this._reconnectCount || 0
        }, o.prototype.disconnectCount = function() {
            return this._disconnectCount || 0
        }, o.prototype._invokeHandler = function(t, e) {
            t && t(e)
        }, o.prototype._sendRequest = function(t, e) {
            var i, n;
            if (this._socket) {
                if (this._socket._tv_messageQueue) return void this._socket._tv_messageQueue.push([t, e]);
                i = {
                    m: t,
                    p: e
                }, this.requestHook && this.requestHook(i), n = JSON.stringify(i), e.length > 0 && (e[0].startsWith("qs_") ? (TradingView.logNormalQuote("send: " + n), TradingView.logNormalQuote("\n")) : (TradingView.logNormalChart("send: " + n), TradingView.logNormalChart("\n"))), this._socket.send(n)
            }
        }, o.prototype._onMessage = function(t) {
            var e = this.unpack(t);
            this._dispathNotification(e, t)
        }, o.prototype._convertTimescaleResponse = function(t) {
            var e, i = t.marks;
            for (e = 0; e < i.length; ++e) i[e] = {
                span: i[e][0],
                time: i[e][1],
                index: i[e][2]
            };
            return t
        }, o.prototype._dispathNotification = function(t, e) {
            var i, n, o, r, s, a, l, c, d, u, p = t.params.shift();
            if (this._notificationHandlers[p]) switch (p.startsWith("cs_") && (TradingView.logNormalChart("recv: " + e, null, -1 !== ["data_update"].indexOf(t.method)), TradingView.logNormalChart("\n")), p.startsWith("qs_") && (TradingView.logNormalQuote("recv: " + e, null, -1 !== ["qsd"].indexOf(t.method)), TradingView.logNormalQuote("\n")), t.method) {
                case "timescale_update":
                    i = t.params[0], n = t.params[1], o = this._convertTimescaleResponse(n), o.clear = 0 === n.changes.length && 0 === n.marks.length, this._notificationHandlers[p].onMessage({
                        method: "timescale_update",
                        params: o
                    });
                    for (r in i) s = {}, s.customId = r, s.plots = i[r].series, i[r].ns && (s.nonseries = i[r].ns), s.turnaround = i[r].turnaround, a = {
                        method: "data_update",
                        params: s
                    }, this._invokeNotificationHandler(p, r, a);
                    break;
                case "tickmark_update":
                    o = this._convertTimescaleResponse(t.params[0]), o.changes = [], this._notificationHandlers[p].onMessage({
                        method: "timescale_update",
                        params: o
                    });
                    break;
                case "data_update":
                    for (r in t.params[0]) {
                        l = t.params[0][r], s = {}, s.customId = r, s.plots = l.series ? l.series : l.plots, s.turnaround = l.turnaround, "s" in l && "ns" in l && (s.plots = l.s, s.nonseries = l.ns);
                        for (c in s.plots)
                            for (d in s.plots[c].value) 1e100 === s.plots[c].value[d] && (s.plots[c].value[d] = void 0);
                        a = {
                            method: "data_update",
                            params: s
                        }, this._invokeNotificationHandler(p, r, a)
                    }
                    break;
                case "index_update":
                    for (r in t.params[0]) a = {
                        method: "index_update",
                        params: t.params[0][r]
                    }, this._invokeNotificationHandler(p, r, a);
                    break;
                case "critical_error":
                    TradingView.logNormal(new Date + " critical_error session:" + this.sessionid + " reason:" + t.params[0], null, !0), h.sendReport("critical_error"), this._notificationHandlers[p].onMessage({
                        method: "critical_error",
                        params: t.params
                    });
                    break;
                case "quote_symbol_data":
                case "quote_list_fields":
                case "depth_symbol_error":
                case "depth_symbol_success":
                case "dd":
                case "dpu":
                case "depth_bar_last_value":
                    this._notificationHandlers[p].onMessage({
                        method: t.method,
                        params: t.params
                    });
                    break;
                default:
                    u = t.params[0], this._invokeNotificationHandler(p, u, t)
            }
        }, o.prototype._invokeNotificationHandler = function(t, e, i) {
            if (void 0 !== e) {
                var n = this._notificationHandlers[t][e];
                void 0 !== n && this._invokeHandler(n.handler, i), "series_deleted" !== i.method && "study_deleted" !== i.method || delete this._notificationHandlers[t][e]
            }
        }, o.prototype._notifySessions = function(t) {
            var e, i;
            for (e in this._sessions) {
                if (!this._sessions.hasOwnProperty(e)) return;
                i = this._sessions[e], "function" == typeof i.onMessage && i.onMessage(t)
            }
        }, o.prototype.unpack = function(t) {
            function e(t) {
                return t.index = t.i, t.value = t.v, t
            }
            var i, n;
            switch (t = JSON.parse(t), t.m && t.p && (t.method = t.m, t.params = t.p), i = t.params[1], t.method) {
                case "qsd":
                    t.method = "quote_symbol_data", i.symbolname = i.n, i.status = i.s, i.values = i.v, i.values.change = i.v.ch, i.values.last_price = i.v.lp, i.values.change_percent = i.v.chp;
                    break;
                case "du":
                    t.method = "data_update";
                    for (n in i) i[n].turnaround = i[n].t, i[n].s && !i[n].series && (i[n].series = i[n].s.map(e)), i[n].st && (i[n].s = i[n].st.map(e));
                    break;
                case "timescale_update":
                    for (n in i) i[n].t && (i[n].turnaround = i[n].t), i[n].s && !i[n].series && (i[n].series = i[n].s.map(e)), i[n].st && (i[n].s = i[n].st.map(e))
            }
            return t
        }, o.prototype.MAX_RECONNECTS = 20, o.prototype.RECONNECT_DELAY_RANGE = 1e4, o.prototype.RECONNECT_DELAY = Math.round(Math.random() * o.prototype.RECONNECT_DELAY_RANGE), o.prototype.reconnectTimeout = function(t) {
            return 6e3 * (t - 1) + this.RECONNECT_DELAY
        }, o.prototype._symbolSearchRequest = null, o.prototype.searchSymbols = function(t, e, n, o, r) {
            var s, a, l, h, d = this;
            this._symbolSearchRequest && this._symbolSearchRequest.abort(), s = location.protocol + "//" + this._getHost(window.WEBSOCKET_HOST), s += c.isProd() ? "/search/" : "/local_search/", window.SS_HOST && (s = location.protocol + "//" + window.SS_HOST + "/search/"), window.SS_URL && (s = window.SS_URL), a = {
                type: "GET",
                dataType: "json",
                url: s,
                data: {
                    text: t,
                    exchange: e,
                    type: n
                }
            }, l = i(2), n === l.QUANDL && (a = {
                type: "GET",
                url: "https://www.quandl.com/api/v3/datasets.json",
                data: {
                    query: t,
                    database_code: e,
                    api_key: l.QUANDL_API_KEY
                }
            }), h = this._symbolSearchRequest = $.ajax(a).done(function(t) {
                r && r(t)
            }).always(function() {
                d._symbolSearchRequest === h && delete d._symbolSearchRequest
            })
        }, o.prototype.getMarks = function(t, e, i, n, o) {
            throw Error("This method is not implemented")
        }, o.prototype.getTimescaleMarks = function(t, e, i, n, o) {
            throw Error("This method is not implemented")
        }, TradingView.requireFullInterfaceImplementation(o, "TVChartApi", r, "ChartApiInterface"), window.ChartApiInstance = new o, void 0 !== n && n && n.exports && (n.exports = o)
    }).call(e, i(3), i(33), i(4)(t))
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        this.handler = t, this.customId = e, this.requestHook = null
    }

    function o() {}
    TradingView.WEB_SOCKET_WAS_CONNECTED = !1, TradingView.STUDY_COUNT_LIMIT = 120, o.prototype.defaultWatchlistSymbols = function() {}, o.prototype.availableTimeFrames = function(t, e) {}, o.prototype.defaultResolutions = function() {}, o.prototype.supportedSymbolsTypes = function() {}, o.prototype.supportedExchangesList = function() {}, o.prototype.futuresRegex = function() {}, o.prototype.quoteCreateSession = function(t) {}, o.prototype.quoteDeleteSession = function(t) {}, o.prototype.quoteSetFields = function(t, e) {}, o.prototype.quoteAddSymbols = function(t, e) {}, o.prototype.quoteRemoveSymbols = function(t, e) {}, o.prototype.quoteFastSymbols = function(t, e) {}, o.prototype.depthCreateSession = function(t, e, i) {}, o.prototype.depthDeleteSession = function(t) {}, o.prototype.depthSetSymbol = function(t, e) {}, o.prototype.depthClearSymbol = function(t) {}, o.prototype.depthSetScale = function(t, e) {}, o.prototype.chartCreateSession = function(t, e) {}, o.prototype.chartDeleteSession = function(t) {}, o.prototype.createSession = function(t, e) {}, o.prototype.removeSession = function(t) {}, o.prototype.connected = function() {}, o.prototype._getHost = function(t) {}, o.prototype.connect = function() {}, o.prototype.disconnect = function() {}, o.prototype.switchTimezone = function(t, e) {}, o.prototype.resolveSymbol = function(t, e, i, n, o) {}, o.prototype.createSeries = function(t, e, i, n, o, r, s) {}, o.prototype.removeSeries = function(t, e, i) {}, o.prototype.modifySeries = function(t, e, i, n, o, r) {}, o.prototype.requestMoreData = function(t, e, i, n) {}, o.prototype.requestMetadata = function(t, e, i) {}, o.prototype.isCanCreateStudy = function() {}, o.prototype.createStudy = function(t, e, i, n, o, r, s) {}, o.prototype.removeStudy = function(t, e, i) {}, o.prototype.modifyStudy = function(t, e, i, n, o) {}, o.prototype.createPointset = function(t, e, i, n, o, r, s) {}, o.prototype.modifyPointset = function(t, e, i, n, o) {}, o.prototype.removePointset = function(t, e, i) {}, o.prototype.requestMoreTickmarks = function(t, e, i, n) {}, o.prototype.requestFirstBarTime = function(t, e, i, n) {}, o.prototype._invokeHandler = function(t, e) {}, o.prototype._sendRequest = function(t, e) {}, o.prototype._onMessage = function(t) {}, o.prototype._convertTimescaleResponse = function(t) {}, o.prototype._dispathNotification = function(t) {}, o.prototype._invokeNotificationHandler = function(t, e, i) {}, o.prototype._notifySessions = function(t) {}, o.prototype.unpack = function(t) {}, o.prototype.reconnectTimeout = function(t) {}, o.prototype.searchSymbols = function(t) {}, o.prototype.serverTimeOffset = function() {}, o.prototype._isSafari5 = function() {}, o.prototype._isIE9 = function() {}, o.prototype._isIOS5 = function() {}, o.prototype._getPort = function(t) {}, o.prototype.getMarks = function(t, e, i, n, o) {}, o.prototype.getTimescaleMarks = function(t, e, i, n, o) {}, TradingView.declareClassAsPureInterface(o, "ChartApiInterface"), TradingView.ChartApiInterface = o, TradingView.HandlerInfo = n, e.HandlerInfo = n, e.ChartApiInterface = o
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function i(t) {
            this.invalidated = new e, this._init()
        }
        i.prototype.useToken = !1, i.prototype.token = "", i.prototype._init = function() {
            this._getFromUserHash(), window.loginStateChange.subscribe(this, function(t) {
                t || (this._getFromUserHash(), this.invalidated.fire())
            })
        }, i.prototype._getFromUserHash = function() {
            window.user && user.auth_token ? this.set(user.auth_token) : this.remove()
        }, i.prototype.get = function(t) {
            var e, i, n, o = !1;
            return !this.useToken || this.token ? (i = this.useToken ? this.token : "", delete this.token, e = $.Deferred(), n = t ? $.post("/grab_session/", {}, "json") : $.Deferred().resolve(), n.done(function() {
                e.resolve(i)
            })) : (o = !0, e = this._request(t)), e.done(function(t) {
                this._syncExpiresTimeout(t, o)
            }.bind(this)), e
        }, i.prototype.set = function(t) {
            this.useToken = !0, this._pendingRequestDfd ? this._pendingRequestDfd.resolve(t) : this.token = t
        }, i.prototype.remove = function() {
            this.token = "", this.useToken = !1, this._pendingRequestDfd && (this._pendingRequestDfd.resolve(""), delete this._token)
        }, i.prototype._pendingRequestDfd = null, i.prototype._request = function(t) {
            var e, i, n, o = this;
            return o._pendingRequestDfd || (e = $.Deferred(), o._pendingRequestDfd = e, e.always(function() {
                n && n.abort(), delete o._pendingRequestDfd
            }), i = 0, function r() {
                n = $.post("/quote_token/", {
                    grabSession: !!t
                }, "json").done(function(t) {
                    e.resolve(t || "")
                }).fail(function(t) {
                    if (!e.isRejected() && !e.isResolved()) {
                        if (403 === t.status) return void e.resolve("");
                        var n = Math.min(1e3 * i, 3e4);
                        i++, setTimeout(r, n)
                    }
                })
            }()), o._pendingRequestDfd.promise()
        }, i.prototype._expiration = function(t) {
            var e, i, n = t.split(":");
            return n[8] && n[9] ? (e = +n[8], i = +n[9], isFinite(e) && isFinite(i) ? {
                timestamp: 1e3 * e,
                lifespan: 1e3 * i
            } : null) : null
        }, i.prototype._expiresTimeoutId = void 0, i.prototype._syncExpiresTimeout = function(t, e) {
            var i, n, o = 3e5;
            this._expiresTimeoutId && (clearTimeout(this._expiresTimeoutId), delete this._expiresTimeoutId), t && (i = this._expiration(t), i && (n = e ? i.lifespan : new Date - i.timestamp + i.lifespan, n -= o, n = Math.max(0, n), this._expiresTimeoutId = setTimeout(function() {
                this.invalidated.fire()
            }.bind(this), n)))
        }, t.exports = i
    }).call(e, i(50))
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function e() {
            this._listeners = []
        }
        e.prototype.subscribe = function(t, e, i) {
            var n = {
                object: t,
                member: e,
                singleshot: !!i
            };
            this._listeners.push(n)
        }, e.prototype.unsubscribe = function(t, e) {
            var i, n;
            for (i = 0; i < this._listeners.length; ++i)
                if (n = this._listeners[i], n.object === t && n.member.prototype === e.prototype) {
                    this._listeners.splice(i, 1);
                    break
                }
        }, e.prototype.fire = function() {
            var t, e, i = this._listeners.slice();
            for (t = 0; t < i.length; ++t) e = i[t], e.member.apply(e.object || null, arguments);
            for (t = this._listeners.length - 1; t >= 0; t--) this._listeners[t].singleshot && this._listeners.splice(t, 1)
        }, "undefined" != typeof window && (window.Delegate = e), void 0 !== t && t && t.exports && (t.exports = e)
    }).call(e, i(4)(t))
}, function(t, e, i) {
    (function(t) {
        "use strict";
        var e = function() {
            return "www.tradingview.com" === location.host || "dwq4do82y8xi7.cloudfront.net" === location.host || "i18n.tradingview.com" === location.host || "ru.tradingview.com" === location.host || location.host.match(/proxy\d.tradingview.com/) || location.host.match(/prod-[^.]+.tradingview.com/) ? "battle" : -1 !== location.href.indexOf("tradingview.com") ? "staging" : location.host.match(/webcharts/) ? "staging_local" : ("" === location.host.match(/^localhost(:\d+)?$/), "local")
        };
        e.isLocal = function() {
            return "local" === this()
        }, e.isProd = function() {
            return "battle" === this()
        }, e.isDebug = function() {
            return !this.isProd()
        }, TradingView.Environment = e, void 0 !== t && t && t.exports && (t.exports = e)
    }).call(e, i(4)(t))
}, function(t, e, i) {
    "use strict";

    function n() {
        var t = (new Date).getTime();
        $.get("https://prodata.tradingview.com/ping", function() {
            var e = (new Date).getTime() - t;
            e > c && (c = e), l > e && (l = e), h += e, d++, a = h / d, d >= u && clearInterval(o)
        })
    }
    var o, r = i(51),
        s = 3e4,
        a = 0,
        l = 1e4,
        c = 0,
        h = 0,
        d = 0,
        u = 10,
        p = 100,
        f = {};
    f.sendReport = function(t, e, i, n) {
        var o, h, d, u = function() {
            return this._timeout = null, $.support.cors = !0, $.post(d + "/report", o)
        }.bind(this);
        switch (h = i || "data_issue" !== t ? [] : JSON.stringify(TradingView.getLogHistory(null, "data_issue" === t ? null : p, !1, ["quote"])), this._report && this._timeout && this._report.event === t ? (clearTimeout(this._timeout), o = this._report, o.params.push(e || {}), o.log = h) : o = {
            event: t || "error",
            user: window.user && window.user.username || "Guest",
            websocketAddress: ChartApiInstance._socket ? ChartApiInstance._socket.host + (ChartApiInstance._socket.options.port && ":" + ChartApiInstance._socket.options.port || "") : "",
            log: h,
            params: [e] || [],
            sessionid: ChartApiInstance.sessionid,
            ref: location.href,
            js_errors: window.__tv_js_errors.slice(0, 10),
            ping: [l, c, a]
        }, d = "", r()) {
            case "battle":
            case "staging":
                d = "data_issue" === t ? "https://data-issues.tradingview.com" : "https://telemetry.tradingview.com";
                break;
            case "local":
                d = "http://localhost:7373";
                break;
            case "staging_local":
                d = "http://localhost:7373"
        }
        return d ? (this._report = o, u = function() {
            return this._timeout = null, $.post(d + "/report", o)
        }.bind(this), !0 === n ? u() : void(this._timeout = setTimeout(u, s))) : void 0
    }, -1 === location.href.indexOf("noping") && (o = setInterval(n, 1e4)), t.exports = f
}, function(t, e, i) {
    (function(e, n, o, r, s, a) {
        "use strict";

        function l(t) {
            this._series = t, this._model = t.m_model, this._points = [new e.Point(0, 0)], this._invalidated = !0
        }

        function c() {
            return {
                count: TradingView.DEFAULT_BAR_COUNT
            }
        }

        function h(t, e, r) {
            var s, a = i(132);
            R.call(this, t), this._boxSizeChanged = new n, this._tagsChanged = new n, this._symbolIntervalChanged = new n, this._symbolResolved = new n, this._symbolError = new n, this._symbolNotPermitted = new n, this._extendedHoursChanged = new n, this._extendedHoursNotPermitted = new n, this.chartTypeNotPermitted = new n, this.intradaySpreadNotPermitted = new n, this.intradayExchangeNotPermitted = new n, this.customIntervalNotPermitted = new n, this.chartWidgetInitialized = new n, this._startLoading = new n, this._dataLoaded = new n, this._tickmarksRangeChanged = new n, this._barReceived = new n, this._onChangedStyle = new n, this._onCompleted = new n, this._onStatusChanged = new n, this._onRestarted = new n, this._onSessionsStudyCreated = new n, this.requestingIntradayWhenNotSupported = new n, this.requestingResolutionWhenNotSupported = new n, this.priceScaleChanged = new n, this._requestOptions = r || c(), this.m_model = t, this._chartApi = t._chartApi, this.m_data = new W(this, t), this.setProperties(e), this._prevChartStyle = e.style.value(), this.createPaneView(), this._dataWindowView = new f(this, t), this._statusView = new d(this, t.properties()), this._priceAxisViews = [new p(this, t), new u(this, t)], this._symbolInfo = null, this._status = h.STATUS_OFFLINE, this._syncModel = null, s = this, this._turnaroundCounter = 1, this._turnaround = "s" + this._turnaroundCounter, this._handler = function(t) {
                s.onData(t)
            }, this._properties.addExclusion && this._properties.addExclusion("visible"), this._base = 100, this._formatter = new j(this._base), this._predictBars = 0, this._futureBarsPaneView = null, this._properties.showInDataWindow.listeners().subscribe(t, a.prototype.fullUpdate), this.marketStatus = new o, this._seriesLoaded = !1, this.properties().minTick.listeners().subscribe(this, h.prototype._recreateFormatter), s = this, this.properties().minTick.listeners().subscribe(null, function() {
                s.m_model.invalidate(new U(U.FULL_UPDATE))
            }), this._priceLineView = new l(this), this._gotoDateView = new O(this), this.bindStyleChange(), this.bindJapChartsInputs(), this.createExtendedHoursProperty(), this.extendedHours.listeners().subscribe(this, function() {
                this._extendedHoursChanged.fire()
            }), this._extendedHoursNotPermitted.subscribe(this, function() {
                this._properties.extendedHours.setValue(!1)
            }), this._extendedHoursChanged.subscribe(this, function() {
                this._status !== h.STATUS_SNAPSHOT && this.restart()
            }), this._symbolIntervalChanged.subscribe(this, this.checkInterval), this.properties().showCountdown.listeners().subscribe(this, h.prototype._onChangeShowCountdown), this._onChangeShowCountdown(this.properties().showCountdown), this._recreateFormatter()
        }
        var d, u, p, f, _, g, m, v, y, w, b, S, T, x, C, P, k, I, E, L, V, M, A, D, O, R, B, z, N, H, F, W, U, q, Y, j, G, X, K;
        TradingView.DEFAULT_BAR_COUNT = 300, TradingView.TIME_PLOT = 0, TradingView.OPEN_PLOT = 1, TradingView.HIGH_PLOT = 2, TradingView.LOW_PLOT = 3, TradingView.CLOSE_PLOT = 4, TradingView.ADT_PLOT = 6, TradingView.STYLE_PLOT = 7, TradingView.SEARCH_FROM_LEFT = -1, TradingView.SEARCH_FROM_RIGHT = 1, d = i(56), u = i(58), p = i(59), f = i(63), _ = i(65), g = _.SeriesAreaPaneView, m = _.SeriesLinePaneView, v = _.SeriesHollowCandlesPaneView, y = _.SeriesCandlesPaneView, w = _.SeriesBarsPaneView, b = _.SeriesHeikenAshiPaneView, S = i(73), T = S.SeriesRenkoPaneView, x = S.SeriesProjectionRenkoPaneView, C = S.SeriesPriceBreakPaneView, P = S.SeriesProjectionPriceBreakPaneView, k = S.SeriesKagiPaneView, I = S.SeriesProjectionKagiPaneView, E = S.SeriesPnFPaneView, L = S.SeriesProjectionPnFPaneView, V = i(52), M = i(74), A = i(75).SeriesBarColorer, D = i(76).HorzLineRenderer, O = i(117), R = i(80).PriceDataSource, B = i(118), z = i(120).FutureBarsPaneView, N = i(15), H = i(67), F = i(122), W = i(123), U = i(104), q = i(12), Y = i(83), j = Y.PriceFormatter, G = i(124), X = i(125), K = i(128).SyncModel, l.prototype.update = function() {
            this._invalidated = !0
        }, l.prototype.updateImpl = function() {
            if (this._visible = !1, this._series.properties().showPriceLine.value()) {
                var t = this._series.lastValueData(TradingView.CLOSE_PLOT, !0);
                t.noData || (this._visible = !0, this._points = [new e.Point(0, t.coordinate)], this._color = t.color)
            }
        }, l.prototype.renderer = function() {
            this._invalidated && (this.updateImpl(), this._invalidated = !1);
            var t = {};
            return t.points = this._points, t.color = this._color, t.linewidth = this._series.properties().priceLineWidth.value(), t.linestyle = CanvasEx.LINESTYLE_DOTTED, t.hitTestResult = H.REGULAR, t.visible = this._visible, new D(t)
        }, inherit(h, R), h.prototype.endOfData = function() {
            return this._endOfData
        }, h.prototype.serverTimeOffset = function() {
            return this._chartApi.serverTimeOffset()
        }, h.prototype._onChangeShowCountdown = function(t) {
            var e = this;
            t.value() ? this._countdownUpdateTimer = this.m_model.setInterval(function() {
                e.isDWM() || (e._priceAxisViews[0].update(), e.m_model.invalidate(new U(U.LIGHT_UPDATE)))
            }, 500) : (this.m_model.clearInterval(this._countdownUpdateTimer), delete this._countdownUpdateTimer)
        }, h.prototype.lastValueData = function(t, e, i) {
            var n, o, r, s, a, l, c, h, d, u, p = {
                noData: !0
            };
            if (this.m_model.timeScale().isEmpty() || this.priceScale().isEmpty() || this.data().isEmpty()) return p;
            if (n = this.m_model.timeScale().visibleBars(), n.isEmpty()) return p;
            if (e) {
                if (s = this.data().bars().last(), null === s || void 0 === s) return p;
                o = s.value, r = parseInt(s)
            } else {
                if (a = this.data().bars().search(n.lastBar(), TradingView.SEARCH_NEAREST_LEFT), null === a || void 0 === a) return p;
                o = this.data().bars().valueAt(a.index), r = a.index
            }
            return l = {
                noData: !1
            }, c = o[TradingView.CLOSE_PLOT], i && (l.price = c), this.priceScale().properties().percentage.value() && (h = this.firstValue(), c = this.priceScale().priceRange().convertToPercent(c, h)), l.text = this.priceScale().formatter().format(c), d = this.barColorer(), u = d.barStyle(r, !1), l.color = u.barColor, l.floatCoordinate = this.priceScale().priceToCoordinate(c, !0), l.coordinate = Math.round(l.floatCoordinate), l.index = r, l
        }, h.prototype._prepareChartApiParams = function() {
            return this._requestOptions.startDate ? !this._requestOptions.startDate || this._requestOptions.endDate || this._requestOptions.count ? this._requestOptions.startDate && this._requestOptions.endDate ? ["from_to", this._requestOptions.startDate, this._requestOptions.endDate] : ["from_to", this._requestOptions.startDate, this._requestOptions.count] : ["from_to", this._requestOptions.startDate] : this._requestOptions.count || TradingView.DEFAULT_BAR_COUNT
        }, h.prototype._nextSymbolId = 1, h.prototype._nextSeriesId = 1, h.STYLE_BARS = 0, h.STYLE_CANDLES = 1, h.STYLE_LINE = 2, h.STYLE_LINE_TYPE_MARKERS = 0, h.STYLE_LINE_TYPE_STEP = 1, h.STYLE_LINE_TYPE_SIMPLE = 2, h.STYLE_AREA = 3, h.STYLE_RENKO = 4, h.STYLE_KAGI = 5, h.STYLE_PNF = 6, h.STYLE_PB = 7, h.STYLE_HEIKEN_ASHI = 8, h.STYLE_HOLLOW_CANDLES = 9, h.STATUS_OFFLINE = 0, h.STATUS_RESOLVING = 1, h.STATUS_LOADING = 2, h.STATUS_READY = 3, h.STATUS_INVALID_SYMBOL = 4, h.STATUS_SNAPSHOT = 5, h.STATUS_EOD = 6, h.STATUS_PULSE = 7, h.STATUS_DELAYED = 8, h.STATUS_DELAYED_STREAMING = 9, h.STATUS_NO_BARS = 10, h.PERMISSION_DENIED = "permission denied", h.PD_REASON_SYMBOL = "symbol", h.PD_REASON_EXTENDED_HOURS = "extended_hours", h.STUDY_NOT_AUTH = "study_not_auth", h.STYLE_SHORT_NAMES = {}, h.STYLE_SHORT_NAMES[h.STYLE_BARS] = "bar", h.STYLE_SHORT_NAMES[h.STYLE_CANDLES] = "candle", h.STYLE_SHORT_NAMES[h.STYLE_HOLLOW_CANDLES] = "hollowCandle", h.STYLE_SHORT_NAMES[h.STYLE_LINE] = "line", h.STYLE_SHORT_NAMES[h.STYLE_AREA] = "area", h.STYLE_SHORT_NAMES[h.STYLE_RENKO] = "renko", h.STYLE_SHORT_NAMES[h.STYLE_PB] = "pb", h.STYLE_SHORT_NAMES[h.STYLE_KAGI] = "kagi", h.STYLE_SHORT_NAMES[h.STYLE_PNF] = "pnf", h.STYLE_SHORT_NAMES[h.STYLE_HEIKEN_ASHI] = "ha", h._SYMBOL_STRING_DATA = {}, h._SYMBOL_STRING_DATA[h.STYLE_RENKO] = {
            type: "BarSetRenko@tv-prostudies-1!",
            inputNames: ["source", "style", "boxSize", "atrLength"]
        }, h._SYMBOL_STRING_DATA[h.STYLE_PB] = {
            type: "BarSetPriceBreak@tv-prostudies-1!",
            inputNames: ["source", "lb"]
        }, h._SYMBOL_STRING_DATA[h.STYLE_KAGI] = {
            type: "BarSetKagi@tv-prostudies-1!",
            inputNames: ["source", "style", "atrLength", "reversalAmount"]
        }, h._SYMBOL_STRING_DATA[h.STYLE_PNF] = {
            type: "BarSetPnF@tv-prostudies-1!",
            inputNames: ["sources", "style", "boxSize", "atrLength", "reversalAmount"]
        }, h._SYMBOL_STRING_DATA[h.STYLE_HEIKEN_ASHI] = {
            type: "BarSetHeikenAshi@tv-basicstudies-1!",
            inputNames: []
        }, h.prototype.model = function() {
            return this.m_model
        }, h.prototype.fixLastBar = function(t) {
            this._futureBarsPaneView || (this._futureBarsPaneView = new z(this, this.data().bars().lastTimeIndex() + 1, t))
        }, h.prototype.clearData = function() {
            this.data().clear()
        }, h.prototype.data = function() {
            return this.m_data
        }, h.prototype.symbolId = function() {
            return this._symbolId
        }, h.prototype.isPulse = function() {
            return this._symbolInfo && this._symbolInfo.resolutions.length > 0
        }, h.prototype.onTagsChanged = function() {
            return this._tagsChanged
        }, h.prototype.onSymbolIntervalChanged = function() {
            return this._symbolIntervalChanged
        }, h.prototype.onSymbolResolved = function() {
            return this._symbolResolved
        }, h.prototype.onSymbolError = function() {
            return this._symbolError
        }, h.prototype.onSymbolNotPermitted = function() {
            return this._symbolNotPermitted
        }, h.prototype.onExtendedHoursNotPermitted = function() {
            return this._extendedHoursNotPermitted
        }, h.prototype.onStartLoading = function() {
            return this._startLoading
        }, h.prototype.onDataLoaded = function() {
            return this._dataLoaded
        }, h.prototype.onStatusChanged = function() {
            return this._onStatusChanged
        }, h.prototype.onTickmarksRangeChanged = function() {
            return this._tickmarksRangeChanged
        }, h.prototype.onBarReceived = function() {
            return this._barReceived
        }, h.prototype.onChangedStyle = function() {
            return this._onChangedStyle
        }, h.prototype.onCompleted = function() {
            return this._onCompleted
        }, h.prototype.onRestarted = function() {
            return this._onRestarted
        }, h.prototype.onBoxSizeChanged = function() {
            return this._boxSizeChanged
        }, h.prototype.status = function() {
            return this._status
        }, h.prototype.isDWM = function() {
            var t, e = new N(this._properties.interval.value());
            return e.isDWM() ? !0 : (t = e.kind() === N.SECONDS ? e.multiplier() : 60 * e.multiplier(), !(216e3 > t))
        }, h.prototype.lastPriceLabelFixedCoordinate = function() {
            return this._priceAxisViews[0]._fixedCoordinate
        }, h.prototype.createPaneView = function() {
            this._paneView = null, this._projectionBarsPaneView = null, this._symbolLabelView = new B(this.m_model, this, TradingView.CLOSE_PLOT, "firstShortName", "showSymbolLabels");
            var t = this._properties.style.value();
            switch (t) {
                case h.STYLE_BARS:
                    this._paneView = new w(this, this.m_model);
                    break;
                case h.STYLE_CANDLES:
                    this._paneView = new y(this, this.m_model);
                    break;
                case h.STYLE_LINE:
                    this._paneView = new m(this, this._properties.lineStyle.priceSource.value(), this.m_model);
                    break;
                case h.STYLE_AREA:
                    this._paneView = new g(this, this._properties.areaStyle.priceSource.value(), this.m_model);
                    break;
                case h.STYLE_RENKO:
                    this._paneView = new T(this, this.m_model), this._projectionBarsPaneView = new x(this, this.m_model);
                    break;
                case h.STYLE_PB:
                    this._paneView = new C(this, this.m_model), this._projectionBarsPaneView = new P(this, this.m_model);
                    break;
                case h.STYLE_KAGI:
                    this._paneView = new k(this, this.m_model), this._projectionBarsPaneView = new I(this, this.m_model);
                    break;
                case h.STYLE_PNF:
                    this._paneView = new E(this, this.m_model), this._projectionBarsPaneView = new L(this, this.m_model);
                    break;
                case h.STYLE_HEIKEN_ASHI:
                    this._paneView = new b(this, this.m_model);
                    break;
                case h.STYLE_HOLLOW_CANDLES:
                    this._paneView = new v(this, this.m_model);
                    break;
                default:
                    throw Error("Unknown chart style assigned: " + t)
            }
        }, h.prototype._clearStylePlot = function(t, e) {
            var i, n;
            t.size() && (i = e || +t.first(), n = +t.last() + 1, t.range(i, n).each(function(t, e) {
                e[TradingView.STYLE_PLOT] = null
            }))
        }, h.prototype.invalidateBarStylesCache = function(t) {
            TradingView.logDebugChart("Invalidate style cache starting from " + t), this._clearStylePlot(this.m_data.m_bars, t), this._clearStylePlot(this.m_data.m_nsBars)
        }, h.prototype.invalidateBarColorerCache = function() {
            delete this._barColorerCache, this.invalidateBarStylesCache()
        }, h.prototype.barColorer = function() {
            var t, e, i, n;
            if (this._barColorerCache) return this._barColorerCache;
            for (t = null, e = this.m_model.dataSources().length - 1; e >= 0; e--) i = this.m_model.dataSources()[e], i.metaInfo && TradingView.isInherited(i.constructor, TradingView.Study) && i.hasBarColorer() && i.properties().visible.value() && (n = i.barColorer(), null === t ? t = n : t.pushBackBarColorer(n));
            return null === t ? t = new A(this) : t.pushBackBarColorer(new A(this)), this._barColorerCache = t, this._barColorerCache
        }, h.prototype.properties = function() {
            return this._properties
        }, h.prototype._barsState = function(t) {
            var e = t.state();
            return e.columns = e.columns.filter(function(t) {
                return "style" !== t
            }), e.data.forEach(function(t) {
                t.value.splice(7, 1)
            }), e
        }, h.prototype.state = function(t) {
            var e = this === this.m_model.mainSeries() ? "MainSeries" : TradingView.className(this.constructor),
                i = {
                    type: e,
                    id: this.id(),
                    state: this.properties().state(),
                    zorder: this.zorder()
                };
            return this._symbolInfo && this._symbolInfo.ticker && (i.state.symbol = this._symbolInfo.ticker), t && (i.bars = this._barsState(this.m_data.m_bars), i.nsBars = this._barsState(this.m_data.m_nsBars), i.symbolInfo = this._symbolInfo, i.rtPrice = this.data().lastProjectionPrice), i.boxSize = this.data().boxSize, i.reversalAmount = this.data().reversalAmount, i
        }, h.prototype.stateForAlert = function() {
            var t = this === this.m_model.mainSeries() ? "MainSeries" : TradingView.className(this.constructor);
            return {
                id: this.id(),
                uniqueId: this.uniqueId(),
                type: t,
                proSymbol: this.proSymbol(),
                actualSymbol: this.actualSymbol(),
                interval: this.interval(),
                style: this.properties().style.value(),
                styleInputs: this.getInputsProperties().state(),
                extendedHours: this.extendedHours.value(),
                boxSize: this.data().boxSize,
                reversalAmount: this.data().reversalAmount
            }
        }, h.prototype.uniqueId = function() {
            return this.actualSymbol() + "|" + this.interval()
        }, h.prototype.restoreData = function(t, e, i, n, o, r) {
            this._status = h.STATUS_SNAPSHOT, this.m_data.m_bars.restoreState(t), this.m_data.m_nsBars.restoreState(e), this.updateSymbolInfo(i), this.m_data.lastProjectionPrice = n, this.m_data.boxSize = o, o || (this.properties().style.value() === h.STYLE_PNF ? this.m_data.boxSize = this.properties().pnfStyle.inputs.boxSize.value() : this.properties().style.value() === h.STYLE_RENKO && (this.m_data.boxSize = this.properties().renkoStyle.inputs.boxSize.value())), this.m_data.reversalAmount = r, r || this.properties().style.value() === h.STYLE_KAGI && (this.m_data.reversalAmount = this.properties().kagiStyle.inputs.reversalAmount.value())
        }, h.prototype.setProperties = function(t) {
            t.timeframe || t.merge({
                timeframe: ""
            }), t.shortName || t.merge({
                shortName: ""
            }), this._properties = t, this._properties.symbol.listeners().subscribe(this, h.prototype.changeSymbol), this._properties.interval.listeners().subscribe(this, h.prototype.changeInterval), this._properties.timeframe.listeners().subscribe(this, h.prototype.changeTimeFrame), this._properties.listeners().subscribe(this, h.prototype.changeProperties)
        }, h.prototype.changeSymbol = function() {
            this.setSymbolIntervalDelayed(), this.m_model.checkLineToolSelection()
        }, h.prototype.changeInterval = function() {
            this.setSymbolIntervalDelayed()
        }, h.prototype.changeTimeFrame = function() {
            TradingView.trackEvent("GUI", "Change timeframe")
        }, h.prototype.title = function() {
            return this.properties().symbol.value() + ", " + TradingView.translatedIntervalString(this.properties().interval.value())
        }, h.generateTitleForGui = function(t) {
            function e(t, e) {
                var i = Math.round(t * Math.pow(10, e)) / Math.pow(10, e);
                return i || ""
            }
            var i, n, o, r = t || {},
                s = "QUANDL" === r.exchange,
                a = "",
                l = {
                    symbolDescription: "",
                    interval: "",
                    exchange: "",
                    chartStyle: ""
                };
            switch (r.description && s ? 2 === r.description.split("/").length ? l.symbolDescription = r.description.split("/")[1] : (i = r.description.split("'").filter(function(t) {
                return t.length
            }), i.forEach(function(t) {
                t = t && ("/" === t[0] || /\d+\/\(?/.test(t)) ? [t] : t.split("/").filter(function(t) {
                    return t.length
                }), l.symbolDescription += t[2 === t.length ? 1 : 0]
            })) : r.description ? l.symbolDescription = r.description : l.symbolDescription = r.symbol, r.interval && (l.interval = TradingView.translatedIntervalString(r.interval)), s && r.description && (n = /[\w_]+\/[\w_]+/.exec(r.description), n && n[0] ? l.provider = n[0].split("/")[0] : l.provider = r.description.split("/")[0]), r.exchange && (l.exchange = r.exchange), r.style) {
                case h.STYLE_RENKO:
                    o = r.inputs.style + ("ATR" === r.inputs.style ? "(" + r.inputs.atrLength + ")" : ""), l.chartStyle = $.t("Renko") + " [" + r.inputs.source + ", " + o + ", " + e(r.boxSize, 4) + "]";
                    break;
                case h.STYLE_PB:
                    l.chartStyle = $.t("Line Break") + " [" + r.inputs.source + ", " + r.inputs.lb + "]";
                    break;
                case h.STYLE_KAGI:
                    o = r.inputs.style + ("ATR" === r.inputs.style ? "(" + r.inputs.atrLength + ")" : ""), l.chartStyle = $.t("Kagi") + " [" + r.inputs.source + ", " + o + ", " + e(r.reversalAmount, 4) + "]";
                    break;
                case h.STYLE_PNF:
                    o = r.inputs.style + ("ATR" === r.inputs.style ? "(" + r.inputs.atrLength + ")" : ""), l.chartStyle = $.t("PnF") + " [" + r.inputs.sources + ", " + o + ", " + e(r.boxSize, 4) + ", " + r.inputs.reversalAmount + "]";
                    break;
                case h.STYLE_HEIKEN_ASHI:
                    l.chartStyle = $.t("Heikin Ashi")
            }
            return a = l.symbolDescription + (l.interval ? ", " + l.interval : "") + (l.provider ? ", " + l.provider : "") + (l.exchange ? ", " + l.exchange : "") + (l.chartStyle ? ", " + l.chartStyle : ""), a = a.replace(/\'/g, "")
        }, h.prototype.changeProperties = function(t) {
            t !== this._properties.symbol && t !== this._properties.interval && t !== this._properties.timeframe && (this._tagsChanged.fire(), this.createPaneView(), this.updateAllViews(), this.m_model.updateSource(this))
        }, h.prototype._makeNextSymbolId = function() {
            return "symbol_" + this._nextSymbolId++
        }, h.prototype._makeNextSeriesId = function() {
            return "s" + this._nextSeriesId++
        }, h.prototype._clearLoadingTimer = function() {
            this.loadingTimer && (clearTimeout(this.loadingTimer), this.loadingTimer = null)
        }, h.prototype.onData = function(t) {
            var e, i, n, o, s, a, l, c, d, u, p, f, _, g, m, v, y, w, b = this;
            switch (t.method) {
                case "symbol_resolved":
                    if (t.params[0] !== this._symbolId) {
                        TradingView.logNormalChart("command for old symbol. Expected:" + this._symbolId + ", actual" + t.params[0]);
                        break
                    }
                    this.updateSymbolInfo(t.params[1]), this.m_model.updateSource(this), this._symbolResolved.fire(this._symbolInfo), this.m_model.realignLineTools(), TradingView.onWidget() || TradingView.trackEvent("Symbol", t.params[1].listed_exchange, t.params[1].name), e = this.symbolInfo().minmov / this.symbolInfo().pricescale, i = this.properties(), i.style.value() === h.STYLE_RENKO && i.renkoStyle.inputs.boxSize.value() < e ? i.renkoStyle.inputs.merge({
                        boxSize: e
                    }) : i.style.value() === h.STYLE_PNF && i.pnfStyle.inputs.boxSize.value() < e ? i.pnfStyle.inputs.merge({
                        boxSize: e
                    }) : i.style.value() === h.STYLE_KAGI && i.kagiStyle.inputs.reversalAmount.value() < e && i.kagiStyle.inputs.merge({
                        reversalAmount: e
                    });
                    break;
                case "symbol_error":
                    if (t.params[0] !== this._symbolId) {
                        TradingView.logNormalChart("command for old symbol. Expected:" + this._symbolId + ", actual" + t.params[0]);
                        break
                    }
                    if (this._clearLoadingTimer(), this._setStatus(h.STATUS_INVALID_SYMBOL), this._properties.shortName.setValue(this._properties.symbol.value()), this.m_model.clearAllStudies(), this.updateAllViews(), this.m_model.updateSource(this), t.params[1] === h.PERMISSION_DENIED) switch (t.params[2]) {
                        case h.PD_REASON_EXTENDED_HOURS:
                            this._extendedHoursNotPermitted.fire();
                            break;
                        case h.PD_REASON_SYMBOL:
                            this._symbolNotPermitted.fire(t.params[3]);
                            break;
                        default:
                            this._symbolNotPermitted.fire(t.params[2])
                    } else this.m_model.resetTimeScale(), this._symbolError.fire(), V.sendReport("symbol_error", {
                        chartSession: b._chartApi._sessionid,
                        symbol: b.getSymbolString()
                    });
                    this.m_model.realignLineTools();
                    break;
                case "series_timeframe":
                    if (t.params[1] !== this._turnaround) break;
                    n = t.params[2], o = t.params[3], s = t.params[4], a = void 0 !== s && s ? o : o + 10, this.m_model.setTimeViewport(n, a);
                    break;
                case "series_error":
                    l = t.params[2], this._clearLoadingTimer(), delete this._loadingStartTime, r.enabled("charting_library_debug_mode") && TradingView.logNormal("Error reason: " + l), this._setStatus(r.enabled("no_bars_status") && this._symbolInfo ? h.STATUS_NO_BARS : h.STATUS_INVALID_SYMBOL), l && l.startsWith("study_not_auth:") ? (c = l.split(":", 2)[1].split("@", 2)[0], c in {
                        BarSetRenko: !0,
                        BarSetPriceBreak: !0,
                        BarSetKagi: !0,
                        BarSetPnF: !0
                    } ? this.chartTypeNotPermitted.fire(c) : "BarSetSpread" === c && this.intradaySpreadNotPermitted.fire()) : "resolution_not_entitled" === l ? this.intradayExchangeNotPermitted.fire() : "custom_resolution" === l && this.customIntervalNotPermitted.fire(), this._seriesLoaded = !0;
                    break;
                case "series_loading":
                    if (t.params[1] !== this._turnaround) break;
                    if (t.params[0] !== this._seriesId) {
                        TradingView.logNormalChart("command for old series. Expected:" + this._seriesId + ", actual" + t.params.customId);
                        break
                    }
                    this._setStatus(h.STATUS_LOADING), b._loadingStartTime = (new Date).getTime(), b.loadingTimer = setTimeout(function() {
                        var t = {
                            chartSession: b._chartApi._sessionid,
                            symbol: b.getSymbolString(),
                            interval: b.interval()
                        };
                        V.sendReport("series_loading", t)
                    }, 15e3);
                    break;
                case "series_completed":
                    if (t.params[2] !== this._turnaround) break;
                    if (t.params[0] !== this._seriesId) {
                        TradingView.logNormalChart("command for old series. Expected:" + this._seriesId + ", actual" + t.params.customId);
                        break
                    }
                    switch (d = "chartSession:" + b._chartApi._sessionid, TradingView.logDebugChart(d + ", Series loading took " + ((new Date).getTime() - this._loadingStartTime) + " ms, eod:" + this._endOfData), delete this._loadingStartTime, u = t.params[1], "pulsed" === u && (u = "delayed"), u) {
                        case "streaming":
                            this._setStatus(h.STATUS_READY);
                            break;
                        case "endofday":
                            this._setStatus(h.STATUS_EOD);
                            break;
                        case "delayed":
                            this._setStatus(h.STATUS_DELAYED);
                            break;
                        case "pulsed":
                            this._setStatus(h.STATUS_PULSE)
                    }
                    u.match(/delayed_streaming/) && this._setStatus(h.STATUS_DELAYED_STREAMING), p = this.m_model.paneForSource(this), p.recalculatePriceScale(this.priceScale()), this.m_model.invalidate(new U(U.FULL_UPDATE)), this.m_data.size() && this._tickmarksRangeChanged.fire({
                        start: this.data().first().value[TradingView.TIME_PLOT],
                        end: this.data().last().value[TradingView.TIME_PLOT]
                    }), this.model().recalcVisibleRangeStudy(this.model().dataSources(), !0), this.model().recalcStudyBasedLineTools(), !this.isLockScale() || this.model().timeScale().isEmpty() || this._seriesLoaded || (this.model().timeScale()._correctOffset(), this.model().timeScale().correctBarSpacing(), f = this.model().timeScale().visibleBars(), this.priceScale().setPriceRange(this.priceRange(f.firstBar(), f.lastBar()))), this._seriesLoaded = !0, this._onCompleted.fire(this._endOfData), this.requestMoreData();
                    break;
                case "series_deleted":
                    break;
                case "data_update":
                    if (t.params.customId !== this._seriesId) {
                        TradingView.logNormalChart("command for old series. Expected:" + this._seriesId + ", actual" + t.params.customId);
                        break
                    }
                    if (this.status() === h.STATUS_INVALID_SYMBOL) break;
                    this._clearLoadingTimer(), t.params.plots.length > 0 && (this._endOfData = !1), t.params.plots.length ? (_ = this.m_data.m_bars.size(), g = this.m_data.m_bars.merge(t.params.plots), m = "Merge bars. Changes:{length:" + g.length + ", earliestRow:" + g.earliestRow.index + "} ", m += "bars state:{firstBar:" + this.m_data.m_bars.first() + ",lastBar:" + this.m_data.m_bars.last() + ",size:" + this.m_data.m_bars.size() + "}", TradingView.logDebugChart(m), _ !== this.bars().size() && (this._barReceived.fire(this.m_data.m_bars.size()), this.model().recalcVisibleRangeStudy(this.model().dataSources(), !0))) : (this.m_data.clear(), this._startLoading.fire()), v = this.properties().style.value(), !t.params.nonseries || v !== h.STYLE_RENKO && v !== h.STYLE_KAGI && v !== h.STYLE_PNF && v !== h.STYLE_HEIKEN_ASHI && v !== h.STYLE_PB ? t.params.nonseries || (this.m_data.m_nsBars.clear(), this.m_data.lastProjectionPrice = void 0) : (y = this.parseJapProjBars(t.params.nonseries), this.m_data.m_nsBars = y.nsBars, this.m_data.lastProjectionPrice = y.lastPrice, w = this.m_data.boxSize !== y.boxSize, this.m_data.boxSize = y.boxSize, this.m_data.reversalAmount = y.reversalAmount, w && this._boxSizeChanged.fire(this.m_data.boxSize)), p = this.m_model.paneForSource(this), this.m_model.updateAllVolumeStudies(), this.m_model.recalculatePane(p), this.m_model.updateSource(this), this.m_model.updateLineTools(), this.m_model.updateCrossHair()
            }
            this._dataLoaded.fire(t)
        }, h.prototype.fixBoxSize = function() {
            var t = this.model().timeScale(),
                e = this.priceScale();
            e.isEmpty() || t.isEmpty() || (this.m_data.boxSize = Math.abs(e.coordinateToPrice(t.barSpacing()) - e.coordinateToPrice(0)))
        }, h.prototype.parseJapProjBars = function(t) {
            var e, i, n, o, r, s, a, l, c = new G(["time", "open", "high", "low", "close", "adt", "style"]),
                d = this.model().timeScale(),
                u = this.properties().style.value();
            if (t.d && "" !== t.d)
                for (o = TradingView.Study.prototype._makeJSONForNSData.call(this, {
                    params: {
                        nonseries: t
                    }
                }).data, e = o.price, i = o.boxSize, n = o.reversalAmount, r = o.bars, s = 0; r && s < r.length; s++) a = [], l = t.indexes[r[s].time], a.push(d.points().valueAt(l)), a.push(r[s].open), a.push(r[s].high), a.push(r[s].low), a.push(r[s].close), a.push(r[s].volume), u === h.STYLE_KAGI ? a.push(r[s].additionalPrice) : u === h.STYLE_PNF && a.push(r[s].factor), c.add(l, a);
            return {
                nsBars: c,
                lastPrice: e,
                boxSize: i,
                reversalAmount: n
            }
        }, h.prototype.disconnect = function() {
            this._symbolId = null, this._seriesId = null, this._predictBars = 0, this._status = h.STATUS_OFFLINE
        }, h.prototype.isStarted = function() {
            return !!this._symbolId
        }, h.prototype.restart = function() {
            var t = i(132);
            this._onRestarted.fire(), this._setStatus(h.STATUS_RESOLVING), this.m_data = new W(this, this.model()), this._prevSymbolId = this._symbolId, this._symbolId = this._makeNextSymbolId(), this._chartApi.resolveSymbol(this._symbolId, this.getSymbolString(), this._handler), this._seriesId ? (this._turnaround = "s" + ++this._turnaroundCounter, this._chartApi.modifySeries(this._seriesId, this._turnaround, this._symbolId, this._properties.interval.value(), this._handler, this._prevSymbolId)) : (this._seriesId = this._makeNextSeriesId(), this._chartApi.createSeries(this._seriesId, this._turnaround, this._symbolId, this._properties.interval.value(), this._prepareChartApiParams(), this._handler)), this._properties.showInDataWindow.listeners().subscribe(this.m_model, t.prototype.fullUpdate), this.m_symbol = this._properties.symbol.value(), this.m_interval = this._properties.interval.value()
        }, h.prototype._generateTimeframe = function(t, e) {
            var i, n = e.right(1),
                o = t;
            return "ytd" === e ? o += ",YTD" : "d" === n ? (i = e.left(e.length - 1), o += "," + i, r.enabled("daily_timeframe_suffix") && (o += "D")) : "m" === n ? (i = e.left(e.length - 1), o += "," + i + "M") : "all" === e && (o += ",ALL"), o
        }, h.prototype.hasDelayedSymbolIntervalChange = function() {
            return !!this._setSymbolIntervalDelay
        }, h.prototype.setSymbolIntervalDelayed = function() {
            (this._checkSymbolWillChanged(this._properties.symbol.value()) || this._checkIntervalWillChanged(this._parseInterval(this._properties.interval.value()).interval)) && (this._setSymbolIntervalDelay && clearTimeout(this._setSymbolIntervalDelay), this._setSymbolIntervalDelay = setTimeout(function() {
                delete this._setSymbolIntervalDelay, this.setSymbolInterval(this._properties.symbol.value(), this._properties.interval.value())
            }.bind(this), 30))
        }, h.prototype._checkSymbolWillChanged = function(t) {
            return !this.symbolSameAsCurrent(t) || r.enabled("same_data_requery")
        }, h.prototype._checkIntervalWillChanged = function(t) {
            return this.m_interval !== t || r.enabled("same_data_requery")
        }, h.prototype._parseInterval = function(t) {
            var e = (t + "").split(",");
            return {
                interval: 2 === e.length ? e[0] : t,
                timeframe: 2 === e.length ? e[1] : 0
            }
        }, h.prototype.setSymbolInterval = function(t, e) {
            var i, n, o, r, s, a;
            delete this._gotoDateResult, i = this._parseInterval(e), n = i.interval, o = i.timeframe, r = this._checkSymbolWillChanged(t), s = this._checkIntervalWillChanged(n), (r || s) && (this._syncModel = null, this.m_symbol = t, this.m_interval = n, this.m_timeframe = o, this._symbolId && !r || this.updateSymbolInfo(null), this.m_model.realignLineTools(), this._status !== h.STATUS_SNAPSHOT && (this._setStatus(h.STATUS_RESOLVING), this._symbolIntervalChanged.fire(), this._onRestarted.fire(), this._seriesLoaded = !1, this._chartApi && this._chartApi.connected() && (this._symbolId && !r || (this._prevSymbolId = this._symbolId, this._symbolId = this._makeNextSymbolId(), a = this.getSymbolString(), this._chartApi.resolveSymbol(this._symbolId, a, this._handler)), this._seriesId ? (this._turnaround = "s" + ++this._turnaroundCounter, this._pendingInterval && (e = this._generateTimeframe(e, this._pendingInterval), delete this._pendingInterval), this._predictBars = 0, this._chartApi.modifySeries(this._seriesId, this._turnaround, this._symbolId, e, this._handler, this._prevSymbolId)) : (this._seriesId = this._makeNextSeriesId(), this._chartApi.createSeries(this._seriesId, this._turnaround, this._symbolId, e, this._prepareChartApiParams(), this._handler)))))
        }, h.prototype.actualSymbol = function() {
            return this.symbolInfo() ? this.symbolInfo().full_name : this.symbol()
        }, h.prototype.proSymbol = function() {
            return this.symbolInfo() ? this.symbolInfo().pro_name : this.symbol()
        }, h.prototype.symbol = function() {
            return this.properties().symbol.value()
        }, h.prototype.interval = function() {
            return this.properties().interval.value()
        }, h.prototype.isIntradayInterval = function() {
            return !!/^\d*$/.test(this.interval()) && this.interval() <= 1440
        }, h.prototype.bars = function() {
            return this.m_data.m_bars
        }, h.prototype.nsBars = function() {
            return this.m_data.m_nsBars
        }, h.prototype.open = function(t) {
            return this.m_data.valueAt(t)[TradingView.OPEN_PLOT]
        }, h.prototype.high = function(t) {
            return this.m_data.valueAt(t)[TradingView.HIGH_PLOT]
        }, h.prototype.low = function(t) {
            return this.m_data.valueAt(t)[TradingView.LOW_PLOT]
        }, h.prototype.close = function(t) {
            return this.m_data.valueAt(t)[TradingView.CLOSE_PLOT]
        }, h.prototype.hl2 = function(t) {
            return (this.high(t) + this.low(t)) / 2
        }, h.prototype.hlc3 = function(t) {
            return (this.high(t) + this.low(t) + this.close(t)) / 3
        }, h.prototype.ohlc4 = function(t) {
            return (this.open(t) + this.high(t) + this.low(t) + this.close(t)) / 4
        }, h.prototype.priceRange = function(t, e) {
            var i, n, o, r, a, l, c, h;
            return TradingView.isInteger(t) ? TradingView.isInteger(e) ? this.data().isEmpty() ? null : (n = this.data().boxSize, this.isLockScale() ? (void 0 === n && this.fixBoxSize(), o = this.priceScale().internalHeight() / (this.model().timeScale().barSpacing() / this.data().boxSize), r = this.data().search(e, TradingView.SEARCH_NEAREST_LEFT), a = (r.value[TradingView.HIGH_PLOT] + r.value[TradingView.LOW_PLOT]) / 2, i = new s(a - .5 * o, a + .5 * o), l = this.data().search(t, TradingView.SEARCH_NEAREST_RIGHT), this.priceScale().properties().percentage.value() && i ? i.convertToPercents(l.value[TradingView.CLOSE_PLOT]) : i) : (c = this.data().bars().minMaxOnRange2(t, e, [{
                index: TradingView.LOW_PLOT,
                offset: 0
            }, {
                index: TradingView.HIGH_PLOT,
                offset: 0
            }]), h = this.data().nsBars().minMaxOnRange(t, e, [{
                index: TradingView.LOW_PLOT,
                offset: 0
            }, {
                index: TradingView.HIGH_PLOT,
                offset: 0
            }]), null != h.min && (c.min = Math.min(c.min, h.min)), null != h.max && (c.max = Math.max(c.max, h.max)), i = new s(c.min, c.max), i && i.minValue() === i.maxValue() && (i = new s(i.minValue() - .5, i.maxValue() + .5)), this.priceScale().properties().percentage.value() && i ? (l = this.data().search(t, TradingView.SEARCH_NEAREST_RIGHT), i.convertToPercents(l.value[TradingView.CLOSE_PLOT])) : this.priceScale().isLog() && i ? new s(this.priceScale().priceToLogical(i.minValue()), this.priceScale().priceToLogical(i.maxValue())) : i)) : (TradingView.logDebugChart("Series.priceRange: incorrect endBar"), null) : (TradingView.logDebugChart("Series.priceRange: incorrect startBar"), null)
        }, h.prototype.nearestData = function(t, e) {
            if (!TradingView.isInteger(t)) return void TradingView.logDebugChart("Series.nearestData: incorrect logicalPoint");
            var i = this.data().search(t, e);
            return i || void 0
        }, h.prototype.nearestIndex = function(t, e) {
            var i = this.nearestData(t, e);
            return i ? i.index : void 0
        }, h.prototype.paneViews = function(t) {
            if (!this.properties().visible.value()) return null;
            var e = [this._paneView];
            return this._futureBarsPaneView && e.push(this._futureBarsPaneView), this._projectionBarsPaneView && e.push(this._projectionBarsPaneView), e.push(this._priceLineView), e.push(this._symbolLabelView), e.push(this._gotoDateView), e
        }, h.prototype.dataWindowView = function() {
            return this._dataWindowView
        }, h.prototype.statusView = function() {
            return this._statusView
        }, h.prototype.priceAxisViews = function(t, e) {
            return this.m_model.paneForSource(this) === t && e === this.priceScale() && (this.m_model.properties().scalesProperties.showSeriesLastValue.value() || this.properties().showCountdown.value()) ? this._priceAxisViews : null
        }, h.prototype.base = function() {
            return this._base
        }, h.prototype.formatter = function() {
            return this._formatter
        }, h.prototype.purgeSymbolInfo = function() {
            this._symbolInfo = null
        }, h.prototype.symbolInfo = function() {
            return this._symbolInfo
        }, h.prototype._recreateFormatter = function() {
            var t, e, i, n;
            "default" === this.properties().minTick.value() ? this._formatter = new j(this._symbolInfo ? this._symbolInfo.pricescale : 100, this._symbolInfo ? this._symbolInfo.minmov : 1, this._symbolInfo ? this._symbolInfo.fractional : !1, this._symbolInfo ? this._symbolInfo.minmove2 : void 0) : (t = this.properties().minTick.value().split(","), e = parseInt(t[0]), i = parseInt(t[1]), n = "true" === t[2], this._formatter = new j(e, i, n)), this.priceScale() && this.priceScale().updateFormatter()
        }, h.prototype.updateSymbolInfo = function(t) {
            var e = this,
                i = t && (t.pro_name || t.full_name || t.name);
            this._symbolInfo = t, t && (this._properties.shortName.setValue(t.name), i && this._properties.symbol.value().toUpperCase() !== i.toUpperCase() && this._properties.symbol.setValue(i)), this._base = t ? t.pricescale / t.minmov : 100, this._recreateFormatter(), this._statusView.update(), this.priceScale().updateFormatter(), "undefined" != typeof quoteSessionMultiplexerInstance && (this._quoteSessionClientId || (this._quoteSessionClientId = "series-" + TradingView.guid()), this._quoteSessionSymbol && (quoteSessionMultiplexerInstance.simple.unsubscribe(this._quoteSessionClientId, this._quoteSessionSymbol), this._quoteSessionSymbol = void 0), i && (this._quoteSessionSymbol = r.enabled("charting_library_base") ? t.name : i, quoteSessionMultiplexerInstance.simple.subscribe(this._quoteSessionClientId, this._quoteSessionSymbol, function(t, i) {
                e.quoteData = t && t.values || null, i && i.values && i.values.current_session && e.marketStatus.setValue(i.values.current_session)
            }))), this.checkInterval(), this.dataPoweredBy = F(t)
        }, h.prototype.symbolSameAsCurrent = function(t) {
            if (this.m_symbol === t) return !0;
            var e = this._symbolInfo;
            if (e) {
                if (e.full_name === t || e.pro_name === t) return !0;
                if (e.aliases && -1 !== e.aliases.indexOf(t)) return !0;
                if (e.alternatives && -1 !== e.alternatives.indexOf(t)) return !0
            }
            return !1
        }, h.prototype.updateAllViews = function() {
            this._paneView.update(), this._dataWindowView.update(), this._statusView.update(), this._priceAxisViews[0].update(), this._priceAxisViews[1].update(), this._futureBarsPaneView && this._futureBarsPaneView.update(), this._projectionBarsPaneView && this._projectionBarsPaneView.update(), this._priceLineView.update(), this._gotoDateView.update(), this._symbolInfo && this._symbolLabelView.update()
        }, h.prototype._setStatus = function(t) {
            this._status = t, this._statusView.update(), this.m_model.updateSource(this), this._onStatusChanged.fire()
        }, h.prototype.requestMoreData = function(t) {
            var e, i, n, o;
            this._status !== h.STATUS_READY && this._status !== h.STATUS_PULSE && this._status !== h.STATUS_DELAYED && this._status !== h.STATUS_DELAYED_STREAMING && this._status !== h.STATUS_EOD || this.m_model.timeScale().isEmpty() || (e = this.m_model.timeScale().visibleBars(), e.isEmpty() || 0 !== this.bars().size() && (i = t || e.lastBar() - this.data().last(), this._predictBars < i && (this._predictBars = i, this._chartApi && this._chartApi.connected() && this._chartApi.requestMoreTickmarks(this._seriesId, i, this._handler)), this._endOfData || (n = this.bars()._indexAt(0), o = t || n - e.firstBar(), 0 >= o || (this._endOfData = !0, this._chartApi && this._chartApi.connected() && (this._chartApi.requestMoreData(this._seriesId, o, this._handler), r.enabled("charting_library_base") && (this._predictBars = 0)), this._setStatus(h.STATUS_LOADING)))))
        }, h.prototype.bindStyleChange = function() {
            var t = this;
            ["candleStyle", "hollowCandleStyle", "haStyle", "barStyle", "lineStyle", "areaStyle", "renkoStyle", "pbStyle", "kagiStyle", "pnfStyle"].forEach(function(e) {
                t._properties[e].listeners().subscribe(t, h.prototype.invalidateBarStylesCache)
            })
        }, h.prototype.bindJapChartsInputs = function() {
            this._properties.style.listeners().subscribe(this, this.onChartStyleChanged), this._properties.renkoStyle.inputs.boxSize.listeners().subscribe(this, this.onInputChanged), this._properties.renkoStyle.inputs.source.listeners().subscribe(this, this.onInputChanged), this._properties.renkoStyle.inputs.style.listeners().subscribe(this, this.onInputChanged), this._properties.renkoStyle.inputs.atrLength.listeners().subscribe(this, this.onInputChanged), this._properties.pbStyle.inputs.lb.listeners().subscribe(this, this.onInputChanged), this._properties.pbStyle.inputs.source.listeners().subscribe(this, this.onInputChanged), this._properties.kagiStyle.inputs.reversalAmount.listeners().subscribe(this, this.onInputChanged), this._properties.kagiStyle.inputs.style.listeners().subscribe(this, this.onInputChanged), this._properties.kagiStyle.inputs.atrLength.listeners().subscribe(this, this.onInputChanged), this._properties.kagiStyle.inputs.source.listeners().subscribe(this, this.onInputChanged), this._properties.pnfStyle.inputs.boxSize.listeners().subscribe(this, this.onInputChanged), this._properties.pnfStyle.inputs.reversalAmount.listeners().subscribe(this, this.onInputChanged), this._properties.pnfStyle.inputs.sources.listeners().subscribe(this, this.onInputChanged), this._properties.pnfStyle.inputs.style.listeners().subscribe(this, this.onInputChanged), this._properties.pnfStyle.inputs.atrLength.listeners().subscribe(this, this.onInputChanged);
            var t = this;
            this._properties.lockScale.listeners().subscribe(this, function(e) {
                e.value() && t.model().timeScale().recalcLockedScale()
            })
        }, h.prototype.createExtendedHoursProperty = function() {
            function t() {
                var t = window.user ? !!user.extended_session : !1,
                    i = e.model().readOnly(),
                    n = e._properties.extendedHours.value(),
                    o = r.enabled("widget");
                !n || o || i || t || (e._extendedHoursNotPermitted.fire(), n = !1), n && !e.isIntradayInterval() && (n = !1), e.extendedHours.setValue(n)
            }
            var e = this;
            e.extendedHours = new a, e._properties.extendedHours.listeners().subscribe(null, t), e._properties.interval.listeners().subscribe(null, t), e.chartWidgetInitialized.subscribe(null, t), t()
        }, h.prototype.isNeedRestart = function(t) {
            if (void 0 === t && (t = this.properties().style.value()), this._prevChartStyle !== t) {
                var e = [h.STYLE_BARS, h.STYLE_CANDLES, h.STYLE_HOLLOW_CANDLES, h.STYLE_LINE, h.STYLE_AREA];
                if (!(e.indexOf(this._prevChartStyle) > -1 && e.indexOf(t) > -1)) return !0
            }
            return !1
        }, h.prototype.onChartStyleChanged = function() {
            this.isNeedRestart() && (this.data().clear(), this.model().timeScale().scrollToRealtime(!1), this.restart()), this._prevChartStyle = this.properties().style.value(), this._onChangedStyle.fire(this.properties().style.value()), this.invalidateBarStylesCache()
        }, h.prototype.onInputChanged = function() {
            this.restart()
        }, h.prototype.onExtendedHoursChanged = function() {
            return this._extendedHoursChanged
        }, h.prototype.getSymbolString = function() {
            var t, e, i;
            return t = r.enabled("pay_attention_to_ticker_not_symbol") && this._symbolInfo ? this._symbolInfo.ticker : this.actualSymbol(), this.extendedHours.value() && (t = {
                symbol: t,
                session: "extended"
            }), h._SYMBOL_STRING_DATA.hasOwnProperty(this._properties.style.value()) && (e = this.getInputsProperties(), i = h._SYMBOL_STRING_DATA[this._properties.style.value()], t = {
                symbol: t,
                type: i.type,
                inputs: i.inputNames.map(function(t) {
                    return e[t].value()
                })
            }), "string" != typeof t && (t = "=" + JSON.stringify(t)), t
        }, h.parseSymbolString = function(t) {
            var e, i, n, o, r, s, a, l = Object.keys(h._SYMBOL_STRING_DATA),
                c = {
                    symbol: null,
                    style: null,
                    extendedHours: null,
                    inputs: null
                };
            if (t && 0 === t.indexOf("=")) {
                if (e = t.slice(1), e = JSON.parse(e), c.symbol = e.symbol, e.type)
                    for (s = 0; s < l.length; s++)
                        if (n = l[s], i = h._SYMBOL_STRING_DATA[n], i.type === e.type) {
                            for (c.style = parseInt(n), c.inputs = {}, a = 0; a < i.inputNames.length; a++) r = e.inputs[a], o = i.inputNames[a], c.inputs[o] = r;
                            break
                        }
                "extended" === c.symbol.session && (c.extendedHours = !0, c.symbol = c.symbol.symbol)
            } else c.symbol = t;
            return c
        }, h.prototype.getStyleShortName = function() {
            var t = this._properties.style.value();
            if (h.STYLE_SHORT_NAMES.hasOwnProperty(t)) return h.STYLE_SHORT_NAMES[t];
            throw Error("Missed short name for style " + t)
        }, h.prototype.getInputsProperties = function() {
            var t = this._properties[this.getStyleShortName() + "Style"];
            return t.inputs || new a
        }, h.prototype.getRealVisibleRange = function() {
            var t = this.model().timeScale().visibleBars(),
                e = this.data().search(t.m_firstBar, TradingView.SEARCH_NEAREST_RIGHT),
                i = this.data().search(t.m_lastBar, TradingView.SEARCH_NEAREST_LEFT);
            return void 0 === e || void 0 === i ? null : new M(e.index, i.index)
        }, h.prototype.isLockScale = function() {
            return this.properties().lockScale.value()
        }, h.prototype.firstValue = function() {
            return this.data().firstValue()
        }, h.prototype.firstBar = function() {
            return this.data().firstBar()
        }, h.prototype.sessionsStudy = function() {
            var t, e, i, n;
            if (this._sessionsStudy) return this._sessionsStudy;
            for (t = this.model().paneForSource(this), e = t.dataSources(), i = 0; i < e.length; i++)
                if (n = e[i], n instanceof TradingView.Study && "Sessions" === n.metaInfo().shortId) return this._sessionsStudy = n, this._sessionsStudy;
            return !1
        }, h.prototype.createSessStudy = function() {
            if (!r.enabled("charting_library_base") && !this.sessionsStudy()) {
                var t = X.findStudyMetaInfo(this.model().studiesMetaData(), "Sessions@tv-basicstudies");
                this.model().insertStudy(t, !1, !0), this._onSessionsStudyCreated.fire()
            }
        }, h.prototype.checkSessStudy = function() {
            r.enabled("charting_library_base") || (this.sessionsStudy() || this.createSessStudy(), this.sessionsStudy().start())
        }, h.prototype.isSpread = function() {
            return "spread" === this._symbolInfo.type
        }, h.prototype.firstSymbol = function() {
            return this._symbolInfo ? this._symbolInfo.legs[0] : ""
        }, h.prototype.firstShortName = function() {
            return q.ticker(this.firstSymbol())
        }, h.prototype.onSessionsStudyCreated = function() {
            return this._onSessionsStudyCreated
        }, h.prototype.loadDataTo = function(t) {
            this._turnaround = "s" + ++this._turnaroundCounter;
            var e = this._properties.interval.value();
            e = this._generateTimeframe(e, t), this._chartApi.modifySeries(this._seriesId, this._turnaround, this._symbolId, e, this._handler)
        }, h.prototype.checkInterval = function() {
            if (this._symbolInfo && (N.kind(this.interval()) !== N.MINUTES || this._symbolInfo.has_intraday || this.requestingIntradayWhenNotSupported.fire(), this._symbolInfo.hasOwnProperty("supported_resolutions"))) {
                var t = this._properties.interval.value(); - 1 === this._symbolInfo.supported_resolutions.indexOf(t) && this.requestingResolutionWhenNotSupported.fire(this._symbolInfo.supported_resolutions[0])
            }
        }, h.prototype.setPriceScale = function(t) {
            this.m_priceScale !== t && (this.m_priceScale = t, this.priceScaleChanged.fire(t))
        }, h.prototype.setGotoDateResult = function(t) {
            this._gotoDateResult = t
        }, h.prototype.gotoDateResult = function() {
            return this._gotoDateResult
        }, h.prototype.syncModel = function() {
            var t, e;
            if (!this._syncModel) {
                if (t = this.symbolInfo(), e = this.interval(), !t || !e) return null;
                this._syncModel = new K(t, e)
            }
            return this._syncModel
        }, TradingView.Series = h, t.exports = h
    }).call(e, i(40), i(50), i(17), i(3), i(54), i(55))
}, function(t, e) {
    "use strict";

    function i(t, e) {
        this.m_minValue = t, this.m_maxValue = e
    }
    i.prototype.equals = function(t) {
        return this.m_minValue === t.m_minValue && this.m_maxValue === t.m_maxValue
    }, i.prototype.clone = function() {
        return new i(this.m_minValue, this.m_maxValue)
    }, i.prototype.minValue = function() {
        return this.m_minValue
    }, i.prototype.maxValue = function() {
        return this.m_maxValue
    }, i.prototype.length = function() {
        return this.m_maxValue - this.m_minValue
    }, i.prototype.isEmpty = function() {
        return this.m_maxValue === this.m_minValue || this.m_maxValue !== this.m_maxValue || this.m_minValue !== this.m_minValue
    }, i.prototype.state = function() {
        return {
            min: this.m_minValue,
            max: this.m_maxValue
        }
    }, i.prototype.merge = function(t) {
        return new i(Math.min(this.minValue(), t.minValue()), Math.max(this.maxValue(), t.maxValue()))
    }, i.prototype.apply = function(t, e) {
        this.m_minValue = Math.min(this.m_minValue, t), this.m_maxValue = Math.max(this.m_maxValue, e)
    }, i.prototype.scaleAroundCenter = function(t) {
        var e, i, n, o;
        return isNumber(t) ? (e = this.m_maxValue - this.m_minValue, void(0 !== e && (i = .5 * (this.m_maxValue + this.m_minValue), n = this.m_maxValue - i, o = this.m_minValue - i, n *= t, o *= t, this.m_maxValue = i + n, this.m_minValue = i + o))) : void TradingView.logDebugChart("PriceRange.scaleAroundCenter: invalid coeff")
    }, i.prototype.shift = function(t) {
        return isNumber(t) ? (this.m_maxValue += t, void(this.m_minValue += t)) : void TradingView.logDebugChart("PriceRange.shift: invalid coeff")
    }, i.prototype.convertToPercent = function(t, e) {
        return 100 * (t - e) / e
    }, i.prototype.convertFromPercent = function(t, e) {
        return t / 100 * e + e
    }, i.prototype.convertToPercents = function(t) {
        var e = 100 * (this.m_minValue - t) / t,
            n = 100 * (this.m_maxValue - t) / t;
        return new i(e, n)
    }, i.prototype.convertFromPercents = function(t) {
        var e = this.m_minValue / 100 * t + t,
            n = this.m_maxValue / 100 * t + t;
        return new i(e, n)
    }, t.exports = i
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function i(t) {
            if (this._listeners = new e, this._childs = [], void 0 !== t && null !== t)
                if (this.isPrimitiveType(t)) this._value = t;
                else
                    for (var i in t) this.addProperty(i, t[i])
        }
        i.prototype.merge = function(t) {
            var e, i;
            if (null != t)
                if (this.isPrimitiveType(t)) this._value = t;
                else if (Array.isArray(t))
                    for (e = 0; e < t.length; e++) this[e] ? this[e].merge(t[e]) : this.addProperty(e, t[e]);
                else
                    for (i in t) this[i] ? this[i].merge(t[i]) : this.addProperty(i, t[i])
        }, i.prototype.state = function(t) {
            var e, i, n, o, r, s = this._value;
            for (void 0 === s && (s = {}), e = 0; e < this._childs.length; e++)
                if (i = this._childs[e], !t || -1 === t.indexOf(i))
                    if (t) {
                        for (n = [], o = 0; o < t.length; o++) r = t[o], r.startsWith(i + ".") && n.push(r.substr(i.length + 1));
                        s[i] = this[i].state(n)
                    } else s[i] = this[i].state();
            return s
        }, i.prototype.clone = function(t) {
            return new i(this.state())
        }, i.prototype.isPrimitiveType = function(t) {
            return isNumber(t) ? !0 : new TradingView.TypeValidator(String).check(t) ? !0 : TradingView.isBoolean(t)
        }, i.prototype.value = function() {
            return this._value
        }, i.prototype.listeners = function() {
            return this._listeners
        }, i.prototype.childCount = function() {
            return this._childs.length
        }, i.prototype.setValue = function(t, e) {
            (this._value !== t || e) && (this._value = t, this._listeners.fire(this))
        }, i.prototype.setValueSilently = function(t) {
            this._value = t
        }, i.prototype.addProperty = function(t, e) {
            var n = new i(e);
            this[t] = n, this._childs.push(t), n.listeners().subscribe(this, i.prototype.childChanged)
        }, i.prototype.removeProperty = function(t) {
            this[t].listeners().unsubscribe(this, i.prototype.childChanged), delete this[t], this._childs = this._childs.filter(function(e) {
                return e !== t
            })
        }, i.prototype.addChild = function(t, e) {
            this[t] = e, -1 === $.inArray(t, this._childs) && this._childs.push(t), e.listeners().subscribe(this, i.prototype.childChanged)
        }, i.prototype.childChanged = function(t, e) {
            this.listeners().fire(this)
        }, i.prototype.subscribe = function(t, e) {
            this.listeners().subscribe(t, e)
        }, i.prototype.unsubscribe = function(t, e) {
            this.listeners().unsubscribe(t, e)
        }, t.exports = i
    }).call(e, i(50))
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        o.call(this, e), this._series = t, this._series.onRestarted().subscribe(this, n.prototype.invalidate), this._series.onSymbolResolved().subscribe(this, n.prototype.invalidate), this._series.onCompleted().subscribe(this, n.prototype.invalidate), this._series.onBoxSizeChanged().subscribe(this, n.prototype.invalidate)
    }
    var o = i(57);
    inherit(n, o), n.prototype.invalidate = function() {
        delete this._text, this.update()
    }, n.prototype.getSeriesPrecision = function() {
        var t = 4;
        return this._series._symbolInfo && this._series._symbolInfo.pricescale && (t = Math.round(Math.log(this._series._symbolInfo.pricescale) / Math.log(10))), t
    }, n.prototype.round = function(t) {
        var e = this.getSeriesPrecision(),
            i = Math.round(t * Math.pow(10, e)) / Math.pow(10, e);
        return i ? i : ""
    }, n.prototype.update = function() {
        if (!("_text" in this)) {
            var t = this._series.symbolInfo() || {};
            this._bold = !1, this._size = "17px", this._text = this._series.constructor.generateTitleForGui({
                description: t.description,
                exchange: t.exchange,
                symbol: this._series.symbol(),
                interval: this._series.interval(),
                style: this._series._properties.style.value(),
                inputs: this._series.getInputsProperties().state(),
                boxSize: this._series.data().boxSize,
                reversalAmount: this._series.data().reversalAmount,
                precision: this.getSeriesPrecision()
            })
        }
    }, t.exports = n
}, function(t, e) {
    "use strict";

    function i(t) {
        this._props = t, this._text = "", this._size = "12px", this._bold = !1
    }
    i.prototype.text = function() {
        return this._text
    }, i.prototype.setText = function(t) {
        this._text = t
    }, i.prototype.color = function() {
        return this._props ? this._props.scalesProperties.textColor.value() : "#444"
    }, i.prototype.bold = function() {
        return this._bold
    }, i.prototype.size = function() {
        return this._size
    }, t.exports = i
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            o.call(this, t, e)
        }
        var o = i(59);
        inherit(n, o), n.prototype.lastPrice = function() {
            return this._series.data().lastProjectionPrice
        }, n.prototype._updateImpl = function(t) {
            var i, n, o, r, s, a, l, c, h, d, u, p = this._rendererData;
            p.visible = !1, p.text = "", this._model.properties().scalesProperties.showSeriesLastValue.value() && (this._model.timeScale().isEmpty() || this._series.priceScale().isEmpty() || !this.lastPrice() || (t = this._model.timeScale().visibleBars(), t.isEmpty() || (i = this._series.data().search(t.lastBar(), TradingView.SEARCH_NEAREST_LEFT), void 0 !== i && (p.visible = !0, n = this._series.nearestIndex(t.firstBar(), TradingView.SEARCH_NEAREST_RIGHT), o = this._series.data().valueAt(n)[TradingView.CLOSE_PLOT], r = this.lastPrice(), this._series.priceScale().properties().percentage.value() && (r = 100 * (r - o) / o), p.text = this._series.priceScale().formatter().format(r), s = this._series.properties().style.value() === TradingView.Series.STYLE_HEIKEN_ASHI, s ? this._series.properties().haStyle.showRealLastPrice.value() ? (a = this._series.lastValueData(TradingView.CLOSE_PLOT, !0), a.noData || a.color === this._background || (this._background = a.color), e.enabled("countdown") && this._series.properties().showCountdown.value() && (p.secondLine = this._countdownInfo()), l = this._series.lastValueData(TradingView.CLOSE_PLOT, !1).index, c = a.index, h = l === c, p.visible = h) : p.visible = !1 : (d = this._series.barColorer(), u = d.barStyle(i.index, !0), this._background = u.barColor), this._background !== p.background && (p.background = this._background, p.color = this.color()), p.coordinate = this._series.priceScale().priceToCoordinate(r)))))
        }, t.exports = n
    }).call(e, i(3))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            this._series = t, this._model = e, this._text = "", this._coordinate = 0, this._background = "black", this._color = "white", this._invalidated = !0, this._rendererData = {
                text: "",
                coordinate: null,
                color: "#FFF",
                background: "#000",
                visible: !1,
                secondLine: null
            }
        }
        var o = i(60),
            r = i(62),
            s = i(15);
        inherit(n, o), n.prototype.update = function() {
            this._invalidated = !0;
        }, n.prototype._updateImpl = function(t) {
            var i, n, o, r, s, a = this._rendererData;
            a.visible = !1, a.text = "", this._model.properties().scalesProperties.showSeriesLastValue.value() && (i = this._series.lastValueData(null, e.enabled("price_scale_always_last_bar_value")), !i.noData && i.text && (n = this._series.properties().style.value() === TradingView.Series.STYLE_HEIKEN_ASHI, n && this._series.properties().haStyle.showRealLastPrice.value() && (o = this._series.lastValueData(TradingView.CLOSE_PLOT, !1).index, r = this._series.lastValueData(TradingView.CLOSE_PLOT, !0).index, o === r) || (a.visible = !0, a.text = i.text, i.color !== this._background && (this._background = i.color, a.color = this.color(), a.background = this._background), a.coordinate = i.coordinate, this._floatCoordinate = i.floatCoordinate, this._coordinate = i.coordinate, a.secondLine = null, e.enabled("countdown") && this._series.properties().showCountdown.value() && (s = [TradingView.Series.STYLE_BARS, TradingView.Series.STYLE_CANDLES, TradingView.Series.STYLE_LINE, TradingView.Series.STYLE_AREA, TradingView.Series.STYLE_HOLLOW_CANDLES, TradingView.Series.STYLE_HEIKEN_ASHI], -1 !== s.indexOf(this._series.properties().style.value()) && (a.secondLine = this._countdownInfo())))))
        }, n.prototype.coordinate = function() {
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), o.prototype.coordinate.call(this)
        }, n.prototype.renderer = function() {
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), this._renderer || (this._renderer = new r(this._rendererData)), this._renderer
        }, n.prototype.dump = function() {
            return {
                text: this._rendererData.text,
                coordinate: this._rendererData.coordinate,
                color: this._rendererData.color,
                background: this._rendererData.background,
                visible: this._rendererData.visible
            }
        }, n.prototype.text = function() {
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), this._rendererData.text
        }, n.prototype._countdownInfo = function() {
            var t, e, i, n, o, r, a, l, c, h, d = null;
            return this._series.isDWM() ? d : (t = 1e3 * this._series.data().bars().last().value[0], e = 1e3 * this._series.serverTimeOffset(), i = s.parse(this._series.interval()), n = i.kind() === s.SECONDS ? i.multiplier() : 60 * i.multiplier(), o = t.valueOf() + 1e3 * n, r = (new Date).valueOf() + e, a = Math.round((o - r) / 1e3), a > 0 && (a = Math.min(a, n), l = "", a >= 3600 && (l = "" + Math.floor(a / 3600) + ":"), a %= 3600, c = ("0" + Math.floor(a / 60)).right(2), a %= 60, h = ("0" + Math.floor(a)).right(2), d = l + c + ":" + h), d)
        }, t.exports = n
    }).call(e, i(3))
}, function(t, e, i) {
    "use strict";

    function n() {
        this._text = "", this._background = "#585858", this._coordinate = 0
    }
    var o = i(61).RGBColor;
    n.prototype.text = function() {
        return this._text
    }, n.prototype.background = function() {
        return this._background
    }, n.prototype.color = function() {
        return new o(this._background).blackWhiteContrast()
    }, n.prototype.coordinate = function() {
        return this._coordinate
    }, n.prototype.floatCoordinate = function() {
        return this._floatCoordinate || this._coordinate
    }, t.exports = n
}, function(t, e) {
    "use strict";

    function i(t) {
        this.ok = !1, "#" === t.charAt(0) && (t = t.substr(1, 6)), t = t.replace(/ /g, ""), t = t.toLowerCase(), this.parseColor(t) || (this.simple_colors[t] && (t = this.simple_colors[t]), this.parseColor(t)), this.cleanupRGB()
    }

    function n(t, e, i) {
        var n, o, r, s, a, l;
        if (t /= 255, e /= 255, i /= 255, n = Math.max(t, e, i), o = Math.min(t, e, i), a = (n + o) / 2, n === o) r = s = 0;
        else {
            switch (l = n - o, s = a > .5 ? l / (2 - n - o) : l / (n + o), n) {
                case t:
                    r = (e - i) / l + (i > e ? 6 : 0);
                    break;
                case e:
                    r = (i - t) / l + 2;
                    break;
                case i:
                    r = (t - e) / l + 4
            }
            r /= 6
        }
        return [r, s, a]
    }

    function o(t, e, i) {
        function n(t, e, i) {
            return 0 > i && (i += 1), i > 1 && (i -= 1), 1 / 6 > i ? t + 6 * (e - t) * i : .5 > i ? e : 2 / 3 > i ? t + (e - t) * (2 / 3 - i) * 6 : t
        }
        var o, r, s, a, l;
        return 0 === e ? o = r = s = i : (a = .5 > i ? i * (1 + e) : i + e - i * e, l = 2 * i - a, o = n(l, a, t + 1 / 3), r = n(l, a, t), s = n(l, a, t - 1 / 3)), [Math.round(255 * o), Math.round(255 * r), Math.round(255 * s)]
    }

    function r(t, e) {
        var i = parseInt(t.substring(1, 3), 16),
            n = parseInt(t.substring(3, 5), 16),
            o = parseInt(t.substring(5, 7), 16),
            r = parseInt(e.substring(1, 3), 16),
            s = parseInt(e.substring(3, 5), 16),
            a = parseInt(e.substring(5, 7), 16),
            l = r - i,
            c = n - s,
            h = o - a,
            d = Math.sqrt(l * l + c * c + h * h);
        return 16 > d
    }

    function s(t) {
        var e, i = parseInt(t.substring(1, 3), 16),
            n = parseInt(t.substring(3, 5), 16),
            o = parseInt(t.substring(5, 7), 16);
        return i = 255 - i, n = 255 - n, o = 255 - o, e = function(t) {
            return ("0" + t.toString(16)).right(2)
        }, "#" + e(i) + e(n) + e(o)
    }
    i.prototype.color_defs = [{
        re: /^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,
        example: ["rgb(123, 234, 45)", "rgb(255,234,245)"],
        process: function(t) {
            return [parseInt(t[1], 10), parseInt(t[2], 10), parseInt(t[3], 10)]
        }
    }, {
        re: /^(\w{2})(\w{2})(\w{2})$/,
        example: ["#00ff00", "336699"],
        process: function(t) {
            return [parseInt(t[1], 16), parseInt(t[2], 16), parseInt(t[3], 16)]
        }
    }, {
        re: /^(\w{1})(\w{1})(\w{1})$/,
        example: ["#fb0", "f0f"],
        process: function(t) {
            return [parseInt(t[1] + t[1], 16), parseInt(t[2] + t[2], 16), parseInt(t[3] + t[3], 16)]
        }
    }, {
        re: /^rgba\(\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*([\d]{0,1})(\.{1}\d{1,4})*\)$/,
        example: ["rgba(123, 234, 45, 1)", "rgba(255,234,245,0.1)"],
        process: function(t) {
            return [parseInt(t[1], 10), parseInt(t[2], 10), parseInt(t[3], 10)]
        }
    }], i.prototype.simple_colors = {
        aliceblue: "f0f8ff",
        antiquewhite: "faebd7",
        aqua: "00ffff",
        aquamarine: "7fffd4",
        azure: "f0ffff",
        beige: "f5f5dc",
        bisque: "ffe4c4",
        black: "000000",
        blanchedalmond: "ffebcd",
        blue: "0000ff",
        blueviolet: "8a2be2",
        brown: "a52a2a",
        burlywood: "deb887",
        cadetblue: "5f9ea0",
        chartreuse: "7fff00",
        chocolate: "d2691e",
        coral: "ff7f50",
        cornflowerblue: "6495ed",
        cornsilk: "fff8dc",
        crimson: "dc143c",
        cyan: "00ffff",
        darkblue: "00008b",
        darkcyan: "008b8b",
        darkgoldenrod: "b8860b",
        darkgray: "a9a9a9",
        darkgreen: "006400",
        darkkhaki: "bdb76b",
        darkmagenta: "8b008b",
        darkolivegreen: "556b2f",
        darkorange: "ff8c00",
        darkorchid: "9932cc",
        darkred: "8b0000",
        darksalmon: "e9967a",
        darkseagreen: "8fbc8f",
        darkslateblue: "483d8b",
        darkslategray: "2f4f4f",
        darkturquoise: "00ced1",
        darkviolet: "9400d3",
        deeppink: "ff1493",
        deepskyblue: "00bfff",
        dimgray: "696969",
        dodgerblue: "1e90ff",
        feldspar: "d19275",
        firebrick: "b22222",
        floralwhite: "fffaf0",
        forestgreen: "228b22",
        fuchsia: "ff00ff",
        gainsboro: "dcdcdc",
        ghostwhite: "f8f8ff",
        gold: "ffd700",
        goldenrod: "daa520",
        gray: "808080",
        green: "008000",
        greenyellow: "adff2f",
        honeydew: "f0fff0",
        hotpink: "ff69b4",
        indianred: "cd5c5c",
        indigo: "4b0082",
        ivory: "fffff0",
        khaki: "f0e68c",
        lavender: "e6e6fa",
        lavenderblush: "fff0f5",
        lawngreen: "7cfc00",
        lemonchiffon: "fffacd",
        lightblue: "add8e6",
        lightcoral: "f08080",
        lightcyan: "e0ffff",
        lightgoldenrodyellow: "fafad2",
        lightgrey: "d3d3d3",
        lightgreen: "90ee90",
        lightpink: "ffb6c1",
        lightsalmon: "ffa07a",
        lightseagreen: "20b2aa",
        lightskyblue: "87cefa",
        lightslateblue: "8470ff",
        lightslategray: "778899",
        lightsteelblue: "b0c4de",
        lightyellow: "ffffe0",
        lime: "00ff00",
        limegreen: "32cd32",
        linen: "faf0e6",
        magenta: "ff00ff",
        maroon: "800000",
        mediumaquamarine: "66cdaa",
        mediumblue: "0000cd",
        mediumorchid: "ba55d3",
        mediumpurple: "9370d8",
        mediumseagreen: "3cb371",
        mediumslateblue: "7b68ee",
        mediumspringgreen: "00fa9a",
        mediumturquoise: "48d1cc",
        mediumvioletred: "c71585",
        midnightblue: "191970",
        mintcream: "f5fffa",
        mistyrose: "ffe4e1",
        moccasin: "ffe4b5",
        navajowhite: "ffdead",
        navy: "000080",
        oldlace: "fdf5e6",
        olive: "808000",
        olivedrab: "6b8e23",
        orange: "ffa500",
        orangered: "ff4500",
        orchid: "da70d6",
        palegoldenrod: "eee8aa",
        palegreen: "98fb98",
        paleturquoise: "afeeee",
        palevioletred: "d87093",
        papayawhip: "ffefd5",
        peachpuff: "ffdab9",
        peru: "cd853f",
        pink: "ffc0cb",
        plum: "dda0dd",
        powderblue: "b0e0e6",
        purple: "800080",
        red: "ff0000",
        rosybrown: "bc8f8f",
        royalblue: "4169e1",
        saddlebrown: "8b4513",
        salmon: "fa8072",
        sandybrown: "f4a460",
        seagreen: "2e8b57",
        seashell: "fff5ee",
        sienna: "a0522d",
        silver: "c0c0c0",
        skyblue: "87ceeb",
        slateblue: "6a5acd",
        slategray: "708090",
        snow: "fffafa",
        springgreen: "00ff7f",
        steelblue: "4682b4",
        tan: "d2b48c",
        teal: "008080",
        thistle: "d8bfd8",
        tomato: "ff6347",
        turquoise: "40e0d0",
        violet: "ee82ee",
        violetred: "d02090",
        wheat: "f5deb3",
        white: "ffffff",
        whitesmoke: "f5f5f5",
        yellow: "ffff00",
        yellowgreen: "9acd32"
    }, i.prototype.parseColor = function(t) {
        var e, i, n, o, r;
        for (e = 0; e < this.color_defs.length; e++)
            if (i = this.color_defs[e].re, n = this.color_defs[e].process, o = i.exec(t)) return r = n(o), this.r = r[0], this.g = r[1], this.b = r[2], this.ok = !0, !0;
        return !1
    }, i.prototype.cleanupRGB = function() {
        this.r = this.r < 0 || TradingView.isNaN(this.r) ? 0 : this.r > 255 ? 255 : this.r, this.g = this.g < 0 || TradingView.isNaN(this.g) ? 0 : this.g > 255 ? 255 : this.g, this.b = this.b < 0 || TradingView.isNaN(this.b) ? 0 : this.b > 255 ? 255 : this.b
    }, i.prototype.toRGB = function() {
        return "rgb(" + this.r + ", " + this.g + ", " + this.b + ")"
    }, i.prototype.toHex = function() {
        var t = this.r.toString(16),
            e = this.g.toString(16),
            i = this.b.toString(16);
        return 1 === t.length && (t = "0" + t), 1 === e.length && (e = "0" + e), 1 === i.length && (i = "0" + i), "#" + t + e + i
    }, i.prototype.grayChannel = function() {
        var t = [.199, .687, .114],
            e = t[0] * this.r + t[1] * this.g + t[2] * this.b;
        return e
    }, i.prototype.blackWhiteContrast = function() {
        return this.grayChannel() < 150 ? "white" : "black"
    }, i.prototype.darken = function(t) {
        var e = n(this.r, this.g, this.b),
            i = o(e[0], e[1], e[2] - t / 100);
        return this.r = i[0], this.g = i[1], this.b = i[2], this.cleanupRGB(), this
    }, e.RGBColor = i, e.rgbToHsl = n, e.hslToRgb = o, e.colorsAreSimilar = r, e.invertColor = s
}, function(t, e) {
    "use strict";

    function i(t) {
        this._data = t
    }
    i.prototype.draw = function(t, e) {
        var i, n, o, r, s, a, l, c, h, d, u, p, f, _, g, m, v, y, w, b;
        this._data.visible && (i = e.fontSize, t.font = e.font, n = e.tickLength, o = e.borderSize, r = e.paddingTop, s = e.paddingBottom, a = e.paddingInner, l = e.paddingOuter, c = Math.ceil(e.widthCache.measureText(t, this._data.text)), h = e.baselineOffset, t.strokeStyle = this._data.borderColor, t.fillStyle = this._data.background, t.lineWidth = 1, d = e.fontSize + r + s, u = o + c + a + l + n, p = this._data.coordinate, f = p - Math.floor(i / 2) - r - .5, _ = f + d, g = e.isLeft ? e.width - o - .5 : .5, m = g, this._data.text && (e.isLeft ? (m = g - u, v = g - n, y = m + l) : (m = g + u, v = g + n, y = g + o + n + a), t.beginPath(), t.moveTo(g, f), t.lineTo(m, f), t.lineTo(m, _), t.lineTo(g, _), t.fill(), t.beginPath(), t.strokeStyle = this._data.color, t.moveTo(g, p), t.lineTo(v, p), t.stroke(), t.textAlign = "left", t.fillStyle = this._data.color, t.fillText(this._data.text, y, _ - s - h)), this._data.secondLine && (w = Math.ceil(e.widthCache.measureText(t, this._data.secondLine)), b = w + a + l, t.fillStyle = this._data.background, this._data.text && (f += d + 1, _ += d + 1), e.isLeft ? (m = Math.min(m, e.width - n), g = m + b, y = m + l) : (g = Math.max(m - b, o), m = g + b, y = g + a), t.beginPath(), t.moveTo(g, f), t.lineTo(m, f), t.lineTo(m, _), t.lineTo(g, _), t.fill(), t.textAlign = "left", t.fillStyle = this._data.color, t.fillText(this._data.secondLine, y, _ - s - h)))
    }, i.prototype.height = function(t, e) {
        var i = t.fontSize + t.paddingTop + t.paddingBottom;
        return this._data.secondLine && e ? 2 * i + 1 : i
    }, t.exports = i
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        r.call(this), this._series = t, this._model = e, this._items.push(new s($.t("Open", {
            context: "in_legend"
        }), "")), this._items.push(new s($.t("High", {
            context: "in_legend"
        }), "")), this._items.push(new s($.t("Low", {
            context: "in_legend"
        }), "")), this._items.push(new s($.t("Close", {
            context: "in_legend"
        }), "")), this._invalidated = !0, this.update()
    }
    var o = i(64),
        r = o.DataWindowView,
        s = o.DataWindowItem,
        a = i(61),
        l = a.invertColor,
        c = a.colorsAreSimilar,
        h = a.RGBColor;
    inherit(n, r), n.prototype.update = function() {
        this._invalidated = !0
    }, n.prototype._updateImpl = function() {
        var t, e, i, n, o, r, s, a, d, u, p, f;
        if (this._series.symbolInfo() ? (this._header = [this._series.symbolInfo().name, TradingView.translatedIntervalString(this._series.interval()), this._series.symbolInfo().exchange].join(", "), this._title = this._series.symbolInfo().description) : this._header = this._series.symbol(), this._items[0].setValue($.t("n/a")), this._items[1].setValue($.t("n/a")), this._items[2].setValue($.t("n/a")), this._items[3].setValue($.t("n/a")), !this._model.timeScale().isEmpty() && 0 !== this._series.bars().size() && (t = this._series.barColorer(), e = this._series.data().size() - 1, i = this._model.crossHairSource().appliedIndex(), n = isNumber(i) ? this._series.nearestIndex(i, TradingView.SEARCH_NEAREST_LEFT) : this._series.nearestIndex(e, TradingView.SEARCH_NEAREST_LEFT), void 0 !== n))
            for (o = this._series.data().valueAt(n), r = this._series.formatter(), this._items[0].setValue(r.format(o[TradingView.OPEN_PLOT])), this._items[1].setValue(r.format(o[TradingView.HIGH_PLOT])), this._items[2].setValue(r.format(o[TradingView.LOW_PLOT])), this._items[3].setValue(r.format(o[TradingView.CLOSE_PLOT])), s = t.barStyle(n, !1), a = s.barColor, d = this._series.model().paneForSource(this._series), u = d._properties.background.value(), p = new h(a).toHex(), c(p, u) && (a = l(p)), f = 0; 4 > f; f++) this._items[f].setColor(a)
    }, n.prototype.items = function() {
        return this._invalidated && (this._updateImpl(), this._invalidated = !1), this._items
    }, n.prototype.dump = function() {
        return {
            header: this._header,
            items: this._items
        }
    }, n.prototype.additional = function() {
        return this._series.dataPoweredBy ? "(Data Provided by " + this._series.dataPoweredBy + ")" : void 0
    }, t.exports = n
}, function(t, e) {
    "use strict";

    function i(t, e) {
        this.m_title = t, this.m_value = e, this._visible = !0, this._color = void 0
    }

    function n() {
        this._header = "", this._title = "", this._items = []
    }
    i.prototype.title = function() {
        return this.m_title
    }, i.prototype.text = function() {
        return this.m_value
    }, i.prototype.visible = function() {
        return this._visible
    }, i.prototype.color = function() {
        return this._color
    }, i.prototype.setVisible = function(t) {
        this._visible = t
    }, i.prototype.setValue = function(t) {
        this.m_value = t
    }, i.prototype.setColor = function(t) {
        this._color = t
    }, i.prototype.value = function() {
        return this.m_value
    }, n.prototype.header = function() {
        return this._header
    }, n.prototype.title = function() {
        return this._title
    }, n.prototype.items = function() {
        return this._items
    }, n.prototype.update = function() {}, e.DataWindowItem = i, e.DataWindowView = n
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(t, e) {
            this.m_series = t, this.m_model = e, this.m_bars = [], this._invalidated = !0
        }

        function o(t, e) {
            n.call(this, t, e)
        }

        function r(t, e) {
            n.call(this, t, e)
        }

        function s(t, e) {
            n.call(this, t, e)
        }

        function a(t, e) {
            n.call(this, t, e)
        }

        function l(t, e, i) {
            this.m_series = t, this.m_priceSource = e, this.m_model = i, this.m_items = [], this._barGetter = {
                open: function(t) {
                    return t[TradingView.OPEN_PLOT]
                },
                high: function(t) {
                    return t[TradingView.HIGH_PLOT]
                },
                low: function(t) {
                    return t[TradingView.LOW_PLOT]
                },
                close: function(t) {
                    return t[TradingView.CLOSE_PLOT]
                },
                hl2: function(t) {
                    return (t[TradingView.HIGH_PLOT] + t[TradingView.LOW_PLOT]) / 2
                },
                hlc3: function(t) {
                    return (t[TradingView.HIGH_PLOT] + t[TradingView.LOW_PLOT] + t[TradingView.CLOSE_PLOT]) / 3
                },
                ohlc4: function(t) {
                    return (t[TradingView.OPEN_PLOT] + t[TradingView.HIGH_PLOT] + t[TradingView.LOW_PLOT] + t[TradingView.CLOSE_PLOT]) / 4
                }
            }[this.m_priceSource]
        }

        function c(t, e, i) {
            l.call(this, t, e, i), this._invaidated = !0
        }

        function h(t, e, i) {
            l.call(this, t, e, i), this._invaidated = !0
        }
        var d = i(66).SelectionRenderer,
            u = i(67),
            p = i(68),
            f = p.PaneRendererBars,
            _ = p.PaneRendererLine,
            g = p.PaneRendererArea,
            m = p.PaneRendererCandles,
            v = i(71),
            y = i(72);
        n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype._updateImpl = function() {
            var e, i, n, o, r, s, a, l, c, h, d, p, f, _, g, m, v = this;
            if (this.m_bars = [], !this.m_model.timeScale().isEmpty() && !this.m_series.priceScale().isEmpty() && (e = this.m_model.timeScale().visibleBars(), !e.isEmpty() && 0 !== this.m_series.bars().size())) {
                for (i = this.m_series.nearestIndex(e.firstBar(), TradingView.SEARCH_NEAREST_RIGHT), n = this.m_series.nearestIndex(e.lastBar(), TradingView.SEARCH_NEAREST_LEFT); n >= i && (o = this.m_series.bars().valueAt(i), void 0 === o); i++);
                if (!(i > n) && (e = this.m_series.bars().range(i, n), s = this.m_series.priceScale(), a = s.properties().percentage.value(), l = this.m_series.barColorer(), c = {}, e.each(function(t, e) {
                        var i, n;
                        void 0 !== e[TradingView.OPEN_PLOT] && void 0 !== e[TradingView.HIGH_PLOT] && void 0 !== e[TradingView.LOW_PLOT] && void 0 !== e[TradingView.CLOSE_PLOT] && (void 0 === r && (r = e[TradingView.CLOSE_PLOT]), i = {}, i.time = Math.round(t), a ? (i.open = 100 * (e[TradingView.OPEN_PLOT] - r) / r, i.high = 100 * (e[TradingView.HIGH_PLOT] - r) / r, i.low = 100 * (e[TradingView.LOW_PLOT] - r) / r, i.close = 100 * (e[TradingView.CLOSE_PLOT] - r) / r) : (i.open = e[TradingView.OPEN_PLOT], i.high = e[TradingView.HIGH_PLOT], i.low = e[TradingView.LOW_PLOT], i.close = e[TradingView.CLOSE_PLOT]), c.value = e, n = e[TradingView.STYLE_PLOT] ? e[TradingView.STYLE_PLOT] : l.barStyle(t, !1, c), e[TradingView.STYLE_PLOT] = n, c.previousValue = e, i.color = n.barColor, i.borderColor = n.barBorderColor, i.wickColor = n.barWickColor, i.hollow = n.isBarHollow, v.m_bars.push(i))
                    }, this), s.barPricesToCoordinates(this.m_bars), this.m_model.timeScale().barIndexesToCoordinates(this.m_bars), this.m_series === this.m_model.selectedSource()))
                    for (h = y(i, n), this._selectionData = {
                        points: []
                    }, this._selectionData.hittestResult = u.REGULAR, d = 0; d < h.length; d++) p = h[d], f = this.m_series.bars().valueAt(p), f && (_ = .5 * (f[TradingView.OPEN_PLOT] + f[TradingView.CLOSE_PLOT]), s.properties().percentage.value() && (_ = 100 * (_ - r) / r), g = this.m_model.timeScale().indexToCoordinate(p), m = this.m_series.priceScale().priceToCoordinate(_), this._selectionData.points.push(new t.Point(g, m)))
            }
        }, n.prototype.items = function() {
            return this.m_bars
        }, n.prototype.dump = function() {
            var t = {};
            return t.bars = this.m_bars, t
        }, inherit(o, n), o.prototype.renderer = function() {
            var t, e;
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), t = {}, t.bars = this.m_bars, t.barSpacing = this.m_model.timeScale().barSpacing(), t.dontDrawOpen = this.m_series.properties().barStyle.dontDrawOpen.value(), e = new v, e.append(new f(t)), this.m_series === this.m_model.selectedSource() && e.append(new d(this._selectionData)), e
        }, inherit(r, n), r.prototype.renderer = function() {
            var t, e;
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), t = {}, t.bars = this.m_bars, t.barSpacing = this.m_model.timeScale().barSpacing(), t.drawWick = this.m_series.properties().candleStyle.drawWick.value(), t.drawBorder = this.m_series.properties().candleStyle.drawBorder.value(), t.borderColor = this.m_series.properties().candleStyle.borderColor.value(), t.wickColor = this.m_series.properties().candleStyle.wickColor.value(), e = new v, e.append(new m(t)), this.m_series === this.m_model.selectedSource() && e.append(new d(this._selectionData)), e
        }, inherit(s, n), s.prototype.renderer = function() {
            var t, e;
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), t = {}, t.bars = this.m_bars, t.barSpacing = this.m_model.timeScale().barSpacing(), t.drawWick = this.m_series.properties().haStyle.drawWick.value(), t.drawBorder = this.m_series.properties().haStyle.drawBorder.value(), t.borderColor = this.m_series.properties().haStyle.borderColor.value(), t.wickColor = this.m_series.properties().haStyle.wickColor.value(), e = new v, e.append(new m(t)), this.m_series === this.m_model.selectedSource() && e.append(new d(this._selectionData)), e
        }, inherit(a, n), a.prototype.renderer = function() {
            var t, e;
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), t = {}, t.bars = this.m_bars, t.barSpacing = this.m_model.timeScale().barSpacing(), t.drawWick = this.m_series.properties().hollowCandleStyle.drawWick.value(), t.drawBorder = this.m_series.properties().hollowCandleStyle.drawBorder.value(), t.borderColor = this.m_series.properties().hollowCandleStyle.borderColor.value(), t.wickColor = this.m_series.properties().hollowCandleStyle.wickColor.value(), e = new v, e.append(new m(t)), this.m_series === this.m_model.selectedSource() && e.append(new d(this._selectionData)), e
        }, l.prototype.update = function() {
            var e, i, n, o, r, s, a, l, c, h, d, p, f, _, g, m, v;
            if (this.m_items = [], !this.m_model.timeScale().isEmpty() && this.m_series.priceScale() && !this.m_series.priceScale().isEmpty() && (e = this.m_model.timeScale().visibleBars(), !e.isEmpty() && 0 !== this.m_series.bars().size())) {
                for (i = this.m_series.nearestIndex(e.firstBar(), TradingView.SEARCH_NEAREST_RIGHT), n = this.m_series.nearestIndex(e.lastBar(), TradingView.SEARCH_NEAREST_LEFT), e = this.m_series.bars().range(i, n), o = this, s = o.m_series.priceScale(), a = {
                    color: this.m_series.properties().lineStyle.color.value()
                }, l = s.properties().percentage.value(), c = e._start; c < e._end; ++c) h = e._indexAt(c), d = e._valueAt(c), p = this._barGetter(d), void 0 !== p && null !== p && (void 0 === r && (r = p), l && (p = 100 * (p - r) / r), f = new t.Point(h, p), f.style = a, o.m_items.push(f));
                if (s.pointsArrayToCoordinates(o.m_items), o.m_model.timeScale().indexesToCoordinates(o.m_items), this.m_series === this.m_model.selectedSource())
                    for (_ = y(i, n), this._selectionData = {
                        points: []
                    }, this._selectionData.hittestResult = u.REGULAR, c = 0; c < _.length; c++) h = _[c], g = this.m_series.data().valueAt(h), p = this._barGetter(g), s.properties().percentage.value() && (p = 100 * (p - r) / r), m = this.m_model.timeScale().indexToCoordinate(h), v = this.m_series.priceScale().priceToCoordinate(p), this._selectionData.points.push(new t.Point(m, v))
            }
        }, inherit(c, l), c.prototype.update = function() {
            this._invalidated = !0
        }, c.prototype.renderer = function() {
            var t, e, i, n;
            return this._invalidated && (l.prototype.update.call(this), this._invalidated = !1), t = this.m_series.properties().lineStyle, e = {
                barSpacing: this.m_model.timeScale().barSpacing(),
                items: this.m_items,
                lineColor: t.color.value(),
                lineStyle: t.linestyle.value(),
                withMarkers: t.styleType.value() === TradingView.Series.STYLE_LINE_TYPE_MARKERS,
                withSteps: t.styleType.value() === TradingView.Series.STYLE_LINE_TYPE_STEP,
                lineWidth: t.linewidth.value(),
                simpleMode: !0
            }, i = new _(e), this.m_series === this.m_model.selectedSource() ? (n = new v, n.append(i), n.append(new d(this._selectionData))) : n = i, n
        }, inherit(h, l), h.prototype.update = function() {
            this._invalidated = !0
        }, h.prototype.renderer = function() {
            var t, e, i;
            return this._invalidated && (l.prototype.update.call(this), this._invalidated = !1), t = {}, t.simpleMode = !1, t.barSpacing = this.m_model.timeScale().barSpacing(), t.items = this.m_items, t.lineColor = this.m_series.properties().areaStyle.linecolor.value(), t.lineStyle = this.m_series.properties().areaStyle.linestyle.value(), t.lineWidth = this.m_series.properties().areaStyle.linewidth.value(), e = this.m_series.properties().areaStyle.transparency.value(), t.isSeries = !0, t.color1 = TradingView.generateColor(this.m_series.properties().areaStyle.color1.value(), e), t.color2 = TradingView.generateColor(this.m_series.properties().areaStyle.color2.value(), e), t.bottom = this.m_series.priceScale().height(), i = new v, i.append(new g(t)), this.m_series === this.m_model.selectedSource() && i.append(new d(this._selectionData)), i
        }, e.SeriesBarsPaneView = o, e.SeriesCandlesPaneView = r, e.SeriesHollowCandlesPaneView = a, e.SeriesLinePaneView = c, e.SeriesAreaPaneView = h, e.SeriesHeikenAshiPaneView = s
    }).call(e, i(40))
}, function(t, e, i) {
    "use strict";

    function n(t) {
        this._data = t
    }

    function o(t, e) {
        this._data = t, this._model = e, this.radius = this._data.radius || o.OUTER_RADIUS
    }

    function r(t) {
        n.call(this, t)
    }
    var s = i(67),
        a = i(68).PaneRendererArrowsUpDown;
    n.RADIUS = 3.5, n.prototype.tolerance = 2, n.prototype.draw = function(t) {
        function e(t) {
            return void 0 === t.x || TradingView.isNaN(t.x) || null === t.x || void 0 === t.y || TradingView.isNaN(t.y) || null === t.y
        }
        var i, n, o;
        if (this._data)
            for (t.strokeStyle = "#6B6B6B", t.fillStyle = "#D6D6D6", i = this._data.vertOffset || 0, n = 0; n < this._data.points.length; n++) o = this._data.points[n], e(o) || this._drawMarker(t, o, i)
    }, n.prototype._drawMarker = function(t, e, i) {
        t.beginPath(), t.arc(e.x + .5, e.y + .5 + i, n.RADIUS, 0, 2 * Math.PI, !0), t.closePath(), t.fill(), t.stroke()
    }, n.prototype.hitTest = function(t) {
        var e, i, o;
        if (!this._data) return null;
        for (e = 0; e < this._data.points.length; e++)
            if (i = this._data.points[e], o = i.substract(t).length(), o <= n.RADIUS + this.tolerance) return new s(this._data.hittestResult, i.data);
        return null
    }, o.OUTER_RADIUS = TradingView.isMobile.any() ? 16 : 8, o.prototype.tolerance = 2, o.prototype.draw = function(t) {
        var e, i, n, o, r, s, a, l, c, h = this._data.currentPoint,
            d = this._data.outerStrokeWidth || 1;
        for (e = 0; e < this._data.points.length; e++) i = this._data.points[e], n = i.substract(h).length(), o = TradingView.isInteger(i.data) && this._data.linePointBeingEdited === i.data, r = this.radius, s = this._data.strokeWidth || 2, a = n <= r + this.tolerance, l = a ? 1 : 0, r += l, s += l, o || (i.square ? (t.fillStyle = this._data.backgroundColor, t.fillRect(i.x - r, i.y - r, 2 * r, 2 * r), t.fillStyle = this._data.color, c = r - d, t.fillRect(i.x - c, i.y - c, 2 * c, 2 * c), c = r - d - s, t.fillStyle = this._data.backgroundColor, t.fillRect(i.x - c, i.y - c, 2 * c, 2 * c)) : (t.beginPath(), t.arc(i.x, i.y, r, 0, 2 * Math.PI, !0), t.closePath(), t.fillStyle = this._data.backgroundColor, t.fill(), t.beginPath(), t.arc(i.x, i.y, r - d, 0, 2 * Math.PI, !0), t.closePath(), t.fillStyle = this._data.color, t.fill(), t.beginPath(), t.arc(i.x, i.y, r - d - s, 0, 2 * Math.PI, !0), t.closePath(), t.fillStyle = this._data.backgroundColor, t.fill()))
    }, o.prototype.hitTest = function(t) {
        var e, i, n, o;
        for (e = 0; e < this._data.points.length; e++)
            if (i = this._data.points[e], n = i.substract(t).length(), o = n <= this.radius + this.tolerance) return new s(this._data.hittestResult, i.data);
        return null
    }, inherit(r, n), r.prototype._drawMarker = function(t, e, i) {
        var o = e.isUp ? 1 : -1,
            r = a.prototype._calculateVerticalOffset(this._data.barSpacing),
            s = a.prototype._calculateMinHeight(this._data.barSpacing),
            l = i + o * r + o * s;
        t.beginPath(), t.arc(e.x + .5, e.y + .5 + l, n.RADIUS, 0, 2 * Math.PI, !0), t.closePath(), t.fill(), t.stroke()
    }, e.SelectionRenderer = n, e.LineAnchor = o, e.SelectionRendererArrowsUpDown = r
}, function(t, e) {
    "use strict";

    function i(t, e, i) {
        this._result = t, this._data = e, this._eraseMarker = i
    }
    i.MOVEPOINT_BACKGROUND = 1, i.REGULAR = 2, i.MOVEPOINT = 3, i.CHANGEPOINT = 4, i.CUSTOM = 5, i.prototype.result = function() {
        return this._result
    }, i.prototype.data = function() {
        return this._data
    }, i.prototype.eraseMarker = function() {
        return this._eraseMarker
    }, t.exports = i
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(t) {
            this.bars = t.bars, this.barSpacing = t.barSpacing, this.barWidth = B.optimalBarWidth(t.barSpacing), this.barLineWidth = Math.max(1, Math.round(this.barWidth)), this.dontDrawOpen = t.dontDrawOpen
        }

        function o(t) {
            this.bars = t.bars, this.barWidth = t.barWidth, this.barLineWidth = 1
        }

        function r(t) {
            this.bars = t.bars, this.barSpacing = t.barSpacing, this.barLineWidth = Math.max(1, B.optimalBarWidth(t.barSpacing))
        }

        function s(t) {
            this.bars = t.bars, this.barSpacing = t.barSpacing, this.blockSize = t.blockSize, this.barWidth = t.barSpacing
        }

        function a(t) {
            this.items = t.items, this.barSpacing = t.barSpacing, this.histogramBase = t.histogramBase, this.lineColor = t.lineColor, this.lineWidth = t.lineWidth
        }

        function l(t) {
            this.items = t.items, this.barSpacing = t.barSpacing, this.histogramBase = t.histogramBase, this.lineColor = t.lineColor, this.lineWidth = t.lineWidth
        }

        function c(t) {
            this.items = t.items, this._simpleMode = t.simpleMode, this.barSpacing = t.barSpacing, this.lineColor = t.lineColor, this.lineWidth = t.lineWidth, this.lineStyle = t.lineStyle, this.withMarkers = t.withMarkers, this.withSteps = t.withSteps, this.hittest = t.hittest, this.ignorePaletteLineWidth = t.ignorePaletteLineWidth, this.forceLineColor = !!t.forceLineColor
        }

        function h(t) {
            t.forceLineColor = !1, c.call(this, t), this.color1 = t.color1, this.color2 = t.color2, this.bottom = t.bottom, this.isSeries = !!t.isSeries, this._simpleMode = t.simpleMode
        }

        function d(t) {
            this._data = t, this.bars = t.bars, this._barWidth = B.optimalBarWidth(t.barSpacing), this._barBorderWidth = 1
        }

        function u(t) {
            this.items = t.items, this.barSpacing = t.barSpacing, this.lineColor = t.lineColor, this.lineWidth = t.lineWidth, this.lineStyle = t.lineStyle
        }

        function p(t) {
            this.items = t.items, this.barSpacing = t.barSpacing, this.lineColor = t.lineColor || t.color, this.radius = t.lineWidth || t.height / 2, this.vertOffset = t.vertOffset || 0
        }

        function f(t, e, i, n) {
            this.x = t, this.y = e, this.height = i, this.isUp = n
        }

        function _(t) {
            this.items = t.items, this.barSpacing = t.barSpacing, this.colorUp = t.colorup, this.colorDn = t.colordown, this.colorBorder = t.colorBorder, this.width = this._calculateWidth(t.barSpacing), this.minHeight = t.minHeight, this.vertOffset = this._calculateVerticalOffset(t.barSpacing)
        }

        function g(t) {
            this.items = t.items, this.height = t.height || t.width, this.width = t.width || t.height, this._color = t.color, this._borderColor = t.borderColor, this._vertOffset = t.vertOffset || 0, t.textCache && (this._textCache = t.textCache, this._textColor = t.textColor, this._textVertOffset = this._vertOffset > 0 ? this.height : -this.height, this._textImageWidth = this._textCache.textImageWidth, this._textImageHeight = this._textCache.textImageHeight)
        }

        function m(t) {
            g.call(this, t), this.ch = t["char"][0] || " ", this.fontFamily = t.fontFamily || "Arial", this._charCache = new N(this.ch, !1, !1, this.fontFamily, this.height)
        }

        function v(t) {
            g.call(this, t)
        }

        function y(t) {
            g.call(this, t)
        }

        function w(t) {
            g.call(this, t)
        }

        function b(t) {
            g.call(this, t)
        }

        function S(t) {
            g.call(this, t)
        }

        function T(t) {
            g.call(this, t)
        }

        function x(t) {
            g.call(this, t)
        }

        function C(t) {
            g.call(this, t), this.width = this._calculateWidth(t.barSpacing), this._isUp = !1
        }

        function P(t) {
            C.call(this, t), this._isUp = !0
        }

        function k(t) {
            C.call(this, t), this._isUp = !1
        }

        function I(t, e) {
            g.call(this, t), this._isUp = e, this._stepX = Math.round(this.height / 2 * .65) + .5, this._stepY = Math.round(this.height / 2) + .5, this._textCache ? (this._padding = this._stepX / 2, this._shapeWidth = this._textImageWidth + 2 * this._stepX, this._shapeHeight = this._textImageHeight + 2 * this._padding + this._stepY, 0 === this._vertOffset ? this._isUp ? this._textVertOffset = this._stepY + this._padding + this._textImageHeight : this._textVertOffset = -this._stepY - this._padding : this._textVertOffset = this._vertOffset > 0 ? this._stepY + this._padding : -this._stepY - this._padding) : (this._padding = 0, this._shapeWidth = 2 * this._stepX, this._shapeHeight = 2.5 * this._stepY)
        }

        function E(t) {
            I.call(this, t, !0)
        }

        function L(t) {
            I.call(this, t, !1)
        }

        function V(t) {
            g.call(this, t)
        }

        function M(t) {
            g.call(this, t)
        }

        function A(t) {
            this._items = t.items, this._y = t.y, this._h = t.h, this._w = t.w
        }

        function D(e) {
            var i, n, o, r, s, a, l, c, h, d;
            e.point2 || (e.point2 = e.point1), i = e.point1.x, n = e.point1.y, o = e.point2.x, r = e.point2.y, s = 16, a = s - 6, l = s - 6, c = o >= i ? i - a : i + a, h = r >= n ? n + l : n - l, c -= 1, h -= 3, d = {
                items: [new t.Point(c, h)],
                "char": [String.fromCharCode("0xF017").toUpperCase()],
                color: e.color,
                vertOffset: 0,
                height: s,
                fontFamily: "FontAwesome"
            }, m.call(this, d)
        }

        function O(t, e) {
            this._items = t.items, this._color = t.color, this._orderArrow = t.orderArrow, this._exitLineWidth = t.exitLineWidth, this._priceArrow = t.priceArrow, this._text = t.text, this._textWidths = e
        }

        function R(t) {
            this.data = t
        }

        function $(t) {
            this._data = t
        }
        var B = i(69),
            z = i(67),
            N = i(70);
        n.prototype.draw = function(t) {
            var e, i, n;
            for (t.save(), t.translate(.5, .5), i = 0; i < this.bars.length; ++i) n = this.bars[i], e !== n.color && (t.fillStyle = n.color, e = n.color), t.fillRect(Math.round(n.time - this.barLineWidth / 2), Math.round(n.high - this.barWidth / 2), Math.round(this.barLineWidth), Math.round(n.low - n.high + this.barWidth)), this.barLineWidth < this.barSpacing - 1 && (this.dontDrawOpen || t.fillRect(Math.round(n.time - 1.5 * this.barWidth), Math.round(n.open - this.barWidth / 2), Math.round(1.5 * this.barWidth), Math.round(this.barWidth)), t.fillRect(Math.round(n.time), Math.round(n.close - this.barWidth / 2), Math.round(1.5 * this.barWidth), Math.round(this.barWidth)));
            t.restore()
        }, n.prototype.hitTest = function(t) {
            var e, i, n, o, r = this.bars,
                s = .5 * this.barSpacing;
            if (0 === r.length) return null;
            if (t.x < r[0].time - s) return null;
            if (t.x > r[r.length - 1].time + s) return null;
            for (e = null, i = 0; i < r.length; ++i)
                if (n = r[i], t.x <= n.time + s) {
                    e = n;
                    break
                }
            return o = B.selectionTolerance(this.barLineWidth), e && e.high - o <= t.y && t.y <= e.low + o ? new z(z.REGULAR) : null
        }, o.prototype.draw = function(t) {
            var e, i, n, o, r, s, a;
            for (t.save(), t.lineCap = "butt", t.translate(.5, .5), t.lineWidth = this.barLineWidth, e = this.barWidth / 2, i = 0; i < this.bars.length; ++i) n = this.bars[i], o = n.exactTime - e, r = n.exactTime + e - o, s = Math.round(n.high), a = n.low - n.high === 0 ? 1 : Math.round(n.low - n.high), t.fillStyle = n.borderColor, t.fillRect(o, s, r, a), t.fillStyle = n.color, t.fillRect(o + this.barLineWidth, s + this.barLineWidth, r - 2 * this.barLineWidth, a - 2 * this.barLineWidth);
            t.restore()
        }, o.prototype.hitTest = function(t) {
            var e, i, n, o, r = this.bars,
                s = .5 * this.barWidth;
            if (0 === r.length) return null;
            if (t.x < r[0].time - s) return null;
            if (t.x > r[r.length - 1].time + s) return null;
            for (e = null, i = 0; i < r.length; ++i)
                if (n = r[i], t.x <= n.time + s) {
                    e = n;
                    break
                }
            return o = B.selectionTolerance(this.barLineWidth), e && e.high - o <= t.y && t.y <= e.low + o ? new z(z.REGULAR) : null
        }, r.prototype.draw = function(t) {
            var e, i, n;
            for (t.save(), t.lineCap = "square", t.translate(.5, .5), e = 0; e < this.bars.length; ++e) i = this.bars[e], n = Math.round(.5 * this.barLineWidth), i.isTwoColorBar ? (t.fillStyle = i.upColor, t.fillRect(Math.round(i.exactTime - n), Math.round(i.high - n), Math.round(2 * n), Math.round(i.additionalPrice - i.high + n)), t.fillStyle = i.downColor, t.fillRect(Math.round(i.exactTime - n), Math.round(i.additionalPrice), Math.round(2 * n), Math.round(i.low - i.additionalPrice + n))) : (t.fillStyle = i.color, t.fillRect(Math.round(i.exactTime - n), Math.round(i.high - n), Math.round(2 * n), Math.round(i.low - i.high) + 2 * n)), i.combinedWithProjection || (i.isTwoColorBar ? t.fillStyle = i.isUp ? i.downColor : i.upColor : t.fillStyle = i.color, t.fillRect(Math.round(i.exactTime - this.barSpacing + n), Math.round(i.open - n), Math.round(this.barSpacing - 2 * n + 1), Math.round(2 * n)));
            t.restore()
        }, r.prototype.hitTest = function(t) {
            var e, i, n, o, r = this.bars,
                s = .5 * this.barLineWidth;
            if (0 === r.length) return null;
            if (t.x < r[0].time - s) return null;
            if (t.x > r[r.length - 1].time + s) return null;
            for (e = null, i = 0; i < r.length; ++i)
                if (n = r[i], t.x <= n.time + s) {
                    e = n;
                    break
                }
            return o = B.selectionTolerance(.5 * this.barLineWidth), e && e.high - o <= t.y && t.y <= e.low + o ? new z(z.REGULAR) : null
        }, s.prototype.draw = function(t) {
            var e, i, n, o;
            for (t.save(), t.lineCap = "butt",
                     t.translate(.5, .5), e = 0; e < this.bars.length; ++e) {
                for (i = this.bars[e], n = (i.low - i.high) / i.additionalNum, t.beginPath(), o = 0; o < i.additionalNum; o++) i.isUp ? (t.moveTo(Math.round(i.time - .5 * this.barWidth) + .5, i.high + o * n), t.lineTo(Math.round(i.time + .5 * this.barWidth) - .5, i.high + (o + 1) * n), t.moveTo(Math.round(i.time + .5 * this.barWidth) - .5, i.high + o * n), t.lineTo(Math.round(i.time - .5 * this.barWidth) + .5, i.high + (o + 1) * n)) : this.drawEllipse(t, i.time - .45 * this.barWidth + .5, i.high + o * n, Math.round(.9 * this.barWidth), Math.round(n));
                t.strokeStyle = i.color, t.lineWidth = 1, t.stroke()
            }
            t.restore()
        }, s.prototype.drawEllipse = function(t, e, i, n, o) {
            t.save(), t.translate(e + n / 2, i + o / 2), t.scale(n / 2, o / 2), t.moveTo(1, 0), t.arc(0, 0, .95, 0, 2 * Math.PI, !1), t.restore()
        }, s.prototype.hitTest = function(t) {
            var e, i, n, o, r = this.bars,
                s = .5 * this.barSpacing;
            if (0 === r.length) return null;
            if (t.x < r[0].time - s) return null;
            if (t.x > r[r.length - 1].time + s) return null;
            for (e = null, i = 0; i < r.length; ++i)
                if (n = r[i], t.x <= n.time + s) {
                    e = n;
                    break
                }
            return o = B.selectionTolerance(this.barWidth), e && e.high - o <= t.y && t.y <= e.low + o ? new z(z.REGULAR) : null
        }, a.prototype.draw = function(t) {
            var e, i, n, o, r;
            for (t.translate(.5, .5), t.fillStyle = this.lineColor, e = this.lineWidth, i = 0; i < this.items.length; ++i) n = this.items[i], o = n.x, r = n.y, n.style && (t.fillStyle = n.style.color, e = n.style.width), t.fillRect(Math.round(o - .5 * e), r, e, this.histogramBase - r)
        }, a.prototype.hitTest = function(e) {
            var i, n, o, r, s, a = B.selectionTolerance(this.lineWidth);
            for (s = 0; s < this.items.length; ++s)
                if (i = this.items[s], n = i.x, o = i.y, r = t.distanceToSegment(new t.Point(n, o), new t.Point(n, this.histogramBase), new t.Point(e.x, e.y)), r.distance <= a) return new z(z.REGULAR);
            return null
        }, l.prototype.draw = function(t) {
            var e, i, n, o, r, s, a, l, c, h, d, u, p;
            if (0 !== this.items.length) {
                for (e = this.barSpacing, i = this.lineColor, n = this.histogramBase, t.translate(.5, .5), o = {}, r = this.items, s = 0; s < r.length; ++s) a = r[s], l = 0 === s ? null : r[s - 1], c = a.style ? a.style.color : i, h = o[c] || [], h.push({
                    item: a,
                    prev: l
                }), o[c] = h;
                for (c in o) {
                    for (h = o[c], t.fillStyle = c, t.strokeStyle = c, t.lineWidth = 1, t.beginPath(), s = 0; s < h.length; s++) a = h[s].item, d = Math.ceil(a.x - .5 * e), u = Math.ceil(d + e), p = a.y, t.rect(d, p, u - d, n - p);
                    for (t.fill(), t.beginPath(), s = 0; s < h.length; s++) a = h[s].item, d = Math.ceil(a.x - .5 * e), u = Math.ceil(d + e), p = a.y, l = h[s].prev, t.moveTo(u - .5, n), t.lineTo(u - .5, p + .5), t.lineTo(d + .5, p + .5), l && l.y > p && t.lineTo(d + .5, l.y);
                    t.stroke()
                }
            }
        }, l.prototype.hitTest = function(t) {
            var e, i, n, o = .5 * this.barSpacing + this.lineWidth,
                r = t.x - o,
                s = t.x + o,
                a = this.items;
            for (e = a.length; e--;)
                if (i = a[e].x, i >= r && s >= i && (n = a[e].y, t.y >= Math.min(n, this.histogramBase) && t.y <= Math.max(n, this.histogramBase))) return new z(z.REGULAR);
            return null
        }, c.prototype.draw = function(t) {
            t.lineCap = "square", t.lineJoin = this.withMarkers ? "round" : "miter", t.strokeStyle = this.lineColor, t.fillStyle = this.lineColor, t.lineWidth = this.lineWidth, t.lineStyle = this.lineStyle, this._simpleMode ? this._drawSimpleMode(t) : this._drawLines(t)
        }, c.prototype._drawSimpleMode = function(t) {
            var e, i, n, o;
            if (t.beginPath(), this.walkLine(t, this.items), t.stroke(), this.withMarkers) {
                for (e = this.lineWidth + 2, i = 2 * Math.PI, t.beginPath(), o = this.items.length; o--;) n = this.items[o], n && (t.moveTo(n.x, n.y), t.arc(n.x, n.y, e, 0, i));
                t.fill()
            }
        }, c.prototype.walkLine = function(t, e, i, n) {
            var o, r, s, a, l, c, h, d, u, p, f;
            if (e) {
                for (o = .25 * this.barSpacing, h = B.paneRendererCoordinateIsValid, d = 0, u = e.length; u > d; d++)
                    if (p = e[d], h(p.y)) {
                        s = p, r = d;
                        break
                    }
                if (void 0 !== r && s)
                    for (f = this.withSteps && this.lineWidth && this.lineWidth % 2 === 0 ? .5 : 0, d = r, u = e.length; u > d; d++) {
                        if (l = e[d], c = e[d + 1] || {}, h(l.y))
                            if (a && h(a.y)) this.withSteps && t.lineTo(a.x + f, l.y + f), t.lineTo(l.x + f, l.y + f), i && !h(c.y) && t.lineTo(l.x + f, n);
                            else if (c && h(c.y)) i ? (d !== r && t.lineTo(l.x + f, n), t.lineTo(l.x + f, l.y + f)) : t.moveTo(l.x + f, l.y + f);
                            else if (i) {
                                if (0 === d) continue;
                                d !== r && t.lineTo(l.x - o + f, n), t.lineTo(l.x - o + f, l.y + f), t.lineTo(l.x + o + f, l.y + f), t.lineTo(l.x + o + f, n)
                            } else t.moveTo(l.x - o + f, l.y + f), t.lineTo(l.x + o + f, l.y + f);
                        a = l
                    }
            }
        }, c.prototype._drawLines = function(t) {
            function e(e, i, n) {
                s(i.y) && (s(e.y) ? t.lineTo(i.x, i.y) : n && s(n.y) ? t.moveTo(i.x, i.y) : (t.moveTo(i.x - r, i.y), t.lineTo(i.x + r, i.y)))
            }
            var i, n, o, r, s, a, l, c, h, d, u, p, f, _;
            if (this.items.length) {
                for (r = .25 * this.barSpacing, s = B.paneRendererCoordinateIsValid, t.beginPath(), a = this.items[0], a && t.moveTo(a.x, a.y), l = t.strokeStyle, c = t.lineWidth, h = t.lineStyle, d = 1; d < this.items.length; ++d) i = this.items[d - 1], n = this.items[d], o = this.items[d + 1], n.style && !this.forceLineColor ? (u = n.style.color, p = n.style.width, f = n.style.style) : (u = this.lineColor, p = this.lineWidth, f = this.lineStyle), this.ignorePaletteLineWidth && (p = this.lineWidth), _ = u !== l || p !== c || f !== h, _ ? (l = u, c = p, h = f, t.stroke(), t.beginPath(), t.strokeStyle = u, t.lineWidth = p, t.lineStyle = f, f === CanvasEx.LINESTYLE_SOLID ? (t.moveTo(i.x, i.y), e(i, n, o)) : CanvasEx.drawLine(t, i.x, i.y, n.x, n.y)) : e(i, n, o);
                t.stroke()
            }
        }, c.prototype.hitTest = function(e) {
            for (var i, n, o, r, s, a, l, c, h = B.selectionTolerance(this.lineWidth), d = 0, u = this.items.length - 1; u - d > 2;) a = Math.round((u + d) / 2), l = this.items[a], l.x <= e.x ? d = a : u = a;
            for (d = Math.max(1, d - 1), u = Math.min(this.items.length - 1, u + 1), c = d; u >= c; ++c)
                if (i = this.items[c - 1], n = this.items[c], o = i.x, r = n.x, s = t.distanceToSegment(new t.Point(o, i.y), new t.Point(r, n.y), new t.Point(e.x, e.y)), s.distance <= h) return this.hittest ? this.hittest : new z(z.REGULAR);
            return null
        }, inherit(h, c), h.prototype.draw = function(t) {
            var e, i, n, o, r, s, a, l, h, d, u, p;
            if (0 !== this.items.length) {
                for (t.lineCap = "square", t.strokeStyle = this.lineColor, t.lineWidth = this.lineWidth, t.lineStyle = this.lineStyle, t.lineWidth = 1, e = 0; e < this.items.length && !B.paneRendererCoordinateIsValid(this.items[e].y);) e++;
                for (i = this.items.length - 1; i >= 0 && !B.paneRendererCoordinateIsValid(this.items[i].y);) i--;
                if (!(e >= i)) {
                    for (t.translate(.5, .5), n = {}, o = this.items, r = e; i >= r; r++) s = o[r], a = s.style ? s.style.color : this.lineColor, i > r && o[r + 1].style && (l = o[r + 1].style.color, a !== l && (h = n[l] || [], h.push(s), n[l] = h)), d = n[a] || [], d.push(s), n[a] = d;
                    for (a in n) {
                        for (d = n[a], t.beginPath(), u = 0, r = 0; r < d.length; r++) d[r].style && d[r].style.color !== a && (t.moveTo(d[u].x, this.bottom), this.walkLine(t, d.slice(u, r), !0, this.bottom), u = r);
                        t.moveTo(d[u].x, this.bottom), this.walkLine(t, d.slice(u, d.length), !0, this.bottom), t.closePath(), this.isSeries ? (p = t.createLinearGradient(0, 0, 0, this.bottom), p.addColorStop(0, this.color1), p.addColorStop(1, this.color2), t.fillStyle = p, this._simpleMode = !0) : t.fillStyle = a, t.fill()
                    }
                    t.lineWidth = this.lineWidth, c.prototype.draw.call(this, t)
                }
            }
        }, d.prototype.draw = function(t) {
            var e, i, n, o, r, s, a, l, c, h, d, u, p, f, _ = this.bars,
                g = this._data.barSpacing,
                m = this._data.drawWick,
                v = this._data.drawBorder,
                y = this._data.wickColor,
                w = this._barBorderWidth,
                b = this._barWidth;
            if (t.lineCap = "square", t.lineStyle = this._data.lineStyle, 1 > g) {
                if (m) {
                    for (t.strokeStyle = y, t.lineWidth = 1, t.beginPath(), h = _.length; h-- > 0;) d = _[h], t.moveTo(d.time, d.low), t.lineTo(d.time, d.high);
                    t.stroke()
                }
                for (t.lineWidth = 1, u = "", p = !1, t.beginPath(), h = _.length; h-- > 0;) d = _[h], c = d.time, u !== d.color && (p && (t.stroke(), t.beginPath(), p = !1), t.strokeStyle = d.color, u = d.color), t.moveTo(d.time, d.open), t.lineTo(d.time, d.close), p = !0;
                p && t.stroke()
            } else {
                if (_ = _.slice().sort(function(t, e) {
                        return t.color > e.color ? -1 : t.color < e.color ? 1 : 0
                    }), t.translate(.5, .5), t.lineWidth = w, m)
                    for (f = y, t.fillStyle = y, h = _.length; h--;) d = _[h], c = d.time, e = d.open, i = d.high, n = d.low, o = d.close, d.wickColor && d.wickColor !== f && (t.fillStyle = d.wickColor, f = d.wickColor), a = Math.min(e, o), l = Math.max(e, o), d.hollow ? (t.fillRect(c, i, 1, a - i), t.fillRect(c, l, 1, n - l)) : t.fillRect(c, i, 1, n - i);
                if (v)
                    for (h = _.length; h--;) d = _[h], _[h + 1] && d.borderColor === _[h + 1].borderColor || (t.fillStyle = d.borderColor), d.hollow || (c = d.time, e = d.open, o = d.close, r = Math.round(c - b), s = Math.round(c + b), a = Math.min(e, o), l = Math.max(e, o), t.fillRect(r, a, s - r + 1, l - a + 1));
                for (h = _.length; h--;) d = _[h], c = d.time, e = d.open, i = d.high, n = d.low, o = d.close, r = Math.round(c - b), s = Math.round(c + b), a = Math.min(e, o), l = Math.max(e, o), _[h + 1] && d.color === _[h + 1].color || (t.fillStyle = d.color, t.strokeStyle = d.color), d.hollow ? (t.translate(-.5, -.5), t.strokeRect(r + 1, a + 1, s - r, l - a), t.translate(.5, .5)) : (v && (r += 1, a += 1, s -= 1, l -= 1), t.fillRect(r, a, s - r + 1, l - a + 1))
            }
        }, d.prototype.hitTest = function(t) {
            var e, i, n, o, r = this.bars,
                s = .5 * this._data.barSpacing;
            if (0 === r.length) return null;
            if (t.x < r[0].time - s) return null;
            if (t.x > r[r.length - 1].time + s) return null;
            for (e = null, i = 0; i < r.length; ++i)
                if (n = r[i], t.x <= n.time + s) {
                    e = n;
                    break
                }
            return o = B.selectionTolerance(this._barBorderWidth), e && e.high - o <= t.y && t.y <= e.low + o ? this._data.hittest || new z(z.REGULAR) : null
        }, u.prototype.draw = function(t) {
            var e, i, n, o, r, s, a = this.lineWidth,
                l = 3 * this.lineWidth,
                c = !1;
            for (i = 0; i < this.items.length; ++i) n = this.items[i], o = n.x, r = n.y, TradingView.isNaN(o) || TradingView.isNaN(r) || (s = null != n.style ? n.style.color : this.lineColor, s !== e && (e = s, c && t.fill(), t.beginPath(), t.fillStyle = s), t.rect(o - l / 2, r - a / 2, l, a), t.rect(o - a / 2, r - l / 2, a, l), c = !0);
            c && t.fill()
        }, u.prototype.hitTest = function(e) {
            var i, n, o, r, s, a, l = B.selectionTolerance(this.lineWidth);
            for (a = 1; a < this.items.length; ++a)
                if (i = this.items[a - 1], n = this.items[a], o = i.x, r = n.x, s = t.distanceToSegment(new t.Point(o, i.y), new t.Point(r, n.y), new t.Point(e.x, e.y)), s.distance <= l) return new z(z.REGULAR);
            return null
        }, p.prototype.draw = function(t) {
            var e, i, n, o, r, s, a = 2 * Math.PI,
                l = this.radius,
                c = !1;
            for (i = 0; i < this.items.length; ++i) n = this.items[i], o = n.x, r = n.y + this.vertOffset, TradingView.isNaN(o) || TradingView.isNaN(r) || (s = null != n.style ? n.style.color : this.lineColor, s !== e && (e = s, c && t.fill(), t.beginPath(), t.fillStyle = s), t.moveTo(o + l, r), t.arc(o, r, l, 0, a, !1), c = !0);
            c && t.fill()
        }, p.prototype.hitTest = function(e) {
            var i, n, o, r, s = 2 * this.radius,
                a = this.vertOffset,
                l = B.selectionTolerance(s);
            for (i = 0; i < this.items.length; ++i)
                if (n = this.items[i], n && (o = new t.Point(n.x, n.y + a), r = o.substract(e).length(), r + this.radius <= l)) return new z(z.REGULAR);
            return null
        }, inherit(f, t.Point), _.prototype._calculateVerticalOffset = function(t) {
            return Math.round((t || 0) / 4)
        }, _.prototype._calculateMinHeight = function(t) {
            var e = this.width || this._calculateWidth(t);
            return e
        }, _.prototype._calculateWidth = function(t) {
            var t = t || this.barSpacing;
            return Math.round(t / 2)
        }, _.prototype.draw = function(t) {
            var e, i, n, o, r, s, a = this.width,
                l = 4 > a,
                c = Math.max(parseInt(a / 2), 1),
                h = Math.round(this.width / 2),
                d = Math.round(this.width);
            for (t.translate(1, 1), e = 0, i = this.items.length; i > e; e++) n = this.items[e], o = n.isUp ? -1 : 1, r = Math.abs(n.height), s = n.y - o * this.vertOffset, t.beginPath(), t.translate(n.x, s), l ? (t.moveTo(0, 0), t.lineTo(-h, -h * o), t.moveTo(0, 0), t.lineTo(h, -h * o), t.moveTo(0, 0), t.lineTo(0, -r * o), t.moveTo(-h, -r * o), t.lineTo(h, -r * o), t.lineWidth = c, t.strokeStyle = n.isUp ? this.colorUp : this.colorDn, t.stroke()) : (t.moveTo(0, 0), d > r ? (t.lineTo(a, -r * o), t.lineTo(-a, -r * o)) : (t.lineTo(a, -d * o), t.lineTo(h, -d * o), t.lineTo(h, -r * o), t.lineTo(-h, -r * o), t.lineTo(-h, -d * o), t.lineTo(-a, -d * o)), t.lineTo(0, 0), t.strokeStyle = this.colorBorder, t.stroke(), t.fillStyle = n.isUp ? this.colorUp : this.colorDn, t.fill()), t.translate(-n.x, -s);
            t.translate(-1, -1)
        }, _.prototype.hitTest = function(t) {
            var e, i, n, o, r, s, a, l, c, h, d = Math.round(this.width / 2),
                u = Math.round(this.width);
            for (e = 0; e < this.items.length; ++e)
                if (i = this.items[e], i && void 0 !== i.x && null !== i.x && !TradingView.isNaN(i.x) && void 0 !== i.y && null !== i.y && !TradingView.isNaN(i.y) && (n = Math.abs(i.height), o = i.isUp ? -1 : 1, r = n + u, s = i.y - o * this.vertOffset, a = s - o * r, l = i.x - d, c = i.x + d, h = l < t.x && t.x < c && (i.isUp ? s < t.y && t.y < a : a < t.y && t.y < s))) return new z(z.REGULAR)
        }, g.prototype.draw = function(t) {
            this.drawShape(t), this.drawText(t)
        }, g.prototype.drawShape = function(t) {
            throw Error("Not implemented")
        }, g.prototype.drawText = function(t) {
            var e, i, n, o, r, s;
            if (this._textCache)
                for (e = 0, i = this.items.length; i > e; e++) n = this.items[e], o = n.x, r = n.y + this._vertOffset + this._textVertOffset, s = n.style && null != n.style.textColor ? n.style.textColor : this._textColor, this._textCache.paintTo(t, s, o, r, "center", this._vertOffset > 0 ? "top" : "bottom")
        }, g.prototype.hitTest = function(e, i) {
            var n, o, r, s, a, l, c, h, d, u, p, f, _, g, m = Math.max(this.height, this.width),
                v = this._vertOffset,
                y = this._textVertOffset;
            for (i = i || z.REGULAR, r = 0; r < this.items.length; ++r)
                if (s = this.items[r]) {
                    if (n = new t.Point(s.x, s.y + v), o = n.substract(e).length(), m >= o) return new z(i);
                    if (this._textCache && (a = this._textImageWidth / 2, l = s.y + v + y, c = v > 0 ? 0 : -this._textImageHeight, h = v > 0 ? this._textImageHeight : 0, d = e.x, u = e.y, p = s.x - a, f = l + c, _ = s.x + a, g = l + h, d > p && _ > d && u > f && g > u)) return new z(i)
                }
            return null
        }, inherit(m, g), m.prototype.drawShape = function(t) {
            var e, i, n, o, r, s, a = this._vertOffset > 0 ? 1 : -1;
            for (e = 0, i = this.items.length; i > e; e++) n = this.items[e], o = n.x, r = n.y + this._vertOffset - a * Math.round(this.height / 2), s = n.style && null != n.style.color ? n.style.color : this._color, this._charCache.paintTo(t, s, o, r, "center", this._vertOffset > 0 ? "middle" : "bottom")
        }, m.prototype.hitTest = function(e) {
            var i, n, o, r, s = this._vertOffset,
                a = B.selectionTolerance(this.height);
            for (i = 0; i < this.items.length; ++i)
                if (n = this.items[i], n && (o = new t.Point(n.x, n.y + s), r = o.substract(e).length(), a >= r)) return new z(z.REGULAR);
            return null
        }, inherit(v, g), v.prototype.drawShape = function(t) {
            var e, i, n, o, r, s, a, l, c, h, d;
            for (t.lineWidth = 2, e = this.width, i = this.height, n = this._vertOffset, r = !1, s = 0, a = this.items.length; a > s; s++) l = this.items[s], c = l.style && null != l.style.color ? l.style.color : this._color, c !== o && (o = c, r && t.stroke(), t.beginPath(), t.strokeStyle = c), h = l.x - e / 2, d = l.y - i / 2 + n, t.moveTo(h, d), t.lineTo(h + e, d + i), t.moveTo(h, d + i), t.lineTo(h + e, d), r = !0;
            r && t.stroke()
        }, inherit(y, g), y.prototype.drawShape = function(t) {
            var e, i, n, o, r, s, a, l, c = this.width,
                h = this.height,
                d = Math.round(h / 3),
                u = this._vertOffset - 2 * d,
                p = !1;
            for (i = 0, n = this.items.length; n > i; i++) o = this.items[i], o.style && null != o.style.color ? (r = o.style.color, s = o.style.borderColor) : (r = this._color, s = this._borderColor), r !== e && (e = r, p && (t.fill(), t.stroke()), t.beginPath(), t.fillStyle = r, t.strokeStyle = s), a = o.x, l = o.y + u, t.moveTo(a, l), t.lineTo(a + c / 2, l + h), t.lineTo(a - c / 2, l + h), t.lineTo(a, l), p = !0;
            p && (t.fill(), t.stroke())
        }, inherit(w, g), w.prototype.drawShape = function(t) {
            var e, i, n, o, r, s, a, l, c = this.width,
                h = this.height,
                d = Math.round(h / 3),
                u = this._vertOffset - d,
                p = !1;
            for (i = 0, n = this.items.length; n > i; i++) o = this.items[i], o.style && null != o.style.color ? (r = o.style.color, s = o.style.borderColor) : (r = this._color, s = this._borderColor), r !== e && (e = r, p && (t.fill(), t.stroke()), t.beginPath(), t.fillStyle = r, t.strokeStyle = s), a = o.x - c / 2, l = o.y + u, t.moveTo(a, l), t.lineTo(a + c, l), t.lineTo(a + c / 2, l + h), t.lineTo(a, l), p = !0;
            p && (t.fill(), t.stroke())
        }, inherit(b, g), b.prototype.drawShape = function(t) {
            var e, i, n, o, r, s, a, l = this.width,
                c = this.height,
                h = this._vertOffset,
                d = !1;
            for (i = 0, n = this.items.length; n > i; i++) o = this.items[i], r = o.style && null != o.style.color ? o.style.color : this._color, r !== e && (e = r, d && t.fill(), t.beginPath(), t.fillStyle = r), s = o.x + l / 2, a = o.y - c / 2 + h, t.moveTo(s, a), t.lineTo(s, a + c), t.lineTo(s - l, a + c / 2), t.lineTo(s, a), d = !0;
            d && t.fill()
        }, inherit(S, g), S.prototype.drawShape = function(t) {
            var e, i, n, o, r, s, a, l, c = this.width,
                h = this.height,
                d = h / 2,
                u = this._vertOffset,
                p = 3,
                f = (c - p) / 3,
                _ = !1;
            for (i = 0, n = this.items.length; n > i; i++) o = this.items[i], o.style && null != o.style.color ? (r = o.style.color, s = o.style.borderColor) : (r = this._color, s = this._borderColor), r !== e && (e = r, _ && (t.fill(), t.stroke()), t.beginPath(), t.fillStyle = r, t.strokeStyle = s), a = o.x - c / 2, l = o.y - d + u, t.moveTo(a, l), t.lineTo(a + p, l), t.bezierCurveTo(a + f, l - f, a + 2 * f, l + f, a + c, l), t.lineTo(a + c, l + d), t.bezierCurveTo(a + c - f, l + d + f, a + c - 2 * f, l + d - f, a + p, l + d), t.lineTo(a + p, l + h), t.lineTo(a, l + h), t.lineTo(a, l), _ = !0;
            _ && (t.fill(), t.stroke())
        }, inherit(T, g), T.prototype.drawShape = function(t) {
            var e, i, n, o, r, s, a, l, c, h, d;
            for (t.lineWidth = 2, e = this.width, i = this.height, n = this._vertOffset, r = !1, s = 0, a = this.items.length; a > s; s++) l = this.items[s], c = l.style && null != l.style.color ? l.style.color : this._color, c !== o && (o = c, r && t.stroke(), t.beginPath(), t.strokeStyle = c), h = l.x - e / 2, d = l.y - i / 2 + n, t.moveTo(h + e / 2, d), t.lineTo(h + e / 2, d + i), t.moveTo(h, d + i / 2), t.lineTo(h + e, d + i / 2), r = !0;
            r && t.stroke()
        }, inherit(x, g), x.prototype.drawShape = function(t) {
            var e, i, n, o, r, s, a, l, c = Math.max(this.width, this.height) / 2,
                h = this._vertOffset,
                d = 2 * Math.PI,
                u = !1;
            for (i = 0, n = this.items.length; n > i; i++) o = this.items[i], o.style && null != o.style.color ? (r = o.style.color, s = o.style.borderColor) : (r = this._color, s = this._borderColor), r !== e && (e = r, u && (t.fill(), t.stroke()), t.beginPath(), t.fillStyle = r, t.strokeStyle = s), a = o.x, l = o.y + h, t.moveTo(a + c, l), t.arc(a, l, c, 0, d, !1), u = !0;
            u && (t.fill(), t.stroke())
        }, inherit(C, g), C.prototype._calculateWidth = function(t) {
            return t = t || this.barSpacing, Math.round(t / 4)
        }, C.prototype.drawShape = function(t) {
            var e, i, n, o, r, s, a, l, c = !1,
                h = this.width,
                d = Math.abs(this.height),
                u = 4 > h,
                p = Math.max(parseInt(h / 2), 1),
                f = Math.round(this.width / 2),
                _ = Math.round(this.width),
                g = this._isUp ? -1 : 1;
            for (i = 0, n = this.items.length; n > i; i++) o = this.items[i], r = o.x, s = o.y + this._vertOffset + g * Math.round(d / 2), o.style && null != o.style.color ? (a = o.style.color, l = o.style.borderColor) : (a = this._color, l = this._borderColor), a !== e && (e = a, c && (t.fill(), t.stroke()), t.beginPath(), t.fillStyle = a, t.strokeStyle = l), t.translate(r, s), u ? (t.moveTo(0, 0), t.lineTo(-f, -f * g), t.moveTo(0, 0), t.lineTo(f, -f * g), t.moveTo(0, 0), t.lineTo(0, -d * g), t.moveTo(-f, -d * g), t.lineTo(f, -d * g), t.lineWidth = p) : (t.moveTo(0, 0), _ > d ? (t.lineTo(h, -d * g), t.lineTo(-h, -d * g)) : (t.lineTo(h, -_ * g), t.lineTo(f, -_ * g), t.lineTo(f, -d * g), t.lineTo(-f, -d * g), t.lineTo(-f, -_ * g), t.lineTo(-h, -_ * g)), t.lineTo(0, 0)), t.translate(-r, -s), c = !0;
            c && (t.fill(), t.stroke())
        }, inherit(P, C), inherit(k, C), inherit(I, g), I.prototype.drawShape = function(t) {
            var e, i, n, o, r, s, a, l, c = !1,
                h = this._isUp ? 1 : -1,
                d = Math.round(this._shapeWidth / 2) - .5,
                u = Math.round(this._shapeHeight) - .5,
                p = 0;
            for (0 !== this._vertOffset && this._vertOffset < 0 === this._isUp && (p = -h * Math.round(u + this._stepY)), i = 0, n = this.items.length; n > i; i++) o = this.items[i], r = o.x + .5, s = o.y + this._vertOffset + p + .5, o.style && null != o.style.color ? (a = o.style.color, l = o.style.borderColor) : (a = this._color, l = this._borderColor), a !== e && (e = a, c && (t.fill(), t.stroke()), t.beginPath(), t.fillStyle = a, t.strokeStyle = l), t.translate(r, s), t.moveTo(0, 0), t.lineTo(this._stepX, this._stepY * h), t.lineTo(d, this._stepY * h), t.lineTo(d, u * h), t.lineTo(-d, u * h), t.lineTo(-d, this._stepY * h), t.lineTo(-this._stepX, this._stepY * h), t.lineTo(0, 0), t.translate(-r, -s), c = !0;
            c && (t.fill(), t.stroke())
        }, I.prototype.hitTest = function(e, i) {
            var n, o, r, s, a, l, c, h, d, u, p, f, _, g, m, v = this._stepY / 2,
                y = this._vertOffset,
                w = this._isUp ? 1 : -1;
            for (r = 0; r < this.items.length; ++r)
                if (s = this.items[r]) {
                    if (a = w * v, 0 !== this._vertOffset && this._vertOffset < 0 === this._isUp && (a = -w * (this._shapeHeight + v)), n = new t.Point(s.x, s.y + y + a), o = n.substract(e).length(), v >= o) return new z(z.REGULAR);
                    if (l = this._shapeWidth / 2, a = 0, 0 !== this._vertOffset && this._vertOffset < 0 === this._isUp && (a = -w * (this._shapeHeight + this._stepY)), c = s.y + y + a, h = this._isUp ? this._stepY : -this._shapeHeight, d = this._isUp ? this._shapeHeight : -this._stepY, u = e.x, p = e.y, f = s.x - l, _ = c + h, g = s.x + l, m = c + d, u > f && g > u && p > _ && m > p) return new z(z.REGULAR)
                }
            return null
        }, inherit(E, I), inherit(L, I), inherit(V, g), V.prototype.drawShape = function(t) {
            var e, i, n, o, r, s, a, l, c = !1,
                h = Math.round(this.height / 2);
            for (i = 0, n = this.items.length; n > i; i++) o = this.items[i], o.style && null != o.style.color ? (r = o.style.color, s = o.style.borderColor) : (r = this._color, s = this._borderColor), r !== e && (e = r, c && (t.fill(), t.stroke()), t.beginPath(), t.fillStyle = r, t.strokeStyle = s), a = o.x - h, l = o.y + this._vertOffset - h, t.rect(a, l, this.height, this.height), c = !0;
            c && (t.fill(), t.stroke())
        }, inherit(M, g), M.prototype.drawShape = function(t) {
            var e, i, n, o, r, s, a, l, c = !1,
                h = Math.round(this.height / 2);
            for (i = 0, n = this.items.length; n > i; i++) o = this.items[i], o.style && null != o.style.color ? (r = o.style.color, s = o.style.borderColor) : (r = this._color, s = this._borderColor), r !== e && (e = r, c && (t.fill(), t.stroke()), t.beginPath(), t.fillStyle = r, t.strokeStyle = s), a = o.x, l = o.y + this._vertOffset, t.moveTo(a, l - h), t.lineTo(a + h, l), t.lineTo(a, l + h), t.lineTo(a - h, l), t.lineTo(a, l - h), c = !0;
            c && (t.fill(), t.stroke())
        }, A.prototype.draw = function(t) {}, A.prototype.drawBackground = function(t) {
            var e, i, n;
            for (t.save(), "undefined" == typeof FlashCanvas && t.translate(-.5, -.5), e = 0; e < this._items.length; ++e) i = this._items[e], null != i.color && (t.fillStyle = i.color, n = e === this._items.length - 1 ? this._w : this._items[e + 1].x - i.x, t.fillRect(i.x, this._y, n, this._h));
            t.restore()
        }, A.prototype.hitTest = function(t) {
            return null
        }, inherit(D, m), O.prototype._drawOrderArrow = function(t, e, i, n) {
            var o, r = e.x,
                s = e.y;
            n ? (t.rotate(Math.PI), r = -r - this._orderArrow.width / 2, s = -s - this._orderArrow.height) : (r -= this._orderArrow.width / 2, s -= this._orderArrow.height), i && (s -= i), o = n ? "floor" : "ceil", r = Math[o](r) + (n ? -.5 : .5), s = Math[o](s) + .5, t.translate(r, s), t.moveTo(.25 * this._orderArrow.width, 0), t.lineTo(.75 * this._orderArrow.width, 0), t.lineTo(.75 * this._orderArrow.width, .45 * this._orderArrow.height), t.lineTo(this._orderArrow.width, .45 * this._orderArrow.height), t.lineTo(.5 * this._orderArrow.width, this._orderArrow.height), i && (t.lineTo(this._orderArrow.width, this._orderArrow.height), t.lineTo(this._orderArrow.width, this._orderArrow.height + i), t.lineTo(0, this._orderArrow.height + i), t.lineTo(0, this._orderArrow.height), t.lineTo(.5 * this._orderArrow.width, this._orderArrow.height)), t.lineTo(0, .45 * this._orderArrow.height), t.lineTo(.25 * this._orderArrow.width, .45 * this._orderArrow.height)
        }, O.prototype._drawPriceArrow = function(t, e, i) {
            var n = e.x,
                o = e.y;
            i ? (t.rotate(Math.PI), n = -n - this._priceArrow.width, o = -o - this._priceArrow.height / 2) : (n -= this._priceArrow.width, o -= this._priceArrow.height / 2), n = Math.round(n) + (i ? -1.5 : .5), o = Math.floor(o) + .5, t.translate(n, o), t.moveTo(0, 0), t.lineTo(this._priceArrow.width, .5 * this._priceArrow.height), t.lineTo(0, this._priceArrow.height)
        }, O.prototype.draw = function(t) {
            t.beginPath();
            for (var e, i, n = 0; n < this._items.length; n++) e = this._items[n], i = "lower" === e.pos, t.save(), t.translate(0, i ? this._orderArrow.vMargin : -this._orderArrow.vMargin), this._drawOrderArrow(t, e.orderPoint, this._exitLineWidth, i), t.restore(), t.save(), this._drawPriceArrow(t, e.pricePoint, !i), t.restore();
            if (t.closePath(), t.fillStyle = this._color, t.fill(), this._text)
                for (t.font = this._text.fontSize + "px " + this._text.font, t.textAlign = "center", t.textBaseline = "top", n = 0; n < this._items.length; n++) e = this._items[n], i = "lower" === e.pos, t.save(), t.translate(0, i ? this._orderArrow.vMargin : -this._orderArrow.height - this._orderArrow.vMargin), e.label && (t.translate(0, i ? this._text.fontSize + this._text.vMargin + this._exitLineWidth : -this._text.fontSize - this._text.vMargin - this._exitLineWidth), t.fillText(e.label, Math.ceil(e.orderPoint.x), e.orderPoint.y), "number" != typeof this._textWidths[e.label] && (this._textWidths[e.label] = t.measureText(e.label).width)), e.qty && (t.translate(0, i ? this._text.fontSize + this._text.vMargin + this._exitLineWidth : -this._text.fontSize - this._text.vMargin - this._exitLineWidth), t.fillText(e.qty, Math.ceil(e.orderPoint.x), e.orderPoint.y), "number" != typeof this._textWidths[e.qty] && (this._textWidths[e.qty] = t.measureText(e.qty).width)), t.restore()
        }, O.prototype._testOrderArrows = function(t) {
            for (var e, i, n, o, r, s, a, l = 0, c = this._orderArrow.width / 2; l < this._items.length; l++)
                if (e = this._items[l].orderPoint, !(t.x < e.x - c || t.x > e.x + c || (i = this._items[l], n = "lower" === i.pos, o = this._orderArrow.height + this._exitLineWidth, n || (o = -o), r = e.y + (n ? this._orderArrow.vMargin : -this._orderArrow.vMargin), s = Math.min(r, r + o), a = Math.max(r, r + o), t.y < s || t.y > a))) return !0;
            return !1
        }, O.prototype._testText = function(t) {
            for (var e, i, n, o, r, s, a, l, c, h, d, u = 0; u < this._items.length; u++)
                if (e = this._items[u], i = e.orderPoint, n = "lower" === e.pos, o = this._orderArrow.vMargin + this._orderArrow.height + this._exitLineWidth, n || (o = -o), r = i.y + o, s = this._text.vMargin + this._text.fontSize * (!!e.label + !!e.qty), n || (s = -s), a = Math.min(r, r + s), l = Math.max(r, r + s), !(t.y < a || t.y > l || (c = e.label && e.qty ? n && t.y < r + this._text.fontSize || !n && t.y > r - this._text.fontSize ? e.label : e.qty : e.label || e.qty, h = this._textWidths[c], d = h && h / 2, !h || t.x < i.x - d || t.x > i.x + d))) return !0;
            return !1
        }, O.prototype.hitTest = function(t) {
            var e = this._testOrderArrows(t),
                i = !e && this._text && this._testText(t);
            return e || i ? new z(z.REGULAR) : void 0
        }, R.prototype.draw = function(t) {
            var e, i, n, o, r, s = this.data.vertLinesVisible,
                a = this.data.horzLinesVisible;
            (s || a) && this.data && (t.lineStyle = this.data.lineStyle, t.lineWidth = this.data.lineWidth, t.strokeStyle = this.data.color, e = this.data.lineWidth % 2 === 0 ? .5 : 0, i = this.data.x + 1 + e, n = this.data.y + e, o = this.data.w, r = this.data.h, s && i >= 0 && CanvasEx.drawLine(t, i, 0, i, r), a && n >= 0 && CanvasEx.drawLine(t, 0, n, o, n), this.data.drawCenter && (t.beginPath(), t.arc(i, n, 3, 0, 2 * Math.PI, !0), t.fillStyle = this.data.color, t.fill()))
        }, $.prototype._drawShackle = function(t) {
            var e = this._data.width - 3,
                i = e / 2,
                n = this._data.height - this._data.bodyHeight;
            t.moveTo(1.5, i), t.arc(this._data.width / 2, i, i, Math.PI, 2 * Math.PI), n > i && (t.moveTo(1.5, i), t.lineTo(1.5, n), t.moveTo(this._data.width - 1.5, i), t.lineTo(this._data.width - 1.5, n))
        }, $.prototype.draw = function(t) {
            var e, i, n, o;
            t.translate(this._data.x - this._data.width / 2, this._data.y - this._data.height / 2), e = "rgba(153,153,153,.3)", i = "rgba(153,153,153,.7)", n = "#777", o = "rgba(255,255,255,.7)", t.strokeStyle = e, t.lineWidth = 2, t.beginPath(), this._drawShackle(t), t.stroke(), t.closePath(), t.strokeStyle = i, t.lineWidth = 1, t.beginPath(), t.rect(0, this._data.height - this._data.bodyHeight + .5, this._data.width, this._data.bodyHeight), t.closePath(), t.stroke(), t.translate(0, -1), t.strokeStyle = n, t.beginPath(), this._drawShackle(t), t.stroke(), t.closePath(), t.fillStyle = o, t.beginPath(), t.rect(1, this._data.height - this._data.bodyHeight + 1.5, this._data.width - 2, this._data.bodyHeight - 2), t.fill(), t.beginPath(), t.rect(.5, this._data.height - this._data.bodyHeight + 1, this._data.width - 1, this._data.bodyHeight - 1), t.stroke(), t.closePath(), t.fillStyle = n, t.fillRect(this._data.width / 2 - .5, this._data.height - this._data.bodyHeight / 2, 1, 2)
        }, e.PaneRendererBars = TradingView.PaneRendererBars = n, e.PaneRendererRenkoPB = TradingView.PaneRendererRenkoPB = o, e.PaneRendererKagi = TradingView.PaneRendererKagi = r, e.PaneRendererPnF = TradingView.PaneRendererPnF = s, e.PaneRendererHistogram = TradingView.PaneRendererHistogram = a, e.PaneRendererColumns = TradingView.PaneRendererColumns = l, e.PaneRendererLine = TradingView.PaneRendererLine = c, e.PaneRendererArea = TradingView.PaneRendererArea = h, e.PaneRendererCandles = TradingView.PaneRendererCandles = d, e.PaneRendererCross = TradingView.PaneRendererCross = u, e.PaneRendererCircles = TradingView.PaneRendererCircles = p, e.PaneRendererCrossShape = TradingView.PaneRendererCrossShape = T, e.PaneRendererCrossHair = TradingView.PaneRendererCrossHair = R, e.PaneRendererCrossHairLock = TradingView.PaneRendererCrossHairLock = $, e.PaneRendererArrowsUpDownItem = TradingView.PaneRendererArrowsUpDownItem = f, e.PaneRendererArrowsUpDown = TradingView.PaneRendererArrowsUpDown = _, e.PaneRendererAbstractShape = TradingView.PaneRendererAbstractShape = g, e.PaneRendererUnicodeChar = TradingView.PaneRendererUnicodeChar = m, e.PaneRendererXCross = TradingView.PaneRendererXCross = v, e.PaneRendererTriangleApexUp = TradingView.PaneRendererTriangleApexUp = y, e.PaneRendererTriangleApexDown = TradingView.PaneRendererTriangleApexDown = w, e.PaneRendererTriangleApexLeft = TradingView.PaneRendererTriangleApexLeft = b, e.PaneRendererFlagShape = TradingView.PaneRendererFlagShape = S, e.PaneRendererCircleShape = TradingView.PaneRendererCircleShape = x, e.PaneRendererArrowsBase = TradingView.PaneRendererArrowsBase = C, e.PaneRendererArrowUp = TradingView.PaneRendererArrowUp = P, e.PaneRendererArrowDown = TradingView.PaneRendererArrowDown = k, e.PaneRendererLabelsBase = TradingView.PaneRendererLabelsBase = I, e.PaneRendererLabelUp = TradingView.PaneRendererLabelUp = E, e.PaneRendererLabelDown = TradingView.PaneRendererLabelDown = L, e.PaneRendererSquare = TradingView.PaneRendererSquare = V, e.PaneRendererDiamond = TradingView.PaneRendererDiamond = M, e.PaneRendererBackground = TradingView.PaneRendererBackground = A, e.PaneRendererClockIcon = TradingView.PaneRendererClockIcon = D, e.PaneRendererStudyStrategyOrders = TradingView.PaneRendererStudyStrategyOrders = O
    }).call(e, i(40))
}, function(t, e) {
    "use strict";
    e.optimalBarWidth = function(t) {
        return .3 * t
    }, e.selectionTolerance = function(t) {
        return 2 + .5 * t
    }, e.paneRendererCoordinateIsValid = function(t) {
        return null !== t && void 0 !== t && !TradingView.isNaN(t)
    }
}, function(t, e) {
    "use strict";

    function i(t, e, i, n, o) {
        var r, s, a, l, c;
        for (this._canvasesMap = {}, this._lines = t.split(/[^\S\r\n]*(?:\r\n|\r|\n)/), this._font = this._fontStyle(e, i, n, o), this._fontSize = o, r = $("<canvas>"), s = r.get(0).getContext("2d"), s.font = this._font, a = 0, l = 0; l < this._lines.length; l++) c = s.measureText(this._lines[l]).width, a = Math.max(a, c);
        this.textImageWidth = a + 1, this.textImageHeight = this._lines.length * o
    }
    i.prototype.paintTo = function(t, e, i, n, o, r) {
        var s = this._getTextImage(e),
            a = this._x(i, o, this.textImageWidth),
            l = this._y(n, r, this.textImageHeight);
        t.drawImage(s, a - .5, l - .5)
    }, i.prototype._getTextImage = function(t) {
        var e, i, n, o, r;
        if (this._canvasesMap[t]) return this._canvasesMap[t].get(0);
        for (e = $("<canvas>").attr("width", this.textImageWidth).attr("height", this.textImageHeight), i = e.get(0).getContext("2d"), i.textBaseline = "top", i.font = this._font, i.textAlign = "center", i.fillStyle = t, n = Math.round(this.textImageWidth / 2), o = 0, r = 0; r < this._lines.length; r++) i.fillText(this._lines[r], n, o), o += this._fontSize;
        return this._canvasesMap[t] = e, e.get(0)
    }, i.prototype._x = function(t, e, i) {
        var n = t;
        switch (e) {
            case "left":
                break;
            case "right":
                n -= i;
                break;
            case "center":
                n -= i / 2
        }
        return Math.round(n)
    }, i.prototype._y = function(t, e, i) {
        var n = t;
        switch (e) {
            case "top":
                break;
            case "bottom":
                n -= i;
                break;
            case "middle":
                n -= i / 2
        }
        return Math.round(n)
    }, i.prototype._fontStyle = function(t, e, i, n) {
        return (t ? "bold " : "") + (e ? "italic " : "") + n + "px " + i
    }, t.exports = i
}, function(t, e) {
    "use strict";

    function i() {
        this._renderers = [], this._globalAlpha = 1
    }
    i.prototype.setGlobalAlpha = function(t) {
        this._globalAlpha = t
    }, i.prototype.append = function(t) {
        this._renderers.push(t)
    }, i.prototype.insert = function(t, e) {
        this._renderers.splice(e, 0, t)
    }, i.prototype.draw = function(t) {
        for (var e = 0; e < this._renderers.length; e++) t.save(), t.globalAlpha = this._globalAlpha, this._renderers[e].draw(t), t.restore()
    }, i.prototype.drawBackground = function(t) {
        t.save(), t.globalAlpha = this._globalAlpha;
        for (var e = 0; e < this._renderers.length; e++) this._renderers[e].drawBackground && this._renderers[e].drawBackground(t);
        t.restore()
    }, i.prototype.hitTest = function(t) {
        var e, i, n = null;
        for (e = this._renderers.length - 1; e >= 0; e--) i = this._renderers[e].hitTest(t), i && (null == n || i.result() > n.result()) && (n = i);
        return n
    }, t.exports = i
}, function(t, e) {
    "use strict";
    t.exports = function(t, e) {
        var i, n = 10,
            o = t % n;
        for (o && (t = t - o + n), i = []; e >= t; t += n) i.push(t);
        return i
    }
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(t, e) {
            this.m_series = t, this.m_model = e, this.m_bars = [], this._invalidated = !0
        }

        function o(t, e) {
            n.call(this, t, e)
        }

        function r(t, e) {
            n.call(this, t, e)
        }

        function s(t, e) {
            o.call(this, t, e)
        }

        function a(t, e) {
            r.call(this, t, e)
        }

        function l(t, e) {
            o.call(this, t, e)
        }

        function c(t, e) {
            r.call(this, t, e)
        }

        function h(t, e) {
            o.call(this, t, e)
        }

        function d(t, e) {
            r.call(this, t, e)
        }

        function u(t, e) {
            o.call(this, t, e)
        }

        function p(t, e) {
            r.call(this, t, e)
        }
        var f = i(66).SelectionRenderer,
            _ = i(67),
            g = i(68),
            m = g.PaneRendererRenkoPB,
            v = g.PaneRendererKagi,
            y = g.PaneRendererPnF,
            w = i(71),
            b = i(72);
        n.prototype.bars = function() {
            throw Error("unimplemented")
        }, n.prototype.isProjection = function() {
            throw Error("unimplemented")
        }, n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype.nearestIndex = function(t, e) {
            if (!TradingView.isInteger(t)) return void TradingView.logDebugChart("incorrect logicalPoint");
            var i = this.bars().search(t, e);
            return i ? i.index : void 0
        }, n.prototype._updateImpl = function() {
            var e, i, n, o, r, s, a, l, c, h, d, u, p, f, g, m, v, y, w, S, T, x = this;
            if (this.m_bars.length = 0, (this.m_series.properties().style.value() !== TradingView.Series.STYLE_PNF || this.m_series.data().boxSize) && !this.m_model.timeScale().isEmpty() && !this.m_series.priceScale().isEmpty() && (e = this.m_series.getRealVisibleRange(), e && 0 !== this.bars().size())) {
                for (i = e.m_firstBar, n = e.m_lastBar, o = this.m_series.data().search(i).value[TradingView.CLOSE_PLOT]; n >= i && (r = this.bars().valueAt(i), void 0 === r); i++);
                if (!(i > n) && (e = this.bars().range(i, n), s = this.m_series.priceScale(), a = this.m_series.barColorer(), l = {}, c = x.m_series.properties().style.value(), h = c === TradingView.Series.STYLE_KAGI || c === TradingView.Series.STYLE_PNF, d = x.isProjection(), u = +x.m_series.data().bars().last(), e.each(function(t, e) {
                        var i, n, r, p;
                        if (void 0 !== e[TradingView.OPEN_PLOT] && void 0 !== e[TradingView.HIGH_PLOT] && void 0 !== e[TradingView.LOW_PLOT] && void 0 !== e[TradingView.CLOSE_PLOT]) {
                            if (i = {}, n = {
                                    O: e[TradingView.OPEN_PLOT],
                                    H: e[TradingView.HIGH_PLOT],
                                    L: e[TradingView.LOW_PLOT],
                                    C: e[TradingView.CLOSE_PLOT],
                                    Adt: h ? e[TradingView.ADT_PLOT] : void 0
                                }, s.properties().percentage.value())
                                for (r in n) n[r] = 100 * (n[r] - o) / o;
                            switch (i.time = Math.round(t), i.open = n.O, i.high = n.H, i.low = n.L, i.close = n.C, l.value = e, p = a.barStyle(t, d, l), l.previousValue = e, i.color = p.barColor, i.borderColor = p.barBorderColor, i.isUp = p.isBarUp, c) {
                                case TradingView.Series.STYLE_PNF:
                                    i.low -= .5 * x.m_series.data().boxSize, i.high += .5 * x.m_series.data().boxSize, i.additionalNum = Math.round(1 + (e[TradingView.HIGH_PLOT] - e[TradingView.LOW_PLOT]) / x.m_series.data().boxSize);
                                    break;
                                case TradingView.Series.STYLE_KAGI:
                                    if (i.upColor = p.upColor, i.downColor = p.downColor, i.isTwoColorBar = p.isTwoColorBar, !isNumber(n.Adt)) break;
                                    i.additionalPrice = n.Adt, d && i.time === u && (i.combinedWithProjection = !0)
                            }
                            x.m_bars.push(i)
                        }
                    }, this), c === TradingView.Series.STYLE_PNF && (s.properties().percentage.value() ? (p = 100 * (500 - o) / o, f = 100 * (0 - o) / o, this.blockSize = (s.priceToCoordinate(f) - s.priceToCoordinate(p)) / 500 * this.m_series.data().boxSize) : this.blockSize = (s.priceToCoordinate(0) - s.priceToCoordinate(500)) / 500 * this.m_series.data().boxSize), s.barPricesToCoordinates(this.m_bars), this.m_model.timeScale().barIndexesToCoordinates(this.m_bars), this.m_series === this.m_model.selectedSource()))
                    for (g = b(i, n), this._selectionData = {
                        points: []
                    }, this._selectionData.hittestResult = _.REGULAR, m = 0; m < g.length; m++) v = g[m], y = this.m_series.bars().valueAt(v), y && (w = .5 * (y[TradingView.OPEN_PLOT] + y[TradingView.CLOSE_PLOT]), s.properties().percentage.value() && (w = 100 * (w - o) / o), S = this.m_model.timeScale().indexToCoordinate(v), T = this.m_series.priceScale().priceToCoordinate(w), this._selectionData.points.push(new t.Point(S, T)))
            }
        }, n.prototype.items = function() {
            return this.m_bars
        }, n.prototype.dump = function() {
            var t = {};
            return t.bars = this.m_bars, t
        }, inherit(o, n), o.prototype.bars = function() {
            return this.m_series.bars()
        }, o.prototype.isProjection = function() {
            return !1
        }, inherit(r, n), r.prototype.bars = function() {
            return this.m_series.nsBars()
        }, r.prototype.isProjection = function() {
            return !0
        }, inherit(s, o), s.prototype.renderer = function() {
            var t, e;
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), t = {}, t.bars = this.m_bars, t.barWidth = this.m_model.timeScale().barSpacing(), e = new w, e.append(new m(t)), this.m_series === this.m_model.selectedSource() && e.append(new f(this._selectionData)), e
        }, inherit(a, r), a.prototype.renderer = function() {
            this._invalidated && (this._updateImpl(), this._invalidated = !1);
            var t = {};
            return t.bars = this.m_bars, t.barWidth = this.m_model.timeScale().barSpacing(), new m(t)
        }, inherit(l, o), l.prototype.renderer = function() {
            var t, e;
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), t = {}, t.bars = this.m_bars, t.barWidth = .9 * this.m_model.timeScale().barSpacing(), e = new w, e.append(new m(t)), this.m_series === this.m_model.selectedSource() && e.append(new f(this._selectionData)), e
        }, inherit(c, r), c.prototype.renderer = function() {
            this._invalidated && (this._updateImpl(), this._invalidated = !1);
            var t = {};
            return t.bars = this.m_bars, t.barWidth = .9 * this.m_model.timeScale().barSpacing(), new m(t)
        }, inherit(h, o), h.prototype.renderer = function() {
            var t, e;
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), t = {}, t.bars = this.m_bars, t.barSpacing = this.m_model.timeScale().barSpacing(), e = new w, e.append(new v(t)), this.m_series === this.m_model.selectedSource() && e.append(new f(this._selectionData)), e
        }, inherit(d, r), d.prototype.renderer = function() {
            this._invalidated && (this._updateImpl(), this._invalidated = !1);
            var t = {};
            return t.bars = this.m_bars, t.upColor = this.upColor, t.downColor = this.downColor, t.barSpacing = this.m_model.timeScale().barSpacing(), new v(t)
        }, inherit(u, o), u.prototype.renderer = function() {
            var t, e;
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), t = {}, t.bars = this.m_bars, t.blockSize = this.blockSize, t.barSpacing = this.m_model.timeScale().barSpacing(), e = new w, e.append(new y(t)), this.m_series === this.m_model.selectedSource() && e.append(new f(this._selectionData)), e
        }, inherit(p, r), p.prototype.renderer = function() {
            this._invalidated && (this._updateImpl(), this._invalidated = !1);
            var t = {};
            return t.bars = this.m_bars, t.blockSize = this.blockSize, t.barSpacing = this.m_model.timeScale().barSpacing(), new y(t)
        }, e.SeriesRenkoPaneView = s, e.SeriesProjectionRenkoPaneView = a, e.SeriesPriceBreakPaneView = l, e.SeriesProjectionPriceBreakPaneView = c, e.SeriesKagiPaneView = h, e.SeriesProjectionKagiPaneView = d, e.SeriesPnFPaneView = u, e.SeriesProjectionPnFPaneView = p
    }).call(e, i(40))
}, function(t, e) {
    "use strict";

    function i(t, e) {
        return null === t || TradingView.isInteger(t) ? null === e || TradingView.isInteger(e) ? (this.m_firstBar = t, void(this.m_lastBar = e)) : void TradingView.logDebugChart("BarsRange: incorrect lastBar") : void TradingView.logDebugChart("BarsRange: incorrect firstBar")
    }
    i.prototype.isEmpty = function() {
        return null === this.m_firstBar || null === this.m_lastBar || void 0 === this.m_firstBar || void 0 === this.m_lastBar
    }, i.prototype.clone = function() {
        return new i(this.m_firstBar, this.m_lastBar)
    }, i.prototype.firstBar = function() {
        return this.m_firstBar
    }, i.prototype.lastBar = function() {
        return this.m_lastBar
    }, i.prototype.count = function() {
        return this.m_lastBar - this.m_firstBar + 1
    }, i.prototype.resizeRight = function(t) {
        return !TradingView.isInteger(t) || 0 > t ? void TradingView.logDebugChart("BarsRange: incorrect newWidth") : void(this.m_firstBar = this.m_lastBar - t + 1)
    }, i.prototype.shift = function(t) {
        return isNumber(t) ? (this.m_firstBar = Math.round(this.m_firstBar + t), void(this.m_lastBar = Math.round(this.m_lastBar + t))) : void TradingView.logDebugChart("BarsRange.shift: incorrect coeff")
    }, i.prototype.contains = function(t) {
        return this.m_firstBar <= t && this.m_lastBar >= t
    }, t.exports = i
}, function(t, e) {
    "use strict";

    function i() {
        this.backColorers = []
    }

    function n(t) {
        i.call(this), this._series = t
    }

    function o(t, e) {
        i.call(this), this._study = t, this._plotIndex = e
    }
    i.prototype.barStyle = function(t, e, i) {
        var n, o = {};
        for (n = this.backColorers.length - 1; n >= 0; n--) this.backColorers[n].applyBarStyle(t, e, o, i);
        return this.applyBarStyle(t, e, o, i), o
    }, i.prototype.pushBackBarColorer = function(t) {
        this.backColorers.push(t)
    }, i.prototype.applyBarStyle = function(t, e, i) {
        throw Error("This function is supposed to be reimplemented in a subclass")
    }, inherit(n, i), n.prototype.applyBarStyle = function(t, e, i, n) {
        var o, r, s, a, l, c, h, d, u, p, f;
        switch (i || (i = {}), i.barColor = null, i.barBorderColor = null, i.barWickColor = null, i.isBarHollow = null, i.isBarUp = null, i.upColor = null, i.downColor = null, i.isTwoColorBar = null, o = this._series.properties(), o.style.value()) {
            case TradingView.Series.STYLE_LINE:
                i.barColor = o.lineStyle.color.value();
                break;
            case TradingView.Series.STYLE_AREA:
                i.barColor = o.areaStyle.linecolor.value();
                break;
            case TradingView.Series.STYLE_BARS:
                r = o.barStyle.upColor.value(), s = o.barStyle.downColor.value(), a = r, l = s, c = this.findBar(t, !1, n), o.barStyle.barColorsOnPrevClose.value() ? (h = this.findPrevBar(t, !1, n), i.barColor = h[TradingView.CLOSE_PLOT] <= c[TradingView.CLOSE_PLOT] ? r : s, i.barBorderColor = h[TradingView.CLOSE_PLOT] <= c[TradingView.CLOSE_PLOT] ? a : l) : (i.barColor = c[TradingView.OPEN_PLOT] <= c[TradingView.CLOSE_PLOT] ? r : s, i.barBorderColor = c[TradingView.OPEN_PLOT] <= c[TradingView.CLOSE_PLOT] ? a : l);
                break;
            case TradingView.Series.STYLE_CANDLES:
                r = o.candleStyle.upColor.value(), s = o.candleStyle.downColor.value(), a = o.candleStyle.borderUpColor ? o.candleStyle.borderUpColor.value() : o.candleStyle.borderColor.value(), l = o.candleStyle.borderDownColor ? o.candleStyle.borderDownColor.value() : o.candleStyle.borderColor.value(), d = o.candleStyle.wickUpColor ? o.candleStyle.wickUpColor.value() : o.candleStyle.wickColor.value(), u = o.candleStyle.wickDownColor ? o.candleStyle.wickDownColor.value() : o.candleStyle.wickColor.value(), c = this.findBar(t, !1, n), o.candleStyle.barColorsOnPrevClose.value() ? (h = this.findPrevBar(t, !1, n), p = h[TradingView.CLOSE_PLOT] <= c[TradingView.CLOSE_PLOT]) : p = c[TradingView.OPEN_PLOT] <= c[TradingView.CLOSE_PLOT], i.barColor = p ? r : s, i.barBorderColor = p ? a : l, i.barWickColor = p ? d : u;
                break;
            case TradingView.Series.STYLE_HOLLOW_CANDLES:
                r = o.hollowCandleStyle.upColor.value(), s = o.hollowCandleStyle.downColor.value(), a = o.hollowCandleStyle.borderUpColor ? o.hollowCandleStyle.borderUpColor.value() : o.hollowCandleStyle.borderColor.value(), l = o.hollowCandleStyle.borderDownColor ? o.hollowCandleStyle.borderDownColor.value() : o.hollowCandleStyle.borderColor.value(), d = o.hollowCandleStyle.wickUpColor ? o.hollowCandleStyle.wickUpColor.value() : o.hollowCandleStyle.wickColor.value(), u = o.hollowCandleStyle.wickDownColor ? o.hollowCandleStyle.wickDownColor.value() : o.hollowCandleStyle.wickColor.value(), c = this.findBar(t, !1, n), h = this.findPrevBar(t, !1, n), h[TradingView.CLOSE_PLOT] <= c[TradingView.CLOSE_PLOT] ? (i.barColor = r, i.barBorderColor = a, i.barWickColor = d) : (i.barColor = s, i.barBorderColor = l, i.barWickColor = u), c[TradingView.OPEN_PLOT] <= c[TradingView.CLOSE_PLOT] ? i.isBarHollow = !0 : i.isBarHollow = !1;
                break;
            case TradingView.Series.STYLE_HEIKEN_ASHI:
                r = o.haStyle.upColor.value(), s = o.haStyle.downColor.value(), a = o.haStyle.borderUpColor.value(), l = o.haStyle.borderDownColor.value(), d = o.haStyle.wickUpColor.value(), u = o.haStyle.wickDownColor.value(), c = this.findBar(t, e, n), o.haStyle.barColorsOnPrevClose.value() ? (h = this.findPrevBar(t, e, n), p = h[TradingView.CLOSE_PLOT] <= c[TradingView.CLOSE_PLOT]) : p = c[TradingView.OPEN_PLOT] <= c[TradingView.CLOSE_PLOT], i.barColor = p ? r : s, i.barBorderColor = p ? a : l, i.barWickColor = p ? d : u;
                break;
            case TradingView.Series.STYLE_RENKO:
                c = this.findBar(t, e, n), p = c[TradingView.OPEN_PLOT] <= c[TradingView.CLOSE_PLOT], r = e ? o.renkoStyle.upColorProjection.value() : o.renkoStyle.upColor.value(), s = e ? o.renkoStyle.downColorProjection.value() : o.renkoStyle.downColor.value(), a = e ? o.renkoStyle.borderUpColorProjection.value() : o.renkoStyle.borderUpColor.value(), l = e ? o.renkoStyle.borderDownColorProjection.value() : o.renkoStyle.borderDownColor.value(), i.barColor = p ? r : s, i.barBorderColor = p ? a : l, i.isBarUp = p;
                break;
            case TradingView.Series.STYLE_PB:
                c = this.findBar(t, e, n), p = c[TradingView.OPEN_PLOT] <= c[TradingView.CLOSE_PLOT], r = e ? o.pbStyle.upColorProjection.value() : o.pbStyle.upColor.value(), s = e ? o.pbStyle.downColorProjection.value() : o.pbStyle.downColor.value(), a = e ? o.pbStyle.borderUpColorProjection.value() : o.pbStyle.borderUpColor.value(), l = e ? o.pbStyle.borderDownColorProjection.value() : o.pbStyle.borderDownColor.value(), i.barColor = p ? r : s, i.barBorderColor = p ? a : l, i.isBarUp = p;
                break;
            case TradingView.Series.STYLE_KAGI:
                i.upColor = e ? o.kagiStyle.upColorProjection.value() : o.kagiStyle.upColor.value(), i.downColor = e ? o.kagiStyle.downColorProjection.value() : o.kagiStyle.downColor.value(), f = null, c = this.findBar(t, e, n), c[TradingView.LOW_PLOT] < c[TradingView.ADT_PLOT] && c[TradingView.ADT_PLOT] < c[TradingView.HIGH_PLOT] ? (f = c[TradingView.OPEN_PLOT] <= c[TradingView.CLOSE_PLOT], i.isTwoColorBar = !0) : (f = c[TradingView.OPEN_PLOT] <= c[TradingView.CLOSE_PLOT] ? c[TradingView.OPEN_PLOT] === c[TradingView.ADT_PLOT] : c[TradingView.OPEN_PLOT] !== c[TradingView.ADT_PLOT], i.isTwoColorBar = !1), i.barColor = f ? i.upColor : i.downColor, i.isBarUp = c[TradingView.OPEN_PLOT] <= c[TradingView.CLOSE_PLOT];
                break;
            case TradingView.Series.STYLE_PNF:
                c = this.findBar(t, e, n), p = c[TradingView.ADT_PLOT] > 0, r = e ? o.pnfStyle.upColorProjection.value() : o.pnfStyle.upColor.value(), s = e ? o.pnfStyle.downColorProjection.value() : o.pnfStyle.downColor.value(), i.isBarUp = p, i.barColor = p ? r : s
        }
        return i
    }, n.prototype.getSeriesBars = function(t) {
        return t ? this._series.nsBars() : this._series.bars()
    }, n.prototype._findBarFieldValue = function(t, e, i) {
        var n = this.getSeriesBars(i).valueAt(t);
        return void 0 !== n ? n[e] : void 0
    }, n.prototype.findBar = function(t, e, i) {
        return i ? i.value : this.getSeriesBars(e).valueAt(t) || []
    }, n.prototype.findPrevBar = function(t, e, i) {
        var n, o;
        return i && i.previousValue ? i.previousValue : (n = this._series.bars(), o = n._search(t, TradingView.SEARCH_EXACT), o > 0 ? this._series.bars()._valueAt(o - 1) : [])
    }, inherit(o, i), o.prototype.applyBarStyle = function(t, e, i) {
        var n, o, r, s, a, l, c, h, d, u, p, f, _;
        return i || (i = {}), e ? i : (n = this._study.properties(), n.visible.value() ? (o = this._study.metaInfo(), r = this._study.data(), r && 0 !== r.size() ? (s = o.plots[this._plotIndex], a = n.styles[s.id], a.visible && !a.visible.value() ? i : (l = this._study.offset(s.id), (c = r.valueAt(t - l)) ? (h = c[this._plotIndex + 1], null == h ? i : (h = Math.round(h), d = o.plots[this._plotIndex].palette, u = n.palettes, p = u[d], f = o.palettes[d].valToIndex ? o.palettes[d].valToIndex[h] : h, _ = p.colors[f].color.value(), i.barColor = _, i.upColor = _.color, i.downColor = _.color, i)) : i)) : i) : i)
    }, e.SeriesBarColorer = n, e.StudyBarColorer = o
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(t) {
            this._data = t
        }

        function o(t, e) {
            l.call(this, t, e), this._rendererCache = {}
        }

        function r(t, e) {
            this._source = t, this._model = e, this._text = "", this._coordinate = 0, this._background = "black", this._color = "white", this._invaildated = !0
        }

        function s(t, e) {
            this._constructor = "LineToolHorzLine";
            var i = e || new f("linetoolhorzline");
            this._priceAxisView = new r(this, t), a.call(this, t, new o(this, t), i)
        }
        var a = i(77).LineDataSource,
            l = i(115),
            c = i(60),
            h = i(62),
            d = i(116).TextRenderer,
            u = i(67),
            p = i(71),
            f = i(81).DefaultProperty;
        n.prototype.draw = function(t) {
            var e, i;
            return 0 === this._data.points.length ? null : void(this._data.visible !== !1 && (e = this._data.points[0].y, i = t.canvas.width, t.lineCap = "square", t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, t.lineStyle = this._data.linestyle, CanvasEx.drawLine(t, 0, e, i, e)))
        }, n.prototype.hitTest = function(t) {
            if (this._data.visible === !1) return null;
            if (0 === this._data.points.length) return null;
            var e = 3;
            return Math.abs(t.y - this._data.points[0].y) <= e ? new u(this._data.hitTestResult) : null
        }, inherit(o, l), o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.updateImpl = function() {
            l.prototype.update.call(this)
        }, o.prototype.renderer = function() {
            var e, i, o, r, s, a, l, c, h, f, _;
            return this._invalidated && (this.updateImpl(), this._invalidated = !1), e = new p, i = {}, i.points = this._points, i.color = this._source.properties().linecolor.value(), i.linewidth = this._source.properties().linewidth.value(), i.linestyle = this._source.properties().linestyle.value(), i.hitTestResult = u.MOVEPOINT, o = this._source.properties(), e.append(new n(i)), this._source.properties().showLabel.value() && 1 === this._points.length && (r = o.vertLabelsAlign.value(), s = o.horzLabelsAlign.value(), a = this._points[0], l = 0, c = 0, "left" === s ? a.x = 3 : "right" === s ? (a.x = this._model.timeScale().width(), c = -5) : a.x = this._model.timeScale().width() / 2, "middle" === r ? l = -this._source.properties().fontsize.value() / 6 : "bottom" === r && (l = -4), h = {
                points: [a],
                text: o.text.value(),
                color: o.textcolor.value(),
                vertAlign: r,
                horzAlign: s,
                font: o.font.value(),
                offsetX: c,
                offsetY: l,
                bold: this._source.properties().bold.value(),
                italic: this._source.properties().italic.value(),
                fontsize: this._source.properties().fontsize.value()
            }, e.append(new d(h, this._rendererCache))), 1 === this._points.length && this.isAnchorsRequired() && (f = new t.Point(this._model.timeScale().width() / 2, this._points[0].y), f.data = 0, e.append(this.createLineAnchor({
                points: [f]
            }))), TradingView.printing || !this._source.hasAlert.value() || this._model.readOnly() || 1 !== this._points.length || (_ = new t.Point(this._model.timeScale().width() / 2, this._points[0].y), this._source.getAlertIsActive(function(t) {
                e.append(new TradingView.PaneRendererClockIcon({
                    point1: _,
                    color: t ? i.color : defaults("chartproperties.alertsProperties.drawingIcon.color")
                }))
            })), e
        }, inherit(r, c), r.prototype.update = function() {
            this._invaildated = !0
        }, r.prototype.updateImpl = function() {
            var t, e, i;
            if (0 !== this._source.points().length && this._source.priceScale() && !this._source.priceScale().isEmpty()) {
                if (t = this._source.properties().linecolor.value(), t !== this._background && (this._background = t, this._color = this.color()), e = this._source.points()[0].price, this._source.priceScale().isPercent()) {
                    if (i = this._source.ownerSource().firstValue(), null === i) return;
                    e = this._source.priceScale().priceRange().convertToPercent(e, i)
                }
                this._floatCoordinate = this._source.priceScale().priceToCoordinate(e, !0), this._coordinate = Math.round(this._floatCoordinate), this._source.priceScale().formatter() && (this._text = this._source.priceScale().formatter().format(e))
            }
        }, r.prototype.renderer = function() {
            this._invaildated && (this.updateImpl(), this._invaildated = !1);
            var t = {
                text: this._text,
                coordinate: this._coordinate,
                color: this._color,
                background: this._background,
                visible: !0
            };
            return new h(t)
        }, r.prototype.coordinate = function() {
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), c.prototype.coordinate.call(this)
        }, inherit(s, a), s.prototype.state = function(t) {
            var e = a.prototype.state.call(this, t);
            return e.points && 0 !== e.points.length && (e.points[0].offset = 0), e
        }, s.prototype.pointsCount = function() {
            return 1
        }, s.prototype.title = function() {
            return "Horizontal Line"
        }, s.prototype.priceAxisViews = function(t, e) {
            return this.isActualSymbol() && e === this.priceScale() && this.properties().showPrice.value() && this._model.paneForSource(this) === t ? [this._priceAxisView] : null
        }, s.prototype.updateAllViews = function() {
            a.prototype.updateAllViews.call(this), this._priceAxisView.update()
        }, s.prototype.canHasAlert = function() {
            return !0
        }, s.prototype._getAlertPlots = function() {
            return [this.points()[0].price]
        }, e.HorzLineRenderer = n, e.LineToolHorzLine = s
    }).call(e, i(40))
}, function(t, e, i) {
    (function(t, n) {
        "use strict";

        function o(t, e) {
            a.call(this, t, e), this._linetool = t, this._pointIndex = e, this._text = "", this._coordinate = 0, this._background = "#5592C9", this._activeBackground = "#0F6DBF", this._borderColor = "#2E84A6", this._color = "white", this._invalidated = !0, this._model = t._model
        }

        function r(t, e) {
            c.call(this), this._linetool = t, this._pointindex = e, this._model = t._model, this._text = "", this._coordinate = 0, this._background = "#5592C9", this._activeBackground = "#0F6DBF", this._borderColor = "#2E84A6", this._color = "white", this._visible = !1, this._invalidated = !0
        }

        function s(t, e, i) {
            var n, o, a;
            if (d.call(this), this._model = t, this._properties = i, i.visible && i.frozen || this._properties.merge(defaults("linetool")), n = defaults("linetoolvisibilities"), i.intervalsVisibilities)
                for (o in n.intervalsVisibilities) this._properties.intervalsVisibilities[o] || this._properties.intervalsVisibilities.addProperty(o, n.intervalsVisibilities[o]);
            else this._properties.merge(n);
            if ($.isArray(e) ? this._paneViews = e : this._paneViews = [e], this._points = [], this._fixedPoints = [], this._timePoint = [], this._properties.symbol || this._properties.merge({
                    symbol: t.mainSeries().symbol()
                }), this._properties.interval || this._properties.merge({
                    interval: t.mainSeries().interval()
                }), this._properties.addExclusion && (this._properties.addExclusion("symbol"), this._properties.addExclusion("symbolInfo"), this._properties.addExclusion("points"), this._properties.addExclusion("interval"), this._properties.addExclusion("visible"), this._properties.addExclusion("lastUpdateTime")), this.calcIsActualSymbol(), this._properties.intervalsVisibilities.listeners().subscribe(this, s.prototype.calcIsActualSymbol), this._properties.listeners().subscribe(this, s.prototype.propertiesChanged), this._createPointsProperties(), "_tooltipFieldsHash" in this && !this.hasOwnProperty("_tooltipFieldsHash") && (this._tooltipFieldsHash = $.extend(!0, {}, this._tooltipFieldsHash)), this.m_priceAxisViews = [], this.m_timeAxisViews = [], this.pointsCount() > 0)
                for (a = 0; a < this.pointsCount(); a++) this.m_priceAxisViews.push(this.createPriceAxisView(a)), this.m_timeAxisViews.push(new r(this, a));
            this._properties.visible.listeners().subscribe(this, function(t) {
                t.value() || this._model.selectedSource() !== this || this._model.setSelectedSource(null)
            }), this.customization = this.customization || {
                    forcePriceAxisLabel: !1,
                    disableSelection: !1,
                    disableErasing: !1,
                    disableSave: !1
                }, $(window).resize(function() {
                this.isFixed() && this.restoreFixedPoints()
            }.bind(this)), this._properties.lastUpdateTime || this._properties.addProperty("lastUpdateTime", 0)
        }
        var a = i(60),
            l = i(62),
            c = i(78),
            h = i(79),
            d = i(80).DataSource,
            u = i(82),
            p = i(15),
            f = i(83).DateTimeFormatter,
            _ = i(84);
        inherit(o, a), o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.setActive = function(t) {
            this._active = t
        }, o.prototype._updateImpl = function() {
            var t, e, i, n, o;
            if (this._visible = !1, this._text = "", this._model.timeScale() && !this._model.timeScale().isEmpty() && this._linetool.priceScale() && !this._linetool.priceScale().isEmpty() && (this._model.selectedSource() === this._linetool || this._linetool.customization.forcePriceAxisLabel) && (t = this._model.timeScale().visibleBars(), !t.isEmpty() && (e = this._linetool.axisPoints(), !(e.length <= this._pointIndex) && (i = e[this._pointIndex], isFinite(i.price))))) {
                if (n = this._linetool.priceScale(), n.isPercent()) {
                    if (o = this._linetool.ownerSource().firstValue(), !isNumber(o)) return;
                    i.price = n.priceRange().convertToPercent(i.price, o)
                }
                this._text = n.formatter().format(i.price), this._coordinate = n.priceToCoordinate(i.price), this._visible = !0
            }
        }, o.prototype.renderer = function() {
            this._invalidated && (this._updateImpl(), this._invalidated = !1);
            var t = {
                text: this._text,
                coordinate: this._coordinate,
                color: this._color,
                borderColor: this._borderColor,
                background: this._active ? this._activeBackground : this._background,
                visible: this._visible
            };
            return new l(t)
        }, o.prototype.text = function() {
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), a.prototype.text.call(this)
        }, inherit(r, c), r.prototype.setActive = function(t) {
            this._active = t
        }, r.prototype.update = function() {
            this._invalidated = !0
        }, r.prototype.updateImpl = function() {
            var t, e, i;
            this._visible = !1, this._model.timeScale().isEmpty() || (t = this._linetool.axisPoints(), t.length <= this._pointindex || this._linetool === this._model.selectedSource() && (this._text = "", e = t[this._pointindex].index, this._coordinate = this._model.timeScale().indexToCoordinate(e), i = this._model.timeScale().indexToUserTime(e), i && (this._text = new f(this._model.mainSeries().isDWM()).format(i)), this._visible = !0, this._invalidated = !1))
        }, r.prototype.renderer = function() {
            this._invalidated && (this.updateImpl(), this._invalidated = !1);
            var t = {
                text: this._text,
                coordinate: this._coordinate,
                color: this._color,
                background: this._active ? this._activeBackground : this._background,
                borderColor: this._borderColor,
                visible: this._visible
            };
            return new h(t)
        }, inherit(s, d), s.LINEEND_NORMAL = 0, s.LINEEND_ARROW = 1, s.LINEEND_CIRCLE = 2, s.PointPriceProperty = function(e, i) {
            t.call(this), this._lineSource = e, this._pointIndex = i
        }, inherit(s.PointPriceProperty, t), s.prototype.enableCurrentIntervalVisibility = function() {
            var t, e, i, n, o, r, s, a = p.parse(this._model.mainSeries().interval());
            a.kind() === p.SECONDS && (a.multiplier() < 60 ? (this.properties().intervalsVisibilities.seconds.setValue(!0), t = Math.min(this.properties().intervalsVisibilities.secondsFrom.value(), a.multiplier()), this.properties().intervalsVisibilities.secondsFrom.setValue(t), e = Math.max(this.properties().intervalsVisibilities.secondsTo.value(), a.multiplier()), this.properties().intervalsVisibilities.secondsTo.setValue(e)) : a = new p(p.MINUTES, a.multiplier() / 60)), a.kind() === p.MINUTES && (a.multiplier() < 60 ? (this.properties().intervalsVisibilities.minutes.setValue(!0), t = Math.min(this.properties().intervalsVisibilities.minutesFrom.value(), a.multiplier()), this.properties().intervalsVisibilities.minutesFrom.setValue(t), e = Math.max(this.properties().intervalsVisibilities.minutesTo.value(), a.multiplier()), this.properties().intervalsVisibilities.minutesTo.setValue(e)) : (i = Math.floor(a.multiplier() / 60), this.properties().intervalsVisibilities.hours.setValue(!0), n = Math.min(this.properties().intervalsVisibilities.hoursFrom.value(), i), this.properties().intervalsVisibilities.hoursFrom.setValue(n), o = Math.max(this.properties().intervalsVisibilities.hoursTo.value(), i), this.properties().intervalsVisibilities.hoursTo.setValue(o))), a.kind() === p.DAYS && (this.properties().intervalsVisibilities.days.setValue(!0), r = Math.min(this.properties().intervalsVisibilities.daysFrom.value(), a.multiplier()), this.properties().intervalsVisibilities.daysFrom.setValue(r), s = Math.max(this.properties().intervalsVisibilities.daysTo.value(), a.multiplier()), this.properties().intervalsVisibilities.daysTo.setValue(s)), a.kind() === p.WEEKS && this.properties().intervalsVisibilities.weeks.setValue(!0), a.kind() === p.MONTHS && this.properties().intervalsVisibilities.months.setValue(!0)
        }, s.prototype.getType = function() {
            return TradingView.className(this.constructor)
        }, s.prototype.getConstructor = function() {
            return this._constructor || null
        }, s.prototype.isActualSymbol = function() {
            return this._isActualSymbol
        }, s.prototype.isActualInterval = function() {
            return this._isActualInterval
        }, s.prototype.isSavedInChart = function(t) {
            return !this.customization.disableSave
        }, s.prototype.visibilityKeyByInterval = function(t) {
            var e, i = p.parse(t);
            return s.IntervalsVisibilities.forEach(function(t) {
                t.kind === i.kind() && t.from <= i.multiplier() && t.to >= i.multiplier() && (e = t.key)
            }), e
        }, s.prototype.calcIsActualSymbol = function() {
            var t = this._properties.symbol,
                e = this._model.mainSeries();
            this._isActualSymbol = e.symbolSameAsCurrent(t.value()), this._isActualSymbol && t.setValue(e.symbol()), this.calcIsActualInterval()
        }, s.prototype.calcIsActualInterval = function() {
            var t, e, i, n, o = this._properties,
                r = this._model.mainSeries(),
                s = p.parse(r.interval()),
                a = o.intervalsVisibilities;
            this._isActualInterval = !1, s.kind() === p.SECONDS && (t = a.seconds.value(), e = a.secondsFrom.value(), i = a.secondsTo.value(), this._isActualInterval = t && s.multiplier() >= e && s.multiplier() <= i), s.kind() === p.MINUTES && s.multiplier() < 60 && (t = a.minutes.value(), e = a.minutesFrom.value(), i = a.minutesTo.value(), this._isActualInterval = t && s.multiplier() >= e && s.multiplier() <= i), s.kind() === p.MINUTES && s.multiplier() >= 60 && (n = Math.floor(s.multiplier() / 60), t = a.hours.value(), e = a.hoursFrom.value(), i = a.hoursTo.value(), this._isActualInterval = t && n >= e && i >= n), s.kind() === p.DAYS && (t = a.days.value(), e = a.daysFrom.value(), i = a.daysTo.value(), this._isActualInterval = t && s.multiplier() >= e && s.multiplier() <= i), s.kind() === p.WEEKS && (this._isActualInterval = a.weeks.value()), s.kind() === p.MONTHS && (this._isActualInterval = a.months.value()), this._isActualInterval || this._model.selectedSource() !== this || this._model.setSelectedSource(null)
        }, s.PointPriceProperty.prototype.value = function() {
            var t = this._lineSource.points()[this._pointIndex].price,
                e = this._lineSource.ownerSource().formatter(),
                i = e.parse(e.format(t));
            return i.price ? i.price : i.value
        }, s.PointPriceProperty.prototype.setValue = function(t) {
            var e, i, n = this._lineSource.points()[this._pointIndex];
            n.price = parseFloat(t), e = this._lineSource.priceScale(), e.isPercent() && (i = this._lineSource.ownerSource().firstValue(), n.price = e.priceRange().convertToPercent(n.price, i)), this._lineSource.setPoint(this._pointIndex, n), this._lineSource._model.updateSource(this._lineSource), this._listeners.fire(this), this._lineSource.endChanging(!0), this._lineSource._syncMultichartState(), this._lineSource._properties.lastUpdateTime.setValue((new Date).valueOf())
        }, s.PointIndexProperty = function(e, i) {
            t.call(this), this._lineSource = e, this._pointIndex = i
        }, inherit(s.PointIndexProperty, t), s.PointIndexProperty.prototype.value = function() {
            return this._lineSource.points()[this._pointIndex].index
        }, s.PointIndexProperty.prototype.setValue = function(t) {
            var e, i, n = this._lineSource.points()[this._pointIndex];
            n.index = t, e = this._lineSource.priceScale(), e.isPercent() && (i = this._lineSource.ownerSource().firstValue(), n.price = e.priceRange().convertToPercent(n.price, i)), this._lineSource.setPoint(this._pointIndex, n), this._lineSource._model.updateSource(this._lineSource), this._listeners.fire(this), this._lineSource.endChanging(!0), this._lineSource._syncMultichartState(), this._lineSource._properties.lastUpdateTime.setValue((new Date).valueOf())
        }, s.prototype._syncMultichartState = function() {
            var t = {
                points: this._timePoint,
                interval: this._model.mainSeries().interval()
            };
            this.linkKey && !this.properties().singleChartOnly && u.finishChangingLineTool({
                model: this._model,
                linkKey: this.linkKey,
                symbol: this._model.mainSeries().symbol(),
                finalState: t
            })
        }, s.prototype._createPointProperty = function(t) {
            var e, i = this._properties.points;
            i.addProperty(t), e = i[t], e.addProperty("price"), e.price = new s.PointPriceProperty(this, t), e.addProperty("bar"), e.bar = new s.PointIndexProperty(this, t)
        }, s.prototype._createPointsProperties = function() {
            this._properties.addProperty("points");
            for (var t = 0; t < this.pointsCount(); t++) this._createPointProperty(t)
        }, s.prototype.priceScale = function() {
            return this._ownerSource ? this._ownerSource.m_priceScale : null
        }, s.prototype.symbol = function() {
            return this._properties.symbol.value()
        }, s.prototype.properties = function() {
            return this._properties
        }, s.prototype.isSavedInStudyTemplates = function() {
            return !1
        }, s.prototype.state = function(t) {
            var e = TradingView.className(this.constructor),
                i = {
                    type: e,
                    id: this.id(),
                    state: this.properties().state(),
                    points: this._timePoint,
                    zorder: this.zorder(),
                    linkKey: this.linkKey
                };
            return i.state._isActualInterval = this.isActualInterval(), delete i.state.points, t && (i.indexes = this._points), this.ownerSource() && (i.ownerSource = this.ownerSource().id()), this.isFixed() && (i.positionPercents = this._positionPercents || this.calcPositionPercents()), "version" in this && 1 !== this.version && (i.version = this.version), this.hasAlert.value() && (i.alertId = this._alertId), i
        }, s.prototype.template = function() {
            var t = this.properties().state();
            return delete t.points, delete t.symbol, delete t.symbolInfo, t
        }, s.prototype.restoreTemplate = function(t) {
            delete t.symbolInfo, this._model._undoModel.drawingLoadTemplate(this, t)
        }, s.prototype.clearData = function() {
            this._points = []
        }, s.prototype.currentPointsetId = function() {
            return "pointset_" + this._currentPointsetId
        }, s.prototype.stop = function() {
            this._currentPointsetId && (this._model.chartApi().removePointset(this.currentPointsetId()), this._currentPointsetId = null), this.hasAlert.value() && TradingView.alertsDispatcher && TradingView.alertsDispatcher.deleteAlert(this._alertId)
        }, s.prototype.isStarted = function() {
            return !!this._currentPointsetId
        }, s.prototype.restart = function() {
            this.isFixed() || (this._currentPointsetId = 0, this.createServerPoints())
        }, s.prototype.tryCreateServerPoints = function() {
            this.isFixed() || this._currentPointsetId || this.createServerPoints()
        }, s.prototype.normalizePoint = function(t) {
            var e = this._model.timeScale().normalizeBarIndex(t.index);
            return e.price = t.price, e
        }, s.prototype.normalizePoints = function() {
            var t, e;
            for (this._timePoint = [], t = 0; t < this._points.length; t++) {
                if (e = this._model.timeScale().normalizeBarIndex(this._points[t].index), !e.time_t) {
                    this._timePoint = [];
                    break
                }
                e.price = this._points[t].price, this._timePoint.push(e)
            }
        }, s.prototype.denormalizeTimePoints = function() {
            var t, e, i = [];
            for (t = 0; t < this._timePoint.length; t++) {
                if (e = this._model.timeScale().denormalizeTimePoint(this._timePoint[t]), void 0 === e) {
                    i = [];
                    break
                }
                i.push({
                    index: e,
                    price: this._timePoint[t].price
                })
            }
            i.length > 0 && (this._points = i)
        }, s.prototype.restorePoints = function(t, e, i) {
            this._timePoint = t, this._points = e, i || this.denormalizeTimePoints()
        }, s.prototype.restoreExternalPoints = function(t) {
            this.properties().interval.setValue(t.interval), this._timePoint = t.points, this.denormalizeTimePoints(), this.createServerPoints()
        }, s.prototype.restorePositionPercents = function(t) {
            this._positionPercents = t
        }, s.prototype.updateAllViewsAndRedraw = function() {
            this.updateAllViews(), this._model.updateSource(this)
        }, s.prototype.propertiesChanged = function() {
            if (this.calcIsActualSymbol(), this.updateAllViewsAndRedraw(), this.linkKey) {
                var t = this.properties().state();
                delete t.interval, u.changeLineStyle({
                    linkKey: this.linkKey,
                    state: t,
                    model: this._model
                })
            }
        }, s.prototype.points = function() {
            var t, e, i = [];
            for (t = 0; t < this._points.length; t++) e = this._points[t], i.push({
                index: e.index,
                price: e.price,
                time: e.time
            });
            return this._lastPoint && i.push({
                index: this._lastPoint.index,
                price: this._lastPoint.price,
                time: this._lastPoint.time
            }), this._currentMovingPoint && this._startMovingPoint && this.correctPoints(i), i
        }, s.prototype.axisPoints = function() {
            return this.points()
        }, s.prototype.fixedPoints = function() {
            var t, e, i, o, r = [];
            if (this._positionPercents && !this.priceScale().isEmpty())
                for (t = 0; t < this._positionPercents.length; t++) e = this._positionPercents[t], i = this._model.timeScale().width() * e.x, o = this.priceScale().height() * e.y, r.push(new n.Point(i, o));
            else
                for (t = 0; t < this._fixedPoints.length; t++) r.push(this._fixedPoints[t].clone());
            return this._lastPoint && r.push(this._lastPoint.clone()), this._currentMovingPoint && this._startMovingPoint && this.correctFixedPoints(r), r
        }, s.prototype._convertPriceFromPercentIfNeeded = function(t) {
            var e, i = this.priceScale();
            i.isPercent() && (e = this.ownerSource().firstValue(), t.price = i.priceRange().convertFromPercent(t.price, e))
        }, s.prototype._preparePoint = function(t, e) {
            var i = t;
            return e && e.shift && this.points().length >= 2 && this._properties.snapTo45Degrees && this._snapPoint45Degree(i, this.points()[this.points().length - 2]), this._convertPriceFromPercentIfNeeded(i), i
        }, s.prototype.addPoint = function(t, e, i) {
            var n = this._preparePoint(t, e);
            return this._addPointIntenal(n, e, i)
        }, s.prototype._addPointIntenal = function(t, e, i) {
            this._points.push(t);
            var n = this._points.length === this.pointsCount();
            return n ? (this._lastPoint = null, i || (this.normalizePoints(), this.createServerPoints())) : this._lastPoint = t, n
        }, s.prototype.addFixedPoint = function(t) {
            this._fixedPoints.push(t);
            var e = this._fixedPoints.length === this.pointsCount();
            return e && this.calcPositionPercents(), e
        }, s.prototype.calcPositionPercents = function() {
            var t, e, i, n;
            if (!this.priceScale() || this.priceScale().isEmpty()) return [];
            for (this._positionPercents = [], t = 0; t < this._fixedPoints.length; t++) e = this._fixedPoints[0], i = e.x / this._model.timeScale().width(), n = e.y / this.priceScale().height(), this._positionPercents.push({
                x: i,
                y: n
            });
            return this._positionPercents
        }, s.prototype.restoreFixedPoints = function() {
            this._fixedPoints = this.fixedPoints()
        }, s.prototype.onData = function(t) {
            var e, i, n, o, r, s;
            if (t.params.customId === this.currentPointsetId() && 0 !== t.params.plots.length) {
                for (e = 0; e < t.params.plots.length; e++) i = t.params.plots[e], n = this._timePoint[i.index], o = i.value[0], r = new Date(1e3 * i.value[1]), s = {
                    index: o,
                    time: r,
                    price: n.price
                }, this._points.length <= i.index ? this._points.push(s) : this._points[i.index] = s;
                this.checkAlert && this.checkAlert(), this.updateAllViewsAndRedraw()
            }
        }, s.prototype.correctPricesToPercents = function() {
            var t, e, i = this.priceScale(),
                n = this.ownerSource().firstValue();
            for (t = 0; t < this._points.length; t++) e = this._points[t], e.price = i.priceRange().convertFromPercent(e.price, n)
        }, s.prototype.startChanging = function(t, e) {
            t < this.m_priceAxisViews.length && this.m_priceAxisViews[t].setActive(!0), t < this.m_timeAxisViews.length && this.m_timeAxisViews[t].setActive(!0), this._properties.lastUpdateTime.setValue((new Date).valueOf())
        }, s.prototype.setPoint = function(t, e, i) {
            if (i && i.shift && this._properties.snapTo45Degrees) {
                var n = 0 === t ? 1 : t - 1;
                this._snapPoint45Degree(e, this.points()[n])
            }
            this._convertPriceFromPercentIfNeeded(e), this._points[t] = e, this.normalizePoints()
        }, s.prototype.startMoving = function(t) {
            this.isFixed() && this.restoreFixedPoints(), this._convertPriceFromPercentIfNeeded(t), this._startMovingPoint = t, this._properties.lastUpdateTime.setValue((new Date).valueOf())
        }, s.prototype.move = function(t) {
            this._convertPriceFromPercentIfNeeded(t), this._currentMovingPoint = t, this.updateAllViews()
        }, s.prototype.correctPoints = function(t) {
            var e, i, n = this._currentMovingPoint.index - this._startMovingPoint.index,
                o = this._currentMovingPoint.price - this._startMovingPoint.price;
            for (e = 0; e < t.length; e++) i = t[e], i.index += n, i.price += o, t[e] = i
        }, s.prototype.correctFixedPoints = function(t) {
            var e, i = this._currentMovingPoint.substract(this._startMovingPoint);
            for (e = 0; e < t.length; e++) t[e] = t[e].add(i)
        }, s.prototype.endMoving = function(t) {
            var e, i;
            return this._properties.interval.setValue(this._model.mainSeries().interval()), e = !1, i = !1, this._currentMovingPoint && this._startMovingPoint && (e = this._currentMovingPoint.index !== this._startMovingPoint.index, i = this._currentMovingPoint.price !== this._startMovingPoint.price, this.isFixed() ? this.correctFixedPoints(this._fixedPoints) : this.correctPoints(this._points), this._startMovingPoint = null, this._currentMovingPoint = null), this.isFixed() ? (this.calcPositionPercents(), void this.updateAllViews()) : (this.normalizePoints(), this.updateAllViews(), e && !t && this.createServerPoints(), void((i || e) && this.synchronizeAlert(!this._alertUndoMode)))
        }, s.prototype.endChanging = function(t, e) {
            var i;
            for (this._properties.interval.setValue(this._model.mainSeries().interval()), e || (this.normalizePoints(), this.createServerPoints()), i = 0; i < this.m_priceAxisViews.length; i++) this.m_priceAxisViews[i].setActive(!1);
            for (i = 0; i < this.m_timeAxisViews.length; i++) this.m_timeAxisViews[i].setActive(!1);
            this.synchronizeAlert(!t)
        }, s.prototype.paneViews = function(t) {
            var e, i;
            if (!this._isActualSymbol || !this._isActualInterval) return null;
            if (!this._properties.visible.value()) return null;
            if (u.hideAllDrawings().value() && this.userEditEnabled()) return null;
            for (e = [], i = this._paneViews.length - 1; i >= 0; --i) e.push(this._paneViews[i]);
            return e
        }, s.prototype.dataWindowView = function() {
            return null
        }, s.prototype.statusView = function() {
            return null
        }, s.prototype.priceAxisViews = function(t, e) {
            var i, n, o;
            return this._isActualSymbol && -1 !== t.dataSources().indexOf(this) && e === this.priceScale() ? this._model.lineBeingEdited() === this ? (i = this._model.linePointBeingEdited(), i < this.m_priceAxisViews.length ? (n = this.m_priceAxisViews.slice(), o = n[i], n.splice(i, 1), n.push(o), n) : this.m_priceAxisViews) : this.m_priceAxisViews : null
        }, s.prototype.timeAxisViews = function() {
            var t, e, i;
            return this._model.lineBeingEdited() === this ? (t = this._model.linePointBeingEdited(), t < this.m_timeAxisViews.length ? (e = this.m_timeAxisViews.slice(), i = e[t], e.splice(t, 1), e.push(i), e) : this.m_timeAxisViews) : this.m_timeAxisViews
        }, s.prototype.updateAllViews = function() {
            var t, e, i;
            if (!this._isActualSymbol) return null;
            if (!this._properties.visible.value()) return null;
            if (t = this.paneViews(), null !== t)
                for (e = t, i = 0; i < e.length; i++) e[i].update();
            for (e = this.m_priceAxisViews, i = 0; i < e.length; i++) e[i].update();
            for (e = this.m_timeAxisViews, i = 0; i < e.length; i++) e[i].update()
        }, s.prototype.setLastPoint = function(t, e) {
            this._lastPoint = this._preparePoint(t, e), this.updateAllViews()
        }, s.prototype.setLastFixedPoint = function(t) {
            this._lastFixedPoint = t, this.updateAllViews()
        }, s.prototype.title = function() {
            return "Line Tool"
        }, s._pointSetId = 1, s.prototype.start = function() {
            this.createServerPoints()
        }, s.prototype.createServerPoints = function() {
            var t, e, i, n, o, r;
            if (!this._recursiveGuard && this._isActualSymbol && this._model.chartApi().connected() && (this._currentPointsetId && (this._model.chartApi().removePointset(this.currentPointsetId()), this._currentPointsetId = null), !this._model.timeScale().isEmpty() && (0 === this._timePoint.length && this.normalizePoints(), 0 !== this._timePoint.length))) {
                for (this._currentPointsetId = ++s._pointSetId, t = this._model.mainSeries().symbolId(), e = this.properties().interval.value(), i = [], n = 0; n < this._timePoint.length; n++) o = this._timePoint[n], i.push([o.time_t, o.offset]);
                r = this, this._model.chartApi().createPointset(this.currentPointsetId(), "turnaround", t, e, i, function(t) {
                    r.onData(t)
                })
            }
        }, s.prototype.isBeingEdited = function() {
            return this === this._model.lineBeingEdited() || this === this._model.sourceBeingMoved
        }, s.prototype.isFixed = function() {
            return this.properties().locked && this.properties().locked.value()
        }, s.prototype.isLocked = s.prototype.isFrozen = function() {
            return this.properties().frozen && this.properties().frozen.value()
        }, s.prototype._tooltipFieldsHash = {}, s.prototype._tooltipFieldsOrder = ["time", "price", "index", "time0", "price0", "time1", "price1", "time2", "price2", "time3", "price3", "time4", "price4", "distance", "term", "pointsPerBar"], s.prototype._tooltipFieldsOrdered = null, s.prototype._formatTooltip = function() {
            return null === this._tooltipFieldsOrdered && (this._tooltipFieldsOrdered = new _(this._tooltipFieldsHash, _.byOrder(this._tooltipFieldsOrder))), this._tooltipFieldsOrdered.array.filter(function(t) {
                return null !== t.value && "" !== t.value
            }).map(function(t) {
                return "<span>" + t.title + ":</span> " + t.value
            }).join("<br />")
        }, s.prototype.pointToScreenPoint = function(t) {
            var e, i, o, r, s, a, l = this._model.timeScale(),
                c = this.priceScale();
            if (!c || c.isEmpty() || l.isEmpty()) return [new n.Point(0, 0), new n.Point(0, 0)];
            if (e = null, c.isPercent()) {
                if (!this.ownerSource()) return;
                if (e = this.ownerSource().firstValue(), null === e || !isFinite(e)) return
            }
            return i = l.indexToCoordinate(t.index, !0), o = t.price, c.isPercent() && (o = c.priceRange().convertToPercent(o, e)), r = c.priceToCoordinate(o, !0), s = new n.Point(i, r), i = l.indexToCoordinate(t.index, !1), r = c.priceToCoordinate(o, !1), a = new n.Point(i, r), [s, a]
        }, s.prototype.screenPointToPoint = function(t) {
            var e = this._model.timeScale(),
                i = this.priceScale(),
                n = e.coordinateToIndex(t.x),
                o = i.coordinateToPrice(t.y),
                r = null;
            if (i.isPercent()) {
                if (!this.ownerSource()) return;
                if (r = this.ownerSource().firstValue(), null === r || !isFinite(r)) return
            }
            return i.isPercent() && (o = i.priceRange().convertFromPercent(o, r)), {
                price: o,
                index: n
            }
        }, s.prototype.tags = function() {
            return [this._constructor]
        }, s.prototype._snapPoint45Degree = function(t, e, i) {
            var n, o, r, s, a, l, c, h, d, u, p, f, _ = this._model.timeScale(),
                g = _.indexToCoordinate(e.index),
                m = _.indexToCoordinate(t.index) - g,
                v = this.m_priceScale,
                y = e.price,
                w = t.price,
                b = this.ownerSource().firstValue();
            v.isPercent() && (y = v.priceRange().convertToPercent(y, b)), n = v.priceToCoordinate(y), o = v.priceToCoordinate(w) - n, r = Math.round(Math.atan2(m, o) / Math.PI * 4), 2 === Math.abs(r) ? i || (t.price = y) : 0 === Math.abs(r) || 4 === Math.abs(r) ? i || (t.index = e.index) : 0 === Math.abs(r) || 4 === Math.abs(r) ? i || (t.index = e.index) : (s = Math.sqrt(m * m + o * o), a = 0 > m ? -1 : 1, l = 0 > o ? -1 : 1, c = Math.max(Math.abs(o), Math.abs(m)), h = c * Math.sqrt(2), d = h / s, c /= d, u = Math.round(_.coordinateToIndex(g + c * a)), p = Math.abs(_.indexToCoordinate(u) - g), f = v.coordinateToPrice(n + p * l), t.index = u, t.price = f)
        }, s.prototype.createPriceAxisView = function(t) {
            return new o(this, t)
        }, s.prototype.version = 1, s.isLineTool = function(t) {
            var e = TradingView[t];
            return e ? TradingView.isInherited(e, s) : !1
        }, s.prototype.alertId = function() {
            return this._alertId
        }, s.prototype.setAlert = function(t, e) {
            function n() {
                !e.noChartSave && window.saver ? window.saver.saveChartSilently(e.success, !1, function() {
                    TVDialogs.showGoProDialog({
                        feature: "savedChartsForAlertLimit"
                    }), "function" == typeof e.error && e.error()
                }, {
                    noDefaultOnFail: !0
                }) : "function" == typeof e.success && e.success()
            }
            var o, r, s, a = i(85),
                l = this;
            e = e || {}, o = t instanceof a ? t.id : parseInt(t), r = l._model.hoveredSource() === l, s = l._model.selectedSource() === l, this.canHasAlert() && (l._alertId = o, l.hasAlert.setValue(!0), TradingView.alertsDispatcher && l.getAlert().done(function(t) {
                l._processAlertHanders("unsubscribe"), l._processAlertHanders("subscribe"), t.set("hovered", r), t.set("selected", s)
            }).fail(function(t) {
                l._processAlertHanders("unsubscribe"), "not_exists" === t && l._flushAlert()
            }).always(function() {
                setTimeout(n, 0)
            }))
        }, s.prototype._flushAlert = function(t) {
            delete this._alertId, delete this._alert, this.hasAlert.setValue(!1), window.saver && window.saver.saveChartSilently(null, !1)
        }, s.prototype._processAlertHanders = function(t) {
            var e, i, n, o = this;
            t = "subscribe" === t ? "subscribe" : "unsubscribe", ("unsubscribe" !== t || o._alertCallbacks) && (i = "subscribe" === t ? "on" : "off", e = o.properties(), n = o._alertCallbacks || {
                    flush: o._flushAlert.bind(o),
                    hovered: function(t, e) {
                        e ? o._model.setHoveredSource(o) : o._model.hoveredSource() === o && o._model.setHoveredSource(null)
                    },
                    selected: function(t, e) {
                        e && o._model.setSelectedSource(o)
                    },
                    synchronizeSilently: function(t) {
                        o.synchronizeAlert(!1)
                    }
                }, o._alertCallbacks || (o._alertCallbacks = n), o.getAlert().done(function(r) {
                r && (r[i]("destroy", n.flush), r[i]("change:hovered", n.hovered), r[i]("change:selected", n.selected), e.extendLeft && e.extendLeft[t](o, n.synchronizeSilently), e.extendRight && e.extendRight[t](o, n.synchronizeSilently))
            }))
        }, s.prototype.editAlert = function() {
            function t(t) {
                "not_exists" === t && (e._flushAlert(), TVDialogs.ShowConfirm($.t("Alert"), $.t("Alert does not exist. Create new?"), function() {
                    new n({
                        drawing: e
                    })
                }))
            }
            var e = this,
                n = i(101);
            e.hasAlert.value() && TradingView.alertsDispatcher.openEditDialog(this.alertId(), {
                error: t
            })
        }, s.prototype.getAlert = function(t) {
            var e, i = this;
            return t = t || {}, e = $.Deferred(), TradingView.alertsDispatcher ? TradingView.alertsDispatcher.requestAlert(i._alertId, {
                success: e.resolve.bind(e),
                error: e.reject.bind(e),
                fromCache: t.fromCache
            }) : TradingView.logError("[Alerts] Can't get alert without alerts dispatcher"), e.promise()
        }, s.prototype.synchronizeAlert = function(t) {
            var e = this;
            e.hasAlert.value() && setTimeout(function() {
                function i() {
                    e._alertUndoMode = !0, s.undoToCheckpoint(e._undoCheckpointAlert), setTimeout(function() {
                        e._alertUndoMode = !1, e.localAndServerAlersMismatch = !1
                    }, 0)
                }

                function n(t) {
                    t.set("resolution", e.properties().interval.value()), t.get("extra").drawing(e), e.localAndServerAlersMismatch = !0
                }

                function o(t) {
                    TradingView.alertsDispatcher.restartAlert(t, {
                        success: function() {
                            e.localAndServerAlersMismatch = !1
                        },
                        error: i,
                        complete: function() {
                            delete e._undoCheckpointAlert
                        }
                    })
                }
                var r, s = e._model._undoModel;
                e._undoCheckpointAlert || e._alertUndoMode || (r = s.undoStack().pop(), e._undoCheckpointAlert = s.createUndoCheckpoint(), s.undoStack().push(r)), e.getAlert().done(function(e) {
                    n(e), t && o(e)
                }).fail(i)
            }, 0)
        }, s.prototype.stateForAlert = function() {
            var t, e;
            if (this.canHasAlert()) return t = this.state(), t.uniqueId = this.uniqueId(), t.title = this.title(), e = this._getAlertPlots(), e && (t.plots = e), t
        }, s.prototype._getAlertPlots = function() {
            return null
        }, s.prototype._linePointsToAlertPlot = function(t, e, i, n) {
            if (2 !== t.length) return TradingView.logError("[Drawing Alert] Wrong points"), null;
            var o = this._model.timeScale();
            return !o || o.isEmpty() ? null : {
                type: "LinePlot",
                title: e || this.title(),
                timestamp: Math.round(o.indexToTimePoint(0).getTime() / 1e3),
                offset1: t[0].index,
                offset2: t[1].index,
                price1: t[0].price,
                price2: t[1].price,
                extendBackward: i || !1,
                extendForward: n || !1
            }
        }, s.prototype.getAlertIsActive = function(t) {
            this.getAlert({
                fromCache: !0
            }).done(function(e) {
                t(e ? e.get("active") : !1)
            }).fail(function() {
                t(!1)
            })
        }, s.prototype.geometry = function() {
            var t = this,
                e = function(e) {
                    var i = e.x / t._model.timeScale().width(),
                        o = e.y / t.priceScale().height();
                    return new n.Point(i, o)
                },
                i = this.points().map(function(i) {
                    var n = t.pointToScreenPoint(i)[0];
                    return e(n)
                });
            return i
        }, s.prototype.onlyYMoving = function() {
            return !1
        }, e.LineToolPriceAxisView = o, e.LineDataSource = s
    }).call(e, i(55), i(40))
}, function(t, e, i) {
    "use strict";

    function n() {
        this._text = "", this._background = "#585858", this._coordinate = 0
    }
    var o = i(61).RGBColor;
    n.prototype.text = function() {
        return this._text
    }, n.prototype.background = function() {
        return this._background
    }, n.prototype.color = function() {
        return new o(this._background).blackWhiteContrast()
    }, n.prototype.coordinate = function() {
        return this._coordinate
    }, t.exports = n
}, function(t, e) {
    "use strict";

    function i(t) {
        this._data = t
    }
    i.prototype.draw = function(t, e) {
        var i, n, o, r, s, a, l, c, h, d, u, p, f, _, g, m;
        this._data.visible !== !1 && (t.font = e.font, i = e.paddingHorizontal, n = e.widthCache.measureText(t, this._data.text), 0 >= n || (o = n + 2 * i, r = Math.floor(this._data.coordinate - o / 2) + .5, s = r, a = s + o, l = a, c = Math.round(this._data.coordinate + 1), h = c, d = .5, u = d + e.borderSize + e.tickLength + e.paddingTop + e.fontSize + e.paddingBottom, p = u, f = d, _ = f, g = _ + e.borderSize + e.tickLength, m = u - e.baselineOffset - e.paddingBottom, t.fillStyle = this._data.background, t.lineWidth = 1, t.beginPath(), t.strokeStyle = this._data.color, t.moveTo(r, d), t.lineTo(s, u), t.lineTo(a, p), t.lineTo(l, f), t.fill(), t.beginPath(), t.moveTo(c, _), t.lineTo(h, g), t.stroke(), t.textAlign = "left", t.fillStyle = this._data.color, t.fillText(this._data.text, r + i, m)))
    }, t.exports = i
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n() {
            this._zorder = 0, this.m_priceScale = null, this._id = TradingView.randomHashN(6), this._ownerSource = null, this._userEditEnabled = !0, this.hasAlert = new t(!1)
        }

        function o(t) {
            n.call(this), this._isOverlay = null, this._model = t
        }
        var r = i(81).DefaultProperty;
        n.prototype.createPropertiesObject = function(t, e, i) {
            return new r(t, e, i)
        }, n.prototype.id = function() {
            return this._id
        }, n.prototype.uniqueId = function() {
            return this._id
        }, n.prototype.setId = function(t) {
            this._id = t
        }, n.prototype.zorder = function() {
            return this._zorder
        }, n.prototype.setZorder = function(t) {
            "number" == typeof t && this._zorder !== t && (this._zorder = t)
        }, n.prototype.title = function() {
            throw Error("Implement this fun in a subclass")
        }, n.prototype.priceScale = function() {
            return this.m_priceScale
        }, n.prototype.setPriceScale = function(t) {
            this.m_priceScale = t
        }, n.prototype.ownerSource = function() {
            return this._ownerSource
        }, n.prototype.setOwnerSource = function(t) {
            this._ownerSource = t, t && this.setPriceScale(t.priceScale())
        }, n.prototype.isSavedInChart = function(t) {
            return !0
        }, n.prototype.isSavedInStudyTemplates = function() {
            return !0
        }, n.prototype.isRemovedByStudyTemplates = function() {
            return !0
        }, n.prototype.hasContextMenu = function() {
            return !0
        }, n.prototype.showInObjectTree = function() {
            return !0
        }, n.prototype.setUserEditEnabled = function(t) {
            this._userEditEnabled = t
        }, n.prototype.userEditEnabled = function() {
            return this._userEditEnabled
        }, n.prototype.isUserDeletable = function() {
            return this.userEditEnabled()
        }, n.prototype.canHasAlert = function() {
            return !1
        }, n.prototype.properties = function() {
            throw Error("Implement this fun in a subclass")
        }, n.prototype.statusView = function() {
            return null
        }, n.prototype.dataWindowView = function() {
            return null
        }, n.prototype.priceAxisViews = function(t, e) {
            return null
        }, n.prototype.updateAllViews = function() {}, n.prototype.paneViews = function(t) {
            return null
        }, inherit(o, n), o.prototype.isNoScale = function() {
            return !!this._isOverlay
        }, o.prototype.base = function() {
            return 0
        }, o.prototype.formatter = function() {
            return null
        }, o.prototype.model = function() {
            return this._model
        }, o.prototype.priceRange = function(t, e) {
            return null
        }, e.DataSource = n, e.PriceDataSource = o
    }).call(e, i(17))
}, function(t, e, i) {
    "use strict";

    function n(t, e, i) {
        this._defaultName = t;
        var o;
        i ? o = e : (o = TradingView.clone(defaults(t)), e && TradingView.merge(o, e)), r.call(this, o), this._defaultName = t, this.listeners().subscribe(this, n.prototype.onPropertyChanged), this._exclusions = []
    }

    function o(t) {
        n._saveDefaults = t
    }
    var r = i(55);
    inherit(n, r), n._saveDefaults = !1, n.prototype.addExclusion = function(t) {
        this._exclusions.push(t)
    }, n.prototype.restoreFactoryDefaults = function() {
        var t, e = {};
        this._defaultName.startsWith("study_") && (e = TradingView.clone(TradingView.factoryDefaults("study"))), this._defaultName.startsWith("linetool") && (e = TradingView.clone(TradingView.factoryDefaults("linetoolvisibilities"))), t = TradingView.clone(TradingView.factoryDefaults(this._defaultName)), this._defaultName.startsWith("study_") && t.inputs && delete t.inputs.symbol, "linetoolicon" === this._defaultName && (t.icon = defaults(this._defaultName).icon), ~["linetooltext", "linetooltextabsolute", "linetoolnote", "linetoolnoteabsolute", "linetoolcallout", "linetoolballoon", "linetoolarrowmark", "linetoolarrowmarkleft", "linetoolarrowmarkup", "linetoolarrowmarkright", "linetoolarrowmarkdown", "linetoolhorzline", "linetoolhorzray"].indexOf(this._defaultName) && delete t.text, this._exclusions.forEach(function(e) {
            delete t[e]
        }), TradingView.merge(e, t), this.merge(e), this._defaultName.startsWith("study_") || TradingView.saveDefaults(this._defaultName, this.state(this._exclusions)), this.listeners().fire(this)
    }, n.prototype.cleanupFactoryDefaults = function() {
        var t = {};
        TradingView.saveDefaults(this._defaultName, t), this.listeners().fire(this)
    }, n.prototype.onPropertyChanged = function() {
        n._saveDefaults && !this._defaultName.startsWith("study_") && this.saveDefaults()
    }, n.prototype.saveDefaults = function() {
        TradingView.saveDefaults(this._defaultName, this.state(this._exclusions))
    }, n.prototype.clone = function(t) {
        return new n(this._defaultName, this.state(), t && t.replaceByState)
    }, e.DefaultProperty = n, e.saveDefaultProperties = o
}, function(t, e, i) {
    (function(e, n, o) {
        "use strict";

        function r(t) {
            return "cursor" === t || "arrow" === t || "dot" === t
        }

        function s(t) {
            !t && h && h.stayInDrawingMode.value() || this.tool.setValue(this.cursorTool.value())
        }

        function a(t, e) {
            return function(e) {
                t.inFire || (t.inFire = !0, t.fire(e), t.inFire = !1)
            }
        }

        function l() {
            G || (g.setValue(TVSettings.getValue("chart.cursorPreference", "cursor")), g.subscribe(function(t) {
                r(t) && m.setValue(t)
            }, {
                callWithLast: !0
            }), m.subscribe(function(t) {
                t && TVSettings.setValue("chart.cursorPreference", t)
            }), h = new c("drawings"), d = new o, u = new o, p = new o, f = new o, d.setValue(!1), u.setValue(!1), p.setValue(!1), f.setValue(!1), G = !0)
        }
        var c = i(81).DefaultProperty,
            h = null,
            d = null,
            u = null,
            p = null,
            f = null,
            _ = new e,
            g = new e,
            m = new e,
            v = new n,
            y = new n,
            w = new n,
            b = new n,
            S = new n,
            T = new n,
            x = new n,
            C = new n,
            P = new n,
            k = new n,
            I = new n,
            E = new n,
            L = new n,
            V = new n,
            M = new n,
            A = a(v),
            D = a(y),
            O = a(w),
            R = a(b),
            $ = a(S),
            B = a(T),
            z = a(x),
            N = a(C),
            H = a(P),
            F = a(k),
            W = a(I),
            U = a(E),
            q = a(L),
            Y = a(V),
            j = a(M),
            G = !1;
        t.exports = TradingView.drawingState = {
            tool: g,
            cursorTool: m,
            toolIsCursor: r,
            resetToCursor: s,
            init: l,
            createdLineTool: v,
            continuedLineTool: y,
            cancelledLineTool: w,
            createLineTool: A,
            continueLineTool: D,
            cancelLineTool: O,
            startedMovingLineTool: b,
            movedLineTool: S,
            finishedMovingLineTool: T,
            startMovingLineTool: R,
            moveLineTool: $,
            finishMovingLineTool: B,
            startedChangingLineTool: x,
            changedLineTool: C,
            finishedChangingLineTool: P,
            startChangingLineTool: z,
            changeLineTool: N,
            finishChangingLineTool: H,
            removedLineTool: k,
            removeLineTool: F,
            restoredLineTool: V,
            restoreLineTool: Y,
            restoredLineToolState: M,
            restoreLineToolState: j,
            finishedLineTool: I,
            finishLineTool: W,
            changedLineStyle: E,
            changeLineStyle: U,
            copiedLineTool: L,
            copyLineTool: q,
            properties: function() {
                return h
            },
            hideAllDrawings: function() {
                return d
            },
            hideMarksOnBars: function() {
                return p
            },
            lockDrawings: function() {
                return u
            },
            drawOnAllCharts: function() {
                return h.drawOnAllCharts
            },
            lockTimeAxis: function() {
                return f
            },
            lockTimeAxisTime: _
        }
    }).call(e, i(17), i(50), i(55))
}, function(t, e) {
    "use strict";

    function i(t, e, i, n) {
        if (e || (e = 1), TradingView.isInteger(t) || (t = 100), 0 > t) throw new TypeError("invalid base");
        return this._priceScale = t, this._minMove = e, this._minMove2 = n, n > 0 && 2 !== n && 4 !== n ? void TradingView.logDebugChart("invalid minmove2") : (this._fractional = i, void this.calculateDecimal())
    }

    function n(t, e) {
        var i, n;
        if (!isNumber(t)) return "n/a";
        if (!TradingView.isInteger(e)) throw new TypeError("invalid length");
        if (0 > e || e > 16) throw new TypeError("invalid length");
        return 0 === e ? "" + t : (i = "0000000000000000", n = (i + ("" + t)).right(e))
    }

    function o() {
        i.call(this, 100)
    }

    function r() {}

    function s(t) {
        this._format_str = t || "%h:%m:%s"
    }

    function a(t) {
        this._dwm = t
    }

    function l(t) {
        this._precision = t
    }

    function c(t) {
        this._numericFormatter = new l(t), this._fractionalValues = t > 0
    }

    function h() {}

    function d() {
        this._prev = null
    }
    i.prototype.isFractional = function() {
        return this._fractional
    }, i.prototype.decimalSign = ".", i.prototype.decimalSignFractional = "'", i.prototype.southandDelimeter = "`", i.prototype.fullPrecision = !1, i.prototype.state = function() {
        return {
            minMove: this._minMove,
            minMove2: this._minMove2,
            fractional: this._fractional,
            fractionalLength: this._fractionalLength
        }
    }, i.prototype.calculateDecimal = function() {
        if (this._fractionalLength = 0, this._priceScale > 0 && this._minMove > 0) {
            var t = this._priceScale;
            for (this._minMove2 && (t /= this._minMove2); t > 1;) t /= 10, this._fractionalLength++
        }
    }, i.prototype.format = function(t, e, i) {
        var n = "";
        return 0 > t ? (n = e === !0 ? "âˆ’" : "-", t = -t) : t && e === !0 && (n = "+"), this._fractional ? n + this.formatAsFractional(t, i) : n + this.formatAsDecimal(t, i)
    }, i.prototype._removeEndingZeros = function(t, e) {
        for (var i = 0; e > i && "0" === t[t.length - 1]; i++) t = t.substr(0, t.length - 1);
        return t
    }, i.prototype.formatAsDecimal = function(t, e) {
        var i, o, r, s, a;
        return e = e || 0, i = this._fractional ? Math.pow(10, this._fractionalLength || 0) : Math.pow(10, e) * this._priceScale / this._minMove, o = Math.floor(t), r = +(Math.round(t * i) - o * i).toFixed(this._fractionalLength), r >= i && (r -= i, o += 1), s = "", 1 !== i && (s = this.decimalSign + n(r.toFixed(this._fractionalLength) * this._minMove, this._fractionalLength + e), s = this._removeEndingZeros(s, e)), a = "" + o + s
    }, i.prototype.formatAsFractional = function(t, e) {
        var i, o, r, s, a, l, c, h, d, u = this._priceScale / this._minMove,
            p = Math.floor(t),
            f = e ? Math.floor(t * u) - p * u : Math.round(t * u) - p * u;
        return f === u && (f = 0, p += 1), i = "", e && (o = (t - p - f / u) * u, o = Math.round(o * Math.pow(10, e)), i = n(o, e), i = this._removeEndingZeros(i, e)), r = "", this._minMove2 ? (s = ["0", "5"], a = ["0", "2", "5", "7"], l = f % this._minMove2, f = (f - l) / this._minMove2, c = n(f, this._fractionalLength), h = 2 === this._minMove2 ? s[l] : a[l], r = c + this.decimalSignFractional + h) : r = n(f * this._minMove, this._fractionalLength), d = "" + p + this.decimalSignFractional + r + i
    }, i.prototype._parseAsDecimal = function(t) {
        var e, n, o = RegExp(/^(\-?)[0-9]+$/),
            r = o.exec(t);
        return r ? (e = parseFloat(t), {
            res: !0,
            suggest: this.format(e),
            price: e
        }) : (n = RegExp("^(-?)[0-9]+\\" + i.prototype.decimalSign + "[0-9]+$"), r = n.exec(t), r ? (e = parseFloat(t.replace(i.prototype.decimalSign, ".")), {
            res: !0,
            suggest: this.format(e),
            price: e
        }) : {
            res: !1,
            error: "not a number"
        })
    }, i.prototype._patchFractPart = function(t, e) {
        var i = {
                0: 0,
                5: 1
            },
            n = {
                0: 0,
                2: 1,
                5: 2,
                7: 3
            };
        return 2 === e ? void 0 === i[t] ? -1 : i[t] : 4 === e ? void 0 === n[t] ? -1 : n[t] : t
    }, i.prototype._parseAsSingleFractional = function(t) {
        var e, i, n, o, r, s = RegExp(/^[0-9]+$/),
            a = s.exec(t);
        return a ? (e = parseFloat(t), {
            res: !0,
            suggest: this.format(e),
            price: e
        }) : (i = RegExp("^([0-9]+)\\" + this.decimalSignFractional + "([0-9]+)$"), a = i.exec(t), a ? (n = parseInt(a[1]), o = this._priceScale, r = this._patchFractPart(parseInt(a[2]), o), r >= o || 0 > r ? {
            res: !1,
            error: "fraction part is invalid"
        } : (e = n + r / o, {
            res: !0,
            suggest: this.format(e),
            price: e
        })) : {
            res: !1,
            error: "not a number"
        })
    }, i.prototype._parseAsDoubleFractional = function(t) {
        var e, i, n, o, r, s, a, l = RegExp(/^[0-9]+$/),
            c = l.exec(t);
        return c ? (e = parseFloat(t), {
            res: !0,
            suggest: this.format(e),
            price: e
        }) : (i = RegExp("^([0-9]+)\\" + this.decimalSignFractional + "([0-9]+)\\" + this.decimalSignFractional + "([0-9]+)$"), c = i.exec(t), c ? (n = parseInt(c[1]), o = this._priceScale / this._minMove2, r = this._minMove2, s = this._patchFractPart(parseInt(c[2]), o), a = this._patchFractPart(parseInt(c[3]), r), s >= o || 0 > s ? {
            res: !1,
            error: "fraction part is invalid"
        } : a >= r || 0 > a ? {
            res: !1,
            error: "second fraction part is invalid"
        } : (e = n + s / o + a / (o * r), {
            res: !0,
            suggest: this.format(e),
            price: e
        })) : {
            res: !1,
            error: "not a number"
        })
    }, i.prototype.parse = function(t) {
        return this._fractional ? this._minMove2 ? this._parseAsDoubleFractional(t) : this._parseAsSingleFractional(t) : this._parseAsDecimal(t)
    }, inherit(o, i), o.prototype.state = function() {
        var t = i.prototype.state.call(this);
        t.percent = !0
    }, o.prototype.format = function(t, e) {
        return i.prototype.format.call(this, t, e) + "%"
    }, r.prototype.format = function(t) {
        return n(t.getUTCFullYear(), 4) + "-" + n(t.getUTCMonth() + 1, 2) + "-" + n(t.getUTCDate(), 2)
    }, s.prototype.format = function(t) {
        return this._format_str.replace("%h", n(t.getUTCHours(), 2)).replace("%m", n(t.getUTCMinutes(), 2)).replace("%s", n(t.getUTCSeconds(), 2))
    }, a.prototype.format = function(t) {
        var e = (new r).format(t);
        return this._dwm || (e += " " + (new s).format(t)), e
    }, l.prototype.format = function(t) {
        var e = this._precision ? t.toFixed(this._precision) : t + "";
        return e.replace(".", i.prototype.decimalSign)
    }, l.prototype.parse = function(t) {
        var e = t.replace(i.prototype.decimalSign, "."),
            n = parseFloat(e);
        return this._precision && (n = n.toFixed(this._precision)), n
    }, c.prototype.format = function(t) {
        function e(t) {
            return i._numericFormatter.format(t).replace(/(\.[1-9]*)0+$/, function(t, e) {
                return e
            })
        }
        var i, n;
        return isNumber(t) ? (i = this, n = "", 0 > t && (n = "-", t = -t), t >= 1e100 ? "N/A" : ((!this._fractionalValues || t >= 995) && (t = Math.round(t)), 995 > t ? n + e(t) : 999995 > t ? n + e(t / 1e3) + "K" : 999999995 > t ? (t = 1e3 * Math.round(t / 1e3), n + e(t / 1e6) + "M") : (t = 1e6 * Math.round(t / 1e6), n + e(t / 1e9) + "B"))) : "---"
    }, c.prototype.parse = function(t) {
        var e, i, n;
        return "---" === t ? {
            res: !1,
            value: NaN,
            error: "not a number"
        } : (e = {
            K: 1e3,
            M: 1e6,
            B: 1e9
        }, i = t.slice(-1), e.hasOwnProperty(i) ? (n = this._numericFormatter.parse(t.slice(0, -1)), isNumber(n) ? {
            res: !0,
            value: n * e[i]
        } : {
            res: !1,
            value: NaN,
            error: "not a number"
        }) : (n = this._numericFormatter.parse(t), isNumber(n) ? {
            res: !0,
            value: n
        } : {
            res: !1,
            value: NaN,
            error: "not a number"
        }))
    }, h.prototype.format = function(t) {
        var e, i, n, o, r = 0 > t;
        return t = Math.abs(t), e = Math.floor(t / 86400), t -= 86400 * e, i = Math.floor(t / 3600), t -= 3600 * i, n = Math.floor(t / 60), t -= 60 * n, o = "", e && (o += e + $.t("d", {
                context: "dates"
            }) + " "), i && (o += i + $.t("h", {
                context: "dates"
            }) + " "), n && (o += n + $.t("m", {
                context: "dates"
            }) + " "), t && (o += t + $.t("s", {
                context: "dates"
            }) + " "), r && (o = "-" + o), o.trimmed()
    }, d.formatSign = function(t, e) {
        return e = e || {}, 0 === t ? e.neutral || "#5A5D66" : t > 0 ? e.up || "#27AC66" : e.down || "#DA563E"
    }, d.formatDiff = function(t, e) {
        d.signFormat(e - t)
    }, d.prototype.format = function(t) {
        try {
            return null === this._prev ? d.formatSign(t) : d.formatDiff(this._prev, t)
        } finally {
            this._prev = t
        }
    }, e.PriceFormatter = i, e.numberToStringWithLeadingZero = n, e.PercentageFormatter = o, e.DateFormatter = r, e.TimeFormatter = s, e.DateTimeFormatter = a, e.NumericFormatter = l, e.TimeSpanFormatter = h, e.PriceColorer = d, e.VolumeFormatter = c
}, function(t, e) {
    "use strict";

    function i(t, e) {
        this.array = [];
        for (var i in t) t[i].key = i, this.array.push(t[i]);
        this.rearrange(e)
    }
    i.prototype.rearrange = function(t) {
        if ("function" != typeof t) throw Error("sort param is not a function");
        return this.array.sort(t)
    }, i.byValue = function(t) {
        return function(t, e) {
            return t - e
        }
    }, i.byField = function(t) {
        return function(e, i) {
            return e[t] > i[t] ? 1 : e[t] < i[t] ? -1 : e[t] === i[t] ? 0 : void 0
        }
    }, i.byOrder = function(t) {
        return function(e, i) {
            var n = t.indexOf(e.key),
                o = t.indexOf(i.key);
            return n - o
        }
    }, t.exports = i
}, function(t, e, i) {
    (function(e, n) {
        "use strict";

        function o(t) {
            var t = parseInt(t);
            return "chartproperties.alertsProperties." + t
        }
        var r = i(88),
            s = i(96),
            a = i(99),
            l = r.extend({
                constructor: function(t, i) {
                    var n = {};
                    ["autoDeactivation", "frequency", "extra", "crossInterval"].forEach(function(e) {
                        t.hasOwnProperty(e) && (n[e] = t[e], delete t[e])
                    }), e.isEmpty(n) || (this.__delayedInitAttrs = n), t.version = t.version || this.VERSION, r.call(this, t, i)
                },
                initialize: function() {
                    function t(t) {
                        e.set("crossInterval", !!t)
                    }
                    var e = this;
                    this.on("change:autoDeactivation", function(t, e, i) {
                        var n;
                        e ? (t.set("frequency", "once"), n = t.get("extra"), n && n.frequency("once")) : "once" === t.get("frequency") && t.set("frequency", "once_per_bar")
                    }).on("change:frequency", function(t, e, i) {
                        var n = t.get("extra");
                        "once" === e ? t.set("autoDeactivation", !0) : ("once_per_bar" === e || "on_bar_close" === e || /^\d+$/.test(e)) && t.set("autoDeactivation", !1), n && n.frequency(e)
                    }).on("change:extra", function(e, i, n) {
                        i && (i.crossInterval.unsubscribe(t), i.crossInterval.subscribe(t), e.set("crossInterval", i.crossInterval.value()))
                    }).on("change:crossInterval", function(t, e, i) {
                        var n = t.get("extra");
                        e ? t.set("resolution", "1") : n && "MainSeries" === n.alertSeries().type && t.set("resolution", n.alertSeries().interval)
                    }).on("destroy", function() {
                        TVSettings.remove(e.TVSettingsPropertiesKey(e.id))
                    }), this.id === TVSettings.getInt("alerts.widget.selected_alert_id", 0) && this.set("selected", !0), this.__delayedInitAttrs && (this.set(this.__delayedInitAttrs), delete this.__delayedInitAttrs)
                },
                set: function(t, e, i) {
                    var n;
                    return i = i || {}, null == t ? this : i.noPrepare ? r.prototype.set.call(this, t, e, i) : ("object" == typeof t ? (n = t, i = e) : (n = {})[t] = e, n = this._prepareToSet(n), r.prototype.set.call(this, n, i))
                },
                _prepareToSet_soundDuration: function(t) {
                    var t = parseInt(t);
                    return isNaN(t) && (t = 0), t
                },
                _prepareToSet_expired: function(t) {
                    return t instanceof Date ? t : new Date(1e3 * t)
                },
                _prepareToSet_extra: function(t) {
                    var e = this.get("extra"),
                        i = e && t,
                        n = t && !(t instanceof s);
                    return i ? t = e.update(t) : n ? t = new s(t) : t || (t = null), t
                },
                _prepareToSet_symbolInternal: function(t) {
                    return t ? t : void 0
                },
                isPrice: function() {
                    var t = this.get("extra") ? this.get("extra").price() : null;
                    return null !== t
                },
                isDrawing: function() {
                    return this.get("extra") && this.get("extra").drawing()
                },
                isMoving: function() {
                    return this.get("extra") && "moving" === (this.get("extra").conditionData() || {}).type
                },
                isOHLC: function() {
                    var t = this.get("extra");
                    return t && t.alertSeries() ? "MainSeries" === t.alertSeries().type : void 0
                },
                isJapanStyle: function() {
                    var t = this.get("extra"),
                        e = t && t.getMainSeries();
                    return !(!e || "MainSeries" !== e.type() || !e.isJapanStyle())
                },
                isComplexSymbol: function() {
                    var t = this.get("symbolInternal");
                    return t !== this.get("symbol") && t
                },
                hasProjection: function() {
                    var t = (this.getSeriesProperties() || {}).style,
                        e = i(53);
                    return -1 !== [e.STYLE_RENKO, e.STYLE_PB, e.STYLE_KAGI, e.STYLE_PNF].indexOf(t)
                },
                isPine: function() {
                    var t = this.get("extra"),
                        e = t && t.alertSeries();
                    return e && e.alerts
                },
                expiredReadable: function() {
                    return this._formatDate(this.get("expired"))
                },
                expiredUnix: function() {
                    return Math.round(this.get("expired").getTime() / 1e3)
                },
                defaultDescription: function() {
                    function t(t) {
                        return t.getPlots() && t.getPlots().length > 1
                    }
                    var e, o, r, s, a, l, c, h, d = "",
                        u = this.get("extra"),
                        p = u.conditionData(),
                        f = u.getAlertSeries();
                    switch (p.type) {
                        case "pine_script":
                            return p.message;
                        case "comparison":
                            p.isChannel ? (l = u.getUpperBand(), c = u.getLowerBand(), s = "(" + $.t("Upper Bound: __alertChannelUpperBoundaryTitle__ , Lower Bound: __alertChannelLowerBoundaryTitle__", {
                                    alertChannelUpperBoundaryTitle: l.title({
                                        withPlotTitle: t(l)
                                    }),
                                    alertChannelLowerBoundaryTitle: c.title({
                                        withPlotTitle: t(c)
                                    })
                                }) + ")") : (h = u.getBand(), s = h.title({
                                withPlotTitle: t(h)
                            }));
                            break;
                        case "moving":
                            s = p.percents ? u.movingValue() + "% " + $.t("inbars", {
                                period: u.movingPeriod()
                            }) : "$" + u.movingValue() + " " + $.t("inbars", {
                                period: u.movingPeriod()
                            })
                    }
                    switch (r = p.descriptionTitle || p.title, f.type()) {
                        case "MainSeries":
                            d = n.render("{{series}} {{condition}} {{conditionOptions}}", {
                                series: f.title({
                                    withInterval: !this.get("crossInterval")
                                }),
                                condition: r,
                                conditionOptions: s
                            });
                            break;
                        default:
                            o = this.getSeriesProperties(), o ? (e = i(53), a = e.generateTitleForGui({
                                symbol: this.shortSymbol(),
                                interval: this.resolutionReadable(),
                                style: o.style,
                                inputs: o.inputs,
                                boxSize: (o.inputs || {}).boxSize,
                                reversalAmount: (o.inputs || {}).reversalAmount
                            })) : a = this.shortSymbol(), d = $.t("__alertSeries__ __alertCondition__ __alertConditionOptions__ on __chartSeries__", {
                                alertSeries: f.title(),
                                chartSeries: a,
                                alertCondition: r,
                                alertConditionOptions: s
                            })
                    }
                    return d
                },
                setDefaultDescription: function() {
                    this.set("description", this.defaultDescription())
                },
                statusTitle: function() {
                    var t = "",
                        e = this.get("stopReason") || "",
                        i = this.get("error");
                    return this.get("active") ? t = $.t("Active") : (t = {
                        manual: $.t("Stopped Manual"),
                        expired: $.t("Expired"),
                        auto: $.t("Triggered and Not Active"),
                        error: $.t("Error"),
                        "default": $.t("Stopped")
                    }[e || "default"], "error" === e && i && (t += i)),
                        t
                },
                state: function() {
                    return this.toJSON()
                },
                toJSON: function() {
                    var t, e, i = {};
                    for (t in this.attributes) this.attributes.hasOwnProperty(t) && (e = this.attributes[t], i[t] = e && "function" == typeof e.toJSON ? e.toJSON() : e);
                    return i.expired && (i.expired = this.expiredUnix()), i
                },
                prepareToSend: function() {
                    var t, e, i, n, o = this.toJSON(),
                        r = ["id", "crossInterval", "autoDeactivation", "description", "sendEmail", "expired", "extra", "showPopup", "resolution", "script", "sendSms", "playSound", "soundDuration", "soundFile", "symbol"];
                    for (TradingView.isFeatureEnabled("japanese_alerts") && r.push("symbolInternal"), t = {}, n = r.length - 1; n >= 0; n--) e = r[n], i = o[e], void 0 !== i && (t[e] = i);
                    return t.playSound || (delete t.soundDuration, delete t.soundFile), t.extra && (t.extra = JSON.stringify(t.extra)), t
                },
                saveState: function() {
                    this._oldState = this.state()
                },
                restoreState: function(t) {
                    var t = t || this._oldState || {};
                    !t.extra || t.extra instanceof s || (t.extra = new s(t.extra)), this.set(t), delete this._oldState
                },
                getSavedState: function() {
                    var t;
                    return this._oldState && (t = $.extend({}, this._oldState), t.extra && (t.extra = new s(t.extra))), t
                },
                TVSettingsPropertiesKey: function() {
                    return o(this.id)
                },
                generateScript: function(t) {
                    function e(t) {
                        h.reject(t)
                    }

                    function i(t) {
                        o.translateToILAsync(t).done(n).fail(e)
                    }

                    function n(e) {
                        t && s.set("script", e), h.resolve(e)
                    }
                    var o, r, s = this,
                        l = {
                            symbol: s.get("symbolInternal") || s.get("symbol"),
                            resolution: s.get("resolution"),
                            extra: s.get("extra")
                        },
                        c = Object.keys(l),
                        h = $.Deferred();
                    if (!a) return void TradingView.logError("[Alerts] Can't generate script without AlertScriptGenerator");
                    for (r = 0; r < c.length; r++)
                        if (!l[c[r]]) return void TradingView.logError("[Alerts] Can't generate script without alert." + c[r]);
                    return o = new a(l.symbol, l.resolution, l.extra), o.generateAsync(!1, !0).done(i).fail(e), h.pipe()
                },
                getSeriesProperties: function() {
                    var t = i(53);
                    return t.parseSymbolString(this.get("symbolInternal"))
                }
            });
        t.exports = l
    }).call(e, i(8), i(86))
}, , , function(t, e, i) {
    (function(e, n) {
        "use strict";
        var o = i(89),
            r = i(12),
            s = e.Model.extend({
                constructor: function(t, i) {
                    t = this._prepareToSet(t, !0), e.Model.call(this, t, i)
                },
                _prepareToSet: function(t, e) {
                    var i, n, o;
                    if (t)
                        for (i in t) t.hasOwnProperty(i) && (n = t[i], o = "_prepareToSet_" + i, "function" == typeof this[o] && (t[i] = this[o](n, t, e)));
                    return t
                },
                destroy: function() {
                    this.stopListening(), this.trigger("destroy", this)
                },
                save: function() {
                    TradingView.logError("[Alerts] Use disaptcher to save")
                },
                shortSymbol: function(t) {
                    return r ? r.shortName(t || this.get("symbol") || "") : (TradingView.logWarn("[Alerts] can't get short symbol"), t)
                },
                resolutionReadable: function(t) {
                    if (!o) return TradingView.logWarn("[Alerts] can't get resolution readable"), t;
                    var t = t || this.get("resolution");
                    return t ? o.prototype.readable(t, !1, !0) : ""
                },
                title: function(t) {
                    var e;
                    return e = t ? this.get("symbol") : this.shortSymbol(), this.get("crossInterval") || (e = e + ",&nbsp;" + this.resolutionReadable()), e
                },
                _formatDate: function(t) {
                    return n(t || new Date).format("ll")
                }
            });
        t.exports = s
    }).call(e, i(7), i(23))
}, function(t, e, i) {
    (function(e, n) {
        "use strict";

        function o(t) {
            var o = i(90);
            this._options = $.extend({
                interval: 1
            }, t || {}), this._e = $("<div>").addClass("intervals-container favored-list-container"), this._quick = $("<div>").addClass("quick").appendTo(this._e), this._quicked = {}, this._main = $("<span>").text(this.shortLabel(this._options.interval)).appendTo(this._quick), this._main.data("interval", this._options.interval), e.enabled("header_interval_dialog_button") && this._setIntervalDialogButton(), this._mainSub = $("<span>").addClass("submenu").attr("title", $.t("Time Interval")).append($("<i>")).appendTo(this._e), t && "string" == typeof t.submenuBtnAddClass && this._mainSub.addClass(t.submenuBtnAddClass), this._quick.on("click", this._selectInterval.bind(this)), this._mainSub.on("click", this._selectMenu.bind(this)), this._menu = new o(this, this._mainSub, this._options), this.onResize = new n, s.intraday.subscribe(this._fullUpdate.bind(this)), s.supportedResolutions.subscribe(this._fullUpdate.bind(this)), t.interval && s.interval.setValue(t.interval), s.interval.subscribe(this.activateInterval.bind(this), {
                callWithLast: !0
            }), TVXWindowEvents.on("intervalwidget-change", this._onChangeInAnotherTab.bind(this)), this._fullUpdate()
        }
        var r = i(15),
            s = i(16);
        o.prototype.forceUpdate = function() {
            this._fullUpdate(!0)
        }, o.prototype._fullUpdate = function(t) {
            this._setupIntervals(t), this._setupQuicks(t), this.reactivateInterval(), this._resize()
        }, o.prototype._onChangeInAnotherTab = function() {
            this._fullUpdate(!0)
        }, o.prototype.isDefaultInterval = function(t) {
            return t in ChartApiInstance.defaultResolutions()
        }, o.prototype._setupIntervals = function() {
            this._intervals = $.extend({}, ChartApiInstance.defaultResolutions())
        }, o.prototype._sorted = function(t) {
            Array.isArray(t) || (t = Object.keys(t));
            var e = function(t) {
                var e = new r(t);
                return e.kind() !== r.MINUTES ? {
                    S: 1 / 60,
                    D: 1440,
                    W: 10080,
                    M: 43200
                }[e.letter()] * e.multiplier() : e.multiplier()
            };
            return t.sort(function(t, i) {
                return e(t) - e(i)
            })
        }, o.prototype.setUpStarredItemsList = function(t) {
            var e, i = {};
            for (e = 0; e < t.length; ++e) i[t[e]] = !0;
            this._setupQuicks(!1, i)
        }, o.prototype._setupQuicks = function(t, i) {
            this._options.notShowQuicks && !i || (i = i || {}, e.enabled("star_some_intervals_by_default") && (i = {
                1: !0,
                30: !0,
                60: !0
            }), this._quicked = TVSettings.getJSON("IntervalWidget.quicks", i, t), this._quicked = this._removeCustomIntervalQuicks(this._quicked)), this._addQuicked(this._quicked)
        }, o.prototype._removeCustomIntervalQuicks = function(t) {
            var e = {};
            return Object.keys(t).forEach(function(i) {
                this.isDefaultInterval(i) && (e[i] = t[i])
            }, this), e
        }, o.prototype.element = function() {
            return this._e
        }, o.prototype.mainButton = function() {
            return this._main
        }, o.prototype._quicks = function() {
            return this._quick.find("span").slice(0, -1)
        }, o.prototype.postfix = function(t, e) {
            if (e) {
                var i = " ";
                switch (t) {
                    case "D":
                        i += $.t("day", {
                            count: e
                        });
                        break;
                    case "W":
                        i += $.t("week", {
                            count: e
                        });
                        break;
                    case "M":
                        i += $.t("month", {
                            count: e
                        });
                        break;
                    case "S":
                        i += $.t("second", {
                            count: e
                        });
                        break;
                    case "m":
                        i += $.t("minute", {
                            count: e
                        });
                        break;
                    case "h":
                        i += $.t("hour", {
                            count: e
                        })
                }
                return i
            }
            switch (t) {
                case "m":
                    return "";
                case "h":
                    return $.t("h", {
                        context: "dates"
                    });
                default:
                    return $.t(t.toUpperCase(), {
                        count: 0
                    })
            }
        }, o.prototype.readable = function(t, e, i) {
            function n(t) {
                return t >= 60 && !(t % 60)
            }
            var o, s;
            if (t = t, o = "m", e = e, s = new r(t), !s.isValid()) throw new TypeError("Wrong interval value: " + t);
            return s.kind() !== r.MINUTES && (o = s.letter()), t = s.multiplier(), s.kind() === r.MINUTES && n(t) && (t = ~~(t / 60), o = "h"), e = e ? t : null, t = i && 1 === t && s.isDWM() ? "" : t, "" + t + this.postfix(o, e)
        }, o.prototype.shortLabel = function(t) {
            return TradingView.translatedIntervalString(this.readable(t, !1))
        }, o.prototype.fullLabel = function(t) {
            return this.readable(t, !0)
        }, o.prototype._addQuicked = function(t) {
            var e, n, o, r, s, a, l, c;
            for (t = this._sorted(t), e = this._quicks(), n = $(), o = !1, e.size() > t.length && (e.slice(t.length).remove(), o = !0), r = i(14), s = 0; s < t.length; s++) a = t[s], l = e.eq(s), c = !1, l.size() ? l.data("interval") !== a && (c = !0) : (l = $("<span>"), n = n.add(l), c = !0), c && (l.data("interval", a).text(this.shortLabel(a)), o = !0), l.toggleClass("selected", a === this.getInterval()).toggleClass("disabled", !r.isAvailable(a));
            this._main.before(n), o && this._resize()
        }, o.prototype._resize = function() {
            this.onResize.fire()
        }, o.prototype.addQuick = function(t) {
            this._quicked[t] = !0, this._addQuicked(this._quicked), this.saveSettings(), this.reactivateInterval()
        }, o.prototype._quickWithInterval = function(t) {
            var e = null;
            return this._quicks().each(function(i, n) {
                return n = $(n), t === n.data("interval") ? (e = n, !1) : void 0
            }), e
        }, o.prototype.inQuick = function(t) {
            return null != this._quickWithInterval(t)
        }, o.prototype.removeQuick = function(t) {
            this._quickWithInterval(t) && (this._quickWithInterval(t).remove(), this._resize(), delete this._quicked[t], this.saveSettings(), this.reactivateInterval())
        }, o.prototype.toggleQuick = function(t) {
            var e = this.inQuick(t);
            return e ? this.removeQuick(t) : this.addQuick(t), !e
        }, o.prototype.hasQuicks = function() {
            return !!this._quicks().length
        }, o.prototype.deactivate = function(t) {
            this._quick.find("span").removeClass("selected")
        }, o.prototype.activateInterval = function(t) {
            this.deactivate(), this.inQuick(t) ? this._quickWithInterval(t).addClass("selected") : (this.hasQuicks() && this._main.addClass("selected"), this._main.data("interval") !== t && (this._main.text(this.shortLabel(t)), this._main.data("interval", t), this._resize()))
        }, o.prototype.reactivateInterval = function() {
            this.activateInterval(this.getInterval())
        }, o.prototype.getInterval = function() {
            return s.interval.value()
        }, o.prototype.setInterval = function(t) {
            s.interval.setValue("" + t)
        }, o.prototype._selectInterval = function(t) {
            var e = $(t.target),
                i = e.data("interval");
            this.hasQuicks() || this.getInterval() !== i ? e.hasClass("disabled") || this.setInterval(i) : this._selectMenu()
        }, o.prototype._selectMenu = function(t) {
            this._mainSub.hasClass("active") ? this._menu.close() : this._menu.open(this._sorted(this._intervals))
        }, o.prototype._setIntervalDialogButton = function() {
            var t = i(19);
            this._intervalDialogButton = $("<span>").addClass("submenu interval-dialog-button apply-common-tooltip").attr("title", $.t("Open Interval Dialog")).append($("<i>")).appendTo(this._e).click(function() {
                var e = new t({
                        callback: function(t) {
                            s.interval.setValue(t)
                        }
                    }).show(),
                    i = $(this);
                i.addClass("active"), e.on("destroy", function() {
                    i.removeClass("active")
                })
            })
        }, o.prototype.addInterval = function(t) {}, o.prototype.removeInterval = function(t) {}, o.prototype.saveIntervals = function() {}, o.prototype.saveQuicked = function() {
            TVSettings.setJSON("IntervalWidget.quicks", this._quicked)
        }, o.prototype.saveSettings = function() {
            this.saveQuicked(), this.saveIntervals(), TVXWindowEvents.emit("intervalwidget-change")
        }, t.exports = o
    }).call(e, i(3), i(50))
}, function(t, e, i) {
    (function(e, n) {
        "use strict";

        function o(t, e, i) {
            this._options = i || {}, this._w = t, this._opener = e, this._addMetric = 1, this._addOpened = !1
        }
        var r = i(15),
            s = i(14),
            a = i(91).bindPopupMenu;
        o.prototype._interval = function(t) {
            var e = $(t.target);
            e.hasClass("disabled") || (this._w.setInterval(e.data("interval")), this.close())
        }, o.prototype._quickTitle = function(t) {
            return t ? $.t("Remove from favorites") : $.t("Add to favorites")
        }, o.prototype._onQuick = function(t) {
            var e = $(t.target).closest(".item"),
                i = this._w.toggleQuick(e.data("interval"));
            return e.toggleClass("quicked", i), $(t.target).closest(".to-quick").attr("title", this._quickTitle(i)), !1
        }, o.prototype._onDelete = function(t) {
            var e = $(t.target.parentNode);
            return this._w.removeInterval(e.data("interval")), this._reopen(), !1
        }, o.prototype._showControlButtons = function() {
            return !0
        }, o.prototype._append = function(t, i) {
            var n = $("<span>").addClass("item").toggleClass("active", i === this._w.getInterval()).toggleClass("quicked", this._w.inQuick(i)).toggleClass("disabled", !s.isAvailable(i)).text(this._w.fullLabel(i)).data("interval", i);
            this._showControlButtons() && (this._w.isDefaultInterval(i) || n.prepend($("<span>").addClass("delete").attr("title", $.t("Remove custom interval")).click(this._onDelete.bind(this))), this._w._options.notShowQuicks || n.prepend($("<span>").addClass("to-quick").append(e("star", "16x16")).attr("title", this._quickTitle(this._w.inQuick(i))).click(this._onQuick.bind(this)))), n.click(this._interval.bind(this)), t.append(n)
        }, o.prototype._appendAdd = function(t) {
            function e() {
                var t, e = parseInt(r.val());
                1 > e && r.val(1), t = {
                    1: 1440,
                    60: 24,
                    D: 364,
                    W: 52,
                    M: 12
                }[this._addMetric], e > t && r.val(t)
            }
            var i, n = $("<span>").addClass("item-add"),
                o = $('<span class="item-add-wrap">').appendTo(n),
                r = $('<input type="text">').addClass("tv-text-input inset minutes").val(1).appendTo(o).TVTicker(),
                s = $("<span>").addClass("_tv-button mins").append($("<span>")).append($("<i>")).appendTo(o),
                l = $("<span>").addClass("_tv-button add").text($.t("Add")).appendTo(o),
                c = {
                    1: $.t("minute_plural"),
                    60: $.t("hour_plural"),
                    D: $.t("day_plural"),
                    W: $.t("week_plural"),
                    M: $.t("month_plural")
                };
            s.find("span").text(c[this._addMetric || 1]), r.change(e.bind(this)), i = this, a(s, null, {
                direction: "up",
                event: "button-popup",
                addClass: "thin small-font metrics",
                popupSpacing: ~~this._w._options.popupSpacing,
                onRemove: function() {
                    i._addOpened = !1
                }
            }), s.click(function() {
                i._addOpened = !0, s.trigger("button-popup", [$.map(c, function(t, n) {
                    return {
                        title: t.toUpperCase(),
                        active: n === i._addMetric,
                        action: function() {
                            return i._addMetric = n, s.find("span").text(t), e.call(i), !1
                        }
                    }
                })])
            }), l.click(function() {
                TradingView.trackGoProFeature("customIntervals"), TradingView.runOrGoPro(function() {
                    var t, e = parseInt(r.val());
                    e == e && (t = parseInt(i._addMetric), t == t ? i._addInterval("" + e * i._addMetric) : i._addInterval("" + e + i._addMetric))
                }, {
                    feature: "customIntervals"
                })
            }), t.append($("<div>").addClass("separator")), t.append(n)
        }, o.prototype._addInterval = function(t) {}, o.prototype._open = function(t, e) {
            var i, o, s, a, l;
            t.find(".item, .item-add, .separator").remove(), i = [], o = [], s = [], a = [], l = $("<span>").addClass("separator"), $.each(e, function(t, e) {
                var n = new r(e);
                n.isDWM() ? a.push(e) : n.kind() === r.HOURS ? s.push(e) : n.kind() === r.MINUTES ? o.push(e) : i.push(e)
            }), i.length && i.forEach(function(e) {
                this._append(t, e)
            }.bind(this)), o.length && (t.append(l.clone()), o.forEach(function(e) {
                this._append(t, e)
            }.bind(this))), s.length && (t.append(l.clone()), s.forEach(function(e) {
                this._append(t, e)
            }.bind(this))), a.length && (t.append(l.clone()), a.forEach(function(e) {
                this._append(t, e)
            }.bind(this))), n.enabled("custom_resolutions_box") && this._appendAdd(t)
        }, o.prototype._reopen = function(t) {
            if (this._open(this._menu, this._w._sorted(this._w._intervals)), t && t.highlight) {
                var e = this._menu.find(".item").filter(function() {
                    return $(this).data("interval") === t.highlight
                });
                e.length && e.highlight(2)
            }
        }, o.prototype.open = function(t) {
            var e, i = this,
                n = $("<div>").addClass("charts-popup-list intervals-list favored-list").toggleClass("touch", Modernizr.touch),
                o = this._w.mainButton().offset(),
                r = this._w.mainButton().outerHeight(),
                s = o.top + r + parseInt(i._options.popupSpacing || 0),
                a = 10;
            n.appendTo(document.body), n.css({
                top: s,
                left: o.left
            }).show(), this._menu = n, this._opener.addClass("active"), this._open(n, t), e = Math.min($("body").height(), $(window).height()) - r - s - a, this._setMaxHeight(n, e), setTimeout(function() {
                n.on("mousedownoutside", function(t) {
                    this.close(t) && n.unbind("mousedownoutside")
                }.bind(this))
            }.bind(this), 0)
        }, o.prototype._setMaxHeight = function(t, e) {
            t.height() >= e && (t.css("max-height", e + "px"), t.width(t.width() + 18))
        }, o.prototype.close = function(t) {
            return t && $(t.target).parents("span.item-add, .charts-popup-list.metrics").length ? !1 : t && $(t.target).hasClass("submenu") && $(t.target).parents(".intervals-container").length ? !1 : (this._menu.remove(), $(document.body).off(".interval-menu"), delete this._menu, this._opener.removeClass("active"), !0)
        }, t.exports = o
    }).call(e, i(5), i(3))
}, function(t, e, i) {
    (function(t, n, o) {
        "use strict";
        var r, s, a, l, c, h, d, u, p, f, _, g, m, v, y, w, b, S, T, x, C, P, k, I, E, L, V, M, A, D, O, R, B, z;
        "undefined" != typeof FlashCanvas && FlashCanvas.setOptions({
            disableContextMenu: !0
        }), r = function(t, e) {
            if (t.width = e.w, t.height = e.h, "undefined" == typeof FlashCanvas) {
                var i = t.getContext("2d");
                i.translate(.5, .5)
            }
        }, e.setCanvasSize = r, s = function(t, e, i, n, o, r) {
            t.save(), "undefined" == typeof FlashCanvas && t.translate(-.5, -.5), t.fillStyle = r, t.fillRect(e, i, n, o), t.restore()
        }, e.clearRect = s, a = function(t, e) {
            var i = document.createElement("canvas");
            return t.append(i), "undefined" != typeof FlashCanvas && FlashCanvas.initElement(i), r(i, e), i
        }, e.addCanvasTo = a, l = function(t, e, i, n) {
            this.x = t, this.y = e, this.w = i, this.h = n
        }, e.Rect = l, c = function(t, e) {
            this.w = t, this.h = e
        }, e.Size = c, c.prototype.equals = function(t) {
            return this.w === t.w && this.h === t.h
        }, h = function(t, e) {
            this.x = t, this.y = e
        }, e.Point = h, d = function(t, e) {
            t.css("position", "absolute"), t.css("left", e.x + "px"), t.css("top", e.y + "px"), t.width(e.w), t.height(e.h)
        }, e.setAbsoluteRect = d, u = function(t, e) {
            t.css("position", "absolute"), t.css("left", e.x + "px"), t.css("top", e.y + "px")
        }, e.setAbsolutePos = u, p = function(t, e) {
            var i = t.offset();
            e.localX = e.pageX - i.left, e.localY = e.pageY - i.top
        }, e.addLocalCoordsToMouseEvent = p, f = function(t, e, i, n, o) {
            n && (o || p(e, t), n.call(i, t, e))
        }, e.processEvent = f, _ = 2, g = function(t, e, i) {
            var n, o, r, s, a, l, c, h, d, u, p, g, m, v, y = function(n) {
                t.off("mousemove.chartgui");
                var o = function(n) {
                    TradingView.mousePressed && !Modernizr.touch || (f(n, t, e, e.mouseMoveEvent), i && n.preventDefault())
                };
                t.on("mousemove.chartgui", o), Modernizr.touch && o(n), f(n, t, e, e.mouseEnterEvent), i && n.preventDefault()
            };
            t.mouseenter(y), n = 0, o = null, r = 500, s = function() {
                window.clearTimeout(o), n = 0, o = null
            }, a = {
                x: 0,
                y: 0
            }, l = null, c = 500, h = function(h) {
                var d, u;
                if (void 0 === h.button && (h.button = 0), (Modernizr.touch || h.originalEvent.touches) && (h.pageX = h.originalEvent.touches[0].pageX, h.pageY = h.originalEvent.touches[0].pageY, h.localX = h.originalEvent.touches[0].pageX, h.localY = h.originalEvent.touches[0].pageY, y(h)), d = function(n) {
                        void 0 === n.button && (n.button = 0), (Modernizr.touch || n.originalEvent.touches) && (n.pageX = n.originalEvent.touches[0].pageX, n.pageY = n.originalEvent.touches[0].pageY, n.localX = n.originalEvent.touches[0].pageX, n.localY = n.originalEvent.touches[0].pageY, n.clientX = n.originalEvent.touches[0].pageX, n.clientY = n.originalEvent.touches[0].pageY, a.x = n.pageX, a.y = n.pageY, clearTimeout(l)), n.button !== _ && f(n, t, e, e.pressedMouseMoveEvent), i && n.preventDefault()
                    }, u = function(r) {
                        void 0 === r.button && (r.button = 0), (Modernizr.touch || r.originalEvent.touches) && (r.pageX = a.x, r.pageY = a.y, r.localX = a.x, r.localY = a.y, clearTimeout(l)), TradingView.mousePressed = !1, $(document.body).off("mousemove.chartgui"), $(document.body).off("mouseup.chartgui"), Modernizr.touch || r.originalEvent.touches ? ($(document.body).off("touchmove.chartgui"), $(document.body).off("touchend.chartgui"), m(r)) : ($(document.body).off("mousemove.chartgui touchmove.chartgui"), $(document.body).off("mouseup.chartgui touchend.chartgui")), r.button !== _ && (f(r, t, e, e.mouseUpEvent), ++n, o && n > 1 ? (f(r, t, e, e.mouseDoubleClickEvent), s()) : f(r, t, e, e.mouseClickEvent)), i && r.preventDefault(), Modernizr.touch && m(r)
                    }, Modernizr.touch ? ($(document.body).off("touchmove.chartgui"), $(document.body).off("touchend.chartgui"), $(document.body).on("touchmove.chartgui", d), $(document.body).on("touchend.chartgui", u), l = setTimeout(function() {
                        v(h)
                    }, c)) : ($(document.body).off("mousemove.chartgui touchmove.chartgui"), $(document.body).off("mouseup.chartgui touchend.chartgui"), $(document.body).on("mousemove.chartgui touchmove.chartgui", d), $(document.body).on("mouseup.chartgui touchend.chartgui", u)), TradingView.mousePressed = !0, h.button !== _ && (f(h, t, e, e.mouseDownEvent), o || (n = 0, o = window.setTimeout(s, r))), i) {
                    h.preventDefault();
                    try {
                        window.focus()
                    } catch (p) {}
                }
            }, t.on("touchcancel", function() {
                clearTimeout(l)
            }), Modernizr.touch ? (t.on("touchstart.chartgui", h), t.on("touchstartoutside mousedownoutside", function(i) {
                f(i, t, e, e.mouseDownOutsideEvent, !0)
            }), t.on("gesturestart", function(i) {
                f(i, t, e, e.gestureStartEvent), clearTimeout(l)
            }), t.on("gesturechange", function(i) {
                i.scale = i.originalEvent.scale, f(i, t, e, e.gestureChangeEvent)
            }), t.on("gestureend", function(i) {
                f(i, t, e, e.gestureEndEvent)
            })) : (t.on("mousedown.chartgui touchstart.chartgui", h), t.on("touchstartoutside  mousedownoutside", function(i) {
                f(i, t, e, e.mouseDownOutsideEvent, !0)
            }), navigator.msPointerEnabled && window.MSGesture && (d = new MSGesture, u = !1, p = 1, g = t.get(0), d.target = g, g.gesture = d, g.gesture.pointerType = null, g.pointers = [], d.pointerType = null, t.on("pointerdown", function(t) {
                if (t.target === this)
                    if (null === this.gesture.pointerType) this.gesture.target = g, this.gesture.addPointer(t.originalEvent.pointerId), this.gesture.pointerType = t.originalEvent.pointerType;
                    else if (t.originalEvent.pointerType === this.gesture.pointerType) this.gesture.addPointer(t.originalEvent.pointerId);
                    else {
                        var e = new MSGesture;
                        e.target = t.originalEvent.target, t.originalEvent.target.gesture = e, t.originalEvent.target.gesture.pointerType = t.originalEvent.pointerType, t.originalEvent.target.gesture.addPointer(t.originalEvent.pointerId)
                    }
            }), t.on("MSGestureChange", function(i) {
                var n = 1 * (i.originalEvent.scale - 1) + 1;
                i.scale = p *= n, u || 1 === i.originalEvent.scale || (u = !0, f(i, t, e, e.gestureStartEvent)), u && f(i, t, e, e.gestureChangeEvent)
            }), t.on("MSGestureEnd", function(i) {
                u = !1, p = 1, f(i, t, e, e.gestureEndEvent)
            }))), m = function(n) {
                t.off("mousemove.chartgui touchmove.chartgui"), f(n, t, e, e.mouseLeaveEvent), i && n.preventDefault()
            }, t.mouseleave(m), v = function(n) {
                f(n, t, e, e.contextMenuEvent), i && n.preventDefault()
            }, t.contextMenu && t.contextMenu(v)
        }, e.setMouseEventHandler = g, m = function(t) {
            var e = t.offset(),
                i = t.width(),
                n = t.height(),
                o = new l(e.left, e.top, i, n);
            return o
        }, e.clientRect = m, v = function(t) {
            var e = 0,
                i = 0;
            do e += t.offsetLeft, i += t.offsetTop, t = t.offsetParent; while (t);
            return {
                left: e,
                top: i
            }
        }, e.offsetPosition = v, y = function(t) {
            var e, i = $("<span class='tvcolorpicker-container'>").appendTo(t);
            return $("<div class='tvcolorpicker-transparency'>").appendTo(i), e = $("<input>").appendTo(i).tvcolorpicker(), e.on("change", function() {
                $(this).css("border-color", TradingView.generateLowBrightnessColor($(this).val() || TradingView.defaultColorPickersBorder))
            }), TVSettings && (e.tvcolorpicker.setCustomColors = TVSettings.setJSON("pickerCustomColors", []), e.bind("customcolorchange", function(t, e) {
                TVSettings.setJSON("pickerCustomColors", e)
            })), i
        }, e.addColorPicker = y, w = function() {
            var t = i(92).Combobox;
            return new t([{
                value: CanvasEx.LINESTYLE_SOLID,
                html: '<div class="linestyle solidline"/>'
            }, {
                value: CanvasEx.LINESTYLE_DOTTED,
                html: '<div class="linestyle dottedline"/>'
            }, {
                value: CanvasEx.LINESTYLE_DASHED,
                html: '<div class="linestyle dashedline"/>'
            }])
        }, e.createLineStyleEditor = w, b = function() {
            return $('<select><option value="' + CanvasEx.MARKLOC_ABOVEBAR + '">' + $.t("Above Bar") + '</option><option value="' + CanvasEx.MARKLOC_BELOWBAR + '">' + $.t("Below Bar") + '</option><option value="' + CanvasEx.MARKLOC_TOP + '">' + $.t("Top") + '</option><option value="' + CanvasEx.MARKLOC_BOTTOM + '">' + $.t("Bottom") + '</option><option value="' + CanvasEx.MARKLOC_ABSOLUTE + '">' + $.t("Absolute") + "</option></select>")
        }, e.createShapeLocationEditor = b, S = function() {
            var t, e, n, o = i(95).StudyPlotShapes,
                r = "<select>",
                s = Object.keys(o.Data);
            for (t = 0; t < s.length; ++t) e = s[t], n = o.Data[e], r += '<option value="' + n.id + '">' + n.guiName + "</option>";
            return r += "</select>", $(r)
        }, e.createShapeStyleEditor = S, T = function() {
            return $('<div class="linewidth-slider">').slider({
                min: 1,
                max: 4,
                step: 1
            })
        }, e.createLineWidthEditor = T, x = function() {
            var t = $("<input type='checkbox' class='visibility-switch'/>");
            return t
        }, e.createVisibilityEditor = x, C = function() {
            var t = $("<input/>");
            return t.attr("type", "text"), t
        }, e.createTextEditor = C, P = function() {
            var t = i(92).Combobox;
            return new t([{
                value: CanvasEx.TEXTPOS_TOPLEFT,
                html: $.t("Top Left")
            }, {
                value: CanvasEx.TEXTPOS_TOPCENTER,
                html: $.t("Top Center")
            }, {
                value: CanvasEx.TEXTPOS_TOPRIGHT,
                html: $.t("Top Right")
            }, {
                value: CanvasEx.TEXTPOS_MIDDLELEFT,
                html: $.t("Middle Left")
            }, {
                value: CanvasEx.TEXTPOS_MIDDLECENTER,
                html: $.t("Middle Center")
            }, {
                value: CanvasEx.TEXTPOS_MIDDLERIGHT,
                html: $.t("Middle Right")
            }, {
                value: CanvasEx.TEXTPOS_BOTTOMLEFT,
                html: $.t("Bottom Left")
            }, {
                value: CanvasEx.TEXTPOS_BOTTOMCENTER,
                html: $.t("Bottom Center")
            }, {
                value: CanvasEx.TEXTPOS_BOTTOMRIGHT,
                html: $.t("Bottom Right")
            }])
        }, e.createTextPosEditor = P, k = function() {
            var t = $("<select />");
            return $("<option value='" + CanvasEx.HHISTDIR_LEFTTORIGHT + "'>" + $.t("Left") + "</option>").appendTo(t), $("<option value='" + CanvasEx.HHISTDIR_RIGHTTOLEFT + "'>" + $.t("Right") + "</option>").appendTo(t), t
        }, e.createHHistDirectionEditor = k, I = function(t) {
            var e = $('<div class="transparency-slider"><div class="gradient"></div></div>').slider({
                    min: 0,
                    max: 100,
                    step: 1
                }),
                i = ["-moz-linear-gradient(left, %COLOR 0%, transparent 100%)", "-webkit-gradient(linear, left top, right top, color-stop(0%,%COLOR), color-stop(100%,transparent))", "-webkit-linear-gradient(left, %COLOR 0%,transparent 100%)", "-o-linear-gradient(left, %COLOR 0%,transparent 100%)", "linear-gradient(to right, %COLOR 0%,transparent 100%)"];
            return e.updateColor = function(t) {
                var n = e.find(".gradient");
                $.browser.msie ? n.css("filter", "progid:DXImageTransform.Microsoft.gradient(startColorstr='" + t + "', EndColor=0, GradientType=1)") : i.forEach(function(e) {
                    n.css("background-image", e.replace(/%COLOR/, t))
                })
            }, t ? (e.updateColor(t.val() || "black"), t.on("change", function(t) {
                e.updateColor(t.target.value)
            })) : e.updateColor("black"), e
        }, e.createTransparencyEditor = I, E = function() {
            function t(t, e) {
                this.mouseFlag = !1, this.accuracy = 2, this.value = 1, this.colorInput = t, this.$el = $('<div class="transparency-slider wide-slider ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">'), e && this.$el.hide(), this.$gradient = $('<div class="gradient">').appendTo(this.$el), this.$roller = $('<a href="#" class="ui-slider-handle ui-state-default ui-corner-all without-shift-handle-left">').appendTo(this.$gradient)
            }
            return t.prototype.calculateRollerPosition = function(t) {
                var e = t.pageX,
                    i = this.$gradient.offset().left,
                    n = e - i,
                    o = this.$gradient.width();
                return n > o ? 100 : 0 > n ? 0 : ~~(n / o * 100)
            }, t.prototype.toRgb = function(t) {
                var e;
                return ~t.indexOf("#") ? t : (e = t.match(/[0-9.]+/g), e ? "rgb(" + e.slice(0, 3).join(", ") + ")" : "rgb(127, 127, 127)")
            }, t.prototype.setValue = function(t) {
                return 1 === t ? void(this.value = t) : void(this.value = t.toFixed(this.accuracy))
            }, t.prototype.updateRoller = function() {
                this.$roller.css("left", 100 - 100 * this.value + "%")
            }, t.prototype.rollerMoveHandler = function(t) {
                if (this.mouseFlag) {
                    var e = this.calculateRollerPosition(t);
                    this.setValue((100 - e) / 100), $(this).trigger("change", [this.val()]), this.$roller.css("left", e + "%")
                }
                t.preventDefault()
            }, t.prototype.mouseupHandler = function(t) {
                this.mouseFlag && (this.mouseFlag = !1, $(this).trigger("afterChange", [this.val()]))
            }, t.prototype.initEvents = function() {
                var t = function(t) {
                        return this.rollerMoveHandler(t)
                    }.bind(this),
                    e = function(i) {
                        return $(document).off("mousemove mouseup", t), $(document).off("mouseup", e), this.mouseupHandler(i)
                    }.bind(this);
                this.$el.on("mousedown", function(i) {
                    this.mouseFlag = !0, $(document).on("mousemove mouseup", t), $(document).on("mouseup", e), i.preventDefault()
                }.bind(this)), this.colorInput.on("change", function(t) {
                    this.updateColor()
                }.bind(this))
            }, t.prototype.removeEvents = function() {}, t.prototype.updateColor = function() {
                var t = this.colorInput.val() || "black",
                    e = this.toRgb(t),
                    i = ["-moz-linear-gradient(left, %COLOR 0%, transparent 100%)", "-webkit-gradient(linear, left top, right top, color-stop(0%,%COLOR), color-stop(100%,transparent))", "-webkit-linear-gradient(left, %COLOR 0%,transparent 100%)", "-o-linear-gradient(left, %COLOR 0%,transparent 100%)", "linear-gradient(to right, %COLOR 0%,transparent 100%)"];
                $.browser.msie ? this.$gradient.css("filter", "progid:DXImageTransform.Microsoft.gradient(startColorstr='" + e + "', EndColor=0, GradientType=1)") : i.forEach(function(t) {
                    this.$gradient.css("background-image", t.replace(/%COLOR/, e))
                }.bind(this))
            }, t.prototype.val = function(t) {
                return t && (this.setValue(+t), this.updateRoller()), this.value
            },
                function(e, i) {
                    return new t(e, i)
                }
        }(), TradingView.getTransparencySlider = E, e.getTransparencySlider = E, L = function() {
            var t = $("<select />"),
                e = i(95).StudyConsts;
            return $("<option value='" + e.PLOT_LINE + "'>" + $.t("Line") + "</option>").appendTo(t), $("<option value='" + e.PLOT_LINE_WITH_BREAKS + "'>" + $.t("Line With Breaks") + "</option>").appendTo(t), $("<option value='" + e.PLOT_HISTOGRAM + "'>" + $.t("Histogram") + "</option>").appendTo(t), $("<option value='" + e.PLOT_CROSS + "'>" + $.t("Cross", {
                    context: "chart_type"
                }) + "</option>").appendTo(t), $("<option value='" + e.PLOT_AREA + "'>" + $.t("Area") + "</option>").appendTo(t), $("<option value='" + e.PLOT_AREA_WITH_BREAKS + "'>" + $.t("Area With Breaks") + "</option>").appendTo(t), $("<option value='" + e.PLOT_COLUMNS + "'>" + $.t("Columns") + "</option>").appendTo(t), $("<option value='" + e.PLOT_CIRCLES + "'>" + $.t("Circles") + "</option>").appendTo(t), t
        }, e.createPlotEditor = L, V = function() {
            var t = $("<select>");
            return $("<option value='open'>" + $.t("Open") + "</option>").appendTo(t), $("<option value='high'>" + $.t("High") + "</option>").appendTo(t), $("<option value='low'>" + $.t("Low") + "</option>").appendTo(t), $("<option value='close'>" + $.t("Close") + "</option>").appendTo(t), $("<option value='hl2'>" + $.t("(H + L)/2") + "</option>").appendTo(t), $("<option value='hlc3'>" + $.t("(H + L + C)/3") + "</option>").appendTo(t), $("<option value='ohlc4'>" + $.t("(O + H + L + C)/4") + "</option>").appendTo(t), t
        }, e.createPriceSourceEditor = V, M = function(t) {
            $("<img>").attr("src", t)
        }, e.cacheUrl = M, A = function(t) {
            var e = TradingView.themeResourceFullPath(t);
            return "<img src='" + e + "' style='display:block'/>"
        }, e.themeImageHTML = A, D = function(t, e, i, n, o) {
            var r = n || 250,
                s = $.easing[o] || $.easing.easeOutCubic,
                a = 0,
                l = Date.now(),
                c = function(n) {
                    var o = n ? 1e12 > n ? Date.now() : n : Date.now(),
                        h = o - l,
                        d = Math.min(t, s(null, h, 0, t, r)),
                        u = d - a;
                    a = d, e(u), h >= r ? "function" == typeof i && i() : requestAnimationFrame(c)
                };
            requestAnimationFrame(c)
        }, e.animate = D, O = function(e, i, n) {
            return this._options = n = n || {}, this._name = e, this._container = $('<div class="favored-list-container" />'), n.addClass && this._container.addClass(n.addClass), this._quick_container = $('<div class="quick" />').appendTo(this._container), this._submenu = $('<span class="submenu">' + (this._options.submenuHtml || "") + "<i></i></span>").appendTo(this._container), n.tooltip && (this._submenu.attr("title", n.tooltip), n.addTooltipClass && this._submenu.addClass(n.addTooltipClass)), this._activeButton = null, this._onChange = new t, this._onSelect = new t, this._onResize = new t, this._onOpen = new t, this._load(i), R(this._container, null, {
                direction: "down",
                svg: null == n.svg ? !0 : n.svg,
                reverse: !0,
                addClass: "narrow favored-list" + (n.popupAddClass ? " " + n.popupAddClass : ""),
                event: "popup-menu",
                popupSpacing: n.popupSpacing
            }), this._submenu.on("click", this._openMenu.bind(this)), $.browser.msie || TVXWindowEvents.on(e + "-change", $.proxy(this, "_onChangeInAnotherTab")), this
        }, e.FavoredList = O, O.prototype._openMenu = function() {
            this._submenu.parent().hasClass("active") || this._onOpen.fire(), this._submenu.trigger("popup-menu", [this._data])
        }, O.prototype._onChangeInAnotherTab = function() {
            this.reload(this._data)
        }, O.prototype.reload = function(t) {
            this._quick_container.empty(), this._load(t)
        }, O.prototype._convertQuicksToData = function(t) {
            return this._quicks.forEach(function(e) {
                var i = !1;
                t.forEach(function(t) {
                    return t.id === e ? (i = !0, !1) : void 0
                }), i || t.push({
                    id: e,
                    title: e,
                    favoriteButton: {
                        icon: {},
                        title: e,
                        addClass: "apply-common-tooltip"
                    }
                })
            }), t
        }, O.prototype._load = function(t) {
            var e = this;
            this._options.showJustDefaultQuicks ? this._quicks = this._options.defaultFavorites || [] : this._options.notShowQuicks ? this._quicks = [] : this._quicks = TVSettings.getJSON(this._name + ".quicks", this._options.defaultFavorites || [], !0), this._list = [], n.enabled("charting_library_base") || (t = this._convertQuicksToData(t)), $.grep(t, function(t, e) {
                return !t.separator
            }).forEach(function(t, i) {
                var n, r, s = {
                    index: i,
                    data: t,
                    svg: t.svg && $(t.svg).clone(),
                    toQuickButton: $('<span class="to-quick" title=""></span>').append(o("star", "16x16")),
                    toggleFavorite: function(t, i) {
                        var n = void 0 !== t ? t : !this.isFavorite();
                        n ? this.markFavorite() : this.unmarkFavorite(), e._toggleFavorite(s, n, i)
                    },
                    markFavorite: function() {
                        this.toQuickButton && this.toQuickButton.attr("title", $.t("Remove from favorites")).addClass("quicked")
                    },
                    unmarkFavorite: function() {
                        this.toQuickButton && this.toQuickButton.attr("title", $.t("Add to favorites")).removeClass("quicked")
                    },
                    isFavorite: function() {
                        return e._quicks.indexOf(t.id) > -1
                    },
                    active: function() {
                        return this.data.active()
                    },
                    drop: function() {
                        return this.data.drop()
                    }
                };
                e._options.notShowQuicks && $.extend(s, {
                    toQuickButton: null
                }), s.data.toQuickButtonStyle && s.toQuickButton && s.toQuickButton.css(s.data.toQuickButtonStyle), e._list.push(s), n = {
                    action: function() {
                        e._change(s)
                    },
                    buttons: [],
                    active: e._options.notShowActive ? function() {
                        return !1
                    } : function() {
                        return e._active && s === e._active
                    }
                }, e._options.notShowQuicks || n.buttons.push({
                    el: s.toQuickButton,
                    handler: function(t) {
                        s.toggleFavorite(), t.preventDefault(), t.stopPropagation()
                    }
                }), "function" == typeof s.data.drop && (r = e._options.notShowQuicks ? ' style="right: 7px;"' : "", n.buttons.push({
                    el: $('<span class="delete" title="' + $.t("Delete") + '"' + r + "></span>"),
                    handler: function(t) {
                        s.drop(), t.stopPropagation()
                    }
                })), $.extend(t, n), s.toggleFavorite(s.isFavorite(), !0)
            }), this._data = t, this._options.notShowActive || this._addActive(this._list[0]), this._onResize.fire()
        }, O.prototype._toggleFavorite = function(t, e, i) {
            if (!this._options.notShowQuicks || this._options.showJustDefaultQuicks) {
                if (e) {
                    t.favorite_button = this._createButton(t, this._quick_container);
                    var n = this._lastFavoriteButton(t);
                    n ? t.favorite_button.insertAfter(n.favorite_button) : t.favorite_button.prependTo(this._quick_container)
                } else i || this._removeButton(t);
                i || (e ? -1 === this._quicks.indexOf(t.data.id) && this._quicks.push(t.data.id) : this._quicks.indexOf(t.data.id) > -1 && this._quicks.splice(this._quicks.indexOf(t.data.id), 1), this._saveFavorite(), this._markActive(), this._onResize.fire())
            }
        }, O.prototype._lastFavoriteButton = function(t) {
            for (var e = t.index - 1; e >= 0; e--)
                if (this._list[e] && this._list[e].favorite_button) return this._list[e]
        }, O.prototype._saveFavorite = function() {
            this._options.notShowQuicks || (TVSettings.setJSON(this._name + ".quicks", this._quicks), TVXWindowEvents.emit(this._name + "-change"))
        }, O.prototype._createButton = function(t) {
            var e = this,
                i = t.data.favoriteButton,
                n = $("<span></span>").data("item", t);
            return i.addClass && n.addClass(i.addClass), i.text && n.text(t.text), i.title && n.prop("title", i.title), t.svg && $(t.svg).clone().appendTo(n), n.on("click", function(i) {
                e._change(t), 0 === e._quicks.length && e._openMenu(), i.preventDefault()
            }), n
        }, O.prototype._removeButton = function(t) {
            t.favorite_button && (t.favorite_button.remove(), t.favorite_button = null)
        }, O.prototype._markActive = function(t) {
            var e, i, n;
            this._options.notShowActive || (e = this, this._active && (t = this._active, t.isFavorite() ? (n = e._quick_container.find(".just_active"), this._btnToggleActiveView(n, !1)) : (i = this._addActive(t), 0 !== this._quicks.length && this._btnToggleActiveView(i, !0))), $.map(this._list, function(i) {
                t !== i || 0 === e._quicks.length ? e._btnToggleActiveView(i.favorite_button, !1) : i.favorite_button && e._btnToggleActiveView(t.favorite_button, !0)
            }), i && i.hasClass("selected") ? this._container.addClass("not-favored-active") : this._container.removeClass("not-favored-active"))
        }, O.prototype._btnToggleActiveView = function(t, e) {
            t && (e ? t.addClass("selected") : t.removeClass("selected"))
        }, O.prototype._addActive = function(t) {
            return this._quick_container.find(".just_active").remove(), this._createButton(t).appendTo(this._quick_container).addClass("just_active")
        }, O.prototype._clearActive = function() {
            this._quick_container.find(".just_active").remove()
        }, O.prototype._clearActive = function() {}, O.prototype._setActive = function(t) {
            return this._active === t ? !1 : (this._active = t, this._markActive(), !0)
        }, O.prototype._change = function(t) {
            return this._onSelect.fire(t.data.id), this._setActive(t) ? void this._onChange.fire(t.data.id) : !1
        }, O.prototype.element = function() {
            return this._container
        }, O.prototype._getItemByValue = function(t) {
            for (var e in this._list)
                if (this._list[e].data.id === t) return this._list[e];
            throw Error("undefined value " + t + " in FavoredList")
        }, O.prototype.onChange = function() {
            return this._onChange
        }, O.prototype.onSelect = function() {
            return this._onSelect
        }, O.prototype.onResize = function() {
            return this._onResize
        }, O.prototype.onOpen = function() {
            return this._onOpen
        }, O.prototype.setValue = function(t) {
            var e = this._getItemByValue(t);
            this._setActive(e)
        }, O.prototype.value = function(t) {
            return this._active ? this._active.data.value : void 0
        }, O.prototype.removeById = function(t, e) {
            var i = $.grep(this._data, function(e) {
                return e.id !== t
            });
            this._list.forEach(function(e) {
                e.data.id === t && this._toggleFavorite(e, !1)
            }, this), this.reload(i), "function" == typeof e && e()
        }, R = function(t, e, i) {
            var n, o, r, s, a, l;
            t = $(t), i = i || {}, n = (i.event || "click") + ".popup-menu", i.hideEvent && (o = i.hideEvent + ".popup-menu"), r = function() {}, s = r, a = {}, l = function(n, o, l) {
                function c(e) {
                    var i = $(e.target).parents().andSelf();
                    i.is(p) || i.is(t) || i.is(".charts-popup-tab-headers, .charts-popup-itemheader") || s()
                }

                function h(t) {
                    var e = $(t.target).parents().andSelf();
                    e.is(".charts-popup-tab-headers, .charts-popup-itemheader") || i.notCloseOnButtons && e.is(".icon-save, .icon-delete") || s()
                }

                function d(e, n, o) {
                    var r, s, a, l, c, h, u, f, _, g, m, v, y, w, b, S, T;
                    if (e instanceof R.TabGroup) {
                        if (!e.tabs || !e.tabs.length) return;
                        return 1 !== e.tabs.length || e.tabs[0].title ? (r = $('<div class="charts-popup-tab-group"></div>').appendTo(o), s = $('<div class="charts-popup-tab-headers"></div>').appendTo(r), a = null, void $.each(e.tabs || [], function(t, i) {
                            var n, o;
                            i.items && i.items.length && (n = $('<div class="charts-popup-tab"></div>').hide().appendTo(r), $.each(i.items, function() {
                                d(this, void 0, n)
                            }), o = $('<span class="charts-popup-tab-header">').append($('<a href="javascript://" class="charts-popup-tab-header-label">').text(i.name)).appendTo(s), o.on("click", function(t) {
                                o.is(".active") || (s.find(".charts-popup-tab-header.active").removeClass("active"), o.addClass("active"), r.find(".charts-popup-tab").hide(), n.show(), t && t.preventDefault(), "function" == typeof e.onChange && e.onChange.call(e, i.name))
                            }), a && !i.active || (a = o, s.find(".charts-popup-tab-header.active").removeClass("active"), o.addClass("active"), r.find(".charts-popup-tab").hide(), n.show()))
                        })) : void $.each(e.tabs[0].items, function() {
                            d(this, void 0, o)
                        })
                    }
                    return e instanceof R.Group ? (l = $('<div class="charts-popup-group"></div>').appendTo(o), e.title && (c = $('<div class="charts-popup-itemheader"></div>').text(e.title).prepend($('<span class="charts-popup-itemheader-icon"></span>')), e.collapsible && (l.addClass("charts-popup-group-collapsible"), l.toggleClass("collapsed", e.collapsed), c.on("click", function() {
                        l.toggleClass("collapsed"), "function" == typeof e.onChange && e.onChange(l.hasClass("collapsed")), p.height() === parseInt(p.css("max-height")) ? p.addClass("popup-menu-scroll-y") : p.height() < parseInt(p.css("max-height")) && p.removeClass("popup-menu-scroll-y")
                    })), l.append(c)), void $.each(e.items, function(t) {
                        d(this, 1, l)
                    })) : e instanceof R.Header ? void o.append($('<div class="charts-popup-itemheader"></div>').text(e.title)) : e.separator ? (h = $('<span class="separator"></span>'), void o.append(h)) : (h = $('<a class="item" href="#">'), "function" == typeof e.deleteAction && "function" == typeof e.saveAction && h.addClass("item-twobuttons"), e.url && h.attr("href", e.url), e.target && h.attr("target", e.target), n || h.addClass("first"), "function" == typeof e.active ? e.active(e) && h.addClass("active") : e.active && h.addClass("active"), e.addClass && h.addClass(e.addClass), e.addData && h.data(e.addData), e.disabled && h.addClass("disabled"), "function" == typeof e.action && (u = e.action, f = function(t) {
                        var i = $(t.target).parents().andSelf();
                        i.is(w) || i.is(S) || (u.apply(h, arguments), !e.url && t && "function" == typeof t.preventDefault && t.preventDefault())
                    }, i.upAction ? h.bind("mouseup", f) : h.bind("click", f)), e.date ? (_ = $('<span class="title"></span>').appendTo(h), $('<span class="date"></span>').text(e.date || "").appendTo(h)) : e.icon && !i.svg ? (g = $('<span class="icon"></span>').appendTo(h), g.css("background-image", e.icon.image || ""), e.icon.offset && g.css("background-position", "string" == typeof e.icon.offset ? e.icon.offset : e.icon.offset.x + "px " + e.icon.offset.y + "px"), _ = $('<span class="title"></span>').appendTo(h)) : i.svg === !0 && e.svg ? (i.wrapIcon ? h.append($('<span class="icon-wrap">').append(e.svg)) : h.append(e.svg), _ = $('<span class="title"></span>').appendTo(h)) : _ = $('<span class="title-expanded"></span>').appendTo(h), e.html ? _.html(e.html) : _.text(e.title || ""), m = $('<span class="shortcut"></span>').appendTo(h), e.shortcut && m.text(e.shortcut.keys), "function" == typeof e.deleteAction && (v = e.deleteAction, y = e.deleteAction.title || $.t("Delete"), w = $('<span class="icon-delete">'), w.attr("title", y), w.on("click", function(t) {
                        v.apply(h, arguments), t.preventDefault()
                    }), h.append(w)), "function" == typeof e.saveAction && (b = e.saveAction, y = e.saveAction.title || $.t("Save"), S = $('<span class="icon-save">'), S.attr("title", y), S.on("click", function(t) {
                        b.apply(h, arguments), t.preventDefault()
                    }), h.append(S)), e.buttons instanceof Array && e.buttons.length && e.buttons.forEach(function(t) {
                        t.el instanceof $ || (t.el = $(t.el)), t.el.appendTo(h), t.handler && t.el.on("click", function(e) {
                            t.handler.apply(h, arguments)
                        })
                    }), void 0 !== e.counter && (T = e.counterBlue ? "blue" : "", $('<span class="counter"></span>').text(e.counter + "").addClass(T).appendTo(h)), o.append(h), void t.data("popup-menu", o))
                }
                var u, p, f, _, g, m, v, y, w, b, S, T, x, C, P, k, I, E, L, V, M, A, D, O, B = o || e;
                if ("function" == typeof B && (B = B()), $(this).hasClass("open") || $(this).hasClass("active")) return n.preventDefault(), s(), void(u = a.scrollTop);
                switch (s = function() {
                    a.scrollTop = p.scrollTop(), p.remove(), t.removeClass("active open"), t.data("popup-menu", null), $(document).off("click", h), $(document).off("mousedown", c), Modernizr.touch && $(document).off("touchstart.chartgui", c), $(document).off("selectstart.popup-menu"), s = r, i.onRemove && i.onRemove()
                }, t.addClass("active open"), p = $('<div class="charts-popup-list">'), i.addClass && p.addClass(i.addClass), f = p, i.listInner && (f = $('<div class="list-inner">').appendTo(f)), i.listTable && (f = $('<div class="list-table">').appendTo(f)), $.each(B, function(t) {
                    d(this, t, f)
                }), setTimeout(function() {
                    $(document).on("click", h), $(document).on("mousedown", c), Modernizr.touch && $(document).on("touchstart.chartgui", c)
                }, 0), i.upAction && $(document).on("selectstart.popup-menu", function() {
                    return !1
                }), p.appendTo(document.body), _ = $(window).width(), g = Math.min($(window).height(), $("body").height()), m = t.outerWidth(), v = t.outerHeight(), y = t.offset(), u = $(window).scrollTop() || 0, y.top -= u, y.top = Math.round(y.top), y.left = Math.round(y.left), w = p.outerWidth(), b = p.outerHeight(), S = void 0 !== i.viewportSpacing ? i.viewportSpacing : 10, T = i.popupSpacing ? ~~i.popupSpacing : 1, x = i.popupDrift ? ~~i.popupDrift : 0, C = b - p.height(), P = i.direction ? i.direction : "down", k = !!i.reverse, "down" === P && (I = g - y.top - v - T - S - C, E = y.top - T - S - C, I < Math.max(b || 0, 100) && E > I && (P = "up")), P) {
                    case "down":
                    case "up":
                        "down" === P ? p.css("top", y.top + v + T + "px") : p.css("bottom", g - y.top + T + "px").css("top", "auto"), k ? p.css("left", Math.max(y.left + x + m - w, S) + "px").css("right", "auto") : p.css("left", y.left + x + "px").css("right", "auto");
                        break;
                    case "right":
                    case "left":
                        T = Math.max(T, 4), "right" === P ? p.css("left", Math.floor(y.left + m + T) + "px").css("right", "auto") : p.css("left", Math.floor(Math.max(y.left - w - T, S)) + "px").css("right", "auto"), k ? p.css("top", Math.floor(Math.max(y.top + x + v - b, S)) + "px") : p.css("top", Math.floor(y.top + x) + "px")
                }
                for (p.show(), L = y.top, "up" === P || {
                    left: 1,
                    right: 1
                }[P] && k ? "up" !== P ? L += v : L -= v + T + C + S : L = g - L - v - 2 * T - C, p.height() > L && p.addClass("popup-menu-scroll-y"), p.css("max-height", L + "px"), i.careRightBorder && (V = _ + $(window).scrollLeft(), parseInt(p.css("left")) + p.width() + S > V && p.css("left", V - p.width() - S + "px").css("right", "auto")), i.careBottomBorder && parseInt(p.css("top")) + p.height() + S > g + u && p.css("top", g - p.height() - S + u + "px"), A = t.parents().andSelf(), D = A.size(); D--;)
                    if ("fixed" === A.eq(D).css("position")) {
                        M = A.eq(D);
                        break
                    }
                M && (O = p.offset(), p.css({
                    position: "fixed",
                    left: O.left - $(document).scrollLeft(),
                    right: "auto"
                })), p[0].scrollHeight > p.height() && p.addClass("popup-with-scroll"), n && n.preventDefault()
            }, n && t.bind(n, l), o && t.bind(o, function() {
                s()
            }), i.runOpened && l()
        }, R.TabGroup = function N(t) {
            return this instanceof N ? (t = t || {}, this.tabs = [], void("function" == typeof t.onChange && (this.onChange = t.onChange))) : new N(t)
        }, R.TabGroup.prototype.appendTab = function(t, e, i) {
            if (null == t ? t = "" : t += "", e || (e = []), i || (i = {}), !Array.isArray(e)) throw new TypeError("items must be an array");
            return this.tabs.push({
                name: t,
                items: e,
                active: !!i.active
            }), e
        }, R.Header = function H(t) {
            return this instanceof H ? void(this.title = t) : new H(t)
        }, R.Group = function F(t) {
            return this instanceof F ? (t = t || {}, this.items = [], this.title = null == t.title ? "" : t.title + "", this.collapsible = !!t.collapsible, this.collapsed = !!t.collapsed, void("function" == typeof t.onChange && (this.onChange = t.onChange))) : new F(t)
        }, R.Group.prototype.push = function() {
            this.items.push.apply(this.items, arguments)
        }, e.bindPopupMenu = R, B = function(t) {
            t = $(t), t.unbind(".popup-menu"), t.removeData("popup-menu")
        }, e.unbindPopupMenu = B, z = function(t, e, i, n, o, r) {
            var s, a, l, c, h, d = e.title ? e.title : $.t("Save New Chart Layout"),
                u = TVDialogs.createDialog(d),
                p = function() {
                    var i, o, r = u.find('input[name="name"]'),
                        s = r.val(),
                        a = [];
                    if (n)
                        for (i = 0; i < n.length; i++) "bool" === n[i].type && (o = u.find('input[name="' + n[i].name + '"]'), a.push(o[0].checked));
                    return s ? (t(s, a), TVDialogs.destroy(d)) : (TVDialogs.showError(e.error || $.t("Please enter chart name"), TVDialogs.get(d)), r.focus()), !1
                };
            if (i = i || "", r = r || {}, r.inputValue = r.inputValue ? r.inputValue : "", u.css("width", "400px"), u.find("._tv-dialog-content").html('<div class="main"><form><p>' + (e.label ? $.t(e.label) : $.t("Chart name")) + ':</p><p class="_tv-dialogs-name"><input type="text" name="name" maxlength="' + i + '"/></p><p class="_tv-dialog-right"></p></form></div>').find("input").val(r.inputValue), r.inputSelectEnable && "boolean" == typeof r.inputSelectEnable && u.find('input[name="name"]').select(), n)
                for (s = u.find("._tv-dialog-right"), a = 0; a < n.length; a++) "bool" === n[a].type && (l = $('<p class="_tv-dialogs-name"></p>'), c = n[a].hint ? $('<div class="_tv-dialogs-label-hint"></div>').blueTooltip($.t(n[a].hint), "bottom") : null, h = $('<label><input type="checkbox" style="vertical-align:top;margin-top:2px" name="' + n[a].name + '"/> ' + $.t(n[a].title) + "</label>"), l.append(h, c).insertBefore(s));
            u.find("form").submit(p), $('<a class="_tv-button wide ok">' + $.t("OK") + "</a>").click(p).css({
                "margin-right": "5px"
            }).appendTo(u.find("._tv-dialog-right")), $('<a class="_tv-button wide cancel">' + $.t("Cancel") + "</a>").click(function() {
                TVDialogs.destroy(d)
            }).appendTo(u.find("._tv-dialog-right")), "function" == typeof o && o(u), TVDialogs.positionDialog(u, {
                left: $(window).width() / 2 - u.width() / 2,
                top: $(window).height() / 2 - u.height() / 2
            }), TVDialogs.applyHandlers(u), u.find('input[name="name"]').focus()
        }, e.showChartNameDialog = z
    }).call(e, i(50), i(3), i(5))
}, function(t, e, i) {
    "use strict";

    function n(t) {
        return this.jqObj = null, this.data = t, this.init(), this._prepareValue(), this._prepareCallback(), this._prepareChildren(), this._applyAttributes(), this.jqObj
    }

    function o(t, e) {
        this.value = t, this.html = e || "", this.jqItem = this._render()
    }

    function r(t) {
        this._value = null, this.items = [], this.width = 0, this.jqWrapper = null, this.jqSwitcher = null, this.jqTitle = null, this.jqIcon = null, this.jqItems = null, this.callback = null, this._init(), this.addItems(t), this.joinParts()
    }
    var s = i(93);
    n.selectOptions = {
        type: "option",
        value: null,
        html: null
    }, n.optionsData = {
        radiogroup: {
            type: "radio",
            name: null,
            value: null,
            label: null
        },
        select: n.selectOptions,
        "select-one": n.selectOptions,
        "select-multiple": n.selectOptions
    }, n.customTypes = ["radiogroup", "fontpicker", "colorpicker", "combobox"], n.prototype._tagIsInput = function(t) {
        return -1 !== jQuery.inArray(this.data.type, ["text", "radio", "checkbox", "hidden", "reset", "image", "file"])
    }, n.prototype.init = function() {
        this._tagIsInput() ? this.jqObj = s.create("input", {
            name: this.data.name,
            type: this.data.type
        }) : this.jqObj = s.create(this.data.type, {
            name: this.data.name
        })
    }, n.prototype._eventIsKeyUp = function() {
        return -1 !== jQuery.inArray(this.data.type, ["text", "textarea"])
    }, n.prototype._eventIsClick = function() {
        return -1 !== jQuery.inArray(this.data.type, ["checkbox", "radio", "option"])
    }, n.prototype._eventIsChange = function() {
        return -1 !== jQuery.inArray(this.data.type, ["select", "select-one", "select-multiple", "radiogroup"])
    }, n.prototype._prepareCallback = function() {
        this.data.callback && (this._eventIsKeyUp() ? this.jqObj.keyup(this.data.callback) : this._eventIsClick() ? this.jqObj.click(this.data.callback) : this._eventIsChange() && this.jqObj.bind("change", this.data.callback), delete this.data.callback)
    }, n.prototype._childTag = function() {
        return {
            select: "option",
            "select-one": "option",
            "select-multiple": "option",
            radiogroup: "radio"
        }[this.data.type]
    }, n.prototype._inheritedProperties = function() {
        var t = {
            type: this._childTag()
        };
        return "radiogroup" === this.data.type && (t.name = this.data.name), t
    }, n.prototype._extendChildProps = function(t) {
        var e = jQuery.extend(this._inheritedProperties(), t);
        return this.data.value === t.value && (e.selected = !0), e
    }, n.prototype._prepareChildren = function() {
        if (this.data.options) {
            var t = this;
            jQuery.each(this.data.options, function(e, i) {
                t.jqObj.append(new n(t._extendChildProps(i)))
            })
        }
    }, n.prototype.isCustom = function() {
        return -1 !== jQuery.inArray(this.data.type, this.customTypes)
    }, n.prototype._isStoringValue = function() {
        return -1 !== jQuery.inArray(this.data.type, ["text", "textarea", "option", "radio", "checkbox"])
    }, n.prototype._htmlAsValue = function() {
        return "textarea" === this.data.type
    }, n.prototype._valAsValue = function() {
        return jQuery.inArray(this.data.type, ["text", "checkbox", "radio", "option", "select", "select-one", "select-multiple"])
    }, n.prototype._getControlValue = function() {
        return {
                checkbox: 1
            }[this.data.type] || this.data.value
    }, n.prototype._setControlValue = function() {
        this._valAsValue() ? this.jqObj.val(this._getControlValue()) : this._htmlAsValue() && this.jqObj.html(this.data.value)
    }, n.prototype._getCheckedAttr = function() {
        return {
            option: "selected",
            radio: "checked",
            checkbox: "checked"
        }[this.data.type]
    }, n.prototype._setChecked = function() {
        this.data.selected && this.jqObj.attr(this._getCheckedAttr(), !0)
    }, n.prototype._setValue = function() {
        this._setControlValue(), n.isCheckable(this.data.type) && this._setChecked()
    }, n.prototype._prepareValue = function() {
        this._isStoringValue() && this._setValue()
    }, n.prototype._applyAttributes = function() {
        this.jqObj.attr(s.cleanAttributes(this.data))
    }, n.value = function(t) {
        return n.controlCheckable(t) ? t.checked : t.value
    }, n.isCheckable = function(t) {
        return -1 !== jQuery.inArray(t, ["checkbox", "radio", "option"])
    }, n.controlType = function(t) {
        var e, i;
        return "string" == typeof t ? t : (e = jQuery(t), i = null, e.attr("type") && (i = e.attr("type"), jQuery.inArray(i, ["textarea", "text", "select", "select-one", "select-multiple", "submit"])) ? i : e.attr("tagName"))
    }, n.controlCheckable = function(t) {
        return n.isCheckable(n.controlType(t))
    }, n.controlToggleChecked = function(t, e) {
        var n = i(94);
        return n.setAttr(t, "checked", e)
    }, n.controlSetValue = function(t, e) {
        if (n.controlCheckable(t)) return n.controlToggleChecked(t, e);
        var o = i(94);
        return o.setAttr(t, "value", e)
    }, n.currentOption = function(t) {
        return t.options[t.selectedIndex]
    }, n.currentOptionInnerHTML = function(t) {
        var e = n.currentOption(t);
        return e.innerHTML
    }, o.prototype.eq = function(t) {
        return this.value === t
    }, o.prototype.width = function(t) {
        return this.jqItem.width()
    }, o.prototype._render = function(t) {
        var e = $("<span/>").append($(this.html).clone());
        return $('<div class="item"></div>').append(e)
    }, o.prototype.render = function(t) {
        return this.jqItem
    }, o.prototype.select = function(t) {
        t ? this.jqItem.addClass("selected") : this.jqItem.removeClass("selected")
    }, o.prototype.selectAndReturnIfValueMatch = function(t) {
        return this.eq(t) ? (this.select(!0), this) : (this.select(!1), null)
    }, r.prototype._init = function() {
        this._initWrapper(), this._initSwitcher(), this._initOptions()
    }, r.prototype._initTitle = function() {
        this.jqTitle = $('<span class="title" />')
    }, r.prototype._initIcon = function() {
        this.jqIcon = $('<span class="icon" />')
    }, r.prototype._initOptions = function() {
        var t = i(94);
        this.jqItems = t.createPopup({
            "class": "items"
        })
    }, r.prototype._initWrapper = function() {
        this.jqWrapper = $('<div class="custom-select" />'), this.jqWrapper.data({
            disable: this.disable.bind(this),
            enable: this.enable.bind(this)
        })
    }, r.prototype._initSwitcher = function() {
        var t = this;
        this._initTitle(), this._initIcon(), this.jqSwitcher = $('<div class="switcher" />'), this.jqSwitcher.append(this.jqTitle), this.jqSwitcher.append($(this.jqIcon).clone()), this.opened = !1, this.jqSwitcher.click(function(e) {
            t.toggleItems()
        }), t = this, $(document).click(function(e) {
            $(e.target).closest(t.jqSwitcher).length || (!t.jqSwitcher.is(e.target) && 0 === t.jqSwitcher.has(e.target).length || !t.jqItems.is(e.target) && 0 === !t.jqItems.has(e.target).length) && t.opened && (t.jqItems.hide(), t.opened = !1, t.jqSwitcher.removeClass("open"), e.stopPropagation())
        })
    }, r.prototype.toggleItems = function() {
        this.disabled() || (this.opened ? (this.jqItems.hide(), this.jqSwitcher.removeClass("open"), this.opened = !1) : (this.jqItems.show(), this.jqSwitcher.addClass("open"), this.opened = !0))
    }, r.prototype.setWidth = function() {
        this.jqWrapper.width(this.width)
    }, r.prototype.joinParts = function() {
        this.jqWrapper.append(this.jqSwitcher), this.jqWrapper.append(this.jqItems), this.jqWrapper.selectable(!1)
    }, r.prototype.render = function() {
        return this.jqWrapper
    }, r.prototype.selectItemByValue = function(t) {
        var e = null;
        return $(this.items).each(function(i, n) {
            var o = n.selectAndReturnIfValueMatch(t);
            o && (e = o)
        }), e
    }, r.prototype.setValue = function(t) {
        if (this._value !== t) {
            var e = this.selectItemByValue(t);
            this._value = t, this.jqTitle.html(e.html), this.change()
        }
    }, r.prototype.change = function(t) {
        return t ? void(this.callback = t) : void(this.callback && this.callback.call(this))
    }, r.prototype.value = function() {
        return this._value
    }, r.prototype.val = function(t) {
        return void 0 !== t ? void this.setValue(t) : this.value()
    }, r.prototype.addItems = function(t) {
        var e = this;
        $(t).each(function(t, i) {
            e.addItem(i.value, i.html)
        })
    }, r.prototype.addItem = function(t, e) {
        var i, n = this,
            r = new o(t, e);
        this.items.push(r), i = r.render(), i.click(function() {
            n.setValue(t), n.toggleItems()
        }), this.jqItems.append(i), null === this.value() && this.setValue(t)
    }, r.prototype.disable = function() {
        this._disabled = !0
    }, r.prototype.enable = function() {
        this._disabled = !1
    }, r.prototype.disabled = function() {
        return this._disabled
    }, e.Input = n, e.Combobox = r
}, function(t, e) {
    "use strict";
    var i = {};
    i.renderAttributes = function(t) {
        var e, i = "";
        for (e in t) t[e] && (i += " " + e + '="' + t[e] + '"');
        return i
    }, i.create = function(t, e) {
        var i = $(document.createElement(t));
        return e && (e.html && (i.html(e.html), delete e.html), i.attr(e)), i
    }, i.validAttributes = ["abbr", "accept-charset", "accept", "accesskey", "action", "align", "alink", "alt", "archive", "axis", "background", "bgcolor", "border", "cellpadding", "cellspacing", "char", "charoff", "charset", "checked", "cite", "class", "classid", "clear", "code", "codebase", "codetype", "color", "cols", "colspan", "compact", "content", "coords", "data", "datetime", "declare", "defer", "dir", "disabled", "enctype", "face", "for", "frame", "frameborder", "headers", "height", "href", "hreflang", "hspace", "http-equiv", "id", "ismap", "label", "lang", "language", "link", "longdesc", "marginheight", "marginwidth", "maxlength", "media", "method", "multiple", "name", "nohref", "noresize", "noshade", "nowrap", "object", "onblur", "onchange", "onclick", "ondblclick", "onfocus", "onkeydown", "onkeypress", "onkeyup", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "onreset", "onselect", "onsubmit", "onunload", "profile", "prompt", "readonly", "rel", "rev", "rows", "rowspan", "rules", "scheme", "scope", "scrolling", "selected", "shape", "size", "span", "src", "standby", "start", "style", "summary", "tabindex", "target", "text", "title", "type", "usemap", "valign", "value", "valuetype", "version", "vlink", "vspace", "width"], i.validAttribute = function(t) {
        return -1 !== jQuery.inArray(t, i.validAttributes)
    }, i.cleanAttributes = function(t) {
        return jQuery.each(t, function(e, n) {
            i.validAttribute(e) || delete t[e]
        }), t
    }, t.exports = i
}, function(t, e, i) {
    "use strict";
    var n = i(93),
        o = i(91).setMouseEventHandler,
        r = {};
    r.createLabel = function(t, e, i) {
        return n.create("label", $.extend(i, {
            html: e,
            "for": t
        }))
    }, r.unbindContextMenu = function(t) {
        t.contextMenu(function(t) {
            return !1
        })
    }, r.offsetX = function(t, e) {
        return t.width() + e.pageX
    }, r.offsetY = function(t, e) {
        return t.height() + e.pageY
    }, r.checkObjIsOutOfWindowX = function(t, e) {
        var i, n = $(window).width() - r.offsetX(t, e);
        return 0 > n ? (i = e.pageX + n, i > 0 ? i : 0) : e.pageX
    }, r.checkObjIsOutOfWindowY = function(t, e) {
        var i, n = $(window).height() - r.offsetY(t, e);
        return 0 > n ? (i = e.pageY + n, i > 0 ? i : 0) : e.pageY
    }, r.checkObjIsOutOfWindow = function(t, e) {
        return {
            left: r.checkObjIsOutOfWindowX(t, e),
            top: r.checkObjIsOutOfWindowY(t, e)
        }
    }, r.setAttr = function(t, e, i) {
        return t.attr ? t.attr(e, i) : t[e] = i, t
    }, r.removeAttr = function(t, e) {
        return t.removeAttr ? t.removeAttr(e) : t.removeAttribute(e), t
    }, r.notNull = function(t) {
        return -1 === $.inArray(t, [null, void 0, "false", "null", "undefined", 0])
    }, r.hideControl = function(t) {
        return t.css({
            position: "absolute",
            top: -1e3,
            left: -1e3
        })
    }, r.createPopup = function(t, e, i) {
        var n = new r.Popup(t, e, i);
        return n.render()
    }, r.Popup = function(t, e, i) {
        if (void 0 !== t.selector ? this.jqDiv = t : t.nodeType ? this.jqDiv = $(t) : this.jqDiv = n.create("div", t), i) {
            var r = this;
            $.each(i, function(t, e) {
                r[t] = e
            })
        }
        o(this.jqDiv, this), this._callback = e
    }, r.Popup.prototype.render = function() {
        return this.jqDiv
    }, r.Popup.prototype.show = function() {
        this.jqDiv.show()
    }, r.Popup.prototype.hide = function() {
        this.jqDiv.hide()
    }, r.Popup.prototype.setVisible = function(t) {
        t ? this.show() : this.hide()
    }, r.Popup.prototype.isVisible = function() {
        return this.jqDiv.is(":visible")
    }, r.Popup.prototype.contextMenuEvent = function(t) {
        return !1
    }, r.Popup.prototype.mouseDownOutsideEvent = function(t) {
        if (this.isVisible()) {
            if (this._callback && !this._callback()) return;
            this.hide()
        }
    }, t.exports = r
}, function(t, e, i) {
    var n = {
            PLOT_TYPE_LINE: "line",
            PLOT_TYPE_COLORER: "colorer",
            PLOT_TYPE_BAR_COLORER: "bar_colorer",
            PLOT_TYPE_BG_COLORER: "bg_colorer",
            PLOT_TYPE_TEXT_COLORER: "text_colorer",
            PLOT_TYPE_OHLC_COLORER: "ohlc_colorer",
            PLOT_TYPE_SHAPES: "shapes",
            PLOT_TYPE_CHARS: "chars",
            PLOT_TYPE_ARROWS: "arrows",
            PLOT_TYPE_DATAOFFSET: "dataoffset",
            PLOT_TYPE_OHLC_OPEN: "ohlc_open",
            PLOT_TYPE_OHLC_HIGH: "ohlc_high",
            PLOT_TYPE_OHLC_LOW: "ohlc_low",
            PLOT_TYPE_OHLC_CLOSE: "ohlc_close",
            OHLC_TYPE_BARS: "ohlc_bars",
            OHLC_TYPE_CANDLES: "ohlc_candles",
            PLOT_LINE: 0,
            PLOT_HISTOGRAM: 1,
            PLOT_CROSS: 3,
            PLOT_AREA: 4,
            PLOT_COLUMNS: 5,
            PLOT_CIRCLES: 6,
            PLOT_LINE_WITH_BREAKS: 7,
            PLOT_AREA_WITH_BREAKS: 8,
            SCALE_RIGHT: 0,
            SCALE_LEFT: 1,
            SCALE_NONE: 2
        },
        o = {};
    o.Data = {}, o.registerPlotShape = function(t, e, i, n) {
        if (t in o.Data) throw Error("Plot shape " + t + " already registered!");
        o.Data[t] = {
            id: t,
            pineName: e,
            guiName: i,
            paneRendererClass: n
        }
    }, o.SHAPE_CROSS = "shape_cross", o.SHAPE_XCROSS = "shape_xcross", o.SHAPE_CIRCLE = "shape_circle", o.SHAPE_TRIANGLE_UP = "shape_triangle_up", o.SHAPE_TRIANGLE_DOWN = "shape_triangle_down", o.SHAPE_FLAG = "shape_flag", o.SHAPE_ARROW_UP = "shape_arrow_up", o.SHAPE_ARROW_DOWN = "shape_arrow_down", o.SHAPE_SQUARE = "shape_square", o.SHAPE_DIAMOND = "shape_diamond", o.SHAPE_LABEL_UP = "shape_label_up", o.SHAPE_LABEL_DOWN = "shape_label_down", o.registerPlotShape(o.SHAPE_CROSS, "shape.cross", "Cross", "PaneRendererCrossShape"), o.registerPlotShape(o.SHAPE_XCROSS, "shape.xcross", "X Cross", "PaneRendererXCross"), o.registerPlotShape(o.SHAPE_CIRCLE, "shape.circle", "Circle", "PaneRendererCircleShape"), o.registerPlotShape(o.SHAPE_TRIANGLE_UP, "shape.triangleup", "Triangle Up", "PaneRendererTriangleApexUp"), o.registerPlotShape(o.SHAPE_TRIANGLE_DOWN, "shape.triangledown", "Triangle Down", "PaneRendererTriangleApexDown"), o.registerPlotShape(o.SHAPE_FLAG, "shape.flag", "Flag", "PaneRendererFlagShape"), o.registerPlotShape(o.SHAPE_ARROW_UP, "shape.arrowup", "Arrow Up", "PaneRendererArrowUp"), o.registerPlotShape(o.SHAPE_ARROW_DOWN, "shape.arrowdown", "Arrow Down", "PaneRendererArrowDown"), o.registerPlotShape(o.SHAPE_SQUARE, "shape.square", "Square", "PaneRendererSquare"), o.registerPlotShape(o.SHAPE_DIAMOND, "shape.diamond", "Diamond", "PaneRendererDiamond"), o.registerPlotShape(o.SHAPE_LABEL_UP, "shape.labelup", "Label Up", "PaneRendererLabelUp"), o.registerPlotShape(o.SHAPE_LABEL_DOWN, "shape.labeldown", "Label Down", "PaneRendererLabelDown"), TradingView.StudyConsts = n, TradingView.StudyPlotShapes = o, e.StudyConsts = n, e.StudyPlotShapes = o
}, function(t, e, i) {
    (function(e, n) {
        "use strict";

        function o(t) {
            this._data = {}, this.crossInterval = new a, this.update(t), this._alertSeriesChanged = new n, this._alertSeriesChanged.subscribe(this, this.setValidConditionId)
        }
        var r, s, a;
        TradingView = "object" == typeof e ? e.TradingView : TradingView || {}, "function" != typeof TradingView.merge && (TradingView.merge = function(t, e) {
            for (var i in e) "object" == typeof e[i] && t.hasOwnProperty(i) ? TradingView.merge(t[i], e[i]) : t[i] = e[i];
            return t
        }), "function" != typeof TradingView.logError && (TradingView.logError = function() {
            console.error(arguments)
        }), r = i(97), s = i(98).alertBandFactory, a = i(17), o.VERSION = 12, o.prototype.update = function(t) {
            return t = this._prepareExtraObject(t), this._isValidExtra(t) ? (this._data = t || {}, this._updateCrossInterval()) : TradingView.logError("Wrong alert extra"), this
        }, o.prototype.addDatasourse = function(t, e) {
            this._addDatasourseToJson(this._data, t, e)
        }, o.prototype._addDatasourseToJson = function(t, e, i) {
            (i || t.condition[e]) && (t.condition[e] = {
                id: i.id,
                plotIndex: i.plotIndex
            }, t.statesForAlert[i.id] = i, i.plotIndex && delete t.statesForAlert[i.id].plotIndex)
        }, o.prototype.updateDataSourseStates = function() {
            var t = this,
                e = this.getAvailableBands().map(function(e) {
                    return t._data.condition[e]
                }).filter(function(t) {
                    return !!t
                }).map(function(t) {
                    return t.id
                });
            Object.keys(t._data.statesForAlert).filter(function(t) {
                return e.indexOf(t) < 0
            }).forEach(function(e) {
                delete t._data.statesForAlert[e]
            })
        }, o.prototype._prepareExtraObject = function(t) {
            var e, i;
            return "string" == typeof t ? t = JSON.parse(t) : t instanceof o && (t = t.toJSON()), this._isValidExtra(t) ? t : (e = function(e) {
                var i = r.defaults(t.conditionId || "cross");
                this._addDatasourseToJson(e, "mainSeries", t.mainSeries), this._addDatasourseToJson(e, "alertSeries", t.alertSeries), "moving" === i.type ? (e.condition.movValue = t.value, e.condition.movPeriod = t.period) : "comparison" === i.type && i.isChannel ? (this._addDatasourseToJson(e, "upperBand", t.upperBand), this._addDatasourseToJson(e, "lowerBand", t.lowerBand)) : "comparison" !== i.type || i.isChannel ? "pine_script" === i.type || TradingView.logError("[Alerts] Unknown condition type: " + i.type) : this._addDatasourseToJson(e, "band", t.band)
            }.bind(this), i = {
                version: o.VERSION,
                condition: {
                    id: t.conditionId,
                    fireInfo: t.fireInfo
                },
                statesForAlert: {}
            }, e(i), i)
        }, o.prototype._isValidExtra = function(t) {
            var e, i, n = !!("object" == typeof t && null !== t && t.version === o.VERSION && t.statesForAlert && t.condition && t.condition.id && t.condition.alertSeries && t.condition.fireInfo && (t.condition.fireInfo.type || t.condition.fireInfo.frequency));
            return n ? (e = Object.keys(t.statesForAlert), n = n && e.indexOf(t.condition.alertSeries.id) >= 0, n = n && (!t.condition.mainSeries || e.indexOf(t.condition.mainSeries.id) >= 0), i = r.defaults(t.condition.id), i && "comparison" === i.type && !i.isChannel ? (n = n && !!t.condition.band, n = n && e.indexOf(t.condition.band.id) >= 0) : i && "comparison" === i.type && i.isChannel ? (n = n && !!t.condition.upperBand, n = n && !!t.condition.lowerBand, n = n && e.indexOf(t.condition.upperBand.id) >= 0, n = n && e.indexOf(t.condition.lowerBand.id) >= 0) : i && "moving" === i.type && (n = n && !!t.condition.movPeriod, n = n && !!t.condition.movValue), n) : n
        }, o.prototype.toJSON = function() {
            return TradingView.merge({}, this._data)
        }, o.prototype.state = o.prototype.toJSON, o.prototype.conditionData = function() {
            var t = this._data && this._data.condition && this._data.condition.id;
            if (t) return r.getData(t, this)
        }, o.prototype.bandsObject = function(t) {
            return this._data.statesForAlert
        }, o.prototype.bandsArray = function(t) {
            var e, i = this;
            return t = t || "object", e = this.getAvailableBands().map(function(e) {
                return i._getSomeBand(e, t)
            }).filter(function(t) {
                return !!t
            })
        }, o.prototype.price = function(t) {
            function e(t, e) {
                var i = r._getSomeBand(t, "object"),
                    n = i && "Value" === i.type && void 0 !== e;
                n && (i.value = parseFloat(e), r[t](i))
            }

            function i(t) {
                var e = r._getSomeBand(t, "object");
                return e && !isNaN(e.value) && void 0 !== e.value && null !== e.value ? parseFloat(e.value) : null
            }
            var n, o, r = this,
                s = r.conditionData();
            return s && "comparison" === s.type ? (void 0 !== t && (r.conditionData().isChannel ? (e("upperBand", t.upperBand || t.upper), e("lowerBand", t.lowerBand || t.lower)) : e("band", t.band || t), this._updateCrossInterval()), r.conditionData().isChannel ? (n = i("upperBand"), o = i("lowerBand"), null === n || null === o ? null : {
                upper: n,
                lower: o
            }) : i("band")) : null
        }, o.prototype.conditionId = function(t, e) {
            return void 0 !== t && (this._data.condition.id = t, e || this._updateCrossInterval()), this._data.condition.id
        }, o.prototype.getAvailableConditionParams = function(t) {
            return ["movPeriod", "movValue"]
        }, o.prototype.getAvailableOptionalBands = function(t) {
            return ["band", "lowerBand", "upperBand"]
        }, o.prototype.getAvailableBands = function(t) {
            return ["band", "lowerBand", "upperBand", "alertSeries", "mainSeries"]
        }, o.prototype.getAvailableOptionalConditions = function(t) {
            return this.getAvailableOptionalBands().concat(this.getAvailableOptionalBands())
        }, o.prototype.clearOptionalConditions = function(t) {
            var e = this;
            this.getAvailableOptionalConditions().forEach(function(t) {
                delete e._data.condition[t]
            }), this.updateDataSourseStates(), t || this._updateCrossInterval()
        }, o.prototype.alertSeries = function(t, e) {
            return void 0 !== t && (this.addDatasourse("alertSeries", t), this.updateDataSourseStates(), e || this._updateCrossInterval(), this._alertSeriesChanged.fire(t)), this._getSomeBand("alertSeries", "object")
        }, o.prototype.getAlertSeries = function(t) {
            return this._getSomeBand("alertSeries", t)
        }, o.prototype.getMainSeries = function(t) {
            return this._getSomeBand("mainSeries", t)
        }, o.prototype._getSomeBand = function(t, e) {
            var i, n = e || "model",
                o = this._data.condition[t];
            if (o) return i = TradingView.merge(this._data.statesForAlert[o.id], o), "object" === n ? TradingView.merge({}, i) : s.create(i)
        }, o.prototype.upperBand = function(t, e) {
            return void 0 !== t && (this.addDatasourse("upperBand", t), delete this._data.condition.band, this.updateDataSourseStates(), e || this._updateCrossInterval()), this._getSomeBand("upperBand", "object")
        }, o.prototype.getUpperBand = function(t) {
            return this._getSomeBand("upperBand", t)
        }, o.prototype.lowerBand = function(t, e) {
            return void 0 !== t && (this.addDatasourse("lowerBand", t), delete this._data.condition.band, this.updateDataSourseStates(), e || this._updateCrossInterval()), this._getSomeBand("lowerBand", "object");
        }, o.prototype.getLowerBand = function(t) {
            return this._getSomeBand("lowerBand", t)
        }, o.prototype.band = function(t, e) {
            return void 0 !== t && (this.addDatasourse("band", t), delete this._data.condition.upperBand, delete this._data.condition.lowerBand, this.updateDataSourseStates(), e || this._updateCrossInterval()), this._getSomeBand("band", "object")
        }, o.prototype.getBand = function(t) {
            return this._getSomeBand("band", t)
        }, o.prototype.value = function(t, e) {
            return void 0 !== t && (this._data.condition.movValue = t, e || this._updateCrossInterval()), this._data.condition.movValue
        }, o.prototype.movingValue = o.prototype.value, o.prototype.period = function(t, e) {
            return void 0 !== t && (this._data.condition.movPeriod = t, e || this._updateCrossInterval()), this._data.condition.movPeriod
        }, o.prototype.movingPeriod = o.prototype.period, o.prototype._updateCrossInterval = function() {
            var t = this.getAlertSeries(),
                e = null !== this.price() && "MainSeries" === t.type() && !t.isJapanStyle();
            this.crossInterval.setValue(e)
        }, o.prototype.frequency = function(t) {
            return ("once" === t || "once_per_bar" === t || "on_bar_close" === t || /^\d+$/.test(t)) && (this._data.condition.fireInfo.frequency = t), this._data.condition.fireInfo.frequency
        }, o.prototype.alertSeriesAlerts = function() {
            return this.alertSeries() && this.alertSeries().alerts
        }, o.prototype.drawing = function(t) {
            var e, i, n, o, r, s, a, l, c, h, d = this;
            for (t && t.canHasAlert() && (e = t.stateForAlert(), i = e.plots, n = !!d.conditionData().isChannel, o = (1 === i.length ? !n : n) && "comparison" === d.conditionData().type, o ? 1 === i.length ? (r = {}, r = TradingView.merge(r, e), r.plotIndex = 0, d.band(r)) : (s = {}, a = {}, s = TradingView.merge(s, e), s.plotIndex = 0, d.upperBand(s), a = TradingView.merge(a, e), a.plotIndex = 1, d.lowerBand(a)) : TradingView.logError("[Alerts] Can't set drawing to alert with current condition")), l = this.bandsArray(), c = 0; c < l.length; c++)
                if (h = /^LineTool.*/i.test(l[c].type)) return l[c];
            return null
        }, o.prototype.setValidConditionId = function() {
            var t = this.conditionId(),
                e = r.get(this),
                i = e[t];
            i || this.conditionId(Object.keys(e)[0])
        }, o.prototype.verticalLine = function() {
            var t = this.drawing();
            return t && 1 === t.plots.length && t.plots[0].offset1 && t.plots[0].offset1 === t.plots[0].offset2 ? t : null
        }, TradingView.AlertExtra = o, t.exports = o
    }).call(e, function() {
        return this
    }(), i(50))
}, function(t, e) {
    "use strict";
    var i = function() {
        function t(t, e) {
            return e.id || (e.id = t), e
        }

        function e(t, e) {
            var n;
            return n = e ? i(e)[t] : a[t], n && !n.id && (n.id = t), n
        }

        function i(e) {
            var i, n, o, r, s, l, c = {},
                h = e && e.drawing(),
                d = e && e.alertSeriesAlerts();
            for (h ? (s = "LineToolVertLine" === h.type ? function(t) {
                return "cross" === t.id
            } : 1 === h.plots.length ? function(t) {
                return !t.isChannel
            } : 2 === h.plots.length ? function(t) {
                return !!t.isChannel
            } : function(t) {
                return "comparsion" === t.type
            }, n = a) : d && d.conditions ? (n = $.extend(!0, {}, a), $.each(d.conditions, function(t, e) {
                e.type = "pine_script", n[t] = e
            })) : n = a, i = Object.keys(n), l = 0; l < i.length; l++) r = i[l], o = n[r], t(r, o), s && !s(o) || (c[r] = o);
            return c
        }

        function n(t) {
            return void 0 !== t ? a[t] : a
        }

        function o(t, e) {
            var n, o, r = i(t),
                s = ["cross", "crosses_from_below", "crosses_from_above", "above", "below", "enters_channel", "leaves_channel", "inside_channel", "outside_channel", "moving_up", "moving_down", "moving_up_percents", "moving_down_percents"],
                a = [],
                l = Object.keys(r);
            for (e = e || {}, o = l.length - 1; o >= 0; o--) n = l[o], "pine_script" === r[n].type && a.push(r[n]);
            for (a.sort(function(t, e) {
                return t.title.localeCompare(e.title)
            }), e.needSeparator && a.push({
                separator: !0
            }), o = 0; o < s.length; o++) n = s[o], r.hasOwnProperty(n) && a.push(r[n]);
            return a
        }
        var r, s, a = {
                cross: {
                    title: $.t("Crossing"),
                    type: "comparison"
                },
                crosses_from_below: {
                    title: $.t("Crossing Up"),
                    type: "comparison"
                },
                crosses_from_above: {
                    title: $.t("Crossing Down"),
                    type: "comparison"
                },
                above: {
                    title: $.t("Greater Than"),
                    type: "comparison"
                },
                below: {
                    title: $.t("Less Than"),
                    type: "comparison"
                },
                enters_channel: {
                    title: $.t("Entering Channel"),
                    isChannel: !0,
                    type: "comparison"
                },
                leaves_channel: {
                    title: $.t("Exiting Channel"),
                    isChannel: !0,
                    type: "comparison"
                },
                inside_channel: {
                    title: $.t("Inside Channel"),
                    isChannel: !0,
                    type: "comparison"
                },
                outside_channel: {
                    title: $.t("Outside Channel"),
                    isChannel: !0,
                    type: "comparison"
                },
                moving_up: {
                    title: $.t("Moving Up"),
                    type: "moving"
                },
                moving_down: {
                    title: $.t("Moving Down"),
                    type: "moving"
                },
                moving_up_percents: {
                    title: $.t("Moving Up %"),
                    descriptionTitle: $.t("Moving Up"),
                    type: "moving",
                    percents: !0
                },
                moving_down_percents: {
                    title: $.t("Moving Down %"),
                    descriptionTitle: $.t("Moving Down"),
                    type: "moving",
                    percents: !0
                }
            },
            l = Object.keys(a);
        for (s = l.length - 1; s >= 0; s--) r = l[s], t(r, a[r]);
        return r = null, {
            get: i,
            getData: e,
            defaults: n,
            ordered: o
        }
    }();
    TradingView.AlertConditions = i, t.exports = i
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t) {
            this._band = t || {}
        }

        function o() {
            n.apply(this, arguments)
        }

        function r() {
            n.apply(this, arguments)
        }

        function s() {
            n.apply(this, arguments)
        }

        function a() {
            n.apply(this, arguments)
        }
        TradingView = "object" == typeof e ? e.TradingView : TradingView || {}, "function" != typeof TradingView.logError && (TradingView.logError = function() {
            console.error(arguments)
        });
        var l = {
            create: function(t) {
                var e, i = t || {},
                    n = i.type;
                if ("MainSeries" === n) e = o;
                else if ("Study" === n || /^study_\w+/.test(n)) e = r;
                else if ("Value" === n) e = s;
                else {
                    if (!/^LineTool.*/i.test(n)) return TradingView.logError("Unknown alert band type " + n), null;
                    e = a
                }
                return new e(i)
            }
        };
        n.prototype.uniqueId = function() {
            return this._band.uniqueId
        }, n.prototype.type = function() {
            return this._band.type
        }, n.prototype.title = function() {
            return this._band.title
        }, n.prototype.hasPlots = function() {
            return this._band.plots && this._band.plots.length
        }, n.prototype._getPlotTitle = function(t) {
            var e = i(95).StudyConsts,
                n = "Plot";
            return n = t.title ? t.title : t.type === e.PLOT_TYPE_OHLC_OPEN ? t.ohlcTitle + " " + $.t("Open") : t.type === e.PLOT_TYPE_OHLC_HIGH ? t.ohlcTitle + " " + $.t("High") : t.type === e.PLOT_TYPE_OHLC_LOW ? t.ohlcTitle + " " + $.t("Low") : t.type === e.PLOT_TYPE_OHLC_CLOSE ? t.ohlcTitle + " " + $.t("Close") : "vol" === t.id ? $.t("Volume") : "vol_ma" === t.id ? $.t("Volume MA") : "open" === t.id ? $.t("Open") : "high" === t.id ? $.t("High") : "low" === t.id ? $.t("Low") : "close" === t.id ? $.t("Close") : t.id
        }, n.prototype.getPlots = function(t) {
            var e, n, o;
            return i(95).StudyConsts, e = t || {}, n = this, this._band.plots && this._band.plots.length && "inputSelect" === e.format ? (o = -1, this._band.plots.map(function(t) {
                return o++, {
                    value: o,
                    title: n._getPlotTitle(t)
                }
            })) : this._band.plots
        }, inherit(o, n), o.prototype.title = function(t) {
            var e = i(53),
                n = i(12),
                o = t || {},
                r = !!o.withInterval,
                s = this._band.actualSymbol;
            return n && (s = n.shortName(s)), e.generateTitleForGui({
                symbol: s,
                interval: r ? this._band.interval : null,
                style: this._band.style,
                inputs: this._band.styleInputs || {},
                boxSize: this._band.boxSize,
                reversalAmount: this._band.reversalAmount
            })
        }, o.prototype.getStyle = function() {
            return this._band.style
        }, o.prototype.getStyleInputs = function() {
            return this._band.styleInputs
        }, o.prototype.isJapanStyle = function() {
            var t = this._band.style;
            return -1 !== [4, 7, 5, 6, 8].indexOf(t)
        }, inherit(r, n), r.prototype.title = function(t) {
            var e, i, n, o = t || {},
                r = o.withPlotTitle,
                s = this._band;
            return s.title ? e = s.title : (e = s.shortDescription || "Study", i = [], Object.keys(s.inputs).forEach(function(t) {
                var e = s.inputs[t] && s.inputs[t].id;
                e && !s.inputs[t].isHidden && void 0 !== s.inputs[e] && i.push(s.inputs[e])
            }), i.length && (e += " (" + i.join(", ") + ")")), r && (n = this.selectedPlot(), n && (e += " " + (n.title || $.t("Untitled Plot")))), e
        }, r.prototype.selectedPlot = function() {
            var t = this._band;
            return void 0 === t.plotIndex ? null : this.getPlots().filter(function(e) {
                return e.value === t.plotIndex
            })[0] || null
        }, inherit(s, n), s.prototype.title = function() {
            var t = this._band.value || 0;
            return "" + parseFloat(t)
        }, inherit(a, n), t.exports.AlertBandAbstract = n, t.exports.AlertBandValue = s, t.exports.alertBandFactory = l
    }).call(e, function() {
        return this
    }())
}, function(t, e, i) {
    (function(t, e, n) {
        "use strict";

        function o(t, e, i, n) {
            this.options = n || {}, this.symbol = t, this.resolution = e;
            var i = i;
            "string" == typeof i && (i = JSON.parse(i)), i instanceof r || (i = new r(i)), this.extra = i
        }
        var r;
        TradingView = "object" == typeof t ? t.TradingView : TradingView || {}, "function" != typeof TradingView.getLogLevel && (TradingView.getLogLevel = function() {}), "function" != typeof TradingView.logNormal && (TradingView.logNormal = function() {
            console.log(arguments)
        }), "function" != typeof TradingView.logError && (TradingView.logError = function() {
            console.error(arguments)
        }), TradingView.Environment || (TradingView.Environment = {
            isProd: function() {
                return !1
            }
        }), TradingView.StudyMetaInfo || (TradingView.StudyMetaInfo = {
            cutDollarHash: function(t) {
                var e, i, n = t.indexOf("$"),
                    o = t.indexOf("@");
                return -1 === n ? t : (e = t.substr(0, n), i = o >= 0 ? t.substr(o) : "", e + i)
            }
        }), TradingView.isFeatureEnabled || (TradingView.isFeatureEnabled = function(t) {
            if ("japanese_alerts" === t) return !1;
            throw Error("[Alert Script Generator] Unknown TradingView.isFeatureEnabled() call")
        }), void 0 === e && (e = i(100)), r = i(96), o.prototype.generateAsync = function(t, e) {
            var i = this,
                n = $.Deferred();
            return TradingView.loadTVScript().done(function() {
                var o = i._generate(t, e);
                n.resolve(o)
            }).fail(function() {
                n.reject()
            }), n.pipe()
        }, o.prototype._generate = function(t, i) {
            var n, o = "pine_script" === this.extra.conditionData().type,
                r = !(this.options.silently || TradingView.getLogLevel() !== TradingView.LOGLEVEL_DEBUG && TradingView.Environment.isProd()),
                s = "",
                a = "";
            return t || (s += this._pineScriptVersionStudy), o ? (a = "{{{fullAlertSource}}}\nplot({{{filterFuncName}}}({{{alertConditionName}}}{{#filterParam}},{{{filterParam}}}{{/filterParam}}))", n = this._scriptSrcRendererObjectForPineAlert()) : (n = this._scriptSrcRendererObject(), a = "{{#series}}series = {{&series}}\n{{/series}}{{#option1}}option1 = {{&option1}}\n{{/option1}}{{#option2}}option2 = {{&option2}}\n{{/option2}}{{#offsetOHLC}}offsetOHLC = {{&offsetOHLC}}\n{{/offsetOHLC}}plot({{&filterFuncName}}({{&funcName}}({{#series}}series, {{/series}}{{#verticalLineParams}}{{&verticalLineParams}}{{/verticalLineParams}}{{^verticalLineParams}}option1{{#option2}}, option2{{/option2}}{{#offsetOHLC}}, offsetOHLC{{/offsetOHLC}}{{/verticalLineParams}}){{#filterParam}},{{&filterParam}}{{/filterParam}}))"), t || (s += this._pineScriptFunctions()), s += e.render(a, n), i && (s += e.render("\nplot(n)\nplot(open)\nplot(high)\nplot(low)\nplot(close)\n{{&seriesPlot}}\n{{&bandPlot}}\n{{&upperBandPlot}}\n{{&lowerBandPlot}}\n\n\n\n", this._debugPlotsRendererObject(n))), TradingView.isFeatureEnabled("japanese_alerts") && !t && (s += this._pineScriptSetVars), r && TradingView.logNormal("/ --- Alert Pine source --- //\n\n" + s), s
        }, o.prototype._debugPlotsRendererObject = function(t) {
            var i = "plot(na)",
                n = "plot(na)",
                o = "plot(na)",
                r = "plot(na)";
            return t.series && (i = e.render("debug_series={{&series}}\nplot(debug_series)", {
                series: t.series
            })), "comparison" === this.extra.conditionData().type && (this.extra.conditionData().isChannel && t.option1 && t.option2 ? (o = e.render("debug_upper_band={{&upperBand}}\nplot(debug_upper_band)", {
                upperBand: t.option1
            }), r = e.render("debug_lower_band={{&lowerBand}}\nplot(debug_lower_band)", {
                lowerBand: t.option2
            })) : t.option1 && (n = e.render("debug_band={{&band}}\nplot(debug_band)", {
                band: t.option1
            }))), {
                seriesPlot: i,
                bandPlot: n,
                upperBandPlot: o,
                lowerBandPlot: r
            }
        }, o.prototype._scriptSrcRendererObjectForPineAlert = function() {
            var t, e;
            return this.extra ? (t = this.extra.alertSeriesAlerts()) ? (e = this._scriptFuncionFilterData(this.extra), {
                fullAlertSource: t.pine,
                alertConditionName: t.conditions[this.extra.conditionId()].pineVar,
                filterFuncName: e.name,
                filterParam: e.param
            }) : void TradingView.logError("[Alerts] no alert series alerts") : void TradingView.logError("[Alerts] no extra in generator")
        }, o.prototype._scriptSrcRendererObject = function() {
            function t(t) {
                t.fullId || _.displayError("fullId is required");
                var e = t.fullId;
                return t.isTVScript && (e = TradingView.StudyMetaInfo.cutDollarHash(e)), e
            }

            function i(t) {
                var i;
                return t = t || {}, i = t.plots ? t.plots[t.plotIndex || 0].pinePlotIndex : 0, e.render("__callstudy('{{&symbol}}', '{{&resolution}}', '{{&studyId}}', {{&plotIndex}}, '{{&inputs}}'){{#plotOffset}}[{{plotOffset}}]{{/plotOffset}}", {
                    symbol: _.symbol,
                    resolution: _.resolution,
                    studyId: t.studyId,
                    plotIndex: i || 0,
                    plotOffset: (t.plotOffset || 0) + b,
                    inputs: t.inputs
                })
            }

            function n(t) {
                return isNumber(parseFloat(t)) ? "" + t : e.render("line_series({{timestamp}}, {{offset1}}, {{price1}}, {{offset2}}, {{price2}}, {{extendForward}}, {{extendBackward}})", {
                    timestamp: t.timestamp,
                    offset1: t.offset1,
                    price1: t.price1,
                    offset2: t.offset2,
                    price2: t.price2,
                    extendForward: t.extendForward,
                    extendBackward: t.extendBackward
                })
            }

            function o(e) {
                return e ? "Value" === e.type ? "" + e.value : /^LineTool.*/i.test(e.type) ? n(e.plots[e.plotIndex]) : i({
                    studyId: t(e),
                    plotIndex: e.plotIndex,
                    plots: e.plots,
                    plotOffset: e.plotOffset,
                    inputs: e.callStudyArgs
                }) : void 0
            }
            var r, s, a, l, c, h, d, u, p, f, _ = this,
                g = _.extra,
                m = g.conditionData(),
                v = g.alertSeries(),
                y = "MainSeries" === v.type,
                w = g.verticalLine(),
                b = 0,
                S = g.bandsArray();
            for (r = 0; r < S.length; r++) S[r].plotOffset && (b = Math.min(b, S[r].plotOffset));
            if (b = 0 > b ? Math.abs(b) : 0, y ? s = b : a = i({
                    studyId: t(v),
                    plotIndex: v.plotIndex,
                    plots: v.plots,
                    plotOffset: v.plotOffset,
                    inputs: v.callStudyArgs
                }), w) d = w.plots[w.plotIndex], h = e.render("{{timestamp}}, {{offset1}}, {{price1}}, {{offset2}}, {{price2}}, {{extendForward}}, {{extendBackward}}", {
                timestamp: d.timestamp,
                offset1: d.offset1,
                price1: d.price1,
                offset2: d.offset2,
                price2: d.price2,
                extendForward: d.extendForward,
                extendBackward: d.extendBackward
            });
            else switch (m.type) {
                case "comparison":
                    l = o(m.isChannel ? g.upperBand() : g.band()), c = o(g.lowerBand());
                    break;
                case "moving":
                    l = "" + g.period(), c = "" + g.value();
                    break;
                default:
                    _.displayError("Unknown alert condition type")
            }
            return u = this._scriptFuncionFilterData(g), p = w ? "cross_vline" : m.id, f = {
                funcName: y ? p + "_ohlc" : p,
                series: a,
                option1: l,
                option2: c,
                verticalLineParams: h,
                filterFuncName: u.name,
                filterParam: u.param
            }, isNumber(s) && (f.offsetOHLC = "" + s), f
        }, o.prototype._scriptFuncionFilterData = function(t) {
            var e, i, n = t.frequency();
            return TradingView.isFeatureEnabled("japanese_alerts") ? /^\d+$/.test(n) ? (e = "freq_limit", i = n) : e = "on_bar_close" === n ? "on_bar_close" : "on_first_fire" : /^\d+$/.test(n) ? (e = "__freqlimit", i = n) : "on_bar_close" === n ? (e = "__updatefilter", i = '"on_bar_close"') : (e = "__updatefilter", i = '"on_first_fire"'), {
                name: e,
                param: i
            }
        }, o.prototype.translateToILAsync = function(t) {
            var e = this.extra.alertSeries(),
                i = e.inputs,
                n = !!e.alerts;
            return TradingView.ScriptLib.translateScriptAsync(t, i, "test", "1", n).pipe(function(t, e) {
                return e
            })
        }, o.prototype.displayError = function(t) {
            TradingView.logError("Alert script generation: " + t)
        }, o.prototype._pineScriptVersionStudy = "// @version=2\nstudy('alerts')\n\n// series alerts\n\n", o.prototype._pineScriptFunctions = function() {
            return TradingView.isFeatureEnabled("japanese_alerts") ? "// initialization\nprev_close = getvar('prev_close')\nprev_low = getvar('prev_low')\nprev_high = getvar('prev_high')\n\nis_new_bar_update() =>\n    barstate.isnew\n\nis_current_bar_update() =>\n    not is_new_bar_update()\n\nzero_if_na(value) =>\n    na(value) ? 0 : value\n\non_first_fire(series) =>\n    __updatefilter(series, 'on_first_fire')\n\non_bar_close(series) =>\n    __updatefilter(series, 'on_bar_close')\n\nfreq_limit(series, interval) =>\n    __freqlimit(series, interval)\n\n\n// conditions\n\nbelow(series, base) =>\n    series < base\n\nabove(series, base) =>\n    series > base\n\ncross_series(series, band) =>\n    s = fixnan(series)\n    if not na(s)\n        cross(s, band)\n    else\n        false\n\nprev_above(series, band) =>\n    above(series, band)[1]\n\nintersects_from_above(series, base) =>\n    prev_above = above(series, base)[1]\n    prev_above and below(series, base)\n\nintersects_from_below(series, base) =>\n    prev_below = below(series, base)[1]\n    prev_below and above(series, base)\n\ninside_channel(series, band1, band2) =>\n    if band1 > band2\n        fixnan(below(series, band1) and above(series, band2))\n    else\n        fixnan(below(series, band2) and above(series, band1))\n\noutside_channel(series, band1, band2) =>\n    if band1 > band2\n        fixnan(series > band1 or series < band2)\n    else\n        fixnan(series < band1 or series > band2)\n\nenters_channel(series, band1, band2) =>\n    s1 = outside_channel(series, band1, band2)[1]\n    s2 = inside_channel(series, band1, band2)\n    if not na(s1) or not na(s2)\n        s1 and s2\n    else\n        false\n\nleaves_channel(series, band1, band2) =>\n    s1 = inside_channel(series, band1, band2)[1]\n    s2 = outside_channel(series, band1, band2)\n    if not na(s1) or not na(s2)\n        s1 and s2\n    else\n        false\n\ncrosses_from_above(series, band) =>\n    s = fixnan(series)\n    if not na(s)\n        above(s, band)[1] and below(s, band)\n    else\n        false\n\ncrosses_from_below(series, band) =>\n    s = fixnan(series)\n    if not na(s)\n        below(s, band)[1] and above(s, band)\n    else\n        false\n\ncrosses_band(series, band) =>\n    (below(series, band)[1] and above(series, band)) or (above(series, band)[1] and below(series, band))\n\ncrosses_channel(series, band1, band2) =>\n    crosses_band(series, band1) and crosses_band(series, band2)\n\ncrosses_channel_from_above(series, band1, band2) =>\n    crosses_from_above(series, band1) and crosses_from_above(series, band2)\n\ncrosses_channel_from_below(series, band1, band2) =>\n    crosses_from_below(series, band1) and crosses_from_below(series, band2)\n\nmoving_up(series, window, delta) =>\n    s = fixnan(series)\n    v = s[window - 1]\n    if not na(s) and not na(v)\n        s - v >= delta\n    else\n        false\n\nmoving_down(series, window, delta) =>\n    s = fixnan(series)\n    v = s[window - 1]\n    if not na(s) and not na(v)\n        v - s >= delta\n    else\n        false\n\nmoving_up_percents(series, window, percents) =>\n    s = fixnan(series)\n    if not na(s)\n        index = window - 1\n        delta = percents * s[index] / 100.0\n        moving_up(series, window, delta)\n    else\n        false\n\nmoving_down_percents(series, window, percents) =>\n    s = fixnan(series)\n    if not na(s)\n        index = window - 1\n        delta = percents * series[index] / 100.0\n        moving_down(series, window, delta)\n    else\n        false\n\n// end of series alerts\n\n\n// ohlc alerts\n\nbar_crosses_series(series, offset) =>\n    (series > low[offset]) and (series < high[offset])\n\ncross_ohlc(series, offset) =>\n    cross(close[offset], series) or bar_crosses_series(series, offset)\n\ncrosses_from_above_ohlc(series, offset) =>\n    value = series\n    zero_if_na(prev_close >= series and close <= series) or \n      zero_if_na(is_new_bar_update() and prev_close > value[offset+1] and close > value[offset] and low < value[offset]) or \n      zero_if_na(is_new_bar_update() and prev_close < value[offset+1] and close < value[offset] and high > value[offset]) or \n      zero_if_na(is_new_bar_update() and close < value[offset] and open < value[offset] and high > value[offset]) or \n      zero_if_na(is_current_bar_update() and prev_close > value[offset] and close > value[offset] and low < prev_low and low < value[offset]) or \n      zero_if_na(is_current_bar_update() and prev_close < value[offset] and close < value[offset] and high > prev_high and high > value[offset]) \n\ncrosses_from_below_ohlc(series, offset) =>\n    value = series\n    zero_if_na(prev_close <= series[offset] and close >= series[offset]) or \n      zero_if_na(is_new_bar_update() and prev_close > value[offset+1] and close > value[offset] and low < value[offset]) or \n      zero_if_na(is_new_bar_update() and prev_close < value[offset+1] and close < value[offset] and high > value[offset]) or \n      zero_if_na(is_new_bar_update() and open < value[offset] and close < value[offset] and high > value[offset]) or \n      zero_if_na(is_current_bar_update() and prev_close > value[offset] and close > value[offset] and low < prev_low and low < value[offset]) or \n      zero_if_na(is_current_bar_update() and prev_close < value[offset] and close < value[offset] and high > prev_high and high > value[offset]) \n\nbelow_ohlc(series, offset) =>\n    below(close[offset], series) or bar_crosses_series(series, offset)\n\nabove_ohlc(series, offset) =>\n    above(close[offset], series) or bar_crosses_series(series, offset)\n    \nenters_channel_ohlc(band1, band2, offset) =>\n    enters_channel(close[offset], band1, band2) or bar_crosses_series(band1, offset) or bar_crosses_series(band2, offset)\n\nleaves_channel_ohlc(band1, band2, offset) =>\n    leaves_channel(close[offset], band1, band2) or bar_crosses_series(band1, offset) or bar_crosses_series(band2, offset)\n\ninside_channel_ohlc(band1, band2, offset) =>\n    inside_channel(close[offset], band1, band2) or bar_crosses_series(band1, offset) or bar_crosses_series(band2, offset)\n\noutside_channel_ohlc(band1, band2, offset) =>\n    outside_channel(close[offset], band1, band2) or bar_crosses_series(band1, offset) or bar_crosses_series(band2, offset)\n\nmoving_up_ohlc(window, delta, offset) =>\n    index = window - 1\n    high - low[index] >= delta\n\nmoving_down_ohlc(window, delta, offset) =>\n    index = window - 1\n    high[index] - low >= delta\n\nmoving_up_percents_ohlc(window, percents, offset) =>\n    index = window - 1\n    delta = percents * low[index] / 100.0\n    moving_up_ohlc(window, delta, offset)\n\nmoving_down_percents_ohlc(window, percents, offset) =>\n    index = window - 1\n    delta = percents * high[index] / 100.0\n    moving_down_ohlc(window, delta, offset)\n\n// end of ohlc alerts\n\nline_series(timestamp, offset1, price1, offset2, price2, extendForward, extendBackward) =>\n    __line(timestamp, offset1, price1, offset2, price2, extendForward, extendBackward)\n\ncross_vline(series, timestamp, offset1, price1, offset2, price2, extendForward, extendBackward) =>\n    __line(series, timestamp, offset1, price1, offset2, price2, extendForward, extendBackward)\n\ncross_vline_ohlc(timestamp, offset1, price1, offset2, price2, extendForward, extendBackward) =>\n    __line(high, timestamp, offset1, price1, offset2, price2, extendForward, extendBackward) or __line(low, timestamp, offset1, price1, offset2, price2, extendForward, extendBackward)\n\n\n\n" : "below(series, base) =>\n    series < base\n\nabove(series, base) =>\n    series > base\n\ncross_series(series, band) =>\n    s = fixnan(series)\n    if not na(s)\n        cross(s, band)\n    else\n        false\n\nprev_above(series, band) =>\n    above(series, band)[1]\n\nintersects_from_above(series, base) =>\n    prev_above = above(series, base)[1]\n    prev_above and below(series, base)\n\nintersects_from_below(series, base) =>\n    prev_below = below(series, base)[1]\n    prev_below and above(series, base)\n\ninside_channel(series, band1, band2) =>\n    if band1 > band2\n        fixnan(below(series, band1) and above(series, band2))\n    else\n        fixnan(below(series, band2) and above(series, band1))\n\noutside_channel(series, band1, band2) =>\n    if band1 > band2\n        fixnan(series > band1 or series < band2)\n    else\n        fixnan(series < band1 or series > band2)\n\nenters_channel(series, band1, band2) =>\n    s1 = outside_channel(series, band1, band2)[1]\n    s2 = inside_channel(series, band1, band2)\n    if not na(s1) or not na(s2)\n        s1 and s2\n    else\n        false\n\nleaves_channel(series, band1, band2) =>\n    s1 = inside_channel(series, band1, band2)[1]\n    s2 = outside_channel(series, band1, band2)\n    if not na(s1) or not na(s2)\n        s1 and s2\n    else\n        false\n\ncrosses_from_above(series, band) =>\n    s = fixnan(series)\n    if not na(s)\n        above(s, band)[1] and below(s, band)\n    else\n        false\n\ncrosses_from_below(series, band) =>\n    s = fixnan(series)\n    if not na(s)\n        below(s, band)[1] and above(s, band)\n    else\n        false\n\ncrosses_band(series, band) =>\n    (below(series, band)[1] and above(series, band)) or (above(series, band)[1] and below(series, band))\n\ncrosses_channel(series, band1, band2) =>\n    crosses_band(series, band1) and crosses_band(series, band2)\n\ncrosses_channel_from_above(series, band1, band2) =>\n    crosses_from_above(series, band1) and crosses_from_above(series, band2)\n\ncrosses_channel_from_below(series, band1, band2) =>\n    crosses_from_below(series, band1) and crosses_from_below(series, band2)\n\nmoving_up(series, window, delta) =>\n    s = fixnan(series)\n    v = s[window - 1]\n    if not na(s) and not na(v)\n        s - v >= delta\n    else\n        false\n\nmoving_down(series, window, delta) =>\n    s = fixnan(series)\n    v = s[window - 1]\n    if not na(s) and not na(v)\n        v - s >= delta\n    else\n        false\n\nmoving_up_percents(series, window, percents) =>\n    s = fixnan(series)\n    if not na(s)\n        index = window - 1\n        delta = percents * s[index] / 100.0\n        moving_up(series, window, delta)\n    else\n        false\n\nmoving_down_percents(series, window, percents) =>\n    s = fixnan(series)\n    if not na(s)\n        index = window - 1\n        delta = percents * series[index] / 100.0\n        moving_down(series, window, delta)\n    else\n        false\n\n// end of series alerts\n\n\n// ohlc alerts\n\nbar_crosses_series(series, offset) =>\n    (series > low[offset]) and (series < high[offset])\n\ncross_ohlc(series, offset) =>\n    cross(close[offset], series) or bar_crosses_series(series, offset)\n\ncrosses_from_above_ohlc(series, offset) =>\n    crosses_from_above(close[offset], series) or bar_crosses_series(series, offset)\n\ncrosses_from_below_ohlc(series, offset) =>\n    crosses_from_below(close[offset], series) or bar_crosses_series(series, offset)\n\nbelow_ohlc(series, offset) =>\n    below(close[offset], series) or bar_crosses_series(series, offset)\n\nabove_ohlc(series, offset) =>\n    above(close[offset], series) or bar_crosses_series(series, offset)\n    \nenters_channel_ohlc(band1, band2, offset) =>\n    enters_channel(close[offset], band1, band2) or bar_crosses_series(band1, offset) or bar_crosses_series(band2, offset)\n\nleaves_channel_ohlc(band1, band2, offset) =>\n    leaves_channel(close[offset], band1, band2) or bar_crosses_series(band1, offset) or bar_crosses_series(band2, offset)\n\ninside_channel_ohlc(band1, band2, offset) =>\n    inside_channel(close[offset], band1, band2) or bar_crosses_series(band1, offset) or bar_crosses_series(band2, offset)\n\noutside_channel_ohlc(band1, band2, offset) =>\n    outside_channel(close[offset], band1, band2) or bar_crosses_series(band1, offset) or bar_crosses_series(band2, offset)\n\nmoving_up_ohlc(window, delta, offset) =>\n    index = window - 1\n    high - low[index] >= delta\n\nmoving_down_ohlc(window, delta, offset) =>\n    index = window - 1\n    high[index] - low >= delta\n\nmoving_up_percents_ohlc(window, percents, offset) =>\n    index = window - 1\n    delta = percents * low[index] / 100.0\n    moving_up_ohlc(window, delta, offset)\n\nmoving_down_percents_ohlc(window, percents, offset) =>\n    index = window - 1\n    delta = percents * high[index] / 100.0\n    moving_down_ohlc(window, delta, offset)\n\n// end of ohlc alerts\n\nline_series(timestamp, offset1, price1, offset2, price2, extendForward, extendBackward) =>\n    __line(timestamp, offset1, price1, offset2, price2, extendForward, extendBackward)\n\ncross_vline(series, timestamp, offset1, price1, offset2, price2, extendForward, extendBackward) =>\n    __line(series, timestamp, offset1, price1, offset2, price2, extendForward, extendBackward)\n\ncross_vline_ohlc(timestamp, offset1, price1, offset2, price2, extendForward, extendBackward) =>\n    __line(high, timestamp, offset1, price1, offset2, price2, extendForward, extendBackward) or __line(low, timestamp, offset1, price1, offset2, price2, extendForward, extendBackward)\n\n\n\n"
        }, o.prototype._pineScriptSetVars = "setvar('prev_close', close)\nsetvar('prev_low', low)\nsetvar('prev_high', high)\n\n\n\n", TradingView.AlertScriptGenerator = o, void 0 !== n && n && n.exports && (n.exports = o)
    }).call(e, function() {
        return this
    }(), i(86), i(4)(t))
}, function(t, e) {
    "use strict";
    var i = void 0 !== t && t.exports || {};
    ! function(t) {
        function e(t) {
            return m.test(t)
        }

        function i(t) {
            return (t + "").replace(/&(?!\w+;)|[<>"']/g, function(t) {
                return b[t] || t
            })
        }

        function n(t, e, i, n) {
            var o, r, s, a, l, c, h;
            for (n = n || "<template>", o = e.split("\n"), r = Math.max(i - 3, 0), s = Math.min(o.length, i + 3), a = o.slice(r, s), c = 0, h = a.length; h > c; ++c) l = c + r + 1, a[c] = (l === i ? " >> " : "    ") + a[c];
            return t.template = e, t.line = i, t.file = n, t.message = [n + ":" + i, a.join("\n"), "", t.message].join("\n"), t
        }

        function o(t, e, i) {
            var n, o, r, s, a, l, c, h;
            if ("." === t) return e[e.length - 1];
            for (n = t.split("."), o = n.length - 1, r = n[o], l = e.length; l;) {
                for (h = e.slice(0), a = e[--l], c = 0; o > c && (a = a[n[c++]], null != a);) h.push(a);
                if (a && r in a) {
                    s = a[r];
                    break
                }
            }
            return "function" == typeof s && (s = s.call(h[h.length - 1])), null == s ? i : s
        }

        function r(t, e, i, n) {
            var r, s, a = "",
                l = o(t, e);
            return n ? (null == l || l === !1 || _(l) && 0 === l.length) && (a += i()) : _(l) ? g(l, function(t) {
                e.push(t), a += i(), e.pop()
            }) : "object" == typeof l ? (e.push(l), a += i(), e.pop()) : "function" == typeof l ? (r = e[e.length - 1], s = function(t) {
                return h(t, r)
            }, a += l.call(r, i(), s) || "") : l && (a += i()), a
        }

        function s(i, o) {
            var r, s, a, l, c, h, d, u, p, f, _, g, m, y, w, b, S, T, x, C, P, k, I, E, L, V, M, A;
            for (o = o || {}, r = o.tags || t.tags, s = r[0], a = r[r.length - 1], l = ['var buffer = "";', "\nvar line = 1;", "\ntry {", '\nbuffer += "'], c = [], h = !1, d = !1, u = function() {
                if (!h || d || o.space) c = [];
                else
                    for (; c.length;) l.splice(c.pop(), 1);
                h = !1, d = !1
            }, p = [], m = function(t) {
                r = v(t).split(/\s+/), _ = r[0], g = r[r.length - 1]
            }, y = function(t) {
                l.push('";', f, '\nvar partial = partials["' + v(t) + '"];', "\nif (partial) {", "\n  buffer += render(partial,stack[stack.length - 1],partials);", "\n}", '\nbuffer += "')
            }, w = function(t, e) {
                var r = v(t);
                if ("" === r) throw n(Error("Section name may not be empty"), i, C, o.file);
                p.push({
                    name: r,
                    inverted: e
                }), l.push('";', f, '\nvar name = "' + r + '";', "\nvar callback = (function () {", "\n  return function () {", '\n    var buffer = "";', '\nbuffer += "')
            }, b = function(t) {
                w(t, !0)
            }, S = function(t) {
                var e, r = v(t),
                    s = 0 != p.length && p[p.length - 1].name;
                if (!s || r != s) throw n(Error('Section named "' + r + '" was never opened'), i, C, o.file);
                e = p.pop(), l.push('";', "\n    return buffer;", "\n  };", "\n})();"), e.inverted ? l.push("\nbuffer += renderSection(name,stack,callback,true);") : l.push("\nbuffer += renderSection(name,stack,callback);"), l.push('\nbuffer += "')
            }, T = function(t) {
                l.push('";', f, '\nbuffer += lookup("' + v(t) + '",stack,"");', '\nbuffer += "')
            }, x = function(t) {
                l.push('";', f, '\nbuffer += escapeHTML(lookup("' + v(t) + '",stack,""));', '\nbuffer += "')
            }, C = 1, I = 0, E = i.length; E > I; ++I)
                if (i.slice(I, I + s.length) === s) {
                    switch (I += s.length, P = i.substr(I, 1), f = "\nline = " + C + ";", _ = s, g = a, h = !0, P) {
                        case "!":
                            I++, k = null;
                            break;
                        case "=":
                            I++, a = "=" + a, k = m;
                            break;
                        case ">":
                            I++, k = y;
                            break;
                        case "#":
                            I++, k = w;
                            break;
                        case "^":
                            I++, k = b;
                            break;
                        case "/":
                            I++, k = S;
                            break;
                        case "{":
                            a = "}" + a;
                        case "&":
                            I++, d = !0, k = T;
                            break;
                        default:
                            d = !0, k = x
                    }
                    if (L = i.indexOf(a, I), -1 === L) throw n(Error('Tag "' + s + '" was not closed properly'), i, C, o.file);
                    for (V = i.substring(I, L), k && k(V), M = 0; ~(M = V.indexOf("\n", M));) C++, M++;
                    I = L + a.length - 1, s = _, a = g
                } else switch (P = i.substr(I, 1)) {
                    case '"':
                    case "\\":
                        d = !0, l.push("\\" + P);
                        break;
                    case "\r":
                        break;
                    case "\n":
                        c.push(l.length), l.push("\\n"), u(), C++;
                        break;
                    default:
                        e(P) ? c.push(l.length) : d = !0, l.push(P)
                }
            if (0 != p.length) throw n(Error('Section "' + p[p.length - 1].name + '" was not closed properly'), i, C, o.file);
            return u(), l.push('";', "\nreturn buffer;", "\n} catch (e) { throw {error: e, line: line}; }"), A = l.join("").replace(/buffer \+= "";\n/g, ""), o.debug && ("undefined" != typeof console && console.log ? console.log(A) : "function" == typeof print && print(A)), A
        }

        function a(t, e) {
            var a = "view,partials,stack,lookup,escapeHTML,renderSection,render",
                l = s(t, e),
                c = Function(a, l);
            return function(s, a) {
                a = a || {};
                var l = [s];
                try {
                    return c(s, a, l, o, i, r, h)
                } catch (d) {
                    throw n(d.error, t, d.line, e.file)
                }
            }
        }

        function l() {
            S = {}
        }

        function c(t, e) {
            return e = e || {}, e.cache !== !1 ? (S[t] || (S[t] = a(t, e)), S[t]) : a(t, e)
        }

        function h(t, e, i) {
            return c(t)(e, i)
        }
        var d, u, p, f, _, g, m, v, y, w, b, S;
        t.name = "mustache.js", t.version = "0.5.0-dev", t.tags = ["{{", "}}"], t.parse = s, t.compile = c, t.render = h, t.clearCache = l, t.to_html = function(t, e, i, n) {
            var o = h(t, e, i);
            return "function" != typeof n ? o : void n(o)
        }, d = Object.prototype.toString, u = Array.isArray, p = Array.prototype.forEach, f = String.prototype.trim, _ = u ? u : function(t) {
            return "[object Array]" === d.call(t)
        }, g = p ? function(t, e, i) {
            return p.call(t, e, i)
        } : function(t, e, i) {
            for (var n = 0, o = t.length; o > n; ++n) e.call(i, t[n], n, t)
        }, m = /^\s*$/, f ? v = function(t) {
            return null == t ? "" : f.call(t)
        } : (e("Â ") ? (y = /^\s+/, w = /\s+$/) : (y = /^[\s\xA0]+/, w = /[\s\xA0]+$/), v = function(t) {
            return null == t ? "" : (t + "").replace(y, "").replace(w, "");
        }), b = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#39;"
        }, S = {}
    }(i)
}, function(t, e, i) {
    (function(e, n) {
        "use strict";

        function o(t) {
            var e, i, n, o, a;
            if (m.isLocal() && (window._exposed_makeAlertDialog = this), e = this, t = t || {}, i = t.chartWidget || TradingView.alertsDispatcher.chartWidget(), (!i || i.model()) && (this.id = TradingView.guid(), this._chartWidget = i, this._options = t, this._type = this._options.alert instanceof s ? this._options.type || "edit_alert" : "create_alert", this._cache = {}, !$("#" + this._generateIdTag()).length)) {
                if (TradingView.isFeatureEnabled("alerts-maintenance")) return this._onDestroy(), void TVDialogs.showAlertMaintenanceDialog();
                if (n = i ? i.model().mainSeries().status() : null, n === r.STATUS_OFFLINE) return void TVDialogs.showNotice($.t("Alert"), "create_alert" === this._type ? $.t("Can't create alert when offline") : $.t("Can't edit alert when offline"));
                if (n === r.STATUS_INVALID_SYMBOL) return void TVDialogs.showNotice($.t("Alert"), "create_alert" === this._type ? $.t("Can't create alert on invalid symbol") : $.t("Can't edit alert on invalid symbol"));
                if (o = [r.STYLE_RENKO, r.STYLE_KAGI, r.STYLE_PNF, r.STYLE_PB, r.STYLE_HEIKEN_ASHI], !TradingView.isFeatureEnabled("japanese_alerts") && "create_alert" === this._type && i && -1 !== $.inArray(i.model().mainSeries().properties().style.value(), o)) return void TVDialogs.showNotice($.t("Oops!"), {
                    html: $.t('Alerts are not yet available for this chart type. Please check <a href="https://getsatisfaction.com/tradingview/topics/alerts-support-for-renko-point-figure-kagi-line-break-and-heiken-ashi-charts" target="_blank">GetSatisfaction</a> and vote for this feature to show support for it.')
                });
                a = i ? !!i.model().mainSeries().symbolInfo() : null, !i || a ? this._init() : ! function() {
                    var t = function(n) {
                        n && (i.model().mainSeries().onSymbolResolved().unsubscribe(null, t), e._init())
                    };
                    i.model().mainSeries().onSymbolResolved().subscribe(null, t)
                }(), g()
            }
        }
        var r = i(53),
            s = i(85),
            a = i(96),
            l = i(97),
            c = i(98),
            h = c.alertBandFactory,
            d = c.AlertBandValue,
            u = i(102),
            p = i(104),
            f = i(103),
            _ = i(16),
            g = i(107).loadTVScript,
            m = i(51),
            v = i(83).numberToStringWithLeadingZero;
        o.prototype._init = function() {
            var t, e = this;
            "create_alert" === e._type && e._removeOthersCreateAlertDialogs(), e._chartWidget ? (t = e.mainSeries(), e._symbol = t.actualSymbol(), e._symbolInternal = t.getSymbolString()) : e._symbol = _.symbol.value(), e._resolution = _.interval.value() || "1", e._initCurrentAlert(), e._createLayuot(), e._updateLayout({
                positionDialog: !0
            }), window.lineToolPropertiesToolbar && window.lineToolPropertiesToolbar.hide()
        }, o.prototype._removeOthersCreateAlertDialogs = function() {
            var t, e;
            for (e = 0; e < TVDialogs.dialogs.length; e++) t = TVDialogs.dialogs[e].dialog.data("model"), t instanceof o && "create_alert" === t._type && t.destroy()
        }, o.prototype.destroy = function() {
            var t = this;
            TVDialogs.destroy(t.title)
        }, o.prototype._onDestroy = function() {
            var t = this;
            t.$dialog && t.$dialog.find("select[sb].inited").selectbox("detach"), "edit_alert" !== t._type && "restart_alert" !== t._type || (t._onOkSucceed && "function" == typeof t._options.onEditSuccess && t._options.onEditSuccess(), t._onOkSucceed || t.alert.restoreState(), t._onOkSucceed || "function" != typeof t._options.onEditCancel || t._options.onEditCancel(), "function" == typeof t._options.onEditComplete && t._options.onEditComplete()), t.alert && t.alert.isNew() && TradingView.alertsDispatcher.deleteAlert(t.alert), t._soundSelector && t._soundSelector.destroy(), "function" == typeof t._options.onDestroy && t._options.onDestroy(), window.lineToolPropertiesToolbar && window.lineToolPropertiesToolbar.refresh()
        }, o.prototype._initCurrentAlert = function() {
            var t, e, i, n, o, r, l = this,
                c = l._options.alert;
            if (c instanceof s) t = c.get("extra"), c.saveState(), l.alert = c;
            else {
                if (!l._chartWidget) return void TradingView.logError("[Alerts] Can't create alert without chart widget");
                e = l.defaults({
                    type: "alert"
                }), c = TradingView.alertsDispatcher.createLocalAlert(e, !0), l.alert = c, i = l.defaults({
                    type: "extra"
                }), t = new a(i), c.set("extra", t), t.conditionId(l.defaults({
                    name: "conditionId"
                })), l._options.drawing ? (n = this._getDataSourceState(this._options.drawing.uniqueId()), o = n.plots || [], n = $.extend(!0, {}, n), 1 === o.length ? t.band($.extend(!0, {
                    plotIndex: 0
                }, n)) : 1 < o.length && (t.upperBand($.extend(!0, {
                    plotIndex: 0
                }, n)), t.lowerBand($.extend(!0, {
                    plotIndex: 1
                }, n)))) : l._options.value && t.band({
                    id: TradingView.randomHashN(6),
                    type: "Value",
                    value: l._formatPrice(l._options.value, t.alertSeries().uniqueId)
                }), t.setValidConditionId()
            }
            r = c.get("extra"), (l._options.generateNewDecription || "create_alert" === l._type) && c.setDefaultDescription(), l._options.value && c.isPrice() && r.band() && r.price(l._formatPrice(l._options.value, r.alertSeries().uniqueId))
        }, o.prototype._createLayuot = function() {
            var t, e = this;
            e.title = e._generateUIdialogTitle(), t = e.$dialog = TVDialogs.createDialog(e.title, {
                addClass: "make-alert-dialog"
            }), "edit_alert" === e._type && t.attr("id", e._generateIdTag()), e._fillDialogContent(t.find("._tv-dialog-content")), TVDialogs.applyHandlers(e.$dialog, {
                notFocusFirst: !0,
                beforeDestroy: e._onDestroy.bind(e)
            }), t.data("model", e)
        }, o.prototype._generateIdTag = function() {
            var t = this._type + "-";
            return t += this.alert ? this.alert.id : "new-alert"
        }, o.prototype._generateUIdialogTitle = function() {
            var t, i = this;
            return "create_alert" === i._type ? t = $.t("Create Alert on __title__", {
                title: i.alert.title()
            }) : "edit_alert" === i._type ? t = $.t("Edit Alert __description__ on __title__", {
                description: e.escape(i.alert.get("description")),
                title: i.alert.title()
            }) : "restart_alert" === i._type && (t = $.t("Restart Alert __description__ on __title__", {
                description: e.escape(i.alert.get("description")),
                title: i.alert.title()
            })), t
        }, o.prototype._updateUIdialogTitle = function() {
            if (this.title) {
                var t = this._generateUIdialogTitle();
                TVDialogs.changeTitle(this.title, t), this.title = t
            }
        }, o.prototype._fillDialogContent = function(t) {
            function e() {
                u.append('<tr class="divider"><td></td><td></td><td></td></tr>')
            }
            var i, n, o, r, s, a, l, c = this,
                h = c._UIrowsOptions(),
                d = $('<div class="alert-dialog-content make-alert-dialog-content"></div>').appendTo(t),
                u = $("<table><tbody></tbody></table>").appendTo(d).find("tbody");
            h.condition.visible && (u.append('<tr class="main-series-row"><td>' + $.t("Condition") + '</td><td class="main-series-id-container"></td><td class="main-series-plot-index-container"></td></tr>'), u.append('<tr class="condition-id-row"><td></td><td colspan="2" class="condition-id-container"></td></tr>'), u.append('<tr class="condition-options-row"></tr>')), h.condition.visible && h.frequency.visible && e(), h.frequency.visible && (u.append("<tr><td>" + $.t("Frequency") + '</td><td class="frequency-container" colspan="2"></td></tr>'), c._createUIfrequency()), h.expiration.visible && (i = $("<tr><td>" + $.t("Expiration Time") + '</td><td colspan="2"><div class="date-container"><i></i><input type="text" placeholder="yyyy-mm-dd" name="expired-date" class="_tv-dialog-text-input"></div><div class="time-container"><i></i><input type="text" placeholder="hh:mm" name="expired-time" class="_tv-dialog-text-input"></div></td></tr>').appendTo(u), h.expiration.disabled ? i.find("input").prop("disabled", !0) : (n = i.find('[name="expired-date"]'), TradingView.makeInputDateOnly(n), n.datepicker({
                dateFormat: "yy-mm-dd",
                minDate: new Date,
                maxDate: c.defaults({
                    name: "datepickerMaxExpired"
                }),
                showOtherMonths: !0
            }), o = i.find('[name="expired-time"]'), TradingView.makeInputTimeOnly(o), o.clockpicker({
                autoclose: !0,
                donetext: "OK",
                afterShow: function() {
                    var t = c.$dialog.css("z-index") ? c.$dialog.css("z-index") + 1 : null;
                    o.data("clockpicker").popover.css("z-index", t)
                }
            }), i.find("i").click(function(t) {
                t.stopPropagation(), i.find("input").blur(), $(this).siblings("input").focus()
            }), o.add(n).change(function() {
                var t = c._getUIexpired();
                c._expiredIsValid(t) && c.update({
                    expired: t
                })
            }))), h.actions.visible && (e(), r = $("<tr><td>" + $.t("Alert Actions") + '</td><td><label for="alert-show-popup-' + c.id + '" class="checkbox"><input id="alert-show-popup-' + c.id + '" name="show-popup" type="checkbox"> ' + $.t("Show Popup") + '</label></td><td></td></tr><tr><td></td><td><label for="alert-play-sound-' + c.id + '" class="checkbox"><input id="alert-play-sound-' + c.id + '" name="play-sound" type="checkbox"> ' + $.t("Play Sound") + '</label></td><td></td></tr><tr class="sound-selector-row"><td></td><td class="sound-selector-container"></td><td class="sound-selector-duration-container"></td></tr><tr><td></td><td><label for="alert-send-email-' + c.id + '" class="checkbox"><input id="alert-send-email-' + c.id + '" name="send-email" type="checkbox"> ' + $.t("Send E-mail") + '</label></td><td></td></tr><tr><td></td><td><label for="alert-send-sms-' + c.id + '" class="checkbox"><input id="alert-send-sms-' + c.id + '" name="send-sms" type="checkbox"> ' + $.t("Send SMS") + "</label></td><td></td></tr>").appendTo(u), h.actions.disabled && r.find("input").prop("disabled", !0), r.find('[name="show-popup"]').change(function() {
                c.update({
                    showPopup: c._getUIshowPopup()
                })
            }), r.find('[name="play-sound"]').change(function() {
                c.update({
                    playSound: c._getUIplaySound()
                })
            }), r.find('[name="send-email"]').change(function() {
                c.update({
                    sendEmail: c._getUIsendEmail()
                })
            }), r.find('[name="send-sms"]').change(function() {
                c.update({
                    sendSms: c._getUIsendSms()
                })
            })), h.description.visible && (e(), i = $('<tr><td style="height:30px;">' + $.t("Message") + '</td><td colspan="2" rowspan="2"><textarea style="width:100%;" placeholder="' + $.t("Description") + '" name="description"></textarea></td></tr><tr><td></td></tr>').appendTo(u), h.description.disabled && i.find("textarea").prop("disabled", !0), i.find("textarea").change(function() {
                c.update({
                    description: c._getUIdescription()
                })
            })), s = $('<div class="alert-dialog-content alert-aftertabs"></div></div>').appendTo(t), a = $('<div class="dialog-buttons"></div>').appendTo(s), "edit_alert" === c._type && $('<a class="_tv-button delete tv-left">' + $.t("Delete") + "</a>").click(function(t) {
                TradingView.alertsDispatcher.deleteAlert(c.alert, {
                    showConfirm: !0,
                    success: function() {
                        c.destroy()
                    },
                    error: function() {
                        TVDialogs.showError($.t("Alert deleting failed. Please, try again"), c.$dialog)
                    }
                })
            }).appendTo(a), "create_alert" === c._type && $('<a href="https://www.tradingview.com/stock-charts-support/index.php/Alerts" target="_blank" class="_tv-dialogs-label-hint apply-common-tooltip' + ("edit_alert" === c._type ? "" : " tv-left") + '" title="' + $.t("Wiki") + '"></a>').appendTo(a), l = {
                    edit_alert: $.t("Done"),
                    create_alert: $.t("Create"),
                    restart_alert: $.t("Start")
                }[c._type] || $.t("OK"), $('<a class="_tv-button ok">' + l + "</a>").click(c._onOkClicked.bind(c)).appendTo(a), $('<a class="_tv-button cancel">' + $.t("Cancel") + "</a>").click(function(t) {
                c.destroy()
            }).appendTo(a), c._UImodifyDeafaultInputs()
        }, o.prototype._updateLayout = function(t) {
            function e(t, e) {
                var i = !1;
                return t || e ? t && e && (t.type !== e.type && (i = !1), "MainSeries" === t.type || "Study" === t.type || /^study_\w+/.test(t.type) ? i = t.uniqueId === e.uniqueId && t.plotIndex === e.plotIndex : "Value" === t.type && (i = t.value === e.value)) : i = !0, i
            }
            var i, n, o, r, s = this;
            t = t || {}, i = s.alert, i || TradingView.logError("[Alerts] Dialog needs alert obj with data to display"), n = i.get("extra"), n && (o = t.alertSeries || !e(n.alertSeries(), s._getUIalertSeries()), o && (s._updateUIdialogTitle(), s._setUIalertSeries(n.alertSeries())), r = function() {
                var i = s._getUIcondition(),
                    o = t.condition || i.id !== n.conditionId || !e(n.upperBand(), i.upperBand) || !e(n.lowerBand(), i.lowerBand) || !e(n.band(), i.band) || n.value() !== i.value || n.period() !== i.period;
                return o
            }(), (o || r) && s._setUIcondition(n.state().condition)), s._updateUIfrequency(), (t.expired || s._expiredIsValid && s._getUIexpired(!0) !== i.expiredUnix()) && (s._updateUIexpiredLimits(), s._setUIexpired(i.expiredUnix())), (t.sendEmail || s._getUIsendEmail() !== i.get("sendEmail")) && s._setUIsendEmail(i.get("sendEmail")), (t.sendSms || s._getUIsendSms() !== i.get("sendSms")) && s._setUIsendSms(i.get("sendSms")), (t.showPopup || s._getUIshowPopup() !== i.get("showPopup")) && s._setUIshowPopup(i.get("showPopup")), (t.playSound || s._getUIplaySound() !== i.get("playSound")) && (s._setUIplaySound(i.get("playSound")), s.UItoggleSoundSelector(i.get("playSound"))), (t.soundFile || s._getUIsoundFile() !== i.get("soundFile")) && s._setUIsoundFile(i.get("soundFile") || s.defaults({
                    name: "soundFile"
                })), (t.soundDuration || s._getUIsoundDuration() !== i.get("soundDuration")) && s._setUIsoundDuration(void 0 === i.get("soundDuration") ? s.defaults({
                name: "soundDuration"
            }) : i.get("soundDuration")), (t.description || s._getUIdescription() !== i.get("description")) && s._setUIdescription(i.get("description")), t.positionDialog && TVDialogs.positionDialog(s.$dialog, {
                considerScroll: !0
            })
        }, o.prototype._onOkClicked = function(t) {
            function e() {
                a(), o._onOkSucceed = !0, o.destroy()
            }

            function i(t) {
                a(), t && TradingView.logError("[Alerts] " + t), TVDialogs.showError($.t("Alert saving failed. Please, try again"), o.$dialog)
            }
            var o = this,
                r = o.alert,
                s = $(t.target),
                a = function() {
                    s.removeClass("process")
                },
                l = {
                    success: function(t) {
                        var r, s = t.get("extra");
                        s.drawing() && o._chartWidget ? (r = n.find(o._chartWidget.model().dataSources(), function(t) {
                            return t.uniqueId && t.uniqueId() === s.drawing().uniqueId
                        }), r && r.setAlert(t, {
                            success: e,
                            error: i
                        })) : e()
                    },
                    error: i
                };
            o._isValid() && (TradingView.trackGoProFeature("alerts", this._options.trackEvent), s.addClass("process"), TVSettings.setValue("alerts.creating.send_email", !!r.get("sendEmail")), TVSettings.setValue("alerts.creating.send_sms", !!r.get("sendSms")), TVSettings.setValue("alerts.creating.show_popup", !!r.get("showPopup")), TVSettings.setValue("alerts.creating.play_sound", !!r.get("playSound")), TVSettings.setValue("alerts.creating.sound_file", r.get("soundFile")), TVSettings.setValue("alerts.creating.sound_duration", r.get("soundDuration")), "create_alert" === o._type ? TradingView.alertsDispatcher.createAlert(r, l) : TradingView.alertsDispatcher.restartAlert(r, l))
        }, o.prototype.update = function(t) {
            function e(t, e) {
                C.set(t, e), i[t] = !0
            }
            var i, n, o, r, s, a, c, h, d, u, f, _, g, m, v, y, w, b, S, T, x = this,
                C = x.alert;
            if (t = t || {}, i = {}, n = !1, C) {
                if (o = C.get("extra")) {
                    for (r = o.conditionId(), x._cachedConditionOptions || (x._cachedConditionOptions = {}), t.alertSeries && (s = !!o.alertSeriesAlerts(), o.alertSeries(t.alertSeries), a = !!o.alertSeriesAlerts(), s || !a || t.conditionId || (t.conditionId = l.ordered(o)[0].id), "MainSeries" === t.alertSeries.type ? C.set({
                        symbol: t.alertSeries.actualSymbol,
                        resolution: C.get("crossInterval") ? "1" : t.alertSeries.interval
                    }) : C.set({
                        symbol: x._symbol,
                        resolution: C.get("crossInterval") ? "1" : x._resolution
                    }), i.alertSeries = !0, n = !0), c = ["upperBand", "lowerBand", "band", "value", "period"], h = c.length - 1; h >= 0; h--) d = c[h], o[d]() && (x._cachedConditionOptions[d] = o[d]());
                    if (t.conditionId && (o.conditionId(t.conditionId, !0), i.condition = !0, n = !0), u = o.conditionData(), f = void 0 !== t.conditionId || r !== o.conditionId() || void 0 !== t.upperBand || void 0 !== t.lowerBand || void 0 !== t.band || void 0 !== t.value || void 0 !== t.period) {
                        switch (o.clearOptionalConditions(!0), u.type) {
                            case "comparison":
                                u.isChannel ? (o.upperBand(t.upperBand || x._cachedConditionOptions.upperBand || x.defaults({
                                        name: "upperBand"
                                    }), !0), o.lowerBand(t.lowerBand || x._cachedConditionOptions.lowerBand || x.defaults({
                                        name: "lowerBand"
                                    }))) : o.band(t.band || x._cachedConditionOptions.band || x.defaults({
                                        name: "band"
                                    }));
                                break;
                            case "moving":
                                _ = t.value, void 0 === _ && (_ = x._cachedConditionOptions.value), void 0 === _ && (_ = x.defaults({
                                    name: "value"
                                })), g = t.period, void 0 === g && (g = x._cachedConditionOptions.period), void 0 === g && (g = x.defaults({
                                    name: "period"
                                })), o.value(_), o.period(g);
                                break;
                            case "pine_script":
                                break;
                            default:
                                TradingView.logError("[Alerts] Unknown condition type")
                        }
                        i.condition = !0, n = !0
                    }
                }
                for (m = ["frequency", "expired", "showPopup", "description", "playSound", "soundFile", "soundDuration"], h = 0; h < m.length; h++) v = m[h], y = t[v], void 0 !== y && ("soundDuration" === v && (y = parseInt(y)), e(v, y));
                void 0 !== t.sendSms && (t.sendSms && !user.sms_email ? (w = $.t("E-mail for sms"), b = TVDialogs.showUpdateAccountDataDialog({
                    title: w,
                    html: $.t('Email-to-sms is the easiest and absolutely free way to send text message (SMS) from the internet to phones. <a href="http://www.emailtextmessages.com/" target="_blank">This site</a> aims to be the most complete and up-to-date list of email addresses that can be used to send text messages to phones.'),
                    paramName: "sms_email",
                    success: function() {
                        e("sendSms", !0), TVDialogs.destroy()
                    },
                    error: function(t) {
                        e("sendSms", !1), TVDialogs.showError(t || $.t("Unexpected error: can't change profile data"), b)
                    },
                    complete: function() {
                        x._updateLayout(i)
                    },
                    cancel: function() {
                        e("sendSms", !1), x._updateLayout(i), TVDialogs.destroy()
                    }
                })) : e("sendSms", t.sendSms)), void 0 !== t.sendEmail && (t.sendEmail && !user.email ? (w = $.t("E-mail"), S = TVDialogs.showUpdateAccountDataDialog({
                    title: w,
                    html: $.t("Please, enter your e-mail"),
                    paramName: "email",
                    success: function() {
                        e("sendEmail", !0), TVDialogs.destroy()
                    },
                    error: function(t) {
                        e("sendEmail", !1), TVDialogs.showError(t || $.t("Unexpected error: can't change profile data"), S)
                    },
                    complete: function() {
                        x._updateLayout(i)
                    },
                    cancel: function() {
                        e("sendEmail", !1), x._updateLayout(i), TVDialogs.destroy()
                    }
                })) : e("sendEmail", t.sendEmail)), $.isEmptyObject(i) || (n && C.setDefaultDescription(), x._updateLayout(i)), x._chartWidget && (T = new p(p.FULL_UPDATE), x._chartWidget.paint(T))
            }
        }, o.prototype._getUIalertSeries = function() {
            var t = this.$dialog.find('[name="main-series-plot-index"]').val();
            return void 0 !== t && (t = parseInt(t)), {
                id: this.$dialog.find('[name="main-series"]').val(),
                plotIndex: t
            }
        }, o.prototype._setUIalertSeries = function(t) {
            var e, n, o, r = this,
                s = i(77).LineDataSource,
                a = r.$dialog.find(".main-series-id-container"),
                l = [];
            r.alert && r.alert.get("extra").drawing() && l.push(r.alert.get("extra").drawing().uniqueId), r._chartWidget && r._chartWidget.model().dataSources().forEach(function(t) {
                var e = t instanceof s;
                e && t.uniqueId && l.push(t.uniqueId())
            }), e = r._UIcreateSeriesInput({
                name: "main-series",
                excludeIds: l
            }), a.find("select[sb].inited").selectbox("detach"), a.empty(), a.append(e), e.val(t.uniqueId), e.change(function() {
                var t = {
                    alertSeries: r._prepareBandForExtra($(this).val())
                };
                setTimeout(function() {
                    r.update(t)
                }, 0)
            }), n = r.$dialog.find(".main-series-plot-index-container"), o = r._UIcreatatePlotIndexInput(t, "main-series"), n.find("select[sb].inited").selectbox("detach"), n.empty(), n.append(o), void 0 !== t.plotIndex && o.val(t.plotIndex), o.change(function() {
                var e = $.extend(!0, {}, t, {
                    plotIndex: parseInt($(this).val())
                });
                setTimeout(function() {
                    r.update({
                        alertSeries: e
                    }), e = null
                }, 0)
            }), r._UImodifyDeafaultInputs()
        }, o.prototype._getUIcondition = function() {
            function t(t) {
                var i, n;
                return t = t || "", i = e('[name="' + t + 'band-main"]'), n = e("Value" === i ? '[name="' + t + 'band-additional"]' : '[name="' + t + 'band-additional-plot-index"]'), o._prepareBandForExtra(i, n)
            }

            function e(t) {
                return o.$dialog.find(t).val()
            }
            var i, n, o = this,
                r = this.$dialog.find('[name="condition-id"]').val(),
                s = {
                    id: r
                };
            return r ? (i = o.alert && o.alert.get("extra"), n = l.getData(r, i), n && ("comparison" === n.type ? n.isChannel ? (s.upperBand = t("upper-"), s.lowerBand = t("lower-")) : s.band = t() : "moving" === n.type ? (s.value = e('[name="moving-value"]'), s.period = e('[name="moving-period"]')) : "pine_script" === n.type || TradingView.logError("[Alerts] Unknown condition type")), s) : s
        }, o.prototype._setUIcondition = function(t) {
            var i, n, o, r, s, a, c, h, d, u, p, f, _, g;
            if (this._UIrowsOptions().condition.visible) {
                for (i = this, n = i._UIcreateConditionInput(), i.$dialog.find(".condition-id-container").empty().append(n), n.val(t.id), o = i.$dialog.find(".condition-options-row"), s = i.alert && i.alert.get("extra"), a = l.getData(t.id, s), "comparison" === a.type ? a.isChannel && i.alert.isDrawing() ? (c = "fake-drawing-band", r = $('<tr class="condition-options-row ' + c + '-row"><td class="title up faded"></td><td class="' + c + '-main-input-container"></td><td></td></tr>'), i._UIinsertInputsForBand("upperBand", r.find("." + c + "-main-input-container"), null, c, i.alert.isDrawing())) : a.isChannel ? (h = "upper-band", d = "lower-band", r = $('<tr class="condition-options-row ' + h + '-row"><td class="title up faded">' + $.t("Upper Bound") + '</td><td class="' + h + '-main-input-container"></td><td class="' + h + '-additional-input-container"></td></tr><tr class="condition-options-row ' + d + '-row"><td class="title down faded">' + $.t("Lower Bound") + '</td><td class="' + d + '-main-input-container"></td><td class="' + d + '-additional-input-container"></td></tr>'), i._UIinsertInputsForBand("upperBand", r.find("." + h + "-main-input-container"), r.find("." + h + "-additional-input-container"), h, i.alert.isDrawing()), i._UIinsertInputsForBand("lowerBand", r.find("." + d + "-main-input-container"), r.find("." + d + "-additional-input-container"), d, i.alert.isDrawing())) : (c = "band", r = $('<tr class="condition-options-row ' + c + '-row"><td class="title up faded"></td><td class="' + c + '-main-input-container"></td><td class="' + c + '-additional-input-container"></td></tr>'), i._UIinsertInputsForBand("band", r.find("." + c + "-main-input-container"), r.find("." + c + "-additional-input-container"), c, i.alert.isDrawing())) : "moving" === a.type ? (r = $(e.render('<tr class="condition-options-row moving-row"><td></td><td><div class="value-input-container"><input type="text" name="moving-value" data-tv-ticker-min="{{valueMin}}" data-tv-ticker-step="{{valueStep}}"{{#valuePositive}} data-tv-ticker-positive="1"{{/valuePositive}}{{#valueInteger}} data-tv-ticker-integer="1"{{/valueInteger}} class="_tv-dialog-text-input ticker" value="{{valueStep}}"></div><div>{{movingChar}}</div></td><td><div> ' + $.t("in") + ' </div><div class="period-input-container"><input type="text" name="moving-period" data-tv-ticker-min="{{periodMin}}" data-tv-ticker-max="{{periodMax}}"{{#periodPositive}} data-tv-ticker-positive="1"{{/periodPositive}}{{#periodInteger}} data-tv-ticker-integer="1"{{/periodInteger}} class="_tv-dialog-text-input ticker" value="{{periodMin}}"></div><div> ' + $.t("bars") + "</div></td></tr>", {
                    movingChar: a.percents ? "%" : "$",
                    valueMin: 0,
                    valueStep: i._calculatePriceStep(),
                    valuePositive: !0,
                    valueInteger: !1,
                    periodMin: i._minMovingPeriod(t.alertSeries),
                    periodMax: i._maxMovingPeriod(),
                    periodStep: 1,
                    periodPositive: !0,
                    periodInteger: !0
                })), u = r.find('[name="moving-value"]'), u.val(t.movValue), u.change(function() {
                    i.update({
                        value: $(this).val()
                    })
                }), p = r.find('[name="moving-period"]'), p.val(t.movPeriod), f = function() {
                    i.update({
                        period: $(this).val()
                    })
                }, p.blur(f), p.change(f)) : "pine_script" === a.type ? r = $('<tr class="condition-options-row js-hidden"><td></td><tr>') : TradingView.logError("[Alerts] Unknown condition type"), o.find("select[sb].inited").selectbox("detach"), _ = 0; _ < o.length; _++) 0 !== _ && o.eq(_).remove();
                g = o.eq(0), g.replaceWith(r), i._movingIsValid(), i._conditionChannelIsValid(), i._UImodifyDeafaultInputs()
            }
        }, o.prototype._getUIexpired = function(t) {
            var e, i, n, o = this.$dialog.find('[name="expired-date"]').val(),
                r = this.$dialog.find('[name="expired-time"]').val();
            if (o && r) return /(\d{4})-(\d{1,2})-(\d{1,2})/.test(o) && /(\d{2}):(\d{2})/.test(r) ? (e = new Date, i = /(\d{4})-(\d{1,2})-(\d{1,2})/.exec(o), e.setDate(1), e.setYear(parseInt(i[1])), e.setMonth(parseInt(i[2], 10) - 1), e.setDate(parseInt(i[3], 10)), n = /(\d{2}):(\d{2})/.exec(r), e.setHours(parseInt(n[1], 10)), e.setMinutes(parseInt(n[2], 10)), e.setSeconds(0), e.setMilliseconds(0), t && (e = Math.round(e.getTime() / 1e3)), e) : void 0
        }, o.prototype._setUIexpired = function(t) {
            var e, i;
            t = t || 0, t instanceof Date || (t = new Date(1e3 * t)), this._expiredIsValid(t), e = v(t.getFullYear(), 4) + "-" + v(t.getMonth() + 1, 2) + "-" + v(t.getDate(), 2), this.$dialog.find('[name="expired-date"]').val(e), i = v(t.getHours(), 2) + ":" + v(t.getMinutes(), 2), this.$dialog.find('[name="expired-time"]').val(i)
        }, o.prototype._updateUIexpiredLimits = function() {
            this.$dialog && this.$dialog.find('[name="expired-date"]').length && this.$dialog.find('[name="expired-date"]').datepicker("option", "maxDate", this.defaults({
                name: "datepickerMaxExpired"
            }))
        }, o.prototype._getUIsendEmail = function() {
            return this.$dialog.find("#alert-send-email-" + this.id).is(":checked")
        }, o.prototype._setUIsendEmail = function(t) {
            return this.$dialog.find("#alert-send-email-" + this.id).prop("checked", !!t)
        }, o.prototype._getUIsendSms = function() {
            return this.$dialog.find("#alert-send-sms-" + this.id).is(":checked")
        }, o.prototype._setUIsendSms = function(t) {
            return this.$dialog.find("#alert-send-sms-" + this.id).prop("checked", !!t)
        }, o.prototype._getUIshowPopup = function() {
            return this.$dialog.find("#alert-show-popup-" + this.id).is(":checked")
        }, o.prototype._setUIshowPopup = function(t) {
            return this.$dialog.find("#alert-show-popup-" + this.id).prop("checked", !!t)
        }, o.prototype._getUIplaySound = function() {
            return this.$dialog.find("#alert-play-sound-" + this.id).is(":checked")
        }, o.prototype._setUIplaySound = function(t) {
            return this.$dialog.find("#alert-play-sound-" + this.id).prop("checked", !!t)
        }, o.prototype._getUIdescription = function() {
            return this.$dialog.find('[name="description"]').val()
        }, o.prototype._setUIdescription = function(t) {
            return this._updateUIdialogTitle(), this.$dialog.find('[name="description"]').val(t)
        }, o.prototype._getUIfrequency = function() {
            return this.$dialog.find('[name="frequency"]').val()
        }, o.prototype._setUIfrequency = function(t) {
            this.$dialog.find('[name="frequency"]').val(t)
        }, o.prototype._getUIsoundFile = function() {
            this._soundSelector && this._soundSelector.fileName.value()
        }, o.prototype._setUIsoundFile = function(t) {
            this._soundSelector && this._soundSelector.fileName.setValue(t)
        }, o.prototype._getUIsoundDuration = function() {
            this._soundSelector && this._soundSelector.duration.value()
        }, o.prototype._setUIsoundDuration = function(t) {
            this._soundSelector && this._soundSelector.duration.setValue(t)
        }, o.prototype._UIinsertInputsForBand = function(t, e, i, n, o) {
            function r() {
                return u.alert.get("extra").alertSeries().uniqueId
            }

            function s() {
                return "MainSeries" === u.alert.get("extra").alertSeries().type
            }
            var a, l, c, h, d, u = this,
                p = u.alert.get("extra")[t](),
                f = [];
            if (u.alert.getSavedState() && "MainSeries" === u.alert.getSavedState().extra.alertSeries().type && f.push(u.alert.getSavedState().extra.alertSeries().uniqueId), u.mainSeries() && f.push(u.mainSeries().uniqueId()), a = u._UIcreateSeriesInput({
                    name: n + "-main",
                    excludeIds: f,
                    prepend: [{
                        title: $.t("Value"),
                        value: "Value"
                    }].concat(u.alert.get("extra").drawing() ? [{
                        title: $.t(u.alert.get("extra").drawing().title),
                        value: u.alert.get("extra").drawing().uniqueId
                    }] : []),
                    disabled: !!o
                }), a.val("Value" === p.type ? "Value" : p.uniqueId), a.change(function() {
                    var e, i = $(this).val(),
                        n = {};
                    "Value" === i ? (e = void 0 === p.value ? u._getLastValueByDataSourceId(r(), s()) : p.value, e = u._formatPrice(e, r()), n[t] = u._prepareBandForExtra(i, e)) : n[t] = u._prepareBandForExtra(i), setTimeout(function() {
                        u.update(n)
                    }, 0)
                }), e.find("select[sb].inited").selectbox("detach"), e.empty(), e.append(a), i) {
                switch (c = /^LineTool.*/i.test(p.type) ? "LineTool" : p.type) {
                    case "Value":
                        h = void 0 === p.value ? u._getLastValueByDataSourceId(r()) : p.value, h = u._formatPrice(h, r()), d = u._calculatePriceStep(h), l = $('<input name="' + n + '-additional" type="text" data-tv-ticker-step="' + d + '" class="_tv-dialog-text-input ticker">'), l.val(h), l.change(function() {
                            var e = {};
                            e[t] = p, e[t].value = "" === $(this).val() ? h : parseFloat($(this).val()), setTimeout(function() {
                                u.update(e)
                            }, 0)
                        });
                        break;
                    default:
                        l = u._UIcreatatePlotIndexInput(p, n + "-additional", !!u._options.bandsDisabled), l.val(p.plotIndex), l.change(function() {
                            var e = {},
                                i = $.extend(!0, {}, p, {
                                    plotIndex: parseInt($(this).val())
                                });
                            e[t] = i, setTimeout(function() {
                                u.update(e)
                            }, 0)
                        })
                }
                i.find("select[sb].inited").selectbox("detach"), i.empty(), i.append(l)
            }
        }, o.prototype._UIcreatateSelectElement = function(t, i, n) {
            var n = n || 1 === t.filter(function(t) {
                    return !t.separator
                }).length;
            return $(e.render('<select name="{{name}}"{{#disabled}} disabled="disabled"{{/disabled}}>{{#options}}{{#separator}}<option value="__separator__" disabled="disabled"></option>{{/separator}}{{^separator}}<option value="{{value}}">{{title}}</option>{{/separator}}{{/options}}</select>', {
                disabled: n,
                options: t || [],
                name: i || ""
            }))
        }, o.prototype._UIcreateSeriesInput = function(t) {
            function e(t, e) {
                var i, n, r;
                return e && Array.isArray(e) && t ? -1 !== e.indexOf(t) ? !0 : (i = u._prepareBandForExtra(t), o.get("crossInterval") && i && "MainSeries" === i.type ? (n = u._getSymbolFromSeriesUniqueId(t), r = $.map(e, function(t) {
                    return u._getSymbolFromSeriesUniqueId(t)
                }), -1 !== r.indexOf(n)) : !1) : !1
            }

            function i(t) {
                var i = "function" == typeof t.uniqueId ? t.uniqueId() : t.uniqueId;
                return e(i, $.map(p, function(t) {
                    return t.value
                }))
            }

            function n(i) {
                var n = "function" == typeof i.uniqueId ? i.uniqueId() : i.uniqueId;
                return e(n, t.excludeIds)
            }
            var o, r, s, a, l, c, u = this,
                p = t.prepend ? Array.isArray(t.prepend) ? t.prepend : [t.prepend] : [];
            if (t = t || {}, o = u.alert, o && o.getSavedState())
                for (r = o.getSavedState().extra.bandsArray("model"), a = 0; a < r.length; a++) s = r[a], s instanceof d || i(s) || n(s) || p.push({
                    value: s.uniqueId(),
                    title: s.title()
                });
            if (u._chartWidget)
                for (l = u._chartWidget.model().dataSources(), a = 0; a < l.length; a++) c = l[a], this._chartWidget.canCreateAlertForDataSource(c) && (s = h.create(c.stateForAlert()), i(s) || n(s) || p.push({
                    value: s.uniqueId(),
                    title: s.title()
                }));
            return u._UIcreatateSelectElement(p, t.name || "", t.disabled)
        }, o.prototype._UIcreatatePlotIndexInput = function(t, e, i) {
            var n = h.create(t).getPlots({
                format: "inputSelect"
            });
            return !n || n.length <= 1 ? $('<input type="hidden" name="' + e + '-plot-index" value="0">') : this._UIcreatateSelectElement(n, e + "-plot-index", i)
        }, o.prototype._availableFrequencies = function() {
            var t, e, i, n, o = this,
                r = [{
                    title: $.t("Once"),
                    value: "once"
                }],
                s = o.alert && o.alert.get("crossInterval"),
                a = o.alert && o.alert.get("extra").drawing() && "LineToolVertLine" === o.alert.get("extra").drawing().type,
                l = this.alert && this.alert.hasProjection(),
                c = [{
                    title: $.t("Rearm every 1 minute"),
                    value: "60"
                }, {
                    title: $.t("Rearm every 5 minute"),
                    value: "300"
                }, {
                    title: $.t("Rearm every 10 minute"),
                    value: "600"
                }, {
                    title: $.t("Rearm every 30 minute"),
                    value: "1800"
                }, {
                    title: $.t("Rearm every hour"),
                    value: "3600"
                }],
                h = !s && !a && !l;
            if (h && r.push({
                    title: $.t("Once per bar (on condition)"),
                    value: "once_per_bar"
                }), t = !s && !a, t && r.push({
                    title: $.t("Once per bar (on close)"),
                    value: "on_bar_close"
                }), e = !a && !l)
                if (i = o.alert && 60 * o.alert.get("resolution"), TradingView.isNaN(i) || s) r = r.concat(c);
                else
                    for (n = 0; n < c.length; n++) c[n].value < i && r.push(c[n]);
            return r
        }, o.prototype._UIcreateFrequencyInput = function() {
            var t = this,
                e = t._availableFrequencies();
            return this._UIcreatateSelectElement(e, "frequency")
        }, o.prototype._createUIfrequency = function() {
            var t = this;
            t._UIcreateFrequencyInput().appendTo(t.$dialog.find(".frequency-container")).change(function() {
                setTimeout(function() {
                    t.update({
                        frequency: t._getUIfrequency()
                    })
                }, 0)
            }), t.alert && t.alert.get("extra") && t.alert.get("extra").frequency() && t._setUIfrequency(t.alert.get("extra").frequency())
        }, o.prototype._updateUIfrequency = function() {
            this.$dialog && (this.$dialog.find(".frequency-container select").selectbox("detach"), this.$dialog.find(".frequency-container").empty(), this._createUIfrequency(), this._UImodifyDeafaultInputs())
        }, o.prototype._UIcreateConditionInput = function() {
            var t, e, i = this,
                n = [],
                o = i.alert && i.alert.get("extra"),
                r = [];
            for (r = l.ordered(o, {
                needSeparator: !0
            }), e = 0; e < r.length; e++) r[e].separator ? n.push({
                separator: !0
            }) : n.push({
                value: r[e].id,
                title: r[e].title
            });
            return t = this._UIcreatateSelectElement(n, "condition-id"), t.change(function() {
                setTimeout(function() {
                    i.update({
                        conditionId: t.val()
                    })
                }, 0)
            }), t
        }, o.prototype._UImodifyDeafaultInputs = function() {
            function t(t) {
                return e.$dialog.find(t).filter(":not(.inited)")
            }
            var e = this;
            t("select").each(function(t, e) {
                var i = $(e);
                i.prop("disabled", i.prop("disabled") || 1 === i.find("option").length)
            }).selectbox({
                speed: 100,
                classHolder: "tv-select-container dialog"
            }).addClass("inited"), t("input.ticker").each(function() {
                var t, e, i = $(this),
                    n = {},
                    o = i.data("tv-ticker-step");
                o && (n.step = o), t = i.data("tv-ticker-min"), null !== t && void 0 !== t && (n.min = t), e = i.data("tv-ticker-max"), null !== e && void 0 !== e && (n.max = e), i.TVTicker(n), TradingView.makeInputNumberOnly(i, {
                    positiveOnly: !!i.data("tv-ticker-positive"),
                    integerOnly: !!i.data("tv-ticker-integer"),
                    minValue: t,
                    maxValue: e
                }), i.addClass("inited")
            }), t("label._tv-button :radio").change(function() {
                e._UIupdateRadioButton($(this))
            })
        }, o.prototype._UIupdateRadioButton = function(t) {
            t.closest("td").find("label._tv-button").removeClass("active").children(":radio:checked").closest("label._tv-button").addClass("active")
        }, o.prototype.UItoggleSoundSelector = function(t) {
            var e = this;
            return t ? (e._soundSelector || (e._soundSelector = new u({
                container: e.$dialog.find(".sound-selector-container"),
                durationContainer: e.$dialog.find(".sound-selector-duration-container"),
                file: e.alert.get("soundFile"),
                duration: e.alert.get("soundDuration"),
                onChange: function(t, i) {
                    e.update({
                        soundFile: t,
                        soundDuration: i
                    })
                }
            }), e._UImodifyDeafaultInputs()), void e.$dialog.find(".sound-selector-row").slideDown()) : void e.$dialog.find(".sound-selector-row").slideUp()
        }, o.prototype.defaults = function(t) {
            function e(t) {
                return h._cache[t]
            }

            function i(t, e) {
                return h._cache.defaults || (h._cache.defaults = {}), e
            }

            function n() {
                var t = r(t),
                    e = /^\d+$/.test(t);
                return h.alert && (e = e && !h.alert.get("crossInterval")), e
            }

            function o() {
                var t, e = 0;
                return h.mainSeries() && (t = h.mainSeries().lastValueData(TradingView.CLOSE_PLOT, !0, !0), e = t.price || 0), h._formatPrice(e, h.mainSeries())
            }

            function r(t) {
                return a[t] ? "function" == typeof a[t][1] ? a[t][1]() : a[t][1] : null
            }

            function s(t) {
                var e, i, n = {};
                for (i = 0; i < c.length; i++) e = c[i], a[e][0] === t && (n[e] = r(e));
                return n
            }
            var a, c, h = this;
            return t = t || {}, a = {
                conditionId: ["extra", function() {
                    return l.ordered(h.alert && h.alert.get("extra"))[0].id
                }],
                alertSeries: ["extra", function() {
                    if (h._options.series) {
                        var t = h._prepareBandForExtra(h._options.series.uniqueId());
                        return e("alertSeries") || i("alertSeries", t || null)
                    }
                    return r("mainSeries")
                }],
                mainSeries: ["extra", function() {
                    return e("mainSeries") || i("mainSeries", h.mainSeries() ? h.mainSeries().stateForAlert() : null)
                }],
                fireInfo: ["extra", {
                    frequency: "once"
                }],
                value: ["extra", 1],
                period: ["extra", function() {
                    return h._minMovingPeriod()
                }],
                band: ["extra", function() {
                    return e("band") || i("band", {
                            id: TradingView.randomHashN(6),
                            type: "Value",
                            value: h._options.value || o()
                        })
                }],
                upperBand: ["extra", function() {
                    return e("upperBand") || i("upperBand", {
                            id: TradingView.randomHashN(6),
                            type: "Value",
                            value: h._options.value || o()
                        })
                }],
                lowerBand: ["extra", function() {
                    return e("lowerBand") || i("lowerBand", {
                            id: TradingView.randomHashN(6),
                            type: "Value",
                            value: h._options.value || o()
                        })
                }],
                symbol: ["alert", h._symbol],
                symbolInternal: ["alert", h._symbolInternal],
                resolution: ["alert", h._resolution],
                sendEmail: ["alert", TVSettings.getBool("alerts.creating.send_email", !1) && !!user.email],
                sendSms: ["alert", TVSettings.getBool("alerts.creating.send_sms", !1) && !!user.sms_email],
                showPopup: ["alert", TVSettings.getBool("alerts.creating.show_popup", !0)],
                playSound: ["alert", TVSettings.getBool("alerts.creating.play_sound", !0)],
                soundFile: ["alert", TVSettings.getValue("alerts.creating.sound_file", f.defaults().alert)],
                soundDuration: ["alert", TVSettings.getValue("alerts.creating.sound_duration", 0)],
                autoDeactivation: ["alert", !0],
                description: ["alert", ""],
                expired: ["alert", function() {
                    var t = new Date,
                        e = new Date;
                    return n() ? t.setDate(e.getDate() + 7) : t.setMonth(e.getMonth() + 1), t.getTime() / 1e3
                }],
                script: ["alert", ""],
                datepickerMaxExpired: ["dialog", "+2m"],
                maxExpired: ["dialog", function() {
                    var t = new Date,
                        e = new Date;
                    return t.setMonth(e.getMonth() + 2), t.setHours(23), t.setMinutes(59), t.setSeconds(59), t.setMilliseconds(999), t.getTime() / 1e3
                }]
            }, c = Object.keys(a), t.name ? r(t.name) : t.type ? s(t.type) : void 0
        }, o.prototype.mainSeries = function() {
            return this._chartWidget ? this._chartWidget.model().mainSeries() : null
        }, o.prototype._prepareBandForExtra = function(t, e) {
            var i = this;
            if (t) return "Value" === t ? {
                id: TradingView.randomHashN(6),
                type: "Value",
                value: e || 0
            } : i._getDataSourceState(t, e)
        }, o.prototype._getDataSourceById = function(t) {
            var e = null;
            return this._chartWidget && (e = this._chartWidget.model().dataSources().filter(function(e) {
                    return e.uniqueId && e.uniqueId() === t
                })[0] || null), e
        }, o.prototype._getDataSourceState = function(t, e) {
            var i, n, o, r, s, a, l, c = this,
                d = null;
            if (!t) return null;
            if (c.alert && c.alert.get("extra"))
                for (i = c.alert.getSavedState(), o = c.alert.get("extra").bandsArray(), i && (o = o.concat(i.extra.bandsArray() || [])), n = c.alert.get("crossInterval"), r = 0; r < o.length; r++)
                    if (s = o[r].uniqueId === t, !s && n && "MainSeries" === o[r].type && (s = o[r].actualSymbol === c._getSymbolFromSeriesUniqueId(t)), s) {
                        d = $.extend(!0, {}, o[r]);
                        break
                    }
            return d || (a = this._getDataSourceById(t), d = a.stateForAlert && a.stateForAlert()), d ? (("Study" === d.type || /^study_\w+/.test(d.type)) && (l = h.create(d).getPlots(), void 0 !== e ? d.plotIndex = e : l && l.length && (d.plotIndex = 0), d.plotOffset = l[d.plotIndex].offset), d) : void TradingView.logError("Can't find state for datasource " + a)
        }, o.prototype._getLastValueByDataSourceId = function(t, e) {
            function i(t) {
                var e = t === r ? TradingView.CLOSE_PLOT : t.metaInfo().plots[0].id;
                return t.lastValueData(e, !0, !0).price
            }
            var n = this,
                o = n._getDataSourceById(t),
                r = n.mainSeries(),
                s = 0;
            return o ? s = i(o) : n.alert && (n.alert.get("crossInterval") || e) && "MainSeries" === n.alert.get("extra").alertSeries().type && n.alert.get("extra").alertSeries().uniqueId === t && n.alert.get("extra").alertSeries().actualSymbol === r.actualSymbol() && (s = i(r)), s
        }, o.prototype._formatPrice = function(t, e) {
            var i, n, o = this;
            return t = t || 0, i = null, n = o.mainSeries(), e = e || n || null, "string" == typeof e && (e = o._getDataSourceById(e)), i = e && e.priceScale() ? e.priceScale().formatter() : n && "create_alert" === o._type ? n.priceScale().formatter() : null, i && i.formatAsDecimal && (t = 0 > t ? "-" + i.formatAsDecimal(-1 * t) : i.formatAsDecimal(t)), t
        }, o.prototype._calculatePriceStep = function(t) {
            var e, i, n = this,
                o = 1;
            if (void 0 !== t) e = t;
            else if (void 0 !== n._options.value) e = n._options.value;
            else {
                if (!n.alert || !n.alert.isPrice()) return o;
                e = n.alert.get("extra").price().upperBand || n.alert.get("extra").price()
            }
            return e = n._formatPrice(e, n.alert.get("extra").alertSeries().uniqueId), e = ("" + e).replace(/^-/, ""), -1 !== e.indexOf(".") && (i = e.replace(/^\d+\./, "").length, o = Math.pow(10, -1 * i)), o
        }, o.prototype._isValid = function() {
            var t = this._expiredIsValid(),
                e = this._movingIsValid(),
                i = this._conditionChannelIsValid();
            return t && e && i
        }, o.prototype._expiredIsValid = function(t) {
            var e, i, n, o, r, s, a, l, c, h;
            return t instanceof Date ? (e = new Date, i = new Date(1e3 * this.defaults({
                    name: "maxExpired"
                })), n = t > e && i > t, this.$dialog.find('[name="expired-date"], [name="expired-time"]').toggleClass("_tv-dialog-text-input-error", !n), n) : (o = {}, r = this.$dialog.find('[name="expired-date"]'), s = r.val(), s && /^\d{4}-\d{2}-\d{2}$/.test(s) || (o.date = !0), a = this.$dialog.find('[name="expired-time"]'), l = a.val(), l && /^\d{2}\:\d{2}$/.test(l) || (o.time = !0), r.toggleClass("_tv-dialog-text-input-error", !!o.date), a.toggleClass("_tv-dialog-text-input-error", !!o.time), c = !1, h = this._getUIexpired(), h instanceof Date && (c = this._expiredIsValid(h)), !o.date && !o.time && c)
        }, o.prototype._conditionChannelIsValid = function() {
            var t, e, i = !0,
                n = this,
                o = n.alert;
            return o.get("extra") && o.get("extra").conditionData().isChannel && (t = n.$dialog.find('[name="lower-band-additional"]'), e = n.$dialog.find('[name="upper-band-additional"]'), o.isPrice() && (i = o.get("extra").price().lower < o.get("extra").price().upper), i ? (t.removeClass("_tv-dialog-text-input-error"), e.removeClass("_tv-dialog-text-input-error")) : (t.addClass("_tv-dialog-text-input-error"), e.addClass("_tv-dialog-text-input-error"))), i
        }, o.prototype._minMovingPeriod = function(t) {
            var t = t;
            return t || (t = this.alert && this.alert.get("extra") && this.alert.get("extra").alertSeries && this.alert.get("extra").alertSeries()), t && "MainSeries" === t.type ? 1 : 2
        }, o.prototype._maxMovingPeriod = function() {
            return 300
        }, o.prototype._movingIsValid = function() {
            var t, e, i, n, o, r = !0,
                s = this.$dialog ? this.$dialog.find('[name^="moving-"]') : [];
            return s.length ? (t = s.filter('[name="moving-value"]'), e = parseFloat(t.val()) > 0, t.toggleClass("_tv-dialog-text-input-error", !e), r = r && e, i = s.filter('[name="moving-period"]'), n = parseFloat(i.val()), o = TradingView.isInteger(n) && this._minMovingPeriod() <= n && n <= this._maxMovingPeriod(), i.toggleClass("_tv-dialog-text-input-error", !o), r = r && o) : !0
        }, o.prototype._getSymbolFromSeriesUniqueId = function(t) {
            if (!t) return "";
            this._cache._getSymbolFromSeriesUniqueId || (this._cache._getSymbolFromSeriesUniqueId = {});
            var e = t.split && t.split("|")[0];
            return this._cache._getSymbolFromSeriesUniqueId[t] = e, e
        }, o.prototype._UIrowsOptions = function() {
            var t = this,
                e = {
                    create_alert: {
                        condition: {
                            visible: !0
                        },
                        frequency: {
                            visible: !0,
                            disabled: !1
                        },
                        expiration: {
                            visible: !0,
                            disabled: !1
                        },
                        actions: {
                            visible: !0,
                            disabled: !1
                        },
                        description: {
                            visible: !0,
                            disabled: !1
                        }
                    },
                    edit_alert: {
                        condition: {
                            visible: !0
                        },
                        frequency: {
                            visible: !0,
                            disabled: !1
                        },
                        expiration: {
                            visible: !0,
                            disabled: !1
                        },
                        actions: {
                            visible: !0,
                            disabled: !1
                        },
                        description: {
                            visible: !0,
                            disabled: !1
                        }
                    },
                    restart_alert: {
                        condition: {
                            visible: !1
                        },
                        frequency: {
                            visible: !1
                        },
                        expiration: {
                            visible: !0,
                            disabled: !1
                        },
                        actions: {
                            visible: !1
                        },
                        description: {
                            visible: !1
                        }
                    }
                },
                i = e[this._type];
            return i || TradingView.logError("Unknow dialog type - cant' find visible rows"), t.alert && t.alert.get("extra") || (i.condition.visible = !1, i.frequency.visible = !1), i
        }, TradingView.MakeAlertDialog = o, t.exports = o
    }).call(e, i(86), i(8))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t) {
            t.container || TradingView.logError("[SoundSelector] options.container is required");
            var t = $.extend(this.defaultOptions(), t);
            this.fileName = new e(t.fileName), this.duration = new e(t.duration), this._$container = t.container, this._$durationContainer = t.durationContainer, this._onChange = t.onChange || function() {
                    TradingView.logWarn("[SoundSelector] 'onChange' callback is not defined")
                }, this._options = t, this._nowPlaying = null, this._attachHandlers(), this._render()
        }
        var o = i(103),
            r = i(91),
            s = r.bindPopupMenu,
            a = r.unbindPopupMenu;
        n.prototype.soundList = function() {
            return this._soundListArray || (this._soundListArray = $.map(o.alertSounds(), function(t) {
                return {
                    fileName: t.path,
                    title: t.title
                }
            })), this._soundListArray
        }, n.prototype.defaultOptions = function() {
            return {
                fileName: this.soundList()[0].fileName,
                duration: ""
            }
        }, n.prototype._attachHandlers = function() {
            var t = this;
            t.fileName.subscribe(function(e) {
                t._onChange(e, t.duration.value()), t._$button.find(".title").text(t._fileName2title(e))
            }), t.duration.subscribe(function(e) {
                t._onChange(t.fileName.value(), e)
            })
        }, n.prototype._render = function() {
            var t, e, i = this;
            i._$container.empty(), i._$button = $('<a class="_tv-button with-arrow"><span class="title">' + i._fileName2title(i.fileName.value()) + '</span><span class="icon-dropdown"></span></a>'), i._$button.appendTo(i._$container), t = function() {
                return $.map(i.soundList(), function(t) {
                    var e, n = t,
                        r = $('<span class="manage-sound-button"></span>'),
                        s = function() {
                            var t = !!o.isPlaying(n.fileName);
                            r.toggleClass("stop", t), r.toggleClass("play", !t), i._nowPlaying = t ? n.fileName : null
                        };
                    return s(), o.isPlaying(n.fileName) && o.onStopped(n.fileName, s), e = function(t) {
                        t.stopPropagation(), r.hasClass("play") ? (o.stop(), o.play(n.fileName, !1, i.duration.value()), o.onStopped(n.fileName, s)) : r.hasClass("stop") && o.stop(n.fileName), s()
                    }, {
                        title: n.title,
                        action: function() {
                            i.fileName.setValue(n.fileName)
                        },
                        active: n.fileName === i.fileName.value(),
                        buttons: [{
                            el: r,
                            handler: e
                        }]
                    }
                })
            }, s(i._$button, t, {
                direction: "down",
                addClass: "sound-selector"
            }), i._$durationContainer && (i._$durationContainer.empty(), e = $('<select><option value="0">' + $.t("Once") + '</option><option value="5">' + $.t("5 seconds") + '</option><option value="10">' + $.t("10 seconds") + '</option><option value="30">' + $.t("30 seconds") + '</option><option value="60">' + $.t("1 minute") + "</option></select>"), e.change(function() {
                var t = parseInt(e.val());
                i.duration.setValue(t)
            }), e.appendTo(i._$durationContainer), e.val(i.duration.value() || 0))
        }, n.prototype._fileName2title = function(t) {
            var e, i = this.soundList();
            for (e = 0; e < i.length; e++)
                if (i[e].fileName === t) return i[e].title
        }, n.prototype.destroy = function() {
            var t = this;
            t.fileName.unsubscribe(function(e) {
                t._onChange({
                    fileName: e
                })
            }), t.duration.unsubscribe(function(e) {
                t._onChange({
                    duration: e
                })
            }), a(t._$button), t._nowPlaying && o.stop(t._nowPlaying)
        }, t.exports = n
    }).call(e, i(17))
}, function(t, e, i) {
    (function(e) {
        "use strict";
        var i = {
            _sounds: {},
            alertSounds: function() {
                return $.grep(this.availableSounds(), function(t) {
                    return !!t.soundForAlerts
                })
            },
            defaults: function() {
                return {
                    sound: "notification/notification",
                    alert: "alert/fired"
                }
            },
            soundIsAvailable: function(t) {
                return !!$.grep(this.availableSounds(), function(e) {
                    return e.path === t
                }).length
            },
            availableSounds: function() {
                return [{
                    path: this.defaults().sound,
                    title: $.t("Default")
                }, {
                    title: $.t("Chat Message"),
                    path: "chat/message"
                }, {
                    title: $.t("Chat Popup"),
                    path: "chat/popup"
                }, {
                    title: $.t("Chat Call"),
                    path: "chat/call"
                }, {
                    title: $.t("Chat Calling"),
                    path: "chat/calling"
                }, {
                    title: $.t("Chat Hangup"),
                    path: "chat/hangup"
                }, {
                    title: $.t("Thin"),
                    path: "alert/fired",
                    soundForAlerts: !0
                }, {
                    title: $.t("3 Notes Reverb"),
                    path: "alert/3_notes_reverb",
                    soundForAlerts: !0
                }, {
                    title: $.t("Alarm Clock"),
                    path: "alert/alarm_clock",
                    soundForAlerts: !0
                }, {
                    title: $.t("Beep-beep"),
                    path: "alert/beep_beep",
                    soundForAlerts: !0
                }, {
                    title: $.t("Calling"),
                    path: "alert/calling",
                    soundForAlerts: !0
                }, {
                    title: $.t("Chirpy"),
                    path: "alert/chirpy",
                    soundForAlerts: !0
                }, {
                    title: $.t("Fault"),
                    path: "alert/fault",
                    soundForAlerts: !0
                }, {
                    title: $.t("Hand Bell"),
                    path: "alert/hand_bell",
                    soundForAlerts: !0
                }]
            },
            _get: function(t) {
                return t in this._sounds || (this._sounds[t] = {
                    el: $(("<audio><source src=" + TradingView.wrapUrl('"/static/sounds/%s.mp3"') + ' type="audio/mp3"><source src=' + TradingView.wrapUrl('"/static/sounds/%s.ogg"') + ' type="audio/ogg"></audio>').replace(/%s/g, t)).get(0),
                    playing: new e(!1),
                    _onended: null
                }), this._sounds[t]
            },
            load: function() {
                $.map(this.availableSounds(), function(t) {
                    return t.path
                }).forEach(function(t) {
                    this._get(t)
                }, this)
            },
            play: function(t, e, i) {
                var n;
                e && i && (console.warn("Can't use 'loop' and 'duration' params at the same time, choosing 'loop'"), i = null), t = this._get(t || this.defaults().sound), i = 1e3 * i, n = i > 0, t._onended = function() {
                    n ? t.el.play() : (t.playing.setValue(!1), t.el.removeEventListener("ended", t._onended), t._onended = null)
                }, t.el.load(), t.playing.setValue(!0), e ? t.el.loop = !0 : t.el.addEventListener("ended", t._onended), t.el.play(), setTimeout(function() {
                    n = !1
                }, i)
            },
            stop: function(t) {
                function e(t) {
                    t = i._get(t), t.el.pause(), t.playing.setValue(!1), t.el.removeEventListener("ended", t._onended), t._onended = null
                }
                var i = this;
                t ? e(t) : $.each(Object.keys(this._sounds), function(t, i) {
                    e(i)
                })
            },
            onStopped: function(t, e) {
                "function" == typeof e && this._get(t).playing.subscribe(function(t) {
                    t || e()
                }, {
                    once: !0
                })
            },
            isPlaying: function(t) {
                return this._get(t).playing.value()
            }
        };
        t.exports = i
    }).call(e, i(17))
}, function(t, e, i) {
    "use strict";

    function n(t) {
        this._invalidationLevel = t || n.UPDATE_CURSOR_ONLY, this._invalidatedPanes = {}, o() && (this._timeCreated = window.performance.now(), this._mergeCount = 0, this._documentHidden = document.hidden)
    }
    var o = i(105).perfomanceTestEnabled;
    n.UPDATE_CURSOR_ONLY = 1, n.LIGHT_UPDATE = 2, n.FULL_UPDATE = 3, n.prototype.invalidatePane = function(t, e) {
        this._invalidatedPanes[t] ? this._invalidatedPanes[t] = Math.max(this._invalidatedPanes[t], e) : this._invalidatedPanes[t] = e
    }, n.prototype.invalidateAll = function(t) {
        this._invalidationLevel = Math.max(this._invalidationLevel, t)
    }, n.prototype.fullInvalidation = function() {
        return this._invalidationLevel
    }, n.prototype.invalidateForPane = function(t) {
        return this._invalidatedPanes[t] ? Math.max(this._invalidatedPanes[t], this._invalidationLevel) : this._invalidationLevel
    }, n.prototype.merge = function(t) {
        this.force = this.force || t.force, this._invalidationLevel = Math.max(this._invalidationLevel, t._invalidationLevel);
        for (var e in t._invalidatedPanes) this._invalidatedPanes[e] ? this._invalidatedPanes[e] = Math.max(this._invalidatedPanes[e], t._invalidatedPanes[e]) : this._invalidatedPanes[e] = t._invalidatedPanes[e];
        o() && this._mergeCount++
    }, n.prototype.exclude = function(t) {
        this._invalidationLevel <= t && (this._invalidationLevel = 0);
        for (var e in this._invalidatedPanes) this._invalidatedPanes[e] <= t && (this._invalidatedPanes[e] = 0)
    }, n.prototype.start = function() {
        this._timeStart = window.performance.now()
    }, n.prototype.end = function() {
        this._timeEnd = window.performance.now()
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n() {
        return r.getInt("display_fps", s)
    }

    function o() {
        return !!(window.performance && window.performance.now && (window.featureToggleState && window.featureToggleState.perfomance_test_fps || localStorage["forcefeaturetoggle.perfomance_test_fps"]))
    }
    var r = i(106),
        s = 0,
        a = 1;
    window.fpson = function() {
        r.setValue("display_fps", a)
    }, window.fpsoff = function() {
        r.setValue("display_fps", s)
    }, e.FPS_NONE = s, e.FPS_SHOw_FULL = a, e.getDisplayFpsLevel = n, e.perfomanceTestEnabled = o
}, function(t, e, i) {
    (function(t, e) {
        "use strict";
        var i = window.TVSettings = function() {
            function e(t) {
                return C + "." + t
            }

            function n(t, e) {
                var i;
                return i = P[t], window.is_authenticated && !V || null != i || !window.localStorage || (i = P[t]), null == i ? e : i
            }

            function o(t, e) {
                var i = n(t, void 0);
                if (null == i) return e;
                try {
                    return JSON.parse(i)
                } catch (o) {
                    return h(t), e
                }
            }

            function r(t, e) {
                var i = n(t);
                return null == i ? e : !(!i || "false" === i || 0 === +i)
            }

            function s(t, e, i) {
                var o, r = n(t, void 0, i);
                if (null == r) return e;
                if (o = parseFloat(r), !isFinite(o)) throw new TypeError('"' + r + '" is not float (key: "' + t + '")');
                return o
            }

            function a(t, e, i) {
                var o, r = n(t, void 0, i);
                if (null == r) return e;
                if (o = parseInt(r, 10), !isFinite(o)) throw new TypeError('"' + r + '" is not int (key: "' + t + '")');
                return o
            }

            function l(t, e, n) {
                n = n || {};
                var o = "" + e;
                return P[t] !== o && (P[t] = o, u(t)), n.forceFlush && p(), i
            }

            function c(t, e, n) {
                var o = JSON.stringify(e);
                return l(t, o, n), i
            }

            function h(t) {
                return null != P[t] && (delete P[t], u(t), TradingView.trackEvent("Settings debug", t, user.username)), i
            }

            function d() {
                I = void 0, k.length && p()
            }

            function u(t) {
                if (!window.is_authenticated || V) try {
                    null == P[t] ? TVLocalStorage.removeItem(e(t)) : TVLocalStorage.setItem(e(t), P[t])
                } catch (i) {} else k.push(t), I || (I = setTimeout(d, x));
                TVXWindowEvents.emit("settings", JSON.stringify({
                    key: t,
                    value: P[t]
                }))
            }

            function p(t) {
                var e, i, n, o, r;
                if (!TradingView.onWidget() && window.is_authenticated && !V && 0 !== k.length) {
                    for (e = k, k = [], i = {}, n = e.length; n--;) o = e[n], r = P[o], void 0 === r && (r = null), i[o] = r;
                    $.ajax({
                        url: "/savesettings/",
                        type: "POST",
                        data: {
                            delta: JSON.stringify(i)
                        },
                        async: !t
                    })
                }
            }

            function f() {
                var t, e, i;
                for (t = 0; t < localStorage.length; t++) e = localStorage.key(t), i = C.length, e.substring(0, i + 1) === C + "." && (k = [], localStorage.removeItem(e));
                $.post("/restoredefaults/", {}, function(t) {
                    TVDialogs.showNotice("Success", "Defaults has been successfully restored")
                }).error(function(t) {})
            }

            function _() {
                return Object.keys(P)
            }

            function g(t, e) {
                var i, n = _(e),
                    o = [];
                for (t = RegExp("^" + TradingView.RegExpEscape(t).replace(/\\\*\\\*/gi, ".+").replace(/\\\*/gi, "[^.]+") + "$", "gi"), i = n.length - 1; i >= 0; i--) t.test(n[i]) && o.push(n[i]), t.lastIndex = 0;
                return o
            }

            function m(t) {
                for (var e = 0; e < E.length; ++e)
                    if (E[e].exec(t)) return !0;
                return !1
            }

            function v() {
                var e, i, n, o, r;
                if (P = [], window.localStorage)
                    for (e = C + ".", i = !t.enabled("save_chart_properties_to_local_storage"), n = localStorage.length; n--;) o = localStorage.key(n), o.substring(0, e.length) === e && (r = o.substring(e.length), i && !m(r) || (P[r] = localStorage.getItem(o)))
            }

            function y(t) {
                var e, i, n, o, r;
                if (P = [], window.localStorage)
                    for (e = 0 === Object.keys(t).length, i = C + ".", n = localStorage.length; n--;) o = localStorage.key(n), o.substring(0, i.length) === i && (e && (r = o.substring(i.length), l(r, localStorage.getItem(o))), localStorage.removeItem(o));
                for (n in t) P[n] = t[n] + ""
            }

            function w(t) {
                window.is_authenticated && !V ? y(t || {}) : v()
            }
            var b, S, T, x, C, P, k, I, E, L = !1,
                V = t.enabled("cqg_terminal");
            try {
                L = !TradingView.onWidget() && parent && parent !== window && !!parent.IS_DEMO_PAGE
            } catch (M) {}
            return L ? (b = {
                "widgetbar.layout-settings": {
                    widgets: {},
                    settings: {
                        minimized: !0
                    }
                },
                notShowMainWizard: !0
            }, S = function(t, e, i) {
                var n = b[t];
                return null == n ? e : n
            }, T = function() {}, {
                loaded: !1,
                loadedModel: !1,
                getValue: S,
                getJSON: S,
                getBool: S,
                getFloat: S,
                getInt: S,
                setValue: T,
                setJSON: T,
                remove: T,
                restoreDefaults: T,
                keys: function() {
                    return Object.keys(b)
                },
                keysMask: function() {
                    return []
                },
                sync: T
            }) : (x = 12e4, "local" === window.environment && (x = 5e3), C = "tradingview", P = {}, k = [], E = [/^widgetbar\.widget\.watchlist.+/, /.+quicks$/, /^widgetbar\.layout-settings$/, /^ChartSideToolbarWidget\.visible$/, /^onwidget\.watchlist^/], TVXWindowEvents.on("settings", function(t) {
                var e = JSON.parse(t);
                null == e.value ? delete P[e.key] : P[e.key] = e.value
            }), $(window).on("visibilitychange", function(t, e) {
                e || p()
            }), $(window).on("unload", function() {
                p(!0)
            }), {
                loaded: !1,
                loadedModel: !1,
                getValue: n,
                getJSON: o,
                getBool: r,
                getFloat: s,
                getInt: a,
                setValue: l,
                setJSON: c,
                remove: h,
                restoreDefaults: f,
                keys: _,
                keysMask: g,
                sync: w
            })
        }();
        void 0 !== e && e && e.exports && (e.exports = i)
    }).call(e, i(3), i(4)(t))
}, function(t, e, i) {
    "use strict";

    function n(t) {
        function e() {
            n.reject()
        }

        function i() {
            var t, r;
            return o.length ? (t = o.shift(), null == t ? i() : (r = document.createElement("script"), r.addEventListener("load", i, !0), r.addEventListener("error", e, !0), r.async = !0, r.defer = !0, r.src = t, void document.body.appendChild(r))) : void n.resolve()
        }
        var n = $.Deferred(),
            o = [].concat(t);
        return i(), n.promise()
    }
    var o = function() {
        var t = null;
        return function() {
            return t || (t = $.Deferred(), i.e(2, function() {
                i(108), t.resolve()
            })), t.promise()
        }
    }();
    e.loadScript = n, TradingView.loadTVScript = o, e.loadTVScript = o
}, , function(t, e, i) {
    (function(t) {
        var e;
        "undefined" != typeof window && (e = window.TVScript = window.TVScript || {}), e = e || {}, e.Utils = e.Utils || {}, e.Defaults = {}, e.Defaults.defaultColor = "#000080", e.Defaults.defaultAreaTransparency = 90, e.RegEx = {}, e.RegEx.internalId = /#([\w|#]+)/, e.RegEx.selfReferencingVarId = /#self_([\w|#]+)/, e.RegEx.fwdReferencingVarId = /#fwd_([\w|#]+)/, e.RegEx.outputFunctions = /^plot|barcolor|bgcolor|plotshape|plotchar|plotarrow$/, e.RegEx.strategyFunctions = /^strategy\..+/, e.RegEx.strategyAnnotation = /^strategy$/, e.RegEx.studyAnnotation = /^study$/, e.RegEx.alertConditionAnnotation = /^alertcondition$/, e.createScriptIdPart = function() {
            var t, e = "0123456789abcdefghijklmopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
            for (t = ""; t.length < 32;) t += e.charAt(Math.random() * e.length | 0);
            return "USER;" + t
        }, e.createScriptStudyId = function(t, e, i, n) {
            if ("string" != typeof t) throw new TypeError("scriptIdPart must be a string");
            if ("string" != typeof e) throw new TypeError("scriptingPkgVers must be a string");
            var o;
            return o = TradingView.isAbsent(n) || TradingView.isAbsent(n.classNameOverride) ? i ? "StrategyScript" : "Script" : n.classNameOverride, o + "$" + t + "@tv-scripting-" + e
        }, e.patchILTemplate = function(t, i, n) {
            var o = n || {},
                r = /<(in_\d+)>/g;
            return e._patchTemplate(r, t, i, o)
        }, e._patchTemplate = function(t, i, n, o) {
            var r = o || {},
                s = i.replace(t, function(t, i) {
                    var o, s = i in r ? r[i] : n.defaults.inputs[i];
                    for (o = 0; o < n.inputs.length; ++o)
                        if (n.inputs[o].id === i) {
                            "bool" === n.inputs[o].type ? s = s ? "1.0" : "0.0" : "text" !== n.inputs[o].type && "symbol" !== n.inputs[o].type && "resolution" !== n.inputs[o].type && "session" !== n.inputs[o].type || (s = "'" + e.decorateQuotes(s) + "'");
                            break
                        }
                    return s
                });
            return s
        }, e.stringify = function(t) {
            var i = [],
                n = function(t, n) {
                    if ("object" == typeof n) {
                        if (i.indexOf(n) >= 0) return "<serialized>";
                        if (n instanceof e.SymbolsTable) return "<symbols table>";
                        i.push(n)
                    }
                    return n
                };
            return JSON.stringify(t, n)
        }, e.assert = function(t, e) {
            if (!t) throw Error("Assertion failed" + (e ? ": " + e : ""))
        }, e.isMissing = function(t) {
            return null === t || void 0 === t
        }, e.isFunctionReference = function(t) {
            var e = {};
            return t && "[object Function]" === e.toString.call(t)
        }, e.logEntering = function(t, e) {}, e.logLeaving = function(t, e) {}, e.logMsg = function(t) {}, e.prependTabs = function(t) {
            var e, i = [];
            for (e = 0; e < t.length; ++e) i.push("	" + t[e]);
            return i
        }, e.toStrExpr = function(t) {
            if (isNumber(t)) return t;
            if (TradingView.isBoolean(t)) return t;
            if (TradingView.isString(t)) return t;
            if (t instanceof e.FunctionCall) return t.toStrExpr();
            throw Error("Cannot convert to string for given argument: " + t)
        }, e.toCacheKey = function(t) {
            if (isNumber(t)) return t;
            if (TradingView.isBoolean(t)) return t;
            if (TradingView.isString(t)) return t;
            if (t instanceof e.FunctionCall) return t.toCacheKey();
            throw Error("Cannot create cache key for given argument: " + t)
        }, e.isStrategy = function(t) {
            return /^\s*strategy\s*\(/m.test(t)
        }, e.Ids = {}, e.Ids.isInternal = function(t) {
            return t.match(e.RegEx.internalId)
        }, e.Ids.makeInternal = function(t) {
            return e.Ids.isInternal(t) ? t : "#" + t
        }, e.Ids.isFwdRefId = function(t) {
            return t.match(e.RegEx.fwdReferencingVarId)
        }, e.Ids.getFwdReferencedId = function(t) {
            var i = t.match(e.RegEx.fwdReferencingVarId);
            return e.assert(void 0 !== i, t + " is not a fwd ref id!"), i[1]
        }, e.Ids.isSelfRefId = function(t) {
            return t.match(e.RegEx.selfReferencingVarId)
        }, e.Ids.getSelfReferencedId = function(t) {
            var i = t.match(e.RegEx.selfReferencingVarId);
            return e.assert(void 0 !== i, t + " is not a self ref id!"), i[1]
        }, e.TranslatorDefaultVersion = 1, e.TranslatorLastVersion = 2, e.injectScopeStackFunctionality = function(t) {
            t.__scopeStack = new e.Stack, t.__topLevelScopeStack = new e.Stack, t.enterScope = function(t, e) {
                var i = this.__enterScopeImpl(t, e, !0);
                return this.__topLevelScopeStack.push(i), i
            }, t.__enterScopeImpl = function(t, e, i) {
                return this.__scopeStack.push({
                    name: t,
                    funRef: e,
                    isTopLevel: i
                }), this.currentScope()
            }, t.__scopeCounter = 0, t.enterBlockScope = function() {
                var t = this.currentScope(),
                    e = this.__scopeCounter++;
                return this.__enterScopeImpl(t.name + "_" + e, t.funRef + "_" + e, !1)
            }, t.leaveScope = function() {
                var e = this.__scopeStack.pop();
                return e.isTopLevel && t.__topLevelScopeStack.pop(), e
            }, t.currentScope = function() {
                return this.__scopeStack.top()
            }, t.currentTopLevelScope = function() {
                return this.__topLevelScopeStack.top()
            }, t.findScope = function(t) {
                var e, i;
                for (e = 0; e < this.__scopeStack.size(); ++e)
                    if (i = this.__scopeStack._array[e], i.name == t) return i
            }, t.findTopLevelScope = function(t) {
                var e, i;
                if (t.isTopLevel) return t;
                for (e = this.__scopeStack.size() - 1; e >= 0; --e)
                    if (i = this.__scopeStack._array[e], i === t)
                        for (--e; e >= 0; --e)
                            if (i = this.__scopeStack._array[e], i.isTopLevel) return i
            }, t.isCurrentScopeGlobal = function() {
                return this.isScopeGlobal(this.currentScope())
            }, t.isScopeGlobal = function(t) {
                return "global" == t.name
            }, t.isCurrentScopeTopLevel = function() {
                return this.currentScope().name == this.currentTopLevelScope().name
            }, t.enterScope("global", "#global")
        }, e.decorateQuotes = function(t) {
            var e, i, n;
            return t ? (e = /([^\\']+?)(')[^']*?/g, i = "$1\\$2", n = t, "'" == n.charAt(0) && "'" == n.charAt(n.length - 1) ? (n = n.substr(1, n.length - 2), "'" + n.replace(e, i) + "'") : n.replace(e, i)) : t
        }, e.stripQuotes = function(t) {
            return void 0 === t || null === t ? t : TradingView.isString(t) ? t.replace(/^[\"'](.*)['\"]$/g, "$1") : t
        }, e.stripAndClean = function(t) {
            var i = e.stripQuotes(t),
                n = TradingView.cleanButAmpersand(i);
            return n
        }, e.addQuotes = function(t, e) {
            return void 0 === t || null === t ? t : (void 0 === e && (e = "'"), e + t + e)
        }, e.repeatString = function(t, e) {
            var i, n;
            if (null === t) throw new TypeError("can't convert " + t + " to object");
            if (i = "" + t, e = +e, e != e && (e = 0), 0 > e) throw new RangeError("repeat count must be non-negative");
            if (e == 1 / 0) throw new RangeError("repeat count must be less than infinity");
            if (e = Math.floor(e), 0 === i.length || 0 === e) return "";
            if (i.length * e >= 1 << 28) throw new RangeError("repeat count must not overflow maximum string size");
            for (n = ""; 1 == (1 & e) && (n += i), e >>>= 1, 0 !== e;) i += i;
            return n
        }, e._hexToByteArray = function(t) {
            var e, i = [],
                n = (t.length - 1) / 2;
            for (e = 0; n > e; e++) i[e] = parseInt(t.substr(1 + 2 * e, 2), 16);
            return i
        }, e.hexColorToRgba = function(t) {
            var i, n = (t.length - 1) / 2;
            return 3 === n ? t : (e.assert(4 === n, "Incorrect hex color"), i = this._hexToByteArray(t), i[3] = Math.round(i[3] / 255 * 100) / 100, "rgba(" + i.join(",") + ")")
        }, void 0 !== t && t && t.exports && (t.exports = e)
    }).call(e, i(4)(t))
}, , , , , , function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            this._source = t, this._model = e, this._points = [], this._floatPoints = []
        }
        var o = i(67),
            r = i(66).LineAnchor;
        n.prototype.priceToCoordinate = function(t) {
            var e, i = this._source.priceScale();
            return i.isPercent() && (e = this._source.ownerSource().firstValue(), t = i.priceRange().convertToPercent(t, e)), i.priceToCoordinate(t)
        }, n.prototype.addAnchors = function(t) {
            if (this.isAnchorsRequired()) {
                var e = this._points;
                this._model.lineBeingCreated() === this._source && (e = e.slice(0, -1)), t.append(this.createLineAnchor({
                    points: e
                }))
            }
        }, n.prototype.update = function() {
            var t, e, i, n, o, r, s, a;
            if (this._points = [], t = this._source.priceScale(), e = this._model.timeScale(), t && !t.isEmpty() && !e.isEmpty())
                for (this._floatPoints = [], i = this._source.points(), n = 0; n < i.length; n++) {
                    if (o = i[n], r = this._source.pointToScreenPoint(o), !r) return;
                    s = r[0], s.data = n, a = r[1], a.data = n, this._floatPoints.push(s), this._points.push(a)
                }
        }, n.prototype.currentPoint = function() {
            var t = this._model.crossHairSource();
            return new e.Point(t.x, t.y)
        }, n.prototype.anchorColor = function() {
            return this._source.isBeingEdited() ? "#D61AD3" : this._model.isDark() ? "#FFFFFF" : "#606060"
        }, n.prototype.isHoveredSource = function() {
            return this._source === this._model.hoveredSource()
        }, n.prototype.isSelectedSource = function() {
            return this._source === this._model.selectedSource()
        }, n.prototype.isAnchorsRequired = function() {
            return (this.isHoveredSource() || this.isSelectedSource()) && !this._model.isSnapshot()
        }, n.prototype.createLineAnchor = function(t) {
            return new r($.extend({
                color: this.anchorColor(),
                backgroundColor: this._model.backgroundColor(),
                currentPoint: this.currentPoint(),
                linePointBeingEdited: this._model.linePointBeingEdited(),
                hittestResult: o.CHANGEPOINT,
                radius: (TradingView.isMobile.any() ? 15 : 7) + (this.isSelectedSource() ? 1 : 0),
                strokeWidth: (TradingView.isMobile.any() ? 3 : 1) + (this.isSelectedSource() ? 1 : 0)
            }, t))
        }, t.exports = n
    }).call(e, i(40))
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(t, e, i) {
            this._textSizeCache = e, this._data = t, this._fontSize = t.fontsize ? t.fontsize : t.fontSize ? t.fontSize : 20, t.lines = this._lines = this.wordWrap(t.text, t.wordWrapWidth), this._hittest = i || new h(h.MOVEPOINT)
        }

        function o(t, e, i, n, o, r) {
            a.call(this, t, e), this._offsetX = i, this._offsetY = n, this._vertAlign = o, this._horzAlign = r, this._rendererCache = {}, this._renderer = null, this._invalidated = !0
        }

        function r(t, e) {
            this._constructor = "LineToolText";
            var i = e || new u("linetooltext");
            l.call(this, t, new o(this, t), i), this._timeScale = t.timeScale(), this._barSpacing = t.timeScale().barSpacing()
        }

        function s(t, e) {
            var i = e || new u("linetooltextabsolute");
            i.locked.value() || i.locked.setValue(!0), r.call(this, t, i)
        }
        var a = i(115),
            l = i(77).LineDataSource,
            c = i(80).DataSource,
            h = i(67),
            d = i(71),
            u = i(81).DefaultProperty;
        ! function() {
            function t() {
                var t = document.createElement("canvas");
                t.width = 0, t.height = 0, e = t.getContext("2d"), t = null
            }
            var e;
            n.prototype.setPoints = function(t, e) {
                this._data.points = t, this._hittest = e || new h(h.MOVEPOINT)
            }, n.prototype._calcLinesWidths = function() {
                var i, n, o, r;
                if (e || t(), e.textBaseline = "alphabetic", e.font = this.fontStyle(), i = [], this._data.wordWrapWidth)
                    for (n = this._data.wordWrapWidth, o = 0; o < this._lines.length; o++) i.push(this._data.wordWrapWidth);
                else
                    for (n = 0, o = 0; o < this._lines.length; o++) r = e.measureText(this._lines[o]).width, i.push(r), n = Math.max(n, r);
                return {
                    widths: i,
                    maxWidth: n
                }
            }, n.prototype.measure = function() {
                var t = this._fontSize,
                    e = this._calcLinesWidths().maxWidth,
                    i = t * this._lines.length,
                    n = ~~(t / 6);
                return this._data.backgroundHorzInflate && (e += 2 * this._data.backgroundHorzInflate), this._data.backgroundVertInflate && (i += 2 * this._data.backgroundVertInflate), e = Math.ceil(e + 2 * n), i = Math.ceil(i + 2 * n), e % 2 !== 0 && e++, this._data.padding && (i += this._data.padding), {
                    width: e,
                    height: i,
                    textBgPadding: n
                }
            }, n.prototype.wordWrap = function(i, n, o) {
                var r, s, a, l, c, h, d, u, p;
                if (e || t(), n = +n, i += "", r = i.split(/[^\S\r\n]*(?:\r\n|\r|\n|$)/), r[r.length - 1] || r.pop(), !isFinite(n) || 0 >= n) return r;
                for (e.font = o || this.fontStyle(), s = [], a = 0; a < r.length; a++)
                    if (l = r[a], c = e.measureText(l).width, n >= c) s.push(l);
                    else
                        for (h = l.split(/([-\)\]\},.!?:;])|(\s+)/); h.length;) {
                            if (d = ~~(n / c * (h.length + 2) / 3), 0 >= d || e.measureText(h.slice(0, 3 * d - 1).join("")).width <= n)
                                for (; e.measureText(h.slice(0, 3 * (d + 1) - 1).join("")).width <= n;) d++;
                            else
                                for (; d > 0 && e.measureText(h.slice(0, 3 * --d - 1).join("")).width > n;);
                            if (d > 0) s.push(h.slice(0, 3 * d - 1).join("")), h.splice(0, 3 * d);
                            else {
                                if (u = h[0] + (h[1] || ""), p = 1 === p ? 1 : ~~(n / e.measureText(u) * u.length), e.measureText(u.substr(0, p)).width <= n)
                                    for (; e.measureText(u.substr(0, p + 1)).width <= n;) p++;
                                else
                                    for (; p > 1 && e.measureText(u.substr(0, --p)).width > n;);
                                1 > p && (p = 1), s.push(u.substr(0, p)), h[0] = u.substr(p), h[1] = ""
                            }
                            if (c = e.measureText(h.join("")).width, n >= c) {
                                s.push(h.join(""));
                                break
                            }
                        }
                return s
            }
        }(), n.prototype._x = function() {
            var t = this._data.points[0].x + this._data.offsetX;
            return t
        }, n.prototype._y = function() {
            var t, e = this._fontSize * this._lines.length;
            switch (this._data.scaleY && (e *= this._data.scaleY), t = this._data.points[0].y + this._data.offsetY + e, this._data.vertAlign) {
                case "top":
                    break;
                case "bottom":
                    t -= e;
                    break;
                case "middle":
                    t -= e / 2
            }
            return t
        }, n.prototype.fontStyle = function() {
            return (this._data.bold ? "bold " : "") + (this._data.italic ? "italic " : "") + this._fontSize + "px " + this._data.font
        }, n.prototype.draw = function(t) {
            var e, i, n, o, r, s, a, l, c, h, d, u, p, f, _, g;
            if (0 !== this._data.points.length) {
                switch (e = this._x(), i = this._y(), n = this._fontSize, this._data.scaleY && (n *= this._data.scaleY), i -= n * (this._lines.length - 1), t.textBaseline = "alphabetic", t.font = this.fontStyle(), this._data.horzAlign) {
                    case "left":
                        t.textAlign = "start";
                        break;
                    case "right":
                        t.textAlign = "end";
                        break;
                    case "center":
                        t.textAlign = "center"
                }
                if (t.translate(e + .5, i + .5), e = 0, i = 0, n = this._fontSize, this._data.scaleX && this._data.scaleY && (o = Math.min(this._data.scaleX, this._data.scaleY), t.scale(o, o)), r = this._calcLinesWidths(), s = r.maxWidth, a = 0, this._data.backgroundColor || this._data.borderColor || this._data.highlightBorder && this._data.wordWrapWidth) {
                    switch (l = e, this._data.horzAlign) {
                        case "left":
                            break;
                        case "right":
                            l -= s;
                            break;
                        case "center":
                            l -= s / 2
                    }
                    c = n * this._lines.length, h = ~~(n / 6), this._data.backgroundHorzInflate && (s += 2 * this._data.backgroundHorzInflate, l -= this._data.backgroundHorzInflate), this._data.backgroundVertInflate && (c += 2 * this._data.backgroundVertInflate, i += this._data.backgroundVertInflate), d = {
                        x: Math.floor(l - h),
                        y: Math.floor(i - n),
                        w: Math.ceil(s + 2 * h),
                        h: Math.ceil(c + 2 * h)
                    }, d.w % 2 !== 0 && d.w++, this._data.padding && (d.h += this._data.padding,
                        a = this._data.padding), this._data.backgroundVertInflate && (i += this._data.backgroundVertInflate), this._data.backgroundRoundRect ? (t.roundRect(d.x, d.y, d.w, d.h, this._data.backgroundRoundRect), this._data.backgroundColor && (t.fillStyle = this._data.backgroundColor, t.fill()), this._data.borderColor && (u = ~~Math.max(n / 12, 1), t.strokeStyle = this._data.borderColor, t.lineWidth = u, t.stroke())) : (this._data.backgroundColor && (t.fillStyle = this._data.backgroundColor, t.fillRect(d.x, d.y, d.w, d.h)), this._data.borderColor ? (u = ~~Math.max(n / 12, 1), t.strokeStyle = this._data.borderColor, t.lineWidth = u, t.strokeRect(d.x - u / 2, d.y - u / 2, d.w + u, d.h + u)) : this._data.highlightBorder && (t.strokeStyle = this._data.color, t.lineWidth = 1, t.beginPath(), _ = [3, 1], t.dashedLineTo(d.x - .5, f = d.y - .5, p = d.x + d.w + .5, f, _), t.dashedLineTo(p, f, p, f = d.y + d.h + .5, _), t.dashedLineTo(p = d.x - .5, f, d.x + d.w + .5, f, _), t.dashedLineTo(p, d.y - .5, p, f, _), t.stroke()))
                }
                for (this._data.backgroundVertInflate && !this._data.backgroundColor && (i += 2 * this._data.backgroundVertInflate), t.fillStyle = this._data.color, g = 0; g < this._lines.length; g++) t.fillText(this._lines[g], e, i), i += n + a;
                this._textSizeCache && (this._textSizeCache.widths = r.widths)
            }
        }, n.prototype.hitTest = function(t) {
            var e, i, n, o, r, s, a, l;
            if (0 === this._data.points.length) return null;
            if (e = this._fontSize, this._data.scaleY && (e *= this._data.scaleY), i = this._textSizeCache.widths, !i) return null;
            for (n = 0, o = 0; o < i.length; o++) n = Math.max(n, i[o]);
            return this._data.scaleX && (n *= this._data.scaleX), r = this._data.points[0].x + this._data.offsetX, s = this._data.points[0].y + this._data.offsetY, "bottom" === this._data.vertAlign && (s -= this._lines.length * this._fontSize), "middle" === this._data.vertAlign && (s -= this._lines.length * this._fontSize / 2), "right" === this._data.horzAlign ? r -= n : "center" === this._data.horzAlign && (r -= n / 2), a = this._data.backgroundColor || this._data.borderColor ? ~~(e / 6) : 0, l = this._data.borderColor ? ~~Math.max(e / 12, 1) : 0, t.x >= r - a - l && t.x <= r + n + a + l && t.y >= s - l && t.y <= s + this._lines.length * this._fontSize + 2 * a + l ? this._hittest : null
        }, inherit(o, a), o.prototype.update = function() {
            this._renderer = null, this._invalidated = !0
        }, o.prototype.updateImpl = function() {
            a.prototype.update.call(this), this._invalidated = !1
        }, o.prototype.renderer = function() {
            var e, i, o, r, s, a, l, c, h, u, p, f;
            return this._invalidated && this.updateImpl(), this._renderer ? this._renderer : (e = this._source.priceScale(), !e || e.isEmpty() ? (this._renderer = new d, this._renderer) : (i = {}, o = this._source.properties(), r = o.locked && o.locked.value(), r ? i.points = this._source.fixedPoints() : i.points = this._points, i.text = o.text.value(), i.color = o.color.value(), i.font = o.font.value(), i.offsetX = this._offsetX ? this._offsetX : 0, i.offsetY = this._offsetY ? this._offsetY : 0, i.vertAlign = this._vertAlign ? this._vertAlign : "top", i.horzAlign = this._horzAlign ? this._horzAlign : "left", i.fontsize = o.fontsize.value(), o.fillBackground && o.fillBackground.value() && (i.backgroundColor = o.backgroundColor.value(), i.backgroundTransparency = 1 - o.backgroundTransparency.value() / 100 || 0), o.drawBorder && o.drawBorder.value() && (i.borderColor = o.borderColor.value()), o.wordWrap && o.wordWrap.value() && (i.wordWrapWidth = o.wordWrapWidth.value()), i.bold = o.bold && o.bold.value(), i.italic = o.italic && o.italic.value(), i.highlightBorder = this._model.selectedSource() === this._source, r || !o.fixedSize || o.fixedSize.value() || (i.scaleX = this._source._model.timeScale().barSpacing() / this._source._barSpacing, s = e.height() / e.priceRange().length(), this._source._isPriceDencityLog && !e.isLog() && (a = e.priceRange().minValue(), l = e.priceRange().maxValue(), a = e._toLog(a), l = e._toLog(l), c = l - a, s = e.height() / c), !this._source._isPriceDencityLog && e.isLog() && (a = e.priceRange().minValue(), l = e.priceRange().maxValue(), a = e._fromLog(a), l = e._fromLog(l), c = l - a, s = e.height() / c), i.scaleY = s / this._source._priceDencity, (!isFinite(i.scaleY) || i.scaleY <= 0) && delete i.scaleY), h = new n(i, this._rendererCache), this.isAnchorsRequired() && 1 === i.points.length && !this._noSelection ? (u = i.points[0], p = new d, p.append(h), i.wordWrapWidth && (f = new t.Point(u.x + i.wordWrapWidth + ~~(i.fontsize / 6), u.y + (i.lines ? i.lines.length * i.fontsize / 2 + ~~(i.fontsize / 6) : 0)), f.data = 0, p.append(this.createLineAnchor({
                points: [f]
            }))), this._renderer = p, this._renderer) : (this._renderer = h, this._renderer)))
        }, inherit(r, l), r.MIN_WIDTH = 100, r.prototype.setPoint = function(t, e) {
            var i, n, o = this.properties();
            if (0 === t && o.wordWrapWidth && o.wordWrapWidth.value()) {
                if (i = o.locked && o.locked.value() ? this.fixedPoints()[0].x : this._timeScale.indexToCoordinate(this.points()[0].index), n = this._timeScale.indexToCoordinate(e.index) - i - ~~(o.fontsize.value() / 6), !isFinite(n)) return;
                o.wordWrapWidth.setValue(Math.max(r.MIN_WIDTH, n))
            }
        }, r.prototype.pointsCount = function() {
            return 1
        }, r.prototype.title = function() {
            return $.t("Text")
        }, r.prototype.setPriceScale = function(t) {
            c.prototype.setPriceScale.call(this, t), t && t.priceRange() && (this._priceDencity = t.height() / t.priceRange().length(), this._isPriceDencityLog = t.isLog())
        }, r.prototype.restoreSize = function() {
            this._barSpacing = this._model.timeScale().barSpacing(), this._priceDencity = this.priceScale().height() / this.priceScale().priceRange().length(), this.updateAllViews(), this._model.updateSource(this)
        }, r.prototype.restoreTemplate = function(t) {
            delete t.locked, delete t.text, l.prototype.restoreTemplate.call(this, t)
        }, inherit(s, r), s.prototype.title = function() {
            return $.t("Anchored Text")
        }, r.prototype.state = function(t) {
            var e = l.prototype.state.call(this, t);
            return t && (e.state.fixedSize = !1), e
        }, e.TextRenderer = n, e.TextPaneView = o, e.LineToolText = r, e.LineToolTextAbsolute = s
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t) {
            this._data = t
        }

        function o(t) {
            this._series = t, this._invalidated = !0
        }
        var r = i(71),
            s = i(83),
            a = s.DateFormatter,
            l = s.TimeFormatter;
        n.prototype.hittest = function() {}, n.prototype.draw = function(t) {
            var e, i, n, o, r, s, a, l, c, h, d = 5,
                u = 12,
                p = 5,
                f = 8,
                _ = 13,
                g = 0;
            t.save(), t.setFont(_ + "px Arial"), n = $.t("Last available bar"), this._data.eod ? g = t.measureText(n).width : (e = t.measureText(this._data.dateString || "").width, i = t.measureText(this._data.timeString || "").width, g = Math.max(e, i)), o = this._data.timeString ? 2 : 1, t.fillStyle = this._data.eod ? "#FF4040" : "#58A3CD", t.translate(this._data.point.x + .5, this._data.point.y + .5), r = Math.round(-g / 2) - f, s = -(_ + d) * o - d - u - p, a = Math.round(r + g + 2 * f), l = -u - p, t.beginPath(), t.moveTo(r, s), t.lineTo(a, s), t.lineTo(a, l), t.lineTo(u, l), t.lineTo(0, l + u), t.lineTo(-u, l), t.lineTo(r, l), t.fill(), t.fillStyle = "#FFFFFF", t.textBaseline = "top", this._data.eod ? t.fillText(n, r + f, s + d) : (c = r + f + (g - e) / 2, t.fillText(this._data.dateString, c, s + d), this._data.timeString && (h = r + f + (g - i) / 2, t.fillText(this._data.timeString, h, s + 2 * d + _))), t.restore()
        }, o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.updateImpl = function() {
            var t, i, n, o, r, s;
            delete this._point, delete this._dateString, delete this._timeString, delete this._eod, t = this._series.gotoDateResult(), void 0 !== t && (i = t.index, n = this._series.bars().valueAt(i), n && (o = this._series.priceScale().priceToCoordinate(n[TradingView.HIGH_PLOT]), r = this._series.model().timeScale().indexToCoordinate(i), this._point = new e.Point(r, o), t.eod ? this._eod = !0 : (s = this._series.model().timeScale().indexToUserTime(i), this._dateString = (new a).format(s), this._series.isDWM() || (this._timeString = (new l).format(s)))))
        }, o.prototype.renderer = function() {
            return this._invalidated && (this.updateImpl(), this._invalidated = !1), this._point ? new n({
                point: this._point,
                dateString: this._dateString,
                timeString: this._timeString,
                eod: this._eod
            }) : new r
        }, t.exports = o
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t) {
            this._data = t, this._textWidthCache = new r
        }

        function o(t, e, i, n, o) {
            this._model = t, this._source = e, this._plotIndex = i, this._getterName = n || "symbol", this._propertyName = o, this._cache = {}, this._invalidated = !0, this._rendererData = {}
        }
        var r = i(119),
            s = i(71),
            a = i(61).RGBColor;
        n.prototype.hitTest = function(t) {
            return null
        }, n.prototype.draw = function(t) {
            var e, i, n, o, r, s, a, l, c, h;
            this._data.visible && (this._textWidthCache.font !== this._data.font && (this._textWidthCache.reset(), this._textWidthCache.font = this._data.font), t.font = this._data.font, e = this._data.fontSize, i = Math.floor(e / 4.5), n = Math.ceil(e / 4.5), o = Math.ceil(e / 3), r = Math.ceil(this._textWidthCache.measureText(t, this._data.text)), s = Math.round(e / 10), a = e + i + n, l = r + 2 * o, c = this._data.x - .5, "right" === this._data.align && (c -= l), h = this._data.y - Math.floor(e / 2) - i - .5, t.fillStyle = this._data.backColor, t.fillRect(c, h, l, a), t.fillStyle = this._data.color, t.textAlign = "left", t.fillText(this._data.text, c + o, h + i + e - s))
        }, o.prototype.isPropertyEnabled = function() {
            return this._model.properties().scalesProperties[this._propertyName].value()
        }, o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.updateImpl = function() {
            var t, i, n, o, r, l, c = this._rendererData;
            if (c.visible = !1, c.text = "", this.isPropertyEnabled() && this._source.properties().visible.value() && (t = this._source.lastValueData(this._plotIndex, e.enabled("price_scale_always_last_bar_value")), !t.noData)) {
                if (i = this._model.paneForSource(this._source), n = "right", i.leftPriceScale() === this._source.priceScale() && (n = "left"), o = this._model.properties(), r = !i.leftPriceScale().mainSource() || !i.rightPriceScale().mainSource(), r && o.scalesProperties.showLeftScale.value() && !o.scalesProperties.showRightScale.value() && (n = "left"), !r) {
                    if ("left" === n && !o.scalesProperties.showLeftScale.value()) return new s;
                    if ("right" === n && !o.scalesProperties.showRightScale.value()) return new s
                }
                l = t.coordinate, this._source.lastPriceLabelFixedCoordinate && (l = this._source.lastPriceLabelFixedCoordinate(this._plotIndex) || l), c.visible = !0, t.color !== c.backColor && (c.backColor = t.color, c.color = new a(t.color).blackWhiteContrast()), c.text = this._source[this._getterName](this._plotIndex), c.align = n, "right" === n ? c.x = this._model.timeScale().width() : c.x = 0, c.y = l, c.fontSize = this._model.properties().scalesProperties.fontSize.value(), c.font = TradingView.makeFont(c.fontSize, "Arial", "")
            }
        }, o.prototype.renderer = function() {
            return this._invalidated && (this.updateImpl(), this._invalidated = !1), this._renderer || (this._renderer = new n(this._rendererData)), this._renderer
        }, t.exports = o
    }).call(e, i(3))
}, function(t, e) {
    "use strict";

    function i(t) {
        this._maxSize = t || 50, this.reset()
    }
    i.prototype.measureText = function(t, e) {
        var i, n, o = (e + "").replace(this._re, "0");
        return this._cache[o] ? this._cache[o].width : (this._actualSize === this._maxSize && (i = this._tick2Labels[this._oldestTick], delete this._tick2Labels[this._oldestTick], delete this._cache[i], this._oldestTick++, this._actualSize--), n = t.measureText(o).width, this._cache[o] = {
            width: n,
            tick: this._usageTick
        }, this._tick2Labels[this._usageTick] = o, this._actualSize++, this._usageTick++, n)
    }, i.prototype.reset = function() {
        this._actualSize = 0, this._cache = {}, this._usageTick = 1, this._oldestTick = 1, this._tick2Labels = {}
    }, i.prototype._re = /[2-9]/g, t.exports = i
}, function(t, e, i) {
    "use strict";

    function n(t, e, i) {
        var n, o, r, s, a, l, c, h = t.allLineTools(),
            d = h.length,
            u = t.timeScale();
        for (n = 0; d > n; ++n) {
            for (o = h[n], r = 0, s = o.points(), a = s.length, l = 0; a > l; ++l) c = s[l], c.time > e && c.time <= i && (c.index = u.m_points.indexOf(c.time), ++r);
            r > 0 && o.updateAllViews()
        }
    }

    function o(t, e) {
        function i(i) {
            t._currentRequest.requestFirstBarTime(i, f, function(n) {
                var r = n.p[1];
                return r > g ? (t._currentRequest.disconnect(), delete t._currentRequest, t._haveNoMoreData = !0, void e(!0)) : void o(i)
            })
        }

        function o(i) {
            var n, o, r, a, l, c, u, _, m, v, y = "series_id",
                w = 1;
            for (t._haveNoMoreData = !0, n = !1, t._currentRequest.createSeries(y, "turnaround", i, f, ["bar_count", g - 1, -h], function(i) {
                var o, r, a;
                switch (i.method) {
                    case "data_update":
                        if (!i.params.plots.length) return;
                        o = i.params.plots[0].value[TradingView.TIME_PLOT], r = i.params.plots, t._haveNoMoreData = r.length < h, n = 0 === r.length, d = o === g, p.mainSeries().fixLastBar(t._chartDirection), p.mainSeries().bars().addTail(r, d), a = p.mainSeries().parseJapProjBars(i.params.nonseries), p.mainSeries().m_data.m_nsBars = a.nsBars, p.mainSeries().m_data.lastProjectionPrice = a.lastPrice, p.model().recalculateAllPanes(), p.model().updateSource(p.mainSeries()), p.model().updateLineTools(), p.timeScale().scrollToOffsetAnimated(s);
                        break;
                    case "series_completed":
                        w--, 0 === w && (t._currentRequest.disconnect(), delete t._currentRequest, e())
                }
            }), o = p.dataSources(), r = {}, a = function(i) {
                var o, s, a = i.method;
                "study_completed" === a || "study_error" === a ? (w--, 0 === w && (t._currentRequest.disconnect(), delete t._currentRequest, e())) : "data_update" !== a || n || (o = i.params.customId, s = r[o], s.m_data.addTail(i.params.plots, d), p.model().recalculateAllPanes(), p.model().updateSource(p.mainSeries()))
            }, l = 0; l < o.length; l++) c = o[l], TradingView.isInherited(c.constructor, TradingView.Study) && -1 !== ["Volume", "Compare", "Overlay", "Sessions"].indexOf(c.metaInfo().shortId) && (u = "study_" + l, _ = c.metaInfo().id + "-1!", r[u] = c, w++, m = c.inputs(), "Volume" === c.metaInfo().shortId && 1 === m.length && (v = !1, m.push(v)), t._currentRequest.createStudy(u, "turnaround", y, _, m, a))
        }
        var r, s, c, h, d, u, p = t.model(),
            f = p.mainSeries().interval(),
            _ = p.mainSeries().bars().last(),
            g = _.value[TradingView.TIME_PLOT];
        return "function" != typeof e && (e = function() {}), r = 100, null != t._currentRequest ? void TradingView.logDebugChart("requestSnapshotBars: unexpected requestSnapshotBars") : (s = p.timeScale().rightOffset(), void(0 > s || t._haveNoMoreData || (c = p.mainSeries().getSymbolString(), h = Math.max(Math.ceil(s), r), d = !1, u = new a, u.setLoadNew(!0), t._currentRequest = new l(u), t._currentRequest.connect(function(e) {
            var o, r, s, a, l, h, d, u, f, _, g;
            "connected" === e.method ? (o = p.model().timezone(), o || (o = defaults("chartproperties").mainSeriesProperties.timezone), t._currentRequest.switchTimezone(o), r = "symbol_id", s = function(e) {
                switch (e.method) {
                    case "symbol_error":
                        if (e.params[1] === TradingView.Series.PERMISSION_DENIED) {
                            var n;
                            switch (e.params[2]) {
                                case TradingView.Series.PD_REASON_EXTENDED_HOURS:
                                    p.mainSeries().properties().extendedHours.setValue(!1), n = p.mainSeries().getSymbolString();
                                    break;
                                case TradingView.Series.PD_REASON_SYMBOL:
                                    n = e.params[3];
                                    break;
                                default:
                                    n = e.params[2]
                            }
                            n && (r += "_re", t._currentRequest.resolveSymbol(r, n, s))
                        }
                        break;
                    default:
                        i(r)
                }
            }, t._currentRequest.resolveSymbol(r, c, s)) : "timescale_update" === e.method && (a = p.mainSeries().bars().last(), l = p.timeScale().indexToUserTime(a).valueOf() / 1e3, h = p.timeScale().points(), d = h.lastTimePointIndex(), u = h.valueAt(d), e.params.changes.length > 0 && (f = e.params.changes[0] === u, f || (l += 1), p.timeScale().addTail(e, l, f), _ = h.lastTimePointIndex(), g = h.valueAt(_), n(p.model(), u, g)))
        }))))
    }

    function r(t, e) {
        this._data = t, this._colors = this.getBackgroundColor(e)
    }

    function s(t, e, i) {
        this._series = t, this._lastBar = e, this._direction = i
    }
    var a = i(47),
        l = i(121);
    r.prototype.hitTest = function() {
        return null
    }, r.prototype.getBackgroundColor = function(t) {
        var e = [{
            background: "rgba(255, 158, 171, 0.3)",
            line: "#7E202F"
        }, {
            background: "rgba(244, 255, 158, 0.3)",
            line: "#EBFF3F"
        }, {
            background: "rgba(195, 255, 160, 0.3)",
            line: "#308020"
        }];
        return e[t + 1]
    }, r.prototype.draw = function(t) {
        t.fillStyle = this._colors.background, t.fillRect(Math.max(0, this._data.x), 0, this._data.width, this._data.height), t.strokeStyle = this._colors.line, t.beginPath(), t.lineWidth = 1;
        var e = Math.round(this._data.x);
        t.moveTo(e, 0), t.lineTo(e, this._data.height), t.stroke()
    }, s.prototype.update = function() {
        this._x = this._series.m_model.timeScale().indexToCoordinate(this._lastBar) - .5 * this._series.m_model.timeScale().barSpacing() + 1
    }, s.prototype.renderer = function() {
        var t = {
                x: this._x,
                height: this._series.priceScale().height(),
                width: this._series.m_model.timeScale().width()
            },
            e = this._series.data().bars(),
            i = e.last().value[TradingView.CLOSE_PLOT] > e.valueAt(this._lastBar)[TradingView.CLOSE_PLOT] ? 1 : -1,
            n = 0;
        return 1 === this._direction ? n = i : 2 === this._direction && (n = -1 * i), new r(t, n)
    }, e.FutureBarsPaneView = s, e.requestChartSnapshotBars = o
}, function(t, e) {
    "use strict";

    function i(t, e) {
        this._chartApi = t, this.generateSessionId(), this._sessionDisabled = !1, this._disableStatistics = !!e
    }
    i.prototype.destroy = function() {
        this._sessionDisabled || this.stopSession()
    }, i.prototype.generateSessionId = function() {
        this._sessionid = "cs_" + TradingView.randomHash()
    }, i.prototype.serverTimeOffset = function() {
        return this._chartApi.serverTimeOffset()
    }, i.prototype.connected = function() {
        return this._chartApi.connected() && !this._sessionDisabled
    }, i.prototype.disconnected = function() {
        var t = this;
        this.restartSession(), Object.keys(this).forEach(function(e) {
            /^(s|st|symbol_)\d+$/.test(e) && delete t[e]
        })
    }, i.prototype.initSession = function() {
        this._chartApi.createSession(this._sessionid, this)
    }, i.prototype.stopSession = function() {
        this._chartApi.removeSession(this._sessionid)
    }, i.prototype.restartSession = function() {
        this.stopSession(), this.generateSessionId(), this.initSession()
    }, i.prototype.setHandler = function(t) {
        this._globalHandler = t
    }, i.prototype.sessionId = function() {
        return this._sessionid
    }, i.prototype.connect = function(t) {
        this._globalHandler = t, this.initSession(), this._chartApi.connect()
    }, i.prototype.disconnect = function() {
        this._chartApi.disconnect()
    }, i.prototype.switchTimezone = function(t) {
        this._chartApi.switchTimezone(this._sessionid, t)
    }, i.prototype.resolveSymbol = function(t, e, i) {
        this._chartApi.resolveSymbol(this._sessionid, t, e, i)
    }, i.prototype.createSeries = function(t, e, i, n, o, r) {
        this._chartApi.createSeries(this._sessionid, t, e, i, n, o, r)
    }, i.prototype.removeSeries = function(t, e) {
        this._chartApi.removeSeries(this._sessionid, t, e)
    }, i.prototype.modifySeries = function(t, e, i, n, o) {
        this._chartApi.modifySeries(this._sessionid, t, e, i, n, o)
    }, i.prototype.requestMoreData = function(t, e, i) {
        this._chartApi.requestMoreData(this._sessionid, t, e, i)
    }, i.prototype.requestMetadata = function(t, e) {
        window.localForageReady.done(function() {
            this._chartApi.requestMetadata(this._sessionid, t, e)
        }.bind(this)).fail(function(t) {
            TradingView.logError("localForage is not initialized, cannot proceed. " + t)
        })
    }, i.prototype.createStudy = function(t, e, i, n, o, r) {
        this._chartApi.createStudy(this._sessionid, t, e, i, n, o, r)
    }, i.prototype.removeStudy = function(t, e) {
        this._chartApi.removeStudy(this._sessionid, t, e)
    }, i.prototype.modifyStudy = function(t, e, i, n) {
        this._chartApi.modifyStudy(this._sessionid, t, e, i, n)
    }, i.prototype.createPointset = function(t, e, i, n, o, r) {
        this._chartApi.createPointset(this._sessionid, t, e, i, n, o, r)
    }, i.prototype.modifyPointset = function(t, e, i, n) {
        this._chartApi.modifyPointset(this._sessionid, t, e, i, n)
    }, i.prototype.removePointset = function(t, e) {
        this._chartApi.removePointset(this._sessionid, t, e)
    }, i.prototype.requestMoreTickmarks = function(t, e, i) {
        this._chartApi.requestMoreTickmarks(this._sessionid, t, e, i)
    }, i.prototype.requestFirstBarTime = function(t, e, i) {
        this._chartApi.requestFirstBarTime(this._sessionid, t, e, i)
    }, i.prototype.setVisibleTimeRange = function(t, e, i) {
        this._chartApi.setVisibleTimeRange(this._sessionid, t, e, i)
    }, i.prototype.onMessage = function(t) {
        switch (t.method) {
            case "connected":
                this._chartApi.chartCreateSession(this._sessionid, this._disableStatistics);
                break;
            case "disconnected":
                this.disconnected();
                break;
            case "critical_error":
        }
        this._globalHandler && this._globalHandler(t)
    }, i.prototype.disable = function() {
        this._sessionDisabled = !0
    }, t.exports = i
}, function(t, e) {
    "use strict";

    function i(t) {
        return t && "QUANDL" === t.exchange ? "Quandl.com" : void 0
    }
    t.exports = i
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        this.m_bars = new o(["time", "open", "high", "low", "close", "adt", "style"]), this.m_nsBars = new o(["time", "open", "high", "low", "close", "adt", "style"]), this.m_series = t, this.m_model = e, this.lastProjectionPrice = void 0, this.boxSize = void 0, this.reversalAmount = void 0
    }
    var o = i(124);
    n.prototype.bars = function() {
        return this.m_bars
    }, n.prototype.nsBars = function() {
        return this.m_nsBars
    }, n.prototype.size = function() {
        return this.m_nsBars._end - this.m_nsBars._start + (this.m_bars._end - this.m_bars._start)
    }, n.prototype.each = function(t) {
        var e;
        for (e = this.m_bars._start; e < this.m_bars._end && !t(this.m_bars._indexAt(e), this.m_bars._valueAt(e)); ++e);
        for (e = this.m_nsBars._start; e < this.m_nsBars._end && !t(this.m_nsBars._indexAt(e), this.m_nsBars._valueAt(e)); ++e);
    }, n.prototype.clear = function() {
        this.m_bars = new o(["time", "open", "high", "low", "close", "adt", "style"]), this.m_nsBars = new o(["time", "open", "high", "low", "close", "adt", "style"]), this.lastProjectionPrice = void 0
    }, n.prototype.first = function() {
        return this.m_bars.isEmpty() ? this.m_nsBars._items[0] : this.m_bars._items[0]
    }, n.prototype.isEmpty = function() {
        return this.m_bars.isEmpty() && this.m_nsBars.isEmpty()
    }, n.prototype.last = function() {
        return this.m_nsBars.isEmpty() ? this.m_bars._items[this.m_bars._end - 1] : this.m_nsBars._items[this.m_nsBars._end - 1]
    }, n.prototype.search = function(t, e) {
        return this.nsBars().isEmpty() ? this.bars().search(t, e) : this.bars().isEmpty() ? this.nsBars().search(t, e) : this.nsBars().firstTimeIndex() <= t ? this.nsBars().search(t, e) : this.bars().search(t, e)
    }, n.prototype.valueAt = function(t) {
        var e = this.search(t);
        return e ? e.value : void 0
    }, n.prototype.firstBar = function() {
        var t, e, i;
        return this.m_model.timeScale().isEmpty() ? null : (t = this.m_model.timeScale().visibleBars(), e = t.firstBar(), i = this.search(e, TradingView.SEARCH_NEAREST_RIGHT), i ? i.value : null)
    }, n.prototype.firstValue = function() {
        var t = this.firstBar();
        return t ? t[TradingView.CLOSE_PLOT] : null
    }, n.prototype.calculateATR = function() {
        var t, e, i, n = [];
        for (t = this.m_bars.lastIndex(); t >= this.m_bars.firstIndex(); t--) e = this.m_bars._valueAt(t), n.push(e[TradingView.HIGH_PLOT] - e[TradingView.LOW_PLOT]);
        return i = 0 === n.length ? 0 : n.reduce(function(t, e) {
            return t + e
        }, 0) / n.length, i *= this.m_series.base()
    }, n.prototype.timeToBarIndex = function(t, e) {
        var i, n;
        if (null === t) return TradingView.logDebugChart("SeriesData.timeToBarIndex: time should be a number of seconds since 1970. But it is null"), 0;
        if (e === TradingView.SEARCH_FROM_RIGHT) {
            for (i = this.m_bars.lastIndex(); i >= this.m_bars.firstIndex(); i--)
                if (n = this.m_bars._valueAt(i), t >= n[TradingView.TIME_PLOT]) return i;
            for (i = this.m_nsBars.lastIndex(); i >= this.m_nsBars.firstIndex(); i--)
                if (n = this.m_nsBars._valueAt(i), t >= n[TradingView.TIME_PLOT]) return i;
            return this.m_bars.firstIndex()
        }
        if (e === TradingView.SEARCH_FROM_LEFT) {
            for (i = this.m_bars.firstIndex(); i <= this.m_bars.lastIndex(); i++)
                if (n = this.m_bars._valueAt(i), t <= n[TradingView.TIME_PLOT]) return i;
            for (i = this.m_nsBars.firstIndex(); i <= this.m_nsBars.lastIndex(); i++)
                if (n = this.m_nsBars._valueAt(i), t <= n[TradingView.TIME_PLOT]) return i;
            return this.m_bars.lastIndex()
        }
        return TradingView.logDebugChart("SeriesData.timeToBarIndex: Incorrect options value"), 0
    }, t.exports = n
}, function(t, e) {
    "use strict";

    function i() {
        this._chunks = {}
    }

    function n(t) {
        var e, n;
        for (this._items = [], this._columns = t || [], this._start = 0, this._end = 0, this._shareread = !1, this._plotCaches = {}, this._itemsSearchCache = {}, e = 0; e < this._columns.length; e++) n = this._columns[e], this._plotCaches[n] = new i
    }
    i.CHUNK_SIZE = 30, n.prototype.clear = function() {
        this._items = [], this._itemsSearchCache = {}, this._columns = [], this._start = 0, this._end = 0, this._shareread = !1, this._plotCaches = {}
    }, n.prototype.columns = function() {
        return this._columns
    }, n.prototype.last = function() {
        return this._items[this._end - this._start - 1]
    }, n.prototype.first = function() {
        return this._items[0]
    }, n.prototype.firstIndex = function() {
        return this._start
    }, n.prototype.lastIndex = function() {
        return this._end - this._start - 1
    }, n.prototype.size = function() {
        return this._end - this._start
    }, n.prototype.isEmpty = function() {
        return 0 === this.size()
    }, n.prototype.contains = function(t) {
        return -1 !== this._search(t)
    }, n.prototype.valueAt = function(t) {
        var e = this.search(t);
        return e ? e.value : void 0
    }, n.prototype.add = function(t, e) {
        var i, n;
        return this._shareread ? (TradingView.logDebugChart("PlotList.add: readonly collection modification attempt"), !1) : (i = this._createPair(t, e), n = this._search(t), this._itemsSearchCache = {}, 0 > n ? (n = this._lowerbound(t, -1), this._items.splice(n, 0, i), this._start = 0, this._end = this._items.length, !0) : (this._items[n] = i, !1))
    }, TradingView.SEARCH_NEAREST_LEFT = -1, TradingView.SEARCH_EXACT = 0, TradingView.SEARCH_NEAREST_RIGHT = 1, n.prototype.search = function(t, e) {
        var i, n;
        return this._itemsSearchCache[t] && this._itemsSearchCache[t][e] ? this._itemsSearchCache[t][e] : (i = this._search(t, e), 0 > i ? void 0 : (n = {
            index: this._indexAt(i),
            value: this._valueAt(i)
        }, this._itemsSearchCache[t] = this._itemsSearchCache[t] || {}, this._itemsSearchCache[t][e] = n, n))
    }, n.prototype.fold = function(t, e) {
        var i, n = e;
        for (i = this._start; i < this._end; ++i) n = t(this._indexAt(i), this._valueAt(i), n);
        return n
    }, n.prototype.each = function(t) {
        for (var e = this._start; e < this._end && !t(this._indexAt(e), this._valueAt(e)); ++e);
    }, n.prototype.reduce = function(t, e) {
        var i, n = e;
        for (i = this._start; i < this._end; ++i) n = t(n, this._indexAt(i), this._valueAt(i));
        return n
    }, n.prototype.range = function(t, e) {
        var i = new n;
        return i._items = this._items, i._start = this._lowerbound(t), i._end = Math.min(this._lowerbound(e) + 1, i._items.length), i._shareread = !0, i
    }, n.prototype.minMaxOnRange2 = function(t, e, n) {
        var o, r, s, a, l, c, h, d, u, p, f, _, g, m, v, y, w = null,
            b = null;
        if (0 === this._items.length) return {
            min: w,
            max: b
        };
        for (o = this._items[0], r = 0; r < n.length; r++) {
            for (s = n[r], a = t - s.offset, l = e - s.offset, a = Math.max(a, o), l = Math.min(l, o + this._items.length - 1), c = Math.ceil(a / i.CHUNK_SIZE) * i.CHUNK_SIZE, h = Math.max(c, Math.floor(l / i.CHUNK_SIZE) * i.CHUNK_SIZE), this._plotCaches[s.index] || (this._plotCaches[s.index] = {}), d = this._plotCaches[s.index], u = a; u <= Math.min(l, c) && e >= u; u++) p = this._items[u - o].value, f = p[s.index], void 0 !== f && null !== f && ((null === w || w > f) && (w = f), (null == b || f > b) && (b = f));
            for (_ = Math.max(c + 1, a); h > _; _ += i.CHUNK_SIZE) g = Math.floor(_ / i.CHUNK_SIZE), m = d[g], m || (v = g * i.CHUNK_SIZE, y = (g + 1) * i.CHUNK_SIZE - 1, m = this.minMaxOnRange(v, y, [s]), d[g] = m), null !== m.min && (m.min < w || null === w) && (w = m.min), null !== m.max && (m.max > b || null === b) && (b = m.max);
            for (u = h; l >= u; u++) p = this._items[u - o].value, f = p[s.index], void 0 !== f && null !== f && ((null === w || w > f) && (w = f), (null == b || f > b) && (b = f));
            void 0 !== s.baseValue && (w = Math.min(s.baseValue, w), b = Math.max(s.baseValue, b))
        }
        return {
            min: w,
            max: b
        }
    }, n.prototype.minMaxOnRange = function(t, e, i) {
        var n, o, r, s, a, l, c, h = this._lowerbound(t),
            d = Math.min(this._lowerbound(e) + 1, this._items.length);
        for (this._items[this._end - 1] > e && (d = h), n = null, o = null, r = 0; r < i.length; r++) {
            for (s = i[r], h = this._lowerbound(t - s.offset), d = Math.min(this._lowerbound(e - s.offset) + 1, this._items.length), this._items[d - 1] > e - s.offset && (d = h), a = h; d > a; a++) l = this._items[a].value, c = l[s.index], void 0 !== c && null !== c && ((null === n || n > c) && (n = c), (null == o || c > o) && (o = c));
            void 0 !== s.baseValue && (n = Math.min(s.baseValue, n), o = Math.max(s.baseValue, o))
        }
        return {
            min: n,
            max: o
        }
    }, n.prototype.merge = function(t) {
        var e, n, o, r, s;
        if (this._shareread) return TradingView.logDebugChart("PlotList.merge: shared collection modification attempt"), [];
        for (e = [], e.earliestRow = null, n = 0; n < t.length; ++n) {
            for (o = t[n], r = Math.floor(o.index / i.CHUNK_SIZE), s = 0; s < this._columns.length; s++) this._plotCaches[s] && delete this._plotCaches[s][r];
            (null === e.earliestRow || e.earliestRow > o) && (e.earliestRow = o), this.add(o.index, o.value) ? e.push({
                insert: o
            }) : e.push({
                update: o
            })
        }
        return e
    }, n.prototype.addTail = function(t, e) {
        var i, n, o = 0;
        for (e && this._end - this._start > 0 && (o = 1, this._items[this._end - this._start - 1].value = t[0].value), i = o; i < t.length; ++i) n = t[i], this.add(parseInt(this.last(), 10) + 1, n.value);
        this._itemsSearchCache = {}
    }, n.prototype._createPair = function(t, e) {
        var i = new Number(t);
        return i.value = e, i
    }, n.prototype._valueAt = function(t) {
        return this._items[t].value
    }, n.prototype._length = function(t) {
        return this._items.length
    }, n.prototype._indexAt = function(t) {
        return this._items[t].valueOf()
    }, n.prototype._search = function(t, e) {
        var i = this._bsearch(t);
        return -1 === i && e ? 0 > e ? (i = this._lowerbound(t), i > this._start && (i -= 1), i !== this._end && this._indexAt(i) < t ? i : -1) : (i = this._upperbound(t), i !== this._end && t < this._indexAt(i) ? i : -1) : i
    }, n.prototype._bsearch = function(t) {
        var e = this._lowerbound(t);
        return e === this._end || t < this._items[e] ? -1 : e
    }, n.prototype._lowerbound = function(t) {
        for (var e, i, n = this._start, o = this._end, r = o - n; r > 0;) e = r >> 1, i = n + e, this._items[i] < t ? (n = i + 1, r -= e + 1) : r = e;
        return n
    }, n.prototype._upperbound = function(t) {
        for (var e, i, n = this._start, o = this._end, r = o - n; r > 0;) e = r >> 1, i = n + e, t < this._items[i] ? r = e : (n = i + 1, r -= e + 1);
        return n
    }, n.prototype.state = function() {
        var t, e = {};
        e.columns = this._columns, e.start = this._start, e.end = this._end, e.shareread = this._shareread, e.data = [];
        for (t in this._items) e.data.push({
            index: new Number(this._items[t]),
            value: this._items[t].value
        });
        return e
    }, n.prototype.restoreState = function(t) {
        var e, i;
        if (!t) return void this.clear();
        for (this._columns = t.columns, this._start = t.start, this._end = t.end, this._shareread = t.shareread, this._items = [], this._itemsSearchCache = {}, e = 0; e < t.data.length; e++) i = new Number(t.data[e].index), i.value = t.data[e].value, this._items.push(i)
    }, n.prototype.firstTimeIndex = function() {
        return this._indexAt(this._start)
    }, n.prototype.lastTimeIndex = function() {
        return this._indexAt(this._end - 1)
    }, t.exports = n
}, function(t, e, i) {
    (function(t) {
        function e(t) {
            TradingView.merge(this, {
                palettes: {},
                inputs: [],
                plots: [],
                graphics: {},
                defaults: {}
            }), TradingView.merge(this, t);
            var i = t.fullId || t.id;
            TradingView.merge(this, e.parseIdString(i)), this.name = this.id
        }
        e.CURRENT_METAINFO_FORMAT_VERSION = 40, e.FilledArea = {}, e.FilledArea.TYPE_PLOTS = "plot_plot", e.FilledArea.TYPE_HLINES = "hline_hline", e.versionOf = function(t) {
            var i = "_metainfoVersion" in t && isNumber(t._metainfoVersion) ? t._metainfoVersion : 0;
            return 0 > i && TradingView.logError("Metainfo format version cannot be negative: " + i), i > e.CURRENT_METAINFO_FORMAT_VERSION && TradingView.logWarn("Client doesn't support this version of metainfo format: " + i), i
        }, e.parseIdString = function(t) {
            var e, i, n, o, r = {};
            if (-1 === t.indexOf("@")) r.shortId = t, r.packageId = "tv-basicstudies", r.id = t + "@" + r.packageId, r.version = 1;
            else if (e = t.split("@"), r.shortId = e[0], i = e[1].split("-"), 3 === i.length) r.packageId = i.slice(0, 2).join("-"), r.id = r.shortId + "@" + r.packageId, r.version = i[2];
            else if (1 === i.length && "decisionbar" === i[0]) r.packageId = "les-" + i[0], r.id = r.shortId + "@" + r.packageId, r.version = 1;
            else {
                if (1 !== i.length) throw Error("unexpected study id:" + t);
                r.packageId = "tv-" + i[0], r.id = r.shortId + "@" + r.packageId, r.version = 1
            }
            return r.fullId = r.id + "-" + r.version, "tv-scripting" === r.packageId ? (n = r.shortId, 0 === n.indexOf("Script$") || 0 === n.indexOf("StrategyScript$") ? (o = n.indexOf("_"), o >= 0 ? r.productId = n.substring(0, o) : r.productId = r.packageId) : r.productId = r.packageId) : r.productId = r.packageId, r
        }, e.getPackageName = function(t) {
            return (/^[^@]+@([^-]+-[^-]+)/.exec(t || "") || [0, "tv-basicstudies"])[1]
        }, e.cutFullId = function(t) {
            return t.replace(/(@[^-]+-[^-]+).*$/, "$1")
        }, e.cutDollarHash = function(t) {
            var e, i, n = t.indexOf("$"),
                o = t.indexOf("@");
            return -1 === n ? t : (e = t.substr(0, n), i = o >= 0 ? t.substr(o) : "", e + i)
        }, e.prototype.parseValue = function(t, e) {
            return "bool" === t ? TradingView.parseBool(e) : e
        }, e.prototype.defaultInputs = function() {
            var t, e = [];
            for (t = 0; t < this.inputs.length; t++) e.push(this.inputs[t].defval);
            return e
        }, e.prototype.state = function() {
            var t, e = {};
            for (t in this) this.hasOwnProperty(t) && (e[t] = this[t], "id" === t && (e[t] += "-" + this.version));
            return e
        }, e.findStudyMetaInfoByDescription = function(t, e) {
            if (t) {
                for (var i = 0; i < t.length; ++i)
                    if (t[i].description.toLowerCase() === e.toLowerCase()) return t[i];
                throw Error("unexpected study id:" + e)
            }
            throw Error("There is no studies metainfo")
        }, e.findStudyMetaInfo = function(t, e) {
            if (t) {
                for (var i = 0; i < t.length; ++i)
                    if (t[i].id === e) return t[i];
                throw Error("unexpected study id:" + e)
            }
            throw Error("There is no studies metainfo")
        }, e.removeStudyMetaInfo = function(t, e) {
            if (t) {
                for (var i = 0; i < t.length; ++i)
                    if (t[i].id === e) return t.splice(i, 1), defaults.remove("study_" + e), !0;
                return !1
            }
            throw Error("There are no studies metainfo")
        }, e.addStudyMetaInfo = function(t, i) {
            var n, o, r;
            return 0 === i.id.indexOf("ElliottWave@tv-basicstudies-") ? null : (n = new e(i), o = e.removeStudyMetaInfo(t, n.id), o && TradingView.logWarn("Study with id=" + n.id + " already exists in the model, this could be a sign of a problem!"), t.push(n), n.defaults && (r = TradingView.clone(n.defaults), r.precision = "default", defaults.create("study_" + n.fullId, r)), n)
        }, e.addOrReplaceStudyMetaInfo = function(t, i) {
            var n, o = new e(i);
            return e.removeStudyMetaInfo(t, o.id), t.push(o), o.defaults && (n = TradingView.clone(o.defaults), n.precision = "default", defaults.createOrReplace("study_" + o.fullId, n)), o
        }, e.setStudyHidden = function(t, e) {
            if (!t) throw Error("There is no studies metainfo");
            for (var i = 0; i < t.length; ++i)
                if (t[i].id === e) return t[i].is_hidden_study = !0, !0;
            return !1
        }, e.createMetaInfoStub = function(t, e) {
            var i = TVScript.createScriptStudyId(t.scriptIdPart, e),
                n = {
                    isTVScriptStubToCompile: !0,
                    id: i,
                    scriptIdPart: t.scriptIdPart,
                    description: t.scriptName,
                    TVScriptSourceCode: t.scriptSource,
                    version: e
                };
            return t.isTVScriptStrategy === !0 && (n.isTVScriptStrategy = !0), n
        }, e.isScriptStrategy = function(t) {
            if (t.isTVScriptStrategy === !0) return !0;
            var e = t.TVScriptSourceCode || t.scriptSource;
            return !!e && TVScript.isStrategy(e)
        }, e.replaceWithFullStudyMetaInfoAsync = function(t, n) {
            var o, r, s = $.Deferred();
            if (n.isTVScriptStubToCompile) {
                o = i(126);
                try {
                    r = e.findStudyMetaInfo(t, n.id), r.isTVScriptStubToCompile || s.resolve(r)
                } catch (a) {}
                o.translateScriptAsync(n.TVScriptSourceCode, null, n.scriptIdPart, n.version).done(function(i) {
                    var n = e.addOrReplaceStudyMetaInfo(t, i);
                    s.resolve(n)
                }).fail(function(i) {
                    var r = n.description,
                        a = o.createScriptStub(n.TVScriptSourceCode, r, n.scriptIdPart),
                        l = e.addOrReplaceStudyMetaInfo(t, a);
                    s.resolve(l)
                })
            } else s.resolve(n);
            return s.promise()
        }, e.getOrderedInputIds = function(t) {
            var e, i, n = [],
                o = t.inputs;
            for (e = 0; e < o.length; ++e) i = o[e], n.push(i.id);
            return n
        }, TradingView.StudyMetaInfo = e, void 0 !== t && t && t.exports && (t.exports = e)
    }).call(e, i(4)(t))
}, function(t, e, i) {
    "use strict";

    function n(t) {
        this._scriptUpdater = t, TVXWindowEvents.on("TVScriptModified", function(t) {
            this.clearCache(), this._scriptUpdater.onTVScriptModified(JSON.parse(t))
        }.bind(this)), TVXWindowEvents.on("TVScriptDeleted", function(t) {
            this.clearCache(), this._scriptUpdater.onTVScriptDeleted(JSON.parse(t))
        }.bind(this)), TVXWindowEvents.on("TVScriptRenamed", function(t) {
            this.clearCache(), this._scriptUpdater.onTVScriptRenamed(JSON.parse(t))
        }.bind(this)), loginStateChange.subscribe(this, this.clearCache)
    }
    var o, r = i(125),
        s = i(127);
    n.PINEC_URL = window.PINE_URL, n._prepareParamsForTranslateScript = function(t, e, i, o, s, a) {
        var l = {
            url: n.PINEC_URL,
            type: "POST",
            data: {
                miVers: r.CURRENT_METAINFO_FORMAT_VERSION,
                username: window.user && window.user.username,
                cmd: s ? "translatePineEx" : "translate",
                pine: t,
                inputs: JSON.stringify(e || {}),
                idPart: i,
                scriptingPkgVers: o
            }
        };
        return a || (l.async = !1), l
    }, n.translateScript = function(t, e, i, o, r) {
        var s, a, l;
        if (TradingView.trackEvent("Pine", "ScriptLib.translateScript"), s = n._prepareParamsForTranslateScript(t, e, i, o, r, !1), a = $.ajax(s), l = JSON.parse(a.responseText), l.success) return l.result.metaInfo;
        throw Error(l.reason)
    }, o = function(t) {
        return "('Connection aborted.', error(111, 'Connection refused'))" === t ? $.t("Pine script service is restarting for all users.") : "('Connection aborted.', BadStatusLine(\"''\",))" === t ? $.t("Pine script service is restarting for all users.") : t
    }, n.translateScriptAsync = function(t, e, i, r, s) {
        var a, l;
        return TradingView.trackEvent("Pine", "ScriptLib.translateScript"), a = $.Deferred(), l = n._prepareParamsForTranslateScript(t, e, i, r, s, !0), $.ajax(l).done(function(t, e, i) {
            t.error ? a.reject(o(t.error)) : t.success ? a.resolve(t.result.metaInfo, t.result.IL) : a.reject(t.reason)
        }).fail(function(t, e, i) {
            TradingView.logError("Error: " + t), a.reject(JSON.stringify(t))
        }), a.promise()
    }, n.createScriptStub = function(t, e, i) {
        var o = n._createScriptStubTemplate(),
            r = {
                shortDescription: "Error: cannot compile script '" + e + "'",
                id: "Script$" + i + "@tv-scripting-1",
                scriptIdPart: i,
                TVScriptSourceCode: t
            };
        return TradingView.merge(o, r)
    }, n.createScriptStubNoSrc = function(t, e) {
        var i, o = n._createScriptStubTemplate();
        return delete o.TVScriptSourceCode, i = {
            shortDescription: t,
            id: "Script$" + e + "@tv-scripting-1",
            scriptIdPart: e
        }, TradingView.merge(o, i)
    }, n._createScriptStubTemplate = function() {
        var t = {
            _metainfoVersion: r.CURRENT_METAINFO_FORMAT_VERSION,
            isTVScript: !0,
            isTVScriptStub: !0,
            pine: {
                version: r.CURRENT_METAINFO_FORMAT_VERSION
            },
            is_hidden_study: !1,
            defaults: {
                styles: {
                    plot_0: {
                        linestyle: 0,
                        linewidth: 1,
                        plottype: 0,
                        trackPrice: !1,
                        transparency: 35,
                        visible: !0,
                        color: "#000080"
                    }
                },
                precision: 4,
                inputs: {
                    text: "na~$0;$0()~$1"
                }
            },
            plots: [{
                id: "plot_0",
                type: "line"
            }],
            styles: {
                plot_0: {
                    title: "Plot",
                    histogramBase: 0,
                    joinPoints: !1
                }
            },
            description: "None",
            shortDescription: "TODO: set value",
            is_price_study: !1,
            inputs: [{
                defval: "na~$0;$0()~$1",
                id: "text",
                name: "ILScript",
                type: "text",
                isHidden: !0
            }],
            id: "TODO: set value",
            scriptIdPart: "TODO: set value",
            TVScriptSourceCode: "TODO: set or remove value"
        };
        return t
    }, n.parseScriptTitleAsync = function(t) {
        TradingView.trackEvent("Pine", "ScriptLib.parseScriptTitle");
        var e = $.Deferred();
        return $.ajax({
            url: n.PINEC_URL,
            type: "POST",
            data: {
                miVers: r.CURRENT_METAINFO_FORMAT_VERSION,
                username: window.user && window.user.username,
                cmd: "getStudyTitle",
                pine: t
            }
        }).done(function(t, i, n) {
            t.error ? e.reject(o(t.error)) : t.success ? e.resolve(t.result) : e.reject(t.reason)
        }).fail(function(t) {
            TradingView.logError("Error: " + t), e.reject(t)
        }), e.promise()
    }, n.evalMetaInfoExprsAsync = function(t, e) {
        TradingView.trackEvent("Pine", "ScriptLib.evalMetaInfoExprs");
        var i = $.Deferred();
        return $.ajax({
            url: n.PINEC_URL,
            type: "POST",
            data: {
                miVers: r.CURRENT_METAINFO_FORMAT_VERSION,
                username: window.user && window.user.username,
                cmd: "evalMetaInfoExprs",
                pineEx: t,
                inputs: JSON.stringify(e || {})
            }
        }).done(function(t, e, n) {
            t.error ? i.reject(o(t.error)) : t.success ? i.resolve(t.result) : i.reject(t.reason)
        }).fail(function(t) {
            TradingView.logError("Error: " + t), i.reject(t)
        }), i.promise()
    }, n.patchPropertiesAsync = function(t, e, i) {
        var o, r, s = $.Deferred();
        return e.TVScriptMetaInfoExprs ? (o = e.TVScriptMetaInfoExprs.tree, r = e.TVScriptMetaInfoExprs.patchMap, n.evalMetaInfoExprsAsync(o, i).done(function(e) {
            var i, n, o, a, l, c, h, d, u, p = e.rootValues,
                f = Object.keys(r);
            for (i = 0; i < f.length; i++) {
                for (n = f[i], o = r[n], a = p[o], l = n.split("."), "defaults" === l[0] && l.splice(0, 1), TVScript.assert(l.length > 1, "Unexpectedly short json path"), c = t, h = 0; h < l.length - 1; ++h) d = l[h], c = c[d];
                u = l[l.length - 1], c[u].setValue(a)
            }
            s.resolve(t)
        }).fail(function(t) {
            s.reject(t)
        }), s.promise()) : s.resolve(t)
    }, n.prototype.scriptUpdater = function() {
        return this._scriptUpdater
    }, n.prototype.clearCache = function() {
        delete this._userScriptsDfd
    }, n.prototype.requestUserScripts = function(t) {
        var e, i = this;
        return window.is_authenticated ? (i._userScriptsDfd || (i._userScriptsDfd = $.getJSON("/study-user-scripts/")), e = i._userScriptsDfd) : e = $.Deferred().resolve([]), "function" == typeof t && e.done(t), e.promise()
    }, n.prototype.setUserScripts = function(t) {
        this._userScriptsDfd || (this._userScriptsDfd = $.Deferred().resolve(t))
    }, n.prototype.requestStdScripts = function(t) {
        var e, i = (s || []).slice();
        return TradingView.isFeatureEnabled("backtesting") || (i = i.filter(function(t) {
            return !t.isTVScriptStrategy
        })), e = $.Deferred(), e.resolve(i), "function" == typeof t && e.done(t), e
    }, n.prototype.requestBuiltinAndUserScripts = function(t) {
        var e = this.requestUserScripts().pipe(function(t) {
            var e = (s || []).filter(function(t) {
                return t.isTVScriptBuiltIn
            });
            return t.concat(e)
        });
        return "function" == typeof t && e.done(t), e
    }, n.prototype.requestSaveScript = function(t, e, i, n, o) {
        var r = this,
            s = this._scriptUpdater,
            a = $.Deferred(),
            l = {
                scriptIdPart: t,
                sourceTitle: i,
                scriptName: e,
                scriptSource: n
            };
        return $.post("/save-study-script/", l, function(t) {
            if (r.clearCache(), t.error) return void a.reject(t);
            a.resolve();
            var e = TradingView.clone(l);
            e.scriptMetaInfo = o, TVXWindowEvents.emit("TVScriptModified", JSON.stringify(e)), setTimeout(function() {
                e.isSelfCall = !0, s.onTVScriptModified(e)
            }, 0)
        }).error(function(t) {
            a.reject()
        }), a.promise()
    }, n.prototype.requestDeleteScript = function(t, e) {
        var i = this,
            n = {
                scriptIdPart: t
            };
        $.post("/remove-study-script/", n, function(n) {
            if (i.clearCache(), !n.error) {
                e();
                var o = {
                    scriptIdPart: t
                };
                TVXWindowEvents.emit("TVScriptDeleted", JSON.stringify(o)), setTimeout(function() {
                    o.isSelfCall = !0, this._scriptUpdater.onTVScriptDeleted(o)
                }.bind(this), 0)
            }
        }.bind(this))
    }, n.prototype.requestRenameScript = function(t, e, i) {
        var n = this,
            o = $.post("/rename-study-script/", {
                scriptIdPart: t,
                name: e,
                force: i ? "1" : ""
            });
        return o.done(function() {
            n.clearCache();
            var i = {
                scriptIdPart: t,
                scriptName: e
            };
            TVXWindowEvents.emit("TVScriptRenamed", JSON.stringify(i)), setTimeout(function() {
                i.isSelfCall = !0, n._scriptUpdater.onTVScriptRenamed(i)
            }, 0)
        }), o
    }, n.tvScriptingPkgVersion = function(t) {
        var e;
        try {
            e = r.findStudyMetaInfo(t, "Script@tv-scripting")
        } catch (i) {
            throw Error("Metainfo of 'tv-scripting' package is not found")
        }
        return e.version
    }, TradingView.ScriptLib = n, t.exports = n
}, function(t, e, i) {
    (function(t) {
        "use strict";
        var e = [{
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Advance Decline Line"),
            doNotBuildJavastudiesTestCase: !0,
            scriptSource: 'study(title = "Advance Decline Line", shorttitle="ADL")\nsym(s) => security(s, period, close)\ndifference = (sym("ADVN") - sym("DECN"))/(sym("UNCN") + 1)\nadline = cum(difference > 0 ? sqrt(difference) : -sqrt(-difference))\nplot(adline)',
            scriptIdPart: "STD;Advance%1Decline%1Line"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Advance Decline Ratio"),
            doNotBuildJavastudiesTestCase: !0,
            scriptSource: 'study(title = "Advance Decline Ratio", shorttitle="ADR")\nratio(t1, t2, source) => security(t1, period, source) / security(t2, period, source)\nplot(ratio("ADVN", "DECN", close))\n',
            scriptIdPart: "STD;Advance%1Decline%1Ratio"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Arnaud Legoux Moving Average"),
            scriptSource: 'study(title = "Arnaud Legoux Moving Average", shorttitle="ALMA", overlay=true)\n\nsource = close\n\nwindowsize = input(title="Window Size", type=integer, defval=9)\noffset = input(title="Offset", type=float, defval=0.85)\nsigma = input(title="Sigma", type=float, defval=6)\n\nplot(alma(source, windowsize, offset, sigma))\n',
            scriptIdPart: "STD;Arnaud%1Legoux%1Moving%1Average"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Balance of Power"),
            scriptSource: 'study(title="Balance of Power")\nplot((close - open) / (high - low), color=red)\n',
            scriptIdPart: "STD;Balance%1of%1Power"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Chande Kroll Stop"),
            scriptSource: 'study(title = "Chande Kroll Stop", overlay=true)\np = input(10, minval=1)\nx = input(1, minval=1)\nq = input(9, minval=1)\nfirst_high_stop = highest(high, p) - x * atr(p)\nfirst_low_stop = lowest(high, p) + x * atr(p)\nstop_short = highest(first_high_stop, q)\nstop_long = lowest(first_low_stop, q) \nplot(stop_long, color=green)\nplot(stop_short, color=red)\n',
            scriptIdPart: "STD;Chande%1Kroll%1Stop"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Chop Zone"),
            scriptSource: 'study(title = "Chop Zone")\n\ncolorTurquoise = #34dddd\ncolorDarkGreen = #006400\ncolorPaleGreen = #98fb98\ncolorLime = lime\ncolorDarkRed = #8B0000\ncolorRed = red\ncolorOrange = orange\ncolorLightOrange = #ffc04c\ncolorYellow = yellow\n\nsource = close\navg = hlc3\n\npi = atan(1) * 4\nperiods = 30\nhighestHigh = highest(periods)\nlowestLow = lowest(periods)\nrange = 25 / (highestHigh - lowestLow) * lowestLow\n\nema34 = ema(source, 34)\nx1_ema34 = 0\nx2_ema34 = 1\ny1_ema34 = 0\ny2_ema34 = (ema34[1] - ema34) / avg * range\nc_ema34 = sqrt((x2_ema34 - x1_ema34)*(x2_ema34 - x1_ema34) + (y2_ema34 - y1_ema34)*(y2_ema34 - y1_ema34))\nemaAngle_1 = round(180 * acos((x2_ema34 - x1_ema34)/c_ema34) / pi)\nemaAngle = iff(y2_ema34 > 0, - emaAngle_1, emaAngle_1)\n\nchopZoneColor = emaAngle >= 5 ? colorTurquoise : emaAngle < 5 and emaAngle >= 3.57 ? colorDarkGreen : emaAngle < 3.57 and emaAngle >= 2.14 ? colorPaleGreen : emaAngle < 2.14 and emaAngle >= .71 ? colorLime : emaAngle <= -1 * 5 ? colorDarkRed : emaAngle > -1 * 5 and emaAngle <= -1 * 3.57 ? colorRed : emaAngle > -1 * 3.57 and emaAngle <= -1 * 2.14 ? colorOrange : emaAngle > -1 * 2.14 and emaAngle <= -1 * .71 ? colorLightOrange : colorYellow\n\nplot(1, color=chopZoneColor, style=columns)\n',
            scriptIdPart: "STD;Chop%1Zone"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Compare"),
            doNotBuildJavastudiesTestCase: !0,
            scriptSource: 'study(title="Compare", shorttitle="Compare", overlay=false)\nsym = "AAPL", res = period, source = close\nplot(security(sym, res, source), color=purple, linewidth=2)',
            scriptIdPart: "STD;Compare"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Conditional Expressions"),
            scriptSource: 'study(title="Conditional Expressions")\n\n// Plot will be green/red on DWM charts and yellow/blue on intraday\nc = isdwm ? close >= open ? green : red : close >= open ? yellow : blue\nplot(ohlc4, color=c)\n\n// Another example of conditional expr:\nc2 = isintraday ? red : isdaily ? green : isweekly ? blue : gray\nplot(hl2, color=c2)',
            scriptIdPart: "STD;Conditional%1Expressions"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Coppock Curve"),
            scriptSource: 'study(title = "Coppock Curve")\n\nwmaLength = input(title="WMA Length", type=integer, defval=10)\nlongRoCLength = input(title="Long RoC Length", type=integer, defval=14)\nshortRoCLength = input(title="Short RoC Length", type=integer, defval=11)\n\nsource = close\n\ncurve = wma(roc(source, longRoCLength) + roc(source, shortRoCLength), wmaLength)\nplot(curve)\n',
            scriptIdPart: "STD;Coppock%1Curve"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Cumulative Volume Index"),
            doNotBuildJavastudiesTestCase: !0,
            scriptSource: '//@version=1\nstudy("Cumulative Volume Index", "CVI")\nexch = input(0, type = integer, minval=0, maxval=8,\n    title="Exch: NYSE=0 NASDAQ=1 AMEX=2 OTC=3 TSX=4 TSXV=5 ETFS=6 Total=7 CAD Total=8")\nadv_ticker = \n    exch == 8 ? "AVVX" : \n    exch == 7 ? "AVVT" : \n    exch == 6 ? "AVVE" : \n    exch == 5 ? "AVVV" : \n    exch == 4 ? "AVVS" : \n    exch == 3 ? "AVVD" : \n    exch == 2 ? "AVLU" : \n    exch == 1 ? "AVVQ" : \n    "AVVN"\ndec_ticker = \n    exch == 8 ? "DVCX" : \n    exch == 7 ? "DVCT" : \n    exch == 6 ? "DVCE" : \n    exch == 5 ? "DVCV" : \n    exch == 4 ? "DVCS" : \n    exch == 3 ? "DVCD" : \n    exch == 2 ? "DVCA" : \n    exch == 1 ? "DVCQ" : \n    "DVCN"  \nadv = security(adv_ticker, period, close)\ndec = security(dec_ticker, period, close)\ncvi = cum(adv - dec)\nplot(cvi, color = gray)',
            scriptIdPart: "STD;Cumulative%1Volume%1Index"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Divergence Indicator"),
            scriptSource: 'study(title="Divergence Indicator")\n\nosc = rsi(close, 14)\n\n// Bullish\nbullishPrice = low\npriceMins = bullishPrice > bullishPrice[1] and bullishPrice[1] < bullishPrice[2]\n\npriceRightMin = valuewhen(priceMins, bullishPrice[1], 0)\npriceLeftMin = valuewhen(priceMins, bullishPrice[1], 1)\n\noscRightMin = valuewhen(priceMins, osc[1], 0)\noscLeftMin = valuewhen(priceMins, osc[1], 1)\n\nbullishNDiv = priceLeftMin > priceRightMin and oscLeftMin < oscRightMin\nbullishHDiv = priceLeftMin < priceRightMin and oscLeftMin > oscRightMin\n\nbullishNSig = bullishNDiv and not bullishNDiv[1] and bullishPrice[1] < bullishPrice\nbullishHSig = bullishHDiv and not bullishHDiv[1] and bullishPrice[1] > bullishPrice\n\nplot(bullishNSig, title="Normal Bullish Divergence", style=histogram, linewidth=3, color=green)\nplot(bullishHSig, title="Hidden Bullish Divergence", style=histogram, linewidth=1, color=green)\n\n// Bearish\nbearishPrice = high\npriceMaxs = bearishPrice < bearishPrice[1] and bearishPrice[1] > bearishPrice[2]\n\npriceRightMax = valuewhen(priceMaxs, bearishPrice[1], 0)\npriceLeftMax = valuewhen(priceMaxs, bearishPrice[1], 1)\n\noscRightMax = valuewhen(priceMaxs, osc[1], 0)\noscLeftMax = valuewhen(priceMaxs, osc[1], 1)\n\nbearishNDiv = priceLeftMax < priceRightMax and oscLeftMax > oscRightMax\nbearishHDiv = priceLeftMax > priceRightMax and oscLeftMax < oscRightMax\n\nbearishNSig = bearishNDiv and not bearishNDiv[1] and bearishPrice[1] < bearishPrice\nbearishHSig = bearishHDiv and not bearishHDiv[1] and bearishPrice[1] > bearishPrice\n\nplot(bearishNSig, title="Normal Bearish Divergence", style=histogram, linewidth=3, color=red)\nplot(bearishHSig, title="Hidden Bearish Divergence", style=histogram, linewidth=1, color=red)\n',
            scriptIdPart: "STD;Divergence%1Indicator"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Klinger Oscillator"),
            scriptSource: 'study(title="Klinger Oscillator")\nsv = change(hlc3) >= 0 ? volume : -volume\nkvo = ema(sv, 34) - ema(sv, 55)\nsig = ema(kvo, 13)\nplot(kvo)\nplot(sig, color = green)\n',
            scriptIdPart: "STD;Klinger%1Oscillator"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Least Squares Moving Average"),
            scriptSource: 'study(title = "Least Squares Moving Average", shorttitle="LSMA", overlay=true)\n\nlength = input(title="Length", type=integer, defval=25)\noffset = input(title="Offset", type=integer, defval=0)\n\nsrc = input(close, title="Source")\n\nlsma = linreg(src, length, offset)\nplot(lsma)\n',
            scriptIdPart: "STD;Least%1Squares%1Moving%1Average"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("MA Cross"),
            scriptSource: 'study(title="MA Cross", overlay=true)\nshort = sma(close, 9)\nlong = sma(close, 21)\nplot(short, color = red)\nplot(long, color = green)\nplot(cross(short, long) ? short : na, style = cross, linewidth = 4)\n',
            scriptIdPart: "STD;MA%1Cross"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Mass Index"),
            scriptSource: 'study(title="Mass Index")\nlength = input(10, minval=1)\nrange = high - low\nmi = sum(ema(range, 9) / ema(ema(range, 9), 9), length)\nplot(mi)\n',
            scriptIdPart: "STD;Mass%1Index"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("McGinley Dynamic"),
            scriptSource: 'study(title="McGinley Dynamic", overlay=true)\nlength = input(14, minval=1)\nsource = close\nmg = na(mg[1]) ? ema(source, length) : mg[1] + (source - mg[1]) / (length * pow(source/mg[1], 4))\nplot(mg)\n',
            scriptIdPart: "STD;McGinley%1Dynamic"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Net Volume"),
            scriptSource: 'study(title="Net Volume")\nsrc = close\nnv = change(src) > 0 ? volume : change(src) < 0 ? -volume : 0*volume\nplot(nv, color=blue, title="NV")\n',
            scriptIdPart: "STD;Net%1Volume"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Smoothed Moving Average"),
            scriptSource: 'study(title = "Smoothed Moving Average", shorttitle="SMMA", overlay=true)\nlen = input(7, minval=1, title="Length")\nsrc = input(close, title="Source")\nsmma = na(smma[1]) ? sma(src, len) : (smma[1] * (len - 1) + src) / len\nplot(smma, color=red)\n',
            scriptIdPart: "STD;Smoothed%1Moving%1Average"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("True Strength Indicator"),
            scriptSource: 'study("True Strength Indicator", shorttitle="TSI")\nlong = input(title="Long Length", type=integer, defval=25)\nshort = input(title="Short Length", type=integer, defval=13)\nsignal = input(title="Signal Length", type=integer, defval=13)\nprice = close\ndouble_smooth(src, long, short) =>\n    fist_smooth = ema(src, long)\n    ema(fist_smooth, short)\npc = change(price)\ndouble_smoothed_pc = double_smooth(pc, long, short)\ndouble_smoothed_abs_pc = double_smooth(abs(pc), long, short)\ntsi_value = 100 * (double_smoothed_pc / double_smoothed_abs_pc)\nplot(tsi_value, color=black)\nplot(ema(tsi_value, signal), color=red)\nhline(0, title="Zero")\n',
            scriptIdPart: "STD;True%1Strength%1Indicator"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Volume Oscillator"),
            scriptSource: 'study(title="Volume Oscillator", shorttitle="Volume Osc")\nshortlen = input(5, minval=1)\nlonglen = input(10, minval=1)\nshort = ema(volume, shortlen)\nlong = ema(volume, longlen)\nosc = 100 * (short - long) / long\nhline(0, title="Zero")\nplot(osc)',
            scriptIdPart: "STD;Volume%1Oscillator"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Vortex Indicator"),
            scriptSource: 'study(title = "Vortex Indicator", shorttitle="VI")\nperiod_ = input(14, title="Period", minval=2)\n\nVMP = sum( abs( high - low[1]), period_ )\nVMM = sum( abs( low - high[1]), period_ )\nSTR = sum( atr(1), period_ )\nVIP = VMP / STR\nVIM = VMM / STR\n\nplot( VIP, title="VI +", color=blue)\nplot( VIM, title="VI -", color=red)\n',
            scriptIdPart: "STD;Vortex%1Indicator"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Woodies CCI"),
            scriptSource: 'study(title="Woodies CCI")\n\ncciTurboLength = input(title="CCI Turbo Length", type=integer, defval=6, minval=3, maxval=14)\ncci14Length = input(title="CCI 14 Length", type=integer, defval=14, minval=7, maxval=20)\n\nsource = close\n\ncciTurbo = cci(source, cciTurboLength)\ncci14 = cci(source, cci14Length)\n\nlast5IsDown = cci14[5] < 0 and cci14[4] < 0 and cci14[3] < 0 and cci14[2] < 0 and cci14[1] < 0\nlast5IsUp = cci14[5] > 0 and cci14[4] > 0 and cci14[3] > 0 and cci14[2] > 0 and cci14[1] > 0\nhistogramColor = last5IsUp ? green : last5IsDown ? red : cci14 < 0 ? green : red\n\nplot(cci14, title="CCI Turbo Histogram", color=histogramColor, style=histogram)\nplot(cciTurbo, title="CCI Turbo", color=green, style=line)\nplot(cci14, title="CCI 14", color=red, style=line)\n\nhline(0, title="Zero Line", color=black, linestyle=solid)\nhline(100, title="Hundred Line", color=black, linestyle=dotted)\nhline(-100, title="Minus Line", color=black, linestyle=dotted)\n',
            scriptIdPart: "STD;Woodies%1CCI"
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Accumulation/Distribution"),
            scriptSource: 'study(title="Accumulation/Distribution", shorttitle="Accum/Dist", overlay=false)\nad = cum(close==high and close==low or high==low ? 0 : ((2*close-low-high)/(high-low))*volume)\nplot(ad, title = "Accumulation/Distribution", color=olive)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Advance/Decline Ratio (Bars)"),
            scriptSource: 'study("Advance/Decline Ratio (Bars)", shorttitle="ADR_B")\nlength = input(9, minval=1)\nisUp = (close - open) >= 0.0\nupBars = sum(isUp, length)\ndownBars = sum(not isUp, length)\nad = downBars == 0 ? upBars : upBars / downBars\nplot(ad, color=blue)\nhline(1.0)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Aroon"),
            scriptSource: 'study(title="Aroon", shorttitle="Aroon", overlay=false)\nlength = input(14, minval=1)\nupper = 100 * (highestbars(high, length+1) + length)/length\nlower = 100 * (lowestbars(low, length+1) + length)/length\nplot(upper, color=#FF6A00)\nplot(lower, color=#0094FF)\n'
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Average Directional Index"),
            doNotBuildJavastudiesTestCase: !0,
            scriptSource: 'study("Average Directional Index", shorttitle="ADX")\nadxlen = input(14, title="ADX Smoothing")\ndilen = input(14, title="DI Length")\ndirmov(len) =>\n	up = change(high)\n	down = -change(low)\n	truerange = rma(tr, len)\n	plus = fixnan(100 * rma(up > down and up > 0 ? up : 0, len) / truerange)\n	minus = fixnan(100 * rma(down > up and down > 0 ? down : 0, len) / truerange)\n	[plus, minus]\n\nadx(dilen, adxlen) => \n	[plus, minus] = dirmov(dilen)\n	sum = plus + minus\n	adx = 100 * rma(abs(plus - minus) / (sum == 0 ? 1 : sum), adxlen)\n\nsig = adx(dilen, adxlen)\n\nplot(sig, color=red, title="ADX")',
            scriptIdPart: "STD;Average%1Directional%1Index"
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Average True Range"),
            scriptSource: 'study(title="Average True Range", shorttitle="ATR", overlay=false)\nlength = input(14, minval=1)\nplot(rma(tr(true), length), color=red)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Awesome Oscillator"),
            scriptSource: 'study(title="Awesome Oscillator", shorttitle="AO")\nao = sma(hl2,5) - sma(hl2,34)\nplot(ao, color = change(ao) <= 0 ? red : green, style=histogram)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Bollinger Bands"),
            scriptSource: 'study(shorttitle="BB", title="Bollinger Bands", overlay=true)\nlength = input(20, minval=1)\nsrc = input(close, title="Source")\nmult = input(2.0, minval=0.001, maxval=50)\nbasis = sma(src, length)\ndev = mult * stdev(src, length)\nupper = basis + dev\nlower = basis - dev\nplot(basis, color=red)\np1 = plot(upper, color=blue)\np2 = plot(lower, color=blue)\nfill(p1, p2)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Bollinger Bands %B"),
            scriptSource: 'study(title = "Bollinger Bands %B", shorttitle = "BB %B")\nlength = input(20, minval=1)\nsrc = input(close, title="Source")\nmult = input(2.0, minval=0.001, maxval=50)\nbasis = sma(src, length)\ndev = mult * stdev(src, length)\nupper = basis + dev\nlower = basis - dev\nbbr = (src - lower)/(upper - lower)\nplot(bbr, color=teal)\nband1 = hline(1, color=gray, linestyle=dashed)\nband0 = hline(0, color=gray, linestyle=dashed)\nfill(band1, band0, color=teal)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Bollinger Bands Width"),
            scriptSource: 'study(title="Bollinger Bands Width", shorttitle="BBW")\nlength = input(20, minval=1)\nsrc = input(close, title="Source")\nmult = input(2.0, minval=0.001, maxval=50)\nbasis = sma(src, length)\ndev = mult * stdev(src, length)\nupper = basis + dev\nlower = basis - dev\nbbw = (upper-lower)/basis\nplot(bbw, color=blue)\n'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Chaikin Money Flow"),
            scriptSource: 'study(title="Chaikin Money Flow", shorttitle="CMF")\nlength = input(20, minval=1)\nad = close==high and close==low or high==low ? 0 : ((2*close-low-high)/(high-low))*volume\nmf = sum(ad, length) / sum(volume, length)\nplot(mf, color=green, title="MF")\nhline(0, color=gray, title="Zero", linestyle=dashed)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Chaikin Oscillator"),
            scriptSource: 'study(title="Chaikin Oscillator", shorttitle="Chaikin Osc")\nshort = input(3,minval=1), long = input(10,minval=1)\nosc = ema(accdist, short) - ema(accdist, long)\nplot(osc, color=red)\nhline(0, color=gray, linestyle=dashed)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Chande Momentum Oscillator"),
            scriptSource: 'study(title="Chande Momentum Oscillator", shorttitle="ChandeMO")\nlength = input(9, minval=1)\nsrc = close\nmomm = change(src)\nf1(m) => m >= 0.0 ? m : 0.0\nf2(m) => m >= 0.0 ? 0.0 : -m\nm1 = f1(momm)\nm2 = f2(momm)\nsm1 = sum(m1, length)\nsm2 = sum(m2, length)\npercent(nom, div) => 100 * nom / div\nchandeMO = percent(sm1-sm2, sm1+sm2)\nplot(chandeMO, color=teal)\n'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Choppiness Index"),
            scriptSource: 'study(title="Choppiness Index", shorttitle="CHOP")\nlength = input(14, minval=1)\nci = 100 * log10(sum(atr(1), length) / (highest(length) - lowest(length))) / log10(length)\nplot(ci, color=blue)\nband1 = hline(61.8, color=gray, linestyle=dashed)\nband0 = hline(38.2, color=gray, linestyle=dashed)\nfill(band1, band0, color = green)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Commodity Channel Index"),
            scriptSource: 'study(title="Commodity Channel Index", shorttitle="CCI")\nlength = input(20, minval=1)\nsrc = input(close, title="Source")\nma = sma(src, length)\ncci = (src - ma) / (0.015 * dev(src, length))\nplot(cci, color=olive)\nband1 = hline(100, color=gray, linestyle=dashed)\nband0 = hline(-100, color=gray, linestyle=dashed)\nfill(band1, band0, color=olive)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Connors RSI"),
            scriptSource: 'study(title="Connors RSI")\nsrc = close, lenrsi = 3, lenupdown = 2, lenroc = 100\nupdown(s) => \n    isEqual = s == s[1]\n    isGrowing = s > s[1]\n    ud = isEqual ? 0 : isGrowing ? (nz(ud[1]) <= 0 ? 1 : nz(ud[1])+1) : (nz(ud[1]) >= 0 ? -1 : nz(ud[1])-1)\n    ud\nrsi = rsi(src, lenrsi)\nupdownrsi = rsi(updown(src), lenupdown)\npercentrank = percentrank(roc(src, 1), lenroc)\ncrsi = avg(rsi, updownrsi, percentrank)\nplot(crsi)\nband1 = hline(70)\nband0 = hline(30)\nfill(band1, band0)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Correlation Coeff"),
            doNotBuildJavastudiesTestCase: !0,
            scriptSource: 'study(title="Correlation Coeff", shorttitle="CC")\nsym = input(title="Symbol", type=symbol, defval="GOOG", confirm=true)\nsrc = input(close, title="Source")\nlength = input(20, minval=1)\n\nres=period\n\novr = security(sym, res, src)\nplot(correlation(src, ovr, length), color=purple, style=area, transp=40)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Detrended Price Oscillator"),
            scriptSource: 'study(title="Detrended Price Oscillator", shorttitle="DPO")\nperiod_ = input(21, title="Period", minval=1), isCentered = input(false)\nbarsback = period_/2 + 1\nma = sma(close, period_)\ndpo = isCentered ? close[barsback] - ma : close - ma[barsback]\nplot(dpo, offset = isCentered ? -barsback : 0, title="DPO", color=olive)\nhline(0, title="Zero")'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Directional Movement Index"),
            scriptSource: 'study(title="Directional Movement Index", shorttitle="DMI")\nlen = input(14, minval=1, title="DI Length")\nlensig = input(14, title="ADX Smoothing", minval=1, maxval=50)\nup = change(high)\ndown = -change(low)\ntrur = rma(tr, len)\nplus = fixnan(100 * rma(up > down and up > 0 ? up : 0, len) / trur)\nminus = fixnan(100 * rma(down > up and down > 0 ? down : 0, len) / trur)\nsum = plus + minus \nadx = 100 * rma(abs(plus - minus) / (sum == 0 ? 1 : sum), lensig)\nplot(plus, color=blue, title="+DI")\nplot(minus, color=orange, title="-DI")\nplot(adx, color=red, title="ADX")'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Donchian Channels"),
            scriptSource: 'study(title="Donchian Channels", shorttitle="DC", overlay=true)\nlength = input(20, minval=1)\nlower = lowest(length)\nupper = highest(length)\nbasis = avg(upper, lower)\nl = plot(lower, color=blue)\nu = plot(upper, color=blue)\nplot(basis, color=orange)\nfill(u, l, color=blue)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Double Exponential Moving Average"),
            scriptSource: 'study(title="Double Exponential Moving Average", shorttitle="DEMA", overlay=true)\nlength = input(9, minval=1)\nsrc = input(close, title="Source")\ne1 = ema(src, length)\ne2 = ema(e1, length)\ndema = 2 * e1 - e2\nplot(dema, color=green)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Ease of Movement"),
            scriptSource: 'study(title="Ease of Movement", shorttitle="EOM")\ndiv = input(10000, title="Divisor", minval=1)\nlength = input(14, minval=1)\neom = sma(div * change(hl2) * (high - low) / volume, length)\nplot(eom, color=olive)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Elder's Force Index"),
            scriptSource: 'study(title="Elder\'s Force Index", shorttitle="EFI")\nlength = input(13, minval=1)\nefi = sma(change(close) * volume, length)\nplot(efi, color=maroon, title="EFI")\nhline(0, title="Zero")'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Envelope"),
            scriptSource: 'study(title="Envelope", shorttitle="Env", overlay=true)\nlen = input(20, title="Length", minval=1)\npercent = input(10.0)\nsrc = input(close, title="Source")\nexponential = input(false)\n\nbasis = exponential ? ema(src, len) : sma(src, len)\nk = percent/100.0\nupper = basis * (1 + k)\nlower = basis * (1 - k)\nplot(basis, color=orange)\nu = plot(upper, color=blue)\nl = plot(lower, color=blue)\nfill(u, l, color=blue)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Fisher Transform"),
            scriptSource: 'study(title="Fisher Transform", shorttitle="Fisher")\nlen = input(9, minval=1, title="Length")\nhigh_ = highest(hl2, len)\nlow_ = lowest(hl2, len)\nround_(val) => val > .99 ? .999 : val < -.99 ? -.999 : val\nvalue = round_(.66 * ((hl2 - low_) / max(high_ - low_, .001) - .5) + .67 * nz(value[1]))\nfish1 = .5 * log((1 + value) / max(1 - value, .001)) + .5 * nz(fish1[1])\nfish2 = fish1[1]\nhline(1.5, color=orange)\nhline(0.75)\nhline(0, color=orange)\nhline(-0.75)\nhline(-1.5, color=orange)\nplot(fish1, color=blue, title="Fisher")\nplot(fish2, color=orange, title="Trigger")'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Function Definition"),
            scriptSource: 'study(title="Function Definition")\n// simple function with two args\nf1(x, y) => x + y\n\n// function without args, note: we can use built-in globals such as "close"\nf2() => close * 2\n\n// You may call one function from another\nf3() => f1(open, close) + f2()\n\nplot(f1(open, close), color=red)\nplot(f2()*0.9, color=green)\nplot(f3()/2.1, color=blue)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Historical Volatility"),
            scriptSource: 'study(title="Historical Volatility", shorttitle="HV")\nlength = input(10, minval=1)\nannual = 365\nper = isintraday or isdaily and interval == 1 ? 1 : 7\nhv = 100 * stdev(log(close / close[1]), length) * sqrt(annual / per)\nplot(hv, color=blue)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Hull MA"),
            scriptSource: 'study(title = "Hull MA", shorttitle="HMA", overlay = true)\nlength = input(9, minval=1)\nsrc = input(close, title="Source")\nhullma = wma(2*wma(src, length/2)-wma(src, length), round(sqrt(length)))\nplot(hullma)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Ichimoku Cloud"),
            scriptSource: 'study(title="Ichimoku Cloud", shorttitle="Ichimoku", overlay=true)\n\nconversionPeriods = input(9, minval=1),\nbasePeriods = input(26, minval=1)\nlaggingSpan2Periods = input(52, minval=1),\ndisplacement = input(26, minval=1)\n\ndonchian(len) => avg(lowest(len), highest(len))\n\nconversionLine = donchian(conversionPeriods)\nbaseLine = donchian(basePeriods)\nleadLine1 = avg(conversionLine, baseLine)\nleadLine2 = donchian(laggingSpan2Periods)\n\nplot(conversionLine, color=blue, title="Conversion Line")\nplot(baseLine, color=red, title="Base Line")\nplot(close, offset = -displacement, color=green, title="Lagging Span")\n\np1 = plot(leadLine1, offset = displacement, color=green,\n    title="Lead 1")\np2 = plot(leadLine2, offset = displacement, color=red, \n    title="Lead 2")\nfill(p1, p2)\n'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Keltner Channels"),
            scriptSource: 'study(title="Keltner Channels", shorttitle="KC", overlay=true)\nuseTrueRange = input(true)\nlength = input(20, minval=1)\nmult = input(1.0)\nsrc = input(close, title="Source")\n\nma = ema(src, length)\nrange = useTrueRange ? tr : high - low\nrangema = ema(range, length)\nupper = ma + rangema * mult\nlower = ma - rangema * mult\nc = blue\nu = plot(upper, color=c, title="Upper")\nplot(ma, color=c, title="Basis")\nl = plot(lower, color=c, title="Lower")\nfill(u, l, color=c)\n'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Know Sure Thing"),
            scriptSource: 'study(title="Know Sure Thing", shorttitle="KST")\nroclen1 = input(10, minval=1)\nroclen2 = input(15, minval=1)\nroclen3 = input(20, minval=1)\nroclen4 = input(30, minval=1)\nsmalen1 = input(10, minval=1)\nsmalen2 = input(10, minval=1)\nsmalen3 = input(10, minval=1)\nsmalen4 = input(15, minval=1)\nsiglen = input(9, minval=1)\nsmaroc(roclen, smalen) => sma(roc(close, roclen), smalen)\nkst = smaroc(roclen1, smalen1) + 2 * smaroc(roclen2, smalen2) + 3 * smaroc(roclen3, smalen3) + 4 * smaroc(roclen4, smalen4)\nsig = sma(kst, siglen)\nplot(kst, color=green, title="KST")\nplot(sig, color=red, title="Signal")\nhline(0, title="Zero")'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Linear Regression Curve"),
            scriptSource: 'study(title="Linear Regression Curve", shorttitle="LRC", overlay=true)\nsrc = close\nlen = input(defval=9, minval=1, title="Length")\noffset = 0\nout = linreg(src, len, offset)\nplot(out)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Momentum"),
            scriptSource: 'study(title="Momentum", shorttitle="Mom")\nlen = input(10, minval=1, title="Length")\nsrc = input(close, title="Source")\nmom = src - src[len]\nplot(mom, color=olive, title="Mom")'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Money Flow"),
            scriptSource: 'study(title="Money Flow", shorttitle="MFI")\nlength = input(title="Length", type=integer, defval=14, minval=1, maxval=2000)\nsrc = hlc3\nupper = sum(volume * (change(src) <= 0 ? 0 : src), length)\nlower = sum(volume * (change(src) >= 0 ? 0 : src), length)\nmf = rsi(upper, lower)\nplot(mf, color=#459915)\noverbought=hline(80, title="Overbought", color=#c0c0c0)\noversold=hline(20, title="Oversold", color=#c0c0c0)\nfill(overbought, oversold, color=#9915ff, transp=90)\n'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Moving Average Exponential"),
            scriptSource: 'study(title="Moving Average Exponential", shorttitle="EMA", overlay=true)\nlen = input(9, minval=1, title="Length")\nsrc = input(close, title="Source")\nout = ema(src, len)\nplot(out, title="EMA", color=blue)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Moving Avarage Weighted"),
            scriptSource: 'study(title="Moving Avarage Weighted", shorttitle="WMA", overlay=true)\nlen = input(9, minval=1, title="Length")\nsrc = input(close, title="Source")\nout = wma(src, len)\nplot(out, title="WMA", color=blue)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Moving Average"),
            scriptSource: 'study(title="Moving Average", shorttitle="MA", overlay=true)\nlen = input(9, minval=1, title="Length")\nsrc = input(close, title="Source")\nout = sma(src, len)\nplot(out, color=blue, title="MA")'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Moving Average Convergence/Divergence"),
            scriptSource: 'study(title="Moving Average Convergence/Divergence", shorttitle="MACD")\nsource = close\nfastLength = input(12, minval=1), slowLength=input(26,minval=1)\nsignalLength=input(9,minval=1)\nfastMA = ema(source, fastLength)\nslowMA = ema(source, slowLength)\nmacd = fastMA - slowMA\nsignal = sma(macd, signalLength)\nhist = macd - signal\nplot(hist, color=red, style=histogram)\nplot(macd, color=blue)\nplot(signal, color=orange)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("On Balance Volume"),
            scriptSource: 'study(title="On Balance Volume", shorttitle="OBV")\nsrc = close\nobv = cum(change(src) > 0 ? volume : change(src) < 0 ? -volume : 0*volume)\nplot(obv, color=blue, title="OBV")'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Parabolic SAR"),
            scriptSource: 'study(title="Parabolic SAR", shorttitle="SAR", overlay=true)\nstart = input(0.02)\nincrement = input(0.02)\nmaximum = input(0.2)\nout = sar(start, increment, maximum)\nplot(out, style=cross, color=blue)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Plot Offsets"),
            scriptSource: 'study(title = "Plot Offsets")\nplot(close, title="Positive", offset=15)\nplot(open, title="Negative", offset=-7)\nplot(high, title="Zero", offset=0)\nplot(low, title="Default")'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Price Oscillator"),
            scriptSource: 'study(title="Price Oscillator", shorttitle="PPO")\nshortlen=input(10, minval=1)\nlonglen=input(21, minval=1)\nsrc = input(close, title="Source")\nshort = sma(src, shortlen)\nlong = sma(src, longlen)\npo = (short - long)/long*100\nplot(po, color=blue, title="PPO")'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Price Volume Trend"),
            scriptSource: 'study(title="Price Volume Trend", shorttitle="PVT")\nsrc = close\nvt = cum(change(src)/src[1]*volume)\nplot(vt, color=blue, title="PVT")'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Rate Of Change"),
            scriptSource: 'study(title="Rate Of Change", shorttitle="ROC")\nsource = close, length = input(9, minval=1)\nroc = 100 * (source - source[length])/source[length]\nplot(roc, color=blue, title="ROC")\nhline(0, title="Zero Line")\n'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Relative Strength Index"),
            scriptSource: 'study(title="Relative Strength Index", shorttitle="RSI")\nsrc = close, len = input(14, minval=1, title="Length")\nup = rma(max(change(src), 0), len)\ndown = rma(-min(change(src), 0), len)\nrsi = down == 0 ? 100 : up == 0 ? 0 : 100 - (100 / (1 + up / down))\nplot(rsi, color=purple)\nband1 = hline(70)\nband0 = hline(30)\nfill(band1, band0, color=purple, transp=90)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Relative Vigor Index"),
            scriptSource: 'study(title="Relative Vigor Index", shorttitle="RVGI")\nlen = input(10, title="Length", minval=1)\nrvi = sum(swma(close-open), len)/sum(swma(high-low),len)\nsig = swma(rvi)\nplot(rvi, color=green, title="RVGI")\nplot(sig, color=red, title="Signal")'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Relative Volatility Index"),
            scriptSource: 'study(title="Relative Volatility Index", shorttitle="RVI")\nlength = input(10, minval=1), src = close\nlen = 14\nstddev = stdev(src, length)\nupper = ema(change(src) <= 0 ? 0 : stddev, len)\nlower = ema(change(src) > 0 ? 0 : stddev, len)\nrvi = upper / (upper + lower) * 100\nh0 = hline(80)\nh1 = hline(20)\nfill(h0, h1, color=olive)\nplot(rvi, title="RVI")'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("SMI Ergodic Indicator/Oscillator"),
            scriptSource: 'study(title="SMI Ergodic Indicator/Oscillator", shorttitle="SMIIO")\nshortlen = input(5, minval=1, title="Short Period")\nlonglen = input(20, minval=1, title="Long Period")\nsiglen = input(5, minval=1, title="Signal Line Period)")\nerg = tsi(close, shortlen, longlen)\nsig = ema(erg, siglen)\nosc = erg - sig\nplot(erg, color=blue, title="Indicator")\nplot(sig, color=orange, title="Signal")\nplot(osc, color=red, style=histogram, title="Oscillator")'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Stochastic"),
            scriptSource: 'study(title="Stochastic", shorttitle="Stoch")\nlength = input(14, minval=1), smoothK = input(1, minval=1), smoothD = input(3, minval=1)\nk = sma(stoch(close, high, low, length), smoothK)\nd = sma(k, smoothD)\nplot(k, color=blue)\nplot(d, color=orange)\nh0 = hline(80)\nh1 = hline(20)\nfill(h0, h1, color=purple, transp=75)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Stochastic RSI"),
            scriptSource: 'study(title="Stochastic RSI", shorttitle="Stoch RSI")\nsmoothK = input(3, minval=1)\nsmoothD = input(3, minval=1)\nlengthRSI = input(14, minval=1)\nlengthStoch = input(14, minval=1)\nsrc = input(close, title="RSI Source")\n\nrsi1 = rsi(src, lengthRSI)\nk = sma(stoch(rsi1, rsi1, rsi1, lengthStoch), smoothK)\nd = sma(k, smoothD)\nplot(k, color=blue)\nplot(d, color=orange)\nh0 = hline(80)\nh1 = hline(20)\nfill(h0, h1, color=purple, transp=80)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Triple EMA"),
            scriptSource: 'study(title="Triple EMA", shorttitle="TEMA", overlay=true)\nlength = input(9, minval=1)\nema1 = ema(close, length)\nema2 = ema(ema1, length)\nema3 = ema(ema2, length)\nout = 3 * (ema1 - ema2) + ema3\nplot(out, color=green)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("TRIX"),
            scriptSource: 'study(title="TRIX", shorttitle="TRIX")\nlength = input(18, minval=1)\nout = 10000 * change(ema(ema(ema(log(close), length), length), length))\nplot(out, color=maroon, title="TRIX")\nhline(0, title="Zero")'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Ultimate Oscillator"),
            scriptSource: 'study(title="Ultimate Oscillator", shorttitle="UO")\nlength7 = input(7, minval=1), length14 = input(14, minval=1), length28 = input(28, minval=1)\naverage(bp, tr_, length) => sum(bp, length) / sum(tr_, length)\nhigh_ = max(high, close[1])\nlow_ = min(low, close[1])\nbp = close - low_\ntr_ = high_ - low_\navg7 = average(bp, tr_, length7)\navg14 = average(bp, tr_, length14)\navg28 = average(bp, tr_, length28)\nout = 100 * (4*avg7 + 2*avg14 + avg28)/7\nplot(out, color=red, title="UO")'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Volume"),
            scriptSource: 'study(title="Volume", shorttitle="Vol", precision=0)\nshowMA = input(true)\nbarColorsOnPrevClose = input(title="Color bars based on previous close", type=bool, defval=false)\n\npalette = barColorsOnPrevClose ? close[1] > close ? red : green : open > close ? red : green\n\nplot(volume, color = palette, style=columns, title="Volume", transp=65)\nplot(showMA ? sma(volume,20) : na, style=area, color=blue, title="Volume MA", transp=65)\n'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("VWAP"),
            scriptSource: 'study(title="VWAP", shorttitle="VWAP", overlay=true)\nout = vwap(hlc3)\nplot(out, title="VWAP", color=blue)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("VWMA"),
            scriptSource: 'study(title="VWMA", shorttitle="VWMA", overlay=true)\nsrc = close, len = input(20, minval=1)\nma = vwma(src, len)\nplot(ma, title="VWMA", color=blue)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Willams %R"),
            scriptSource: 'study(title="Willams %R", shorttitle="%R")\nlength = input(14, minval=1)\nupper = highest(length)\nlower = lowest(length)\nout = 100 * (close - upper) / (upper - lower)\nplot(out)\nband1 = hline(-20)\nband0 = hline(-80)\nfill(band1, band0)'
        }, {
            isTVScriptBuiltIn: !1,
            scriptName: $.t("Williams Alligator"),
            scriptSource: 'study(title="Williams Alligator", shorttitle="Alligator", overlay=true)\nsmma(src, length) =>\n    smma = na(smma[1]) ? sma(src, length) : (smma[1] * (length - 1) + src) / length\n    smma\njawLength = input(13, minval=1, title="Jaw Length")\nteethLength = input(8, minval=1, title="Teeth Length")\nlipsLength = input(5, minval=1, title="Lips Length")\njawOffset = input(8, title="Jaw Offset")\nteethOffset = input(5, title="Teeth Offset")\nlipsOffset = input(3, title="Lips Offset")\njaw = smma(hl2, jawLength)\nteeth = smma(hl2, teethLength)\nlips = smma(hl2, lipsLength)\nplot(jaw, offset = jawOffset, color=blue)\nplot(teeth, offset = teethOffset, color=red)\nplot(lips, offset = lipsOffset, color=green)\n'
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Parabolic SAR Strategy"),
            isTVScriptStrategy: !0,
            scriptSource: '//@version=2\nstrategy("Parabolic SAR Strategy", overlay=true)\n\nstart = input(0.02)\nincrement = input(0.02)\nmaximum = input(0.2)\n\npsar = sar(start, increment, maximum)\n\nif (psar > high)\n    strategy.entry("ParLE", strategy.long, stop=psar, comment="ParLE")\nelse\n    strategy.cancel("ParLE")\n\nif (psar < low)\n    strategy.entry("ParSE", strategy.short, stop=psar, comment="ParSE")\nelse\n    strategy.cancel("ParSE")\n\n//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)',
            scriptIdPart: "STD;Parabolic%1SAR%1Strategy"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Channel BreakOut Strategy"),
            isTVScriptStrategy: !0,
            scriptSource: '//@version=2\nstrategy("ChannelBreakOutStrategy", overlay=true)\n\nlength = input(title="Length", type=integer, minval=1, maxval=1000, defval=5)\n\nupBound = highest(high, length)\ndownBound = lowest(low, length)\n\nif (not na(close[length]))\n    strategy.entry("ChBrkLE", strategy.long, stop=upBound + syminfo.mintick, comment="ChBrkLE")\n    strategy.entry("ChBrkSE", strategy.short, stop=downBound - syminfo.mintick, comment="ChBrkSE")\n\n//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)\n',
            scriptIdPart: "STD;Channel%1BreakOut%1Strategy"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("OutSide Bar Strategy"),
            isTVScriptStrategy: !0,
            scriptSource: '//@version=2\nstrategy("OutSide Bar Strategy", overlay=true)\nif (high > high[1] and low < low[1])\n    if (close > open)\n        strategy.entry("OutBarLE", strategy.long, comment="OutBarLE")\n    if (close < open)\n        strategy.entry("OutBarSE", strategy.short, comment="OutBarSE")\n\n//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)',
            scriptIdPart: "STD;OutSide%1Bar%1Strategy"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("InSide Bar Strategy"),
            isTVScriptStrategy: !0,
            scriptSource: '//@version=2\nstrategy("InSide Bar Strategy", overlay=true)\n\nif (high < high[1] and low > low[1])\n    if (close > open)\n        strategy.entry("InsBarLE", strategy.long, comment="OutBarLE")\n    if (close < open)\n        strategy.entry("InsBarSE", strategy.short, comment="OutBarSE")\n\n//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)',
            scriptIdPart: "STD;InSide%1Bar%1Strategy"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Bollinger Bands Strategy"),
            isTVScriptStrategy: !0,
            scriptSource: '//@version=2\nstrategy("Bollinger Bands Strategy", overlay=true)\nsource = close\nlength = input(20, minval=1)\nmult = input(2.0, minval=0.001, maxval=50)\n\nbasis = sma(source, length)\ndev = mult * stdev(source, length)\n\nupper = basis + dev\nlower = basis - dev\n\nbuyEntry = crossover(source, lower)\nsellEntry = crossunder(source, upper)\n\nif (crossover(source, lower))\n    strategy.entry("BBandLE", strategy.long, stop=lower, oca_name="BollingerBands", oca_type=strategy.oca.cancel, comment="BBandLE")\nelse\n    strategy.cancel(id="BBandLE")\n\nif (crossunder(source, upper))\n    strategy.entry("BBandSE", strategy.short, stop=upper, oca_name="BollingerBands", oca_type=strategy.oca.cancel, comment="BBandSE")\nelse\n    strategy.cancel(id="BBandSE")\n\n//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)\n',
            scriptIdPart: "STD;Bollinger%1Bands%1Strategy"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Consecutive Ups/Downs Strategy"),
            isTVScriptStrategy: !0,
            scriptSource: '//@version=2\nstrategy("Consecutive Up/Down Strategy", overlay=true)\n\nconsecutiveBarsUp = input(3)\nconsecutiveBarsDown = input(3)\n\nprice = close\n\nups = price > price[1] ? nz(ups[1]) + 1 : 0\ndns = price < price[1] ? nz(dns[1]) + 1 : 0\n\nif (ups >= consecutiveBarsUp)\n    strategy.entry("ConsUpLE", strategy.long, comment="ConsUpLE")\n    \nif (dns >= consecutiveBarsDown)\n    strategy.entry("ConsDnSE", strategy.short, comment="ConsUpLE")\n\n//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)',
            scriptIdPart: "STD;Consecutive%1Ups/Downs%1Strategy"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Keltner Channel Strategy"),
            isTVScriptStrategy: !0,
            scriptSource: '//@version=2\nstrategy("Keltner Channel Strategy", overlay=true)\nsource = close\n\nuseTrueRange = input(true)\nlength = input(20, minval=1)\nmult = input(1.0)\n\nma = sma(source, length)\nrange = useTrueRange ? tr : high - low\nrangema = sma(range, length)\nupper = ma + rangema * mult\nlower = ma - rangema * mult\n\ncrossUpper = crossover(source, upper)\ncrossLower = crossunder(source, lower)\n\nbprice = crossUpper ? high+syminfo.mintick : nz(bprice[1])\nsprice = crossLower ? low -syminfo.mintick : nz(sprice[1]) \n\ncrossBcond = crossUpper ? true \n : na(crossBcond[1]) ? false : crossBcond[1]\ncrossScond = crossLower ? true \n : na(crossScond[1]) ? false : crossScond[1]\n\ncancelBcond = crossBcond and (source < ma or high >= bprice )\ncancelScond = crossScond and (source > ma or low <= sprice )\n\nif (cancelBcond)\n    strategy.cancel("KltChLE")\n\nif (crossUpper)\n    strategy.entry("KltChLE", strategy.long, stop=bprice, comment="KltChLE")\n\nif (cancelScond)\n    strategy.cancel("KltChSE")\n\nif (crossLower)\n    strategy.entry("KltChSE", strategy.short, stop=sprice, comment="KltChSE")\n\n//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)',
            scriptIdPart: "STD;Keltner%1Channel%1Strategy"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("MACD Strategy"),
            isTVScriptStrategy: !0,
            scriptSource: '//@version=2\nstrategy("MACD Strategy", overlay=true)\n\nfastLength = input(12)\nslowlength = input(26)\nMACDLength = input(9)\n\nMACD = ema(close, fastLength) - ema(close, slowlength)\naMACD = ema(MACD, MACDLength)\ndelta = MACD - aMACD\n\nif (crossover(delta, 0))\n    strategy.entry("MacdLE", strategy.long, comment="MacdLE")\n\nif (crossunder(delta, 0))\n    strategy.entry("MacdSE", strategy.short, comment="MacdSE")\n\n//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)',
            scriptIdPart: "STD;MACD%1Strategy"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Momentum Strategy"),
            isTVScriptStrategy: !0,
            scriptSource: '//@version=2\nstrategy("Momentum Strategy", overlay=true)\nlength = input(12)\nprice = close\n\nmomentum(seria, length) =>\n    mom = seria - seria[length]\n    mom\n\nmom0 = momentum(price, length)\nmom1 = momentum( mom0, 1)\n\nif (mom0 > 0 and mom1 > 0)\n    strategy.entry("MomLE", strategy.long, stop=high+syminfo.mintick, comment="MomLE")\nelse\n    strategy.cancel("MomLE")\n\nif (mom0 < 0 and mom1 < 0)\n    strategy.entry("MomSE", strategy.short, stop=low-syminfo.mintick, comment="MomSE")\nelse\n    strategy.cancel("MomSE")\n\n//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)',
            scriptIdPart: "STD;Momentum%1Strategy"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("MovingAvg Cross Strategy"),
            isTVScriptStrategy: !0,
            scriptSource: '//@version=2\nstrategy("MovingAvg Cross", overlay=true)\nlength = input(9)\nconfirmBars = input(1)\nprice = close\n\nma = sma(price, length)\n\nbcond = price > ma\nbcount = bcond ? nz(bcount[1]) + 1 : 0\n\nif (bcount == confirmBars)\n    strategy.entry("MACrossLE", strategy.long, comment="MACrossLE")\n\nscond = price < ma\nscount = scond ? nz(scount[1]) + 1 : 0\n\nif (scount == confirmBars)\n    strategy.entry("MACrossSE", strategy.short, comment="MACrossSE")\n\n//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)',
            scriptIdPart: "STD;MovingAvg%1Cross%1Strategy"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("MovingAvg Cross2 Strategy"),
            isTVScriptStrategy: !0,
            scriptSource: '//@version=2\nstrategy("MovingAvg2Line Cross", overlay=true)\nfastLength = input(9)\nslowLength = input(18)\nprice = close\n\nmafast = sma(price, fastLength)\nmaslow = sma(price, slowLength)\n\nif (crossover(mafast, maslow))\n    strategy.entry("MA2CrossLE", strategy.long, comment="MA2CrossLE")\n\nif (crossunder(mafast, maslow))\n    strategy.entry("MA2CrossSE", strategy.short, comment="MA2CrossSE")\n\n//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)',
            scriptIdPart: "STD;MovingAvg%1Cross2%1Strategy"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Pivot Extension Strategy"),
            isTVScriptStrategy: !0,
            scriptSource: '//@version=2\nstrategy("Pivot Extension Strategy", overlay=true)\n\nleftBars = input(4)\nrightBars = input(2)\n\nph = pivothigh(leftBars, rightBars)\npl = pivotlow(leftBars, rightBars)\n\nif (not na(pl))\n    strategy.entry("PivExtLE", strategy.long, comment="PivExtLE")\n\nif (not na(ph))\n    strategy.entry("PivExtSE", strategy.short, comment="PivExtSE")\n\n//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)',
            scriptIdPart: "STD;Pivot%1Extension%1Strategy"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Pivot Reversal Strategy"),
            isTVScriptStrategy: !0,
            scriptSource: '//@version=2\nstrategy("Pivot Reversal Strategy", overlay=true)\n\nleftBars = input(4)\nrightBars = input(2)\n\nswh = pivothigh(leftBars, rightBars)\nswl = pivotlow(leftBars, rightBars)\n\nswh_cond = not na(swh)\nhprice = swh_cond ? swh : hprice[1]\nle = swh_cond ? true : (le[1] and high > hprice ? false : le[1])\n\nif (le)\n    strategy.entry("PivRevLE", strategy.long, comment="PivRevLE", stop=hprice + syminfo.mintick)\n\nswl_cond = not na(swl)\nlprice = swl_cond ? swl : lprice[1]\nse = swl_cond ? true : (se[1] and low < lprice ? false : se[1])\n\nif (se)\n    strategy.entry("PivRevSE", strategy.short, comment="PivRevSE", stop=lprice - syminfo.mintick)\n\n//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)',
            scriptIdPart: "STD;Pivot%1Reversal%1Strategy"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Price Channel Strategy"),
            isTVScriptStrategy: !0,
            scriptSource: '//@version=2\nstrategy("Price Channel Strategy", overlay=true)\nlength = input(20)\nhh = highest(high, length)\nll = lowest(low, length)\nif (not na(close[length]))\n    strategy.entry("PChLE", strategy.long, comment="PChLE", stop=hh)\n    strategy.entry("PChSE", strategy.short, comment="PChSE", stop=ll)\n\n//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)\n',
            scriptIdPart: "STD;Price%1Channel%1Strategy"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Stochastic Slow Strategy"),
            isTVScriptStrategy: !0,
            scriptSource: '//@version=2\nstrategy("Stochastic Slow Strategy", overlay=true)\nlength = input(14, minval=1)\nOverBought = input(80)\nOverSold = input(20)\nsmoothK = 3\nsmoothD = 3\n\nk = sma(stoch(close, high, low, length), smoothK)\nd = sma(k, smoothD)\n\nif (not na(k) and not na(d))\n    if (crossover(k,d) and k < OverSold)\n        strategy.entry("StochLE", strategy.long, comment="StochLE")\n    if (crossunder(k,d) and k > OverBought)\n        strategy.entry("StochSE", strategy.short, comment="StochSE")\n\n//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)',
            scriptIdPart: "STD;Stochastic%1Slow%1Strategy"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("RSI Strategy"),
            isTVScriptStrategy: !0,
            scriptSource: '//@version=2\nstrategy("RSI Strategy", overlay=true)\nlength = input( 14 )\noverSold = input( 30 )\noverBought = input( 70 )\nprice = close\n\nvrsi = rsi(price, length)\n\nif (not na(vrsi))\n    if (crossover(vrsi, overSold))\n        strategy.entry("RsiLE", strategy.long, comment="RsiLE")\n    if (crossunder(vrsi, overBought))\n        strategy.entry("RsiSE", strategy.short, comment="RsiSE")\n\n//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)',
            scriptIdPart: "STD;RSI%1Strategy"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Volty Expan Close Strategy"),
            isTVScriptStrategy: !0,
            scriptSource: '//@version=2\nstrategy("Volty Expan Close Strategy", overlay=true)\nlength = input(5)\nnumATRs = input(0.75)\n\natrs = sma(tr, length)*numATRs\n\nif (not na(close[length]))\n    strategy.entry("VltClsLE", strategy.long, stop=close+atrs, comment = "VltClsLE")\n    strategy.entry("VltClsSE", strategy.short, stop=close-atrs, comment = "VltClsSE")\n\n//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)',
            scriptIdPart: "STD;Volty%1Expan%1Close%1Strategy"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Bars Up/Down Strategy"),
            isTVScriptStrategy: !0,
            scriptSource: '//@version=2\nstrategy("BarUpDn Strategy", overlay=true, default_qty_type = strategy.percent_of_equity, default_qty_value = 10)\n\nmaxIdLossPcnt = input(1, "Max Intraday Loss(%)", type=float)\n\nstrategy.risk.max_intraday_loss(maxIdLossPcnt, strategy.percent_of_equity)\n\nif (close > open and open > close[1])\n    strategy.entry("BarUp", strategy.long)\n\nif (close < open and open < close[1])\n    strategy.entry("BarDn", strategy.short)\n\n//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)',
            scriptIdPart: "STD;Bars%1Up%1Dn%1Strategy"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Bollinger Bands Strategy (directed)"),
            isTVScriptStrategy: !0,
            scriptSource: '//@version=2\nstrategy("Bollinger Bands Strategy directed", overlay=true)\nsource = close\nlength = input(20, minval=1)\nmult = input(2.0, minval=0.001, maxval=50)\ndirection = input(0, title = "Strategy Direction", type=integer, minval=-1, maxval=1)\n\nstrategy.risk.allow_entry_in(direction == 0 ? strategy.direction.all : (direction < 0 ? strategy.direction.short : strategy.direction.long))\n\nbasis = sma(source, length)\ndev = mult * stdev(source, length)\n\nupper = basis + dev\nlower = basis - dev\n\nif (crossover(source, lower))\n    strategy.entry("BBandLE", strategy.long, stop=lower, oca_name="BollingerBands", oca_type=strategy.oca.cancel, comment="BBandLE")\nelse\n    strategy.cancel(id="BBandLE")\n\nif (crossunder(source, upper))\n    strategy.entry("BBandSE", strategy.short, stop=upper, oca_name="BollingerBands", oca_type=strategy.oca.cancel, comment="BBandSE")\nelse\n    strategy.cancel(id="BBandSE")\n\n//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)',
            scriptIdPart: "STD;Bollinger%1Band%1Directed%1Strategy"
        }, {
            isTVScriptBuiltIn: !0,
            scriptName: $.t("Greedy Strategy"),
            isTVScriptStrategy: !0,
            scriptSource: 'strategy("Greedy Strategy", pyramiding = 100, calc_on_order_fills=false, overlay=true)\n\ntp = input(10)\nsl = input(10)\nmaxidf = input(title="Max Intraday Filled Orders", defval=5)\nstrategy.risk.max_intraday_filled_orders(maxidf)\n\nupGap = open > high[1]\ndnGap = open < low[1]\n\ndn = strategy.position_size < 0 and open > close\nup = strategy.position_size > 0 and open < close\n\nstrategy.entry("GapUp", strategy.long, stop = high[1], when = upGap)\nstrategy.entry("Dn", strategy.short, stop = close,  when =  dn)\nstrategy.entry("GapDn", strategy.short, stop = low[1], when = dnGap)\nstrategy.entry("Up", strategy.long, stop = close,  when =  up)\n\nstrategy.cancel("GapUp", not upGap)\nstrategy.cancel("GapDn", not dnGap)\n\nstrategy.cancel("Up", not up)\nstrategy.cancel("Dn", not dn)\n\nXQty = strategy.position_size < 0 ? -strategy.position_size : strategy.position_size\ndir = strategy.position_size < 0 ? -1 : 1\n\nlmP = strategy.position_avg_price + dir*tp*syminfo.mintick\nslP = strategy.position_avg_price - dir*sl*syminfo.mintick\n\nnav = na\nrevCond = strategy.position_size > 0 ? dnGap : (strategy.position_size < 0 ? upGap : false)\n\nstrategy.order("TP", strategy.position_size < 0, XQty, lmP, nav, "TPSL",  strategy.oca.reduce, "TPSL", when=  not revCond and XQty > 0)\nstrategy.order("SL", strategy.position_size < 0, XQty, nav, slP, "TPSL",  strategy.oca.reduce, "TPSL", when= not revCond and XQty > 0)\n\n\n\nstrategy.cancel("TP", XQty == 0 or revCond)\nstrategy.cancel("SL", XQty == 0 or revCond)\n\n//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)',
            scriptIdPart: "STD;Greedy%1Strategy"
        }];
        void 0 !== t && t && t.exports && (t.exports = e)
    }).call(e, i(4)(t))
}, function(t, e, i) {
    "use strict";

    function n(t) {
        return t + "(" + new Date(1e3 * t).toUTCString() + ")"
    }

    function o(t) {
        var e, i, n, o;
        return t += "", e = t.slice(0), i = !1, n = e[e.length - 1], -1 === "DWM".indexOf(n) && "S" !== n && (i = !0, n = ""), o = parseInt(i ? e : e.length > 1 ? e.slice(0, e.length - 1) : 1), {
            resolution: n,
            interval: o
        }
    }
    var r, s = i(129),
        a = i(130),
        l = i(15),
        c = !1,
        h = null,
        d = 0,
        u = function(t, e) {
            this._session = new s.Session, this._session.init(t.timezone, t.session), this._symbolInfo = t, this._resolution = e, this._extrapolatedData = [], this._modelId = d++, this._valid = !!t.timezone && !!t.session, c && console.log('Created model "{0}", interval "{1}", session "{2}", tz "{3}"'.format(this._modelId, this._resolution, t.session, t.timezone))
        };
    u.prototype.uniqueId = function() {
        return this._modelId
    }, u.prototype.isValid = function() {
        return this._valid
    }, u.prototype._barBuilder = function() {
        if (!this._builderCache) {
            var t = o(this._resolution);
            this._builderCache = s.newBarBuilder(t.resolution, t.interval, this._session, this._session)
        }
        return this._builderCache
    }, u.prototype.distance = function(t, e) {
        var i, o, r, a, l;
        return isNumber(t) && isNumber(e) && this.isValid() ? (i = this._extrapolatedData.length > 0 ? this._extrapolatedData[0] : null, o = i && this._extrapolatedData[this._extrapolatedData.length - 1], 1e3 * t !== i && (this._extrapolatedData = [1e3 * t], i = null, o = null), (null === i || 1e3 * e > o) && (r = 500, a = s.extrapolateBarsFrontToTime(this._barBuilder(), o || 1e3 * t, 1e3 * e, r), this._extrapolatedData = this._extrapolatedData.concat(a)), o = this._extrapolatedData[this._extrapolatedData.length - 1], 1e3 * e > o ? {
            success: !1
        } : (l = this._extrapolatedData.indexOf(1e3 * e), -1 !== l ? (c && console.log('Model "{0}" "{1}", distance between "{2}" and "{3}" is "{4}"'.format(this._modelId, this._resolution, n(t), n(e), l)), {
            success: !0,
            result: l
        }) : {
            success: !1
        })) : {
            success: !1
        }
    }, u.prototype.projectTime = function(t, e) {
        var i, o, r, a;
        return isNumber(t) && isNumber(e) && this.isValid() ? (i = this._extrapolatedData.length > 0 ? this._extrapolatedData[0] : null, o = i && this._extrapolatedData[this._extrapolatedData.length - 1], 1e3 * t !== i && (this._extrapolatedData = [1e3 * t], i = null, o = null), (null === i || e >= this._extrapolatedData.length) && (r = s.extrapolateBarsFrontByCount(this._barBuilder(), o || 1e3 * t, e - this._extrapolatedData.length + 1), this._extrapolatedData = this._extrapolatedData.concat(r)), e < this._extrapolatedData.length ? (a = this._extrapolatedData[e] / 1e3, c && console.log('Model "{0}" "{1}", proj.time from "{2}" offset "{3}" is "{4}"'.format(this._modelId, this._resolution, n(t), e, n(a))), a) : t) : t
    }, r = function(t, e) {
        this._source = t, this._target = e, this._isSessionTheSame = t._symbolInfo.timezone === e._symbolInfo.timezone && t._symbolInfo.session === e._symbolInfo.session, this._isResolutionTheSame = t._resolution === e._resolution, this._shouldCorrectTradingDay = l.isDWM(t._resolution) && !this._isSessionTheSame, this._cache = {}, null === h && (h = new s.Session, h.init("UTC", "24x7"))
    }, r.prototype._sourceTargetBuilder = function() {
        var t, e;
        return this._sourceTargetBuilderCache || (t = o(this._target._resolution), e = this._isSessionTheSame ? this._target._session : h, this._sourceTargetBuilderCache = s.newBarBuilder(t.resolution, t.interval, this._target._session, e)), this._sourceTargetBuilderCache
    }, r.prototype.sourceTimeToTargetTime = function(t) {
        var e, i, o, r, s, l;
        return this._isSessionTheSame && this._isResolutionTheSame ? t : isNumber(t) && this._source.isValid() && this._target.isValid() ? (e = this._cache[t], e || (i = 1e3 * t, this._shouldCorrectTradingDay && (o = a.utc_to_cal(this._source._session.timezone, i), o = this._source._session.spec.correctTradingDay(o, this._source._session.timezone), r = new Date(o), a.set_hms(r, 0, 0, 0, 0), i = r.valueOf()), s = this._sourceTargetBuilder(), s.moveTo(i), l = s.indexOfBar(i), e = s.startOfBar(Math.max(0, l)) / 1e3, this._cache[t] = e), c && console.log('Model "{0}" "{1}" sourceTime "{2}" => model "{3}" "{4}" targetTime "{5}"'.format(this._source.uniqueId(), this._source._resolution, n(t), this._target.uniqueId(), this._target._resolution, n(e))), e) : t
    }, t.exports.SyncPoint = r, t.exports.SyncModel = u
}, function(t, e, i) {
    (function(e) {
        "use strict";
        var n = function() {
            function t(t, e, i, o) {
                return "" === t ? new c(60 * e, i) : "S" === t ? new c(e, i) : new h(i, o, e, n(t, i))
            }

            function n(t, e) {
                switch (t) {
                    case "D":
                        return new S(e);
                    case "W":
                        return new T(e);
                    case "M":
                        return new x(e)
                }
                return console.error("unknown dwm resolution: " + t), null
            }

            function o(t, e, i, n, o) {
                var r, s, a, l, c, h, d, u = (new V).init("UTC", t),
                    p = "" !== e;
                return p ? (s = i * H[e], r = H.D) : (s = 60 * i * 1e3, r = 60 * u.spec.findSession(0, 0)._length * 1e3), a = r / s, l = p ? 7 : 7 - u.spec.weekEndsCount(), c = l * a, c > n ? (h = n / a, o - h * H.D) : (d = n / c, o - d * H.W)
            }

            function r(t, e, i, n) {
                if ("number" != typeof i || "number" != typeof e || isNaN(i) || isNaN(e)) throw Error("Cannot extrapolate from " + e + " to " + i);
                return a(t, e, function(t, e) {
                    return e > i || n && t.length > n
                })
            }

            function s(t, e, i) {
                return a(t, e, function(t, e) {
                    return t.length >= i
                })
            }

            function a(t, e, i) {
                var n, o, r, s, a, l = e;
                for (t.moveTo(l), n = [], o = 0, r = 0; !i(n, l);) {
                    if (o > 5) throw console.trace(["0x10", new Date(e), "->", new Date(l)]), Error("Internal error 0x10 while extrapolating.");
                    if (s = t.indexOfBar(l), s === R) l = t.startOfBar(0);
                    else if (s === $) l = t.startOfBar($);
                    else {
                        if (a = t.startOfBar(s), a !== e) {
                            if (r && r === a) throw console.trace(["0x11", new Date(e), "->", new Date(a)]), Error("Internal error 0x11 while extrapolating.");
                            r = a, o = 0, n.push(a)
                        }
                        l = t.startOfBar(s + 1)
                    }
                    t.moveTo(l), o++
                }
                return n
            }

            function l(t) {
                if (isNaN(t)) return NaN;
                var e = this.indexOfBar(t);
                return e === $ && (this.moveTo(t), e = this.indexOfBar(t)), 0 > e ? NaN : this.startOfBar(e)
            }

            function c(t, e) {
                this.period = t, this.session = e, this.sessionStart = Number.MIN_VALUE, this.sessionEnd = Number.MIN_VALUE
            }

            function h(t, e, i, n) {
                this.period = i, this.sessionTgt = t, this.sessionSrc = e || t, this.builder = n, this.periodStart = -Number.MAX_VALUE, this.periodEnd = -Number.MAX_VALUE, this.periodLastBarStart = -Number.MAX_VALUE
            }

            function d(t, e, i) {
                var n = 6e4,
                    o = new Date(e.valueOf() + t * n),
                    r = i.offset_loc(e) / n,
                    s = i.offset_loc(o) / n,
                    a = r - s,
                    l = t + a;
                return l
            }

            function u(t, e, i) {
                var n = N.clone(i);
                return e.alignToSessionStart(n, t), N.cal_to_utc(t, n)
            }

            function p(t) {
                return t.firstDayOfWeek
            }

            function f(t, e) {
                var i = N.get_day_of_week(e) - p(t);
                return 0 > i ? i + 7 : i;
            }

            function _(t, e) {
                var i = e + p(t);
                return i > N.SATURDAY ? i - N.SATURDAY : i
            }

            function g(t, e) {
                var i = N.get_day_of_year(e) - 1,
                    n = f(t, e) - i % 7;
                return 0 === n ? C(i / 7) : (n >= 0 && (n -= 7), C((n + i) / 7))
            }

            function m(t, e, i) {
                var n, o = 0;
                for (n = e; i > n; ++n) o += t.isWeekEnd(_(t, n)) ? 1 : 0;
                return o
            }

            function v(t, e) {
                var i = new Date(Date.UTC(e, 11, 31, 23, 59)),
                    n = N.days_per_year(e) - y(t, i);
                return N.get_day_of_week(i) !== N.SUNDAY && N.get_day_of_week(i) !== N.SATURDAY || n--, n
            }

            function y(t, e) {
                var i, n, o = N.get_day_of_year(e) - 1,
                    r = f(t, e),
                    s = r - o % 7;
                return 0 > s && (s += 7), i = 0, 7 - s > o ? i += m(t, s, r) : (n = 0 === s ? 0 : m(t, s, 7), i += m(t, 0, r) + n), i + g(t, e) * t.weekEndsCount()
            }

            function w() {}

            function b(t) {
                this.sessionsSpec = t
            }

            function S(t) {
                this.session = t
            }

            function T(t) {
                this.session = t
            }

            function x(t) {
                this.session = t
            }

            function C(t) {
                return 0 | t
            }

            function P(t) {
                return t % 100 + 60 * C(t / 100)
            }

            function k(t, e, i) {
                this._dayOfWeek = t, this._start = e, this._length = i
            }

            function I(t, e) {
                return t.compareTo(e)
            }

            function E(t) {
                function e(t) {
                    var e, i, n, r = t.split(";");
                    return r.length > 2 ? (console.error("Only one `first day` specification expected @ session " + t), t) : 1 === r.length ? t : (e = 1, i = r[0].indexOf("-") >= 0, n = i ? NaN : parseInt(r[0]), isNaN(n) && (e = 0, n = parseInt(r[1])), n < N.SUNDAY || n > N.SATURDAY ? (console.error("Unexpected day index @ session: " + t + "; day index " + n), t) : (o.firstDayOfWeek = n, r[e]))
                }
                var i, n, o = this;
                t = t || "0000-0000", this.entries = [], this.firstDayOfWeek = N.MONDAY, "24x7" === t.toLowerCase() ? O.forEach(function(t) {
                    this.addSessionEntry(t, 0, 0)
                }, this) : (t = e(t), i = !1, n = {}, t.split("|").forEach(function(t) {
                    var e, o, r = t.split(":");
                    1 !== r.length && 2 !== r.length && console.error("bad session section: " + t), e = 1 === r.length, e && (i && console.error("duplicated default section: " + t), i = !0), o = e ? D : L(r[1]), o.forEach(function(t) {
                        e && n[t] || (n[t] = r[0])
                    }, this)
                }, this), O.forEach(function(e) {
                    var i = n[e];
                    i && i.split(",").forEach(function(i) {
                        var n, o, r = i.split("-");
                        2 !== r.length && (console.error("bad sessions spec: " + t), r = ["0000", "0000"]), n = parseInt(r[0]), o = parseInt(r[1]), this.addSessionEntry(e, P(n), P(o))
                    }, this)
                }, this)), this.entries.sort(I)
            }

            function L(t) {
                var e, i, n = [];
                for (e = 0; e < t.length; e++) i = t.charAt(e) - "0", -1 === n.indexOf(i) && n.push(i);
                return n
            }

            function V() {}

            function M(t, e, i) {
                var n, o, r, s, a = t.length;
                if (0 === a) return -1;
                for (n = 0, o = a - 1, r = C((n + o) / 2);;) {
                    if (s = i(t[r], e), 0 === s || s > 0) {
                        if (o = r - 1, n > o) return r
                    } else if (n = r + 1, n > o) return a - 1 > r ? r + 1 : -1;
                    r = C((n + o) / 2)
                }
            }

            function A(t, e) {
                var i = N.utc_to_cal(e.timezone, +t),
                    n = N.get_day_of_week(i),
                    o = N.get_minutes_from_midnight(i),
                    r = e.spec.findSession(n, o);
                return r.isOvernight() && o > r._start + r._length && n === r._dayOfWeek - 1 && (n++, o -= 1440), n === r._dayOfWeek && o >= r._start && o < r._start + r._length
            }
            var D, O, R = -1,
                $ = -2,
                B = -3,
                z = "undefined" != typeof window ? window : e,
                N = z.PineJsCalendar ? z.PineJsCalendar : i(130),
                H = {
                    S: 1e3,
                    D: 864e5,
                    W: 6048e5,
                    M: 2592e6
                };
            return c.prototype.alignTime = l, c.prototype.indexOfBar = function(t) {
                return t < this.sessionStart ? R : t >= this.sessionEnd ? $ : C(N.time_seconds_diff(t, this.sessionStart) / this.period)
            }, c.prototype.startOfBar = function(t) {
                if (t === $) return this.sessionEnd;
                if (0 > t) throw Error("Negative offset is not supported");
                return this.sessionStart + N.time_seconds(this.period * t)
            }, c.prototype.isLastBar = function(t, e) {
                var i = this.sessionStart + N.time_seconds(this.period * (t + 1) - 1);
                return e >= i
            }, c.prototype.moveTo = function(t) {
                var e = this.session.timezone,
                    i = N.utc_to_cal(e, t),
                    n = this.session.spec,
                    o = n.alignToSessionStart(i, this.session.timezone);
                this.sessionStart = N.cal_to_utc(e, i), this.sessionEnd = this.sessionStart + N.time_minutes(o)
            }, h.prototype.alignTime = l, h.prototype.tradingDayToSessionStart = function(t) {
                return this.moveTo(t), this.startOfBar(0)
            }, h.prototype.indexOfBar = function(t) {
                return t < this.periodStart ? R : t >= this.periodEnd ? $ : 0
            }, h.prototype.startOfBar = function(t) {
                if (t === $ || t > 0) return this.periodEnd;
                if (t === R) throw Error("PRE_SESSION is not supported");
                return this.periodStart
            }, h.prototype.isLastBar = function(t, e) {
                return e >= this.periodLastBarStart
            }, h.prototype.moveTo = function(t) {
                var e, i, n, o, r, s, a, l, c = N.utc_to_cal(this.sessionSrc.timezone, t);
                c = this.sessionSrc.spec.correctTradingDay(c, this.sessionSrc.timezone), e = this.sessionTgt.timezone, i = this.builder.indexOfPeriod(c, e), n = C(i / this.period) * this.period, o = N.get_year(c), r = this.sessionTgt.spec, s = this.builder.startOfPeriod(e, n, o), this.periodStart = u(e, r, s), a = n + this.period, l = this.builder.startOfPeriod(e, a, o), this.periodEnd = u(e, r, l)
            }, h.prototype.moveToPrevWorkDay = function(t, e) {
                for (; t.isWeekEnd(N.get_day_of_week(e));) N.add_date(e, -1)
            }, w.prototype.indexOfPeriod = function(t) {
                return N.get_day_of_year(t) - 1
            }, w.prototype.startOfPeriod = function(t, e, i) {
                var n = N.get_cal(t, i, N.JANUARY, 1),
                    o = N.add_days_considering_dst(t, n, e);
                return N.utc_to_cal(t, +o)
            }, b.prototype.uber = new w, b.prototype.indexOfPeriod = function(t) {
                var e = this.uber.indexOfPeriod(t);
                return e - y(this.sessionsSpec, t)
            }, b.prototype.startOfPeriod = function(t, e, i) {
                function n(t, e) {
                    this.weekEnds = m(t, e, 7), this.calendarDays = 7 - e, this.businessDays = this.calendarDays - this.weekEnds
                }

                function o(t, e) {
                    var i, n = 0;
                    for (i = t; 7 > i && (s.sessionsSpec.isWeekEnd(_(s.sessionsSpec, i)) || !(--e < 0)); ++i) n++;
                    return n
                }

                function r(t, e, i) {
                    var n, o, r, a, l, c, h = 0,
                        d = i % (7 - s.sessionsSpec.weekEndsCount());
                    for (n = 0, o = d - (0 === t ? 0 : e.businessDays); 7 > n && o > 0; ++n) r = s.sessionsSpec.isWeekEnd(_(s.sessionsSpec, n)), h += r ? 1 : 0, o -= r ? 0 : 1;
                    return a = e.weekEnds + h, l = C((i - e.businessDays) / (7 - s.sessionsSpec.weekEndsCount())), c = a + s.sessionsSpec.weekEndsCount() * l, i + c
                }
                var s, a, l, c, h, d = v(this.sessionsSpec, i);
                return e >= d && (i++, e = 0), s = this, a = new Date(Date.UTC(i, N.JANUARY, 1)), l = f(this.sessionsSpec, a), c = new n(this.sessionsSpec, l), h = e < c.businessDays ? o(l, e) : r(l, c, e), this.uber.startOfPeriod(t, h, i)
            }, S.prototype.indexOfPeriod = function(t) {
                return this.builder().indexOfPeriod(t)
            }, S.prototype.startOfPeriod = function(t, e, i) {
                return this.builder().startOfPeriod(t, e, i)
            }, S.prototype.builder = function() {
                return this._builder || (this._builder = this.session.spec.hasWeekEnds() ? new b(this.session.spec) : new w), this._builder
            }, T.prototype.indexOfPeriod = function(t, e) {
                var i = g(this.session.spec, t);
                return 0 === i && t < this.startOfPeriod(e, 0, N.get_year(t)) && (i = -1), i
            }, T.prototype.startOfPeriod = function(t, e, i) {
                var n, o, r = new Date(Date.UTC(i, N.JANUARY, 1)),
                    s = f(this.session.spec, r),
                    a = 0 === s ? 7 * e : 7 * (e + 1) - s,
                    l = N.get_days_per_year(r);
                return a > l ? this.startOfPeriod(t, 0, i + C(a / l)) : (n = N.get_cal(t, i, N.JANUARY, 1), o = N.add_days_considering_dst(t, n, a), N.utc_to_cal(t, +o))
            }, x.prototype.indexOfPeriod = function(t) {
                return N.get_month(t)
            }, x.prototype.startOfPeriod = function(t, e, i) {
                var n, o, r, s;
                return 0 > e ? (n = C((-e + 11) / 12), i -= n, e += 12 * n) : e > N.DECEMBER && (i++, e = N.JANUARY), o = N.get_cal_utc(i, e, 1), r = f(this.session.spec, o), r > 4 && (s = 7 - r, N.add_date(o, s)), o
            }, k.prototype.start = function() {
                return this._start < 0 ? this._start + N.minutesPerDay : this._start
            }, k.prototype.isOvernight = function() {
                return this._start < 0
            }, k.prototype.dayOfWeek = function() {
                return this._dayOfWeek
            }, k.prototype.length = function() {
                return this._length
            }, k.prototype.weight = function() {
                return this._dayOfWeek * N.minutesPerDay + this._start
            }, k.prototype.compareTo = function(t) {
                var e = this.weight(),
                    i = e + this._length,
                    n = t.weight();
                return n >= e && i > n ? 0 : e > n ? 1 : -1
            }, D = [N.MONDAY, N.TUESDAY, N.WEDNESDAY, N.THURSDAY, N.FRIDAY], O = [N.SUNDAY, N.MONDAY, N.TUESDAY, N.WEDNESDAY, N.THURSDAY, N.FRIDAY, N.SATURDAY], E.prototype.addSessionEntry = function(t, e, i) {
                e >= i && 0 !== e && (e -= N.minutesPerDay);
                var n = i === e ? N.minutesPerDay : i - e;
                this.entries.push(new k(t, e, n))
            }, E.prototype.isWeekEnd = function(t) {
                var e = M(this.entries, new k(t, 0, 0), function(t, e) {
                    return t.dayOfWeek() - e.dayOfWeek()
                });
                return 0 > e || this.entries[e].dayOfWeek() !== t
            }, E.prototype.hasWeekEnds = function() {
                return this.weekEndsCount() > 0
            }, E.prototype.weekEndsCount = function() {
                if (void 0 === this._weekEndsCount) {
                    var t = [];
                    this.entries.forEach(function(e) {
                        t[e.dayOfWeek()] = 1
                    }, this), this._weekEndsCount = 7 - t.reduce(function(t, e) {
                            return t + (e || 0)
                        }, 0)
                }
                return this._weekEndsCount
            }, E.prototype.indexOfSession = function(t, e) {
                var i = M(this.entries, new k(t, e, 0), I);
                return -1 === i ? 0 : i
            }, E.prototype.findSession = function(t, e) {
                return this.entries[this.indexOfSession(t, e)]
            }, E.prototype.correctTradingDay = function(t, e) {
                var i = N.get_day_of_week(t),
                    n = 60 * N.get_hours(t) + N.get_minutes(t),
                    o = this.findSession(i, n),
                    r = o.dayOfWeek(),
                    s = (r - i + 7) % 7;
                return 0 !== s ? N.add_days_considering_dst(e, t, s) : t
            }, E.prototype.alignToSessionStart = function(t, e) {
                var i, n = N.get_day_of_week(t),
                    o = N.get_minutes_from_midnight(t),
                    r = this.findSession(n, o),
                    s = r.dayOfWeek(),
                    a = r.isOvernight(),
                    l = (s - n + 7) % 7 - (a ? 1 : 0);
                return 0 !== l && N.add_date(t, l), i = r.start(), N.set_hms(t, C(i / 60), i % 60, 0, 0), d(r.length(), t, e)
            }, V.prototype.init = function(t, e) {
                return this.timezone = "string" == typeof t ? N.get_timezone(t) : t, this.spec = new E(e), this
            }, {
                PRE_SESSION: R,
                POST_SESSION: $,
                LASTBAR_SESSION: B,
                newBarBuilder: t,
                Session: V,
                alignPeriodsBack: o,
                extrapolateBarsFrontByCount: s,
                extrapolateBarsFrontToTime: r,
                lower_bound: M,
                isTradingNow: A,
                numberOfFullWeeks: g,
                numberOfWeekEndsSinceYearStart: y,
                BusinessDaysBuilder: b,
                alignExchangeTimeToSessionStartAndReturnUTC: u
            }
        }();
        t.exports = n
    }).call(e, function() {
        return this
    }())
}, function(t, e, i) {
    "use strict";

    function n(t) {
        var e, i, n, o, r, s;
        if (this._name = t, e = d[t], e || ("UTC" !== t && "Etc/UTC" !== t && TradingView.logError("unknown timezone: " + t), e = {
                time: [],
                offset: []
            }, this._invalid = !0), e.time.length !== e.offset.length && (TradingView.logError("timezone transition table doesn't match offset table"), e = {
                time: [],
                offset: []
            }, this._invalid = !0), !e.time_utc) {
            for (i = e.time, n = e.offset, o = i.length, r = Array(o), s = 0; o > s; s++) i[s] *= 1e3, n[s] *= 1e3, r[s] = i[s] - n[s];
            e.time_utc = r
        }
        this.tz = e
    }

    function o(t, e) {
        var i, n, o, s = t.length;
        if (0 === s) return -1;
        if (isNaN(e)) throw Error("Key is NaN");
        for (i = 0, n = s - 1, o = r((i + n) / 2);;) {
            if (t[o] > e) {
                if (n = o - 1, i > n) return o
            } else if (i = o + 1, i > n) return s - 1 > o ? o + 1 : -1;
            o = r((i + n) / 2)
        }
    }
    var r, s, a, l, c, h, d = i(131);
    n.prototype.offset_utc = function(t) {
        return n._offset(this.tz.time_utc, this.tz.offset, t)
    }, n.prototype.offset_loc = function(t) {
        return n._offset(this.tz.time, this.tz.offset, t)
    }, n.prototype.is_valid = function() {
        return !this._invalid
    }, n._offset = function(t, e, i) {
        var n = o(t, i);
        return -1 === n ? 0 : e[n]
    }, r = function(t) {
        return 0 | t
    }, s = function(t) {
        return 60 * t * 1e3
    }, a = function(t) {
        return 1e3 * t
    }, l = function(t, e) {
        return r((r(t / 1e3) - r(e / 1e3)) / 60)
    }, c = function(t, e) {
        return r(r(t / 1e3) - r(e / 1e3))
    }, h = {
        SUNDAY: 1,
        MONDAY: 2,
        TUESDAY: 3,
        WEDNESDAY: 4,
        THURSDAY: 5,
        FRIDAY: 6,
        SATURDAY: 7,
        JANUARY: 0,
        DECEMBER: 11,
        YEAR: 1,
        MONTH: 2,
        WEEK_OF_YEAR: 3,
        DAY_OF_MONTH: 5,
        DAY_OF_YEAR: 6,
        DAY_OF_WEEK: 7,
        HOUR_OF_DAY: 11,
        MINUTE: 12,
        SECOND: 13,
        minutesPerDay: 1440,
        secondsPerDay: s(1440),
        get_year: function(t) {
            return t.getUTCFullYear()
        },
        get_month: function(t) {
            return t.getUTCMonth()
        },
        get_hours: function(t) {
            return t.getUTCHours()
        },
        get_minutes: function(t) {
            return t.getUTCMinutes()
        },
        get_seconds: function(t) {
            return t.getUTCSeconds()
        },
        get_day_of_month: function(t) {
            return t.getUTCDate()
        },
        get_day_of_week: function(t) {
            return t.getUTCDay() + 1
        },
        get_day_of_year: function(t) {
            var e = Date.UTC(t.getUTCFullYear(), 0, 1, 0, 0, 0, 0);
            return r((t.getTime() - e) / h.secondsPerDay) + 1
        },
        get_week_of_year: function(t) {
            var e = Date.UTC(t.getUTCFullYear(), 0, 1, 0, 0, 0, 0),
                i = h.clone(t);
            return h.set_hms(i, 0, 0, 0, 0), i.setUTCDate(i.getUTCDate() + 4 - (i.getUTCDay() || 7)), r(((i.getTime() - e) / h.secondsPerDay + 1) / 7)
        },
        get_minutes_from_midnight: function(t) {
            return 60 * h.get_hours(t) + h.get_minutes(t)
        },
        set_hms: function(t, e, i, n, o) {
            t.setUTCHours(e), t.setUTCMinutes(i), t.setUTCSeconds(n), t.setUTCMilliseconds(o)
        },
        add_days_considering_dst: function(t, e, i) {
            var n, o = t.offset_utc(e),
                r = this.clone(e);
            return this.add_date(r, i), n = t.offset_utc(r), r.setTime(r.getTime() + o - n), r
        },
        add_date: function(t, e) {
            t.setTime(t.getTime() + e * h.secondsPerDay)
        },
        clone: function(t) {
            return new Date(t.getTime())
        },
        get_days_per_year: function(t) {
            var e = t.getUTCFullYear();
            return this.days_per_year(e)
        },
        days_per_year: function(t) {
            return t % 4 !== 0 || t % 100 === 0 && t % 400 !== 0 ? 365 : 366
        },
        get_part: function(t, e) {
            switch (e) {
                case h.YEAR:
                    return h.get_year(t);
                case h.MONTH:
                    return h.get_month(t);
                case h.DAY_OF_MONTH:
                    return h.get_day_of_month(t);
                case h.WEEK_OF_YEAR:
                    return h.get_week_of_year(t);
                case h.DAY_OF_WEEK:
                    return h.get_day_of_week(t);
                case h.HOUR_OF_DAY:
                    return h.get_hours(t);
                case h.MINUTE:
                    return h.get_minutes(t);
                case h.DAY_OF_YEAR:
                    return h.get_day_of_year(t);
                case h.SECOND:
                    return h.get_seconds(t);
                default:
                    return t.getTime()
            }
        },
        time_minutes: s,
        time_seconds: a,
        time_minutes_diff: l,
        time_seconds_diff: c,
        utc_to_cal: function(t, e) {
            var i = t.offset_utc(e);
            return new Date(e + i)
        },
        get_cal: function(t, e, i, n) {
            var o = new Date(Date.UTC(e, i, n)),
                r = t.offset_utc(+o);
            return new Date(o.valueOf() - r)
        },
        get_cal_utc: function(t, e, i) {
            return new Date(Date.UTC(t, e, i))
        },
        cal_to_utc: function(t, e) {
            var i = e.getTime(),
                n = t.offset_loc(i);
            return i - n
        },
        get_timezone: function(t) {
            return new n(t)
        },
        shift_day: function(t, e) {
            var i = t - 1;
            return i += e, i > 6 ? i %= 7 : 0 > i && (i = (7 + i % 7) % 7), i + 1
        }
    }, t.exports = h
}, function(t, e) {
    ! function() {
        var e = {
            "America/New_York": {
                time: [-2717668562, -1633298400, -1615154400, -1601848800, -1583704800, -1570399200, -1551650400, -1536530400, -1523224800, -1504476e3, -1491775200, -1473026400, -1459720800, -1441576800, -1428271200, -1410127200, -1396821600, -1378677600, -1365372e3, -1347228e3, -1333922400, -1315173600, -1301868e3, -1283724e3, -1270418400, -1252274400, -1238968800, -1220824800, -1207519200, -1189375200, -1176069600, -1157320800, -114462e4, -1125871200, -1112565600, -1094421600, -1081116e3, -1062972e3, -1049666400, -1031522400, -1018216800, -1000072800, -986767200, -968018400, -955317600, -936568800, -923263200, -905119200, -891813600, -880236e3, -76941e4, -765410400, -747266400, -733960800, -715816800, -702511200, -684367200, -671061600, -652917600, -639612e3, -620863200, -608162400, -589413600, -576108e3, -557964e3, -544658400, -526514400, -513208800, -495064800, -481759200, -463615200, -447285600, -431560800, -415836e3, -400111200, -384386400, -368661600, -352936800, -337212e3, -321487200, -305762400, -289432800, -273708e3, -257983200, -242258400, -226533600, -210808800, -195084e3, -179359200, -163634400, -147909600, -13158e4, -11646e4, -100130400, -84405600, -68680800, -52956e3, -37231200, -21506400, -5781600, 9943200, 25668e3, 41392800, 57722400, 73447200, 89172e3, 104896800, 120621600, 126669600, 152071200, 162352800, 183520800, 199245600, 215575200, 230695200, 247024800, 262749600, 278474400, 294199200, 309924e3, 325648800, 341373600, 357098400, 372823200, 388548e3, 404877600, 419997600, 436327200, 452052e3, 467776800, 483501600, 499226400, 514951200, 530676e3, 544586400, 562125600, 576036e3, 59418e4, 607485600, 625629600, 638935200, 657079200, 670989600, 688528800, 702439200, 719978400, 733888800, 752032800, 765338400, 783482400, 796788e3, 814932e3, 828842400, 846381600, 860292e3, 877831200, 891741600, 909280800, 923191200, 941335200, 954640800, 972784800, 986090400, 1004234400, 1018144800, 1035684e3, 1049594400, 1067133600, 1081044e3, 1099188e3, 1112493600, 1130637600, 1143943200, 1162087200, 1173578400, 1194141600, 1205028e3, 1225591200, 1236477600, 1257040800, 1268532e3, 1289095200, 1299981600, 1320544800, 1331431200, 1351994400, 1362880800, 1383444e3, 1394330400, 1414893600, 142578e4, 1446343200, 1457834400, 1478397600, 1489284e3, 1509847200, 1520733600, 1541296800, 1552183200, 1572746400, 1583632800, 1604196e3, 1615687200, 1636250400, 1647136800, 16677e5, 1678586400, 1699149600, 1710036e3, 1730599200, 1741485600, 1762048800, 1772935200, 1793498400, 1804989600, 1825552800, 1836439200, 1857002400, 1867888800, 1888452e3, 1899338400, 1919901600, 1930788e3],
                offset: [-17762, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3]
            },
            "America/Los_Angeles": {
                time: [-2717668378, -1633298400, -1615154400, -1601848800, -1583704800, -880236e3, -769420800, -765410400, -687996e3, -662680800, -620863200, -608162400, -589413600, -576108e3, -557964e3, -544658400, -526514400, -513208800, -495064800, -481759200, -463615200, -450309600, -431560800, -418255200, -400111200, -386805600, -368661600, -355356e3, -337212e3, -323906400, -305762400, -292456800, -273708e3, -261007200, -242258400, -226533600, -210808800, -195084e3, -179359200, -163634400, -147909600, -13158e4, -11646e4, -100130400, -84405600, -68680800, -52956e3, -37231200, -21506400, -5781600, 9943200, 25668e3, 41392800, 57722400, 73447200, 89172e3, 104896800, 120621600, 126669600, 152071200, 162352800, 183520800, 199245600, 215575200, 230695200, 247024800, 262749600, 278474400, 294199200, 309924e3, 325648800, 341373600, 357098400, 372823200, 388548e3, 404877600, 419997600, 436327200, 452052e3, 467776800, 483501600, 499226400, 514951200, 530676e3, 544586400, 562125600, 576036e3, 59418e4, 607485600, 625629600, 638935200, 657079200, 670989600, 688528800, 702439200, 719978400, 733888800, 752032800, 765338400, 783482400, 796788e3, 814932e3, 828842400, 846381600, 860292e3, 877831200, 891741600, 909280800, 923191200, 941335200, 954640800, 972784800, 986090400, 1004234400, 1018144800, 1035684e3, 1049594400, 1067133600, 1081044e3, 1099188e3, 1112493600, 1130637600, 1143943200, 1162087200, 1173578400, 1194141600, 1205028e3, 1225591200, 1236477600, 1257040800, 1268532e3, 1289095200, 1299981600, 1320544800, 1331431200, 1351994400, 1362880800, 1383444e3, 1394330400, 1414893600, 142578e4, 1446343200, 1457834400, 1478397600, 1489284e3, 1509847200, 1520733600, 1541296800, 1552183200, 1572746400, 1583632800, 1604196e3, 1615687200, 1636250400, 1647136800, 16677e5, 1678586400, 1699149600, 1710036e3, 1730599200, 1741485600, 1762048800, 1772935200, 1793498400, 1804989600, 1825552800, 1836439200, 1857002400, 1867888800, 1888452e3, 1899338400, 1919901600, 1930788e3],
                offset: [-28378, -28800, -25200, -28800, -25200, -28800, -25200, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800]
            },
            "America/Chicago": {
                time: [-2717668236, -1633298400, -1615154400, -1601848800, -1583704800, -1563746400, -1551650400, -1538949600, -1520200800, -1504476e3, -1491775200, -1473026400, -1459720800, -1441576800, -1428271200, -1410127200, -1396821600, -1378677600, -1365372e3, -1347228e3, -1333922400, -1315173600, -1301868e3, -1283724e3, -1270418400, -1252274400, -1238968800, -1220824800, -1207519200, -1189375200, -1176069600, -1157320800, -114462e4, -1125871200, -1112565600, -1094421600, -1081116e3, -1067810400, -1045432800, -1031522400, -1018216800, -1000072800, -986767200, -968018400, -955317600, -936568800, -923263200, -905119200, -891813600, -880236e3, -769413600, -765410400, -747266400, -733960800, -715816800, -702511200, -684367200, -671061600, -652917600, -639612e3, -620863200, -608162400, -589413600, -576108e3, -557964e3, -544658400, -526514400, -513208800, -495064800, -481759200, -463615200, -447285600, -431560800, -415836e3, -400111200, -384386400, -368661600, -352936800, -337212e3, -321487200, -305762400, -289432800, -273708e3, -257983200, -242258400, -226533600, -210808800, -195084e3, -179359200, -163634400, -147909600, -13158e4, -11646e4, -100130400, -84405600, -68680800, -52956e3, -37231200, -21506400, -5781600, 9943200, 25668e3, 41392800, 57722400, 73447200, 89172e3, 104896800, 120621600, 126669600, 152071200, 162352800, 183520800, 199245600, 215575200, 230695200, 247024800, 262749600, 278474400, 294199200, 309924e3, 325648800, 341373600, 357098400, 372823200, 388548e3, 404877600, 419997600, 436327200, 452052e3, 467776800, 483501600, 499226400, 514951200, 530676e3, 544586400, 562125600, 576036e3, 59418e4, 607485600, 625629600, 638935200, 657079200, 670989600, 688528800, 702439200, 719978400, 733888800, 752032800, 765338400, 783482400, 796788e3, 814932e3, 828842400, 846381600, 860292e3, 877831200, 891741600, 909280800, 923191200, 941335200, 954640800, 972784800, 986090400, 1004234400, 1018144800, 1035684e3, 1049594400, 1067133600, 1081044e3, 1099188e3, 1112493600, 1130637600, 1143943200, 1162087200, 1173578400, 1194141600, 1205028e3, 1225591200, 1236477600, 1257040800, 1268532e3, 1289095200, 1299981600, 1320544800, 1331431200, 1351994400, 1362880800, 1383444e3, 1394330400, 1414893600, 142578e4, 1446343200, 1457834400, 1478397600, 1489284e3, 1509847200, 1520733600, 1541296800, 1552183200, 1572746400, 1583632800, 1604196e3, 1615687200, 1636250400, 1647136800, 16677e5, 1678586400, 1699149600, 1710036e3, 1730599200, 1741485600, 1762048800, 1772935200, 1793498400, 1804989600, 1825552800, 1836439200, 1857002400, 1867888800, 1888452e3, 1899338400, 1919901600, 1930788e3],
                offset: [-21036, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600]
            },
            "America/Phoenix": {
                time: [-2717670498, -1633298400, -1615154400, -1601848800, -1583704800, -880236e3, -820540740, -812678340, -796867140, -84405600, -68680800, 1924966800],
                offset: [-26898, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200]
            },
            "America/Toronto": {
                time: [-2366755200, -1632088800, -1615154400, -1601771400, -1583712e3, -1567375200, -1554681600, -1534716e3, -1524088800, -1503266400, -149238e4, -1471816800, -1460930400, -1440972e3, -1428876e3, -1409522400, -1397426400, -1378072800, -1365976800, -1346623200, -1333922400, -1315173600, -1301868e3, -1283724e3, -1270418400, -1252274400, -1238968800, -1220824800, -1207519200, -1188770400, -1176069600, -1157320800, -1144015200, -1125871200, -1112565600, -1094421600, -1081116e3, -1062972e3, -1049666400, -1031522400, -1018216800, -1000072800, -986767200, -968018400, -955317600, -936568800, -880232400, -76941e4, -765410400, -747266400, -733960800, -715824e3, -702518400, -684374400, -671068800, -652924800, -634176e3, -620863200, -602719200, -589413600, -576108e3, -557964e3, -544658400, -526514400, -513208800, -495064800, -481759200, -463615200, -450309600, -431560800, -418255200, -400111200, -384386400, -368661600, -352936800, -337212e3, -321487200, -305762400, -289432800, -273708e3, -257983200, -242258400, -226533600, -210808800, -195084e3, -179359200, -163634400, -147909600, -13158e4, -11646e4, -100130400, -84405600, -68680800, -52956e3, -37231200, -21506400, -5781600, 9943200, 25668e3, 41392800, 57722400, 73447200, 89172e3, 104896800, 120621600, 136346400, 152071200, 167796e3, 183520800, 199245600, 215575200, 230695200, 247024800, 262749600, 278474400, 294199200, 309924e3, 325648800, 341373600, 357098400, 372823200, 388548e3, 404877600, 419997600, 436327200, 452052e3, 467776800, 483501600, 499226400, 514951200, 530676e3, 544586400, 562125600, 576036e3, 59418e4, 607485600, 625629600, 638935200, 657079200, 670989600, 688528800, 702439200, 719978400, 733888800, 752032800, 765338400, 783482400, 796788e3, 814932e3, 828842400, 846381600, 860292e3, 877831200, 891741600, 909280800, 923191200, 941335200, 954640800, 972784800, 986090400, 1004234400, 1018144800, 1035684e3, 1049594400, 1067133600, 1081044e3, 1099188e3, 1112493600, 1130637600, 1143943200, 1162087200, 1173578400, 1194141600, 1205028e3, 1225591200, 1236477600, 1257040800, 1268532e3, 1289095200, 1299981600, 1320544800, 1331431200, 1351994400, 1362880800, 1383444e3, 1394330400, 1414893600, 142578e4, 1446343200, 1457834400, 1478397600, 1489284e3, 1509847200, 1520733600, 1541296800, 1552183200, 1572746400, 1583632800, 1604196e3, 1615687200, 1636250400, 1647136800, 16677e5, 1678586400, 1699149600, 1710036e3, 1730599200, 1741485600, 1762048800, 1772935200, 1793498400, 1804989600, 1825552800, 1836439200, 1857002400, 1867888800, 1888452e3, 1899338400, 1919901600, 1930788e3],
                offset: [-19052, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -14400, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3, -14400, -18e3]
            },
            "America/Vancouver": {
                time: [-2713910400, -1632088800, -1615154400, -880236e3, -769420800, -765410400, -747266400, -732751200, -715816800, -702511200, -684367200, -671061600, -652917600, -639612e3, -620863200, -608162400, -589413600, -576108e3, -557964e3, -544658400, -526514400, -513208800, -495064800, -481759200, -463615200, -450309600, -431560800, -418255200, -400111200, -386805600, -368661600, -355356e3, -337212e3, -323906400, -305762400, -292456800, -273708e3, -261007200, -242258400, -226533600, -210808800, -195084e3, -179359200, -163634400, -147909600, -13158e4, -11646e4, -100130400, -84405600, -68680800, -52956e3, -37231200, -21506400, -5781600, 9943200, 25668e3, 41392800, 57722400, 73447200, 89172e3, 104896800, 120621600, 136346400, 152071200, 167796e3, 183520800, 199245600, 215575200, 230695200, 247024800, 262749600, 278474400, 294199200, 309924e3, 325648800, 341373600, 357098400, 372823200, 388548e3, 404877600, 419997600, 436327200, 452052e3, 467776800, 483501600, 499226400, 514951200, 530676e3, 544586400, 562125600, 576036e3, 59418e4, 607485600, 625629600, 638935200, 657079200, 670989600, 688528800, 702439200, 719978400, 733888800, 752032800, 765338400, 783482400, 796788e3, 814932e3, 828842400, 846381600, 860292e3, 877831200, 891741600, 909280800, 923191200, 941335200, 954640800, 972784800, 986090400, 1004234400, 1018144800, 1035684e3, 1049594400, 1067133600, 1081044e3, 1099188e3, 1112493600, 1130637600, 1143943200, 1162087200, 1173578400, 1194141600, 1205028e3, 1225591200, 1236477600, 1257040800, 1268532e3, 1289095200, 1299981600, 1320544800, 1331431200, 1351994400, 1362880800, 1383444e3, 1394330400, 1414893600, 142578e4, 1446343200, 1457834400, 1478397600, 1489284e3, 1509847200, 1520733600, 1541296800, 1552183200, 1572746400, 1583632800, 1604196e3, 1615687200, 1636250400, 1647136800, 16677e5, 1678586400, 1699149600, 1710036e3, 1730599200, 1741485600, 1762048800, 1772935200, 1793498400, 1804989600, 1825552800, 1836439200, 1857002400, 1867888800, 1888452e3, 1899338400, 1919901600, 1930788e3],
                offset: [-29548, -28800, -25200, -28800, -25200, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800, -25200, -28800]
            },
            "America/Argentina/Buenos_Aires": {
                time: [-2372112e3, -1567468800, -1233446400, -1222992e3, -1205971200, -1194048e3, -117288e4, -1162512e3, -1141344e3, -1130976e3, -1109808e3, -109944e4, -1078272e3, -1067817600, -1046649600, -1036281600, -1015113600, -1004745600, -983577600, -973209600, -952041600, -941587200, -931046400, -900892800, -890352e3, -83376e4, -82728e4, -752284800, -733795200, -197337600, -190857600, -184204800, -164505600, -152668800, -132969600, -121132800, -101433600, -86832e3, -71107200, -54777600, -39052800, -23328e3, -7603200, 128131200, 136598400, 596937600, 605059200, 624412800, 636508800, 656467200, 667958400, 687916800, 699408e3, 719366400, 731462400, 938912400, 952041600, 1198972800, 1205625600, 1224374400, 1237075200, 1924981200],
                offset: [-14028, -15408, -14400, -10800, -14400, -10800, -14400, -10800, -14400, -10800, -14400, -10800, -14400, -10800, -14400, -10800, -14400, -10800, -14400, -10800, -14400, -10800, -14400, -10800, -14400, -10800, -14400, -10800, -14400, -10800, -14400, -10800, -14400, -10800, -14400, -10800, -14400, -10800, -14400, -10800, -14400, -10800, -14400, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -10800, -10800, -7200, -10800, -7200, -10800]
            },
            "America/El_Salvador": {
                time: [-1546300800, 546998400, 559699200, 578448e3, 591148800, 1924970400],
                offset: [-21408, -21600, -18e3, -21600, -18e3, -21600]
            },
            "America/Sao_Paulo": {
                time: [-1767225600, -1206968400, -1191369600, -1175385600, -1159833600, -633830400, -622076400, -602294400, -59184e4, -570758400, -560217600, -539136e3, -53136e4, -195436800, -184204800, -155174400, -150076800, -128908800, -121132800, -99964800, -89596800, -68428800, -57974400, 499737600, 511228800, 530582400, 540259200, 562118400, 571190400, 592963200, 602035200, 624412800, 634694400, 656467200, 666748800, 687916800, 697593600, 719971200, 728438400, 750816e3, 761702400, 782265600, 793152e3, 813715200, 823996800, 84456e4, 856051200, 876096e3, 888710400, 908064e3, 919555200, 938908800, 951609600, 970963200, 982454400, 1003017600, 1013904e3, 1036281600, 1045353600, 1066521600, 1076803200, 1099353600, 1108857600, 1129420800, 1140307200, 1162684800, 1172361600, 119232e4, 1203206400, 1224374400, 1234656e3, 1255824e3, 1266710400, 1287273600, 129816e4, 1318723200, 1330214400, 1350777600, 1361059200, 1382227200, 1392508800, 1413676800, 1424563200, 1445126400, 1456012800, 1476576e3, 1487462400, 1508025600, 1518912e3, 154008e4, 1550361600, 1571529600, 1581811200, 1602979200, 1613865600, 1634428800, 1645315200, 1665878400, 1677369600, 1697328e3, 1708214400, 1729382400, 1739664e3, 1760832e3, 1771718400, 1792281600, 1803168e3, 1823731200, 1834617600, 1855180800, 1866067200, 1887235200, 1897516800, 1918684800, 1928966400],
                offset: [-11188, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200, -10800, -7200]
            },
            "America/Bogota": {
                time: [-2707689600, -1739059200, 704851200, 733881600, 1924974e3],
                offset: [-17776, -17776, -18e3, -14400, -18e3]
            },
            "Europe/Moscow": {
                time: [-2840140800, -1688256e3, -165681e4, -1641340800, -1627956e3, -1618700400, -1596416400, -1593813600, -1589846400, -1542416400, -1539478800, -1525305600, -1522713600, -1491177600, -1247529600, 354931200, 370742400, 386467200, 402278400, 418003200, 433814400, 449625600, 465361200, 481082400, 496810800, 512532e3, 528260400, 543981600, 55971e4, 575431200, 591159600, 606880800, 622609200, 638330400, 654663600, 670388400, 686113200, 695786400, 701823600, 717548400, 733284e3, 749012400, 764733600, 780462e3, 796183200, 811911600, 828237600, 846385200, 859687200, 877834800, 891136800, 909284400, 922586400, 941338800, 954036e3, 972788400, 985485600, 1004238e3, 101754e4, 1035687600, 1048989600, 1067137200, 1080439200, 1099191600, 1111888800, 1130641200, 1143338400, 1162090800, 1174788e3, 1193540400, 1206842400, 122499e4, 1238292e3, 1256439600, 1269741600, 1288494e3, 1301191200, 1414288800, 1925002800],
                offset: [9017, 9017, 9079, 12679, 9079, 16279, 12679, 16279, 14400, 10800, 14400, 18e3, 14400, 10800, 7200, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 10800, 7200, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800, 14400, 10800]
            },
            "Europe/Athens": {
                time: [-2344636800, -1686095940, -1182988800, -1178150400, -906854400, -904867200, -85725e4, -844473600, -828230400, -812419200, -552355200, -541641600, 166492800, 186195600, 198036e3, 213764400, 228880800, 244090800, 260330400, 275457600, 291805200, 307418400, 323395200, 338947200, 354682800, 370411200, 386132400, 401860800, 417582e3, 433310400, 449031600, 465364800, 481086e3, 496814400, 512535600, 528264e3, 543985200, 559713600, 575434800, 591163200, 606884400, 622612800, 638334e3, 654667200, 670388400, 686116800, 701838e3, 717566400, 733287600, 749016e3, 764737200, 780465600, 796186800, 811915200, 828241200, 846388800, 859690800, 877838400, 891140400, 909288e3, 92259e4, 941342400, 954039600, 972792e3, 985489200, 1004241600, 1017543600, 1035691200, 1048993200, 1067140800, 1080442800, 1099195200, 1111892400, 1130644800, 1143342e3, 1162094400, 1174791600, 1193544e3, 1206846e3, 1224993600, 1238295600, 1256443200, 1269745200, 1288497600, 1301194800, 1319947200, 1332644400, 1351396800, 1364698800, 1382846400, 1396148400, 1414296e3, 1427598e3, 1445745600, 1459047600, 14778e5, 1490497200, 1509249600, 1521946800, 1540699200, 1554001200, 1572148800, 1585450800, 1603598400, 1616900400, 1635652800, 164835e4, 1667102400, 1679799600, 1698552e3, 1711854e3, 1730001600, 1743303600, 1761451200, 1774753200, 1792900800, 1806202800, 1824955200, 1837652400, 1856404800, 1869102e3, 1887854400, 1901156400, 1919304e3, 1932606e3],
                offset: [5692, 5692, 7200, 10800, 7200, 10800, 7200, 3600, 7200, 3600, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200, 10800, 7200]
            },
            "Europe/Berlin": {
                time: [-2422051200, -1693702800, -1680476400, -1663452e3, -1650142800, -1632002400, -1618693200, -938901600, -85725e4, -844552800, -828219600, -812498400, -79677e4, -781048800, -776552400, -765925200, -761173200, -748476e3, -733266e3, -717627600, -714603600, -71037e4, -701902800, -684972e3, -670453200, -654127200, -639003600, 323834400, 338958e3, 354679200, 370407600, 386128800, 401857200, 417578400, 433306800, 449028e3, 465361200, 481082400, 496810800, 512532e3, 528260400, 543981600, 55971e4, 575431200, 591159600, 606880800, 622609200, 638330400, 654663600, 670384800, 686113200, 701834400, 717562800, 733284e3, 749012400, 764733600, 780462e3, 796183200, 811911600, 828237600, 846385200, 859687200, 877834800, 891136800, 909284400, 922586400, 941338800, 954036e3, 972788400, 985485600, 1004238e3, 101754e4, 1035687600, 1048989600, 1067137200, 1080439200, 1099191600, 1111888800, 1130641200, 1143338400, 1162090800, 1174788e3, 1193540400, 1206842400, 122499e4, 1238292e3, 1256439600, 1269741600, 1288494e3, 1301191200, 1319943600, 1332640800, 1351393200, 1364695200, 1382842800, 1396144800, 1414292400, 1427594400, 1445742e3, 1459044e3, 1477796400, 1490493600, 1509246e3, 1521943200, 1540695600, 1553997600, 1572145200, 1585447200, 1603594800, 1616896800, 1635649200, 1648346400, 1667098800, 1679796e3, 1698548400, 1711850400, 1729998e3, 17433e5, 1761447600, 1774749600, 1792897200, 1806199200, 1824951600, 1837648800, 1856401200, 1869098400, 1887850800, 1901152800, 1919300400, 1932602400],
                offset: [3208, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 10800, 7200, 3600, 7200, 3600, 7200, 10800, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600]
            },
            "Europe/London": {
                time: [-3852662400, -1691964e3, -1680469200, -1664143200, -1650142800, -1633903200, -1617483600, -1601848800, -1586034e3, -1570399200, -1552165200, -1538344800, -152253e4, -15075e5, -1490562e3, -1473631200, -1460926800, -1442786400, -1428872400, -1410732e3, -1396213200, -1379282400, -1364763600, -1348437600, -1333314e3, -1315778400, -1301259600, -1284328800, -126981e4, -1253484e3, -1238360400, -1221429600, -1206910800, -118998e4, -1175461200, -1159135200, -1143406800, -1126476e3, -1111957200, -1095631200, -1080507600, -1063576800, -1049058e3, -1032127200, -1017608400, -1001282400, -986158800, -969228e3, -950475600, -942012e3, -904514400, -896043600, -875484e3, -864594e3, -844034400, -832539600, -812584800, -798066e3, -781048800, -772059600, -764802e3, -748476e3, -733352400, -719445600, -717026400, -706741200, -699483600, -687996e3, -668034e3, -654732e3, -636584400, -622072800, -605739600, -590623200, -57429e4, -558568800, -542235600, -527119200, -512600400, -496274400, -481150800, -46422e4, -449701200, -432165600, -417646800, -401320800, -386197200, -369266400, -354747600, -337816800, -323298e3, -306972e3, -291848400, -276732e3, -257979600, -245282400, -22653e4, -213228e3, -195080400, -182383200, -163630800, -150933600, -132181200, -119484e3, -100731600, -88034400, -68677200, -59004e3, 57726e3, 69818400, 89175600, 101268e3, 120625200, 132717600, 152074800, 164167200, 183524400, 196221600, 214974e3, 227671200, 246423600, 259120800, 278478e3, 290570400, 309927600, 32202e4, 341377200, 354675600, 372823200, 386125200, 404272800, 417574800, 435722400, 449024400, 467776800, 481078800, 499226400, 512528400, 530676e3, 543978e3, 562125600, 575427600, 593575200, 606877200, 625629600, 638326800, 657079200, 670381200, 688528800, 701830800, 719978400, 733280400, 751428e3, 76473e4, 782877600, 796179600, 814327200, 828234e3, 846381600, 859683600, 877831200, 891133200, 909280800, 922582800, 941335200, 954032400, 972784800, 985482e3, 1004234400, 1017536400, 1035684e3, 1048986e3, 1067133600, 1080435600, 1099188e3, 1111885200, 1130637600, 1143334800, 1162087200, 1174784400, 1193536800, 1206838800, 1224986400, 1238288400, 1256436e3, 1269738e3, 1288490400, 1301187600, 131994e4, 1332637200, 1351389600, 1364691600, 1382839200, 1396141200, 1414288800, 1427590800, 1445738400, 1459040400, 1477792800, 149049e4, 1509242400, 1521939600, 1540692e3, 1553994e3, 1572141600, 1585443600, 1603591200, 1616893200, 1635645600, 1648342800, 1667095200, 1679792400, 1698544800, 1711846800, 1729994400, 1743296400, 1761444e3, 1774746e3, 1792893600, 1806195600, 1824948e3, 1837645200, 1856397600, 1869094800, 1887847200, 1901149200, 1919296800, 1932598800],
                offset: [-75, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 0, 3600, 0, 3600, 7200, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0]
            },
            "Europe/Madrid": {
                time: [-2177452800, -1661734800, -1648425600, -1631926800, -1616889600, -1601254800, -1585353600, -1442451600, -1427673600, -1379293200, -1364774400, -1348448400, -1333324800, -1316394e3, -1301270400, -1284339600, -1269820800, -1029114e3, -1017619200, -1002848400, -986169600, -969238800, -954115200, -940208400, -873075600, -862531200, -842835600, -828230400, -811386e3, -796003200, -779936400, -765414e3, -748486800, -733881600, -652323600, -639183600, 135126e3, 150253200, 167180400, 181702800, 196815600, 212547600, 22887e4, 243997200, 260406e3, 276051600, 29178e4, 307508400, 323834400, 338958e3, 354679200, 370407600, 386128800, 401857200, 417578400, 433306800, 449028e3, 465361200, 481082400, 496810800, 512532e3, 528260400, 543981600, 55971e4, 575431200, 591159600, 606880800, 622609200, 638330400, 654663600, 670384800, 686113200, 701834400, 717562800, 733284e3, 749012400, 764733600, 780462e3, 796183200, 811911600, 828237600, 846385200, 859687200, 877834800, 891136800, 909284400, 922586400, 941338800, 954036e3, 972788400, 985485600, 1004238e3, 101754e4, 1035687600, 1048989600, 1067137200, 1080439200, 1099191600, 1111888800, 1130641200, 1143338400, 1162090800, 1174788e3, 1193540400, 1206842400, 122499e4, 1238292e3, 1256439600, 1269741600, 1288494e3, 1301191200, 1319943600, 1332640800, 1351393200, 1364695200, 1382842800, 1396144800, 1414292400, 1427594400, 1445742e3, 1459044e3, 1477796400, 1490493600, 1509246e3, 1521943200, 1540695600, 1553997600, 1572145200, 1585447200, 1603594800, 1616896800, 1635649200, 1648346400, 1667098800, 1679796e3, 1698548400, 1711850400, 1729998e3, 17433e5, 1761447600, 1774749600, 1792897200, 1806199200, 1824951600, 1837648800, 1856401200, 1869098400, 1887850800, 1901152800, 1919300400, 1932602400],
                offset: [-884, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600]
            },
            "Europe/Paris": {
                time: [-2486678340, -1855958340, -1689814800, -1680393600, -1665363600, -1648339200, -1635123600, -1616889600, -1604278800, -158544e4, -1574038800, -1552262400, -1539997200, -1520553600, -1507510800, -1490572800, -1470618e3, -1459123200, -1444006800, -1427673600, -1411952400, -1396224e3, -1379293200, -1364774400, -1348448400, -1333324800, -1316394e3, -1301270400, -1284339600, -1269820800, -1253494800, -1238371200, -1221440400, -1206921600, -1191200400, -1175472e3, -1160355600, -1143417600, -1127696400, -1111968e3, -1096851600, -1080518400, -1063587600, -1049068800, -1033347600, -1017619200, -1002502800, -986169600, -969238800, -950486400, -942012e3, -932432400, -85725e4, -844552800, -828219600, -812498400, -800064e3, -796258800, -781048800, -766616400, 196822800, 212547600, 228880800, 244004400, 260330400, 276058800, 29178e4, 307508400, 323834400, 338958e3, 354679200, 370407600, 386128800, 401857200, 417578400, 433306800, 449028e3, 465361200, 481082400, 496810800, 512532e3, 528260400, 543981600, 55971e4, 575431200, 591159600, 606880800, 622609200, 638330400, 654663600, 670384800, 686113200, 701834400, 717562800, 733284e3, 749012400, 764733600, 780462e3, 796183200, 811911600, 828237600, 846385200, 859687200, 877834800, 891136800, 909284400, 922586400, 941338800, 954036e3, 972788400, 985485600, 1004238e3, 101754e4, 1035687600, 1048989600, 1067137200, 1080439200, 1099191600, 1111888800, 1130641200, 1143338400, 1162090800, 1174788e3, 1193540400, 1206842400, 122499e4, 1238292e3, 1256439600, 1269741600, 1288494e3, 1301191200, 1319943600, 1332640800, 1351393200, 1364695200, 1382842800, 1396144800, 1414292400, 1427594400, 1445742e3, 1459044e3, 1477796400, 1490493600, 1509246e3, 1521943200, 1540695600, 1553997600, 1572145200, 1585447200, 1603594800, 1616896800, 1635649200, 1648346400, 1667098800, 1679796e3, 1698548400, 1711850400, 1729998e3, 17433e5, 1761447600, 1774749600, 1792897200, 1806199200, 1824951600, 1837648800, 1856401200, 1869098400, 1887850800, 1901152800, 1919300400, 1932602400],
                offset: [561, 561, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 0, 3600, 7200, 3600, 7200, 3600, 7200, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600]
            },
            "Europe/Warsaw": {
                time: [-2840140800, -1717027200, -1693702800, -1680476400, -1663452e3, -1650142800, -1632002400, -1618693200, -1600466400, -1587157200, -1501718400, -931730400, -85725e4, -844552800, -828219600, -812498400, -796600800, -778723200, -762652800, -748483200, -733266e3, -715212e3, -701902800, -684972e3, -670453200, -654127200, -639003600, -397090800, -386805600, -371084400, -355356e3, -334191600, -323301600, -307580400, -291852e3, -271292400, -260402400, -239842800, -228952800, -208393200, -197503200, -176338800, -166053600, 228877200, 244000800, 260326800, 276055200, 291776400, 307504800, 323830800, 338954400, 354675600, 370404e3, 386125200, 401853600, 417574800, 433303200, 449024400, 465357600, 481078800, 496807200, 512528400, 528256800, 543978e3, 559706400, 575431200, 591159600, 606880800, 622609200, 638330400, 654663600, 670384800, 686113200, 701834400, 717562800, 733284e3, 749012400, 764733600, 780462e3, 796183200, 811911600, 828237600, 846385200, 859687200, 877834800, 891136800, 909284400, 922586400, 941338800, 954036e3, 972788400, 985485600, 1004238e3, 101754e4, 1035687600, 1048989600, 1067137200, 1080439200, 1099191600, 1111888800, 1130641200, 1143338400, 1162090800, 1174788e3, 1193540400, 1206842400, 122499e4, 1238292e3, 1256439600, 1269741600, 1288494e3, 1301191200, 1319943600, 1332640800, 1351393200, 1364695200, 1382842800, 1396144800, 1414292400, 1427594400, 1445742e3, 1459044e3, 1477796400, 1490493600, 1509246e3, 1521943200, 1540695600, 1553997600, 1572145200, 1585447200, 1603594800, 1616896800, 1635649200, 1648346400, 1667098800, 1679796e3, 1698548400, 1711850400, 1729998e3, 17433e5, 1761447600, 1774749600, 1792897200, 1806199200, 1824951600, 1837648800, 1856401200, 1869098400, 1887850800, 1901152800, 1919300400, 1932602400],
                offset: [5040, 5040, 3600, 7200, 3600, 7200, 3600, 7200, 7200, 10800, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600, 7200, 3600]
            },
            "Australia/Sydney": {
                time: [-2364076800, -1672531140, -1665352800, -883605600, -876088800, -860364e3, -844639200, -828309600, -813189600, 57722400, 68007600, 89172e3, 100062e3, 120621600, 131511600, 152071200, 162961200, 183520800, 195015600, 215575200, 226465200, 247024800, 257914800, 278474400, 289364400, 309924e3, 320814e3, 341373600, 352263600, 372823200, 386737200, 404877600, 415767600, 436327200, 447217200, 467776800, 478666800, 499226400, 511326e3, 530071200, 542775600, 562125600, 57483e4, 59418e4, 606279600, 625629600, 636519600, 657079200, 667969200, 688528800, 699418800, 719978400, 731473200, 752032800, 762922800, 783482400, 794372400, 814932e3, 828241200, 846381600, 859690800, 877831200, 891140400, 909280800, 92259e4, 941335200, 954039600, 967341600, 985489200, 1004234400, 1017543600, 1035684e3, 1048993200, 1067133600, 1080442800, 1099188e3, 1111892400, 1130637600, 1143946800, 1162087200, 1174791600, 1193536800, 1207450800, 1223172e3, 1238900400, 1254621600, 127035e4, 1286071200, 1301799600, 1317520800, 1333249200, 1349575200, 1365303600, 1381024800, 1396753200, 1412474400, 1428202800, 1443924e3, 1459652400, 1475373600, 1491102e3, 1506823200, 1522551600, 1538877600, 1554606e3, 1570327200, 1586055600, 1601776800, 1617505200, 1633226400, 1648954800, 1664676e3, 1680404400, 1696125600, 1712458800, 172818e4, 1743908400, 1759629600, 1775358e3, 1791079200, 1806807600, 1822528800, 1838257200, 1853978400, 1869706800, 1886032800, 1901761200, 1917482400, 1933210800],
                offset: [36292, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600]
            },
            "Australia/Brisbane": {
                time: [-2366755200, -1672531140, -1665352800, -883605600, -876088800, -860364e3, -844639200, -828309600, -813189600, 57722400, 68007600, 625629600, 636519600, 657079200, 667969200, 688528800, 699418800, 1925028e3],
                offset: [36728, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3]
            },
            "Australia/Adelaide": {
                time: [-2364076800, -2230156800, -1672531140, -1665352800, -883605600, -876088800, -860364e3, -844639200, -828309600, -813189600, 57722400, 68007600, 89172e3, 100062e3, 120621600, 131511600, 152071200, 162961200, 183520800, 195015600, 215575200, 226465200, 247024800, 257914800, 278474400, 289364400, 309924e3, 320814e3, 341373600, 352263600, 372823200, 384318e3, 404877600, 415767600, 436327200, 447217200, 467776800, 478666800, 499226400, 511326e3, 530071200, 542775600, 562125600, 57483e4, 59418e4, 606279600, 625629600, 637729200, 657079200, 667969200, 688528800, 701233200, 719978400, 731473200, 752032800, 764132400, 783482400, 796186800, 814932e3, 828241200, 846381600, 859690800, 877831200, 891140400, 909280800, 92259e4, 941335200, 954039600, 972784800, 985489200, 1004234400, 1017543600, 1035684e3, 1048993200, 1067133600, 1080442800, 1099188e3, 1111892400, 1130637600, 1143946800, 1162087200, 1174791600, 1193536800, 1207450800, 1223172e3, 1238900400, 1254621600, 127035e4, 1286071200, 1301799600, 1317520800, 1333249200, 1349575200, 1365303600, 1381024800, 1396753200, 1412474400, 1428202800, 1443924e3, 1459652400, 1475373600, 1491102e3, 1506823200, 1522551600, 1538877600, 1554606e3, 1570327200, 1586055600, 1601776800, 1617505200, 1633226400, 1648954800, 1664676e3, 1680404400, 1696125600, 1712458800, 172818e4, 1743908400, 1759629600, 1775358e3, 1791079200, 1806807600, 1822528800, 1838257200, 1853978400, 1869706800, 1886032800, 1901761200, 1917482400, 1933210800],
                offset: [33260, 32400, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800, 34200, 37800]
            },
            "Australia/ACT": {
                time: [-2364076800, -1672531140, -1665352800, -883605600, -876088800, -860364e3, -844639200, -828309600, -813189600, 57722400, 68007600, 89172e3, 100062e3, 120621600, 131511600, 152071200, 162961200, 183520800, 195015600, 215575200, 226465200, 247024800, 257914800, 278474400, 289364400, 309924e3, 320814e3, 341373600, 352263600, 372823200, 386737200, 404877600, 415767600, 436327200, 447217200, 467776800, 478666800, 499226400, 511326e3, 530071200, 542775600, 562125600, 57483e4, 59418e4, 606279600, 625629600, 636519600, 657079200, 667969200, 688528800, 699418800, 719978400, 731473200, 752032800, 762922800, 783482400, 794372400, 814932e3, 828241200, 846381600, 859690800, 877831200, 891140400, 909280800, 92259e4, 941335200, 954039600, 967341600, 985489200, 1004234400, 1017543600, 1035684e3, 1048993200, 1067133600, 1080442800, 1099188e3, 1111892400, 1130637600, 1143946800, 1162087200, 1174791600, 1193536800, 1207450800, 1223172e3, 1238900400, 1254621600, 127035e4, 1286071200, 1301799600, 1317520800, 1333249200, 1349575200, 1365303600, 1381024800, 1396753200, 1412474400, 1428202800, 1443924e3, 1459652400, 1475373600, 1491102e3, 1506823200, 1522551600, 1538877600, 1554606e3, 1570327200, 1586055600, 1601776800, 1617505200, 1633226400, 1648954800, 1664676e3, 1680404400, 1696125600, 1712458800, 172818e4, 1743908400, 1759629600, 1775358e3, 1791079200, 1806807600, 1822528800, 1838257200, 1853978400, 1869706800, 1886032800, 1901761200, 1917482400, 1933210800],
                offset: [36292, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600, 36e3, 39600]
            },
            "Asia/Almaty": {
                time: [-1441152e3, -1247529600, 354931200, 370742400, 386467200, 402278400, 418003200, 433814400, 449625600, 465361200, 481082400, 496810800, 512532e3, 528260400, 543981600, 55971e4, 575431200, 591159600, 606880800, 622609200, 638330400, 654663600, 701823600, 717548400, 733284e3, 749012400, 764733600, 780462e3, 796183200, 811911600, 828237600, 846385200, 859687200, 877834800, 891136800, 909284400, 922586400, 941338800, 954036e3, 972788400, 985485600, 1004238e3, 101754e4, 1035687600, 1048989600, 1067137200, 1080439200, 1099191600, 1925013600],
                offset: [18468, 18e3, 21600, 25200, 21600, 25200, 21600, 25200, 21600, 25200, 21600, 25200, 21600, 25200, 21600, 25200, 21600, 25200, 21600, 25200, 21600, 25200, 21600, 25200, 21600, 25200, 21600, 25200, 21600, 25200, 21600, 25200, 21600, 25200, 21600, 25200, 21600, 25200, 21600, 25200, 21600, 25200, 21600, 25200, 21600, 25200, 21600, 25200, 21600]
            },
            "Asia/Ashkhabad": {
                time: [-1441152e3, -1247529600, 354931200, 370742400, 386467200, 402278400, 418003200, 433814400, 449625600, 465361200, 481082400, 496810800, 512532e3, 528260400, 543981600, 55971e4, 575431200, 591159600, 606880800, 622609200, 638330400, 654663600, 670388400, 686113200, 688521600, 695786400, 192501e4],
                offset: [14012, 14400, 18e3, 21600, 18e3, 21600, 18e3, 21600, 18e3, 21600, 18e3, 21600, 18e3, 21600, 18e3, 21600, 18e3, 21600, 18e3, 21600, 18e3, 21600, 18e3, 18e3, 14400, 14400, 18e3]
            },
            "Asia/Tokyo": {
                time: [-2587678861, -2335219200, -1017792e3, -683762400, -672357600, -654732e3, -640908e3, -620258400, -609458400, -588808800, -578008800, 1925024400],
                offset: [33539, 32400, 32400, 32400, 36e3, 32400, 36e3, 32400, 36e3, 32400, 36e3, 32400]
            },
            "Asia/Taipei": {
                time: [-2335219200, -1017792e3, -766191600, -745804800, -733795200, -716860800, -699580800, -683856e3, -670636800, -65232e4, -639100800, -620784e3, -607564800, -589248e3, -576028800, -562896e3, -541728e3, -528681600, -510192e3, -497145600, -478656e3, -465609600, -449798400, -433987200, -418176e3, -402451200, -38664e4, -370915200, -355104e3, -339379200, -323568e3, -302486400, -291945600, -270950400, -260409600, 134006400, 149817600, 165542400, 181353600, 299635200, 307584e3, 1925020800],
                offset: [29160, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800]
            },
            "Asia/Singapore": {
                time: [-2177452800, -2038176e3, -1167609600, -1073001600, -894153600, -879638400, -766972800, -138758400, 378691200, 1925020800],
                offset: [24925, 24925, 25200, 26400, 26400, 27e3, 32400, 27e3, 27e3, 28800]
            },
            "Asia/Shanghai": {
                time: [-2177452800, -933465600, -923097600, -908755200, -891561600, 515548800, 52704e4, 545184e3, 558489600, 576633600, 589939200, 608688e3, 621993600, 640137600, 653443200, 671587200, 684892800, 1925020800],
                offset: [29143, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800]
            },
            "Asia/Seoul": {
                time: [-1948752e3, -1830384e3, -1017792e3, -767318400, -498096e3, -462672e3, -451699200, -429753600, -418262400, -399513600, -387417600, -368064e3, -355968e3, -336614400, -324518400, -305164800, -293068800, -264902400, 547610400, 560919600, 57906e4, 592369200, 1925024400],
                offset: [30472, 30600, 32400, 32400, 32400, 30600, 34200, 30600, 34200, 30600, 34200, 30600, 34200, 30600, 34200, 30600, 34200, 30600, 32400, 36e3, 32400, 36e3, 32400]
            },
            "Asia/Tehran": {
                time: [-1704153600, -757382400, 247190400, 259286400, 277776e3, 283996800, 290822400, 306547200, 322444800, 338515200, 673228800, 685497600, 701222400, 71712e4, 732758400, 748656e3, 764294400, 780192e3, 795830400, 811728e3, 827366400, 843264e3, 858988800, 874886400, 890524800, 906422400, 922060800, 937958400, 953596800, 969494400, 985219200, 1001116800, 1016755200, 1032652800, 1048291200, 1064188800, 1079827200, 1095724800, 1111449600, 1127347200, 1206057600, 1221955200, 123768e4, 1253577600, 1269216e3, 1285113600, 1300752e3, 1316649600, 1332288e3, 1348185600, 1363910400, 1379808e3, 1395446400, 1411344e3, 1426982400, 144288e4, 1458518400, 1474416e3, 1490140800, 1506038400, 1521676800, 1537574400, 1553212800, 1569110400, 1584748800, 1600646400, 1616371200, 1632268800, 1647907200, 1663804800, 1679443200, 1695340800, 1710979200, 1726876800, 1742601600, 1758499200, 1774137600, 1790035200, 1805673600, 1821571200, 1837209600, 1853107200, 1868745600, 1884643200, 1900368e3, 1916265600, 1931904e3],
                offset: [12344, 12344, 12600, 14400, 18e3, 14400, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600, 16200, 12600]
            },
            "Asia/Dubai": {
                time: [-1577923200, 1925006400],
                offset: [13272, 14400]
            },
            "Asia/Kolkata": {
                time: [-2840140800, -891561600, -872035200, -862617600, -764121600, 1925011800],
                offset: [21208, 21200, 23400, 19800, 23400, 19800]
            },
            "Asia/Hong_Kong": {
                time: [-2056665600, -907360200, -891635400, -884217600, -766713600, -747952200, -728512200, -717021e3, -694470600, -683757e3, -668032200, -654726600, -636582600, -623277e3, -605133e3, -591827400, -573683400, -559773e3, -542320200, -528323400, -510179400, -498083400, -478729800, -466633800, -446675400, -435184200, -415225800, -403129800, -383776200, -371680200, -352326600, -340230600, -320877e3, -308781e3, -288822600, -277331400, -257373e3, -245881800, -225923400, -213827400, -194473800, -182377800, -163024200, -148509e3, -132784200, -117059400, -101334600, -85609800, -69280200, -53555400, -37830600, -22105800, -6381e3, 9343800, 25068600, 40793400, 56518200, 72243e3, 88572600, 104297400, 120022200, 126070200, 151471800, 167196600, 182921400, 198646200, 214371e3, 295414200, 309324600, 1925020800],
                offset: [27402, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800, 32400, 28800]
            },
            "Asia/Bangkok": {
                time: [-2840140800, -1570060800, 1925017200],
                offset: [24124, 24124, 25200]
            },
            "Pacific/Auckland": {
                time: [-3192393600, -1330293600, -1320012e3, -1300658400, -1287352800, -1269208800, -1255903200, -1237759200, -1224453600, -1206309600, -1192399200, -117486e4, -1160949600, -1143410400, -1125871200, -1112565600, -1094421600, -1081116e3, -1062972e3, -1049666400, -1031522400, -1018216800, -1000072800, -986767200, -968018400, -955317600, -936568800, -923263200, 152676e3, 162356400, 183520800, 195015600, 215575200, 226465200, 247024800, 257914800, 278474400, 289364400, 309924e3, 320814e3, 341373600, 352263600, 372823200, 384318e3, 404877600, 415767600, 436327200, 447217200, 467776800, 478666800, 499226400, 510116400, 530676e3, 541566e3, 562125600, 573620400, 59418e4, 60507e4, 623815200, 637729200, 655264800, 669178800, 686714400, 700628400, 718164e3, 732682800, 749613600, 764132400, 781063200, 795582e3, 812512800, 827031600, 844567200, 858481200, 876016800, 889930800, 907466400, 921985200, 938916e3, 953434800, 970365600, 984884400, 100242e4, 1016334e3, 1033869600, 1047783600, 1065319200, 1079838e3, 1096768800, 1111287600, 1128218400, 1142737200, 1159668e3, 1174186800, 1191117600, 1207450800, 1222567200, 1238900400, 1254016800, 127035e4, 1285466400, 1301799600, 1316916e3, 1333249200, 1348970400, 1365303600, 138042e4, 1396753200, 1411869600, 1428202800, 1443319200, 1459652400, 1474768800, 1491102e3, 1506218400, 1522551600, 1538272800, 1554606e3, 1569722400, 1586055600, 1601172e3, 1617505200, 1632621600, 1648954800, 1664071200, 1680404400, 1695520800, 1712458800, 1727575200, 1743908400, 1759024800, 1775358e3, 1790474400, 1806807600, 1821924e3, 1838257200, 1853373600, 1869706800, 1885428e3, 1901761200, 1916877600, 1933210800],
                offset: [41944, 41400, 45e3, 41400, 43200, 41400, 43200, 41400, 43200, 41400, 43200, 41400, 43200, 41400, 43200, 41400, 43200, 41400, 43200, 41400, 43200, 41400, 43200, 41400, 43200, 41400, 43200, 41400, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800, 43200, 46800]
            },
            "Pacific/Chatham": {
                time: [-3192393600, -757382400, 152678700, 162359100, 183523500, 195018300, 215577900, 226467900, 247027500, 257917500, 278477100, 289367100, 309926700, 320816700, 341376300, 352266300, 372825900, 384320700, 404880300, 415770300, 436329900, 447219900, 467779500, 478669500, 499229100, 510119100, 530678700, 541568700, 562128300, 573623100, 594182700, 605072700, 623817900, 637731900, 655267500, 669181500, 686717100, 700631100, 718166700, 732685500, 749616300, 764135100, 781065900, 795584700, 812515500, 827034300, 844569900, 858483900, 876019500, 889933500, 907469100, 921987900, 938918700, 953437500, 970368300, 984887100, 1002422700, 1016336700, 1033872300, 1047786300, 1065321900, 1079840700, 1096771500, 1111290300, 1128221100, 1142739900, 1159670700, 1174189500, 1191120300, 1207453500, 1222569900, 1238903100, 1254019500, 1270352700, 1285469100, 1301802300, 1316918700, 1333251900, 1348973100, 1365306300, 1380422700, 1396755900, 1411872300, 1428205500, 1443321900, 1459655100, 1474771500, 1491104700, 1506221100, 1522554300, 1538275500, 1554608700, 1569725100, 1586058300, 1601174700, 1617507900, 1632624300, 1648957500, 1664073900, 1680407100, 1695523500, 1712461500, 1727577900, 1743911100, 1759027500, 1775360700, 1790477100, 1806810300, 1821926700, 1838259900, 1853376300, 1869709500, 1885430700, 1901763900, 1916880300, 1933213500],
                offset: [44028, 44100, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500, 45900, 49500]
            },
            "Pacific/Fakaofo": {
                time: [-2177452800, 1325203200, 1925038800],
                offset: [-41096, -39600, 46800]
            },
            "Pacific/Honolulu": {
                time: [-2334139200, -1157320800, -1155470400, -880236e3, -765410400, -712188e3, 1924956e3],
                offset: [-37886, -37800, -34200, -37800, -34200, -37800, -36e3]
            },
            "America/Mexico_City": {
                time: [-1514763396, -1343091600, -1234828800, -1220317200, -1207180800, -1191369600, -975283200, -963187200, -917136e3, -907372800, -821923200, -810086400, -627523200, -613008e3, 828842400, 846381600, 860292e3, 877831200, 891741600, 909280800, 923191200, 941335200, 954640800, 972784800, 989114400, 1001815200, 1018144800, 1035684e3, 1049594400, 1067133600, 1081044e3, 1099188e3, 1112493600, 1130637600, 1143943200, 1162087200, 1175392800, 1193536800, 1207447200, 1224986400, 1238896800, 1256436e3, 1270346400, 1288490400, 1301796e3, 131994e4, 1333245600, 1351389600, 13653e5, 1382839200, 1396749600, 1414288800, 1428199200, 1445738400, 1459648800, 1477792800, 1491098400, 1509242400, 1522548e3, 1540692e3, 1554602400, 1572141600, 1586052e3, 1603591200, 1617501600, 1635645600, 1648951200, 1667095200, 1680400800, 1698544800, 1712455200, 1729994400, 1743904800, 1761444e3, 1775354400, 1792893600, 1806804e3, 1824948e3, 1838253600, 1856397600, 1869703200, 1887847200, 1901757600, 1919296800, 1933207200],
                offset: [-23796, -25200, -21600, -25200, -21600, -25200, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600, -18e3, -21600]
            },
            "Africa/Johannesburg": {
                time: [-2458166400, -2109283200, -860968800, -845244e3, -829519200, -813794400, 1924999200],
                offset: [6720, 5400, 7200, 10800, 7200, 10800, 7200]
            },
            "Asia/Kathmandu": {
                time: [-1577923200, 504921600, 1925012700],
                offset: [20476, 19800, 20700]
            },
            "US/Mountain": {
                time: [-2717668796, -1633298400, -1615154400, -1601848800, -1583704800, -1570399200, -1551650400, -1538949600, -1534111200, -880236e3, -769417200, -765410400, -147909600, -13158e4, -11646e4, -100130400, -84405600, -68680800, -52956e3, -37231200, -21506400, -5781600, 9943200, 25668e3, 41392800, 57722400, 73447200, 89172e3, 104896800, 120621600, 126669600, 152071200, 162352800, 183520800, 199245600, 215575200, 230695200, 247024800, 262749600, 278474400, 294199200, 309924e3, 325648800, 341373600, 357098400, 372823200, 388548e3, 404877600, 419997600, 436327200, 452052e3, 467776800, 483501600, 499226400, 514951200, 530676e3, 544586400, 562125600, 576036e3, 59418e4, 607485600, 625629600, 638935200, 657079200, 670989600, 688528800, 702439200, 719978400, 733888800, 752032800, 765338400, 783482400, 796788e3, 814932e3, 828842400, 846381600, 860292e3, 877831200, 891741600, 909280800, 923191200, 941335200, 954640800, 972784800, 986090400, 1004234400, 1018144800, 1035684e3, 1049594400, 1067133600, 1081044e3, 1099188e3, 1112493600, 1130637600, 1143943200, 1162087200, 1173578400, 1194141600, 1205028e3, 1225591200, 1236477600, 1257040800, 1268532e3, 1289095200, 1299981600, 1320544800, 1331431200, 1351994400, 1362880800, 1383444e3, 1394330400, 1414893600, 142578e4, 1446343200, 1457834400, 1478397600, 1489284e3, 1509847200, 1520733600, 1541296800, 1552183200, 1572746400, 1583632800, 1604196e3, 1615687200, 1636250400, 1647136800, 16677e5, 1678586400, 1699149600, 1710036e3, 1730599200, 1741485600, 1762048800, 1772935200, 1793498400, 1804989600, 1825552800, 1836439200, 1857002400, 1867888800, 1888452e3, 1899338400, 1919901600, 1930788e3],
                offset: [-25196, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200, -21600, -25200]
            }
        };
        void 0 !== t && t.exports ? t.exports = e : window.TzData = e
    }()
}, function(t, e, i) {
    (function(e, n) {
        "use strict";
        var o = i(145),
            r = i(318),
            s = i(146),
            a = i(77).LineDataSource,
            l = i(223).StudyLineDataSource,
            c = i(228),
            h = i(263),
            d = i(168),
            u = d.Study,
            p = d.prepareStudyPropsStateForLoadChart,
            f = d.prepareStudyPropertiesForLoadChart,
            _ = d.createStudy,
            g = i(53),
            m = i(81).DefaultProperty,
            v = i(125),
            y = i(144),
            w = i(126),
            b = i(156).LineToolParallelChannel,
            S = i(235),
            T = i(269),
            x = i(161).LineToolElliott,
            C = i(80).PriceDataSource,
            P = i(141),
            k = i(104);
        o.version = 2, o.prototype.state = function(t, e) {
            var i, n, r, s = {};
            for (s.panes = [], i = 0; i < this.panes().length; i++) s.panes.push(this.panes()[i].state(!0, t, !1, e));
            return s.timeScale = this.m_timeScale.state(t), n = null, n = this.publishedChartsTimelineSource(), r = this.properties(), s.chartProperties = {
                paneProperties: r.paneProperties.state(),
                scalesProperties: r.scalesProperties.state(),
                publishedChartsTimelineProperties: n ? n.state(t) : void 0,
                chartEventsSourceProperties: r.chartEventsSourceProperties.state()
            }, r.chartEventsSourceProperties && (s.chartProperties.chartEventsSourceProperties = r.chartEventsSourceProperties.state()), s.version = o.version, s.timezone = this.timezone(), s
        }, o.prototype.asyncState = function(t) {
            return this.publishedChartsTimelineSource().asyncState(t).pipe(function(t) {
                var e = {};
                return e.chartProperties = {
                    publishedChartsTimelineProperties: t
                }, e
            })
        }, o.prototype.chartPropertiesTransparencyMigrate = function(t) {
            var e, i, n;
            t.chartProperties.paneProperties.crossHairProperties && (n = t.chartProperties.paneProperties.crossHairProperties, TradingView.isHexColor(n.color) && (i = n.transparency / 100, e = TradingView.hexRgbDecomp(n.color), n.color = TradingView.rgbaComp(e, i))), t.chartProperties.paneProperties.dataWindowProperties && (n = t.chartProperties.paneProperties.dataWindowProperties, TradingView.isHexColor(n.color) && (i = n.transparency / 100, e = TradingView.hexRgbDecomp(n.color), n.color = TradingView.rgbaComp(e, i)))
        }, o.prototype.restoreState = function(t, e) {
            var i, n, o, r, s, l, c, h, d = {};
            if (!t.panes) return void TradingView.logDebugChart("ChartModel.restoreState: invalid state");
            if (!Array.isArray(t.panes)) return void TradingView.logDebugChart("ChartModel.restoreState: invalid state");
            if (t.panes.length < 1) return void TradingView.logDebugChart("ChartModel.restoreState: invalid state");
            t.chartProperties && !t.chartProperties.timezone && (t.chartProperties.timezone = t.timezone), t.chartProperties && (i = TradingView.factoryDefaults("chartproperties").scalesProperties, TradingView.merge(i, t.chartProperties.scalesProperties), !("showLastValue" in i) || "showSeriesLastValue" in i || "showStudyLastValue" in i || (i.showSeriesLastValueProperty = i.showLastValue, i.showStudyLastValueProperty = i.showLastValue), "showSeriesLastValue" in i && (d.showSeriesLastValueProperty = !0), "showStudyLastValue" in i && (d.showStudyLastValueProperty = !0), t.chartProperties.paneProperties.vertGridProperties = t.chartProperties.paneProperties.vertGridProperties || TradingView.clone(t.chartProperties.paneProperties.gridProperties), t.chartProperties.paneProperties.horzGridProperties = t.chartProperties.paneProperties.horzGridProperties || TradingView.clone(t.chartProperties.paneProperties.gridProperties), this._properties.paneProperties.merge(t.chartProperties.paneProperties), this._properties.scalesProperties.merge(i), t.chartProperties.timezone && this._properties.timezone.setValue(t.chartProperties.timezone), t.chartProperties.chartEventsSourceProperties && this._properties.chartEventsSourceProperties && this._properties.chartEventsSourceProperties.merge(t.chartProperties.chartEventsSourceProperties), this.m_timeScale.restoreState(t.timeScale, e)), t.timeScale && this.m_timeScale.restoreState(t.timeScale, e), n = t.panes, this.panes()[0].restoreState(n[0], e, t.version, d);
            for (o = 1; o < t.panes.length; o++) r = this.panes()[o] || this.createPane(), r.restoreState(t.panes[o], e, t.version, d);
            for (t.chartProperties && t.chartProperties.publishedChartsTimelineProperties && this.publishedChartsTimelineSource().restoreData(t.chartProperties.publishedChartsTimelineProperties, e), this._invalidateBarColorerCaches(), s = this.dataSources(), l = 0, o = 0; o < s.length; o++) c = s[o], TradingView.isInherited(c.constructor, a) && (l++, c.calcIsActualSymbol());
            return this._version = t.version, this.timeScale().recalcLockedScale(), this.recalculateAllPanes(), this.invalidate(new k(k.FULL_UPDATE)), window.saver && window.is_authenticated && this.isJustClonedChart() && this.mainSeries().onSymbolResolved().subscribe(this, function() {
                window.saver.saveChartSilently()
            }, !0), h = TVLocalStorage.getItem("linetools_limit") || 1e3, window.is_authenticated && window.user && window.user.settings && (h = window.user.settings.linetools_limit || h), l > h ? {
                lines_limit_exceeded: !0,
                line_tools_count: l
            } : {}
        }, o.prototype.restoreAxisState = function(t) {
            var e, i;
            if (!t.panes) return void TradingView.logDebugChart("ChartModel.restoreAxisState: invalid state");
            if (!Array.isArray(t.panes)) return void TradingView.logDebugChart("ChartModel.restoreAxisState: invalid state");
            if (t.panes.length < 1) return void TradingView.logDebugChart("ChartModel.restoreAxisState: invalid state");
            for (this.m_timeScale.restoreState(t.timeScale, !1, !0), e = 0; e < t.panes.length; e++) i = this.panes()[e], i.m_leftPriceScale.restoreState(t.panes[e].leftAxisState), i.m_rightPriceScale.restoreState(t.panes[e].rightAxisState);
            this.recalculateAllPanes(), this.invalidate(new k(k.FULL_UPDATE))
        }, P.prototype.state = function(t, e, i, n) {
            function o(t) {
                return i && !t.isSavedInStudyTemplates() || t instanceof y || !t.state || !t.state() || !t.isSavedInChart(e) || n && t.isActualSymbol && !t.isActualSymbol()
            }
            var r, s, a = {};
            if (t)
                for (a.sources = [], r = 0; r < this.m_dataSources.length; r++) o(this.m_dataSources[r]) || a.sources.push(this.m_dataSources[r].state(e));
            for (a.leftAxisState = this.m_leftPriceScale.state(), a.leftAxisSources = [], r = 0; r < this.m_leftPriceScale.dataSources().length; r++) o(this.m_leftPriceScale.dataSources()[r]) || a.leftAxisSources.push(this.m_leftPriceScale.dataSources()[r].id());
            for (a.rightAxisState = this.m_rightPriceScale.state(), a.rightAxisSources = [], r = 0; r < this.m_rightPriceScale.dataSources().length; r++) o(this.m_rightPriceScale.dataSources()[r]) || a.rightAxisSources.push(this.m_rightPriceScale.dataSources()[r].id());
            for (a.overlayPriceScales = {}, r = 0; r < this.m_dataSources.length; r++) s = this.m_dataSources[r], this.isOverlay(s) && s.isSavedInChart(e) && (a.overlayPriceScales[s.id()] = s.priceScale().state());
            return a.stretchFactor = this._stretchFactor, this.m_mainDataSource && (a.mainSourceId = this.m_mainDataSource.id()), a
        }, P.prototype.sourceById = function(t) {
            for (var e = 0; e < this.m_dataSources.length; e++)
                if (this.m_dataSources[e].id() === t) return this.m_dataSources[e];
            return null
        }, P.prototype.isESDStudy = function(t) {
            return "Script$TV_EARNINGS@tv-scripting" === t.id || "Script$TV_DIVIDENDS@tv-scripting" === t.id || "Script$TV_SPLITS@tv-scripting" === t.id || "ESD$TV_EARNINGS@tv-scripting" === t.id || "ESD$TV_DIVIDENDS@tv-scripting" === t.id || "ESD$TV_SPLITS@tv-scripting" === t.id
        }, P.prototype.restoreState = function(t, i, n, o) {
            var r, s, l, c, h, d, p, f, _, m, v, y;
            if (o = o || {}, !t.leftAxisState || !t.rightAxisState) throw Error("invalid state");
            if (!t.leftAxisSources || !t.rightAxisSources) throw Error("invalid state");
            if (t.stretchFactor && (this._stretchFactor = t.stretchFactor), r = {}, t.sources)
                for (s = -1 !== this.m_dataSources.indexOf(this._model.mainSeries()), this.clearSeries(), this.m_mainDataSource = null, s && this.m_dataSources.push(this._model.mainSeries()), l = 0; l < t.sources.length; l++) c = t.sources[l], Math.abs(c.zorder) > 1e200 && (h = -1, TradingView.logWarn("Datasource zorder has bad value: " + c.zorder + " Resetting it to " + h), c.zorder = h), d = c.id, r[d] = c.ownerSource, p = c.type, p && ("MainSeries" === p ? this._restoreMainSeries(c, i, s, o) : p.toLowerCase().startsWith("study") ? this._restoreStudy(c, i, o) : TradingView.isInherited(TradingView[p], a) ? this._restoreLineTool(c, i) : TradingView[p] && TradingView[p].createFromState && this._restoreSpecialSource(c, i));
            for (this.m_leftPriceScale.dataSources().splice(0, 1 / 0), this.m_leftPriceScale._hasSeries = !1, f = defaults("chartproperties").paneProperties.leftAxisProperties, TradingView.merge(f, t.leftAxisState), this.m_leftPriceScale.restoreState(f), l = 0; l < t.leftAxisSources.length; l++) _ = this.dataSourceForId(t.leftAxisSources[l]), _ && (void 0 !== f.m_showSymbolLabels && _ instanceof g && this.model().properties().scalesProperties.showSymbolLabels.setValue(f.m_showSymbolLabels), _.setPriceScale(this.m_leftPriceScale), this.m_leftPriceScale.addDataSource(_));
            for (this.m_rightPriceScale.dataSources().splice(0, 1 / 0), this.m_rightPriceScale._hasSeries = !1, f = defaults("chartproperties").paneProperties.rightAxisProperties, TradingView.merge(f, t.rightAxisState), this.m_rightPriceScale.restoreState(f), l = 0; l < t.rightAxisSources.length; l++) _ = this.dataSourceForId(t.rightAxisSources[l]), _ && (void 0 !== f.m_showSymbolLabels && _ instanceof g && this.model().properties().scalesProperties.showSymbolLabels.setValue(f.m_showSymbolLabels), _.setPriceScale(this.m_rightPriceScale), this.m_rightPriceScale.addDataSource(_));
            for (l = 0; l < this.m_dataSources.length; l++) _ = this.m_dataSources[l], -1 === this.m_rightPriceScale.dataSources().indexOf(_) && -1 === this.m_leftPriceScale.dataSources().indexOf(_) ? (_._isOverlay = !0, m = new e(this._properties.overlayPropreties, this._model.properties().scalesProperties), m.setHeight(this.m_height), m.setTopMargin(this.m_rightPriceScale.topMargin()), m.setBottomMargin(this.m_rightPriceScale.bottomMargin()), m.addDataSource(_), t.overlayPriceScales && t.overlayPriceScales[_.id()] && (f = t.overlayPriceScales[_.id()], f.m_isAutoScale = !0, f.m_isLog = !1, f.m_isPercentage = !1, m.restoreState(f)), _.setPriceScale(m)) : _._isOverlay = !1;
            for (d in r) v = r[d], v && (_ = this.sourceById(d), _ && this.sourceById(d).setOwnerSource(this.sourceById(v)));
            if (t.mainSourceId && !this.m_mainDataSource && (this.m_mainDataSource = this.dataSourceForId(t.mainSourceId)), !this.m_mainDataSource)
                for (l = 0; l < this.m_dataSources.length; l++)
                    if (_ = this.m_dataSources[l], TradingView.isInherited(_.constructor, C)) {
                        this.m_mainDataSource = _;
                        break
                    }
            for (l = 0; l < this.m_dataSources.length; l++) _ = this.m_dataSources[l], TradingView.isInherited(_.constructor, a) ? (_.ownerSource() || _.setOwnerSource(this.mainDataSource()), _.isFixed() && _.restoreFixedPoints(), 1 === n && _.priceScale().isPercent() && !_.isFixed() && _.correctPricesToPercents(), _.fixAfterRestorePriceAxis && _.fixAfterRestorePriceAxis()) : TradingView.isInherited(_.constructor, u) && (y = _.properties(), y.linkedToSeries && y.linkedToSeries.value() && (_.ownerSource() || _.setOwnerSource(this.model().mainSeries())));
            this._updateMargins(), this._cachedOrderedSoruces = null, this._cachedHitTestSources = null
        }, P.prototype._restoreMainSeries = function(t, e, i, n) {
            var o, r, s, a, l = t.id,
                c = t.state,
                h = t.zorder;
            c && ["candleStyle", "hollowCandleStyle", "haStyle"].forEach(function(t) {
                c[t] && (c[t].wickUpColor = c[t].wickUpColor || c[t].wickColor, c[t].wickDownColor = c[t].wickDownColor || c[t].wickColor)
            }), i || (o = this._model.paneForSource(this._model.mainSeries()), o.removeDataSource(this._model.mainSeries()), this.m_dataSources.push(this._model.mainSeries())), this.m_mainDataSource = this._model.mainSeries(), r = c && c.style ? c.style : void 0, s = r === g.STYLE_PNF && c.pnfStyle.lockScale, c && !c.lockScale && (c.lockScale = s), r === g.STYLE_PNF && "ATR" === this._model.mainSeries().properties().pnfStyle.inputs.style.value() ? this._model.mainSeries().properties().pnfStyle.inputs.style._value = "Traditional" : r === g.STYLE_RENKO && "ATR" === this._model.mainSeries().properties().renkoStyle.inputs.style.value() && (this._model.mainSeries().properties().renkoStyle.inputs.style._value = "Traditional"), c && !c.hasOwnProperty("showSessions") && (c.showSessions = !1), c && !c.extendedHours && (c.extendedHours = !1), c && e && (c.showCountdown = !1), c && (e && !("showSeriesLastValueProperty" in n) && "showLastValue" in c && this._model.properties().scalesProperties.showSeriesLastValue.setValue(c.showLastValue), delete c.showLastValue), this._model.mainSeries().properties().merge(c), this._model.mainSeries()._prevChartStyle = this._model.mainSeries().properties().style.value(), this._model.mainSeries().createPaneView(), this._model.mainSeries().setId(l), e && this._model.mainSeries().restoreData(t.bars, t.nsBars, t.symbolInfo, t.rtPrice, t.boxSize, t.reversalAmount), void 0 !== h && this._model.mainSeries().setZorder(h), this._model.mainSeries().properties().extendedHours.listeners().fire(this._model.mainSeries().properties().extendedHours), a = this._model.mainSeries().symbolInfo(), a && this._model.mainSeries().onSymbolResolved().fire(this._model.mainSeries().symbolInfo())
        }, P.prototype._restoreStudy = function(t, e, i) {
            var n, o, s, a, l, c, h, d;
            return e && void 0 === t.data && void 0 === t.nonSeriesData && void 0 === t.indexes ? void TradingView.logError("Cannot restore (skipping) study without data " + t.id + ", " + t.metaInfo.id) : (n = t.id, o = t.state, s = t.zorder, a = TradingView.clone(t.metaInfo), $.extend(a, v.parseIdString(a.id)), this.isESDStudy(a) && !e || !TradingView.isFeatureEnabled("backtesting") && a.isTVScriptStrategy && !e ? void 0 : (l = o, c = this._model.studyVersioning(), h = c.patchPropsStateAndMetaInfo(l, a, {
                oldShowStudyLastValueProperty: e && !i.showStudyLastValueProperty
            }), l = h.propsState, a = h.metaInfo, d = new r(this._model, t, a.shortDescription), d.setId(n), c.updateMetaInfoAsync(a, e).done(function(i) {
                var o, r, s, h, u, p;
                d.setStatus(""), o = i || a, o.isTVScript && !e && (r = v.parseIdString(o.fullId || o.id), s = r.productId, pro.hasPackage(s) || (o = w.createScriptStubNoSrc("Error: '" + o.shortDescription + "' is not authorized", o.scriptIdPart), $.extend(o, v.parseIdString(o.id)), a = o, i = o, l = {})), h = f(a, i, l, null, c), u = _(this._model, h, this._model.mainSeries(), o), u.setId(n), e && (p = c.patchStudyData(a, t.data, t.nonSeriesData, t.indexes), u.restoreData(p.data, p.nsData, p.indexes)), this._model.replaceStudyStub(d, u) || (d = u)
            }.bind(this)).fail(function(t) {
                TradingView.logError(t), d.setStatus("error: " + t)
            }), this.m_dataSources.push(d), delete this._cachedOrderedSoruces, delete this._cachedHitTestSources, void 0 !== s && d.setZorder(s), d))
        }, P.prototype._restoreLineTool = function(t, e, i) {
            var o, d, u, f, _, g, y, w, C, P, k, I, E, L, V, M, A, D, O, R, B, z, N;
            for (i = void 0 === i ? !0 : i, x.migrateState(t), o = t.type, d = t.id, u = t.state, f = i ? t.zorder : this._newZOrderForLineTool(), _ = TradingView[o], assert(TradingView.isInherited(_, a), "invalid data source type:" + o + " (expected to be a Line Tool)"), g = t.points, y = !1, w = 0; w < g.length; w++)
                if (Math.abs(g[w].offset) > 1e4) {
                    y = !0;
                    break
                }
            if (!y) {
                if (C = null, P = TradingView.factoryDefaults("linetool"), TradingView.isInherited(_, l)) {
                    if (C = this._model.studyVersioning(), t = C.patchPointsBasedStudyState(t), TradingView.merge(P, u), E = t.metaInfo, $.extend(E, v.parseIdString(E.fullId)), !e && (L = E.productId, !pro.hasPackage(L))) return V = new r(this._model, t, E.shortDescription), V.setId(d), this.m_dataSources.push(V), void 0 !== f && V.setZorder(f), V.setStatus($.t("not authorized")), void V.setFailed(!0);
                    M = C.updateMetaInfo(E), A = M || E, P = p(A, E, P, null, C), e ? TradingView.merge(P, {
                        fixedSize: !1
                    }) : TradingView.merge(P, {
                        fixedSize: !0
                    }), I = new m("study_" + A.id, P, !0), k = s.create(o, this._model, I, A, this.mainDataSource())
                } else D = o.toLowerCase(), TradingView.merge(P, TradingView.factoryDefaults(D)), I = TradingView[o].prototype.createPropertiesObject(D, P), I.merge(u), e ? I.merge({
                    fixedSize: !1
                }) : I.merge({
                    fixedSize: !0
                }), k = new TradingView[o](this._model, I, !0);
                return k.setId(d), k.linkKey = t.linkKey, O = t.alertId, O && "function" == typeof k.setAlert && n.enabled("alerts") && !this._model.readOnly() && !this._model.isJustClonedChart() && k.setAlert(O, {
                    noChartSave: !0
                }), R = t.indexes ? t.indexes : [], R = R.slice(0, t.points.length), k.isFixed() ? k.restorePositionPercents(t.positionPercents) : k.restorePoints(t.points, R, e), k instanceof c || k instanceof h || k instanceof S || k instanceof T || k instanceof b ? k.restoreData(t) : e && k.restoreData && (B = t, C && (B.graphics = C.patchPointsBasedStudyData(B.metaInfo, B.graphics)), k.restoreData(B)), z = null == t.version ? 1 : t.version, N = null == k.version ? 1 : k.version, z !== N && "function" == typeof k.migrateVersion && k.migrateVersion(z, N, {
                    pane: this,
                    model: this._model,
                    properties: I
                }), this.m_dataSources.push(k), delete this._cachedOrderedSoruces, delete this._cachedHitTestSources, void 0 !== f && k.setZorder(f), k
            }
        }, P.prototype._restoreSpecialSource = function(t, e) {
            var i, n = TradingView[t.type];
            n && n.createFromState && (i = n.createFromState(t, e, this._model), i && (i.setId(t.id), this.m_dataSources.push(i), i.zorder && i.setZorder(i.zorder)))
        }, o.prototype.studyTemplate = function(t) {
            var e, i, n, r, s = {};
            for (s.panes = [], e = 0; e < this.panes().length; e++) i = !0, n = !1, r = !0, s.panes.push(this.panes()[e].state(i, n, r));
            return t && (s.interval = this.mainSeries().interval()), s.version = o.version, s
        }, o.prototype.restoreStudyTemplate = function(t, e) {
            this._undoModel.studyLoadTemplate(this._undoModel, this.studyTemplate(), t, e)
        }, o.prototype.theme = function() {
            var t = {};
            return t.chartProperties = {
                paneProperties: this.properties().paneProperties.state(),
                scalesProperties: this.properties().scalesProperties.state(),
                symbolWatermarkProperties: this.properties().symbolWatermarkProperties.state()
            }, t.mainSourceProperties = this.mainSeries().state().state, delete t.mainSourceProperties.symbol, delete t.mainSourceProperties.interval, delete t.chartProperties.paneProperties.topMargin, delete t.chartProperties.paneProperties.bottomMargin, t.version = o.version, t
        }, o.prototype.restoreTheme = function(t) {
            var e, i, n = {
                hollowCandle: {
                    related: "candle"
                }
            };
            for (e in n) t.mainSourceProperties[e + "Style"] || (i = t.mainSourceProperties[n[e].related + "Style"], t.mainSourceProperties[e + "Style"] = TradingView.clone(i));
            this._undoModel.chartLoadTheme(this, t)
        }, t.exports = o
    }).call(e, i(133), i(3))
}, function(t, e, i) {
    (function(e, n) {
        "use strict";

        function o(t, i) {
            if (this.m_base = t, this.m_integralDividers = i, this.m_fractionalDividers = [], e.isBaseDecimal(this.m_base)) this.m_fractionalDividers = [2, 2.5, 2];
            else
                for (var n = this.m_base; 1 !== n;) {
                    if (n % 2 === 0) this.m_fractionalDividers.push(2), n /= 2;
                    else {
                        if (n % 5 !== 0) throw new RangeError("unexpected base");
                        this.m_fractionalDividers.push(2), this.m_fractionalDividers.push(2.5), n /= 5
                    }
                    if (this.m_fractionalDividers.length > 100) throw Error("something wrong with base")
                }
        }

        function r(t, e, i) {
            this.m_marks = [], this.m_base = e, this.m_priceScale = t, this._formatter = i, i && (this._cache = new u(function(t) {
                return i.format(t)
            })), this._currentFormatBase = 0
        }

        function s(t) {
            for (var e = 1; t * e !== Math.round(t * e);) e *= 10;
            return e
        }

        function a(t, e) {
            function i() {
                var t, e, i = o.m_dataSources;
                for (t = 0; t < i.length; t++) e = i[t], e.priceScaleChanged && e.priceScaleChanged.fire(o)
            }
            this._properties = t, this._scalesProperties = e, this.m_height = 0, this.m_priceRange = null, this.m_dataSources = [], this.m_topMargin = 0, this.m_bottomMargin = 0, this._studyTopMargin = 0, this._studyBottomMargin = 0, this.m_scrollStartPoint = null, this.m_scaleStartPoint = null, this.m_priceRangeSnapshot = null, this._invalidatedForRange = {
                isValid: !0
            }, this.m_markBuilder = new r(this, 100, new m(100)), this._properties.percentage.listeners().subscribe(this, a.prototype.updateFormatter);
            var o = this;
            this._properties.log.listeners().subscribe(null, function(t) {
                if (o.m_priceRange) {
                    var e = o.m_priceRange;
                    t.value() ? o.m_priceRange = new n(o._toLog(e.minValue()), o._toLog(e.maxValue())) : o.m_priceRange = new n(o._fromLog(e.minValue()), o._fromLog(e.maxValue()))
                }
            }), this._properties.percentage.listeners().subscribe(null, function() {
                o._properties.autoScale.setValue(!0)
            }), this._properties.percentage.listeners().subscribe(null, function() {
                var t, e, i;
                o._properties.autoScaleDisabled.setValue(o._properties.percentage.value()), t = o.priceRange(), !o.mainSource() || o.mainSource().model().timeScale().isEmpty() || o.mainSource().data().isEmpty() || o.mainSource() instanceof _ && !o.mainSource().properties().lockScale.value() || !t || (e = o.mainSource().model().timeScale().visibleBars(), i = o.mainSource().data().search(e.firstBar(), TradingView.SEARCH_NEAREST_RIGHT).value[TradingView.CLOSE_PLOT], null != t && void 0 !== i && (o._properties.percentage.value() ? o.setPriceRange(t.convertToPercents(i)) : o.setPriceRange(t.convertFromPercents(i))))
            }), this._sourcesForAutoscale = null, this._sourcesToUpdateViews = null, this._hasSeries = !1, this._properties.percentage.listeners().subscribe(null, i), this._properties.log.listeners().subscribe(null, i), this._properties.listeners().subscribe(null, function() {
                o.mainSource() && o.mainSource().model() && o.mainSource().model().fullUpdate()
            })
        }
        var l = i(134),
            c = l.study_ESD$TV_EARNINGS,
            h = l.study_ESD$TV_SPLITS,
            d = l.study_ESD$TV_DIVIDENDS,
            u = i(140),
            p = i(77).LineDataSource,
            f = i(80).PriceDataSource,
            _ = i(53),
            g = i(83),
            m = g.PriceFormatter,
            v = g.PercentageFormatter;
        o.prototype.TICK_SPAN_EPSILON = 1e-9, o.prototype.tickSpan = function(t, i, n) {
            var o, r = 0 === this.m_base ? 0 : 1 / this.m_base,
                s = this.TICK_SPAN_EPSILON,
                a = Math.pow(10, Math.max(0, Math.ceil(e.log10(t - i)))),
                l = 0;
            for (l = 0, o = this.m_integralDividers[0]; a > r + s && e.greaterOrEqual(a, r, s) && e.greaterOrEqual(a, n * o, s) && e.greaterOrEqual(a, 1, s); ++l, o = this.m_integralDividers[l % this.m_integralDividers.length]) a /= o;
            if (r + s >= a && (a = r), a = Math.max(1, a), this.m_fractionalDividers.length > 0 && e.equal(a, 1, s))
                for (l = 0, o = this.m_fractionalDividers[0]; a > r + s && e.greaterOrEqual(a, n * o, s); ++l, o = this.m_fractionalDividers[l % this.m_fractionalDividers.length]) a /= o;
            return a
        }, r.prototype.TICK_DENSITY = 2.5, r.prototype.base = function() {
            return this.m_base
        }, r.prototype.setBase = function(t) {
            if (0 > t) throw new RangeError("base < 0");
            this.m_base = t
        }, r.prototype.fontHeight = function() {
            return this.m_priceScale.fontSize()
        }, r.prototype.tickSpan = function(t, i) {
            var n, r, s, a, l, c, h, d;
            if (i > t) throw new RangeError("high < low");
            return n = this.m_priceScale.height(), r = this.tickMarkHeight(), s = (t - i) * r / n, a = new o(this.m_base, [2, 2.5, 2]), l = new o(this.m_base, [2, 2, 2.5]), c = new o(this.m_base, [2.5, 2, 2]), h = [], h.push(a.tickSpan(t, i, s)), h.push(l.tickSpan(t, i, s)), h.push(c.tickSpan(t, i, s)), d = e.min(h)
        }, r.prototype.tickMarkHeight = function() {
            return Math.ceil(this.fontHeight() * this.TICK_DENSITY)
        }, r.prototype.rebuildTickMarks = function() {
            var t, e, i, n, o, r, a, l, c, h, d, p, f;
            if (null === this.m_priceScale) throw new TypeError("scale is null");
            if (this.m_priceScale.isEmpty()) return void(this.m_marks = []);
            if (t = this.m_priceScale.height(), e = this.m_priceScale.coordinateToPrice(t - 1), i = this.m_priceScale.coordinateToPrice(0), n = i >= e ? 1 : -1, o = Math.max(i, e), r = Math.min(i, e), i = o, e = r, i !== e)
                for (a = this.tickSpan(i, e), l = i % a, l += 0 > l ? a : 0, this.m_marks = [], this._formatter || (c = s(a), this._cache && this._currentFormatBase === c || (h = new m(c), this._cache = new u(function(t) {
                    return h.format(t)
                }))), d = null, p = i - l; p > e; p -= a) f = this.m_priceScale.priceToCoordinate(p), null !== d && Math.abs(f - d) < this.tickMarkHeight() || (this.m_marks.push({
                    coord: f,
                    label: this._cache.format(p)
                }), d = f, this.m_priceScale.isLog() && (a = this.tickSpan(p * n, e)))
        }, r.prototype.marks = function() {
            return this.m_marks
        }, a.prototype.isLog = function() {
            return this._properties.log.value()
        }, a.prototype.isPercent = function() {
            return this._properties.percentage.value()
        }, a.prototype.properties = function() {
            return this._properties
        }, a.prototype.fontSize = function() {
            return this._scalesProperties.fontSize.value()
        }, a.prototype.height = function() {
            return this.m_height
        }, a.prototype.setHeight = function(t) {
            var e = this.m_height;
            this.m_height = t, this._internalHeightCache = void 0, this._marksCache = null, e !== t && this.mainSource() instanceof _ && this.mainSource().isLockScale() && this.mainSource().model().timeScale().recalcLockedScale()
        }, a.prototype.topMargin = function() {
            return Math.max(this.m_topMargin, this._studyTopMargin)
        }, a.prototype.setTopMargin = function(t) {
            if (!isNumber(t)) throw new TypeError("invalid margin");
            if (0 > t || t > 30) throw new RangeError("invalid margin");
            this.m_topMargin = t, this._internalHeightCache = void 0, this._marksCache = null
        }, a.prototype.bottomMargin = function() {
            return Math.max(this.m_bottomMargin, this._studyBottomMargin)
        }, a.prototype.setBottomMargin = function(t) {
            if (!isNumber(t)) throw new TypeError("invalid margin");
            if (0 > t || t > 30) throw new RangeError("invalid margin");
            this.m_bottomMargin = t, this._internalHeightCache = void 0, this._marksCache = null
        }, a.prototype.internalHeight = function() {
            if (this._internalHeightCache) return this._internalHeightCache;
            var t = this.height() * (1 - this.topMargin() - this.bottomMargin());
            return this._internalHeightCache = t, t
        }, a.prototype.priceRange = function() {
            return this.makeSureItIsValid(), this.m_priceRange
        }, a.prototype.setPriceRange = function(t) {
            if (!t instanceof n) throw new TypeError("incorrect price range");
            this.m_priceRange && this.m_priceRange.equals(t) || (this.m_priceRange = t, this._marksCache = null)
        }, a.prototype.isEmpty = function() {
            return this.makeSureItIsValid(), 0 === this.m_height || !this.m_priceRange || this.m_priceRange.isEmpty()
        }, a.prototype.invertedCoordinate = function(t) {
            return this.height() - 1 - t
        }, a._logicalOffset = 4, a._coordOffset = 1e-4, a.prototype.log10 = function(t) {
            return Math.log(t) / Math.log(10)
        }, a.prototype._toLog = function(t) {
            var e, i = Math.abs(t);
            return 1e-6 > i ? 0 : (e = this.log10(i + a._coordOffset) + a._logicalOffset, 0 > t ? -e : e)
        }, a.prototype.priceToLogical = function(t) {
            return this.isLog() && t ? this._toLog(t) : t
        }, a.prototype._fromLog = function(t) {
            var e, i = Math.abs(t);
            return 1e-6 > i ? 0 : (e = Math.pow(10, i - a._logicalOffset) - a._coordOffset, 0 > t ? -e : e)
        }, a.prototype.logicalToPrice = function(t) {
            return this.isLog() ? this._fromLog(t) : t
        }, a.prototype.priceToCoordinate = function(t, e) {
            var i, n;
            return this.makeSureItIsValid(), this.isEmpty() ? 0 : (t = this.priceToLogical(t), i = this.bottomMargin() * this.height() + (this.internalHeight() - 1) * (t - this.priceRange().minValue()) / (this.priceRange().maxValue() - this.priceRange().minValue()), n = this.invertedCoordinate(i), e ? n : Math.round(n))
        }, a.prototype.pricesToCoordinates = function(t) {
            this.pricesToCoordinatesEx(t, function(t) {
                return t.y
            }, function(t, e) {
                t.y = e
            })
        }, a.prototype.pricesToCoordinatesEx = function(t, e, i) {
            var n, o, r, s, a, l, c, h, d;
            if (this.makeSureItIsValid(), n = this.bottomMargin() * this.height(), o = this.priceRange().minValue(), r = this.priceRange().maxValue(), s = this.internalHeight() - 1, a = s / (r - o), this.isLog())
                for (l = 0; l < t.length; l++) c = e(t[l]), i(t[l], this.priceToLogical(c));
            for (l = 0; l < t.length; l++) c = e(t[l]), TradingView.isNaN(c) || void 0 === c || null === c || (h = n + a * (c - o), d = this.m_height - 1 - h, i(t[l], Math.round(d)))
        }, a.prototype.pointsArrayToCoordinates = function(t) {
            var e, i, n, o, r, s, a, l, c;
            if (this.makeSureItIsValid(),
                    e = this.bottomMargin() * this.height(), i = this.priceRange().minValue(), n = this.priceRange().maxValue(), o = this.internalHeight() - 1, r = o / (n - i), this.isLog())
                for (s = 0; s < t.length; s++) t[s].y = this.priceToLogical(t[s].y);
            for (s = 0; s < t.length; s++) a = t[s].y, TradingView.isNaN(a) || void 0 === a || null === a || (l = e + r * (a - i), c = this.m_height - 1 - l, t[s].y = Math.round(c))
        }, a.prototype.pricesArrayToCoordinates = function(t) {
            var e, i, n, o, r, s, a, l, c;
            if (this.makeSureItIsValid(), e = this.bottomMargin() * this.height(), i = this.priceRange().minValue(), n = this.priceRange().maxValue(), o = this.internalHeight() - 1, r = o / (n - i), this.isLog())
                for (s = 0; s < t.length; s++) t[s] = this.priceToLogical(t[s]);
            for (s = 0; s < t.length; s++) a = t[s], void 0 !== a && null !== a && (l = e + r * (a - i), c = this.m_height - 1 - l, t[s] = Math.round(c))
        }, a.prototype.barPricesToCoordinates = function(t) {
            var e, i, n, o, r, s, a, l, c, h, d;
            if (this.makeSureItIsValid(), e = t, i = this.bottomMargin() * this.height(), n = this.priceRange().minValue(), o = this.priceRange().maxValue(), r = this.internalHeight() - 1, s = r / (o - n), this.isLog())
                for (a = 0; a < e.length; a++) e[a] && (e[a].open = this.priceToLogical(e[a].open), e[a].high = this.priceToLogical(e[a].high), e[a].low = this.priceToLogical(e[a].low), e[a].close = this.priceToLogical(e[a].close), e[a].additionalPrice && (e[a].additionalPrice = this.priceToLogical(e[a].additionalPrice)));
            for (a = 0; a < e.length; a++) l = e[a], l && (c = l.open, h = i + s * (c - n), d = this.m_height - 1 - h, l.open = Math.round(d), c = l.high, h = i + s * (c - n), d = this.m_height - 1 - h, l.high = Math.round(d), c = l.low, h = i + s * (c - n), d = this.m_height - 1 - h, l.low = Math.round(d), c = l.close, h = i + s * (c - n), d = this.m_height - 1 - h, l.close = Math.round(d), l.additionalPrice && (c = l.additionalPrice, h = i + s * (c - n), d = this.m_height - 1 - h, l.additionalPrice = Math.round(d)))
        }, a.prototype.coordinateToPrice = function(t) {
            var e, i;
            return this.makeSureItIsValid(), this.isEmpty() ? 0 : (e = this.invertedCoordinate(t), i = this.priceRange().minValue() + (this.priceRange().maxValue() - this.priceRange().minValue()) * ((e - this.bottomMargin() * this.height()) / (this.internalHeight() - 1)), this.logicalToPrice(i))
        }, a.prototype.isAutoScale = function() {
            return this._properties.autoScale.value() && !(this.mainSource() instanceof _ && this.mainSource().isLockScale())
        }, a.prototype.isPercentage = function() {
            return this._properties.percentage.value()
        }, a.prototype.dataSources = function() {
            return this.m_dataSources
        }, a.prototype.orderedSources = function() {
            var t, e, n, o;
            if (this._cachedOrderedSoruces) return this._cachedOrderedSoruces;
            for (t = [], e = 0; e < this.m_dataSources.length; e++) n = this.m_dataSources[e], null == n.zorder() && n.setZorder(e + 1), t.push(n);
            return o = i(141), t = o.sortSources(t), this._cachedOrderedSoruces = t, this._cachedOrderedSoruces
        }, a.prototype.invalidateSourcesCache = function() {
            this._cachedOrderedSoruces = null
        }, a.prototype.addDataSource = function(t) {
            if (-1 === this.m_dataSources.indexOf(t)) {
                TradingView.isInherited(t.constructor, _) && (this._hasSeries = !0);
                var e = this;
                t.properties().visible.listeners().subscribe(null, function() {
                    e._sourcesForAutoscale = null
                }), this.m_dataSources.push(t), this._mainSource = void 0, this._sourcesForAutoscale = null, this._sourcesToUpdateViews = null, this.updateFormatter(), this.initScaleProperties(), this.invalidateSourcesCache()
            }
        }, a.prototype.initScaleProperties = function() {
            var t = this.mainSource() instanceof _ && this.mainSource().properties().lockScale.value();
            t && (this.properties().percentage.setValue(!1), this.properties().log.setValue(!1), this.properties().autoScale.setValue(!1)), this.properties().percentageDisabled.setValue(t), this.properties().logDisabled.setValue(t), this.properties().autoScaleDisabled.setValue(this.properties().percentage.value()), this.properties().percentage.value() && this.properties().log.setValue(!1)
        }, a.prototype.removeDataSource = function(t) {
            var e = this.m_dataSources.indexOf(t);
            if (-1 === e) throw Error("source is not attached to scale");
            this.m_dataSources.splice(e, 1), TradingView.isInherited(t.constructor, _) && (this._hasSeries = !1), this.mainSource() || this.setAutoScale(!0), this._mainSource = void 0, this._sourcesForAutoscale = null, this._sourcesToUpdateViews = null, this.updateFormatter(), this.invalidateSourcesCache()
        }, a.prototype.setAutoScale = function(t) {
            this._properties.autoScale.setValue(t)
        }, a.prototype.isScaled = function() {
            return "number" == typeof this.m_scaleStartPoint
        }, a.prototype.startScale = function(t) {
            this.isPercentage() || null === this.m_scaleStartPoint && null === this.m_priceRangeSnapshot && (this.isEmpty() || (this.m_scaleStartPoint = this.m_height - t, this.m_priceRangeSnapshot = this.priceRange().clone()))
        }, a.prototype.marks = function() {
            return this._marksCache ? this._marksCache : (this.m_markBuilder.rebuildTickMarks(), this._marksCache = this.m_markBuilder.marks(), this._marksCache)
        }, a.prototype.scaleTo = function(t) {
            var e, i;
            this.isPercentage() || (this._marksCache = null, null !== this.m_scaleStartPoint && (this.setAutoScale(!1), e = this.m_priceRange.clone(), t = this.m_height - t, 0 > t && (t = 0), i = (this.m_scaleStartPoint + .2 * (this.m_height - 1)) / (t + .2 * (this.m_height - 1)), i = Math.max(i, .1), this.m_priceRange = this.m_priceRangeSnapshot.clone(), this.m_priceRange.scaleAroundCenter(i), this.recalcLockedScale(e)))
        }, a.prototype.recalcLockedScale = function(t) {
            var e, i, o, r;
            if (this.mainSource() instanceof _ && this.mainSource().properties().lockScale.value()) {
                if (e = this.mainSource().model().timeScale(), i = this.mainSource().data().boxSize, void 0 === i && this.mainSource().fixBoxSize(), void 0 === i) return;
                this.properties().percentage.value() && (o = this.mainSource().data().search(this.mainSource().getRealVisibleRange().m_firstBar).value[TradingView.CLOSE_PLOT], i = n.prototype.convertToPercent.call(null, o + i, o) - n.prototype.convertToPercent.call(null, o, o)), r = this.internalHeight() / this.priceRange().length() * i, .5 > r || r > 50 ? this.m_priceRange = t : (e.setBarSpacing(r), e._correctOffset()), this.mainSource().model().mainSeries().requestMoreData()
            }
        }, a.prototype.endScale = function() {
            this.isPercentage() || null !== this.m_scaleStartPoint && (this.m_scaleStartPoint = null, this.m_priceRangeSnapshot = null)
        }, a.prototype.startScroll = function(t) {
            this.isAutoScale() || null === this.m_scrollStartPoint && null === this.m_priceRangeSnapshot && (this.isEmpty() || (this.m_scrollStartPoint = t, this.m_priceRangeSnapshot = this.priceRange().clone()))
        }, a.prototype.scrollTo = function(t) {
            var e, i, n;
            this._marksCache = null, this.isAutoScale() || null !== this.m_scrollStartPoint && (e = this.priceRange().length() / (this.height() - 1), i = t - this.m_scrollStartPoint, n = i * e, this.m_priceRange = this.m_priceRangeSnapshot.clone(), this.m_priceRange.shift(n))
        }, a.prototype.endScroll = function() {
            this.isAutoScale() || null !== this.m_scrollStartPoint && (this.m_scrollStartPoint = null, this.m_priceRangeSnapshot = null)
        }, a.prototype.state = function() {
            var t = {};
            return t.m_priceRange = this.priceRange() ? this.priceRange().clone() : null, t.m_isAutoScale = this.isAutoScale(), t.m_isPercentage = this._properties.percentage.value(), t.m_isLog = this._properties.log.value(), t.m_height = this.m_height, t.m_topMargin = this.m_topMargin, t.m_bottomMargin = this.m_bottomMargin, t
        }, a.prototype.restoreState = function(t) {
            var e = t.m_priceRange;
            if (void 0 === e) throw new TypeError("invalid state");
            if (void 0 === t.m_isAutoScale) throw new TypeError("invalid state");
            void 0 !== t.m_isPercentage && this._properties.percentage.setValue(t.m_isPercentage), void 0 !== t.m_isLog && this._properties.log.setValue(t.m_isLog), this.m_priceRange = e ? new n(e.m_minValue, e.m_maxValue) : null, void 0 !== t.m_height && (this.m_height = t.m_height), this.setAutoScale(t.m_isAutoScale), void 0 !== t.m_topMargin && (this.m_topMargin = t.m_topMargin), void 0 !== t.m_bottomMargin && (this.m_bottomMargin = t.m_bottomMargin), this._mainSource = void 0, this._scaleSeriesOnly = !1
        }, a.prototype.mainSource = function() {
            var t, e;
            if (void 0 !== this._mainSource) return this._mainSource;
            for (t = 0; t < this.m_dataSources.length; t++)
                if (TradingView.isInherited(this.m_dataSources[t].constructor, f)) return e = this.m_dataSources[t], this._mainSource = e, e;
            return this._mainSource = void 0, null
        }, a.prototype.formatter = function() {
            return this._formatter || this.updateFormatter(), this._formatter
        }, a.prototype.updateFormatter = function() {
            var t, e;
            this._marksCache = null, t = this.mainSource(), e = 100, t && (e = t.base()), this._formatter = null, this.properties().percentage.value() ? this._formatter = new v : t ? this._formatter = t.formatter() : this._formatter = new m(100, 1), this.m_markBuilder = new r(this, e, this._formatter), this.m_markBuilder.rebuildTickMarks()
        }, a.prototype._recalculateSourcesForAutoscale = function() {
            var t, e;
            this._mainSource && (this._scaleSeriesOnly = this._scalesProperties.scaleSeriesOnly.value()), t = this._scaleSeriesOnly && this._hasSeries, e = function(e) {
                return e.properties().visible.value() || e instanceof _ ? e instanceof d || e instanceof h || e instanceof c ? !1 : t ? TradingView.isInherited(e.constructor, _) : TradingView.isInherited(e.constructor, f) : !1
            }, this._sourcesForAutoscale = this.m_dataSources.filter(e)
        }, a.prototype.sourcesForAutoscale = function() {
            return this._mainSource && this._scaleSeriesOnly !== this._scalesProperties.scaleSeriesOnly.value() && (this._sourcesForAutoscale = null), this._sourcesForAutoscale || this._recalculateSourcesForAutoscale(), this._sourcesForAutoscale
        }, a.prototype.recalculatePriceRange = function(t) {
            this._invalidatedForRange = {
                visibleBars: t,
                isValid: !1
            }
        }, a.prototype.makeSureItIsValid = function() {
            this._invalidatedForRange.isValid || (this._invalidatedForRange.isValid = !0, this.recalculatePriceRangeImpl())
        }, a.prototype.recalculatePriceRangeImpl = function() {
            var t, e, i, o, r, s, a, l, c, h, d = this._invalidatedForRange.visibleBars;
            if (d) {
                for (t = null, e = this.sourcesForAutoscale(), i = 0, o = 0, r = 0; r < e.length; r++) s = e[r], s.properties().visible.value() && (a = d.firstBar(), l = d.lastBar(), c = s.priceRange(a, l), null === t && c ? t = c : c && (t = t.merge(c)), s.margins && (h = s.margins(), i = Math.max(h[0], i), o = Math.max(h[1], o)));
                (Math.abs(o - this._studyBottomMargin) > .01 || Math.abs(i - this._studyTopMargin) > .01) && (this._studyBottomMargin = o, this._studyTopMargin = i, this._marksCache = null, this._internalHeightCache = null), t ? (t.minValue() === t.maxValue() && (t = new n(t.minValue() - .5, t.maxValue() + .5)), this.setPriceRange(t)) : this.m_priceRange || this.setPriceRange(new n(-.5, .5)), this._invalidatedForRange.isValid = !0
            }
        }, a.prototype.sourcesToUpdateViews = function() {
            var t, e;
            if (!this._sourcesToUpdateViews)
                for (this._sourcesToUpdateViews = [], t = 0; t < this.m_dataSources.length; t++) e = this.m_dataSources[t], TradingView.isInherited(e.constructor, p) && !e.isActualSymbol() || this._sourcesToUpdateViews.push(e);
            return this._sourcesToUpdateViews
        }, a.prototype.updatePaneViews = function() {
            var t, e = this.sourcesToUpdateViews();
            for (t = 0; t < e.length; t++) e[t].updateAllViews()
        }, t.exports = a
    }).call(e, i(40), i(54))
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(t, e, i, n, o) {
            this._paneView = o, TradingView.Study.call(this, t, e, i, n)
        }

        function o(t, e, i, o) {
            n.call(this, t, e, i, o, new h(t, this))
        }

        function r(t, e, i, o) {
            n.call(this, t, e, i, o, new d(t, this))
        }

        function s(t, e, i, o) {
            n.call(this, t, e, i, o, new u(t, this)), this.pointSets = {}, this.updateEstimateHandler = this.updateEstimate.bind(this)
        }
        var a = i(135),
            l = i(64).DataWindowView,
            c = i(136),
            h = c.DividendsPaneView,
            d = c.SplitsPaneView,
            u = c.EarningsPaneView,
            p = i(138);
        inherit(n, TradingView.Study), n.prototype.createViews = function() {
            this._paneViews = [this._paneView], this._priceAxisViews = [], this._dataWindowView || (this._dataWindowView = new l), this._statusView || (this._statusView = new a(this, this._model.properties()))
        }, n.prototype.showInObjectTree = function() {
            return !1
        }, n.prototype.isSavedInStudyTemplates = function() {
            return !1
        }, n.prototype.isRemovedByStudyTemplates = function() {
            return !1
        }, n.prototype.removeByRemoveAllStudies = function() {
            return !1
        }, n.prototype.statusView = function() {
            return !1
        }, n.prototype.onData = function(t) {
            TradingView.Study.prototype.onData.call(this, t), "study_completed" === t.method && this._restartRequired && (delete this._restartRequired, this.restart())
        }, n.prototype.start = function() {
            TradingView.Study.prototype.start.call(this), this._model.mainSeries().onSymbolResolved().subscribe(this, this._initPlotStash), this._initPlotStash()
        }, n.prototype.stop = function() {
            TradingView.Study.prototype.stop.call(this), this._model.mainSeries().onSymbolResolved().unsubscribe(this, this._initPlotStash)
        }, n.prototype.isSavedInChart = function(t) {
            return t
        }, n.prototype._initPlotStash = function() {
            this._plotStash = {}
        }, n.prototype._updatePlotStash = function(t, e) {
            var i, n, o;
            !this._restartRequired && this._plotStash && (i = t.value.slice(), n = i.shift(), o = n + "", e ? this._plotStash[o] ? this._plotStash[o] + "" != i + "" && (this._restartRequired = !0) : this._plotStash[o] = i : this._plotStash[o] && (this._restartRequired = !0))
        }, n.prototype.transformData = function(t) {
            for (var e, i, n = t.length - 1; n >= 0; --n) e = t[n], i = this.isValid(e.value), this._updatePlotStash(e, i), i || t.splice(n, 1)
        }, n.prototype.isValid = function(t) {
            throw Error("Not Implemented")
        }, n.prototype.restoreData = function(t) {
            this.transformData(t.data), t.end = t.data.length, TradingView.Study.prototype.restoreData.call(this, t)
        }, n.getSettingsValue = function(t, e) {
            var i = null;
            switch (t) {
                case "DIVIDENDS":
                    i = e.esdShowDividends.value();
                    break;
                case "SPLITS":
                    i = e.esdShowSplits.value();
                    break;
                case "EARNINGS":
                    i = e.esdShowEarnings.value()
            }
            return i
        }, inherit(o, n), o.prototype.isValid = function(t) {
            var e = t[2];
            return $.isNumeric(e)
        }, inherit(r, n), r.prototype.isValid = function(t) {
            var e = t[3];
            return $.isNumeric(e)
        }, inherit(s, n), s.pointSetCounter = 1, s.pointSetsVersion = "1", s.prototype.isValid = function(t) {
            var e = t[3],
                i = t[4];
            return $.isNumeric(e) && $.isNumeric(i)
        }, s.prototype.restorePointset = function(e) {
            return {
                estimate: {
                    index: e.index,
                    value: [e.tickmark, void 0, e.estimate, $.isNumeric(e.period) ? e.period : t(e.period).unix(), $.isNumeric(e.date) ? e.date : t(e.date).unix()]
                }
            }
        }, s.prototype.restoreData = function(t) {
            var e, i;
            n.prototype.restoreData.call(this, t), e = this.currentPointsetKey(), e && (t.estimate ? this.pointSets[e] = this.restorePointset(t.estimate) : t.pointSets && null == t.pointSetsVersion ? (i = e.split(":")[1].toUpperCase(), t.pointSets[e] ? this.pointSets[e] = this.restorePointset(t.pointSets[e]) : t.pointSets[i] && (this.pointSets[e] = this.restorePointset(t.pointSets[i]))) : t.pointSets && "1" === t.pointSetsVersion && (this.pointSets = t.pointSets))
        }, s.prototype.state = function(t) {
            var e, i, o = n.prototype.state.call(this, t);
            if (t) {
                e = {};
                for (i in this.pointSets) this.pointSets.hasOwnProperty(i) && (e[i] = {
                    estimate: this.pointSets[i].estimate
                });
                o.data.pointSets = e, o.data.pointSetsVersion = s.pointSetsVersion
            }
            return o
        }, s.prototype.stop = function() {
            n.prototype.stop.call(this);
            var t = this;
            Object.keys(this.pointSets).forEach(function(e) {
                var i = t.pointSets[e];
                i.promise && i.promise.always(function() {
                    i.sessionId === t._model.chartApi()._chartApi.sessionid && t._model.chartApi().removePointset(i.pointsetId)
                })
            }), this.pointSets = {}, this._estimatesCache.off("data", this.updateEstimateHandler), this._estimatesCache.destroy(), this._model.mainSeries().onSymbolResolved().unsubscribe(this, this.requestEstimate)
        }, s.prototype.generatePointsetId = function() {
            return "pointsetEstimates_" + s.pointSetCounter++
        }, s.prototype.getEstimate = function() {
            var t, e = this.currentPointsetKey();
            return e ? (t = this.pointSets[e], t ? t.estimate : null) : null
        }, s.prototype.currentPointsetKey = function() {
            var t = this._series.symbolInfo();
            return t ? t.base_name[0].toLowerCase() : null
        }, s.prototype.createPointsetKey = function(t, e) {
            return t.toLowerCase() + ":" + e.toLowerCase()
        }, s.prototype.updateEstimate = function(t) {
            if (this._model.chartApi().connected()) {
                var e = this;
                this._model.timeScale().isEmpty() ? this._model.mainSeries().onDataLoaded().subscribe(null, function(i) {
                    "series_loading" !== i.method && e.updateEstimateImpl(t)
                }, !0) : this.updateEstimateImpl(t)
            }
        }, s.prototype.updateEstimateImpl = function(t) {
            var e, i, n;
            this._model.chartApi().connected() && (e = this, i = this.createPointsetKey(t.exchange, t.symbol), n = this.pointSets[i], n && n.promise && (n.promise.always(function() {
                n.sessionId === e._model.chartApi()._chartApi.sessionid && e._model.chartApi().removePointset(n.pointsetId)
            }), delete this.pointSets[i]), t.date && t.period && (t.reported || t.estimate) && (this.pointSets[i] = this.createPointset(t)))
        }, s.prototype.start = function() {
            n.prototype.start.call(this), this.pointSets = {}, this._estimatesCache = p(), this._estimatesCache.on("data", this.updateEstimateHandler), this._model.mainSeries().onSymbolResolved().subscribe(this, this.requestEstimate), this.requestEstimate()
        }, s.prototype.createPointset = function(e) {
            var i, n, o, r = this.generatePointsetId(),
                s = this._model.mainSeries().symbolId(),
                a = this._model.mainSeries().properties().interval.value(),
                l = [];
            return l.push([t(e.date).unix(), 0]), i = $.Deferred(), n = {
                promise: i.promise(),
                pointsetId: r,
                sessionId: this._model.chartApi()._chartApi.sessionid
            }, o = this, this._model.chartApi().createPointset(r, "turnaround", s, a, l, function(s) {
                return s.params.customId !== r ? i.reject() : 0 === s.params.plots.length ? i.reject() : s.params.plots[0].value[0] < o._model.timeScale().points().lastTimePointIndex() ? i.reject() : (n.estimate = {
                    index: s.params.plots[0].value[0],
                    value: [s.params.plots[0].value[1], e.reported, e.estimate, t(e.period).unix(), t(e.date).unix()]
                }, i.resolve())
            }), n
        }, s.prototype.requestEstimate = function() {
            var t, e, i;
            this._estimatesCache.resetSymbol(), t = this.currentPointsetKey(), t && this._model.chartApi().connected() && (e = t.split(":")[0], i = t.split(":")[1], this._estimatesCache.setSymbol(e, i))
        }, e.ESDStudyBase = n, e.study_ESD$TV_EARNINGS = s, e.study_ESD$TV_SPLITS = r, e.study_ESD$TV_DIVIDENDS = o
    }).call(e, i(23))
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        o.call(this, e), this._study = t, this._inputValueReplacements = {
            NONE: "Default"
        }
    }
    var o = i(57);
    inherit(n, o), n.prototype.color = function() {
        return this._study._failed || this._study.metaInfo && this._study.metaInfo().isTVScriptStub ? "#ff0000" : o.prototype.color.call(this)
    }, n.prototype.update = function() {
        this._study._failed ? this._text = this._study.title(!0, this._inputValueReplacements) + ": " + this._study.status() : this._text = this._study.title(!0, this._inputValueReplacements) + " " + this._study.status()
    }, t.exports = n
}, function(t, e, i) {
    (function(t, n, o) {
        "use strict";

        function r(t, e) {
            this._model = t, this._study = e, this._metaInfo = e.metaInfo(), this.lollipops = [], this._textCache = {}, this.templatesCache = {}, this._invalidated = !0, this.templatesCache.hovered = this.createTemplate(this.hoveredStyle), this.templatesCache["default"] = this.createTemplate(this.defaultStyle)
        }

        function s(t) {
            this.data = t
        }

        function a(t) {
            this.data = t, this._hittest = new u(u.REGULAR, t)
        }

        function l(t) {
            this._data = t, this.textRenderer = new l.TextRenderer
        }

        function c(t, e) {
            this.defaultStyle = {
                strokeStyle: "#E2745B",
                lineWidth: 1,
                fillStyle: "white",
                barLine: {
                    lineStyle: CanvasEx.LINESTYLE_DASHED
                },
                lollipop: {
                    width: 32,
                    height: 96,
                    circleHeight: 35,
                    radius: 11,
                    lineWidth: 2,
                    fillStyle: "white",
                    strokeStyle: "#E2745B",
                    text: {
                        label: "E",
                        strokeStyle: "#E2745B",
                        font: "normal 12px Verdana, Arial, sans-serif"
                    }
                }
            };
            var i = {
                lollipop: {
                    fillStyle: "#E2745B",
                    text: {
                        strokeStyle: "white"
                    }
                }
            };
            this.hoveredStyle = $.extend(!0, {}, this.defaultStyle, i), r.call(this, t, e)
        }

        function h(t, e) {
            this.defaultStyle = {
                strokeStyle: "#58B986",
                lineWidth: 1,
                fillStyle: "white",
                barLine: {
                    lineStyle: CanvasEx.LINESTYLE_DASHED
                },
                lollipop: {
                    width: 32,
                    height: 96,
                    circleHeight: 35,
                    radius: 11,
                    lineWidth: 2,
                    fillStyle: "white",
                    strokeStyle: "#58B986",
                    text: {
                        label: "S",
                        strokeStyle: "#58B986",
                        font: "normal 12px Verdana, Arial, sans-serif"
                    }
                }
            };
            var i = {
                lollipop: {
                    fillStyle: "#58B986",
                    text: {
                        strokeStyle: "white"
                    }
                }
            };
            this.hoveredStyle = $.extend(!0, {}, this.defaultStyle, i), r.call(this, t, e)
        }

        function d(t, e) {
            this.defaultStyle = {
                strokeStyle: "#4E89CB",
                lineWidth: 1,
                fillStyle: "white",
                barLine: {
                    lineStyle: CanvasEx.LINESTYLE_DASHED
                },
                lollipop: {
                    width: 32,
                    height: 96,
                    circleHeight: 35,
                    radius: 11,
                    lineWidth: 2,
                    fillStyle: "white",
                    strokeStyle: "#4E89CB",
                    text: {
                        label: "D",
                        strokeStyle: "#4E89CB",
                        font: "normal 12px Verdana, Arial, sans-serif"
                    }
                }
            };
            var i = {
                lollipop: {
                    fillStyle: "#4E89CB",
                    text: {
                        strokeStyle: "white"
                    }
                }
            };
            this.hoveredStyle = $.extend(!0, {}, this.defaultStyle, i), r.call(this, t, e)
        }
        var u = i(67),
            p = i(71),
            f = i(134);
        r.prototype._setStackStudies = function() {
            var t, e, i;
            if (this._stackStudies = [], !(this._study instanceof f.study_ESD$TV_EARNINGS))
                for (t = this._model.dataSources(), e = 0; e < t.length; ++e) i = t[e], (i instanceof f.study_ESD$TV_EARNINGS || i instanceof f.study_ESD$TV_SPLITS && this._study instanceof f.study_ESD$TV_DIVIDENDS) && this._stackStudies.push(i)
        }, r.prototype._getY = function() {
            var t, e, i = 0,
                n = this._model.panes();
            for (t = n.length; t--;) e = n[t], e.containsMainSeries() && (i += e.height());
            return i
        }, r.prototype.update = function() {
            this._invalidated = !0
        }, r.prototype.updateImpl = function() {
            var t, e, i, n, o, r, s, a, l, c;
            this._setStackStudies(), this.lollipops = [], t = this, e = this._study.data(), i = this._model.timeScale(), n = i.visibleBars(), o = this._model.mainSeries().bars(), r = this._study.priceScale(), s = this._model.mainSeries(), a = s.firstBar(), r && !r.isEmpty() && !i.isEmpty() && a && e && (l = this._getY(), c = e.range(n.firstBar(), n.lastBar()), c.each(function(e, n) {
                var s, a = 0;
                for (s = 0; s < t._stackStudies.length; ++s) t._stackStudies[s].data().contains(e) && ++a;
                t.addLollipop(l, o, i, r, e, n, a)
            }), this.afterUpdate(l, o, i, r))
        }, r.prototype.addLollipop = function(e, i, n, o, r, s, a) {
            var l, c, h, d, u = s[0],
                p = null,
                f = this._study.metaInfo().id + "_" + u,
                _ = this._model.lastHittestData(),
                g = _ && _.id === f;
            g && (l = i.valueAt(r), l && (c = l[TradingView.LOW_PLOT], o.isPercent() && (h = this._model.mainSeries().firstValue(), c = o.priceRange().convertToPercent(c, h)), p = o.priceToCoordinate(c))), d = $.extend({
                id: f,
                basePoint: new t.Point(n.indexToCoordinate(r) + 1, e),
                hovered: g,
                barY: p,
                stack: a
            }, this.extraData(s)), this.lollipops.push(d)
        }, r.prototype.afterUpdate = function(t, e, i) {}, r.prototype.extraData = function(t) {
            throw Error("Not Implemented")
        }, r.prototype.createText = function(t, e) {
            throw Error("Not Implemented")
        }, r.prototype.showBarLine = function() {
            return !0
        }, r.prototype.getStyle = function(t, e) {
            var i, n = t;
            return e.stack && (n += "_stack:" + e.stack), "hovered" === n ? this.hoveredStyle : "default" === n ? this.defaultStyle : (this._stylesCache || (this._stylesCache = {}), this._stylesCache[n] || (i = TradingView.clone("hovered" === t ? this.hoveredStyle : this.defaultStyle), e.stack && (i.lollipop.incHeight = 24 * e.stack), this._stylesCache[n] = i), this._stylesCache[n])
        }, r.prototype.hasTooltip = function(t) {
            return !0
        }, r.prototype.renderer = function() {
            var e, i, n, o, r, c, h, d, u;
            for (this._invalidated && (this.updateImpl(), this._invalidated = !1), e = new p, i = 0; i < this.lollipops.length; i++) n = this.lollipops[i], o = 15, r = this.getStyle(n.hovered ? "hovered" : "default", n), n.hovered && this.hasTooltip(n) && (n.barY && this.showBarLine() && (c = {
                style: {
                    lineStyle: r.barLine.lineStyle,
                    strokeStyle: r.strokeStyle,
                    lineWidth: r.lineWidth
                },
                startPoint: new t.Point(n.basePoint.x, n.basePoint.y - r.lollipop.circleHeight),
                endPoint: new t.Point(n.basePoint.x, n.barY)
            }, e.append(new s(c))), h = $.extend({
                tooltipPoint: new t.Point(n.basePoint.x, n.basePoint.y - r.lollipop.circleHeight - o - (r.lollipop.incHeight || 0)),
                style: r,
                createText: this.createText
            }, n), e.append(new l(h))), d = this.getTemplate(n.hovered ? "hovered" : "default", n), u = {
                circlePoint: new t.Point(n.basePoint.x, n.basePoint.y - r.lollipop.circleHeight - (r.lollipop.incHeight || 0)),
                style: r,
                template: d,
                basePoint: n.basePoint,
                id: n.id
            }, e.append(new a(u));
            return e
        }, r.prototype.getTemplate = function(t, e) {
            var i = t;
            return e.stack && (i += "_stack:" + e.stack), this.templatesCache[i] || (this.templatesCache[i] = this.createTemplate(this.getStyle(t, e))), this.templatesCache[i]
        }, r.prototype.createTemplate = function(e) {
            var i = document.createElement("canvas"),
                n = i.getContext("2d"),
                o = new t.Point(e.lollipop.width / 2, e.lollipop.height),
                r = new t.Point(e.lollipop.width / 2, e.lollipop.height - e.lollipop.circleHeight - (e.lollipop.incHeight || 0));
            return this.drawStick(n, e, o, r), this.drawCircle(n, e, r), this.drawLabel(n, e, r), i
        }, r.prototype.drawCircle = function(t, e, i) {
            t.fillStyle = e.lollipop.fillStyle, t.lineWidth = e.lollipop.lineWidth, CanvasEx.setLineStyle(t, CanvasEx.LINESTYLE_SOLID), t.beginPath(), t.arc(i.x, i.y, e.lollipop.radius, 0, 2 * Math.PI, !1), t.closePath(), t.stroke(), t.fill()
        }, r.prototype.drawLabel = function(t, e, i) {
            t.textAlign = "center", t.textBaseline = "middle", t.fillStyle = e.lollipop.text.strokeStyle, t.font = e.lollipop.text.font, t.fillText(e.lollipop.text.label, i.x, i.y)
        }, r.prototype.drawStick = function(t, e, i, n) {
            t.strokeStyle = e.strokeStyle, t.lineWidth = e.lineWidth, CanvasEx.setLineStyle(t, CanvasEx.LINESTYLE_DASHED), CanvasEx.drawLine(t, i.x, i.y, n.x, n.y)
        }, s.prototype.draw = function(t) {
            t.strokeStyle = this.data.style.strokeStyle, t.lineWidth = this.data.style.lineWidth, CanvasEx.setLineStyle(t, this.data.style.lineStyle), CanvasEx.drawLine(t, this.data.startPoint.x, this.data.startPoint.y, this.data.endPoint.x, this.data.endPoint.y)
        }, s.prototype.hitTest = function(t) {
            return null
        }, a.prototype.hitTest = function(e) {
            return t.isInCircle(this.data.circlePoint, this.data.style.lollipop.radius, e) ? this._hittest : null
        }, a.prototype.draw = function(t) {
            var e = this.data.template;
            t.drawImage(e, this.data.basePoint.x - (.5 + this.data.style.lollipop.width / 2 << 0) + .5, this.data.basePoint.y - this.data.style.lollipop.height + .5)
        }, l.prototype.draw = function(t) {
            var e = this._data.tooltipPoint;
            this._data.createText(this._data, this.textRenderer), this.drawFrame(t, e), this.drawTip(t, e)
        }, l.prototype.hitTest = function(t) {
            return null
        }, l.prototype.drawTip = function(t, e) {
            var i = 5,
                n = this.calcMarginX(t, e.x, i),
                o = e.x + n;
            t.lineWidth = this._data.style.lineWidth, t.strokeStyle = this._data.style.fillStyle, t.fillStyle = this._data.style.fillStyle, t.beginPath(), t.moveTo(e.x, e.y), t.lineTo(o - i, e.y - i), t.lineTo(o + i, e.y - i), t.fill(), t.closePath(), t.stroke(), t.strokeStyle = this._data.style.strokeStyle, t.beginPath(), t.moveTo(e.x, e.y), t.lineTo(o - i, e.y - i), t.moveTo(e.x, e.y), t.lineTo(o + i, e.y - i), t.closePath(), t.stroke()
        }, l.prototype.drawFrame = function(e, i) {
            var n, o, r = 200,
                s = 5,
                a = 16,
                l = 7,
                c = 12,
                h = this.textRenderer.measure() + c + l,
                d = this.calcMarginX(e, i.x, r / 2);
            e.lineWidth = this._data.style.lineWidth, CanvasEx.setLineStyle(e, CanvasEx.LINESTYLE_SOLID), e.strokeStyle = this._data.style.strokeStyle, e.fillStyle = this._data.style.fillStyle, e.beginPath(), e.rect(i.x - r / 2 + d, i.y - s - h, r, h), e.closePath(), e.stroke(), e.fill(), n = i.x - r / 2 + a + d, o = i.y - s - h + l + this.textRenderer.fontHeight, this.textRenderer.draw(e, new t.Point(n, o))
        }, l.prototype.calcMarginX = function(t, e, i) {
            var n = 5,
                o = 5,
                r = 0,
                s = t.canvas.clientWidth;
            return n > e - i ? r = Math.abs(e - (i + n)) : e + i > s - o && (r = -Math.abs(s - (i + e + o))), r
        }, l.TextRenderer = function() {
            this.lines = [], this.fontHeight = 12, this.font = this.fontHeight + "px Arial, sans-serif", this.lineSpacing = 8, this.fillStyle = "black"
        }, l.TextRenderer.prototype.draw = function(t, e) {
            var i, n, o = e.y;
            for (i = 0; i < this.lines.length; i++) n = this.lines[i], t.font = this.font, n.options.fontWeight && (t.font = n.options.fontWeight + " " + this.font), t.fillStyle = this.fillStyle, n.renderer(t, n.line, {
                x: e.x,
                y: o
            }), o += this.lineSpacing + this.fontHeight
        }, l.TextRenderer.prototype.measure = function() {
            return this.lines.length * (this.fontHeight + this.lineSpacing) - this.lineSpacing
        }, l.TextRenderer.prototype.basicRenderer = function(t, e, i) {
            t.fillText(e, i.x, i.y)
        }, l.TextRenderer.prototype.addMulticolorTextLine = function(t, e) {
            this.addTextLine(t, e, this.multicolorRenderer)
        }, l.TextRenderer.prototype.addTextLine = function(t, e, i) {
            i || (i = this.basicRenderer), e || (e = {}), this.lines.push({
                line: t,
                renderer: i,
                options: e
            })
        }, l.TextRenderer.prototype.multicolorRenderer = function(t, e, i) {
            var n, o, r = i.x;
            for (n = 0; n < e.length; ++n) o = e[n], t.fillStyle = o.color, t.fillText(o.text, r, i.y), r += t.measureText(o.text).width
        }, inherit(c, r), c.prototype.extraData = function(t) {
            var e = t[1],
                i = t[2],
                n = t[3],
                o = t[4];
            return {
                reported: e,
                estimate: i,
                period: n,
                date: o
            }
        }, c.prototype.afterUpdate = function(t, e, i, n) {
            var o, r = this._study.getEstimate();
            r && (o = r.value.slice(), o[4] *= 1e3, this.addLollipop(t, e, i, n, r.index, o))
        }, c.prototype.createText = function(t, e) {
            var i, r, s, a;
            $.isNumeric(t.reported) && e.addTextLine($.t("Earnings") + ": " + n.formatMoney(t.reported), {
                fontWeight: "bold"
            }), $.isNumeric(t.estimate) && ($.isNumeric(t.reported) ? e.addTextLine($.t("Estimate") + ": " + n.formatMoney(t.estimate)) : e.addTextLine($.t("Estimate") + ": " + n.formatMoney(t.estimate), {
                fontWeight: "bold"
            })), $.isNumeric(t.reported) && $.isNumeric(t.estimate) && (i = t.reported - t.estimate, r = i > 0 ? "#238853" : "#DD5538", s = 100 * Math.abs(i / t.estimate), a = i.toFixed(2), isFinite(s) && (a += " (" + s.toFixed(2) + "%)"), e.addMulticolorTextLine([{
                text: $.t("Surprise") + ": ",
                color: "black"
            }, {
                text: a,
                color: r
            }])), e.addTextLine($.t("Date") + ": " + o(t.date).format("l")), e.addTextLine($.t("Period Ending") + ": " + o.unix(t.period).format("M/YYYY"))
        }, c.prototype.showBarLine = function() {
            var t = this._model.mainSeries().properties();
            return !t.esdShowBreaks.value()
        }, c.prototype.renderer = function() {
            var e, i, n, o, a, l, c, h = r.prototype.renderer.call(this),
                d = this._model.mainSeries().properties();
            if (d.esdShowBreaks.value())
                for (e = d.esdBreaksStyle.color.value(), i = d.esdBreaksStyle.style.value(), n = d.esdBreaksStyle.width.value(), o = 0; o < this.lollipops.length; o++) a = this.lollipops[o], l = this.defaultStyle, a.hovered && (l = this.hoveredStyle), c = $.extend({
                    startPoint: new t.Point(a.basePoint.x, a.basePoint.y - l.lollipop.circleHeight),
                    endPoint: new t.Point(a.basePoint.x, 0),
                    style: {
                        strokeStyle: e,
                        lineWidth: n,
                        lineStyle: i
                    }
                }, a), h.insert(new s(c), 0);
            return h
        }, inherit(h, r), h.prototype.extraData = function(t) {
            var e = t[1],
                i = t[2],
                n = t[3];
            return {
                numerator: i,
                denominator: e,
                date: n
            }
        }, h.prototype.createText = function(t, e) {
            $.isNumeric(t.numerator) && $.isNumeric(t.denominator) && e.addTextLine($.t("Split") + ": " + t.numerator + "/" + t.denominator, {
                fontWeight: "bold"
            }), e.addTextLine($.t("Date") + ": " + o(t.date).format("l"))
        }, inherit(d, r), d.prototype.extraData = function(t) {
            return {
                value: t[1],
                date: t[2]
            }
        }, d.prototype.createText = function(t, e) {
            $.isNumeric(t.value) && e.addTextLine($.t("Dividends") + ": " + n.formatMoney(t.value), {
                fontWeight: "bold"
            }), e.addTextLine($.t("Date") + ": " + o(t.date).format("l"))
        }, e.ESDPaneView = r, e.EarningsPaneView = c, e.DividendsPaneView = d, e.SplitsPaneView = h
    }).call(e, i(40), i(137), i(23))
}, , function(t, e, i) {
    "use strict";

    function n() {
        this.cache = {}
    }

    function o(t) {
        this.cache = t
    }

    function r(t) {
        this.currentSymbol = null, this.cache = t, this.onDataHandler = this.onData.bind(this), this.onExpiredHandler = this.onExpired.bind(this), this.cache.on("data", this.onDataHandler), this.cache.on("expired", this.onExpiredHandler)
    }
    var s, a = i(139);
    n.prototype.now = function() {
        return (new Date).getTime()
    }, n.prototype.put = function(t, e, i, n) {
        var o, r, s, a = this.cache[t];
        a && clearTimeout(a.timeout), o = i + this.now(), r = {
            value: e,
            expire: o
        }, isNaN(o) || (s = setTimeout(function() {
            var e = this.cache[t];
            this.del(t), "function" == typeof n && e && n(t, e.value)
        }.bind(this), i), r.timeout = s), this.cache[t] = r
    }, n.prototype.del = function(t) {
        delete this.cache[t]
    }, n.prototype.get = function(t) {
        var e = this.cache[t];
        if (void 0 !== e) {
            if (isNaN(e.expire) || e.expire >= this.now()) return e.value;
            this.del(t)
        }
        return null
    }, inherit(o, a), o.prototype.maxRetryCount = 1, o.prototype.retryDelay = 5e3, o.prototype.itemExpired = function(t, e) {
        this.emit("expired", e)
    }, o.prototype.getKey = function(t, e) {
        return t + "_" + e
    }, o.prototype.requestSymbol = function(t, e, i, n) {
        var o, r, s, a, l = 36e5,
            c = 36e5,
            h = 6e4;
        return n = n || 0, o = this.getKey(t, e), (r = this.cache.get(o)) ? void(r.pending || this.emit("data", r, i)) : (s = {
            exchange: t,
            symbol: e,
            pending: !0
        }, this.cache.put(o, s, l), a = this, $.ajax({
            url: "/estimates",
            type: "GET",
            data: {
                symbol: e,
                exchange: t
            },
            timeout: h
        }).then(function(r) {
            return r.error && n < a.maxRetryCount ? void setTimeout(function() {
                a.cache.del(o), a.requestSymbol(t, e, i, n + 1)
            }, a.retryDelay) : (a.cache.put(o, $.extend(r, {
                exchange: t,
                symbol: e
            }), l, a.itemExpired.bind(a)), void a.emit("data", r))
        }).fail(function(i, n, r) {
            a.cache.put(o, {
                exchange: t,
                symbol: e,
                error: r
            }, c, a.itemExpired.bind(a))
        }))
    }, s = new o(new n), inherit(r, a), r.prototype.supportedExchange = function(t) {
        return t = t.toLowerCase(), $.inArray(t, ["nasdaq", "bats", "nyse", "otc", "amex"]) > -1
    }, r.prototype.onData = function(t, e) {
        e && e !== this || this.isCurrentSymbol(t) && this.emit("data", t)
    }, r.prototype.onExpired = function(t) {
        this.isCurrentSymbol(t) && this.setSymbol(t.exchange, t.symbol)
    }, r.prototype.isCurrentSymbol = function(t) {
        return this.currentSymbol && t ? this.currentSymbol.exchange === t.exchange && this.currentSymbol.symbol === t.symbol : !1
    }, r.prototype.resetSymbol = function() {
        this.currentSymbol = null
    }, r.prototype.setSymbol = function(t, e) {
        t = t.toLowerCase(), e = e.toLowerCase(), this.currentSymbol = {
            exchange: t,
            symbol: e
        }, this.supportedExchange(t) && this.cache.requestSymbol(this.currentSymbol.exchange, this.currentSymbol.symbol, this)
    }, r.prototype.destroy = function() {
        this.cache.off("data", this.onDataHandler), this.cache.off("expired", this.onExpiredHandler)
    }, t.exports = function() {
        return new r(s)
    }
}, function(t, e, i) {
    var n;
    (function() {
        "use strict";

        function e() {}

        function o(t, e) {
            for (var i = t.length; i--;)
                if (t[i].listener === e) return i;
            return -1
        }

        function r(t) {
            return function() {
                return this[t].apply(this, arguments)
            }
        }
        var s = e.prototype,
            a = this,
            l = a.EventEmitter;
        s.getListeners = function(t) {
            var e, i, n = this._getEvents();
            if (t instanceof RegExp) {
                e = {};
                for (i in n) n.hasOwnProperty(i) && t.test(i) && (e[i] = n[i]);
            } else e = n[t] || (n[t] = []);
            return e
        }, s.flattenListeners = function(t) {
            var e, i = [];
            for (e = 0; e < t.length; e += 1) i.push(t[e].listener);
            return i
        }, s.getListenersAsObject = function(t) {
            var e, i = this.getListeners(t);
            return i instanceof Array && (e = {}, e[t] = i), e || i
        }, s.addListener = function(t, e) {
            var i, n = this.getListenersAsObject(t),
                r = "object" == typeof e;
            for (i in n) n.hasOwnProperty(i) && -1 === o(n[i], e) && n[i].push(r ? e : {
                listener: e,
                once: !1
            });
            return this
        }, s.on = r("addListener"), s.addOnceListener = function(t, e) {
            return this.addListener(t, {
                listener: e,
                once: !0
            })
        }, s.once = r("addOnceListener"), s.defineEvent = function(t) {
            return this.getListeners(t), this
        }, s.defineEvents = function(t) {
            for (var e = 0; e < t.length; e += 1) this.defineEvent(t[e]);
            return this
        }, s.removeListener = function(t, e) {
            var i, n, r = this.getListenersAsObject(t);
            for (n in r) r.hasOwnProperty(n) && (i = o(r[n], e), -1 !== i && r[n].splice(i, 1));
            return this
        }, s.off = r("removeListener"), s.addListeners = function(t, e) {
            return this.manipulateListeners(!1, t, e)
        }, s.removeListeners = function(t, e) {
            return this.manipulateListeners(!0, t, e)
        }, s.manipulateListeners = function(t, e, i) {
            var n, o, r = t ? this.removeListener : this.addListener,
                s = t ? this.removeListeners : this.addListeners;
            if ("object" != typeof e || e instanceof RegExp)
                for (n = i.length; n--;) r.call(this, e, i[n]);
            else
                for (n in e) e.hasOwnProperty(n) && (o = e[n]) && ("function" == typeof o ? r.call(this, n, o) : s.call(this, n, o));
            return this
        }, s.removeEvent = function(t) {
            var e, i = typeof t,
                n = this._getEvents();
            if ("string" === i) delete n[t];
            else if (t instanceof RegExp)
                for (e in n) n.hasOwnProperty(e) && t.test(e) && delete n[e];
            else delete this._events;
            return this
        }, s.removeAllListeners = r("removeEvent"), s.emitEvent = function(t, e) {
            var i, n, o, r, s, a = this.getListenersAsObject(t);
            for (r in a)
                if (a.hasOwnProperty(r))
                    for (i = a[r].slice(0), o = i.length; o--;) n = i[o], n.once === !0 && this.removeListener(t, n.listener), s = n.listener.apply(this, e || []), s === this._getOnceReturnValue() && this.removeListener(t, n.listener);
            return this
        }, s.trigger = r("emitEvent"), s.emit = function(t) {
            var e = Array.prototype.slice.call(arguments, 1);
            return this.emitEvent(t, e)
        }, s.setOnceReturnValue = function(t) {
            return this._onceReturnValue = t, this
        }, s._getOnceReturnValue = function() {
            return this.hasOwnProperty("_onceReturnValue") ? this._onceReturnValue : !0
        }, s._getEvents = function() {
            return this._events || (this._events = {})
        }, e.noConflict = function() {
            return a.EventEmitter = l, e
        }, n = function() {
            return e
        }.call(a, i, a, t), !(void 0 !== n && (t.exports = n))
    }).call(this)
}, function(t, e) {
    "use strict";

    function i(t, e) {
        this._formatter = t, this._maxSize = e || 50, this._actualSize = 0, this._cache = {}, this._usageTick = 1, this._oldestTick = 1, this._tick2Labels = {}
    }
    i.prototype.format = function(t) {
        var e, i;
        return this._cache[t] ? this._cache[t].string : (this._actualSize === this._maxSize && (e = this._tick2Labels[this._oldestTick], delete this._tick2Labels[this._oldestTick], delete this._cache[e], this._oldestTick++, this._actualSize--), i = this._formatter(t), this._cache[t] = {
            string: i,
            tick: this._usageTick
        }, this._tick2Labels[this._usageTick] = t, this._actualSize++, this._usageTick++, i)
    }, t.exports = i
}, function(t, e, i) {
    (function(e, n) {
        "use strict";

        function o(t, i, r) {
            var s, a;
            this.m_timeScale = t, s = i.rightAxisProperties.state(), s.autoScale = !0, this.m_rightPriceScale = new c(new e(s), r.properties().scalesProperties), a = i.leftAxisProperties.state(), a.autoScale = !0, this.m_leftPriceScale = new c(new e(a), r.properties().scalesProperties), this.m_dataSources = [], this.m_height = 0, this.m_width = 0, this.m_mainDataSource = null, this._properties = i, this._model = r, this._tagsChanged = new n, i.topMargin.listeners().subscribe(this, o.prototype._updateMargins), i.bottomMargin.listeners().subscribe(this, o.prototype._updateMargins), this._updateMargins(), this._stretchFactor = o.DEFAULT_STRETCH_FACTOR
        }
        var r = i(142).ExecutionsPositionController,
            s = i(77).LineDataSource,
            a = i(80).PriceDataSource,
            l = i(144),
            c = i(133);
        o.DEFAULT_STRETCH_FACTOR = 1e3, o.PANE_ANIMATION_DURATION = 500, o.sortSourcesPreOrdered = {
            "Volume@tv-basicstudies": 0,
            ChartEventsSource: 1,
            "ESD$TV_DIVIDENDS@tv-scripting": 2,
            "ESD$TV_SPLITS@tv-scripting": 3,
            "ESD$TV_EARNINGS@tv-scripting": 4,
            LineToolOrder: 5,
            LineToolPosition: 6,
            LineToolExecution: 7
        }, o.prototype.destroy = function() {
            this._properties.topMargin.listeners().unsubscribe(this, o.prototype._updateMargins), this._properties.bottomMargin.listeners().unsubscribe(this, o.prototype._updateMargins)
        }, o.prototype.setPaneSize = function(t) {
            var e = {
                large: 1,
                medium: .6,
                small: .3,
                tiny: .15
            };
            if (!e[t]) throw Error("Unknown size enum value: " + t);
            this._stretchFactor = e[t] * o.DEFAULT_STRETCH_FACTOR
        }, o.sortSources = function(t) {
            return t.map(function(t) {
                var e, i, n = t._constructor;
                return isFunction(t.metaInfo) && (n = t.metaInfo().id), i = o.sortSourcesPreOrdered[n] || 0, e = i > 0 ? +(1 / 0) : 0 > i ? -(1 / 0) : t.zorder(), [t, i, e]
            }).sort(function(t, e) {
                return t[1] - e[1] || t[2] - e[2]
            }).map(function(t) {
                return t[0]
            })
        }, o.prototype._updateMargins = function() {
            var t, e, i = .01 * this._properties.topMargin.value(),
                n = .01 * this._properties.bottomMargin.value();
            for (this.m_leftPriceScale.setTopMargin(i), this.m_leftPriceScale.setBottomMargin(n), this.m_rightPriceScale.setTopMargin(i), this.m_rightPriceScale.setBottomMargin(n), t = 0; t < this.m_dataSources.length; t++) e = this.m_dataSources[t], e instanceof TradingView.Study && this.isOverlay(e) && "Volume" !== e.metaInfo().shortId && e.priceScale() && e.priceScale() !== this.m_leftPriceScale && e.priceScale() === this.m_rightPriceScale && (e.priceScale().setTopMargin(i), e.priceScale().setBottomMargin(n), this.recalculatePriceScale(e.priceScale()));
            this.recalculatePriceScale(this.m_leftPriceScale), this.recalculatePriceScale(this.m_rightPriceScale), this.updateAllViews()
        }, o.prototype.model = function() {
            return this._model
        }, o.prototype.width = function() {
            return this.m_width
        }, o.prototype.height = function() {
            return this.m_height
        }, o.prototype.setWidth = function(t) {
            this.m_width = t, this.updateAllViews()
        }, o.prototype.setHeight = function(t) {
            var e, i;
            for (this.m_height = t, this.m_leftPriceScale.setHeight(t), this.m_rightPriceScale.setHeight(t), e = 0; e < this.m_dataSources.length; e++) i = this.m_dataSources[e], this.isOverlay(i) && i.priceScale() && i.priceScale().setHeight(t);
            this.updateAllViews()
        }, o.prototype.leftPriceScale = function() {
            return this.m_leftPriceScale
        }, o.prototype.rightPriceScale = function() {
            return this.m_rightPriceScale
        }, o.prototype.timeScale = function() {
            return this.m_timeScale
        }, o.prototype.dataSources = function() {
            return this.m_dataSources
        }, o.prototype.isOverlay = function(t) {
            return t._isOverlay
        }, o.prototype._processMainSourceChange = function() {
            var t, e, i, n, r, c, h;
            if (null === this.m_mainDataSource)
                for (e = 0; e < this.m_dataSources.length; e++)
                    if (i = this.m_dataSources[e], TradingView.isInherited(i.constructor, a) && !this.isOverlay(i) && (!i.properties().linkedToSeries || !i.properties().linkedToSeries.value()) && !(i instanceof l)) {
                        this.m_mainDataSource = i, t = !0;
                        break
                    }
            if (this.m_mainDataSource && t) {
                for (n = [], e = 0; e < this.m_dataSources.length; e++) i = this.m_dataSources[e], TradingView.isInherited(i.constructor, s) && n.push(i);
                for (n = o.sortSources(n), e = 0; e < n.length; e++) this.move(n[e], this.m_mainDataSource.priceScale(), !0)
            } else if (!this.m_mainDataSource)
                for (e = 0; e < this.m_dataSources.length; e++)
                    if (i = this.m_dataSources[e], TradingView.isInherited(i.constructor, a) && this.isOverlay(i) && i.showInObjectTree()) {
                        for (this.m_mainDataSource = i, this.m_rightPriceScale.addDataSource(i), i.setPriceScale(this.m_rightPriceScale), r = this._model.children(i), h = 0; h < r.length; h++) c = r[h], this.m_rightPriceScale.addDataSource(c), c.setPriceScale(this.m_rightPriceScale);
                        this.recalculatePriceScale(this.m_rightPriceScale), i._isOverlay = !1;
                        break
                    }
        }, o.prototype._newZOrderForLineTool = function() {
            var t = this.m_dataSources.reduce(function(t, e) {
                return e instanceof s ? Math.max(t, e.zorder()) : t
            }, this.getZOrderMinMax().minZOrder - 1);
            return this.m_dataSources.forEach(function(e) {
                e.zorder() > t && e.setZorder(e.zorder() + 1)
            }), t + 1
        }, o.prototype.addDataSource = function(t, e, i) {
            var n;
            n = t instanceof s && !i ? this._newZOrderForLineTool() : this.getZOrderMinMax().minZOrder - 1, this.insertDataSource(t, e, n)
        }, o.prototype.insertDataSource = function(t, i, n) {
            var r, s, h;
            this.m_dataSources.push(t), r = !1, t === this._model.mainSeries() ? (this.m_mainDataSource = t, r = !0) : null !== this.m_mainDataSource || t instanceof l || (this.m_mainDataSource = t, r = !0), t._isOverlay = !1, null === i && (s = this.m_rightPriceScale.topMargin(), h = this.m_rightPriceScale.bottomMargin(), t.metaInfo && "Volume@tv-basicstudies" === t.metaInfo().id && (s = .75, h = 0), i = new c(new e(this._properties.overlayPropreties.state()), this._model.properties().scalesProperties), i.setHeight(this.m_height), i.setTopMargin(s), i.setBottomMargin(h), t._isOverlay = !0), i.addDataSource(t), t.setPriceScale(i), t.onTagsChanged && t.onTagsChanged().subscribe(this, o.prototype.onSourceTagsChanged), t.setZorder(n), r && this._processMainSourceChange(), t instanceof l || this.updateAlertLabelsSources(), this._tagsChanged.fire(), TradingView.isInherited(t.constructor, a) && this.recalculatePriceScale(i), this.invalidateSourcesCache()
        }, o.prototype.removeDataSource = function(t, e) {
            var i, n = this.m_dataSources.indexOf(t);
            return -1 === n ? void TradingView.logDebugChart("removeDataSource: invalid data source") : (t._isOverlay = !1, this.m_dataSources.splice(n, 1), t !== this.m_mainDataSource || e || (this.m_mainDataSource = null), i = null, -1 !== this.m_leftPriceScale.dataSources().indexOf(t) ? (this.m_leftPriceScale.removeDataSource(t), i = this.m_leftPriceScale) : -1 !== this.m_rightPriceScale.dataSources().indexOf(t) && (this.m_rightPriceScale.removeDataSource(t), i = this.m_rightPriceScale), t.onTagsChanged && t.onTagsChanged().unsubscribe(this, o.prototype.onSourceTagsChanged), TradingView.isInherited(t.constructor, a) && this._processMainSourceChange(), t instanceof l || this._model.mainSeries() !== t || this.updateAlertLabelsSources(), this._tagsChanged.fire(), i && TradingView.isInherited(t.constructor, a) && this.recalculatePriceScale(i), void this.invalidateSourcesCache())
        }, o.prototype.updateAlertLabelsSources = function() {
            var t, e, i, n, o, r, s = this,
                a = this.containsMainSeries(),
                c = this._model.alertsList(),
                h = function(t) {
                    var e = s.dataSources().filter(function(e) {
                        return e instanceof l ? e.data === t : !1
                    })[0];
                    return e
                };
            if (c)
                for (t = $.map($.grep(this.dataSources(), function(t) {
                    return t instanceof l
                }), function(t) {
                    return t.alert().id
                }), c = c.models, n = c.length - 1; n >= 0; n--) e = c[n], i = -1 !== t.indexOf(e.id), i || !a && e.isOHLC() || (o = new l(this._model, e), r = this.rightPriceScale() || this.leftPriceScale(), this.addDataSource(o, r)), i && !a && e.isOHLC() && (o = h(e), o && this.removeDataSource(o))
        }, o.prototype.startScalePrice = function(t, e) {
            t.startScale(e)
        }, o.prototype.scalePriceTo = function(t, e) {
            t.scaleTo(e), this.updateAllViews()
        }, o.prototype.endScalePrice = function(t) {
            t.endScale()
        }, o.prototype.startScrollPrice = function(t, e) {
            t.startScroll(e)
        }, o.prototype.scrollPriceTo = function(t, e) {
            t.scrollTo(e), this.updateAllViews()
        }, o.prototype.endScrollPrice = function(t) {
            t.endScroll()
        }, o.prototype.setPriceAutoScale = function(t, e) {
            return t.setAutoScale(e), this.timeScale().isEmpty() ? void t.setPriceRange(null) : void this.recalculatePriceScale(t)
        }, o.prototype.restorePriceScaleState = function(t, e) {
            t.restoreState(e), this.updateAllViews()
        }, o.prototype.updateAllViews = function() {
            for (var t = 0; t < this.m_dataSources.length; t++) this.m_dataSources[t].updateAllViews()
        }, o.prototype.defaultPriceScale = function() {
            var t = this.m_mainDataSource ? this.m_mainDataSource.priceScale() : this.rightPriceScale();
            return void 0 === t && (t = new c(new e(this._properties.overlayPropreties.state()), this._model.properties().scalesProperties)), t
        }, o.prototype._priceScaleIsPrice = function(t) {
            var e = t.mainSource();
            return e ? TradingView.isInherited(e.constructor, TradingView.Series) ? !0 : TradingView.isInherited(e.constructor, TradingView.Study) ? e.metaInfo().is_price_study : !1 : !1
        }, o.prototype.findSuitableScale = function(t) {
            if (TradingView.isInherited(t.constructor, TradingView.Study) && "Volume@tv-basicstudies" === t.metaInfo().id) return this.m_rightPriceScale.mainSource() || this.m_leftPriceScale.mainSource() ? null : this.m_rightPriceScale;
            var e = !1;
            if (TradingView.isInherited(t.constructor, TradingView.Study) ? e = t.metaInfo().is_price_study : TradingView.isInherited(t.constructor, TradingView.Series) && (e = !0), e) {
                if (this._priceScaleIsPrice(this.m_rightPriceScale)) return this.m_rightPriceScale;
                if (this._priceScaleIsPrice(this.m_leftPriceScale)) return this.m_leftPriceScale
            }
            return this.m_rightPriceScale.mainSource() ? this.m_leftPriceScale.mainSource() ? null : this.m_leftPriceScale : this.m_rightPriceScale
        }, o.prototype.mainDataSource = function() {
            return this.m_mainDataSource
        }, o.prototype.recalculatePriceScale = function(t) {
            if (t) {
                if (t.isAutoScale() && !this.timeScale().isEmpty()) {
                    var e = this.timeScale().visibleBars();
                    t.recalculatePriceRange(e)
                }
                t.updatePaneViews()
            }
        }, o.prototype.resetPriceScale = function(t) {
            var e = this.timeScale().visibleBars();
            t.mainSource() instanceof TradingView.Series && t.mainSource().isLockScale() || t.setAutoScale(!0), t.recalculatePriceRange(e), this.updateAllViews()
        }, o.prototype.recalculate = function() {
            var t, e;
            for (this.recalculatePriceScale(this.m_rightPriceScale), this.recalculatePriceScale(this.m_leftPriceScale), t = 0; t < this.m_dataSources.length; t++) e = this.m_dataSources[t], !this.isOverlay(e) || e instanceof s || this.recalculatePriceScale(e.priceScale());
            this.updateAllViews(), this._model.updatePane(this)
        }, o.prototype.isEmpty = function() {
            return null === this.m_mainDataSource
        }, o.prototype.move = function(t, e, i) {
            var n = this.m_dataSources.slice(),
                o = null !== e;
            this.removeDataSource(t, o), this.addDataSource(t, e, i), this.m_dataSources = n, this.invalidateSourcesCache()
        }, o.prototype.dataSourceForId = function(t) {
            for (var e = 0; e < this.m_dataSources.length; e++)
                if (this.m_dataSources[e].id() === t) return this.m_dataSources[e];
            return null
        }, o.prototype.priceScaleForSource = function(t) {
            return -1 !== this.rightPriceScale().dataSources().indexOf(t) ? this.rightPriceScale() : -1 !== this.leftPriceScale().dataSources().indexOf(t) ? this.leftPriceScale() : null
        }, o.prototype.sourceById = function(t) {
            for (var e = 0; e < this.m_dataSources.length; e++)
                if (this.m_dataSources[e].id() === t) return this.m_dataSources[e];
            return null
        }, o.prototype.containsMainSeries = function() {
            return -1 !== this.m_dataSources.indexOf(this._model.mainSeries())
        }, o.prototype.priceScaleByName = function(t) {
            return "left" === t ? this.m_leftPriceScale : "right" === t ? this.m_rightPriceScale : null
        }, o.prototype.priceScaleName = function(t) {
            return t === this.m_leftPriceScale ? "left" : t === this.m_rightPriceScale ? "right" : ""
        }, o.prototype.hitTestSources = function() {
            var t, e, i, n, o;
            if (this._cachedHitTestSources) return this._cachedHitTestSources;
            for (t = this.orderedSources(), e = [], i = [], n = 0; n < t.length; n++) o = t[n], TradingView.isInherited(o.constructor, s) ? e.push(o) : i.push(o);
            return this._cachedHitTestSources = i.concat(e), this._cachedHitTestSources
        }, o.prototype.orderedSources = function() {
            var t, e, i, n;
            if (this._cachedOrderedSoruces) return this._cachedOrderedSoruces;
            for (t = [], e = 0, i = this.m_dataSources.length; i > e; e++) n = this.m_dataSources[e], TradingView.isInherited(n.constructor, s) && !n.isActualSymbol() || t.push(n);
            return t = o.sortSources(t), this._cachedOrderedSoruces = t, t
        }, o.prototype.createDrawingsCaches = function() {
            r.recreateOrderedByBarsSourcesCache(this)
        }, o.prototype.clearDrawingCaches = function() {
            r.clearOrderedByBarsSourcesCache()
        }, o.prototype.invalidateSourcesCache = function() {
            this._cachedOrderedSoruces = null, this._cachedHitTestSources = null, this.m_leftPriceScale.invalidateSourcesCache(), this.m_rightPriceScale.invalidateSourcesCache()
        }, o.prototype.getZOrderMinMax = function() {
            var t, e, i, n, o = this.orderedSources();
            if (0 === o.length) return {
                minZOrder: 0,
                maxZOrder: 0
            };
            for (t = o[0].zorder(), e = o[0].zorder(), i = 1; i < o.length; i++) n = o[i], n.zorder() < t && (t = n.zorder()), n.zorder() > e && (e = n.zorder());
            return {
                minZOrder: t,
                maxZOrder: e
            }
        }, o.prototype.sendToBack = function(t) {
            var e, i = this.getZOrderMinMax().minZOrder,
                n = Math.abs(t.zorder() - i);
            for (e = 0; n > e; e++) this.changeZOrder(t, -1)
        }, o.prototype.bringToFront = function(t) {
            var e, i = this.getZOrderMinMax().maxZOrder,
                n = Math.abs(t.zorder() - i);
            for (e = 0; n > e; e++) this.changeZOrder(t, 1)
        }, o.prototype.changeZOrder = function(t, e) {
            var i, n, o, r, s, a = this.orderedSources().filter(function(t) {
                    return t.showInObjectTree()
                }),
                l = 0;
            for (i = 0, n = a.length; n > i; i++)
                if (a[i] === t) {
                    l = i;
                    break
                }
            l > 0 && 0 > e ? (o = a[l - 1].zorder(), r = t.zorder(), a[l - 1].setZorder(r), t.setZorder(o)) : l < a.length - 1 && e > 0 && (s = a[l + 1].zorder(), r = t.zorder(), a[l + 1].setZorder(r), t.setZorder(s)), this.invalidateSourcesCache()
        }, o.prototype.onSourceTagsChanged = function() {
            this._tagsChanged.fire()
        }, o.prototype.onTagsChanged = function() {
            return this._tagsChanged
        }, o.prototype.dumpPriceScale = function(t) {
            var e, i, n, o = t.dataSources(),
                r = [];
            for (e = 0; e < o.length; e++)
                if (i = o[e].priceAxisViews(this, t))
                    for (n = 0; n < i.length; n++) r.push(i[n].dump());
            return r
        }, o.prototype.dumpViews = function() {
            var t, e, i, n, o, r = {};
            for (r.paneViews = {}, t = this.orderedSources(), e = 0; e < t.length; e++)
                if (i = t[e], r.paneViews[e] = [], n = i.paneViews())
                    for (o = 0; o < n.size(); o++) r.paneViews[e].push(n.item(e).dump());
            return r.leftAxis = this.dumpPriceScale(this.m_leftPriceScale), r.rightAxis = this.dumpPriceScale(this.m_rightPriceScale), r
        }, o.prototype.clearSeries = function() {
            for (var t = this.m_dataSources.length - 1; t >= 0; t--) TradingView.isInherited(this.m_dataSources[t].constructor, TradingView.Series) && this.m_dataSources.splice(t, 1)
        }, o.prototype.actionNoScaleIsEnabled = function(t) {
            return this.isOverlay(t) || !TradingView.isInherited(t.constructor, a) ? !0 : this.m_dataSources.filter(function(t) {
                return t.properties().linkedToSeries && t.properties().linkedToSeries.value() ? !1 : TradingView.isInherited(t.constructor, a) && t.showInObjectTree() && !t.isNoScale()
            }).length > 1
        }, o.prototype.executionsPositionController = function() {
            return this._executionsPositionController || (this._executionsPositionController = new r(this, this._model.timeScale())), this._executionsPositionController
        }, t.exports = o
    }).call(e, i(55), i(50))
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(t, e) {
            this._pane = t, this._timeScale = e
        }

        function o(t) {
            this._line = t
        }

        function r(t, e) {
            this._data = t, this._adapter = e
        }

        function s(t, e) {
            l.call(this, t, e), this._invalidated = !0
        }

        function a(t, e) {
            this._adapter = new o(this), this._constructor = "LineToolExecution";
            var i = e || new p("linetoolexecution");
            this.customization = {
                forcePriceAxisLabel: !1,
                disableSelection: !0,
                disableErasing: !0
            }, c.call(this, t, new s(this, t), i)
        }
        var l = i(115),
            c = i(77).LineDataSource,
            h = i(143),
            d = i(67),
            u = i(91).Rect,
            p = i(81).DefaultProperty;
        n.prototype._cachedByBarIndexOrderedExecutions = {}, n.recreateOrderedByBarsSourcesCache = function(t) {
            var e, i, o, r, s;
            for (n.clearOrderedByBarsSourcesCache(), e = n.prototype, i = t.orderedSources(), o = 0; o < i.length; ++o) r = i[o], r._adapter && void 0 !== r._adapter._index && (s = e._cachedByBarIndexOrderedExecutions[r._adapter._index], e._cachedByBarIndexOrderedExecutions[r._adapter._index] = s || [], e._cachedByBarIndexOrderedExecutions[r._adapter._index].push(r))
        }, n.clearOrderedByBarsSourcesCache = function() {
            n.prototype._cachedByBarIndexOrderedExecutions = {}
        }, n.prototype.getXYCoordinate = function(t, e, i) {
            var n, o, r, s, l, c, h, d, u, p, f = 0,
                _ = t.getDirection(),
                g = "buy" === _,
                m = this._pane.model().mainSeries();
            if (m.bars && (n = g ? 10 : -10, o = m.bars().search(i, TradingView.SEARCH_NEAREST_LEFT), o && (i = o.index, r = g ? o.value[TradingView.LOW_PLOT] : o.value[TradingView.HIGH_PLOT], s = m.priceScale(), s.isPercent() && (l = m.firstValue(), r = s.priceRange().convertToPercent(r, l)), f = s.priceToCoordinate(r) + n)), t._index = i, c = e.visibleBars(), !isFinite(i) || !c || i > c.lastBar() || i < c.firstBar()) return {
                x: -1,
                y: -1
            };
            for (h = this._cachedByBarIndexOrderedExecutions[i] || this._pane.orderedSources(), d = h.length - 1; d >= 0; --d)
                if (u = h[d], u instanceof a && u._adapter._index === i && u._adapter.getDirection() === _) {
                    if (u === t._line) break;
                    p = u._adapter._height(), f = g ? f + p : f - p
                }
            return {
                x: e.indexToCoordinate(i),
                y: f
            }
        }, o.prototype._height = function() {
            var t, e = this.getArrowHeight(),
                i = this.getArrowSpacing(),
                n = 0;
            return this.getText() && h.fontHeight(this.getFont()), t = 10, e + i + n + t
        }, o.prototype.getIndex = function() {
            var t = this._line._model.timeScale(),
                e = t.m_points.lastTimePointIndex(),
                i = this._line.points()[0].index;
            return e - i
        }, o.prototype.setIndex = function(t) {
            var e, i = this._line._model.timeScale(),
                n = i.m_points.lastTimePointIndex(),
                o = n - Math.abs(t);
            return this._line.startMoving(this._line.points()[0]), e = TradingView.merge({}, this._line.points()[0]), e.index = o, this._line.move(e), this._line.endMoving(), this
        }, o.prototype.getTime = function() {
            return this._unixtime
        }, o.prototype.setTime = function(t) {
            var e = this._line._model.mainSeries();
            return this._unixtime = ChartApiInstance.alignTimePoint ? ChartApiInstance.alignTimePoint(t, e.interval(), e.symbolInfo()) : t, this._line.restorePoints([{
                offset: 0,
                price: this.getPrice(),
                time_t: this._unixtime
            }], []), this._line.createServerPoints(), this
        }, o.prototype.getPrice = function() {
            return this._line.points().length > 0 ? this._line.points()[0].price : this._line._timePoint.length > 0 ? this._line._timePoint[0].price : void 0
        }, o.prototype.setPrice = function(t) {
            return this._line.points().length > 0 && (this._line.points()[0].price = t), this._line._timePoint.length > 0 && (this._line._timePoint[0].price = t), this
        }, o.prototype.getText = function() {
            return this._line.properties().text.value()
        }, o.prototype.setText = function(t) {
            return this._line.properties().text.setValue(t || ""), this._line.updateAllViewsAndRedraw(), this
        }, o.prototype.getArrowHeight = function() {
            return this._line.properties().arrowHeight.value()
        }, o.prototype.setArrowHeight = function(t) {
            return this._line.properties().arrowHeight.setValue(t || 5), this
        }, o.prototype.getArrowSpacing = function() {
            return this._line.properties().arrowSpacing.value()
        }, o.prototype.setArrowSpacing = function(t) {
            return this._line.properties().arrowSpacing.setValue(t || 1), this
        }, o.prototype.getDirection = function() {
            return this._line.properties().direction.value()
        }, o.prototype.setDirection = function(t) {
            return this._line.properties().direction.setValue(t || "buy"), this
        }, o.prototype.getArrowColor = function() {
            return h.getColorFromProperties(this._line.properties().arrowColor, this._line.properties().arrowTransparency)
        }, o.prototype.setArrowColor = function(t) {
            return h.setColorToProperties(t, this._line.properties().arrowColor, this._line.properties().arrowTransparency), this
        }, o.prototype.getTextColor = function() {
            return h.getColorFromProperties(this._line.properties().textColor, this._line.properties().textTransparency)
        }, o.prototype.setTextColor = function(t) {
            return h.setColorToProperties(t, this._line.properties().textColor, this._line.properties().textTransparency), this
        }, o.prototype.getFont = function() {
            return h.getFontFromProperties(this._line.properties().fontFamily, this._line.properties().fontSize, this._line.properties().fontBold, this._line.properties().fontItalic)
        }, o.prototype.setFont = function(t) {
            return h.setFontToProperties(t, this._line.properties().fontFamily, this._line.properties().fontSize, this._line.properties().fontBold, this._line.properties().fontItalic), this
        }, o.prototype.setTooltip = function(t) {
            return null == t ? t = "" : t += "", this._line.properties().tooltip.setValue(t), this
        }, o.prototype.getTooltip = function() {
            return this._line.properties().tooltip.value()
        }, o.prototype.remove = function() {
            this._line._model.removeSource(this._line), delete this._line
        }, r.prototype._textWidth = function(t) {
            var e, i;
            return 0 === this._adapter.getText().length ? 0 : (t.save(), t.font = this._adapter.getFont(), e = 5, i = t.measureText(this._adapter.getText()).width, t.restore(), e + i)
        }, r.prototype._drawArrow = function(t, e, i) {
            var n, o;
            t.save(), t.strokeStyle = this._adapter.getArrowColor(), t.fillStyle = this._adapter.getArrowColor(), n = this._adapter.getArrowHeight(), o = this._adapter.getDirection(), t.translate(e, i), "buy" !== o && t.rotate(Math.PI), CanvasEx.drawArrow(t, 0, 0, 0, n), t.restore()
        }, r.prototype._drawText = function(t, e, i) {
            var n, o, r = this._adapter.getText();
            r && (t.save(), t.textAlign = "center", t.textBaseline = "middle", t.font = this._adapter.getFont(), t.fillStyle = this._adapter.getTextColor(), n = e + this._textWidth(t) / 2, o = i + h.fontHeight(this._adapter.getFont()) / 2, t.fillText(r, n, o - 1), t.restore())
        }, r.prototype.draw = function(t) {
            var e, i, n, o, r, s, l, c;
            !this._data.points || this._data.points.length < a.POINTS_COUNT || (e = Math.round(this._data.points[0].x + .5), i = Math.round(this._data.points[0].y), this._drawArrow(t, e, i), n = this._textWidth(t), 0 !== n && (o = this._adapter.getArrowHeight(), r = this._adapter.getArrowSpacing(), s = h.fontHeight(this._adapter.getFont()), l = this._adapter.getDirection(), c = "buy" === l ? i + o + r : i - o - r - s, this._drawText(t, Math.round(e - n / 2), c)))
        }, r.prototype.hitTest = function(t) {
            var e, i, n, o, r, s;
            if (this._data.points && !(this._data.points.length < a.POINTS_COUNT)) return e = Math.round(this._data.points[0].x), i = Math.round(this._data.points[0].y), n = this._adapter.getArrowHeight(), "buy" === this._adapter.getDirection() ? (o = i, r = i + n) : (o = i - n, r = i), t.x >= e - 2 && t.x <= e + 2 && t.y >= o && t.y <= r ? (s = this._adapter.getTooltip(), new d(d.CUSTOM, {
                mouseDownHandler: function() {
                    TradingView.TradingWidget && TradingView.TradingWidget.journalDialog()
                },
                tooltip: "" !== s ? {
                    text: s,
                    rect: new u(e, o, 2, r - o)
                } : null
            })) : void 0
        }, inherit(s, l), s.prototype._renderer = null, s.prototype._rendererCached = !1, s.prototype.update = function() {
            this._invalidated = !0
        }, s.prototype.updateImpl = function() {
            l.prototype.update.call(this), this._renderer = null, this._rendererCached = !1, this._invalidated = !1
        }, s.prototype.renderer = function(e) {
            var i, n, o, s, a, l, c, h;
            return this._invalidated && this.updateImpl(), this._rendererCached ? this._renderer : (this._rendererCached = !0, i = this._source, n = i.points(), 0 === n.length ? null : (o = i._adapter, s = i._model.timeScale(), a = this._source._model.paneForSource(this._source).executionsPositionController(), l = a.getXYCoordinate(o, s, n[0].index), !isFinite(l.y) || l.y < 0 || l.y > e || l.x < 0 ? (this._renderer = null, null) : (c = [new t.Point(l.x, l.y)], h = {
                points: c
            }, this._renderer = new r(h, o), this._renderer)))
        }, inherit(a, c), a.POINTS_COUNT = 1, a.skipMagnetting = !0, a.prototype.pointsCount = function() {
            return a.POINTS_COUNT
        }, a.prototype.title = function() {
            return "Execution"
        }, a.prototype.hasContextMenu = function() {
            return !1
        }, a.prototype.state = function() {
            return null
        }, a.prototype.paneViews = function(t) {
            return TradingView.printing ? null : this._model.properties().tradingProperties.showExecutions.value() ? c.prototype.paneViews.call(this, t) : null
        }, a.prototype.userEditEnabled = function() {
            return !1
        }, a.prototype.showInObjectTree = function() {
            return !1
        }, e.ExecutionsPositionController = n, e.LineToolExecution = a
    }).call(e, i(40))
}, function(t, e, i) {
    "use strict";
    var n = i(104),
        o = {
            _fontHeightCache: {},
            _parsedColorCache: {}
        };
    o._parseColor = function(t) {
        var e, i, n;
        return this._parsedColorCache[t] ? this._parsedColorCache[t] : (e = document.createElement("div"), e.style.color = t, i = e.style.color.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i) || e.style.color.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\,\s*(\d*\.?\d+)\s*\)$/i), n = {
            r: i[1],
            g: i[2],
            b: i[3],
            a: i[4] || "1"
        }, this._parsedColorCache[t] = n, n)
    }, o.getColorFromProperties = function(t, e) {
        var i = 1 - e.value() / 100,
            n = this._parseColor(t.value());
        return "rgba(" + n.r + "," + n.g + "," + n.b + "," + i + ")"
    }, o.setColorToProperties = function(t, e, i) {
        var n, o = this._parseColor(t);
        e.setValue("rgb(" + o.r + "," + o.g + "," + o.b + ")"), n = 100 * (1 - o.a), i.setValue(Math.max(0, Math.min(n, 100)))
    }, o._parseFont = function(t) {
        var e, i, n, o = document.createElement("div");
        return o.style.font = t, e = o.style.fontSize.match(/(\d+)pt/), i = e && e[0] === o.style.fontSize, n = {
            family: o.style.fontFamily,
            size: i ? e[1] : "",
            bold: "bold" === o.style.fontWeight,
            italic: "italic" === o.style.fontStyle
        }
    }, o.getFontFromProperties = function(t, e, i, n) {
        var o = i.value() ? "bold" : "",
            r = n.value() ? "italic" : "",
            s = e.value() + "pt",
            a = t.value();
        return [o, r, s, a].join(" ")
    }, o.setFontToProperties = function(t, e, i, n, o) {
        var r = this._parseFont(t);
        r.family.length > 0 && e.setValue(r.family), r.size.length > 0 && i.setValue(r.size), n.setValue(r.bold), o.setValue(r.italic)
    }, o.fontHeight = function(t) {
        var e, i;
        return this._fontHeightCache[t] || (e = document.createElement("span"), e.appendChild(document.createTextNode("height")), document.body.appendChild(e), e.style.cssText = "font: " + t + "; white-space: nowrap; display: inline;", i = e.offsetHeight, document.body.removeChild(e), this._fontHeightCache[t] = Math.ceil(i)), this._fontHeightCache[t]
    }, o.drawPolyHoverOrPress = function(t, e, i, n) {
        n ? (t.save(), t.fillStyle = "rgba(0, 0, 0, 0.15)", CanvasEx.drawPoly(t, e, !0), t.restore()) : i && (t.save(), t.fillStyle = "rgba(0, 0, 0, 0.1)", CanvasEx.drawPoly(t, e, !0), t.restore())
    }, o.repaint = function(t) {
        var e = new n(n.LIGHT_UPDATE);
        e.force = !0, t.invalidate(e)
    }, o.roundToMinTick = function(t, e) {
        var i = t.mainSource().base(),
            n = 1 / i;
        return n * Math.round(e / n)
    }, t.exports = o
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            c.call(this), this.m_model = t, this._data = e, this._paneView = new o(this, t), this._resetUserEditEnabled(), this._resetProperties(), this.hasAlert.setValue(!0), e.on("change:id", this._resetProperties.bind(this)), e.on("change:id", this._resetUserEditEnabled.bind(this)), e.on("change:extra", this._resetUserEditEnabled.bind(this))
        }

        function o(t, e) {
            this.m_alertLabel = t, this.m_model = e, this.m_item = null, this._invalidated = !0, this.labelWidth = 10, this.m_alertLabel.alert().on("fired", this.highlight.bind(this)), this.m_alertLabel.alert().on("change:hovered", this.updateHover.bind(this))
        }

        function r(t) {
            t.items = [t.item.points[0]], f.call(this, t)
        }

        function s(t) {
            this.points = t.item.points, this.alert = t.item.alert, this.borderColor = t.color, this.cursor = t.cursor, this.labelWidth = t.width
        }

        function a(t) {
            this.color = t.color, this.points = t.item.points, this.lineWidth = t.lineWidth, this.lineStyle = t.lineStyle
        }

        function l(t) {
            this.item = t.item, this.height = t.height, this.width = t.width, this.color = t.color, this.horzLineWidth = t.lineWidth, this.connectingLineWidth = t.connectingLineWidth
        }
        var c = i(80).DataSource,
            h = i(67),
            d = i(66).SelectionRenderer,
            u = i(68),
            p = u.PaneRendererAbstractShape,
            f = u.PaneRendererTriangleApexLeft,
            _ = i(71),
            g = i(104),
            m = i(16),
            v = i(81).DefaultProperty;
        inherit(n, c), n.prototype._resetUserEditEnabled = function() {
            var t = this._data;
            this._userEditEnabled = !t.isNew() && t.isPrice() && t.get("extra")
        }, n.prototype._resetProperties = function() {
            var t = this._data,
                e = t.TVSettingsPropertiesKey(),
                i = TVSettings.getJSON(e, {}),
                n = TradingView.factoryDefaults("chartproperties.alertsProperties." + (t.isNew() ? "fakeLabels" : "labels"));
            t.isNew() || (n.color = ""), n.highlightColor = "", n.line.style = "", n.line.width = "", TradingView.merge(n, i), this._properties = new v(e, n, !0)
        }, n.prototype.data = function() {
            return this._data
        }, n.prototype.alert = n.prototype.data, n.prototype.alertId = function() {
            return this.alert().id
        }, n.prototype.getAlert = function() {
            var t = $.Deferred();
            return t.resolve(this.alert()), t.promise()
        }, n.prototype.state = function() {
            var t = this.alert().get("extra"),
                e = [];
            return t && t.conditionData().isChannel ? (e.push({
                price: t.price().upper
            }), e.push({
                price: t.price().lower
            })) : e.push({
                price: t.price()
            }), {
                points: e
            }
        }, n.prototype.restorePoints = function(t, e) {
            var i = this.alert().get("extra");
            i.conditionData().isChannel ? i.price({
                upper: t[0].price,
                lower: t[1].price
            }) : i.price(t[0].price)
        }, n.prototype.createServerPoints = function() {}, n.prototype.properties = function() {
            return this._properties
        }, n.prototype.globalProperties = function() {
            return this.m_model.properties().alertsProperties.labels
        }, n.prototype.paneViews = function() {
            return TradingView.printing ? null : this.properties().visible.value() && this.globalProperties().visible.value() ? [this._paneView] : null
        }, n.prototype.dataWindowView = function() {
            return null
        }, n.prototype.priceAxisViews = function() {
            return null
        }, n.prototype.statusView = function() {
            return null
        }, n.prototype.updateAllViews = function() {
            this._paneView.update()
        }, n.prototype.pointsCount = function() {
            return 0
        }, n.prototype.title = function() {
            return this.alert().title()
        }, n.prototype.startMoving = function(t, e) {
            this._userEditEnabled = !1, this._startMovingPoint = t, this.alert().saveState()
        }, n.prototype.move = function(t, e) {
            var i = t.price,
                n = this.alert().get("extra");
            this.priceScale().formatter() && this.priceScale().formatter().formatAsDecimal && (i = this.priceScale().formatter().formatAsDecimal(i)), n.conditionData().isChannel && (0 === e ? i = {
                upper: i
            } : 1 === e && (i = {
                lower: i
            })), n.price(i), this._currentMovingPoint = t
        }, n.prototype.endMoving = function() {
            function t() {
                setTimeout(function() {
                    e._undoMode = !0, o.undo(), e._undoMode = !1
                }, 0)
            }
            var e = this,
                i = this._startMovingPoint,
                n = this._currentMovingPoint,
                o = this.m_model._undoModel;
            this._userEditEnabled = !0, delete this._startMovingPoint, delete this._currentMovingPoint, i && n && i !== n && !this._undoMode && TradingView.alertsDispatcher.openEditDialog(this.alert(), {
                onEditCancel: t,
                generateNewDecription: !0
            })
        }, n.prototype.showInObjectTree = function() {
            return !1
        }, n.prototype.isRemovedByStudyTemplates = function() {
            return !1
        }, n.prototype.isUserDeletable = function() {
            return !1
        }, o.prototype.update = function() {
            this._invalidated = !0;
        }, o.prototype.invalidate = function() {
            this.m_model.invalidate(new g(g.FULL_UPDATE))
        }, o.prototype.highlight = function() {
            var t = function() {
                    this._highlighted = !0, this.update(), this.invalidate(), setTimeout(e, 500)
                }.bind(this),
                e = function() {
                    this._highlighted = !1, this.update(), this.invalidate()
                }.bind(this);
            t(), setTimeout(t, 1e3)
        }, o.prototype.updateHover = function(t, e) {
            this._hovered = !!e, this.update(), this.invalidate()
        }, o.prototype._updateImpl = function() {
            var t, i, n, o, r, s = this,
                a = this.m_alertLabel.alert(),
                l = a.get("extra"),
                c = l && l.getMainSeries(),
                d = c && c.getStyle && c.getStyle(),
                u = this.m_model.mainSeries(),
                p = u && u.properties(),
                f = p && p.style && p.style.value(),
                _ = a.isPrice() && (a.get("resolution") === m.interval.value() || a.get("crossInterval")) && (!a.isJapanStyle() || d === f),
                g = [],
                v = -1,
                y = function(t) {
                    if (s.m_alertLabel.priceScale().isPercent()) {
                        var e = s.m_model.paneForSource(s.m_alertLabel).mainDataSource().firstValue();
                        t = s.m_alertLabel.priceScale().priceRange().convertToPercent(t, e)
                    }
                    return s.m_alertLabel.priceScale().priceToCoordinate(t)
                };
            return _ ? (t = this.m_model.paneForSource(this.m_alertLabel).width() - this.labelWidth / 2 + v, i = a.get("extra").price(), a.get("extra").conditionData().isChannel ? (n = y(i.upper), o = y(i.lower), g.push(new e.Point(t, n)), g.push(new e.Point(t, o))) : (r = y(i), g.push(new e.Point(t, r))), this.m_item = {
                alert: a,
                points: g
            }, void(this.m_alertLabel === this.m_model.selectedSource() ? this._selectionData = {
                points: g,
                hittestResult: h.MOVEPOINT
            } : this._selectionData = null)) : void(this.m_item = null)
        }, o.prototype.color = function() {
            var t;
            return t = this._highlighted ? this.m_alertLabel.globalProperties().highlightColor.value() : this.m_alertLabel.properties().color.value() || this.m_alertLabel.globalProperties().color.value()
        }, o.prototype.renderer = function() {
            var t, e, i, n, o, c, h;
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), this.m_item ? (t = this.m_alertLabel, e = this.m_model, i = this.m_item.alert, n = {}, n.item = this.m_item, n.barSpacing = e.timeScale().barSpacing(), n.height = this._hovered ? 12 : 10, n.width = this._hovered ? this.labelWidth + 2 : this.labelWidth, n.connectingLineWidth = this._hovered ? 3 : 1, n.color = this.color(), n.lineWidth = (t.properties().line.width.value() || t.globalProperties().line.width.value()) + (this._hovered ? 2 : 0), n.lineStyle = t.properties().line.style.value() || t.globalProperties().line.style.value(), n.cursor = e.crossHairSource(), o = new _, i.get("extra").conditionData().isChannel ? o.append(new l(n)) : o.append(new r(n)), t.properties().line.visible.value() && t.globalProperties().line.visible.value() && o.append(new a(n)), c = t === e.hoveredSource(), c && o.append(new s(n)), h = t === e.selectedSource(), h && o.append(new d(this._selectionData)), o) : void 0
        }, inherit(r, f), r.prototype.hitTest = function(t) {
            return p.prototype.hitTest.call(this, t, h.MOVEPOINT)
        }, s.prototype.draw = function(t) {
            var i, n, o, r, s, a, l, c, h, d, u, p, f, _ = 1,
                g = "#FFFFFF",
                m = 12,
                v = "#000",
                y = 8,
                w = 20,
                b = 20,
                S = 5,
                T = ["Alert: " + this.alert.get("description")];
            for (t.font = m + "px Arial, sans-serif", n = 2 * w + e.max($.map(T, function(e) {
                    return t.measureText(e).width || 0
                })), o = T.length * m + 2 * y + (T.length - 1) * y, r = 2 === this.points.length, r ? (s = this.points[0], a = this.points[1], h = this.cursor.x < s.x - this.labelWidth, h ? (l = this.cursor.x, c = Math.abs(a.y - this.cursor.y) < Math.abs(s.y - this.cursor.y) ? a.y : s.y) : (l = s.x, c = this.cursor.y, c = Math.min(a.y, c), c = Math.max(s.y, c)), i = new e.Point(l, c)) : i = new e.Point(this.cursor.x, this.points[0].y), d = {
                x: i.x - b - S - n,
                y: i.y - o / 2
            }, t.lineWidth = _, t.strokeStyle = this.borderColor, t.fillStyle = g, t.translate(d.x, d.y), t.beginPath(), t.moveTo(0, 0), t.lineTo(n, 0), t.lineTo(n, o / 2 - S), t.lineTo(n + S, o / 2), t.lineTo(n, o / 2 + S), t.lineTo(n, o), t.lineTo(0, o), t.lineTo(0, 0), t.stroke(), t.fill(), t.textBaseline = "bottom", t.fillStyle = v, u = 0, p = w, f = 0; f < T.length; f++) u += y + m, t.fillText(T[f], p, u);
            t.translate(-d.x, -d.y)
        }, s.prototype.hitTest = function() {
            return null
        }, a.prototype.draw = function(t) {
            var e, i, n;
            for (t.lineWidth = this.lineWidth, t.strokeStyle = this.color, CanvasEx.setLineStyle(t, this.lineStyle), n = 0; n < this.points.length; n++) i = this.points[n].y, e = this.points[n].x, t.beginPath(), t.moveTo(e, i), t.lineTo(0, i), t.stroke()
        }, a.prototype.hitTest = function(t) {
            var e, i, n, o = 3;
            for (n = 0; n < this.points.length; n++)
                if (e = this.points[n].y, Math.abs(e - t.y) <= o) return i = n, new h(h.MOVEPOINT, i);
            return null
        }, l.prototype._claculateTriangleHeight = function(t, e) {
            var i = this.height;
            return t.y <= e.y && (i = Math.min(i, Math.abs(t.y - e.y) / 2)), i
        }, l.prototype.draw = function(t) {
            var e = this.item.points[0],
                i = this.item.points[1],
                n = this._claculateTriangleHeight(e, i),
                o = this.width,
                r = this.connectingLineWidth,
                s = this.horzLineWidth / 2;
            t.fillStyle = this.color, t.strokeStyle = this.color, t.lineWidth = r, t.beginPath(), t.moveTo(e.x - o / 2, e.y - s), t.lineTo(e.x + o / 2, e.y - s), t.lineTo(e.x + o / 2, e.y + n), t.closePath(), t.fill(), t.beginPath(), t.moveTo(i.x - o / 2, i.y + s), t.lineTo(i.x + o / 2, i.y + s), t.lineTo(i.x + o / 2, i.y - n), t.closePath(), t.fill(), i.y < e.y || (t.beginPath(), t.moveTo(i.x + o / 2, i.y), t.lineTo(e.x + o / 2, e.y), t.stroke())
        }, l.prototype.hitTest = function(t) {
            var e, i, n, o = this.item.points[0],
                r = this.item.points[1],
                s = this.width,
                a = this._claculateTriangleHeight(o, r),
                l = o.x - s / 2 <= t.x && t.x <= o.x + s / 2 && o.y <= t.y && t.y <= o.y + a,
                c = r.x - s / 2 <= t.x && t.x <= r.x + s / 2 && r.y - a <= t.y && t.y <= r.y;
            return l ? e = 0 : c && (e = 1), i = 3, n = Math.abs(t.x - (o.x + s / 2)) <= i && o.y <= t.y && t.y <= r.y, void 0 !== e ? new h(h.MOVEPOINT, e) : n ? new h(h.REGULAR) : null
        }, t.exports = n
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e, n, o, r, s, a, l) {
        "use strict";

        function c(t, i, r, s, a, l, h, d, y) {
            var b, T, x, C, P;
            this._version = c.version, this._readOnly = s, this._undoModel = d, this._properties = r, this._isSnapshot = y, this._studiesMetaData = l, this._studyVersioning = new L(this._studiesMetaData, h), this.m_timeScale = new m(this), this.m_panes = [], this.m_gridSource = new _, this.m_crossHairSource = new u(this, O.properties()), this.m_width = 0, this._tagsChanged = new e, this._lineCancelled = new e, this._magnet = new g(O.properties().magnet, this.m_timeScale, r.paneProperties.magnetSensivity), b = new R("chartproperties.mainSeriesProperties"), b.addExclusion("lockScale"), b.addExclusion("minTick"), b.addExclusion("priceAxisProperties.percentage"), b.addExclusion("priceAxisProperties.log"), this.createPane(void 0, !1, {
                rightAxisProperties: b.priceAxisProperties.state(["autoScale"])
            }), this.m_panes[0]._stretchFactor = 2 * p.DEFAULT_STRETCH_FACTOR, this.m_panes[0]._isMainPane = !0, this.m_selectedSource = null, this._selectedSourceChanged = new e, this._chartApi = t, this._invalidateHandler = i, this.m_hoveredSource = null, this._properties.listeners().subscribe(this, c.prototype.propertyChangeHandler), T = this, this._properties.timezone.listeners().subscribe(null, function() {
                T._chartApi && T._chartApi.connected() && T._chartApi.switchTimezone(T.timezone())
            }), this._properties.timeScale.rightOffset.listeners().subscribe(null, function() {
                T.m_timeScale.setOffset(T._properties.timeScale.rightOffset.value()), T.recalculateAllPanes()
            }), b.merge(r.mainSeriesProperties.state()), this.m_mainSeries = new D(this, b, a), this.m_panes[0].addDataSource(this.m_mainSeries, this.m_panes[0].rightPriceScale()), this.m_mainSeries.onCompleted().subscribe(this, function() {
                T.clearCurrentPosition()
            }), s || (b.addChild("priceAxisProperties", this.m_mainSeries.m_priceScale.properties()), b.lockScale.listeners().subscribe(this, function(t) {
                var e = t.value();
                e && (b.priceAxisProperties.percentage.setValue(!1), b.priceAxisProperties.logDisabled.setValue(!1)), b.priceAxisProperties.percentageDisabled.setValue(e), b.priceAxisProperties.logDisabled.setValue(e)
            }), this._properties.paneProperties.legendProperties.showStudyTitles.listeners().subscribe(this, function(t) {
                t.value() || T._properties.paneProperties.legendProperties.showStudyArguments.setValue(!1)
            })), this._barsMarksSources = [], this._syncPointCache = {}, n.enabled("charting_library_base") ? (C = new S(this), C.setOwnerSource(this.m_mainSeries), this._barsMarksSources.push(C), P = new v(this), P.setOwnerSource(this.m_mainSeries), this._barsMarksSources.push(P)) : (x = new w(this), x.setOwnerSource(this.m_mainSeries), this._barsMarksSources.push(x)), this.m_watermarkSource = new f(this.m_mainSeries), n.enabled("alerts") && !this.readOnly() && (this._alertsList = null, this._initAlertsList()), this.strategySources = [], this.strategySources.change = new e, this._activeStrategySource = new o(null), this._oldStartVisibleIndex = -1, this._oldEndVisibleIndex = -1, this._currentTool = "", O.hideAllDrawings().subscribe(this, c.prototype.visibilityChangeHandler), this._properties.scalesProperties.listeners().subscribe(this, c.prototype.fullUpdate), this._id = TradingView.guid()
        }
        var h = i(146),
            d = i(77).LineDataSource,
            u = i(299),
            p = i(141),
            f = i(303),
            _ = i(304),
            g = i(305),
            m = i(306),
            v = i(309),
            y = i(310).BarsMarksContainer,
            w = i(312),
            b = i(144),
            S = i(316),
            T = i(104),
            x = i(317),
            C = i(61).RGBColor,
            P = i(168),
            k = P.Study,
            I = P.createStudy,
            E = P.prepareStudyProperties,
            L = i(218),
            V = i(318),
            M = i(223).StudyLineDataSource,
            A = i(95).StudyConsts,
            D = i(53),
            O = i(82),
            R = i(81).DefaultProperty,
            $ = i(128).SyncPoint;
        c.prototype.isSnapshot = function() {
            return this._isSnapshot
        }, c.prototype.currentTool = function() {
            return this._currentTool
        }, c.prototype.setCurrentTool = function(t) {
            this._currentTool = t
        }, c.prototype.timezone = function() {
            return this._properties.timezone.value()
        }, c.prototype.version = function() {
            return this._version
        }, c.prototype.initConnection = function() {
            this._chartApi.switchTimezone(this.timezone())
        }, c.prototype.dumpViews = function() {
            var t, e, i, n, o = {};
            for (o.panes = [], t = 0; t < this.m_panes.length; t++) o.panes.push(this.m_panes[t].dumpViews());
            for (o.dataWindow = [], e = this.dataSources(), t = 0; t < e.length; t++) i = e[t], n = i.dataWindowView(), n && o.dataWindow.push(n.dump());
            return o
        }, c.prototype._paneInvalidationMask = function(t, e) {
            var i = new T,
                n = this.m_panes.indexOf(t);
            return void 0 === e && (e = T.LIGHT_UPDATE), i.invalidatePane(n, e), i
        }, c.prototype.updatePane = function(t) {
            var e = this._paneInvalidationMask(t);
            this.invalidate(e)
        }, c.prototype.fullUpdate = function(t) {
            this.invalidate(new T(T.FULL_UPDATE))
        }, c.prototype.updateSource = function(t) {
            var e = this.paneForSource(t),
                i = this._paneInvalidationMask(e);
            this.invalidate(i)
        }, c.prototype.studiesMetaData = function() {
            return this._studiesMetaData
        }, c.prototype.studyVersioning = function() {
            return this._studyVersioning
        }, c.prototype.disconnect = function() {
            var t, e = this.dataSources();
            for (t = 0; t < e.length; t++) e[t].disconnect && e[t].disconnect()
        }, c.prototype.restart = function() {
            var t, e, i;
            for (this.initConnection(), this.m_timeScale.reset(), this.m_mainSeries.restart(), t = this.dataSources(), e = 0; e < t.length; e++) i = t[e], i.restart && i !== this.m_mainSeries && i.restart()
        }, c.prototype.startNotStartedStudies = function() {
            var t, e;
            if (!this.m_mainSeries.isStarted()) throw Error("Cannot start studies: main series is not started");
            for (t = this.dataSources(), e = 0; e < t.length; e++) t[e] instanceof k && !t[e].isStarted() && t[e].restart && t[e] !== this.m_mainSeries && t[e].restart()
        }, c.prototype.updateLineTools = function() {
            var t, e, i = this.dataSources();
            for (t = 0; t < i.length; t++) TradingView.isInherited(i[t].constructor, d) && (e = i[t], e.tryCreateServerPoints(), e.checkAlert && e.checkAlert())
        }, c.prototype.realignLineTools = function() {
            var t, e, i = this.dataSources();
            for (t = 0; t < i.length; t++) TradingView.isInherited(i[t].constructor, d) && (e = i[t], e.calcIsActualSymbol());
            for (t = 0; t < this.m_panes.length; t++) this.m_panes[t].invalidateSourcesCache()
        }, c.prototype.readOnly = function() {
            return this._readOnly
        }, c.prototype.properties = function() {
            return this._properties
        }, c.prototype.lineCancelled = function() {
            return this._lineCancelled
        }, c.prototype.crossHairMoved = function() {
            return this.m_crossHairSource.moved()
        }, c.prototype.chartApi = function() {
            return this._chartApi
        }, c.prototype.propertyChangeHandler = function() {
            this.invalidate(new T(T.LIGHT_UPDATE))
        }, c.prototype.visibilityChangeHandler = function() {
            this.setSelectedSource(), this.invalidate(new T(T.LIGHT_UPDATE))
        }, c.prototype.updateAllPaneViews = function() {
            var t, e;
            for (t = 0; t < this.m_panes.length; t++) e = this.m_panes[t], e.updateAllViews()
        }, c.prototype.mainSeries = function() {
            return this.m_mainSeries
        }, c.prototype.timeScale = function() {
            return this.m_timeScale
        }, c.prototype.panes = function() {
            return this.m_panes
        }, c.prototype.gridSource = function() {
            return this.m_gridSource
        }, c.prototype.watermarkSource = function() {
            return this.m_watermarkSource
        }, c.prototype.crossHairSource = function() {
            return this.m_crossHairSource
        }, c.prototype.publishedChartsTimelineSource = function() {
            for (var t = 0; t < this._barsMarksSources.length; ++t)
                if (this._barsMarksSources[t] instanceof w) return this._barsMarksSources[t]
        }, c.prototype.barsMarksSources = function() {
            return this._barsMarksSources
        }, c.prototype.width = function() {
            return this.m_width
        }, c.prototype.setPaneHeight = function(t, e) {
            t.setHeight(e), this.recalculateAllPanes(), this.invalidate(new T(T.LIGHT_UPDATE))
        }, c.prototype.setWidth = function(t) {
            var e, i;
            for (this.m_width = t, this.m_timeScale.setWidth(this.m_width), e = 0; e < this.m_panes.length; ++e) i = this.m_panes[e], i.setWidth(t);
            this.recalculateAllPanes()
        }, c.prototype.createPane = function(t, e, i) {
            var n, o;
            if (this._undoModel._chartWidget.isMaximizedPane() && this._undoModel._chartWidget.toggleMaximizePane(), n = this._properties.paneProperties, i && n.merge(i), o = new p(this.m_timeScale, n, this, e), "number" == typeof t && isFinite(t)) {
                if (0 > t || t > this.m_panes.length) return void TradingView.logDebugChart("ChartModel.createPane: invalid index: " + t);
                this.m_panes.splice(t, 0, o)
            } else this.m_panes.push(o);
            return o.onTagsChanged().subscribe(this, c.prototype.onPaneTagsChanged), o
        }, c.prototype.removePane = function(t) {
            this._undoModel._chartWidget.isMaximizedPane() && this._undoModel._chartWidget.toggleMaximizePane(), t.destroy();
            var e = this.m_panes.indexOf(t); - 1 !== e && this.m_panes.splice(e, 1), this.invalidate(new T(T.FULL_UPDATE))
        }, c.prototype.startScalePrice = function(t, e, i) {
            t.startScalePrice(e, i)
        }, c.prototype.scalePriceTo = function(t, e, i) {
            t.scalePriceTo(e, i), this.mainSeries().properties().lockScale.value() ? this.invalidate(new T(T.LIGHT_UPDATE)) : this.invalidate(this._paneInvalidationMask(t, T.LIGHT_UPDATE))
        }, c.prototype.endScalePrice = function(t, e) {
            t.endScalePrice(e), this.invalidate(this._paneInvalidationMask(t, T.LIGHT_UPDATE))
        }, c.prototype.startScrollPrice = function(t, e, i) {
            t.startScrollPrice(e, i)
        }, c.prototype.scrollPriceTo = function(t, e, i) {
            t.scrollPriceTo(e, i), this.invalidate(this._paneInvalidationMask(t, T.LIGHT_UPDATE))
        }, c.prototype.endScrollPrice = function(t, e) {
            t.endScrollPrice(e), this.invalidate(this._paneInvalidationMask(t, T.LIGHT_UPDATE))
        }, c.prototype.setPriceAutoScale = function(t, e, i) {
            t.setPriceAutoScale(e, i), this.invalidate(this._paneInvalidationMask(t, T.LIGHT_UPDATE))
        }, c.prototype.restorePriceScaleState = function(t, e, i) {
            t.restorePriceScaleState(e, i), this.invalidate(this._paneInvalidationMask(t, T.LIGHT_UPDATE))
        }, c.prototype.resetPriceScale = function(t, e) {
            t.resetPriceScale(e), this.invalidate(this._paneInvalidationMask(t, T.LIGHT_UPDATE))
        }, c.prototype.updateScales = function(t, e) {
            this._undoModel._chartWidget._updateScalesActions()
        }, c.prototype.startScaleTime = function(t) {
            this.m_timeScale.startScale(t)
        }, c.prototype.scaleTimeTo = function(t) {
            this.m_timeScale.scaleTo(t), this.recalculateAllPanes(), this.invalidate(new T(T.LIGHT_UPDATE))
        }, c.prototype.endScaleTime = function() {
            this.m_timeScale.endScale(), this.invalidate(new T(T.LIGHT_UPDATE)), this.mainSeries().requestMoreData(), this.recalcVisibleRangeStudy(this.dataSources())
        }, c.prototype.startScrollTime = function(t) {
            this.m_timeScale.startScroll(t), this._isTimeScrolling = !0
        }, c.prototype.scrollTimeTo = function(t) {
            this.m_timeScale.scrollTo(t), this.recalculateAllPanes(), this.invalidate(new T(T.LIGHT_UPDATE))
        }, c.prototype.endScrollTime = function() {
            this.m_timeScale.endScroll(), this.invalidate(new T(T.LIGHT_UPDATE)), this.mainSeries().requestMoreData(), this.recalcVisibleRangeStudy(this.dataSources()), this._isTimeScrolling = !1
        }, c.prototype.recalcStudyBasedLineTools = function() {
            this.dataSources().forEach(function(t) {
                t instanceof M && t.recalcStudyIfNeeded && t.recalcStudyIfNeeded()
            })
        }, c.prototype.recalcVisibleRangeStudy = function(t, e) {
            void 0 !== this._recalcVRTimerId && clearTimeout(this._recalcVRTimerId);
            var i = this;
            this._recalcVRTimerId = setTimeout(function() {
                i._recalcVisibleRangeStudy(t, e)
            }, 500)
        }, c.prototype._recalcVisibleRangeStudy = function(t, e) {
            var i, n, o, r, s, a, l, c, h, d, u, p, f, _, g;
            if (!this.timeScale().isEmpty() && (i = this.timeScale().visibleBars(), n = this.mainSeries().nearestData(i.firstBar(), TradingView.SEARCH_NEAREST_RIGHT), o = this.mainSeries().nearestData(i.lastBar(), TradingView.SEARCH_NEAREST_LEFT), r = n ? n.index : void 0, s = o ? o.index : void 0, a = r === this._oldStartVisibleIndex, l = s === this._oldEndVisibleIndex, !a || !l || e))
                for (this._oldStartVisibleIndex = r, this._oldEndVisibleIndex = s, c = 0; c < t.length; c++)
                    if (t[c] instanceof k) {
                        for (h = t[c], d = h.metaInfo().inputs, u = null, p = null, f = 0; f < d.length; f++) "first_visible_bar_time" === d[f].id ? (_ = n && n.value ? n.value[TradingView.TIME_PLOT] : 0, u = 1e3 * Math.floor(_)) : "last_visible_bar_time" === d[f].id && (_ = o && o.value ? o.value[TradingView.TIME_PLOT] : 0, p = 1e3 * Math.floor(_));
                        g = h.properties().inputs, u && (p ? g.first_visible_bar_time.setValueSilently(u) : g.first_visible_bar_time.setValue(u, !0)), p && g.last_visible_bar_time.setValue(p, !0)
                    }
        }, c.prototype.resetTimeScale = function() {
            this.m_timeScale.restoreDefault(), this.recalculateAllPanes(), this.mainSeries().requestMoreData(), this.recalcVisibleRangeStudy(this.dataSources()), this.invalidate(new T(T.LIGHT_UPDATE))
        }, c.prototype.restoreTimeScaleState = function(t) {
            this.m_timeScale.restoreState(t), this.recalculateAllPanes(), this.invalidate(new T(T.LIGHT_UPDATE))
        }, c.prototype.restoreFactoryDefaults = function(t) {
            t.restoreFactoryDefaults(), this.recalcVisibleRangeStudy(this.dataSources(), !0), this.mainSeries().onChartStyleChanged()
        }, c.prototype.setSelectedSource = function(t, e) {
            if (!(this.m_selectedSource === t && this._lastHittestData === e || t && t.customization && t.customization.disableSelection)) {
                this._lastHittestData = e;
                var i = new T;
                this.m_selectedSource && (this.m_selectedSource.updateAllViews(), TradingView.alertsDispatcher && this.m_selectedSource.hasAlert.value() && this.m_selectedSource.getAlert({
                    fromCache: !0
                }).done(function(t) {
                    t && t.set("selected", !1)
                })), this.m_selectedSource = t, this._selectedSourceChanged.fire(t), t && (t.updateAllViews(), TradingView.alertsDispatcher && t.hasAlert.value() && t.getAlert({
                    fromCache: !0
                }).done(function(t) {
                    t && t.set("selected", !0)
                })), i.force = !0, this.invalidate(new T(T.LIGHT_UPDATE)), this.setHoveredSource(t, e)
            }
        }, c.prototype.checkLineToolSelection = function() {
            this.m_selectedSource && this.m_selectedSource instanceof d && (this.m_selectedSource.calcIsActualSymbol(), this.m_selectedSource.isActualSymbol() || this.setSelectedSource(null))
        }, c.prototype.onSelectedSourceChanged = function() {
            return this._selectedSourceChanged
        }, c.prototype.setHoveredSource = function(t, e) {
            if (this.m_hoveredSource !== t || this._lastHittestData !== e) {
                this._lastHittestData = e;
                var i = null;
                this.m_hoveredSource && (this.m_hoveredSource.updateAllViews(), i || (i = new T), TradingView.alertsDispatcher && this.m_hoveredSource.hasAlert.value() && this.m_hoveredSource.getAlert({
                    fromCache: !0
                }).done(function(t) {
                    t && t.set("hovered", !1)
                }), i.merge(this._paneInvalidationMask(this.paneForSource(this.m_hoveredSource), T.LIGHT_UPDATE))), this.m_hoveredSource = t, t && (t.updateAllViews(), i || (i = new T), i.merge(this._paneInvalidationMask(this.paneForSource(t), T.LIGHT_UPDATE)), TradingView.alertsDispatcher && t.hasAlert.value() && t.getAlert({
                    fromCache: !0
                }).done(function(t) {
                    t && t.set("hovered", !0)
                })), i && this.invalidate(i)
            }
        }, c.prototype.selectedSource = function() {
            return this.m_selectedSource
        }, c.prototype.hoveredSource = function() {
            return this.m_hoveredSource
        }, c.prototype.lastHittestData = function() {
            return this._lastHittestData
        }, c.prototype.invalidate = function(t) {
            this._invalidateHandler && this._invalidateHandler(t)
        }, c.prototype.dataSources = function() {
            var t, e, i, n = [];
            for (n.push(this.m_crossHairSource), t = 0; t < this.m_panes.length; ++t)
                for (e = this.m_panes[t].dataSources(), i = 0; i < e.length; i++) n.push(e[i]);
            return n
        }, c.prototype.dataSourceForId = function(t) {
            var e, i;
            for (i = 0; i < this.m_panes.length; ++i)
                if (e = this.m_panes[i].dataSourceForId(t)) return e;
            return null
        }, c.prototype.children = function(t) {
            var e, i, n = this.dataSources(),
                o = [];
            for (e = 0; e < n.length; e++) i = n[e], i.ownerSource() === t && o.push(i);
            return o
        }, c.prototype.setCurrentPosition = function(t, e, i, n) {
            var o, r, s, a, l, c, h, u, p, f, _, g, m, v = NaN,
                y = Math.round(this.m_timeScale.coordinateToIndex(t));
            if (i && (o = i.defaultPriceScale(), o.isEmpty() || (v = o.coordinateToPrice(e))), (this._lineBeingCreated || d.isLineTool(this.currentTool())) && (v = this._magnet.align(v, y, i)), this._isTimeScrolling) return void this.m_crossHairSource.setPosition(this.m_crossHairSource.index, v, i);
            for (this.m_crossHairSource.setPosition(y, v, i), this.m_crossHairSource.dataWindowView().update(), r = this.m_panes, s = r.length; s--;)
                for (a = r[s].dataSources(), l = a.length; l--;) c = a[l].dataWindowView(), c && c.update();
            this._lineBeingCreated ? (this._lineBeingCreated.setLastPoint({
                index: y,
                price: v
            }, n), this._lineBeingCreated.updateAllViews(), this.invalidate(new T(T.LIGHT_UPDATE))) : this.crossHairSource().startMeasurePoint() ? this.invalidate(new T(T.LIGHT_UPDATE)) : this.invalidate(new T(T.UPDATE_CURSOR_ONLY)), this._isSettingsExternalPosition || (h = this._undoModel._chartWidget, h._chartWidgetCollection && (u = this.mainSeries(), p = u.syncModel(), p && (f = this.m_timeScale.points().roughTime(y, p.projectTime.bind(p)), _ = {
                timeStamp: f
            }, g = i.mainDataSource(), g instanceof D && (_.price = v, _.symbol = g.symbol()), _.syncModel = p, m = this._lineBeingCreated || this._linePointBeingEdited || this._sourceBeingMoved, m = m && O.drawOnAllCharts().value(), h._chartWidgetCollection.syncCrosshair(_, h, m, n))))
        }, c.prototype.clearCurrentPosition = function() {
            var t, e, i, n, o, r, s = this.crossHairSource();
            for (s.clearPosition(), s.dataWindowView().update(), t = this.m_panes, e = t.length; e--;)
                for (i = t[e].dataSources(), n = i.length; n--;) o = i[n].dataWindowView(), o && o.update();
            this.invalidate(new T(T.UPDATE_CURSOR_ONLY)), r = this._undoModel._chartWidget, r._chartWidgetCollection && r._chartWidgetCollection.syncCrosshair(NaN, r)
        }, c.prototype._createSyncPoint = function(t, e) {
            var i, n, o = this._syncPointCache[t.uniqueId()];
            if (o) {
                if (i = o[e.uniqueId()]) return i
            } else this._syncPointCache[t.uniqueId()] = {};
            return n = new $(t, e), this._syncPointCache[t.uniqueId()][e.uniqueId()] = n, n
        }, c.prototype.setExternalPosition = function(t, e) {
            var i, n, o, r, s, a, l, c, h, d, u, p, f;
            if (!Number.isNaN(t) && isNumber(t.timeStamp) && (n = this.mainSeries(), o = n.syncModel(), o && (r = this._createSyncPoint(t.syncModel, o), s = r.sourceTimeToTargetTime(t.timeStamp), i = this.m_timeScale.points().roughIndex(s, o.distance.bind(o)))), a = this.mainSeries().symbol(), a === t.symbol) return this._isSettingsExternalPosition = !0, l = this.paneForSource(this.mainSeries()), c = this.m_timeScale.indexToCoordinate(i), h = this.mainSeries().priceScale().priceToCoordinate(t.price, !0), this.setCurrentPosition(c, h, l, e || {}), void delete this._isSettingsExternalPosition;
            for (isFinite(i) ? this.crossHairSource().setPosition(i, NaN, null) : (d = this.crossHairSource(), d.clearPosition(), d.dataWindowView().update()), u = this.dataSources(), p = u.length; p--;) f = u[p].dataWindowView(), f && f.update();
            this.invalidate(new T(T.UPDATE_CURSOR_ONLY))
        }, c.prototype.updateCrossHair = function() {
            this.m_crossHairSource.updateIndex()
        }, c.prototype.updateTimeScale = function(t, e, i, n, o) {
            var r, s, a;
            if (o)
                for (this.m_timeScale.reset(), r = this.dataSources(), s = 0; s < r.length; s++) r[s].clearData && r[s].clearData();
            this.m_timeScale.update(t, e, i, n), a = "ChartModel.prototype.updateTimeScale(" + t + "," + e + "," + i.length + "," + n.length + "," + o + ")", a += "TimeScale: {first:" + this.m_timeScale.m_points.firstTimePointIndex() + ",last:" + this.m_timeScale.m_points.lastTimePointIndex() + "}", TradingView.logDebugChart(a), this.recalculateAllPanes(), this.invalidate(new T(T.LIGHT_UPDATE))
        }, c.prototype.recalculatePane = function(t) {
            t && t.recalculate()
        }, c.prototype.paneForSource = function(t) {
            for (var e = this.m_panes.length - 1; e >= 0; e--)
                if (-1 !== this.m_panes[e].dataSources().indexOf(t)) return this.m_panes[e];
            return t instanceof y ? this.paneForSource(this.m_mainSeries) : null
        }, c.prototype.recalculateAllPanes = function() {
            for (var t = 0; t < this.m_panes.length; ++t) this.m_panes[t].recalculate();
            this.timeScale().recalcLockedScale(), this.updateAllPaneViews()
        }, c.prototype._invalidateBarColorerCaches = function() {
            var t, e, i = this.dataSources();
            for (t = 0; t < i.length; ++t) e = i[t], e instanceof D && e.invalidateBarColorerCache()
        }, c.prototype.addStrategySource = function(t) {
            ~this.strategySources.indexOf(t) || (this.strategySources.push(t), this.strategySources.change.fire())
        }, c.prototype.removeStrategySource = function(t) {
            var e = this.strategySources.indexOf(t);
            ~e && (this.strategySources.splice(e, 1), this.strategySources.change.fire())
        }, c.prototype.setActiveStrategySource = function(t) {
            ~this.strategySources.indexOf(t) && this._activeStrategySource.setValue(t)
        }, c.prototype.unsetActiveStrategySource = function() {
            this._activeStrategySource.setValue(null)
        }, c.prototype.activeStrategySource = function() {
            return this._activeStrategySource
        }, c.prototype.insertStudy = function(t, e, i) {
            var n, o, r, s, a = null,
                l = ["Study_ESD$TV_SPLITS@tv-scripting", "Study_ESD$TV_DIVIDENDS@tv-scripting", "Study_ESD$TV_SPLITS@tv-scripting", "Volume@tv-basicstudies", "Sessions@tv-basicstudies"];
            return -1 === l.indexOf(t.id) && TradingView.trackEvent("studies", "Study_" + t.id), i || t.is_price_study ? a = this.paneForSource(this.m_mainSeries) : (a = this.createPane(void 0, !0), e && e.paneSize && a.setPaneSize(e.paneSize)), "Compare@tv-basicstudies" === t.id && (TradingView.trackEvent("compare", "symbol:" + e.inputs.symbol), this.m_mainSeries.priceScale().properties().log.setValue(!1), this.m_mainSeries.priceScale().properties().percentage.setValue(!0)), n = E(t, e, a, this.studyVersioning()), o = I(this, n, this.mainSeries(), t), o.start(), r = o.metaInfo().priceScale || A.SCALE_RIGHT, r === A.SCALE_RIGHT ? s = a.rightPriceScale() : r === A.SCALE_LEFT ? s = a.leftPriceScale() : t.is_price_study ? s = null : (TradingView.logWarn("Cannot add study " + o.metaInfo().id + " with 'No Scale' setting, because study is not a price study. Using right price scale."), s = a.rightPriceScale()), i ? a.addDataSource(o, null) : a.addDataSource(o, s), o.properties().linkedToSeries && o.properties().linkedToSeries.value() && o.setOwnerSource(this.mainSeries()), this.recalculatePane(a), this.invalidate(new T(T.FULL_UPDATE)), this._invalidateBarColorerCaches(), this.recalcVisibleRangeStudy(this.dataSources(), !0), o
        }, c.prototype.replaceStudyStub = function(t, e) {
            var i, n, o, r = this.paneForSource(t);
            return null === r ? !1 : (i = t.isNoScale() ? null : t.priceScale(), n = t.zorder(), o = t.ownerSource(), r.insertDataSource(e, i, n), e.setOwnerSource(o), this.removeSource(t), e.start(), this.recalculatePane(r), this.invalidate(new T(T.FULL_UPDATE)), !0)
        }, c.prototype.insertStudyStub = function(t) {
            var e = this.mainSeries(),
                i = this.paneForSource(e),
                n = new V(this, null, t);
            return i.addDataSource(n, null), this.recalculatePane(i), this.invalidate(new T(T.FULL_UPDATE)), n
        }, c.prototype.removeStudyStub = function(t) {
            var e = this.dataSourceForId(t);
            return void 0 === e ? (TradingView.logNormal("StudyStub id=" + t + " is not found in chart model"), !1) : (this.removeSource(e), !0)
        }, c.prototype.detachSource = function(t, e) {
            var i = this.paneForSource(t);
            if (i) return i.removeDataSource(t), i.isEmpty() ? (this._lineBeingCreated && i === this._paneBeingCreatedLineOn && this.cancelCreatingLine(), this.removePane(i, e), !0) : (this.invalidate(new T(T.FULL_UPDATE)), !1)
        }, c.prototype.removeSource = function(t, e) {
            var i, n, o, r;
            if (t === this.m_selectedSource && this.setSelectedSource(null), t === this._sourceBeingMoved && (this._sourceBeingMoved = null, this._linePointBeingMoved = null), t.stop && t.stop(), i = this.detachSource(t, e), t.metaInfo && t.metaInfo() && "Compare@tv-basicstudies" === t.metaInfo().id) {
                for (n = this.paneForSource(this.m_mainSeries), o = n.dataSources(), r = 0; r < o.length; r++)
                    if (o[r].metaInfo && "Compare@tv-basicstudies" === o[r].metaInfo().id) return;
                this.m_mainSeries.priceScale().properties().percentage.setValue(!1)
            }
            return this.invalidate(new T(T.FULL_UPDATE)), this._invalidateBarColorerCaches(), t.linkKey && O.removeLineTool({
                model: this,
                linkKey: t.linkKey
            }), i
        }, c.prototype.move = function(t, e, i) {
            var n, o, r, s, a = this.children(t),
                l = this.paneForSource(t),
                c = e ? e.priceScaleName(i) : "right",
                h = l === e;
            if (h) {
                for (n = e.priceScaleByName(c), o = 0; o < a.length; o++) e.move(a[o], n);
                e.move(t, n)
            } else {
                for (r = e || this.createPane(), s = r.priceScaleByName(c), o = 0; o < a.length; o++) this.detachSource(a[o]);
                for (o = 0; o < a.length; o++) r.addDataSource(a[o], s);
                this.detachSource(t), r.addDataSource(t, s)
            }
            this.invalidate(new T(T.FULL_UPDATE))
        }, c.prototype.isSingleInstanceLineTool = function(t) {
            return "LineStudyMtpRiskReward" === t || "LineStudyMtpAnalysis" === t
        }, c.prototype._externalTimeStamp = function(t) {
            var e = this.mainSeries().syncModel();
            return this.m_timeScale.points().roughTime(t, e && e.projectTime.bind(e))
        }, c.prototype.createLineTool = function(t, e, i, n, o) {
            var s, a, l, c, d, u, p, f;
            return h.isValid(i) ? (this.isSingleInstanceLineTool(i) && this._undoModel.removeAllDrawingTools(i), TradingView.trackEvent("drawings", "Study_Drawing_" + i), s = h.create(i, this, n, null, t.mainDataSource()), a = !s.linkKey && !o, O.drawOnAllCharts().value() ? s.linkKey = o || TradingView.randomHash() : s.linkKey = o, s.toolname = i, s.setOwnerSource(t.mainDataSource()), l = t.defaultPriceScale(), t.addDataSource(s, l), d = this.m_timeScale.indexToCoordinate(e.index), u = l.priceToCoordinate(e.price), s.isFixed() ? c = s.addFixedPoint(new r.Point(d, u)) : (p = s.constructor, p.skipMagnetting || (e.price = this._magnet.align(e.price, e.index, t)), c = s.addPoint(e)), c || (this._lineBeingCreated = s, this._paneBeingCreatedLineOn = t), a && s.enableCurrentIntervalVisibility(), this.invalidate(new T(T.FULL_UPDATE)), o || !O.drawOnAllCharts().value() || s.properties().singleChartOnly || (f = this._externalTimeStamp(e.index), O.createLineTool({
                point: {
                    price: e.price,
                    timeStamp: f
                },
                linetool: i,
                properties: s.properties(),
                symbol: this.mainSeries().symbol(),
                model: this,
                linkKey: s.linkKey
            })), s) : null
        }, c.prototype.lineBeingCreated = function() {
            return this._lineBeingCreated
        }, c.prototype.paneBeingCreatedLineOn = function() {
            return this._paneBeingCreatedLineOn
        }, c.prototype.coninueCreatingLine = function(t, e, i, n) {
            var o, r, s, a, l, c = this.paneForSource(this._lineBeingCreated);
            return t.price = this._magnet.align(t.price, t.index, c), o = this._lineBeingCreated.addPoint(t, e, i), r = this._lineBeingCreated, this._lineBeingCreated.updateAllViews(), s = new T(T.LIGHT_UPDATE), a = null, o && (a = {
                points: this._lineBeingCreated._timePoint,
                interval: this.mainSeries().interval()
            }, this._paneBeingCreatedLineOn = null, this._lineBeingCreated = null, s.force = !0), this.invalidate(s), n || !O.drawOnAllCharts().value() || r.properties().singleChartOnly || (l = this._externalTimeStamp(t.index), O.continueLineTool({
                point: {
                    price: t.price,
                    timeStamp: l
                },
                envState: e,
                finalState: a,
                model: this
            })), o
        }, c.prototype.cancelCreatingLine = function() {
            if (this._lineBeingCreated) {
                var t = this._lineBeingCreated;
                this.removeSource(this._lineBeingCreated), this._lineBeingCreated = null, this._lineCancelled.fire(), O.drawOnAllCharts().value() && !t.properties().singleChartOnly && O.cancelLineTool({
                    model: this
                })
            }
        }, c.prototype.startChangingLinetool = function(t, e, i, n) {
            var o, r, s;
            this._lineBeingEdited = t, this._linePointBeingEdited = i, this._lineBeingEdited.startChanging(i, e), o = this.paneForSource(t), e.price = this._magnet.align(e.price, e.index, o), this._lineBeingEdited.startDragPoint && this._lineBeingEdited.startDragPoint(i, e), this._lineBeingEdited.setPoint(i, e, n), this._lineBeingEdited.updateAllViews(), r = this._paneInvalidationMask(o, T.LIGHT_UPDATE), r.force = !0, this.invalidate(r), t.linkKey && !t.properties().singleChartOnly && (s = this._externalTimeStamp(e.index), O.startChangingLineTool({
                linkKey: t.linkKey,
                model: this,
                symbol: this.mainSeries().symbol(),
                point: {
                    price: e.price,
                    timeStamp: s
                },
                pointIndex: i,
                envState: n
            }))
        }, c.prototype.lineBeingEdited = function() {
            return this._lineBeingEdited
        }, c.prototype.linePointBeingEdited = function() {
            return this._linePointBeingEdited
        }, c.prototype.changeLinePoint = function(t, e) {
            var i, n, o, r, s = this.paneForSource(this._lineBeingEdited);
            void 0 !== t.x && void 0 !== t.y ? (o = this._lineBeingEdited.priceScale(), i = o.coordinateToPrice(t.y), n = Math.round(this.timeScale().coordinateToIndex(t.x)), i = this._magnet.align(i, n, s), this._lineBeingEdited.setPoint(this._linePointBeingEdited, {
                price: i,
                index: n
            }, e)) : this._lineBeingEdited.setPoint(this._linePointBeingEdited, t, e), this._lineBeingEdited.updateAllViews(), this.invalidate(new T(T.LIGHT_UPDATE)), this._lineBeingEdited.linkKey && !this._lineBeingEdited.properties().singleChartOnly && (r = this._externalTimeStamp(n), O.changeLineTool({
                linkKey: this._lineBeingEdited.linkKey,
                model: this,
                symbol: this.mainSeries().symbol(),
                point: {
                    price: i,
                    timeStamp: r
                },
                envState: e
            }))
        }, c.prototype.endChangingLinetool = function(t) {
            var e, i, n = this._lineBeingEdited;
            this._lineBeingEdited.endChanging(!1, t), this._lineBeingEdited = null,
                this._linePointBeingEdited = null, e = new T(T.LIGHT_UPDATE), e.force = !0, this.invalidate(e), i = {
                points: n._timePoint,
                interval: this.mainSeries().interval()
            }, n.linkKey && !n.properties().singleChartOnly && O.finishChangingLineTool({
                model: this,
                linkKey: n.linkKey,
                symbol: this.mainSeries().symbol(),
                finalState: i
            })
        }, c.prototype.startMovingSource = function(t, e, i) {
            var n, o, r;
            this._sourceBeingMoved = t, this._linePointBeingMoved = i, this._sourceBeingMoved.startMoving(e, i), n = this.paneForSource(this._sourceBeingMoved), o = this._paneInvalidationMask(n, T.LIGHT_UPDATE), o.force = !0, this.invalidate(o), t.linkKey && !t.properties().singleChartOnly && (r = this._externalTimeStamp(e.index), O.startMovingLineTool({
                linkKey: t.linkKey,
                model: this,
                symbol: this.mainSeries().symbol(),
                point: {
                    price: e.price,
                    timeStamp: r
                }
            }))
        }, c.prototype.sourceBeingMoved = function() {
            return this._sourceBeingMoved
        }, c.prototype.moveSource = function(t) {
            if (this._sourceBeingMoved.move(t, this._linePointBeingMoved), this.invalidate(new T(T.LIGHT_UPDATE)), this._sourceBeingMoved.linkKey && !this._sourceBeingMoved.properties().singleChartOnly) {
                var e = this._externalTimeStamp(t.index);
                O.moveLineTool({
                    linkKey: this._sourceBeingMoved.linkKey,
                    model: this,
                    point: {
                        price: t.price,
                        timeStamp: e
                    }
                })
            }
        }, c.prototype.endMovingSource = function(t) {
            var e, i, n = this._sourceBeingMoved,
                o = this.paneForSource(this._sourceBeingMoved);
            this._sourceBeingMoved.endMoving(t), this._sourceBeingMoved = null, this._linePointBeingMoved = null, e = this._paneInvalidationMask(o, T.LIGHT_UPDATE), e.invalidateAll(T.LIGHT_UPDATE), e.force = !0, this.invalidate(e), n instanceof d && (i = {
                points: n._timePoint,
                interval: this.mainSeries().interval()
            }, n.linkKey && !n.properties().singleChartOnly && O.finishMovingLineTool({
                linkKey: n.linkKey,
                model: this,
                finalState: i
            }))
        }, c.prototype.finishLineTool = function(t) {
            var e = this.lineBeingCreated();
            e && (e.finish && e.finish(), !t && O.drawOnAllCharts().value() && e.linkKey && !e.properties().singleChartOnly && O.finishLineTool({
                linkKey: e.linkKey,
                model: this
            }))
        }, c.prototype.calculateDefaultTags = function() {
            var t, e, i = [],
                n = this.dataSources();
            for (t = 0; t < n.length; t++) e = n[t], e.tags && (i = i.concat(e.tags()));
            return i
        }, c.prototype.changeZOrder = function(t, e) {
            var i = this.paneForSource(t);
            i.changeZOrder(t, e), this.invalidate(new T(T.FULL_UPDATE))
        }, c.prototype.sendToBack = function(t) {
            var e = this.paneForSource(t);
            e.sendToBack(t), this.invalidate(new T(T.FULL_UPDATE))
        }, c.prototype.bringToFront = function(t) {
            var e = this.paneForSource(t);
            e.bringToFront(t), this.invalidate(new T(T.FULL_UPDATE))
        }, c.prototype.onTagsChanged = function() {
            return this._tagsChanged
        }, c.prototype.onPaneTagsChanged = function() {
            this._tagsChanged.fire()
        }, c.prototype.setTimeViewport = function(t, e) {
            this.timeScale().zoomToBarsRange(t, e), this.recalculateAllPanes(), this.invalidate(new T(T.LIGHT_UPDATE))
        }, c.prototype.zoomToViewport = function(t, e, i, n, o) {
            var r, a, l;
            this.setTimeViewport(t, e), r = Math.min(i, n), a = Math.max(i, n), l = o.defaultPriceScale(), l.setAutoScale(!1), l.isLog() && (r = l.priceToLogical(r), a = l.priceToLogical(a)), l.setPriceRange(new s(r, a)), this.recalculateAllPanes(), this.invalidate(this._paneInvalidationMask(o, T.LIGHT_UPDATE))
        }, c.prototype.clearAllStudies = function() {
            var t, e = this.dataSources();
            for (t = 0; t < e.length; t++) e[t].clearData && e[t].clearData()
        }, c.prototype.allLineTools = function() {
            var t, e, i, n, o, r, s = [],
                a = this.m_panes,
                l = a.length;
            for (t = 0; l > t; ++t)
                for (e = a[t], i = e.dataSources(), n = i.length, o = 0; n > o; ++o) r = i[o], TradingView.isInherited(r.constructor, d) && s.push(r);
            return s
        }, c.prototype.backgroundColor = function() {
            return this._properties.paneProperties.background._value
        }, c.prototype.backgroundCounterColor = function() {
            return new C(this.backgroundColor()).blackWhiteContrast()
        }, c.prototype.isDark = function() {
            return "white" === this.backgroundCounterColor()
        }, c.prototype.canZoomIn = function() {
            return this.m_timeScale.canZoomIn()
        }, c.prototype.canZoomOut = function() {
            return this.m_timeScale.canZoomOut()
        }, c.prototype.updateAllVolumeStudies = function() {
            var t, e, i, n, o, r, s = this.m_panes;
            for (t = s.length; t--;)
                for (e = !1, i = s[t], n = i.dataSources(), o = n.length; o--;) r = n[o], r instanceof k && "Volume" === r.metaInfo().shortId && (r.updateAllViews(), e || (this.updatePane(i), e = !0))
        }, c.prototype._initAlertsList = function() {
            function t(t) {
                function e(e) {
                    var i, n;
                    e && (i = e.mainDataSource(), n = e.priceScaleForSource(i) || e.rightPriceScale() || e.leftPriceScale(), n && e.addDataSource(new b(r, t), n))
                }
                if (t.isOHLC()) e(r.paneForSource(r.m_mainSeries));
                else
                    for (var i = r.m_panes.length - 1; i >= 0; i--) e(r.m_panes[i]);
                s.update()
            }

            function e(t) {
                function e(t) {
                    return t.alert && t.alert() && t.alert().id === l
                }
                var i, n, o, l = t.id;
                for (o = r.m_panes.length - 1; o >= 0; o--) i = r.m_panes[o], n = a.find(i.dataSources(), e), n && i.removeDataSource && i.removeDataSource(n);
                s.update()
            }

            function i() {
                var t, e, i, n = r.m_panes;
                for (e = n.length - 1; e >= 0; e--)
                    for (t = n[e].dataSources(), i = t.length - 1; i >= 0; i--) t[i] instanceof b && n[e].removeDataSource(t[i])
            }

            function n() {
                TradingView.alertsDispatcher.requestList({
                    symbol: r.mainSeries().actualSymbol(),
                    resolution: r.mainSeries().interval(),
                    active: !0,
                    success: function() {
                        r._alertsList.syncCollections()
                    },
                    error: function() {
                        r._alertsList.reset()
                    }
                })
            }

            function o(t) {
                r.mainSeries().onSymbolResolved()[t](r, n), r.mainSeries().onSymbolError()[t](r, i), r.mainSeries().properties().interval[t](r, n)
            }
            var r = this,
                s = r._undoModel._chartWidget;
            r._alertsList = new x({
                observableCollection: TradingView.alertsDispatcher.alerts,
                syncEvents: ["change:active", "change:crossInterval", "change:resolution", "change:symbol"],
                validator: function(t) {
                    return (t.get("active") || t.isNew()) && (t.get("crossInterval") || t.get("resolution") === r.mainSeries().interval()) && t.get("symbol") === r.mainSeries().actualSymbol()
                }
            }), r._alertsList.on("add", t), r._alertsList.on("remove", e), r._alertsList.on("reset", function() {
                var e, n = r._alertsList.models;
                for (i(), e = n.length - 1; e >= 0; e--) t(n[e])
            }), r._alertsList.syncCollections(), loginStateChange.subscribe(r, function() {
                o(is_authenticated ? "subscribe" : "unsubscribe")
            }), is_authenticated && (o("subscribe"), n())
        }, c.prototype.alertsList = function() {
            return this._alertsList
        }, c.prototype._modelIntervals = [], c.prototype.setInterval = function(t, e) {
            var i = setInterval(t, e);
            return this._modelIntervals.push(i), i
        }, c.prototype.clearInterval = function(t) {
            clearInterval(t);
            var e = this._modelIntervals.indexOf(t);
            e > -1 && this._modelIntervals.splice(e, 1)
        }, c.prototype.clearIntervals = function() {
            for (var t = 0; t < this._modelIntervals.length; t++) clearInterval(this._modelIntervals[t]);
            this._modelIntervals = []
        }, c.prototype.destroy = function() {
            this.clearIntervals()
        }, c.prototype.countUserStudies = function() {
            var t, e, i, n, o = 0;
            for (t = 0; t < this.m_panes.length; t++)
                for (e = this.m_panes[t].dataSources(), i = 0; i < e.length; i++) n = e[i], n instanceof k && n.showInObjectTree() && o++;
            return o
        }, c.prototype.isJustClonedChart = function() {
            return this._undoModel.isJustClonedChart()
        }, c.prototype.copyToOtherCharts = function(t) {
            var e, i, n, o;
            t.linkKey = t.linkKey || TradingView.randomHash(), e = this, i = t.state(), n = this.mainSeries(), o = n.syncModel(), o && (i.points = t._timePoint.map(function(t) {
                var i = e.timeScale().timePointToIndex(t.time_t) + t.offset;
                return {
                    price: t.price,
                    timeStamp: e._externalTimeStamp(i)
                }
            }), i.linetool = t.getType(), i.model = this, i.symbol = this.mainSeries().symbol(), O.copyLineTool(i))
        }, c.prototype.restoreSource = function(t, e, i, n, o) {
            var r, s, a, c, h, d, u, p;
            return r = t ? this.createPane(e) : this.panes()[e], a = n.type, s = a.toLowerCase().startsWith("study") ? r._restoreStudy(n) : r._restoreLineTool(n), c = s.ownerSource() ? s.ownerSource().priceScale() : r.priceScaleByName(o), c ? (s.setPriceScale(c), c.addDataSource(s)) : (c = new l(r._properties.overlayPropreties, this.properties().scalesProperties), c.setHeight(r.m_height), h = s.metaInfo && "Volume@tv-basicstudies" === s.metaInfo().id, d = h ? .75 : r.m_rightPriceScale.topMargin(), u = h ? 0 : r.m_rightPriceScale.bottomMargin(), c.setTopMargin(d), c.setBottomMargin(u), c.addDataSource(s), s.setPriceScale(c), s._isOverlay = !0), p = null, n.ownerSource && (p = r.dataSourceForId(n.ownerSource)), s.setOwnerSource(p), s.setPriceScale(c), s.start(), s.restore && s.restore(), t && r.restoreState(i), this.recalculateAllPanes(), this.mainSeries().invalidateBarColorerCache(), this.invalidate(new T(T.FULL_UPDATE, !0)), s.linkKey && O.restoreLineTool({
                model: this,
                linkKey: s.linkKey,
                state: {
                    restorePane: t,
                    paneIndex: e,
                    paneState: i,
                    sourceState: n,
                    priceScaleName: o
                }
            }), s
        }, c.prototype.restoreLineToolState = function(t, e) {
            t.restorePoints(e.points, e.indexes || []), t.properties().merge(e.state), t.restoreData && t.restoreData(e), t.createServerPoints(), this.invalidate(new T(T.FULL_UPDATE)), t.linkKey && O.restoreLineToolState({
                model: this,
                linkKey: t.linkKey,
                state: e
            })
        }, t.exports = c
    }).call(e, i(50), i(3), i(17), i(40), i(54), i(8), i(133))
}, function(t, e, i) {
    "use strict";

    function n() {}
    var o = i(147),
        r = i(280);
    n.isValid = function(t) {
        var e = o[t] || r[t];
        return !!e
    }, n.create = function(t, e, i, s, a) {
        var l, c;
        return assert(n.isValid(t), "Unknown line tool: " + t), l = o[t] || r[t], c = "LineToolVbPFixed" === t ? new l(e, i, s, a) : "LineToolRegressionTrend" === t ? new l(e, i, s) : ["LineStudyMtpAnalysis", "LineStudyMtpDecisionPoint", "LineStudyMtpRiskReward", "LineStudyMtpElliotWaveMain", "LineStudyMtpElliotWaveMajor", "LineStudyMtpElliotWaveMinor", "LineStudyMtpDownWave1OrA", "LineStudyMtpDownWave2OrB", "LineStudyMtpDownWave3", "LineStudyMtpDownWave4", "LineStudyMtpDownWave5", "LineStudyMtpDownWaveC", "LineStudyMtpUpWave1OrA", "LineStudyMtpUpWave2OrB", "LineStudyMtpUpWave3", "LineStudyMtpUpWave4", "LineStudyMtpUpWave5", "LineStudyMtpUpWaveC"].indexOf(t) >= 0 ? new l(e, i, s) : new l(e, i)
    }, t.exports = n
}, function(t, e, i) {
    "use strict";
    for (var n = {
        LineToolFibRetracement: i(148),
        LineToolFibChannel: i(155),
        LineToolFibSpeedResistanceArcs: i(157),
        LineToolProjection: i(158),
        LineToolTrendBasedFibExtension: i(160),
        LineToolElliott: i(161).LineToolElliott,
        LineToolFibCircles: i(162).LineToolFibCircles,
        LineToolRegressionTrend: i(165),
        LineToolTrading: i(225),
        LineToolVbPFixed: i(226),
        LineStudyMtp: i(227),
        LineToolVertLine: i(224).LineToolVertLine,
        LineToolBarsPattern: i(228),
        LineToolTrendBasedFibTime: i(229),
        LineToolFibTimeZone: i(230),
        LineToolCircleLines: i(231),
        LineToolDateRange: i(232),
        LineToolPriceRange: i(233),
        LineToolDateAndPriceRange: i(234),
        LineToolParallelChannel: i(156).LineToolParallelChannel,
        LineToolTrendAngle: i(235),
        LineToolTrendLine: i(153).LineToolTrendLine,
        LineToolArrowMark: i(236).LineToolArrowMark,
        LineToolExecution: i(142).LineToolExecution,
        LineToolPitchfan: i(238),
        LineToolGannSquare: i(240),
        LineToolFibSpeedResistanceFan: i(241),
        LineToolGannComplex: i(242),
        LineToolGannFan: i(243),
        LineToolFibWedge: i(159).LineToolFibWedge,
        LineToolPitchfork: i(239).LineToolPitchfork,
        LineToolDisjointAngle: i(244),
        LineToolFlatBottom: i(245),
        LineToolIcon: i(246),
        LineToolRotatedRectangle: i(247),
        LineToolFibSpiral: i(248),
        LineToolHeadAndShoulders: i(249),
        LineToolTriangle: i(250).LineToolTriangle,
        LineToolTrianglePattern: i(251),
        LineTool5PointsPattern: i(252).LineTool5PointsPattern,
        LineToolThreeDrivers: i(253),
        LineToolABCD: i(254),
        LineToolRiskReward: i(255).LineToolRiskReward,
        LineToolPolyline: i(256),
        LineToolPrediction: i(257),
        LineToolPriceLabel: i(259),
        LineToolNote: i(260).LineToolNote,
        LineToolNoteAbsolute: i(260).LineToolNoteAbsolute,
        LineToolBrush: i(261),
        LineToolArc: i(262),
        LineToolCallout: i(263),
        LineToolBalloon: i(264),
        LineToolText: i(116).LineToolText,
        LineToolHorzLine: i(76).LineToolHorzLine,
        LineToolHorzRay: i(265),
        LineToolRectangle: i(151).LineToolRectangle,
        LineToolEllipse: i(266),
        LineToolTimeCycles: i(267),
        LineToolSineLine: i(268),
        LineToolGhostFeed: i(269),
        LineToolBezierQuadro: i(270).LineToolBezierQuadro,
        LineToolBezierCubic: i(270).LineToolBezierCubic,
        LineToolArrow: i(271),
        LineToolRay: i(272),
        LineToolExtended: i(273),
        LineToolSchiffPitchfork: i(274),
        LineToolSchiffPitchfork2: i(275),
        LineToolInsidePitchfork: i(276),
        LineToolTextAbsolute: i(116).LineToolTextAbsolute,
        LineToolArrowMarkLeft: i(236).LineToolArrowMarkLeft,
        LineToolArrowMarkRight: i(236).LineToolArrowMarkRight,
        LineToolArrowMarkUp: i(236).LineToolArrowMarkUp,
        LineToolArrowMarkDown: i(236).LineToolArrowMarkDown,
        LineToolFlagMark: i(277),
        LineToolCypherPattern: i(252).LineToolCypherPattern,
        LineToolElliottImpulse: i(161).LineToolElliottImpulse,
        LineToolElliottTriangle: i(161).LineToolElliottTriangle,
        LineToolElliottTripleCombo: i(161).LineToolElliottTripleCombo,
        LineToolElliottCorrection: i(161).LineToolElliottCorrection,
        LineToolElliottDoubleCombo: i(161).LineToolElliottDoubleCombo,
        LineToolRiskRewardLong: i(255).LineToolRiskRewardLong,
        LineToolRiskRewardShort: i(255).LineToolRiskRewardShort,
        LineToolPosition: i(278),
        LineToolOrder: i(279)
    }, o = Object.keys(n), r = o.length; r--;) TradingView[o[r]] = n[o[r]];
    t.exports = n
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n() {
            l.call(this)
        }

        function o(t, e) {
            h.call(this, t, e), this._rendererCache = {}, this._invalidated = !0
        }

        function r(t, e) {
            this._constructor = "LineToolFibRetracement";
            var i = e || this.createPropertiesObject("linetoolfibretracement");
            c.call(this, t, new o(this, t), i), this.version = r.version, this._properties._stateVersion = 1, t._fibRetracementLabelsCache || (t._fibRetracementLabelsCache = new n)
        }
        var s = i(149),
            a = i(151).RectangleTransparencyRenderer,
            l = i(152),
            c = i(77).LineDataSource,
            h = i(115),
            d = i(153).TrendLineRenderer,
            u = i(154),
            p = i(67),
            f = i(71);
        inherit(n, l), n.prototype.levelsCount = function() {
            return r.LevelsCount
        }, inherit(o, h), o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype._updateImpl = function() {
            var t, e, i, n, o, s, a, l, c, d, u, p, f, _;
            if (h.prototype.update.call(this), this._cacheState = this._model._fibRetracementLabelsCache.updateSource(this._source), !(this._source.points().length < 2) && this._source.priceScale() && !this._source.priceScale().isEmpty() && !this._model.timeScale().isEmpty() && (t = this._source.points()[0], e = this._source.points()[1], i = !1, n = this._source.properties(), n.reverse && n.reverse.value() && (i = n.reverse.value()), this._levels = [], o = i ? e.price - t.price : t.price - e.price, s = i ? t.price : e.price, !this._source.priceScale().isPercent() || (a = this._source.ownerSource().firstValue(), null !== a)))
                for (l = 1; l <= r.LevelsCount; l++) c = "level" + l, d = n[c], d.visible.value() && (u = d.coeff.value(), p = d.color.value(), f = s + u * o, this._source.priceScale().isPercent() && (f = this._source.priceScale().priceRange().convertToPercent(f, a)), _ = this._source.priceScale().priceToCoordinate(f), this._levels.push({
                    color: p,
                    y: _,
                    linewidth: n.levelsStyle.linewidth.value(),
                    linestyle: n.levelsStyle.linestyle.value(),
                    index: l
                }))
        }, o.prototype.renderer = function() {
            var t, i, n, o, r, s, l, h, _, g, m, v, y, w, b, S, T, x, C, P, k, I;
            if (this._invalidated && (this._updateImpl(), this._invalidated = !1), t = new f, this._points.length < 2) return t;
            for (i = this._points[0], n = this._points[1], o = Math.min(i.x, n.x), r = Math.max(i.x, n.x), s = this._source.properties(), l = s.fillBackground.value(), h = s.transparency.value(), _ = s.extendLines.value() ? this._model.timeScale().width() : r, g = this._model._fibRetracementLabelsCache, m = g.canvas().get(0), v = 0; v < this._levels.length; v++)
                if (v > 0 && l && (y = this._levels[v - 1], i = new e.Point(o, this._levels[v].y), n = new e.Point(_, y.y), w = {}, w.points = [i, n], w.color = this._levels[v].color, w.linewidth = 0, w.backcolor = this._levels[v].color, w.fillBackground = !0, w.transparency = h, t.append(new a(w))), i = new e.Point(o, this._levels[v].y), n = new e.Point(r, this._levels[v].y), b = {
                        points: [i, n],
                        width: this._model.timeScale().width(),
                        height: this._source.priceScale().height(),
                        color: this._levels[v].color,
                        linewidth: this._levels[v].linewidth,
                        linestyle: this._levels[v].linestyle,
                        extendleft: !1,
                        extendright: s.extendLines.value(),
                        leftend: c.LINEEND_NORMAL,
                        rightend: c.LINEEND_NORMAL
                    }, S = new p(p.MOVEPOINT, null, this._levels[v].index), t.append(new d(b, S)), s.showCoeffs.value() || s.showPrices.value()) {
                    if (!this._cacheState.preparedCells) continue;
                    if (T = this._cacheState.preparedCells.cells[this._levels[v].index - 1], !T) continue;
                    switch (s.horzLabelsAlign.value()) {
                        case "left":
                            x = i;
                            break;
                        case "center":
                            x = i.add(n).scaled(.5), x.x += T.width / 2, x.x = Math.round(x.x);
                            break;
                        case "right":
                            s.extendLines.value() ? x = new e.Point(_ - 4, this._levels[v].y) : (x = new e.Point(_ + 4, this._levels[v].y), x.x += T.width, x.x = Math.round(x.x))
                    }
                    C = {
                        left: T.left,
                        top: g.topByRow(this._cacheState.row),
                        width: T.width,
                        height: g.rowHeight(this._cacheState.row)
                    }, P = {
                        left: x.x - C.width,
                        top: x.y,
                        width: T.width,
                        height: C.height
                    }, k = s.vertLabelsAlign.value(), "middle" === k && (P.top -= P.height / 2), "bottom" === k && (P.top -= P.height), I = new u(m, C, P), t.append(I)
                }
            return s.trendline.visible.value() && (b = {
                points: [this._points[0], this._points[1]],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: s.trendline.color.value(),
                linewidth: s.trendline.linewidth.value(),
                linestyle: s.trendline.linestyle.value(),
                extendleft: !1,
                extendright: !1,
                leftend: c.LINEEND_NORMAL,
                rightend: c.LINEEND_NORMAL
            }, t.append(new d(b))), this.addAnchors(t), t
        }, inherit(r, c), r.version = 2, r.LevelsCount = 24, r.prototype.stop = function() {
            c.prototype.stop.call(this), this._model._fibRetracementLabelsCache.removeSource(this.id())
        }, r.prototype.pointsCount = function() {
            return 2
        }, r.prototype.title = function() {
            return "Fib Retracement"
        }, r.prototype.migrateVersion = function(t, e, i) {
            1 === t && this.properties().extendLines.setValue(!0)
        }, r.prototype.processErase = function(t, e) {
            var i = "level" + e,
                n = this.properties()[i].visible;
            t.setProperty(n, !1, "Erase level line")
        }, r.prototype.createPropertiesObject = function(t, e, i) {
            return new s(t, e, i, {
                range: [1, 24],
                names: ["coeff", "color", "visible"]
            })
        }, t.exports = r
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e, i, n) {
            this._map = $.extend({}, this._map, n), e && (e = this.unpackLevels(e)), r.call(this, t, e, i), this.updateCollectibleProperty()
        }
        var o = i(38).isSameType,
            r = i(81).DefaultProperty,
            s = i(150);
        inherit(n, r), n.prototype.state = function(t, i) {
            t = t || [], t.push("__collectibleLines");
            var n = e.prototype.state.call(this, t);
            return i ? n : this.packLevels(n)
        }, n.prototype.clone = function() {
            var t = this.state();
            return this.__collectibleLines && (t.__collectibleLines = this.__collectibleLines.state()), new n(this._defaultName, t)
        }, n.prototype.merge = function(t) {
            e.prototype.merge.call(this, this.unpackLevels(t)), this.updateCollectibleProperty()
        }, n.prototype._map = {
            prefixes: [""],
            range: [0, 0],
            names: ["coeff", "color", "visible", "linestyle", "linewidth"],
            typecheck: {
                pack: Object,
                unpack: Array
            }
        }, n.prototype._packLvlTpl = function() {
            return []
        }, n.prototype._unpackLvlTpl = function() {
            return {}
        }, n.prototype._packLvlFill = function(t, e, i, n) {
            return n.push(i[e]), n
        }, n.prototype._unpackLvlFill = function(t, e, i, n) {
            return n[e] = i[t], n
        }, n.prototype._iterateLevels = function(t, e) {
            var i, n, r, s, a;
            for (i in this._map.prefixes)
                for (n = (this._map.prefixes[i] || "") + "level", r = this._map.range[0]; r <= this._map.range[1]; r++)
                    if (t[n + r] && o(t[n + r], e.typecheck())) {
                        s = e.tpl();
                        for (a in this._map.names) s = e.fill(a, this._map.names[a], t[n + r], s);
                        t[n + r] = s
                    }
            return t
        }, n.prototype.packLevels = function(t) {
            return this._iterateLevels(t, {
                tpl: this._packLvlTpl,
                fill: this._packLvlFill,
                typecheck: this._map.typecheck.pack
            })
        }, n.prototype.unpackLevels = function(t) {
            return this._iterateLevels(t, {
                tpl: this._unpackLvlTpl,
                fill: this._unpackLvlFill,
                typecheck: this._map.typecheck.unpack
            })
        }, n.prototype.saveDefaults = function() {
            TradingView.saveDefaults(this._defaultName, this.state(this._exclusions, !0))
        }, n.prototype.updateCollectibleProperty = function() {
            var t, e;
            this.__collectibleLines && (t = this, e = [], this.__collectibleLines._childs.forEach(function(i) {
                var n, o = t.__collectibleLines[i].value(),
                    r = o.split("."),
                    s = t[r[0]];
                for (n = 1; n < r.length && s; ++n) s = s[r[n]];
                s && e.push({
                    property: s.color,
                    defaultValue: s.color.value()
                })
            }), this.collectibleColors ? this.collectibleColors.reloadProperties(e) : this.collectibleColors = new s(e))
        }, t.exports = n
    }).call(e, i(55))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function i(t) {
            e.call(this, ""), this.subscribe(this, i.prototype.checkSelfColor), this.reloadProperties(t)
        }
        inherit(i, e), i.prototype.reloadProperties = function(t) {
            for (; this._childs.length > 0;) this.removeProperty(this._childs[0]);
            this._initValues = [];
            for (var e = 0; e < t.length; ++e) this._initValues.push(t[e].defaultValue), this.addChild(e, t[e].property);
            this.checkSelfColor()
        }, i.prototype.setValue = function(t, i) {
            if (this._value !== t || i) {
                var n = this;
                this._childs.forEach(function(e) {
                    n[e].setValue(t || n._initValues[e])
                }), e.prototype.setValue.call(this, t, i)
            }
        }, i.prototype.checkSelfColor = function() {
            var t, i = !0;
            for (t = 0; t < this._initValues.length; ++t)
                if (this[t].value() !== this[0].value()) {
                    i = !1;
                    break
                }
            e.prototype.setValue.call(this, i ? this[0].value() : "")
        }, t.exports = i
    }).call(e, i(55))
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(t, e, i) {
            this._data = t, this._hittestResult = e || new c(c.MOVEPOINT), this._backHittestResult = i || new c(c.MOVEPOINT_BACKGROUND)
        }

        function o(t, e) {
            l.call(this, t, e), this._invalidated = !0
        }

        function r(t, e) {
            this._constructor = "LineToolRectangle";
            var i = e || new d("linetoolrectangle");
            a.call(this, t, new o(this, t), i)
        }

        function s(t, e, i) {
            n.call(this, t, e, i)
        }
        var a = i(77).LineDataSource,
            l = i(115),
            c = i(67),
            h = i(71),
            d = i(81).DefaultProperty;
        n.prototype.getColor = function() {
            return TradingView.generateColor(this._data.backcolor, this._data.transparency)
        }, n.prototype.draw = function(t) {
            var e, i, n;
            this._data.points.length < 2 || (t.lineCap = "butt", t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, t.lineStyle = this._data.linestyle, e = this._data.points[0], i = this._data.points[1], n = i.substract(e), t.beginPath(), t.rect(e.x, e.y, n.x, n.y), this._data.linewidth > 0 && t.stroke(), this._data.fillBackground && (t.fillStyle = this.getColor(), t.fill()))
        }, n.prototype.hitTest = function(e) {
            var i, n, o, r, s, a, l, c, h, d;
            return this._data.points.length < 2 || this._data.nohittest ? null : (i = 3, n = this._data.points[0], o = this._data.points[1], r = new t.Point(o.x, n.y), s = new t.Point(n.x, o.y), a = t.distanceToSegment(n, r, e), a.distance <= i ? this._hittestResult : (a = t.distanceToSegment(r, o, e), a.distance <= i ? this._hittestResult : (a = t.distanceToSegment(o, s, e), a.distance <= i ? this._hittestResult : (a = t.distanceToSegment(s, n, e), a.distance <= i ? this._hittestResult : this._data.fillBackground && (l = Math.min(n.x, o.x), c = Math.max(n.x, o.x), h = Math.min(n.y, o.y), d = Math.max(n.y, o.y), n = new t.Point(l, h), o = new t.Point(c, d), t.pointInRect(e, n, o)) ? this._backHittestResult : null))))
        }, inherit(o, l), o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.updateImpl = function() {
            l.prototype.update.call(this), this._invalidated = !1
        }, o.prototype.renderer = function() {
            var e, i, o, r, s, a;
            return this._invalidated && this.updateImpl(), e = {}, e.points = this._points, e.color = this._source.properties().color.value(), e.linewidth = this._source.properties().linewidth.value(), e.backcolor = this._source.properties().backgroundColor.value(), e.fillBackground = this._source.properties().fillBackground.value(), e.transparency = this._source.properties().transparency.value(), this.isAnchorsRequired() ? (i = new h, i.append(new n(e)), o = this._points[0], r = this._points[1], s = new t.Point(o.x, r.y), s.data = 2, a = new t.Point(r.x, o.y), a.data = 3, i.append(this.createLineAnchor({
                points: [o, r, s, a]
            })), i) : new n(e)
        }, inherit(r, a), r.prototype.pointsCount = function() {
            return 2
        }, r.prototype.title = function() {
            return "Rectangle"
        }, r.prototype.setPoint = function(t, e, i) {
            var n, o, r;
            return 2 > t ? void a.prototype.setPoint.call(this, t, e, i) : (i && i.shift && this._properties.snapTo45Degrees && (n = this.points()[0], o = this.points()[1], r = {
                price: 2 === t ? n.price : o.price,
                index: 2 === t ? o.index : n.index
            }, this._snapPoint45Degree(e, r)), this._convertPriceFromPercentIfNeeded(e), 3 === t ? (this._points[0].price = e.price, this._points[1].index = e.index) : (this._points[1].price = e.price, this._points[0].index = e.index), void this.normalizePoints())
        }, inherit(s, n), s.prototype.getColor = function() {
            return TradingView.generateColor(this._data.backcolor, this._data.transparency, !0)
        }, e.RectangleRenderer = n, e.RectangleTransparencyRenderer = s, e.LineToolRectangle = r
    }).call(e, i(40))
}, function(t, e, i) {
    "use strict";

    function n() {
        this._registeredSources = {}, this._sourcesToRow = {}, this._rowsToSources = {}, this._currentSymbol = "", this._actualCapacity = 0, this._actualWidth = 1, this._numericFormatter = new s, this._percentageFormatter = new r
    }
    var o = i(83),
        r = o.PercentageFormatter,
        s = o.NumericFormatter;
    n.prototype.levelsCount = function() {
        return 0
    }, n.prototype.topByRow = function(t) {
        return t * n.ROW_HEIGHT
    }, n.prototype.rowHeight = function(t) {
        return n.ROW_HEIGHT
    }, n.prototype.canvas = function() {
        if (!this._canvas) {
            this._canvas = $("<canvas>"), this._cache = this._canvas.get(0).getContext("2d"), this._canvas.prop("width", 100).css("position", "absolute").css("top", 0).css("z-index", 1e3).css("left", 0);
            var t = this._canvas.get(0).getContext("2d");
            t.font = "12px Verdana"
        }
        return this._canvas
    }, n.ROW_HEIGHT = 14, n.prototype.points = function(t) {
        return [t.points()[0], t.points()[1]]
    }, n.prototype.startPoint = function(t, e) {
        var i = e ? t.points()[0] : t.points()[1];
        return i
    }, n.prototype.priceRange = function(t, e) {
        var i = this.points(t),
            n = i[0],
            o = i[1],
            r = e ? o.price - n.price : n.price - o.price;
        return r
    }, n.prototype.sourceIsReady = function(t) {
        return t.points().length >= 2
    }, n.prototype._calculateWidth = function(t) {
        var e, i, n, o, r, s, a, l, c, h, d, u, p, f, _, g, m, v, y, w, b, S, T;
        if (!this.sourceIsReady(t)) return null;
        if (e = this.canvas().get(0).getContext("2d"), e.font = "12px Verdana", i = t.properties().showPrices ? t.properties().showPrices.value() : !1, n = t.properties().coeffsAsPercents ? t.properties().coeffsAsPercents.value() : !1, o = t.properties().showCoeffs.value(), r = t.priceScale().formatter(), s = this.points(t), a = s[0], l = s[1], !a || !l) return null;
        if (c = !1, h = t.properties(), h.reverse && h.reverse.value() && (c = h.reverse.value()), d = this.priceRange(t, c), u = this.startPoint(t, c).price, t.priceScale().isPercent() && (p = t.ownerSource().firstValue(), null === p)) return 0;
        for (f = 0, _ = [], g = 1; g <= this.levelsCount(); g++) m = "level" + g, v = h[m], y = v.coeff.value(), w = u + y * d, t.priceScale().isPercent() && (w = t.priceScale().priceRange().convertToPercent(w, p)), b = "", o && (b += n ? this._percentageFormatter.format(Math.round(1e4 * y) / 100) : this._numericFormatter.format(y)), i && (b += "(" + r.format(w) + ")"), S = e.measureText(b).width, T = {
            text: b,
            left: f,
            width: S + 4
        }, _.push(T), f += T.width;
        return {
            totalWidth: f,
            cells: _
        }
    }, n.prototype._effectiveState = function(t) {
        var e, i, n, o, r, s, a = {},
            l = t.properties();
        for (l.showPrices && (a.showPrices = l.showPrices.value()), l.coeffsAsPercents && (a.coeffsAsPercents = l.coeffsAsPercents.value()), a.showCoeffs = l.showCoeffs.value(), t.priceScale() && t.priceScale().formatter().state && (a.formatter = t.priceScale().formatter().state()), l.reverse && (a.reverse = l.reverse.value()), a.p1 = t.points()[0], a.p2 = t.points()[1], 3 === t.points().length && (a.p3 = t.points()[2]), a.items = [], e = 1; e <= this.levelsCount(); e++) i = "level" + e, n = l[i], o = n.coeff.value(), r = n.color.value(), s = {
            coeff: o,
            color: r
        }, a.items.push(s);
        return a
    }, n.prototype._findEmptyRow = function(t) {
        for (var e, i = 0; this._rowsToSources[i];) i++;
        return this._rowsToSources[i] = t, i >= this._actualCapacity && (this._actualCapacity++, e = this.canvas(), TradingView.resizeCanvas(e, this._actualWidth, n.ROW_HEIGHT * this._actualCapacity)), i
    }, n.prototype._repaintSource = function(t, e, i) {
        var o, r, s = n.ROW_HEIGHT * i.row,
            a = this.canvas().get(0).getContext("2d");
        for (a.clearRect(0, s, this._actualWidth, n.ROW_HEIGHT), a.textBaseline = "bottom", a.font = "12px Verdana", s += n.ROW_HEIGHT, o = 0; o < t.cells.length; o++) r = t.cells[o], a.fillStyle = e.items[o].color, a.fillText(r.text, r.left, s)
    }, n.prototype.removeSource = function(t) {
        var e, i;
        this._sourcesToRow[t] && (e = this._sourcesToRow[t].row, i = this.canvas().get(0).getContext("2d"), i.save(), i.clearRect(0, this.topByRow(e), this._actualWidth, n.ROW_HEIGHT), i.restore(), delete this._sourcesToRow[t], delete this._rowsToSources[e])
    }, n.prototype._effectiveStatesEquals = function(t, e) {
        var i, n = function(t, e) {
                return t || e ? t && !e ? !0 : !t && e ? !0 : t.minMove !== e.minMove ? !0 : t.minMove2 !== e.minMove2 ? !0 : t.fractional !== e.fractional ? !0 : t.fractionalLength !== e.fractionalLength : !1
            },
            o = function(t, e) {
                return t || e ? t && !e ? !0 : !t && e ? !0 : t.index !== e.index || t.price !== e.price : !1
            },
            r = function(t, e) {
                return t.coeff !== e.coeff ? !0 : t.color !== e.color
            };
        if (t && !e) return !1;
        if (!t && e) return !1;
        if (t.showPrices !== e.showPrices) return !1;
        if (t.coeffsAsPercents !== e.coeffsAsPercents) return !1;
        if (t.showCoeffs !== e.showCoeffs) return !1;
        if (t.reverse !== e.reverse) return !1;
        if (n(t.formatter, e.formatter)) return !1;
        if (o(t.p1, e.p1)) return !1;
        if (o(t.p2, e.p2)) return !1;
        if (o(t.p3, e.p3)) return !1;
        if (t.items.length !== e.items.length) return !1;
        for (i = 0; i < t.items.length; i++)
            if (r(t.items[i], e.items[i])) return !1;
        return !0
    }, n.prototype.updateSource = function(t) {
        var e, i, o, r, s = t.properties().symbol.value();
        return this._currentSymbol !== s && (this._currentSymbol = s, this._sourcesToRow = {}, this._rowsToSources = {}), this._sourcesToRow[t.id()] || (e = this._findEmptyRow(t.id()), this._sourcesToRow[t.id()] = {
            effectiveState: null,
            row: e
        }), i = this._sourcesToRow[t.id()].effectiveState, o = this._effectiveState(t), this._effectiveStatesEquals(i, o) || (r = this._calculateWidth(t), r ? (this._sourcesToRow[t.id()].effectiveState = o, r.totalWidth > this._actualWidth && (TradingView.resizeCanvas(this.canvas(), r.totalWidth, n.ROW_HEIGHT * this._actualCapacity), this._actualWidth = r.totalWidth), e = this._sourcesToRow[t.id()], this._repaintSource(r, o, e), this._sourcesToRow[t.id()].effectiveState = o, this._sourcesToRow[t.id()].preparedCells = r) : this._sourcesToRow[t.id()].effectiveState = null), this._sourcesToRow[t.id()]
    }, t.exports = n
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n() {
            var t, e, i, n;
            this._registeredSources = {}, this._sourcesToRow = {}, this._rowsToSources = {}, this._currentSymbol = "", this._actualCapacity = 0, this._actualWidth = 0, this._canvas = $("<canvas>"), this._cache = this._canvas.get(0).getContext("2d"), this._currentWidth = 400, this._canvas.prop("width", this._currentWidth).prop("height", 1).css("position", "absolute").css("top", 0).css("z-index", 1e3).css("left", 0), this._ctx = this._canvas.get(0).getContext("2d"), this._ctx.font = l.LABEL_FONTSIZE + "px" + l.LABEL_FONT, t = l.LABEL_FONTSIZE, e = l.LABEL_LINESPACING, i = t + e, n = 3, this._padding = 8, this._rowHeight = i * n - e + 2 * this._padding + 2
        }

        function o(t, e, i) {
            this._textSizeCache = e, this._data = t, this._fontSize = t.fontsize ? t.fontsize : t.fontSize ? t.fontSize : 12, this._lineSpacing = "number" == typeof this._data.lineSpacing && this._data.lineSpacing ? this._data.lineSpacing : 0, t.lines = this._lines = y.prototype.wordWrap.call(this, t.text, t.wordWrapWidth), this._hittest = i || new b(b.MOVEPOINT)
        }

        function r() {
            var t = document.createElement("canvas");
            t.width = 0, t.height = 0, h = t.getContext("2d"), t = null
        }

        function s(t, e) {
            this._data = t, this._hittest = e || new b(b.MOVEPOINT)
        }

        function a(t, e) {
            m.call(this, t, e), this._label = null, this._rendererCache = {}, this._invalidated = !0, this._labelDataInvalidated = !0, this._percentageFormatter = new P, this._numericFormatter = new k
        }

        function l(t, e) {
            this._constructor = "LineToolTrendLine";
            var i = e || new x("linetooltrendline");
            v.call(this, t, new a(this, t), i), t._trendLineStatsCache || (t._trendLineStatsCache = new n)
        }

        function c(t, e, i, n, o, r) {
            var s = u;
            return i > t ? s |= p : t > o && (s |= f), n > e ? s |= _ : e > r && (s |= g), s
        }
        var h, d, u, p, f, _, g, m = i(115),
            v = i(77).LineDataSource,
            y = i(116).TextRenderer,
            w = i(154),
            b = i(67),
            S = i(68).PaneRendererClockIcon,
            T = i(71),
            x = i(81).DefaultProperty,
            C = i(83),
            P = C.PercentageFormatter,
            k = C.NumericFormatter,
            I = C.TimeSpanFormatter;
        n.prototype.canvas = function() {
            return this._canvas
        }, n.prototype.topByRow = function(t) {
            return t * this._rowHeight
        }, n.prototype.rowHeight = function(t) {
            return this._rowHeight
        }, n.prototype.rowWidth = function(t) {
            var e = this._rowsToSources[t];
            return this._sourcesToRow[e].width
        }, n.prototype.currentWidth = function() {
            return this._currentWidth
        }, n.prototype._findEmptyRow = function(t) {
            for (var e = 0; this._rowsToSources[e];) e++;
            return this._rowsToSources[e] = t, e >= this._actualCapacity && (this._actualCapacity++, TradingView.resizeCanvas(this._canvas, this._currentWidth, this._rowHeight * this._actualCapacity), this._ctx = this._canvas.get(0).getContext("2d"), TradingView.logDebugChart("TrendLineCache. Expanging cache to " + this._actualCapacity + " items")), e
        }, n.prototype._effectiveState = function(t) {
            var e, i = {};
            return i.p1 = $.extend({}, t.points()[0]), i.p2 = $.extend({}, t.points()[1]), e = t.properties(), i.showBars = e.showBarsRange.value(), i.showTimeRange = e.showDateTimeRange.value(), i.showDistance = e.showDistance.value(), i.showPriceRange = e.showPriceRange.value(), i.showAngle = e.showAngle.value(), i.color = e.textcolor.value(), i.showAngle && (i.priceRange = t.priceScale().priceRange().state(), i.barSpacing = t._model.timeScale().barSpacing()), i
        }, n.prototype._effectiveStatesEquals = function(t, e) {
            var i = function(t, e) {
                return t || e ? t && !e ? !0 : !t && e ? !0 : t.index !== e.index || t.price !== e.price : !1
            };
            if (t && !e) return !1;
            if (!t && e) return !1;
            if (i(t.p1, e.p1)) return !1;
            if (i(t.p2, e.p2)) return !1;
            if (t.color !== e.color) return !1;
            if (t.showBars !== e.showBars) return !1;
            if (t.showTimeRange !== e.showTimeRange) return !1;
            if (t.showDistance !== e.showDistance) return !1;
            if (t.showPriceRange !== e.showPriceRange) return !1;
            if (t.showAngle !== e.showAngle) return !1;
            if (t.showAngle) {
                if (t.priceRange.min !== e.priceRange.min) return !1;
                if (t.priceRange.max !== e.priceRange.max) return !1;
                if (t.barSpacing !== e.barSpacing) return !1
            }
            return !0
        }, n.prototype.removeSource = function(t) {
            if (this._sourcesToRow[t]) {
                var e = this._sourcesToRow[t].row;
                this._ctx.save(), this._ctx.clearRect(0, this.topByRow(e), this._currentWidth, this.rowHeight(e)), this._ctx.restore(), delete this._sourcesToRow[t], delete this._rowsToSources[e]
            }
        }, n.prototype._repaintSource = function(e, i, n) {
            var r, s;
            this._ctx.save(), this._ctx.translate(0, this.topByRow(i) + .5), n.points[0] = new t.Point(0, 0), n.offsetX = 0, n.offsetY = 0, delete n.horzAlign, delete n.vertAlign, this._ctx.clearRect(0, 0, this._currentWidth, this.rowHeight(i)), r = new o(n, {}), s = r.draw(this._ctx), this._sourcesToRow[e].width = s.width, this._ctx.restore()
        }, n.prototype.updateSource = function(t, e) {
            var i, n, o, r, s, a = t.properties().symbol.value();
            return this._currentSymbol !== a && (TradingView.logDebugChart("TrendLineCache. Clearing canvas because of changing symbol from " + this._currentSymbol + " to " + a), this._currentSymbol = a, this._sourcesToRow = {}, this._rowsToSources = {}), i = t.id(), this._sourcesToRow[i] || (n = this._findEmptyRow(i), this._sourcesToRow[i] = {
                effectiveState: null,
                row: n
            }), o = this._sourcesToRow[t.id()].effectiveState, r = this._effectiveState(t), this._effectiveStatesEquals(o, r) || (n = this._sourcesToRow[t.id()], s = e(), this._repaintSource(i, n.row, s), this._sourcesToRow[i].effectiveState = r), this._sourcesToRow[i]
        }, d = {
            priceRange: {
                width: 15,
                height: 14,
                data: [134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255]
            },
            barsRange: {
                width: 16,
                height: 15,
                data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 136, 136, 136, 56, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 136, 136, 136, 56, 134, 134, 138, 255, 134, 134, 138, 255, 136, 136, 136, 56, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 136, 136, 136, 56, 134, 134, 138, 255, 134, 134, 138, 255, 136, 136, 136, 56, 134, 134, 138, 255, 0, 0, 0, 0, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 0, 0, 0, 0, 134, 134, 138, 255, 136, 136, 136, 56, 134, 134, 138, 255, 134, 134, 138, 255, 136, 136, 136, 56, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 136, 136, 136, 56, 134, 134, 138, 255, 134, 134, 138, 255, 137, 137, 137, 74, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 137, 137, 137, 74, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
            },
            angle: {
                width: 14,
                height: 12,
                data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 130, 130, 134, 76, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 130, 130, 134, 76, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 130, 130, 134, 76, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 130, 130, 134, 76, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 130, 130, 134, 76, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 130, 130, 134, 76, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 130, 130, 134, 76, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 130, 130, 134, 76, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 130, 130, 134, 76, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 130, 130, 134, 76, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255, 134, 134, 138, 255]
            }
        }, o.prototype._preRender = function() {
            var e, i, n, o, s, a, l, c, d, u, p, f, _, g, m, v, y, w, b, S, T, x, C;
            if (!this._preRendered) {
                if (h || r(), e = this._data.points[0].x + (this._data.offsetX || 0), i = e, n = this._data.points[0].y + (this._data.offsetY || 0), o = n, s = this._fontSize, a = this._lineSpacing, l = s + a, c = l * this._lines.length - a, h.textBaseline = "top", h.font = this.fontStyle(), d = [], this._data.wordWrapWidth)
                    for (u = this._data.wordWrapWidth, p = 0; p < this._lines.length; p++) d.push(this._data.wordWrapWidth);
                else
                    for (u = 0, p = 0; p < this._lines.length; p++) f = h.measureText(this._lines[p]).width, d.push(f), u = Math.max(u, f);
                if (this._data.backgroundColor || this._data.borderColor || this._data.highlightBorder && this._data.wordWrapWidth) {
                    _ = {
                        top: this._data.paddingTop || 0,
                        right: this._data.paddingRight || 0,
                        bottom: this._data.paddingBottom || 0,
                        left: this._data.paddingLeft || 0
                    }, g = {
                        x: 0,
                        y: 0
                    }, this._data.backgroundHorzInflate && (m = this._data.backgroundHorzInflate / 2, _.left += m, _.right += m, g.x = -m), this._data.backgroundVertInflate && (v = this._data.backgroundVertInflate / 2, _.top += v, _.bottom += v, g.y = -v), y = "number" == typeof this._data.padding ? this._data.padding : ~~(s / 6);
                    for (p in _) _[p] || (_[p] = y);
                    w = {
                        x: Math.floor(e + g.x),
                        y: Math.floor(n + g.y),
                        w: Math.ceil(u + _.left + _.right),
                        h: Math.ceil(c + _.top + _.bottom)
                    }, i += _.left + g.x, o += _.top + g.y, "bottom" !== this._data.vertAlign && "middle" !== this._data.vertAlign || (b = "middle" === this._data.vertAlign ? n - w.h / 2 : n - w.h - (w.y - n), S = b - w.y, o += S, w.y = b), "right" !== this._data.horzAlign && "center" !== this._data.horzAlign || (T = "center" === this._data.horzAlign ? e - w.w / 2 : e - w.w - (w.x - e), x = T - w.x, i += x, w.x = T, this._data.doNotAlignText !== !0 && ("right" === this._data.horzAlign ? (h.textAlign = "end", i += u) : (h.textAlign = "center", i += u / 2))), w.w % 2 !== 0 && w.w++, w.x += .5, w.y += .5, this._boundingRect = [new t.Point(w.x, w.y), new t.Point(w.x + w.w, w.y + w.h)], this._rect = w, this._padding = _, this._defaultPadding = y
                } else "bottom" !== this._data.vertAlign && "middle" !== this._data.vertAlign || (o -= Math.round(c * ("middle" === this._data.vertAlign ? .5 : 1))), C = i, "right" !== this._data.horzAlign && "center" !== this._data.horzAlign || (C -= Math.round(u * ("center" === this._data.horzAlign ? .5 : 1))), this._boundingRect = [new t.Point(C, o), new t.Point(C + u, o + c)];
                this._textPoint = {
                    x: i,
                    y: o
                }, this._textSizeCache && (this._textSizeCache.widths = d), this._preRendered = !0, this._maxWidth = u
            }
        }, o.prototype._drawIcon = function(t, e, i, n) {
            var o, r, s, a;
            if (d.hasOwnProperty(n)) {
                if (o = d[n], !o.src) {
                    for (o.src = document.createElement("canvas"), o.src.width = o.width, o.src.height = o.height, r = o.src.getContext("2d"), s = r.createImageData(o.width, o.height), a = 0; a < o.data.length; a++) s.data[a] = o.data[a];
                    r.putImageData(s, 0, 0)
                }
                t.drawImage(o.src, e, i)
            }
        }, o.prototype.fontStyle = function() {
            return (this._data.bold ? "bold " : "") + (this._data.italic ? "italic " : "") + this._fontSize + "px " + this._data.font
        }, o.prototype.draw = function(t) {
            var e, i, n, o, r, s, a, l, c, h, d;
            if (0 !== this._data.points.length) {
                for (this._preRender(), e = this._fontSize, i = this._lineSpacing, n = e + i, t.textBaseline = "top", t.font = this.fontStyle(), o = this._rect, (this._data.backgroundColor || this._data.borderColor || this._data.highlightBorder && this._data.wordWrapWidth) && this._rect ? ("right" !== this._data.horzAlign && "center" !== this._data.horzAlign || this._data.doNotAlignText !== !0 && (t.textAlign = "right" === this._data.horzAlign ? "end" : "center"), this._data.backgroundRoundRect ? (t.roundRect(o.x, o.y, o.w, o.h, this._data.backgroundRoundRect), this._data.backgroundColor && (t.fillStyle = this._data.backgroundColor, t.globalAlpha = this._data.backgroundTransparency, t.fill(), t.globalAlpha = 1), this._data.borderColor && (r = "number" == typeof this._data.borderWidth ? this._data.borderWidth : ~~Math.max(e / 12, 1), t.strokeStyle = this._data.borderColor, t.lineWidth = r, t.stroke())) : (this._data.backgroundColor && (t.fillStyle = this._data.backgroundColor, t.globalAlpha = this._data.backgroundTransparency, t.fillRect(o.x, o.y, o.w, o.h), t.globalAlpha = 1), this._data.borderColor ? (r = "number" == typeof this._data.borderWidth ? this._data.borderWidth : ~~Math.max(e / 12, 1), t.strokeStyle = this._data.borderColor, t.lineWidth = r, t.strokeRect(o.x - r / 2, o.y - r / 2, o.w + r, o.h + r)) : this._data.highlightBorder && (t.strokeStyle = this._data.color, t.lineWidth = 1, t.beginPath(), l = [3, 1], t.dashedLineTo(o.x - .5, a = o.y - .5, s = o.x + o.w + .5, a, l), t.dashedLineTo(s, a, s, a = o.y + o.h + .5, l), t.dashedLineTo(s = o.x - .5, a, o.x + o.w + .5, a, l), t.dashedLineTo(s, o.y - .5, s, a, l), t.globalAlpha = .5, t.stroke(), t.globalAlpha = 1)), this._data.icons && this._data.icons.forEach(function(e, i) {
                    var r = o.x + this._defaultPadding,
                        s = o.y + this._padding.top + n * i;
                    this._drawIcon(t, r, s, e)
                }, this)) : "right" === this._data.horzAlign ? t.textAlign = "end" : "center" === this._data.horzAlign && (t.textAlign = "center"), c = this._textPoint.x, h = this._textPoint.y, t.fillStyle = this._data.color, d = 0; d < this._lines.length; d++) t.fillText(this._lines[d], c, h), h += n;
                return {
                    width: o.w + 2
                }
            }
        }, o.prototype.hitTest = function(e) {
            return 0 === this._data.points.length ? null : (this._preRender(), this._boundingRect && t.pointInRect(e, this._boundingRect[0], this._boundingRect[1]) ? this._hittest : null)
        }, s.prototype.drawArrow = function(t, e, i, n) {
            var o, r, s, a, l, c, h, d, u;
            e.substract(t).length() < 1 || (o = e.substract(t).normalized(), r = 5 * n, s = o.scaled(r), a = e.substract(s), l = o.transponed(), c = 3 * n, h = l.scaled(c), d = a.add(h), u = a.substract(h), CanvasEx.drawLine(i, Math.round(d.x), Math.round(d.y), e.x, e.y), CanvasEx.drawLine(i, Math.round(u.x), Math.round(u.y), e.x, e.y))
        }, s.prototype.lineClipping = function(t, e, i, n) {
            var o = window.cohenSutherland(t.x, t.y, e.x, e.y, 0, 0, i, n);
            return o ? [{
                x: o[0],
                y: o[1]
            }, {
                x: o[2],
                y: o[3]
            }] : !1
        }, s.prototype.expandPoints = function(e, i, n, o) {
            var r, s, a = new t.Point(0, 0),
                l = new t.Point(n, o);
            return this._data.extendleft && (r = e.substract(i), s = t.intersectRayWithRect(e, e.add(r), a, l), s && (e = s)), this._data.extendright && (r = i.substract(e), s = t.intersectRayWithRect(i, i.add(r), a, l), s && (i = s)), [e, i]
        }, s.prototype.drawCircle = function(t, e, i, n) {
            n = $.extend({
                fillStyle: "#000000"
            }, n), e.save(), e.fillStyle = n.fillStyle, e.beginPath(), e.arc(t.x, t.y, i, 0, 2 * Math.PI, !1), e.fill(), n.strokeWidth && (e.lineWidth = n.strokeWidth, e.stroke()), e.restore()
        }, s.prototype.draw = function(t) {
            var e, i, n, o, r, s;
            this._data.points && this._data.points.length < 2 || this._data.floatPoints && this._data.floatPoints.length < 2 || (t.lineCap = "butt", t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, t.lineStyle = this._data.linestyle, e = this._data.floatPoints || this._data.points, i = e[0], n = e[1], this._data.overlayLineEndings ? o = [$.extend(!0, {}, i), $.extend(!0, {}, n)] : this.drawEnds(t, [i, n]), r = this.expandPoints(i, n, this._data.width, this._data.height), s = this.lineClipping(r[0], r[1], this._data.width, this._data.height), s && this._data.linewidth > 0 && CanvasEx.drawLine(t, Math.round(s[0].x), Math.round(s[0].y), Math.round(s[1].x), Math.round(s[1].y)), this._data.overlayLineEndings && this.drawEnds(t, o))
        }, s.prototype.drawEnds = function(t, e) {
            var i = e[0],
                n = e[1];
            switch (this._data.leftend) {
                case v.LINEEND_ARROW:
                    this.drawArrow(n, i, t, t.lineWidth);
                    break;
                case v.LINEEND_CIRCLE:
                    this.drawCircle(i, t, t.lineWidth, this._data.endstyle)
            }
            switch (this._data.rightend) {
                case v.LINEEND_ARROW:
                    this.drawArrow(i, n, t, t.lineWidth);
                    break;
                case v.LINEEND_CIRCLE:
                    this.drawCircle(n, t, t.lineWidth, this._data.endstyle)
            }
        }, s.prototype.hitTest = function(e) {
            var i, n, o, r, s, a;
            return this._data.points && this._data.points.length < 2 ? null : this._data.floatPoints && this._data.floatPoints.length < 2 ? null : (i = TradingView.isMobile.any() ? 24 : 3, n = this._data.floatPoints || this._data.points, o = n[0], r = n[1], s = this.expandPoints(o, r, this._data.width, this._data.height), a = t.distanceToSegment(s[0], s[1], e), a.distance <= i ? this._hittest : null)
        }, inherit(a, m), a.prototype.update = function() {
            this._invalidated = !0, this._labelDataInvalidated = !0
        }, a.prototype.updateImpl = function() {
            var t, e, i, n, o, r, s, a, l, c, h = this._source.points();
            h.length < 2 || (t = h[0], e = h[1], i = this._model.timeScale().visibleBars(), void 0 === i || i.isEmpty() || (i = i.clone(), n = this._source.properties(), t.index < i.firstBar() && e.index < i.firstBar() && !n.extendLeft.value() && !n.extendRight.value() || (m.prototype.update.call(this), this._points.length < 2 || (o = n.showBarsRange.value(), r = n.showDateTimeRange.value(), s = n.showDistance.value(), a = n.showPriceRange.value(), l = n.showAngle.value(), a || o || r || s || l ? (c = this, this._statCache = this._model._trendLineStatsCache.updateSource(this._source, function() {
                return c._statLabelData()
            })) : (this._model._trendLineStatsCache.removeSource(this._source.id()), this._label = null, this._labelData && (this._labelData.text = "", this._labelData.lines = [])), this._invalidated = !1))))
        }, a.prototype._statLabelData = function() {
            var e, i, n, o, r, s, a, c, h, d, u, p, f, _, g, m, v, y, w, b, S, T, x, C, P, k, E, L;
            return this._labelDataInvalidated && (e = this._source.points(), i = e[0], n = e[1], o = this._source.properties(), r = [], u = o.showPriceRange.value(), u && this._source.priceScale() && (h = n.price - i.price, p = h / i.price, s = this._source.priceScale().formatter().format(h) + " (" + this._percentageFormatter.format(100 * p) + ")", f = this._model.mainSeries().base(), f && (_ = Math.round(h * f), s += ", " + _), r.push("priceRange")), g = o.showBarsRange.value(), m = o.showDateTimeRange.value(), v = o.showDistance.value(), (g || m || v) && (a = "", g && (d = n.index - i.index, a += $.t("{0} bars").format(d)), m && (y = this._model.timeScale().indexToUserTime(i.index), w = this._model.timeScale().indexToUserTime(n.index), y && w && (b = (w.valueOf() - y.valueOf()) / 1e3, S = (new I).format(b), S && (a += g ? " (" + S + ")" : S))), v && (a && (a += ", "), void 0 === h && (h = n.price - i.price), void 0 === d && (d = n.index - i.index), T = Math.round(1e5 * Math.sqrt(h * h + d * d)) / 1e5, a += $.t("distance: {0}").format(this._numericFormatter.format(T))), a && r.push("barsRange")), x = o.showAngle.value(), x && (C = this._source.pointToScreenPoint(i), P = this._source.pointToScreenPoint(n), C = C instanceof Array ? C[0] : C instanceof t.Point ? C : null, P = P instanceof Array ? P[0] : P instanceof t.Point ? P : null, C instanceof t.Point && P instanceof t.Point && (E = P.substract(C), E.length() > 0 && (E = E.normalized(), k = Math.acos(E.x), E.y > 0 && (k = -k))), "number" != typeof k || TradingView.isNaN(k) || (c = Math.round(180 * k / Math.PI) + "Âº", r.push("angle"))), this._label = [s, a, c].filter(function(t) {
                    return t
                }).join("\n") || null, this._icons = r, this._labelDataInvalidated = !1), L = {
                points: [this._points[1]],
                text: this._label,
                color: this._source.properties().textcolor.value(),
                font: l.LABEL_FONT,
                fontsize: l.LABEL_FONTSIZE,
                lineSpacing: l.LABEL_LINESPACING,
                backgroundColor: l.LABEL_BGCOLOR,
                borderColor: l.LABEL_BORDERCOLOR,
                borderWidth: 1,
                padding: l.LABEL_PADDING,
                paddingLeft: 30,
                doNotAlignText: !0,
                icons: this._icons
            }, this._points[1].y < this._points[0].y && (L.vertAlign = "bottom"), this._points[1].x < this._points[0].x && (L.horzAlign = "right"), this._labelData = L, L
        }, a.prototype.renderer = function() {
            var t, e, i, n, o, r, a, c, h;
            return this._invalidated && this.updateImpl(), t = new T, this._invalidated ? t : this._source.priceScale() ? (e = {}, e.points = this._points, e.floatPoints = this._floatPoints, e.width = this._model.timeScale().width(), e.height = this._source.priceScale().height(), e.color = this._source.properties().linecolor.value(), e.linewidth = this._source.properties().linewidth.value(), e.linestyle = this._source.properties().linestyle.value(), e.extendleft = this._source.properties().extendLeft.value(), e.extendright = this._source.properties().extendRight.value(), e.leftend = this._source.properties().leftEnd.value(), e.rightend = this._source.properties().rightEnd.value(), t.append(new s(e)), i = this.isAnchorsRequired(), n = i || this._source.properties().alwaysShowStats.value(), n && this._label && 2 === this._points.length && (o = this._points[1], r = {
                left: 0,
                top: this._model._trendLineStatsCache.topByRow(this._statCache.row),
                width: this._model._trendLineStatsCache.rowWidth(this._statCache.row),
                height: this._model._trendLineStatsCache.rowHeight(this._statCache.row)
            }, a = {
                left: o.x,
                top: o.y,
                width: r.width,
                height: r.height
            }, "right" === this._labelData.horzAlign ? a.left -= l.LABEL_PADDING + a.width : a.left += l.LABEL_PADDING, "bottom" === this._labelData.vertAlign ? a.top -= l.LABEL_PADDING + a.height : a.top += l.LABEL_PADDING, c = this._model._trendLineStatsCache.canvas(), h = new w(c.get(0), r, a), t.append(h)), this.addAnchors(t), !TradingView.printing && this._source.hasAlert.value() && !this._model.readOnly() && e.points.length >= 2 && this._source.getAlertIsActive(function(i) {
                t.append(new S({
                    point1: e.points[0],
                    point2: e.points[1],
                    color: i ? e.color : defaults("chartproperties.alertsProperties.drawingIcon.color")
                }))
            }), t) : t
        }, inherit(l, v), l.LABEL_OFFSET = 8, l.LABEL_FONT = "Arial", l.LABEL_FONTSIZE = 12, l.LABEL_LINESPACING = 10, l.LABEL_BGCOLOR = "rgba(255,255,255,.8)", l.LABEL_BORDERCOLOR = "#e3e3e3", l.LABEL_PADDING = 8, l.prototype.stop = function() {
            v.prototype.stop.call(this), this._model._trendLineStatsCache.removeSource(this.id())
        }, l.prototype.pointsCount = function() {
            return 2
        }, l.prototype.title = function() {
            return "Trend Line"
        }, l.prototype.canHasAlert = function() {
            return !0
        }, l.prototype._getAlertPlots = function() {
            return [this._linePointsToAlertPlot(this._points, null, this.properties().extendLeft.value(), this.properties().extendRight.value())]
        }, u = 0, p = 1, f = 2, _ = 4, g = 8, window.cohenSutherland = function(t, e, i, n, o, r, s, a) {
            for (var l, h, d, u = c(t, e, o, r, s, a), p = c(i, n, o, r, s, a), m = !1, v = 0;;) {
                if (v > 1e3) throw Error("Cohen - Sutherland algorithm: infinity loop");
                if (v++, !(u | p)) {
                    m = !0;
                    break
                }
                if (u & p) break;
                d = u || p, d & g ? (l = t + (i - t) * (a - e) / (n - e), h = a) : d & _ ? (l = t + (i - t) * (r - e) / (n - e), h = r) : d & f ? (h = e + (n - e) * (s - t) / (i - t), l = s) : (h = e + (n - e) * (o - t) / (i - t), l = o), d === u ? (t = l, e = h, u = c(t, e, o, r, s, a)) : (i = l, n = h, p = c(i, n, o, r, s, a))
            }
            return m ? [t, e, i, n] : !1
        }, e.TrendLineStatsRenderer = o, e.LineToolTrendLine = l, e.TrendLineRenderer = s
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e, i) {
            this._cache = t, this._cacheRect = e, this._targetRect = i
        }
        var o = i(67);
        n.prototype.draw = function(t) {
            t.translate(.5, .5), t.drawImage(this._cache, this._cacheRect.left, this._cacheRect.top, this._cacheRect.width, this._cacheRect.height, this._targetRect.left, this._targetRect.top, this._targetRect.width, this._targetRect.height), t.translate(-.5, -.5)
        }, n.prototype.hitTest = function(t) {
            var i = new e.Point(this._targetRect.left, this._targetRect.top),
                n = i.add(new e.Point(this._targetRect.width, this._targetRect.height));
            return e.pointInRect(t, i, n) ? new o(o.REGULAR) : null
        }, t.exports = n
    }).call(e, i(40))
}, function(t, e, i) {
    "use strict";

    function n() {
        u.call(this)
    }

    function o(t, e, i) {
        l.call(this, t, e, i)
    }

    function r(t, e) {
        h.call(this, t, e), this._rendererCache = {}, this._invalidated = !0
    }

    function s(t, e) {
        this._constructor = "LineToolFibChannel";
        var i = e || this.createPropertiesObject("linetoolfibchannel");
        c.call(this, t, new r(this, t), i), this.version = s.version, t._fibChannelLabelsCache || (t._fibChannelLabelsCache = new n)
    }
    var a = i(148),
        l = i(156).ParallelChannelRenderer,
        c = i(77).LineDataSource,
        h = i(115),
        d = i(149),
        u = i(152),
        p = i(153).TrendLineRenderer,
        f = i(154),
        _ = i(71);
    inherit(n, u), n.prototype.levelsCount = function() {
        return s.LevelsCount
    }, inherit(o, l), o.prototype.getColor = function() {
        return TradingView.generateColor(this._data.backcolor, this._data.transparency, !0)
    }, inherit(r, h), r.prototype.update = function() {
        this._invalidated = !0
    }, r.prototype._updateImpl = function() {
        h.prototype.update.call(this), this._cacheState = this._model._fibChannelLabelsCache.updateSource(this._source), this._floatPoints.length < 3 || this._source.points().length < 3 || (this.norm = this._floatPoints[2].substract(this._floatPoints[0]))
    }, r.prototype.renderer = function() {
        function t(t, n, o) {
            var r, s, a, c, u;
            switch (i.horzLabelsAlign.value()) {
                case "left":
                    r = t;
                    break;
                case "center":
                    r = t.add(n).scaled(.5), r.x += o.width / 2, r.x = Math.round(r.x);
                    break;
                case "right":
                    r = n.clone(), r.x += o.width, r.x = Math.round(r.x)
            }
            s = {
                left: o.left,
                top: l.topByRow(d._cacheState.row),
                width: o.width,
                height: l.rowHeight(d._cacheState.row)
            }, a = {
                left: Math.round(r.x - s.width),
                top: Math.round(r.y),
                width: o.width,
                height: s.height
            }, c = i.vertLabelsAlign.value(), "middle" === c && (a.top -= a.height / 2), "bottom" === c && (a.top -= a.height), u = new f(h, s, a), e.append(u)
        }
        var e, i, n, r, s, l, h, d, u, g, m, v, y, w, b, S, T, x, C, P, k, I;
        if (this._invalidated && (this._updateImpl(), this._invalidated = !1), e = new _, this._floatPoints.length < 2) return this.addAnchors(e), e;
        if (i = this._source.properties(), n = this._floatPoints[0], r = this._floatPoints[1], this._floatPoints.length < 3) return s = {
            points: [n, r],
            width: this._model.timeScale().width(),
            height: this._source.priceScale().height(),
            color: i.level1.color.value(),
            linewidth: i.levelsStyle.linewidth.value(),
            linestyle: i.levelsStyle.linestyle.value(),
            extendleft: i.extendLeft.value(),
            extendright: i.extendRight.value(),
            leftend: c.LINEEND_NORMAL,
            rightend: c.LINEEND_NORMAL
        }, e.append(new p(s)), this.addAnchors(e), e;
        for (l = this._model._fibChannelLabelsCache, h = l.canvas().get(0), d = this, u = 1; u < a.LevelsCount; u++)
            if (g = i["level" + u], g.visible.value()) {
                for (m = null, v = u + 1; v <= a.LevelsCount; v++)
                    if (y = i["level" + v], y.visible.value()) {
                        m = y;
                        break
                    }
                if (!m) break;
                w = this.norm.scaled(g.coeff.value()), b = n.add(w), S = r.add(w), T = this.norm.scaled(m.coeff.value()), x = n.add(T), C = r.add(T), P = {}, P.points = [b, S, x, C], P.color = g.color.value(), P.width = this._model.timeScale().width(), P.height = this._source.priceScale().height(), P.linewidth = i.levelsStyle.linewidth.value(), P.linestyle = i.levelsStyle.linestyle.value(), P.extendleft = i.extendLeft.value(), P.extendright = i.extendRight.value(), P.backcolor = g.color.value(), P.transparency = i.transparency.value(), P.skipTopLine = !0, P.fillBackground = i.fillBackground.value(), P.hittestOnBackground = !0, e.append(new o(P)), (i.showCoeffs.value() || i.showPrices.value()) && (k = this._cacheState.preparedCells.cells[u - 1], t(b, S, k))
            }
        for (I = null, u = a.LevelsCount; u >= 1; u--)
            if (g = i["level" + u], g.visible.value()) {
                I = u;
                break
            }
        return null != I && (g = i["level" + I], g.visible.value() && (w = this.norm.scaled(g.coeff.value()), b = n.add(w), S = r.add(w), s = {
            points: [b, S],
            width: this._model.timeScale().width(),
            height: this._source.priceScale().height(),
            color: g.color.value(),
            linewidth: i.levelsStyle.linewidth.value(),
            linestyle: i.levelsStyle.linestyle.value(),
            extendleft: i.extendLeft.value(),
            extendright: i.extendRight.value(),
            leftend: c.LINEEND_NORMAL,
            rightend: c.LINEEND_NORMAL
        }, e.append(new p(s)), (i.showCoeffs.value() || i.showPrices.value()) && t(b, S, this._cacheState.preparedCells.cells[I - 1]))), this.addAnchors(e), e
    }, inherit(s, c), s.LevelsCount = 24, s.version = 2, s.prototype.migrateVersion = function(t, e, i) {
        i.properties.removeProperty("reverse")
    }, s.prototype.pointsCount = function() {
        return 3
    }, s.prototype.title = function() {
        return "Fib Channel"
    }, s.prototype.processErase = function(t, e) {
        var i = "level" + e,
            n = this.properties()[i].visible;
        t.setProperty(n, !1, "Erase level line")
    }, s.prototype.createPropertiesObject = function(t, e, i) {
        return new d(t, e, i, {
            range: [1, 24],
            names: ["coeff", "color", "visible"]
        })
    }, t.exports = s
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(t, e, i) {
            this._data = t, this._hittestResult = e || new c(c.MOVEPOINT), this._backHittestResult = i || new c(c.MOVEPOINT_BACKGROUND)
        }

        function o(t, e) {
            s.call(this, t, e), this._invalidated = !0
        }

        function r(t, e) {
            this._constructor = "LineToolParallelChannel";
            var i = e || new u("linetoolparallelchannel");
            a.call(this, t, new o(this, t), i)
        }
        var s = i(115),
            a = i(77).LineDataSource,
            l = i(153).TrendLineRenderer,
            c = i(67),
            h = i(68).PaneRendererClockIcon,
            d = i(71),
            u = i(81).DefaultProperty;
        n.prototype.extendPoints = function(e, i, n, o) {
            var r, s, a = new t.Point(0, 0),
                l = new t.Point(n, o);
            return this._data.extendleft && (r = e.substract(i), s = t.intersectRayWithRect(e, e.add(r), a, l), s && (e = s)), this._data.extendright && (r = i.substract(e), s = t.intersectRayWithRect(i, i.add(r), a, l), s && (i = s)), this._data.extendleft && !t.pointInRect(e, a, l) && t.pointInRect(i, a, l) && (s = t.intersectRayWithRect(i, e, a, l), s && (e = s)), this._data.extendright && !t.pointInRect(i, a, l) && t.pointInRect(e, a, l) && (s = t.intersectRayWithRect(e, i, a, l), s && (i = s)), [e, i]
        }, n.prototype.getColor = function() {
            return TradingView.generateColor(this._data.backcolor, this._data.transparency)
        }, n.prototype.draw = function(e) {
            var i, n, o, r, s, a, c, h, d, u, p, f, _, g, m;
            if (!(this._data.points.length < 2) && (e.lineCap = "butt", e.strokeStyle = this._data.color, e.lineWidth = this._data.linewidth, e.lineStyle = this._data.linestyle, i = this._data.points[0], n = this._data.points[1], o = this.extendPoints(i, n, this._data.width, this._data.height), this._data.skipLines || CanvasEx.drawLine(e, o[0].x, o[0].y, o[1].x, o[1].y), 4 === this._data.points.length)) {
                if (r = this._data.points[2], s = this._data.points[3], !r || !s) return;
                if (a = this.extendPoints(r, s, this._data.width, this._data.height), this._data.skipLines || this._data.skipTopLine || CanvasEx.drawLine(e, a[0].x, a[0].y, a[1].x, a[1].y), this._data.fillBackground) {
                    if (c = Math.max(o[1].x, a[1].x), h = Math.max(o[1].y, a[1].y), d = Math.min(a[0].x, o[0].x), u = Math.min(a[0].y, o[0].y), !(isFinite(c) && isFinite(h) && isFinite(d) && isFinite(u))) return;
                    e.fillStyle = this.getColor(), e.beginPath(), e.moveTo(o[0].x, o[0].y), e.lineTo(o[1].x, o[1].y), this._data.extendright && (p = t.optionalCorner(o[1], a[1], this._data.width, this._data.height), p && e.lineTo(p.x, p.y)), e.lineTo(a[1].x, a[1].y), e.lineTo(a[0].x, a[0].y), this._data.extendleft && (f = t.optionalCorner(a[0], o[0], this._data.width, this._data.height), f && e.lineTo(f.x, f.y)), e.lineTo(o[0].x, o[0].y), e.fill()
                }
                this._data.showMidline && !this._data.skipLines && (e.strokeStyle = this._data.midcolor, e.lineWidth = this._data.midlinewidth, e.lineStyle = this._data.midlinestyle, _ = this._data.points[0].add(this._data.points[2]).scaled(.5), g = this._data.points[1].add(this._data.points[3]).scaled(.5), a = this.extendPoints(_, g, this._data.width, this._data.height), m = l.prototype.lineClipping(a[0], a[1], this._data.width, this._data.height), m && CanvasEx.drawLine(e, Math.round(m[0].x), Math.round(m[0].y), Math.round(m[1].x), Math.round(m[1].y)))
            }
        }, n.prototype.hitTest = function(e) {
            var i, n, o, r, s, a, l, c, h, d, u, p, f, _, g, m, v;
            if (this._data.points.length < 2) return null;
            if (i = 3, n = this._data.floatPoints || this._data.points, o = n[0], r = n[1], s = n[2], a = n[3], l = this.extendPoints(o, r, this._data.width, this._data.height), c = t.distanceToSegment(l[0], l[1], e), c.distance <= i) return this._hittestResult;
            if (4 === this._data.points.length && !this._data.skipTopLine) {
                if (!s || !a) return null;
                if (l = this.extendPoints(s, a, this._data.width, this._data.height), c = t.distanceToSegment(l[0], l[1], e), c.distance <= i) return this._hittestResult;
                if (this._data.showMidline && !this._data.skipLines && (h = o.add(s).scaled(.5), d = r.add(a).scaled(.5), l = this.extendPoints(h, d, this._data.width, this._data.height), c = t.distanceToSegment(l[0], l[1], e), c.distance <= i)) return this._hittestResult
            }
            if (this._data.hittestOnBackground && this._data.fillBackground && 4 === this._data.points.length) {
                if (u = (r.y - o.y) / (r.x - o.x), p = o.y + u * (e.x - o.x), f = s.y + u * (e.x - s.x), _ = Math.max(p, f), g = Math.min(p, f), m = Math.min(o.x, r.x), v = Math.max(o.x, r.x), !this._data.extendleft && e.x < m) return null;
                if (!this._data.extendright && e.x > v) return null;
                if (e.y >= g && e.y <= _) return this._backHittestResult
            }
            return null
        }, inherit(o, s), o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.updateImpl = function() {
            var t, e, i, n, o, r, a, l, c, h, d;
            s.prototype.update.call(this), this._source.priceScale() && !this._source.priceScale().isEmpty() && 0 !== this._source.points().length && (this._source._priceOffset || this._source.calculatePriceDiff(), 3 === this._points.length && this._source._priceOffset && (t = this._points[0], e = this._points[1], i = this._source._priceOffset + this._source.points()[0].price, n = this._source._priceOffset + this._source.points()[1].price, this._p3 = t.clone(), this._p4 = e.clone(), o = this._source.priceScale(), o.isLog() ? (r = .5 * (i + n) - this._source._priceOffset, a = .5 * (i + n), l = this._source.priceScale().priceToCoordinate(r), c = this._source.priceScale().priceToCoordinate(a), h = c - l, this._p3.y += h, this._p4.y += h) : (o.isPercent() && (d = this._source.ownerSource().firstValue(), i = o.priceRange().convertToPercent(i, d), n = o.priceRange().convertToPercent(n, d)), this._p3.y = this._source.priceScale().priceToCoordinate(i), this._p4.y = this._source.priceScale().priceToCoordinate(n))))
        }, o.prototype.renderer = function() {
            var t, e, i, o, r, s;
            return this._invalidated && (this.updateImpl(), this._invalidated = !1), t = {}, t.points = [], this._points.length > 1 && (t.points.push(this._points[0]), t.points.push(this._points[1])), this._points.length > 2 && (t.points.push(this._p3), t.points.push(this._p4)), t.color = this._source.properties().linecolor.value(), t.width = this._model.timeScale().width(), t.height = this._source.priceScale().height(), e = this._source.properties(), t.linewidth = e.linewidth.value(), t.linestyle = e.linestyle.value(), t.extendleft = e.extendLeft.value(), t.extendright = e.extendRight.value(), t.fillBackground = e.fillBackground.value(), t.backcolor = e.backgroundColor.value(), t.transparency = e.transparency.value(), t.showMidline = e.showMidline.value(), t.midlinewidth = e.midlinewidth.value(), t.midlinestyle = e.midlinestyle.value(), t.midcolor = e.midlinecolor.value(), t.fillBackground = e.fillBackground.value(), t.hittestOnBackground = !0, i = new d, i.append(new n(t)), this.isAnchorsRequired() && (o = [], o.push(this._points[0]), this._points[1] && o.push(this._points[1]), this._p3 && (o.push(this._p3.add(this._p4).scaled(.5)), o[2].data = 2), r = 3 === this._points.length && !this._p3,
            this._model.lineBeingCreated() !== this._source || r || o.pop(), i.append(this.createLineAnchor({
                points: o
            }))), !TradingView.printing && this._source.hasAlert.value() && !this._model.readOnly() && this._points.length >= 2 && (s = this._points, this._source.getAlertIsActive(function(t) {
                i.append(new h({
                    point1: s[0],
                    point2: s[1],
                    color: t ? e.linecolor.value() : defaults("chartproperties.alertsProperties.drawingIcon.color")
                }))
            })), i
        }, inherit(r, a), r.prototype.addPoint = function(t) {
            var e, i = a.prototype.addPoint.call(this, t);
            return i && (e = this.points()[0], this._points[2].index = e.index, this._points[2].price = e.price + this._priceOffset), i
        }, r.prototype.calculatePriceDiff = function() {
            var t, e, i, n, o, r, s, a, l, c, h, d, u, p, f, _, g, m, v;
            if (3 === this.points().length) {
                if (t = this.points()[0], e = this.points()[1], i = this.points()[2], t.index === e.index) return;
                if (n = this.priceScale(), null === n) return;
                if (n.isLog()) {
                    if (o = this._model.timeScale(), o.isEmpty()) return;
                    r = o.indexToCoordinate(t.index), s = o.indexToCoordinate(e.index), a = n.priceToCoordinate(t.price), l = n.priceToCoordinate(e.price), c = o.indexToCoordinate(i.index), h = (l - a) / (s - r), d = a + h * (c - r), u = n.priceToCoordinate(i.price), p = u - d, f = .5 * (a + l), _ = n.coordinateToPrice(f), g = f + p, m = n.coordinateToPrice(g), this._priceOffset = m - _
                } else h = (e.price - t.price) / (e.index - t.index), v = t.price + h * (i.index - t.index), this._priceOffset = i.price - v
            }
        }, r.prototype.setLastPoint = function(t, e) {
            e && e.shift && 2 === this.points().length && this._snapPoint45Degree(t, this.points()[0]), a.prototype.setLastPoint.call(this, t), this.calculatePriceDiff()
        }, r.prototype.restorePoints = function(t, e, i) {
            a.prototype.restorePoints.call(this, t, e, i), t && t.length >= 3 && (this._priceOffset = t[2].price - t[0].price)
        }, r.prototype.setPoint = function(t, e, i) {
            i && i.shift && 2 > t && this._snapPoint45Degree(e, this.points()[1 - t]), a.prototype.setPoint.call(this, t, e, i), 2 === t && this.calculatePriceDiff();
            var n = this.points()[0];
            this._points[2].index = n.index, this._points[2].price = n.price + this._priceOffset
        }, r.prototype.pointsCount = function() {
            return 3
        }, r.prototype.title = function() {
            return "Parallel Channel"
        }, r.prototype.addPoint = function(t, e) {
            return e && e.shift && 2 === this.points().length && this._snapPoint45Degree(t, this.points()[0]), a.prototype.addPoint.call(this, t, e)
        }, r.prototype.fixAfterRestorePriceAxis = function() {
            this.priceScale().isLog() || delete this._priceOffset
        }, r.prototype.cloneData = function(t) {
            this._priceOffset = t._priceOffset
        }, r.prototype.restoreData = function(t) {
            t.priceOffset && (this._priceOffset = t.priceOffset)
        }, r.prototype.state = function(t) {
            var e = a.prototype.state.call(this, t);
            return e.priceOffset = this._priceOffset, e
        }, r.prototype.canHasAlert = function() {
            return !0
        }, r.prototype._getAlertPlots = function() {
            function t(t, e) {
                return t.index <= e.index ? [t, e] : [e, t]
            }
            var e, i, n, o, r, s, a, l, c = [].concat(this._points).splice(0, 2);
            return c = c.concat([{
                price: c[0].price + this._priceOffset,
                time: c[0].time,
                index: c[0].index
            }, {
                price: c[1].price + this._priceOffset,
                time: c[1].time,
                index: c[1].index
            }]), e = t(c[0], c[1]), i = t(c[2], c[3]), this._priceOffset < 0 ? (o = i, n = e) : (o = e, n = i), a = this.properties().extendLeft.value(), l = this.properties().extendRight.value(), c[0].index <= c[1].index ? (r = a, s = l) : (r = l, s = a), [this._linePointsToAlertPlot(n, "Upper", r, s), this._linePointsToAlertPlot(o, "Lower", r, s)]
        }, e.LineToolParallelChannel = r, e.ParallelChannelRenderer = n
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n() {
            h.call(this)
        }

        function o(t, e, i) {
            this._data = t, this._hittest = e || new p(p.MOVEPOINT), this._backHittest = i || new p(p.MOVEPOINT_BACKGROUND)
        }

        function r(t, e) {
            l.call(this, t, e), this._rendererCache = {}, this._invalidated = !0
        }

        function s(t, e) {
            this._constructor = "LineToolFibSpeedResistanceArcs";
            var i = e || this.createPropertiesObject("linetoolfibspeedresistancearcs");
            a.call(this, t, new r(this, t), i), t._fibSpeedResistanceArcsLabelsCache || (t._fibSpeedResistanceArcsLabelsCache = new n)
        }
        var a = i(77).LineDataSource,
            l = i(115),
            c = i(149),
            h = i(152),
            d = i(153).TrendLineRenderer,
            u = i(154),
            p = i(67),
            f = i(71);
        inherit(n, h), n.prototype.levelsCount = function() {
            return s.LevelsCount
        }, o.prototype.draw = function(t) {
            t.lineCap = "butt", t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, t.translate(this._data.center.x, this._data.center.y), t.beginPath(), this._data.fullCircles ? t.arc(0, 0, this._data.radius, 2 * Math.PI, 0, !1) : this._data.dir > 0 ? t.arc(0, 0, this._data.radius, 0, Math.PI, !1) : t.arc(0, 0, this._data.radius, Math.PI, 0, !1), t.stroke(), this._data.fillBackground && (this._data.radius2 && (this._data.fullCircles ? t.arc(0, 0, this._data.radius2, 2 * Math.PI, 0, !0) : this._data.dir > 0 ? t.arc(0, 0, this._data.radius2, Math.PI, 0, !0) : t.arc(0, 0, this._data.radius2, 0, Math.PI, !0)), t.fillStyle = TradingView.generateColor(this._data.color, this._data.transparency, !0), t.fill())
        }, o.prototype.hitTest = function(t) {
            var i, n, o, r = e.sign(t.y - this._data.center.y);
            return r === this._data.dir || this._data.fullCircles ? (i = t.substract(this._data.center), n = i.length(), o = 3, Math.abs(n - this._data.radius) < o ? this._hittest : this._data.hittestOnBackground && Math.abs(n) <= this._data.radius + o ? this._backHittest : null) : null
        }, inherit(r, l), r.prototype.update = function() {
            this._invalidated = !0
        }, r.prototype._updateImpl = function() {
            var t, i, n, o, r, a, c, h, d, u, p, f;
            if (l.prototype.update.call(this), this._cacheState = this._model._fibSpeedResistanceArcsLabelsCache.updateSource(this._source), !(this._floatPoints.length < 2) && this._source.priceScale() && !this._source.priceScale().isEmpty() && !this._model.timeScale().isEmpty())
                for (t = this._floatPoints[0], i = this._floatPoints[1], n = t.substract(i).length(), this._levels = [], o = this._source.properties(), r = 1; r <= s.LevelsCount; r++) a = "level" + r, c = o[a], c.visible.value() && (h = c.coeff.value(), d = c.color.value(), u = i.substract(t).length() * h, p = e.sign(i.y - t.y), f = new e.Point(t.x, t.y + p * n * h), this._levels.push({
                    color: d,
                    radius: u,
                    dir: p,
                    labelPoint: f,
                    linewidth: c.linewidth.value(),
                    linestyle: c.linestyle.value(),
                    index: r
                }))
        }, r.prototype.renderer = function() {
            var t, e, i, n, r, s, l, c, h, _, g, m, v, y, w, b;
            if (this._invalidated && (this._updateImpl(), this._invalidated = !1), t = new f, this._floatPoints.length < 2) return t;
            for (e = this._floatPoints[0], i = this._source.properties(), n = i.fillBackground.value(), r = i.transparency.value(), s = this._model._fibSpeedResistanceArcsLabelsCache, l = s.canvas().get(0), c = 0; c < this._levels.length; c++)
                if (h = this._levels[c], _ = {}, _.center = e, _.color = h.color, _.linewidth = h.linewidth, _.radius = h.radius, _.dir = h.dir, _.transparency = r, _.fillBackground = n, _.hittestOnBackground = !0, _.fullCircles = i.fullCircles.value(), c > 0 && (_.radius2 = this._levels[c - 1].radius), g = new p(p.MOVEPOINT, null, h.index), t.append(new o(_, g)), i.showCoeffs.value()) {
                    if (m = this._cacheState.preparedCells.cells[this._levels[c].index - 1], !m) continue;
                    v = {
                        left: m.left,
                        top: s.topByRow(this._cacheState.row),
                        width: m.width,
                        height: s.rowHeight(this._cacheState.row)
                    }, y = {
                        left: Math.round(h.labelPoint.x - v.width),
                        top: Math.round(h.labelPoint.y - v.height / 2),
                        width: m.width,
                        height: v.height
                    }, w = new u(l, v, y), t.append(w)
                }
            return i.trendline.visible.value() && (b = {
                points: [this._floatPoints[0], this._floatPoints[1]],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: i.trendline.color.value(),
                linewidth: i.trendline.linewidth.value(),
                linestyle: i.trendline.linestyle.value(),
                extendleft: !1,
                extendright: !1,
                leftend: a.LINEEND_NORMAL,
                rightend: a.LINEEND_NORMAL
            }, t.append(new d(b))), this.addAnchors(t), t
        }, inherit(s, a), s.LevelsCount = 11, s.prototype.pointsCount = function() {
            return 2
        }, s.prototype.title = function() {
            return "Fib Speed Resistance Arcs"
        }, s.prototype.processErase = function(t, e) {
            var i = "level" + e,
                n = this.properties()[i].visible;
            t.setProperty(n, !1, "Erase level line")
        }, s.prototype.createPropertiesObject = function(t, e, i) {
            return new c(t, e, i, {
                range: [1, 11]
            })
        }, t.exports = s
    }).call(e, i(40))
}, function(t, e, i) {
    "use strict";

    function n() {
        d.call(this)
    }

    function o(t, e) {
        c.call(this, t, e)
    }

    function r(t, e) {
        this._constructor = "LineToolProjection";
        var i = e || this.createPropertiesObject("linetoolprojection");
        u.call(this, t, new o(this, t), i)
    }
    var s = i(149),
        a = i(159),
        l = a.ArcWedgeRenderer,
        c = a.FibWedgePaneView,
        h = a.LineToolFibWedge,
        d = i(152),
        u = i(77).LineDataSource,
        p = i(153).TrendLineRenderer,
        f = i(71);
    inherit(n, d), n.prototype.levelsCount = function() {
        return 1
    }, inherit(o, c), o.prototype.update = function() {
        c.prototype.update.call(this)
    }, o.prototype._levelsCount = function() {
        return 1
    }, o.prototype.renderer = function() {
        var t, e, i, n, o, r, s, a, c, h, d, _;
        return this._invalidated && (this._updateImpl(), this._invalidated = !1), t = new f, this._points.length < 2 ? t : (e = this._source.properties(), i = this._points, n = i[0], o = i[1], r = {
            points: [n, o],
            width: this._model.timeScale().width(),
            height: this._source.priceScale().height(),
            color: e.trendline.color.value(),
            linewidth: e.linewidth.value(),
            linestyle: e.trendline.linestyle.value(),
            extendleft: !1,
            extendright: !1,
            leftend: u.LINEEND_NORMAL,
            rightend: u.LINEEND_NORMAL
        }, t.append(new p(r)), this._points.length < 3 ? (this.addAnchors(t), t) : (s = i[2], a = s.data, c = o.substract(n).length(), h = s.substract(n).normalized(), s = n.add(h.scaled(c)), s.data = a, r = {
            points: [n, s],
            width: this._model.timeScale().width(),
            height: this._source.priceScale().height(),
            color: e.trendline.color.value(),
            linewidth: e.linewidth.value(),
            linestyle: e.trendline.linestyle.value(),
            extendleft: !1,
            extendright: !1,
            leftend: u.LINEEND_NORMAL,
            rightend: u.LINEEND_NORMAL
        }, t.append(new p(r)), d = this._levels[0], _ = {}, _.center = this._points[0], _.radius = d.radius, _.prevRadius = 0, _.edge = this._edge, _.color = e.trendline.color.value(), _.color1 = e.color1.value(), _.color2 = e.color2.value(), _.linewidth = e.linewidth.value(), _.edge1 = this._edge1, _.edge2 = this._edge2, _.p1 = d.p1, _.p2 = d.p2, _.fillBackground = e.fillBackground.value(), _.transparency = e.transparency.value(), _.gradient = !0, t.append(new l(_)), this.addAnchors(t), t))
    }, inherit(r, h), r.prototype.title = function() {
        return "Projection"
    }, r.prototype.getCache = function() {
        return this._model._projectionLabelsCache || (this._model._projectionLabelsCache = new n), this._model._projectionLabelsCache
    }, r.prototype.createPropertiesObject = function(t, e, i) {
        return new s(t, e, i, {
            range: [1, 1]
        })
    }, t.exports = r
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n() {
            h.call(this)
        }

        function o(t, e, i) {
            this._data = t, this._hittest = e || new p(p.MOVEPOINT), this._backHittest = i || new p(p.MOVEPOINT_BACKGROUND), this._rendererCache = {}
        }

        function r(t, e) {
            l.call(this, t, e), this._rendererCache = {}, this._levels = [], this._invalidated = !0
        }

        function s(t, e) {
            this._constructor = "LineToolFibSpeedResistanceArcs";
            var i = e || this.createPropertiesObject("linetoolfibwedge");
            a.call(this, t, new r(this, t), i), t._fibWedgeLabelsCache || (t._fibWedgeLabelsCache = new n)
        }
        var a = i(77).LineDataSource,
            l = i(115),
            c = i(149),
            h = i(152),
            d = i(153).TrendLineRenderer,
            u = i(154),
            p = i(67),
            f = i(71);
        inherit(n, h), n.prototype.levelsCount = function() {
            return s.LevelsCount
        }, o.prototype.draw = function(t) {
            if (t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, t.beginPath(), t.arc(this._data.center.x, this._data.center.y, this._data.radius, this._data.edge1, this._data.edge2, !0), t.stroke(), this._data.fillBackground) {
                if (t.arc(this._data.center.x, this._data.center.y, this._data.prevRadius, this._data.edge2, this._data.edge1, !1), this._data.gradient) {
                    var e = t.createRadialGradient(this._data.center.x, this._data.center.y, this._data.prevRadius, this._data.center.x, this._data.center.y, this._data.radius);
                    e.addColorStop(0, TradingView.generateColor(this._data.color1, this._data.transparency)), e.addColorStop(1, TradingView.generateColor(this._data.color2, this._data.transparency)), t.fillStyle = e
                } else t.fillStyle = TradingView.generateColor(this._data.color, this._data.transparency, !0);
                t.fill()
            }
        }, o.prototype.hitTest = function(t) {
            var e, i, n, o, r, s, a, l, c, h = 4,
                d = t.substract(this._data.center).length();
            return Math.abs(d - this._data.radius) <= h && (e = t.substract(this._data.p1).length(), i = t.substract(this._data.p2).length(), n = Math.max(e, i), o = this._data.p1.substract(this._data.p2).length(), o >= n) ? this._hittest : this._data.fillBackground && d <= this._data.radius && (r = this._data.p1.substract(this._data.center).normalized(), s = this._data.p2.substract(this._data.center).normalized(), d = t.substract(this._data.center).normalized(), a = r.dotProduct(s), l = d.dotProduct(r), c = d.dotProduct(s), l >= a && c >= a) ? this._backHittest : null
        }, inherit(r, l), r.prototype.update = function() {
            this._invalidated = !0
        }, r.prototype._updateImpl = function() {
            var e, i, n, o, r, s, a, c, h, d, u, p, f, _, g, m, v, y, w;
            if (l.prototype.update.call(this), this._cacheState = this._source.getCache().updateSource(this._source), this._levels = [], !(this._points.length < 3))
                for (e = this._points, i = e[0], n = e[1], o = e[2], r = n.substract(i).normalized(), s = o.substract(i).normalized(), a = new t.Point(1, 0), c = new t.Point(0, 1), h = Math.acos(r.dotProduct(a)), r.dotProduct(c) < 0 && (h = 2 * Math.PI - h), this._edge1 = h, d = Math.acos(s.dotProduct(a)), s.dotProduct(c) < 0 && (d = 2 * Math.PI - d), this._edge2 = d, d > h && (this._edge1 = Math.max(h, d), this._edge2 = Math.min(h, d) + 2 * Math.PI), Math.abs(h - d) > Math.PI && (this._edge1 = Math.min(h, d), this._edge2 = Math.max(h, d) - 2 * Math.PI), u = this._source.properties(), p = 1; p <= this._source.getCache().levelsCount(); p++) f = "level" + p, _ = u[f], _.visible.value() && (g = _.coeff.value(), m = _.color.value(), v = n.substract(i).length() * g, y = r.add(s).scaled(.5).normalized().scaled(v), w = i.add(y), this._levels.push({
                    coeff: g,
                    color: m,
                    radius: v,
                    labelPoint: w,
                    p1: i.add(r.scaled(v)),
                    p2: i.add(s.scaled(v)),
                    linewidth: _.linewidth.value(),
                    linestyle: _.linestyle.value(),
                    index: p
                }))
        }, r.prototype.renderer = function() {
            var t, e, i, n, r, s, l, c, h, _, g, m, v, y, w, b, S, T, x, C;
            if (this._invalidated && (this._updateImpl(), this._invalidated = !1), t = new f, this._points.length < 2) return t;
            if (e = this._source.properties(), i = this._points, n = i[0], r = i[1], s = {
                    points: [n, r],
                    width: this._model.timeScale().width(),
                    height: this._source.priceScale().height(),
                    color: e.trendline.color.value(),
                    linewidth: e.trendline.visible.value() ? e.trendline.linewidth.value() : 0,
                    linestyle: e.trendline.linestyle.value(),
                    extendleft: !1,
                    extendright: !1,
                    leftend: a.LINEEND_NORMAL,
                    rightend: a.LINEEND_NORMAL
                }, t.append(new d(s)), this._points.length < 3) return this.addAnchors(t), t;
            for (l = i[2], c = l.data, h = r.substract(n).length(), _ = l.substract(n).normalized(), l = n.add(_.scaled(h)), l.data = c, s = {
                points: [n, l],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: e.trendline.color.value(),
                linewidth: e.trendline.visible.value() ? e.trendline.linewidth.value() : 0,
                linestyle: e.trendline.linestyle.value(),
                extendleft: !1,
                extendright: !1,
                leftend: a.LINEEND_NORMAL,
                rightend: a.LINEEND_NORMAL
            }, t.append(new d(s)), g = this._model._fibWedgeLabelsCache, m = g.canvas().get(0), v = this._levels.length - 1; v >= 0; v--)
                if (y = this._levels[v], w = {}, w.center = this._points[0], w.radius = y.radius, v > 0 ? w.prevRadius = this._levels[v - 1].radius : w.prevRadius = 0, w.edge = this._edge, w.color = y.color, w.linewidth = y.linewidth, w.edge1 = this._edge1, w.edge2 = this._edge2, w.p1 = y.p1, w.p2 = y.p2, w.fillBackground = e.fillBackground.value(), w.transparency = e.transparency.value(), b = new p(p.MOVEPOINT, null, y.index), t.append(new o(w, b)), e.showCoeffs.value()) {
                    if (S = this._cacheState.preparedCells.cells[this._levels[v].index - 1], !S) continue;
                    T = {
                        left: S.left,
                        top: g.topByRow(this._cacheState.row),
                        width: S.width,
                        height: g.rowHeight(this._cacheState.row)
                    }, x = {
                        left: Math.round(y.labelPoint.x - T.width),
                        top: Math.round(y.labelPoint.y - T.height / 2),
                        width: S.width,
                        height: T.height
                    }, C = new u(m, T, x), t.append(C)
                }
            return this.isAnchorsRequired() && (i = [n, r], this._model.lineBeingCreated() !== this._source && i.push(l), t.append(this.createLineAnchor({
                points: i
            }))), t
        }, inherit(s, a), s.LevelsCount = 11, s.prototype.getCache = function() {
            return this._model._fibWedgeLabelsCache || (this._model._fibWedgeLabelsCache = new n), this._model._fibWedgeLabelsCache
        }, s.prototype.pointsCount = function() {
            return 3
        }, s.prototype.title = function() {
            return "Fib Wedge"
        }, s.prototype.setPoint = function(t, e) {
            var i, n, o, r, s, l, c;
            a.prototype.setPoint.call(this, t, e), this._recursiveGuard || (this._recursiveGuard = !0, 2 === t ? (i = this.pointToScreenPoint(this._points[0])[0], n = this.pointToScreenPoint(this._points[1])[0], o = this.pointToScreenPoint(this._points[2])[0], r = o.substract(i).length(), s = n.substract(i).normalized(), n = i.add(s.scaled(r)), l = this.screenPointToPoint(n), this._properties.points[1].price.setValue(l.price), this._properties.points[1].bar.setValue(l.index)) : (i = this.pointToScreenPoint(this._points[0])[0], n = this.pointToScreenPoint(this._points[1])[0], o = this.pointToScreenPoint(this._points[2])[0], c = n.substract(i).length(), s = o.substract(i).normalized(), o = i.add(s.scaled(c)), l = this.screenPointToPoint(o), this._properties.points[2].price.setValue(l.price), this._properties.points[2].bar.setValue(l.index)), this._recursiveGuard = !1)
        }, s.prototype.addPoint = function(t) {
            var e, i, n, o, r, s, l, c;
            return 2 === this._points.length && (e = this.pointToScreenPoint(this._points[0])[0], i = this.pointToScreenPoint(this._points[1])[0], this.priceScale().isPercent() && (n = this.ownerSource().firstValue(), t.price = this.priceScale().priceRange().convertFromPercent(t.price, n)), o = this.pointToScreenPoint(t)[0], r = i.substract(e).length(), s = o.substract(e).normalized(), o = e.add(s.scaled(r)), l = this.priceScale().coordinateToPrice(o.y), c = Math.round(this._model.timeScale().coordinateToIndex(o.x)), t = {
                index: c,
                price: l
            }), a.prototype.addPoint.call(this, t)
        }, s.prototype.processErase = function(t, e) {
            var i = "level" + e,
                n = this.properties()[i].visible;
            t.setProperty(n, !1, "Erase level line")
        }, s.prototype.createPropertiesObject = function(t, e, i) {
            return new c(t, e, i, {
                range: [1, 11]
            })
        }, e.ArcWedgeRenderer = o, e.FibWedgePaneView = r, e.LineToolFibWedge = s
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n() {
            h.call(this)
        }

        function o(t, e) {
            s.call(this, t, e), this._rendererCache = {}
        }

        function r(t, e) {
            this._constructor = "LineToolTrendBasedFibExtension";
            var i = e || new this.createPropertiesObject("linetooltrendbasedfibextension");
            a.call(this, t, new o(this, t), i), this.version = r.version, t._trendBasedFibExtensionLabelsCache || (t._trendBasedFibExtensionLabelsCache = new n)
        }
        var s = i(115),
            a = i(77).LineDataSource,
            l = i(149),
            c = i(151).RectangleTransparencyRenderer,
            h = i(152),
            d = i(153).TrendLineRenderer,
            u = i(154),
            p = i(67),
            f = i(71);
        inherit(n, h), n.prototype.levelsCount = function() {
            return r.LevelsCount
        }, n.prototype.points = function(t) {
            return [t.points()[0], t.points()[1]]
        }, n.prototype.startPoint = function(t, e) {
            return t.points()[2]
        }, n.prototype.priceRange = function(t, e) {
            var i = this.points(t),
                n = i[0],
                o = i[1],
                r = e ? n.price - o.price : o.price - n.price;
            return r
        }, n.prototype.sourceIsReady = function(t) {
            return t.points().length >= 3
        }, inherit(o, s), o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype._updateImpl = function() {
            var t, e, i, n, o, a, l, c, h, d, u, p, f, _;
            if (s.prototype.update.call(this), this._cacheState = this._model._trendBasedFibExtensionLabelsCache.updateSource(this._source), !(this._source.points().length < 3) && this._source.priceScale() && !this._source.priceScale().isEmpty() && !this._model.timeScale().isEmpty())
                for (t = this._source.points()[0], e = this._source.points()[1], i = this._source.points()[2], n = !1, o = this._source.properties(), o.reverse && o.reverse.value() && (n = o.reverse.value()), this._levels = [], a = n ? t.price - e.price : e.price - t.price, this._source.priceScale().isPercent() && (l = this._source.ownerSource().firstValue()), c = 1; c <= r.LevelsCount; c++) h = "level" + c, d = o[h], d.visible.value() && (u = d.coeff.value(), p = d.color.value(), f = i.price + u * a, this._source.priceScale().isPercent() && (f = this._source.priceScale().priceRange().convertToPercent(f, l)), _ = this._source.priceScale().priceToCoordinate(f), this._levels.push({
                    color: p,
                    y: _,
                    linewidth: o.levelsStyle.linewidth.value(),
                    linestyle: o.levelsStyle.linestyle.value(),
                    index: c
                }))
        }, o.prototype.renderer = function() {
            var t, i, n, o, r, s, l, h, _, g, m, v, y, w, b, S, T, x, C, P, k, I, E;
            if (this._invalidated && (this._updateImpl(), this._invalidated = !1), t = new f, this._points.length < 2) return t;
            if (i = this._points[0], n = this._points[1], o = this._source.properties(), o.trendline.visible.value() && (r = {
                    points: [i, n],
                    width: this._model.timeScale().width(),
                    height: this._source.priceScale().height(),
                    color: o.trendline.color.value(),
                    linewidth: o.trendline.linewidth.value(),
                    linestyle: o.trendline.linestyle.value(),
                    extendleft: !1,
                    extendright: !1,
                    leftend: a.LINEEND_NORMAL,
                    rightend: a.LINEEND_NORMAL
                }, t.append(new d(r))), this._points.length < 3) return this.addAnchors(t), t;
            for (s = this._points[2], o.trendline.visible.value() && (r = {
                points: [n, s],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: o.trendline.color.value(),
                linewidth: o.trendline.linewidth.value(),
                linestyle: o.trendline.linestyle.value(),
                extendleft: !1,
                extendright: !1,
                leftend: a.LINEEND_NORMAL,
                rightend: a.LINEEND_NORMAL
            }, t.append(new d(r))), l = Math.min(s.x, n.x), h = Math.max(s.x, n.x), _ = o.fillBackground.value(), g = o.transparency.value(), m = o.extendLines.value() ? this._model.timeScale().width() : h, v = this._model._trendBasedFibExtensionLabelsCache, y = v.canvas().get(0), w = 0; w < this._levels.length; w++)
                if (w > 0 && _ && (b = this._levels[w - 1], i = new e.Point(l, this._levels[w].y), n = new e.Point(m, b.y), S = {}, S.points = [i, n], S.color = this._levels[w].color, S.linewidth = 0, S.backcolor = this._levels[w].color, S.fillBackground = !0, S.transparency = g, t.append(new c(S))), i = new e.Point(l, this._levels[w].y), n = new e.Point(h, this._levels[w].y), r = {
                        points: [i, n],
                        width: this._model.timeScale().width(),
                        height: this._source.priceScale().height(),
                        color: this._levels[w].color,
                        linewidth: this._levels[w].linewidth,
                        linestyle: this._levels[w].linestyle,
                        extendleft: !1,
                        extendright: o.extendLines.value(),
                        leftend: a.LINEEND_NORMAL,
                        rightend: a.LINEEND_NORMAL
                    }, T = new p(p.MOVEPOINT, null, this._levels[w].index), t.append(new d(r, T)), o.showCoeffs.value() || o.showPrices.value()) {
                    if (x = this._cacheState.preparedCells.cells[this._levels[w].index - 1], !x) continue;
                    switch (o.horzLabelsAlign.value()) {
                        case "left":
                            C = i;
                            break;
                        case "center":
                            C = i.add(n).scaled(.5), C.x += x.width / 2, C.x = Math.round(C.x);
                            break;
                        case "right":
                            o.extendLines.value() ? C = new e.Point(m - 4, this._levels[w].y) : (C = new e.Point(m + 4, this._levels[w].y), C.x += x.width, C.x = Math.round(C.x))
                    }
                    P = {
                        left: x.left,
                        top: v.topByRow(this._cacheState.row),
                        width: x.width,
                        height: v.rowHeight(this._cacheState.row)
                    }, k = {
                        left: C.x - P.width,
                        top: C.y,
                        width: x.width,
                        height: P.height
                    }, I = o.vertLabelsAlign.value(), "middle" === I && (k.top -= k.height / 2), "bottom" === I && (k.top -= k.height), E = new u(y, P, k), t.append(E)
                }
            return this.addAnchors(t), t
        }, inherit(r, a), r.version = 2, r.LevelsCount = 24, r.prototype.stop = function() {
            a.prototype.stop.call(this), this._model._trendBasedFibExtensionLabelsCache.removeSource(this.id())
        }, r.prototype.pointsCount = function() {
            return 3
        }, r.prototype.title = function() {
            return "Trend-Based Fib Extension"
        }, r.prototype.migrateVersion = function(t, e, i) {
            1 === t && this.properties().extendLines.setValue(!0)
        }, r.prototype.processErase = function(t, e) {
            var i = "level" + e,
                n = this.properties()[i].visible;
            t.setProperty(n, !1, "Erase level line")
        }, r.prototype.createPropertiesObject = function(t, e, i) {
            return new l(t, e, i, {
                range: [0, 8]
            })
        }, TradingView.LineToolTrendBasedFibExtension = r, t.exports = r
    }).call(e, i(40))
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(t, e) {
            _.call(this, t, e), this._rendererCache = [{}, {}, {}, {}, {}, {}], this._invalidated = !0
        }

        function o(t, e) {
            var i = e || new b("linetoolelliott");
            f.call(this, t, new n(this, t), i)
        }

        function r(t, e) {
            var i = e || new b("linetoolelliott");
            f.call(this, t, new n(this, t), i), this.version = r.version
        }

        function s(t, e) {
            this._constructor = "LineToolElliottImpulse";
            var i = e || new b("linetoolelliottimpulse");
            r.call(this, t, i)
        }

        function a(t, e) {
            this._constructor = "LineToolElliottTriangle";
            var i = e || new b("linetoolelliotttriangle");
            r.call(this, t, i)
        }

        function l(t, e) {
            this._constructor = "LineToolElliottTripleCombo";
            var i = e || new b("linetoolelliotttriplecombo");
            r.call(this, t, i)
        }

        function c(t, e) {
            var i = e || new b("linetoolelliott");
            f.call(this, t, new n(this, t), i), this.version = c.version
        }

        function h(t, e) {
            this._constructor = "LineToolElliottCorrection";
            var i = e || new b("linetoolelliottcorrection");
            c.call(this, t, i)
        }

        function d(t, e) {
            this._constructor = "LineToolElliottLineToolElliottDoubleCombo";
            var i = e || new b("linetoolelliottdoublecombo");
            c.call(this, t, i)
        }
        var u = i(162).EllipseRendererSimple,
            p = i(116).TextRenderer,
            f = i(77).LineDataSource,
            _ = i(115),
            g = i(153).TrendLineRenderer,
            m = i(163).Action,
            v = i(67),
            y = i(71),
            w = i(61).RGBColor,
            b = i(81).DefaultProperty;
        inherit(n, _), n.prototype.renderer = function() {
            var e, i, n, o, r, s, a, l, c, h, d, f, _, m, b, S, T, x, C, P, k;
            if (this._invalidated && (this.updateImpl(), this._invalidated = !1), !this._wave) return null;
            for (e = this.isAnchorsRequired() ? 0 : 1, i = new y, n = this._source.properties(), o = 0; o < this._wave.length; o++) i.append(new g(this._wave[o]));
            for (r = 1, this._points.length > 2 && (s = this._points[2], a = this._points[1], r = t.sign(s.y - a.y)), l = [], c = 0, this._model.lineBeingCreated() === this._source && (c = 1), h = new w(this._model.backgroundColor()).blackWhiteContrast(), d = n.color.value(), o = 0; o < this._points.length - c; o++, r = -r) e > o || (f = this._source.label(o), _ = f.label, "circle" === f.decoration && (m = this._points[o].clone(), 1 === r ? m.y += 13 + f.fontIncrease / 2 : m.y -= 14 + f.fontIncrease / 2, b = (12 + f.fontIncrease) / 2 + 2, s = m.substract(new t.Point(b, b)), a = m.add(new t.Point(b, b)), S = {
                points: [s, a],
                color: new w(d).darken("black" === h ? 15 : -15).toHex(),
                linewidth: 1,
                fillBackground: !1
            }, T = new u(S), i.append(T)), "brackets" === f.decoration && (_ = "(" + _ + ")"), x = {
                points: [this._points[o]],
                text: _,
                color: new w(d).darken("black" === h ? 15 : -15).toHex(),
                vertAlign: 1 === r ? "top" : "bottom",
                horzAlign: "center",
                font: "Arial",
                offsetX: 0,
                offsetY: 1 === r ? 5 : -10,
                fontsize: 12 + f.fontIncrease,
                bold: f.bold
            }, l.push(x), "" !== f && i.append(new p(x, this._rendererCache[o], new v(v.CHANGEPOINT, o))));
            if (this.isAnchorsRequired()) {
                for (C = [], P = 0; P < l.length; P++) k = this._points[P].clone(), k.y = l[P].points[0].y, k.data = P, C.push(k);
                this._model.lineBeingCreated() === this._source && C.pop(), i.append(this.createLineAnchor({
                    points: C
                }))
            }
            return i
        }, n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype.updateImpl = function() {
            var e, i, n, o, r, s, a, l, c, h, d, u, p, g, m, v;
            if (_.prototype.update.call(this), this._wave = [], e = this._source.properties(), i = this._source.priceScale(), n = this._model.timeScale(), i && !i.isEmpty() && !n.isEmpty() && (this._source.priceScale().isPercent() && (o = this._source.ownerSource().firstValue()), r = e.color.value(), e.showWave.value()))
                for (s = this._source.points(), a = 1; a < s.length; a++) l = s[a - 1], c = s[a], h = n.indexToCoordinate(l.index), d = n.indexToCoordinate(c.index), u = l.price, p = c.price, this._source.priceScale().isPercent() && (u = this._source.priceScale().priceRange().convertToPercent(u, o), p = this._source.priceScale().priceRange().convertToPercent(p, o)), g = i.priceToCoordinate(u), m = i.priceToCoordinate(p), v = {
                    points: [new t.Point(h, g), new t.Point(d, m)],
                    width: n.width(),
                    height: i.height(),
                    color: TradingView.generateColor(r, 0),
                    linewidth: e.linewidth.value(),
                    linestyle: CanvasEx.LINESTYLE_SOLID,
                    extendleft: !1,
                    extendright: !1,
                    leftend: f.LINEEND_CIRCLE,
                    rightend: f.LINEEND_CIRCLE,
                    endstyle: {
                        strokeWidth: 1,
                        fillStyle: this._model.backgroundColor()
                    },
                    overlayLineEndings: !0
                }, this._wave.push(v)
        }, inherit(o, f), o.migrateState = function(t) {
            var e = {
                    0: 11,
                    1: 10,
                    2: 9,
                    3: 8,
                    4: 7,
                    5: 6,
                    6: 5,
                    7: 4,
                    8: 3
                },
                i = {
                    0: 11,
                    1: 8
                };
            "LineToolElliottSubminuette" === t.type && (t.type = "LineToolElliottImpulse", t.state.degree = e[t.state.wavesize]), "LineToolElliottMinor" === t.type && (t.type = "LineToolElliottImpulse", t.state.degree = e[t.state.wavesize]), "LineToolElliottCircle" === t.type && (t.type = "LineToolElliottImpulse", t.state.degree = e[t.state.wavesize]), "LineToolElliottMinorRetr" === t.type && (t.type = "LineToolElliottCorrection", t.state.degree = i[t.state.wavesize]), "LineToolElliottMajorRetr" === t.type && (t.type = "LineToolElliottCorrection", t.state.degree = i[t.state.wavesize])
        }, o.prototype.title = function() {
            return "Elliott Labels"
        }, o.degrees = [$.t("Supermillennium"), $.t("Millennium"), $.t("Submillennium"), $.t("Grand Supercycle"), $.t("Supercycle"), $.t("Cycle"), $.t("Primary"), $.t("Intermediate"), $.t("Minor"), $.t("Minute"), $.t("Minuette"), $.t("Subminuette"), $.t("Micro"), $.t("Submicro"), $.t("Miniscule")], o.prototype.additionalActions = function(t) {
            var e = new m({
                    text: $.t("Degree")
                }),
                i = this;
            return e.subActions = o.degrees.map(function(e, n) {
                var o = new m({
                    text: e,
                    checkable: !0,
                    checked: i.properties().degree.value() === n
                });
                return o.callbacks().subscribe(null, function() {
                    t.setProperty(i.properties().degree, n, "Change Elliott Degree")
                }), o
            }), [e]
        }, o.prototype.label = function(t) {
            var e = o.degrees.length - this.properties().degree.value() - 1,
                i = Math.floor(e / 3),
                n = e % 3,
                r = 4 * Math.floor(i),
                s = !!(i % 2),
                a = ["", "brackets", "circle"][n],
                l = this.labelsGroup(),
                c = l[i][t];
            return {
                fontIncrease: r,
                bold: s,
                decoration: a,
                label: c
            }
        }, inherit(r, o), r.version = 3, r.prototype.pointsCount = function() {
            return 6
        }, r.prototype.migrateVersion = function(t, e, i) {
            if (1 === t) {
                var n = $.extend({}, this._timePoint[0]);
                this._timePoint.unshift(n), this._points.length > 0 && (n = $.extend({}, this._points[0]), this._points.unshift(n))
            }
        }, inherit(s, r), s._labelsGroups = [
            ["0", "1", "2", "3", "4", "5"],
            ["0", "i", "ii", "iii", "iv", "v"],
            ["0", "1", "2", "3", "4", "5"],
            ["0", "I", "II", "III", "IV", "V"],
            ["0", "1", "2", "3", "4", "5"]
        ], s.prototype.labelsGroup = function() {
            return s._labelsGroups
        }, inherit(a, r), a._labelsGroups = [
            ["0", "A", "B", "C", "D", "E"],
            ["0", "a", "b", "c", "d", "e"],
            ["0", "A", "B", "C", "D", "E"],
            ["0", "a", "b", "c", "d", "e"],
            ["0", "A", "B", "C", "D", "E"]
        ], a.prototype.labelsGroup = function() {
            return a._labelsGroups
        }, inherit(l, r), l._labelsGroups = [
            ["0", "W", "X", "Y", "X", "Z"],
            ["0", "w", "x", "y", "x", "z"],
            ["0", "W", "X", "Y", "X", "Z"],
            ["0", "w", "x", "y", "x", "z"],
            ["0", "W", "X", "Y", "X", "Z"]
        ], l.prototype.labelsGroup = function() {
            return l._labelsGroups
        }, inherit(c, o), c.version = 3, c.prototype.pointsCount = function() {
            return 4
        }, c.prototype.migrateVersion = function(t, e, i) {
            if (1 === t) {
                var n = $.extend({}, this._timePoint[0]);
                this._timePoint.insert(n, 0), this._points.length > 0 && (n = $.extend({}, this._points[0]), this._points.insert(n, 0))
            }
        }, inherit(h, c), h._labelsGroups = [
            ["0", "A", "B", "C"],
            ["0", "a", "b", "c"],
            ["0", "A", "B", "C"],
            ["0", "a", "b", "c"],
            ["0", "A", "B", "C"]
        ], h.prototype.labelsGroup = function() {
            return h._labelsGroups
        }, inherit(d, c), d._labelsGroups = [
            ["0", "W", "X", "Y"],
            ["0", "w", "x", "y"],
            ["0", "W", "X", "Y"],
            ["0", "w", "x", "y"],
            ["0", "W", "X", "Y"]
        ], d.prototype.labelsGroup = function() {
            return d._labelsGroups
        }, e.LineToolElliott = o, e.LineToolElliottImpulse = s, e.LineToolElliottTriangle = a, e.LineToolElliottTripleCombo = l, e.LineToolElliottCorrection = h, e.LineToolElliottDoubleCombo = d
    }).call(e, i(40))
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n() {
            h.call(this)
        }

        function o(t, e, i) {
            this._data = t, this._hittest = e || new p(p.MOVEPOINT), this._backHittest = i || new p(p.MOVEPOINT_BACKGROUND)
        }

        function r(t, e) {
            a.call(this, t, e), this._rendererCache = {}, this._invalidated = !0, this._numericFormatter = new g
        }

        function s(t, e) {
            this._constructor = "LineToolFibCircles";
            var i = e || this.createPropertiesObject("linetoolfibcircles");
            l.call(this, t, new r(this, t), i), t._fibCirclesLabelsCache || (t._fibCirclesLabelsCache = new n)
        }
        var a = i(115),
            l = i(77).LineDataSource,
            c = i(149),
            h = i(152),
            d = i(153).TrendLineRenderer,
            u = i(154),
            p = i(67),
            f = i(71),
            _ = i(83),
            g = _.NumericFormatter;
        inherit(n, h), n.prototype.levelsCount = function() {
            return s.LevelsCount
        }, o.prototype.draw = function(t) {
            var e, i, n, o, r, s, a, l;
            t.lineCap = "butt", t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, t.lineStyle = this._data.linestyle, e = this._data.points[0], i = this._data.points[1], n = Math.abs(e.x - i.x), o = Math.abs(e.y - i.y), r = e.add(i).scaled(.5), 1 > n || 1 > o || (this._data.wholePoints && (a = this._data.wholePoints[0], l = this._data.wholePoints[1], s = Math.abs(a.x - l.x)), t.save(), t.translate(r.x, r.y), t.scale(1, o / n), t.beginPath(), t.arc(0, 0, n / 2, 0, 2 * Math.PI, !1), t.restore(), t.stroke(), this._data.fillBackground && (this._data.wholePoints && (t.translate(r.x, r.y), t.scale(1, o / n), t.arc(0, 0, s / 2, 0, 2 * Math.PI, !0)), t.fillStyle = TradingView.generateColor(this._data.backcolor, this._data.transparency, !0), t.fill()))
        }, o.prototype.hitTest = function(e) {
            var i, n, o, r, s, a, l, c, h, d, u;
            return this._data.points.length < 2 ? null : (i = this._data.points[0], n = this._data.points[1], o = .5 * Math.abs(i.x - n.x), r = Math.abs(i.x - n.x), s = Math.abs(i.y - n.y), a = i.add(n).scaled(.5), l = e.substract(a), 1 > r || 1 > s ? null : (c = (n.y - i.y) / (n.x - i.x), l.y /= c, h = l.x * l.x + l.y * l.y, d = h - o * o, d = t.sign(d) * Math.sqrt(Math.abs(d / o)), u = 3, Math.abs(d) < u ? this._hittest : this._data.fillBackground && !this._data.noHitTestOnBackground && u > d ? this._backHittest : null))
        }, inherit(r, a), r.prototype.update = function() {
            this._invalidated = !0
        }, r.prototype._updateImpl = function() {
            var e, i, n, o, r, l, c, h, d, u, p, f;
            if (a.prototype.update.call(this), this._cacheState = this._model._fibCirclesLabelsCache.updateSource(this._source), !(this._source.points().length < 2) && this._source.priceScale() && !this._source.priceScale().isEmpty() && !this._model.timeScale().isEmpty())
                for (e = this._points[0], i = this._points[1], this._center = e.add(i).scaled(.5), n = Math.abs(i.x - e.x), o = Math.abs(i.y - e.y), this._levels = [], r = this._source.properties(),
                         l = 1; l <= s.LevelsCount; l++) c = "level" + l, h = r[c], h.visible.value() && (d = h.coeff.value(), u = h.color.value(), p = [], p.push(new t.Point(this._center.x - .5 * n * d, this._center.y - .5 * o * d)), p.push(new t.Point(this._center.x + .5 * n * d, this._center.y + .5 * o * d)), f = new t.Point(this._center.x, this._center.y + .5 * o * d), this._levels.push({
                    color: u,
                    points: p,
                    labelPoint: f,
                    linewidth: h.linewidth.value(),
                    linestyle: h.linestyle.value(),
                    index: l
                }))
        }, r.prototype.renderer = function() {
            var t, e, i, n, r, s, a, c, h, _, g, m, v, y, w;
            if (this._invalidated && (this._updateImpl(), this._invalidated = !1), t = new f, this._points.length < 2) return t;
            for (e = this._source.properties(), i = e.fillBackground.value(), n = e.transparency.value(), r = this._model._fibCirclesLabelsCache, s = r.canvas().get(0), a = 0; a < this._levels.length; a++)
                if (c = this._levels[a], h = {}, h.points = c.points, h.color = c.color, h.linewidth = c.linewidth, h.backcolor = c.color, a > 0 && (h.wholePoints = this._levels[a - 1].points), h.fillBackground = i, h.transparency = n, _ = new p(p.MOVEPOINT, null, c.index), t.append(new o(h, _)), e.showCoeffs.value()) {
                    if (g = this._cacheState.preparedCells.cells[this._levels[a].index - 1], !g) continue;
                    m = {
                        left: g.left,
                        top: r.topByRow(this._cacheState.row),
                        width: g.width,
                        height: r.rowHeight(this._cacheState.row)
                    }, v = {
                        left: Math.round(c.labelPoint.x - m.width),
                        top: Math.round(c.labelPoint.y - m.height / 2),
                        width: g.width,
                        height: m.height
                    }, y = new u(s, m, v), t.append(y)
                }
            return e.trendline.visible.value() && (w = {
                points: [this._points[0], this._points[1]],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: e.trendline.color.value(),
                linewidth: e.trendline.linewidth.value(),
                linestyle: e.trendline.linestyle.value(),
                extendleft: !1,
                extendright: !1,
                leftend: l.LINEEND_NORMAL,
                rightend: l.LINEEND_NORMAL
            }, t.append(new d(w))), this.addAnchors(t), t
        }, inherit(s, l), s.LevelsCount = 11, s.prototype.pointsCount = function() {
            return 2
        }, s.prototype.title = function() {
            return "Fib Circles"
        }, s.prototype.processErase = function(t, e) {
            var i = "level" + e,
                n = this.properties()[i].visible;
            t.setProperty(n, !1, "Erase level line")
        }, s.prototype.createPropertiesObject = function(t, e, i) {
            return new c(t, e, i, {
                range: [1, 11]
            })
        }, e.EllipseRendererSimple = o, e.LineToolFibCircles = s
    }).call(e, i(40))
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(e) {
            e || (e = {}), this.checkable = e.checkable || !1, this.checked = e.checked || null, this.enabled = void 0 === e.enabled ? !0 : e.enabled, this.visible = e.visible || !0, this.active = !0, this.font = e.font || "Arial", this.icon = e.icon || null, this.iconText = e.iconText || null, this.iconVisibleInMenu = e.iconVisibleMenu || !0, this.deleteButton = e.deleteButton || null, this.shortcut = null, this.setShortCut(e.shortcut, e.doNotBindShortcut), this.statusTip = e.statusTip || null, this.text = e.text || null, this.toolTip = e.toolTip || null, this.htmlclass = e.htmlclass || null, this._callbackContext = e.callbackContext || this, this._callbacks = new t, this.subActions = e.subActions || []
        }

        function o() {
            n.call(this), this.font = null, this.subActions = null, this.htmlclass = "action-separator"
        }

        function r(t) {
            n.call(this), this.deferred = t
        }
        var s = i(164);
        n.prototype.callbacks = function() {
            return this._callbacks
        }, n.prototype.callbackContext = function() {
            return this._callbackContext
        }, n.prototype.setCallbackContext = function(t) {
            this._callbackContext = t
        }, n.prototype.hasSubActions = function() {
            return this.subActions && this.subActions.length
        }, n.prototype.setChecked = function(t) {
            this.checked = t
        }, n.prototype._toggleChecked = function() {
            this.checked = !this.checked
        }, n.prototype.setVisible = function(t) {
            this.visible = t
        }, n.prototype.setEnabled = function(t) {
            this.enabled = t
        }, n.prototype.disable = function() {
            this.setEnabled(!1)
        }, n.prototype.enable = function() {
            this.setEnabled(!0)
        }, n.prototype.setActive = function(t) {
            this.active !== t && (this.active = t, this.shortcut && !this.doNotBindShortcut && (t ? this._bindShortCut() : this._unbindShortCut()))
        }, n.prototype.setShortCut = function(t, e) {
            t && (this.shortcut = t, e !== !0 && this._bindShortCut())
        }, n.prototype._bindShortCut = function() {
            s.bind(this.shortcut, function(t) {
                return t.preventDefault(), this.enabled ? (this.executeCallback(), !1) : void 0
            }.bind(this))
        }, n.prototype._unbindShortCut = function() {
            s.unbind(this.shortcut)
        }, n.prototype.setIconVisible = function(t) {
            this.iconVisibleInMenu = t
        }, n.prototype.executeCallback = function(t) {
            this._lastEvent = t, this._toggleChecked(), this._callbacks.fire(this)
        }, inherit(o, n), inherit(r, n), e.Action = n, e.ActionSeparator = o, e.ActionPlaceholder = r
    }).call(e, i(50))
}, function(t, e) {
    "use strict";

    function i() {
        return this.bindings = {}, this.$doc = $(document), this
    }
    i.prototype.parseName = function(t) {
        return "." + t.replace("+", "")
    }, i.prototype.bind = function(t, e) {
        var i = this.parseName(t);
        this.$doc.unbind("keydown" + i).bind("keydown" + i, t, e), this.bindings[t] = e
    }, i.prototype.unbind = function(t) {
        this.$doc.unbind("keydown" + this.parseName(t)), delete this.bindings[t]
    }, t.exports = new i
}, function(t, e, i) {
    "use strict";

    function n(t, e, i) {
        var n, r, s = "RegressionTrend@tv-basicstudies",
            a = TradingView.Study.lineToolNameForPointsBasedStudy(s);
        i = i || v.findStudyMetaInfo(t.studiesMetaData(), s), n = t.studyVersioning(), r = e || m(i, null, null, n), r.merge({
            blockCopying: !0
        }), l.call(this, t, [new o(this, t)], r, a), this._turnaroundCounter = 1, this._turnaround = "linreg_" + this._turnaroundCounter, this._metaInfo = i, this._graphics = new _(i)
    }

    function o(t, e) {
        s.call(this, t, e), this._calc = null, this._lines = [], this._pearsons = null, this._rendererCache = {}
    }
    var r = i(77).LineDataSource,
        s = i(115),
        a = i(166).LinearRegressionPaneView,
        l = i(223).StudyLineDataSource,
        c = i(156).ParallelChannelRenderer,
        h = i(116).TextRenderer,
        d = i(153).TrendLineRenderer,
        u = i(66).SelectionRenderer,
        p = i(67),
        f = i(71),
        _ = i(174),
        g = i(168),
        m = g.prepareStudyProperties,
        v = i(125);
    inherit(n, l), n.prototype.version = 2, n.prototype.pointsCount = function() {
        return 2
    }, n.prototype.recalcStudyIfNeeded = function() {
        this._studyId || 2 !== this._points.length || this._requestStudy()
    }, n.prototype._requestStudy = function() {
        var t, e, i, n, o, r, s = this.points()[0],
            a = this.points()[1],
            l = Math.min(s.index, a.index),
            c = Math.max(s.index, a.index);
        return l === c ? void this.clearData() : (t = this._model.mainSeries().bars().valueAt(l), e = this._model.mainSeries().bars().valueAt(c), void(t && e && (i = 1e3 * t[TradingView.TIME_PLOT], n = 1e3 * e[TradingView.TIME_PLOT], o = [], o.push(this.properties().inputs["upper diviation"].value()), o.push(this.properties().inputs["lower diviation"].value()), o.push(this.properties().inputs["use upper diviation"].value()), o.push(this.properties().inputs["use lower diviation"].value()), o.push(i), o.push(n), o.push(this.properties().inputs.source.value()), r = this, this._studyId ? (this._turnaround = "linreg_" + ++this._turnaroundCounter, this._model.chartApi().modifyStudy(this._studyId, this._turnaround, o, function(t) {
            r.onData(t)
        })) : (this._studyId = TradingView.Study.makeNextStudyId(), this._model.chartApi().createStudy(this._studyId, this._turnaround, this._model.mainSeries()._seriesId, this._metaInfo.id + "-1!", o, function(t) {
            r.onData(t)
        })))))
    }, n.prototype.onData = function(t) {
        if ("data_update" === t.method && t.params.customId === "pointset_" + this._currentPointsetId && (r.prototype.onData.call(this, t), 2 === this._points.length && this._requestStudy()), "data_update" === t.method && t.params.customId === this._studyId) {
            if (!this._checkTurnaround(t.params.turnaround)) return;
            var e = TradingView.Study.prototype._makeJSONForNSData.call(this, t, {});
            if (!e.data) return;
            e.indexes_replace ? this._indexes = t.params.nonseries.indexes : (this._nonseriesdata = e.data, TradingView.isNaN(e.data.baseLine.startPrice) || TradingView.isNaN(e.data.baseLine.endPrice) || (this._points[0].price = this._nonseriesdata.baseLine.startPrice, this._points[1].price = this._nonseriesdata.baseLine.endPrice), this._indexes = t.params.nonseries.indexes), this.updateAllViews(), this._model.updateSource(this)
        }
    }, n.patchSourceState = function(t) {
        var e = {
            palettes: {},
            inputs: [{
                defval: 2,
                id: "upper diviation",
                max: 500,
                min: -500,
                name: $.t("Upper Deviation"),
                type: "integer"
            }, {
                defval: -2,
                id: "lower diviation",
                max: 500,
                min: -500,
                name: $.t("Lower Deviation"),
                type: "integer"
            }, {
                defval: !0,
                id: "use upper diviation",
                name: $.t("Use Upper Deviation"),
                type: "bool"
            }, {
                defval: !0,
                id: "use lower diviation",
                name: $.t("Use Lower Deviation"),
                type: "bool"
            }, {
                defval: 0,
                id: "first bar time",
                max: 253370764800,
                min: 0,
                name: $.t("First bar time"),
                type: "time"
            }, {
                defval: 0,
                id: "last bar time",
                max: 253370764800,
                min: 0,
                name: $.t("Last bar time"),
                type: "time"
            }, {
                defval: "close",
                id: "source",
                name: $.t("Source"),
                options: ["open", "high", "low", "close", "hl2", "hlc3", "ohlc4"],
                type: "text"
            }],
            plots: [],
            graphics: {},
            defaults: {
                inputs: {
                    "first bar time": 0,
                    "last bar time": 0,
                    "lower diviation": -2,
                    source: "close",
                    "upper diviation": 2,
                    "use lower diviation": !0,
                    "use upper diviation": !0
                }
            },
            _metainfoVersion: 6,
            description: "Regression Trend",
            id: "RegressionTrend@tv-basicstudies",
            is_price_study: !0,
            shortDescription: "Reg Trend",
            shortId: "RegressionTrend",
            version: "2",
            fullId: "RegressionTrend@tv-basicstudies-2",
            name: "RegressionTrend@tv-basicstudies"
        };
        return t.metaInfo || (t.metaInfo = e), t
    }, inherit(o, a), o.prototype.currentPoint = function() {
        return s.prototype.currentPoint.call(this)
    }, o.prototype.anchorColor = function() {
        return s.prototype.anchorColor.call(this)
    }, o.prototype.getTransparencyResetLines = function() {
        return this._lines.map(function(t) {
            var e = $.extend({}, t);
            return e.color = TradingView.resetTransparency(e.color), e
        })
    }, o.prototype.renderer = function() {
        var t, e, i, n, o, r, s;
        if (this._invalidated && (this.updateImpl(), this._invalidated = !1), t = new f, this._source._nonseriesdata) {
            for (e = [], i = [this._lines[1], this._lines[0], this._lines[2]], n = [], o = 0; o < i.length; o++) i[o] && n.push(i[o]);
            for (o = 1; o < n.length; o++) r = {}, r.points = [i[o].floatPoints[0], i[o].floatPoints[1], i[o - 1].floatPoints[0], i[o - 1].floatPoints[1]], r.color = i[o].color, r.width = this._model.timeScale().width(), r.height = this._source.priceScale().height(), r.linewidth = i[o].linewidth, r.linestyle = i[o].linestyle, r.extendleft = !1, r.extendright = i[o].extendright, r.backcolor = r.color, r.transparency = this._source.properties().styles.transparency.value(), r.skipLines = !0, r.fillBackground = !0, t.append(new c(r, new p(p.REGULAR)));
            for (o = 0; o < n.length; o++) t.append(new d(this.getTransparencyResetLines()[o], new p(p.REGULAR))), 0 !== o && (e = e.concat(this._lines[o].floatPoints));
            this._pearsons && (this._pearsons.color = TradingView.resetTransparency(this._pearsons.color), t.append(new h(this._pearsons, this._rendererCache))), this.isAnchorsRequired() && this._lines && this._lines.length >= 1 && (t.append(new u({
                points: e
            })), s = this._lines[0].floatPoints, s[0].data = 0, s[1].data = 1, t.append(this.createLineAnchor({
                points: s
            })))
        }
        return t
    }, o.prototype.updateImpl = function() {
        a.prototype.updateImpl.call(this)
    }, o.prototype.update = function() {
        a.prototype.update.call(this), s.prototype.update.call(this)
    }, t.exports = n
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(t, e) {
            this._model = t, this._source = e, this._lines = [], this._pearsons = null, this._rendererCache = {}, this._invalidated = !0
        }

        function o(t, e, i, o) {
            c.call(this, t, e, i, o, new n(t, this))
        }
        var r = i(77).LineDataSource,
            s = i(115),
            a = i(156).ParallelChannelRenderer,
            l = i(116).TextRenderer,
            c = i(167),
            h = i(153).TrendLineRenderer,
            d = i(67),
            u = i(71);
        inherit(n, s), n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype.updateImpl = function() {
            var e, i, n, o, s, a, l, c, h, d, u, p, f, _, g, m, v, y, w, b, S, T, x, C, P, k, I;
            if (this._lines = [], this._pearsons = null, this._source._nonseriesdata && void 0 !== this._source._nonseriesdata.startIndex && void 0 !== this._source._nonseriesdata.endIndex && this._source.properties().visible.value() && (e = this._source._nonseriesdata, i = this._source._indexes, n = this._model.timeScale(), o = this._source.priceScale(), s = this._model.mainSeries(), a = s.firstBar(), o && !o.isEmpty() && !n.isEmpty() && a)) {
                for (l = i[e.startIndex], c = i[e.endIndex], h = [e.baseLine, e.downLine, e.upLine], d = Math.round(n.indexToCoordinate(l)), u = Math.round(n.indexToCoordinate(c)), p = this._source.properties(), f = [p.styles.baseLine, p.styles.downLine, p.styles.upLine], _ = 0; _ < h.length; _++) f[_].visible.value() && (g = h[_].startPrice, m = h[_].endPrice, o.isPercent() && (g = o.priceRange().convertToPercent(g, a[TradingView.CLOSE_PLOT]), m = o.priceRange().convertToPercent(m, a[TradingView.CLOSE_PLOT])), v = o.priceToCoordinate(g, !0), y = o.priceToCoordinate(m, !0), w = new t.Point(d, v), b = new t.Point(u, y), S = f[_].color.value(), T = f[_].linewidth.value(), x = f[_].linestyle.value(), C = {
                    floatPoints: [w, b],
                    width: this._model.timeScale().width(),
                    height: this._source.priceScale().height(),
                    color: S,
                    linewidth: T,
                    linestyle: x,
                    extendleft: !1,
                    extendright: p.styles.extendLines.value(),
                    leftend: r.LINEEND_NORMAL,
                    rightend: r.LINEEND_NORMAL
                }, this._lines.push(C));
                p.styles.showPearsons.value() && (P = e.downLine.startPrice, o.isPercent() && (P = o.priceRange().convertToPercent(P, a[TradingView.CLOSE_PLOT])), k = o.priceToCoordinate(P), I = new t.Point(d, k), this._pearsons = {
                    points: [I],
                    text: "" + e.pearsons,
                    color: p.styles.downLine.color.value(),
                    vertAlign: "top",
                    horzAlign: "center",
                    font: "Arial",
                    offsetX: 0,
                    offsetY: 4,
                    fontsize: 12
                })
            }
        }, n.prototype.getTransparencyResetLines = function() {
            return this._lines.map(function(t) {
                var e = $.extend({}, t);
                return e.color = TradingView.resetTransparency(e.color), e
            })
        }, n.prototype.renderer = function() {
            var t, e, i, n, o;
            for (this._invalidated && (this.updateImpl(), this._invalidated = !1), t = new u, e = [this._lines[1], this._lines[0], this._lines[2]], i = [], n = 0; n < e.length; n++) e[n] && i.push(e[n]);
            for (n = 1; n < i.length; n++) o = {}, o.points = [e[n].floatPoints[0], e[n].floatPoints[1], e[n - 1].floatPoints[0], e[n - 1].floatPoints[1]], o.color = e[n].color, o.width = this._model.timeScale().width(), o.height = this._source.priceScale().height(), o.linewidth = e[n].linewidth, o.linestyle = e[n].linestyle, o.extendleft = !1, o.extendright = e[n].extendright, o.backcolor = o.color, o.transparency = this._source.properties().styles.transparency.value(), o.skipLines = !0, o.fillBackground = !0, t.append(new a(o, new d(d.REGULAR), new d(d.REGULAR)));
            for (n = 0; n < this._lines.length; n++) t.append(new h(this.getTransparencyResetLines()[n], new d(d.REGULAR)));
            return this._pearsons && (this._pearsons.color = TradingView.resetTransparency(this._pearsons.color), t.append(new l(this._pearsons, this._rendererCache))), t
        }, inherit(o, c), o.prototype.isVisible = function() {
            if (!this.properties().visible.value()) return !1;
            var t = this.properties().styles;
            return t.upLine.visible.value() || t.downLine.visible.value() || t.baseLine.visible.value()
        }, e.LinearRegressionPaneView = n, e.study_LinearRegression = o
    }).call(e, i(40))
}, function(t, e, i) {
    "use strict";

    function n(t, e, i, n, r) {
        this._paneView = r, o.call(this, t, e, i, n)
    }
    var o = i(168).Study;
    inherit(n, o), n.prototype.onData = function(t) {
        var e, i;
        switch (t.method) {
            case "data_update":
                e = o.prototype._makeJSONForNSData.call(this, t, {}), e.indexes_replace ? this._indexes = t.params.nonseries.indexes : (this._nonseriesdata = e.data, this._indexes = t.params.nonseries.indexes), i = this._model.paneForSource(this), this._model.recalculatePane(i), this._model.updateSource(this);
                break;
            default:
                return o.prototype.onData.call(this, t)
        }
    }, n.prototype.updateAllViews = function() {
        this._paneView.update(), this._dataWindowView.update(), this._statusView.update()
    }, n.prototype.paneViews = function(t) {
        return [this._paneView]
    }, n.prototype.state = function(t) {
        var e = o.prototype.state.call(this, t);
        return t && (e.nonSeriesData = this._nonseriesdata, e.indexes = this._indexes), e
    }, n.prototype.restoreData = function(t, e, i) {
        o.prototype.restoreData.call(this, t), this._nonseriesdata = e, this._indexes = i
    }, n.prototype.clearData = function() {
        this._nonseriesdata = null, this._indexes = null
    }, t.exports = n
}, function(t, e, i) {
    (function(e, n, o, r, s) {
        "use strict";

        function a(t, i, n, o) {
            this._study = t, this.m_series = i, this.m_model = n, this._plotName = o, this._visible = !1, this._points = [new e.Point(0, 0)], this._invalidated = !0
        }

        function l() {
            return {
                visible: !0,
                color: "#0496FF",
                linestyle: CanvasEx.LINESTYLE_SOLID,
                linewidth: 2,
                plottype: ht.PLOT_LINE,
                histogramBase: 0,
                transparency: 50,
                trackPrice: !1,
                joinPoints: !1
            }
        }

        function c(t, e, i, n) {
            var o, r;
            return n.isTVScriptStrategy ? o = "StudyStrategy" : (r = "study_" + (n.classId || n.shortId), o = r in TradingView ? r : "Study"), new TradingView[o](t, e, i, n)
        }

        function h(t, e, i, n) {
            return d(t, e, i, n, "study_" + t.id)
        }

        function d(t, e, i, n, o) {
            var r, s, a = f(t, e, i, n),
                l = new nt(o, a, !0);
            for (l.addExclusion("visible"), l.addExclusion("precision"), l.addExclusion("minTick"), r = 0; r < t.inputs.length; ++r) s = t.inputs[r], s.isHidden && (l.addExclusion("inputs." + r), l.addExclusion("inputs." + s.id));
            return l
        }

        function u(t, e, i, n, o) {
            return p(t, e, i, n, o, "study_" + t.id)
        }

        function p(t, e, i, n, o, r) {
            var s, a, l, c = _(t, e, i, n, o),
                h = new nt(r, c, !0);
            for (h.addExclusion("visible"), h.addExclusion("precision"), h.addExclusion("minTick"), s = e || t, a = 0; a < s.inputs.length; ++a) l = s.inputs[a], l.isHidden && (h.addExclusion("inputs." + a), h.addExclusion("inputs." + l.id));
            return h
        }

        function f(t, e, o, r) {
            var s, a, l, c, h, d, u = i(218),
                p = ct.versionOf(t);
            if (1 > p) throw Error("This function cannot work with metainfo of the old format version. Required format version >= 1");
            return s = TradingView.clone(defaults("study")), m(s, t), a = TradingView.clone(defaults("study_" + t.id, r)), t.isTVScript && t.TVScriptSourceCode !== a.TVScriptSourceCode && (a = TradingView.clone(TradingView.factoryDefaults("study_" + t.id, r))), TradingView.merge(s, a), e && (assert(!(e instanceof n), "propsState should not be an instance of Property"), TradingView.merge(s, e)), l = v(t), c = {}, u.mergeInputs(c, l.defaults.inputs), u.mergeInputsObjPart(c, s.inputs), u.mergeInputsArrPart(c, l.inputs), s.inputs = c, delete l.inputs, delete l.defaults.inputs, h = {}, TradingView.merge(h, l.defaults), TradingView.merge(h, TradingView.factoryDefaults("study_" + l.id)), TradingView.merge(h, s), TradingView.merge(h, l), delete h.defaults, s = h, d = y(o, t), TradingView.merge(s, w(s, d)), e && TradingView.merge(s.styles, e.styles), s
        }

        function _(t, e, n, o, r) {
            var s, a, l, c, h, d, u = i(218),
                p = ct.versionOf(t);
            return t.version && n.version && t.version !== n.version && TradingView.logWarn("Serialized metaInfo version " + t.version + " is not equal to the saved state version " + n.version), s = TradingView.clone(defaults("study")), 0 === p ? (TradingView.merge(s, TradingView.clone(t)), a = v(t), TradingView.merge(s.inputs, a.inputs)) : p >= 1 && TradingView.merge(s, TradingView.clone(t.defaults)), TradingView.merge(s, TradingView.factoryDefaults("study_" + t.id)), m(s, t), TradingView.merge(s, n), p >= 1 && (TradingView.merge(s, TradingView.clone(t)), delete s.defaults), s = r.updateStudyState(s, t, e), l = e || t, l && ct.versionOf(l) >= 1 && (l = v(l), c = {}, u.mergeInputs(c, l.defaults.inputs), u.mergeInputs(c, s.inputs), u.mergeInputsArrPart(c, l.inputs), s.inputs = c, delete l.inputs, delete l.defaults.inputs, h = {}, TradingView.merge(h, l.defaults), TradingView.merge(h, TradingView.factoryDefaults("study_" + l.id)), TradingView.merge(h, s), TradingView.merge(h, l), delete h.defaults, s = h), d = y(o, l), TradingView.merge(s, w(s, d)), s
        }

        function g(t, e) {
            function i(t) {
                if (!t) return "_none_";
                var t = t || {};
                return t = JSON.stringify(t), t = t.replace(/'/g, "\\'")
            }
            var n, o, r, s, a, l = {};
            if (e.isTVScript) n = e.defaults.inputs.text, l.text = K.patchILTemplate(n, e, t);
            else
                for (o = Object.keys(t), r = o.length - 1; r >= 0; r--) s = o[r], a = t[s] ? t[s].id : null, a && t[a] && (l[a] = t[a]);
            return i(l)
        }

        function m(t, e) {
            var i, n, o, r;
            if (e.plots)
                for (i = 0; i < e.plots.length; i++) n = e.plots[i].id, o = e.plots[i].type, o !== ht.PLOT_TYPE_COLORER && (r = l(), o === ht.PLOT_TYPE_BAR_COLORER && (r.transparency = 0), r.plottype = o, r.title = n, t.styles && n in t.styles && TradingView.merge(r, t.styles[n]), t.styles[n] = r)
        }

        function v(t) {
            var e, i, n = TradingView.clone(t);
            if (n.inputs = {}, t.inputs)
                for (e = 0; e < t.inputs.length; e++) i = t.inputs[e].id, n.inputs[i] = t.inputs[e].defval, n.inputs[e] = t.inputs[e];
            return n
        }

        function y(t, e) {
            var i, n, o = 0;
            if (t)
                for (i = 0; i < t.dataSources().length; i++) n = t.dataSources()[i], n.metaInfo && n.metaInfo() && n.metaInfo().id === e.id && o++;
            return o
        }

        function w(t, e) {
            var i, n;
            if (!e) return t;
            for (i in t.styles) n = t.styles[i].color, n && (t.styles[i].color = b(n, e));
            return t
        }

        function b(t, e) {
            var i, n, o;
            return t = new tt(t), i = et(t.r, t.g, t.b), n = i[0] + .05 * e, i[0] = n - Math.floor(n), o = it(i[0], i[1], i[2]), t.r = o[0], t.g = o[1], t.b = o[2], t.toHex()
        }

        function S(t, e, n, s) {
            var a, l, c, h, d, u, p, f, _ = i(132);
            this._titleCache = {}, this._resolvedSymbols = {}, this._priceAxisViewsBase = [], this._paneViews = [], this._hlinesPriceAsisViews = [], this._horizlinesPriceAsisViews = [], F.call(this, t), this.m_data = new lt, this._graphics = new j(s), this._plotOffsets = {}, this._plotOffsetsMetaInfoOverride = {}, this._model = t, this._chartApi = t._chartApi, this._series = n, this._numericFormatter = new at, this._metaInfo = s, this._properties = e, this._properties.listeners().subscribe(this, S.prototype.changeStyles), this._properties.visible.listeners().subscribe(this, S.prototype.visibleChanged), this._properties.visible.listeners().subscribe(this, this.processHibernate);
            for (a in this._metaInfo.graphics)
                for (l in this._metaInfo.graphics[a]) c = this._properties.graphics[a][l], c.visible && c.visible.listeners().subscribe(this, S.prototype.processHibernate);
            if (this._showStudyArgumentsProperty = this.model().properties().paneProperties.legendProperties.showStudyArguments, this._turnaroundCounter = 1, this._turnaround = "st" + this._turnaroundCounter, this._status = "", this._plotFields = [], h = this.metaInfo().plots)
                for (d = 0, u = h.length; u > d; d++) l = h[d].id, this._plotFields.push(l);
            this.clearData(), this._studyModified = !1, this._tagsChanged = new o, this.createViews(), p = this, this._handler = function(t) {
                p.onData(t)
            }, this._createFormatter(), p = this, this._properties.precision.listeners().subscribe(null, function() {
                p._createFormatter(), p._model.invalidate(new G(G.FULL_UPDATE))
            }), this._showStudyArgumentsProperty.listeners().subscribe(null, function() {
                p._titleCache = {}
            }), this._properties.description.listeners().subscribe(null, function() {
                p._titleCache = {}
            }), this._properties.shortDescription && this._properties.shortDescription.listeners().subscribe(null, function() {
                p._titleCache = {}
            }), r.enabled("update_study_formatter_on_symbol_resolve") && t.mainSeries().onSymbolResolved().subscribe(this, S.prototype._createFormatter), p = this, f = {}, this._simplePlotsCount = s.plots.filter(function(t, e) {
                if (p.isLinePlot(e)) return !0;
                if (p.isOHLCSeriesPlot(e)) {
                    var i = p.metaInfo().plots[e].target;
                    return f[i] ? !1 : (f[i] = i, !0)
                }
                return !1
            }).length, this._properties.showInDataWindow.listeners().subscribe(t, _.prototype.fullUpdate), this.hasBarColorer() && this._properties.visible.listeners().subscribe(t.mainSeries(), TradingView.Series.prototype.invalidateBarStylesCache)
        }
        var T = i(75).StudyBarColorer,
            x = i(76).HorzLineRenderer,
            C = i(169),
            P = C.BandPaneView,
            k = C.BandBackgroundPaneView,
            I = C.HlineFillPaneView,
            E = i(170),
            L = i(171),
            V = L.StudyPaneView,
            M = L.StudyBackgroundPaneView,
            A = L.StudyPlotShapesPaneView,
            D = L.StudyPlotCharsPaneView,
            O = L.StudyPlotArrowsPaneView,
            R = L.StudyPlotBarsPaneView,
            B = L.StudyPlotCandlesPaneView,
            z = i(172),
            N = z.PlotFillPaneView,
            H = z.AreaBackgroundPaneView,
            F = i(80).PriceDataSource,
            W = i(118),
            U = i(173).StudyDataWindowView,
            q = i(135),
            Y = i(67),
            j = i(174),
            G = i(104),
            X = i(52),
            K = i(109),
            Q = i(126),
            J = i(175),
            Z = i(61),
            tt = Z.RGBColor,
            et = Z.rgbToHsl,
            it = Z.hslToRgb,
            nt = i(81).DefaultProperty,
            ot = i(83),
            rt = ot.PriceFormatter,
            st = ot.VolumeFormatter,
            at = ot.NumericFormatter,
            lt = i(124),
            ct = i(125),
            ht = i(95).StudyConsts;
        a.prototype.update = function() {
            this._invalidated = !0
        }, a.prototype.updateImpl = function() {
            this._visible = !1;
            var t = this._study.lastValueData(this._plotName, !0);
            t.noData || (this._visible = !0, this._points = [new e.Point(0, t.coordinate)], this._color = t.color)
        }, a.prototype.renderer = function() {
            this._invalidated && (this.updateImpl(), this._invalidated = !1);
            var t = {};
            return t.points = this._points, t.color = this._color, t.linewidth = this._study.properties().styles[this._plotName].linewidth.value(), t.linestyle = CanvasEx.LINESTYLE_DOTTED, t.hitTestResult = Y.REGULAR, t.visible = this._visible, new x(t)
        }, inherit(S, F), TradingView.Study = S, i(220), S.prototype.lastValueData = function(t, e, i) {
            var n, o, r, s, a, l, c, h, d, u, p, f, _, g, m, v, y, w, b, S = {
                noData: !0
            };
            if (this._model.timeScale().isEmpty() || null == this.priceScale() || this.priceScale().isEmpty() || this.data().isEmpty()) return S;
            if (n = this._model.timeScale().visibleBars(), n.isEmpty()) return S;
            if (!this.properties().visible.value()) return S;
            if (o = this.properties().styles, r = this.properties().ohlcPlots, o && o[t] && (s = o[t]), r && r[t] && (s = r[t]), !s || !s.visible.value()) return S;
            if (a = this.offset(t), l = this.nearestIndex(n.lastBar() - a, TradingView.SEARCH_NEAREST_LEFT), null == l || void 0 === l) return S;
            for (h = this.metaInfo().plots, c = 0; c < h.length && !(h[c].id === t || this.isOHLCClosePlot(c) && h[c].target === t); c++);
            if (d = e ? this.data().last().value : this.data().valueAt(l), !d || !isNumber(d[c + 1])) return S;
            for (u = {
                noData: !1
            }, p = null, f = null, g = 0; g < h.length; g++) h[g].target === t && (this.isSelfColorerPlot(g) || this.isOHLCColorerPlot(g)) && (p = g, f = this.metaInfo().palettes[h[g].palette], _ = this.properties().palettes[h[g].palette]);
            if (m = d[c + 1], i && (u.price = m), this.priceScale().properties().percentage.value()) {
                if (v = this.firstValue(!0), !v) return S;
                m = this.priceScale().priceRange().convertToPercent(m, v)
            }
            return u.text = this.priceScale().formatter().format(m), y = s.color.value(), p && d.length > p + 1 ? (w = d[p + 1], void 0 !== w && null !== w ? (b = f.valToIndex ? f.valToIndex[w] : w, u.color = _.colors[b].color.value()) : u.color = y) : u.color = y, u.floatCoordinate = this.priceScale().priceToCoordinate(m, !0), u.coordinate = Math.round(u.floatCoordinate), u.item = d, u
        }, S.prototype.series = function() {
            return this._series
        }, S.prototype.model = function() {
            return this._model
        }, S.prototype.clearData = function() {
            this.m_data = new lt(this._plotFields), this._graphics = new j(this._metaInfo), this._plotOffsets = {}
        }, S.prototype.onTagsChanged = function() {
            return this._tagsChanged
        }, S.prototype.properties = function() {
            return this._properties
        }, S.prototype.state = function(t) {
            var e, i, n, o, r = TradingView.className(this.constructor),
                s = {
                    type: r,
                    id: this.id(),
                    state: this.properties().state(),
                    zorder: this.zorder()
                };
            for (this.metaInfo() instanceof ct ? s.metaInfo = this.metaInfo().state() : (s.metaInfo = $.extend({}, this.metaInfo()), s.metaInfo.id = ct.parseIdString(s.metaInfo.id + (s.metaInfo.version ? "-" + s.metaInfo.version : "")).fullId), t && (s.data = this.m_data.state(), s.data.symbols = this._resolvedSymbols, s.data.graphics = this._graphics.graphics(), s.data.plotOffsets = this._plotOffsets), this.ownerSource() && (s.ownerSource = this.ownerSource().id()), e = 0; e < this._metaInfo.inputs.length; e++) "bar_time" === this._metaInfo.inputs[e].type && (i = this._metaInfo.inputs[e].id, n = s.state.inputs[i], 0 > n && (o = this._rightOffsetToUnixTime(-n), s.state.inputs[i] = o && o >= 0 ? o : 0));
            return s
        }, S.prototype.stateForAlert = function() {
            var t = this,
                e = this._metaInfo,
                i = this.state().state.inputs,
                n = [ht.PLOT_TYPE_LINE, ht.PLOT_TYPE_SHAPES, ht.PLOT_TYPE_CHARS, ht.PLOT_TYPE_ARROWS, ht.PLOT_TYPE_OHLC_OPEN, ht.PLOT_TYPE_OHLC_HIGH, ht.PLOT_TYPE_OHLC_LOW, ht.PLOT_TYPE_OHLC_CLOSE],
                o = e.plots.map(function(t, e) {
                    return t.pinePlotIndex = e, t
                }).filter(function(t) {
                    return -1 !== n.indexOf(t.type)
                }).map(function(i) {
                    var n = {
                        id: i.id,
                        type: i.type,
                        pinePlotIndex: i.pinePlotIndex,
                        offset: t.offset(i.id)
                    };
                    return e.styles && void 0 !== e.styles[i.id] && (n.title = e.styles[i.id].title || ""), i.target && e.ohlcPlots && e.ohlcPlots[i.target] && (n.ohlcTitle = e.ohlcPlots[i.target].title), n
                });
            return {
                id: this.id(),
                uniqueId: this.uniqueId(),
                type: TradingView.className(this.constructor),
                title: this.title(),
                shortDescription: e.shortDescription || "Study",
                fullId: e.fullId,
                isTVScript: e.isTVScript,
                plots: o,
                inputs: i,
                alerts: e.alerts,
                callStudyArgs: g(i, e)
            }
        }, S.prototype.uniqueId = function() {
            var t = this.inputsForAlert();
            return t = JSON.stringify(t).replace(/\W/g, ""), this.id() + "|" + t
        }, S.prototype.isSavedInStudyTemplates = function() {
            for (var t = 0; t < this._metaInfo.inputs.length; t++)
                if ("bar_time" === this._metaInfo.inputs[t].type) return !1;
            return !0
        }, S.prototype.restoreData = function(t) {
            this.m_data.restoreState(t), this._resolvedSymbols = t.symbols, this._graphics.setGraphics(t.graphics), this._postProcessGraphics(), this._plotOffsets = t.plotOffsets
        }, S.prototype.restart = function() {
            this.clearData(), this._restarting = !0, r.enabled("stop_study_on_restart") && this.stop(), this._clearLoadingTimer(), this.start()
        }, S.prototype._clearLoadingTimer = function() {
            this.loadingTimer && (clearTimeout(this.loadingTimer), this.loadingTimer = null)
        }, S.prototype.stop = function() {
            this._clearLoadingTimer(), this._chartApi && this._chartApi.connected() && this._studyId && this._chartApi.removeStudy(this._studyId, this._handler), r.enabled("update_study_formatter_on_symbol_resolve") && this._model.mainSeries().onSymbolResolved().unsubscribe(this, S.prototype._createFormatter), this._studyId = null, this.clearData(), this._unsubscribeExtendedHours(), this.recalculate()
        }, S.prototype._resolveSymbol = function(t) {
            var e = function n(e, i) {
                    this._chartApi.resolveSymbol(this._makeNextSymbolId(), e, function(e) {
                        switch (e.method) {
                            case "symbol_resolved":
                                this._resolvedSymbols[t] = e.params[1], this._titleCache = {}, i.resolve(t);
                                break;
                            case "symbol_error":
                                if ("permission denied" === e.params[1] && e.params[2]) switch (e.params[2]) {
                                    case TradingView.Series.PD_REASON_EXTENDED_HOURS:
                                        break;
                                    case TradingView.Series.PD_REASON_SYMBOL:
                                        if (e.params[3]) return void n(e.params[3], i);
                                        break;
                                    default:
                                        return void n(e.params[2], i)
                                }
                                i.reject(t)
                        }
                    }.bind(this))
                }.bind(this),
                i = $.Deferred();
            return e(t, i), i.promise()
        }, S.prototype._allSymbolsAreResolved = function() {
            var t, e, i, n, o = $.Deferred(),
                r = [];
            for (t = 0; t < this._metaInfo.inputs.length; t++) "symbol" === this._metaInfo.inputs[t].type && (e = this._metaInfo.inputs[t].id, i = this._properties.inputs[e].value(), this._resolvedSymbols[i] || (n = this._resolveSymbol(i), r.push(n)));
            return r.length > 0 ? $.when.apply($, r).done(function() {
                0 !== this._studyId && this.stop(), this.start(), o.resolve("All symbols are resolved now")
            }.bind(this)).fail(function(t) {
                this._status = $.t("Invalid Symbol"), this.stop(), this._model.updateSource(this), o.reject("Invalid symbol, " + t)
            }.bind(this)) : o.resolve("There are no symbols to resolve"), o.promise()
        }, S.prototype._allInputsAreValid = function() {
            var t, e, i;
            for (t = 0; t < this._metaInfo.inputs.length; t++)
                if ("bar_time" === this._metaInfo.inputs[t].type && (e = this._metaInfo.inputs[t].id, i = this._properties.inputs[e].value(), void 0 === i || null == i)) return !1;
            return !0
        }, S.prototype.sourceId = function() {
            return this._studyId
        }, S.prototype._debugId = function() {
            var t = [];
            return this._studyId && t.push(this._studyId), t.push(this._metaInfo.fullId), t.push(this._metaInfo.description), JSON.stringify({
                study: t
            })
        }, S.prototype.isStarted = function() {
            return !!this._studyId
        }, S.prototype.isVisible = function() {
            var t, e, i, n;
            if (!this.properties().visible.value()) return !1;
            if (this._metaInfo.plots.length > 0)
                for (t = 0; t < this._metaInfo.plots.length; t++)
                    if (e = this.properties().plots[t].visible, !e || e.value()) return !0;
            for (i in this._metaInfo.graphics)
                for (n in this._metaInfo.graphics[i])
                    if (e = this.properties().graphics[i][n], !e.visible || e.visible.value()) return !0;
            return !!this._metaInfo.isTVScriptStrategy
        }, S.prototype.start = function() {
            var t = TradingView.isFeatureEnabled("tv5176_HibernateStudies") && !this.isVisible();
            this._chartApi && this._chartApi.connected() && !t && this._allSymbolsAreResolved().done(function(t) {
                this._startAfterSymbolsResolved()
            }.bind(this)).fail(function(t) {
                TradingView.logNormalChart("ERROR: " + this._debugId() + " start failed, " + t)
            }.bind(this))
        }, S.prototype._startAfterSymbolsResolved = function() {
            var t, e;
            if ((!this.isStarted() || this._restarting) && (this._studyId = S.makeNextStudyId(), this._restarting = !1, this._allInputsAreValid())) {
                if (this._inputs = this.inputs(), t = this._metaInfo.id, "MA" === this._metaInfo.id) switch (e = this._inputs[2]) {
                    case "exp":
                        t = "MAExp@tv-basicstudies";
                        break;
                    case "simple":
                        t = "MASimple@tv-basicstudies";
                        break;
                    case "weighted":
                        t = "MAWeighted@tv-basicstudies";
                        break;
                    case "volume weighted":
                        t = "MAVolumeWeighted@tv-basicstudies"
                }
                t += "-" + (this._metaInfo.version || "1"), t = ct.cutDollarHash(t), (t.startsWith("Script@tv-scripting") || t.startsWith("StrategyScript@tv-scripting") || t.startsWith("ESD@tv-scripting")) && (t += "!"), this._chartApi.createStudy(this._studyId, this._turnaround, this._series._seriesId, t, this._inputs, this._handler), this._subscribeExtendedHours()
            }
        }, S._nextSymbolId = 0, S.prototype._makeNextSymbolId = function() {
            return S._nextSymbolId++, "ss_" + S._nextSymbolId
        }, S._nextStudyId = 0, S.makeNextStudyId = function() {
            return S._nextStudyId++, "st" + S._nextStudyId
        }, S.prototype._rightOffsetToUnixTime = function(t) {
            var e = null;
            return this._series.bars().size() >= t && (e = this._series.bars()._valueAt(this._series.bars().lastIndex() - t)[TradingView.TIME_PLOT]), e
        }, S.prototype.getSymbolString = function(t) {
            return this._series && this._series.extendedHours.value() ? "=" + JSON.stringify({
                symbol: t,
                session: "extended"
            }) : t
        }, S.prototype.inputsForGUI = function() {
            return this.inputs({
                symbolsForDisplay: !0,
                skipHiddenInputs: !0,
                skipFakeInputs: !1
            })
        }, S.prototype.inputsForAlert = function() {
            var t = this.offset(),
                e = this.inputs({
                    symbolsForDisplay: !0,
                    symbolsForChartApi: !0,
                    skipHiddenInputs: !1,
                    skipFakeInputs: !1
                });
            return t && e.push(t), e
        }, S.prototype.inputs = function(t) {
            var e = {
                symbolsForDisplay: !1,
                symbolsForChartApi: !0,
                skipHiddenInputs: !1,
                skipFakeInputs: !0
            };
            return TradingView.merge(e, t), this._buildInputs(e)
        }, S.prototype._buildInputs = function(t) {
            var e, i, n, o;
            assert(!!t, "options not set"), e = {};
            try {
                e = this._prepareInputs(t)
            } catch (r) {
                TradingView.logWarn("Failed to prepare study inputs: " + r)
            }
            return !t.symbolsForDisplay && this._metaInfo.isTVScript ? 0 === Object.keys(e).length || this._metaInfo.isTVScriptStub ? [this._metaInfo.defaults.inputs.text] : (i = this._metaInfo.defaults.inputs.text, n = K.patchILTemplate(i, this._metaInfo, e), [n]) : t.asObject ? (o = {}, Object.keys(e).forEach(function(t) {
                null != e[t] && (o[t] = e[t])
            }), o = $.isEmptyObject(o) ? null : o) : (o = [], Object.keys(e).forEach(function(t) {
                null != e[t] && o.push(e[t])
            }), o)
        }, S.prototype._prepareInputs = function(t) {
            var e, i, n, o;
            for (assert(!!t, "options not set"), e = {}, i = 0; i < this._metaInfo.inputs.length; i++) n = this._metaInfo.inputs[i], n.isFake && t.skipFakeInputs && !this._metaInfo.isTVScript || n.isHidden && t.skipHiddenInputs || "bool" === n.type && t.skipHiddenInputs && r.enabled("dont_show_boolean_study_arguments") || (o = this._prepareInput(n, t), e[n.id] = o);
            return e
        }, S.prototype._prepareInput = function(t, e) {
            var i, n, o, r, s = t.id;
            return "symbol" === t.type ? (i = this._properties.inputs[s].value(), e && e.symbolsForDisplay ? this._resolvedSymbols && this._resolvedSymbols[i] && (i = this._resolvedSymbols[i].name + ", " + this._resolvedSymbols[i].exchange) : (this._resolvedSymbols && this._resolvedSymbols[i] && (n = this._resolvedSymbols[i], i = n.ticker || n.full_name), e && e.symbolsForChartApi && (i = this.getSymbolString(i))), i) : "bar_time" === t.type ? (o = this._properties.inputs[s].value(), 0 > o && (r = this._rightOffsetToUnixTime(-o), o = r && r >= 0 ? r : o), o) : this._properties.inputs[s].value()
        }, S.prototype._changeInputs = function(t) {
            this._studyId && this._chartApi.connected() ? (this._turnaround = "st" + ++this._turnaroundCounter, this._allInputsAreValid() ? this._allSymbolsAreResolved().done(function(e) {
                this._studyModified = !0, this._chartApi.modifyStudy(this._studyId, this._turnaround, t, this._handler)
            }.bind(this)).fail(function(t) {
                TradingView.logNormalChart("ERROR: " + this._debugId() + " _changeInputs: cannot modify study, " + t)
            }.bind(this)) : this.stop()) : (this.stop(), this.start()), this._inputs = t, this._tagsChanged.fire(), this._titleCache = {}
        }, S.prototype.changeStyles = function() {
            var t, e;
            if (this._inputs) {
                for (t = this.inputs(), e = 0; e < t.length; e++)
                    if (t[e] !== this._inputs[e]) {
                        this._changeInputs(t);
                        break
                    }
            } else this._chartApi && this._chartApi.connected() && this.restart();
            this._metaInfo.isTVScript && (this._pinePatchProps(), this._titleCache = {}), this.hasBarColorer() && this._model.mainSeries().invalidateBarStylesCache(), "Overlay@tv-basicstudies" === this._metaInfo.name && this.invalidateBarStylesCache(), this.createViews(), this.recalculate(!0), this.updateAllViews()
        }, S.prototype._isModifiedStudyInputs = function(t) {
            if (void 0 === this._oldStudyInputs) return this._oldStudyInputs = t, !0;
            var e = Object.keys(this._oldStudyInputs);
            return assert(e.length === Object.keys(t).length, "keys quantity should be equal"), e.forEach(function(e) {
                assert(t.hasOwnProperty(e), "key '" + e + "' should existing in studyInputs"), this._oldStudyInputs[e] !== t[e] && (this._oldStudyInputs = t)
            }, this), this._oldStudyInputs === t
        }, S.prototype._pinePatchProps = function() {
            var t, e, i = {
                    symbolsForDisplay: !1,
                    symbolsForChartApi: !0,
                    skipHiddenInputs: !1,
                    skipFakeInputs: !0
                },
                n = this._prepareInputs(i);
            this._isModifiedStudyInputs(n) && (t = Q.patchPropertiesAsync(this._properties, this._metaInfo, n), e = this._allSymbolsAreResolved(), $.when(t, e).done(function(t, e) {
                this.createViews(), this.recalculate(!0), this.updateAllViews()
            }.bind(this)).fail(function(t) {
                TradingView.logNormalChart("ERROR: " + this._debugId() + " _pinePatchProps failed, reason: " + t)
            }.bind(this)))
        }, S.prototype.visibleChanged = function() {
            this._series instanceof TradingView.Series && this._series.invalidateBarColorerCache()
        }, S.prototype.invalidateBarStylesCache = function() {
            var t, e, i = this.m_data;
            0 !== i.size() && (t = +i.first(), e = +i.last() + 1, i.range(t, e).each(function(t, e) {
                e[TradingView.STYLE_PLOT] = null
            }))
        }, S.prototype.processHibernate = function() {
            TradingView.isFeatureEnabled("tv5176_HibernateStudies") && (!this._studyId && this.isVisible() && this.start(), this._studyId && !this.isVisible() && this.stop())
        }, S.prototype.lastPriceLabelFixedCoordinate = function(t) {
            var e = this._priceAxisViewsCache[t];
            return e._fixedCoordinate
        }, S.prototype.priceLabelText = function(t) {
            var e, i, n, o;
            return 1 === this._simplePlotsCount ? this._metaInfo.shortDescription : (e = this._metaInfo.styles, i = this._metaInfo.ohlcPlots, e && e[t] && (n = e[t]), i && i[t] && (n = i[t]), o = n.title, this._metaInfo.is_price_study ? this._metaInfo.shortDescription + ":" + o : o)
        }, S.prototype.createPlotLabels = function(t) {
            for (var e = 0; e < t.length; e++) this._paneViews.push(new W(this._model, this, t[e], "priceLabelText", "showStudyPlotLabels"))
        }, S.prototype.createViews = function() {
            var t, e, i, n, o, r, s, l, c, h, d, u, p;
            if (this._priceAxisViewsBase = [], this._paneViews = [], t = {}, this._priceAxisViewsCache = {}, e = [], this.metaInfo().plots)
                for (i = 0; i < this.metaInfo().plots.length; i++)
                    if (!(this.isSelfColorerPlot(i) || this.isBarColorerPlot(i) || this.isBarColorerPlot(i) || this.isOHLCColorerPlot(i)))
                        if (n = this.metaInfo().plots[i].id, this.isBgColorerPlot(i)) this._paneViews.push(new M(this, this._series, this._model, n));
                        else if (this.isPlotShapesPlot(i)) this._paneViews.push(new A(this, this._series, this._model, n));
                        else if (this.isPlotCharsPlot(i)) this._paneViews.push(new D(this, this._series, this._model, n));
                        else if (this.isPlotArrowsPlot(i)) this._paneViews.push(new O(this, this._series, this._model, n));
                        else if (this.isOHLCSeriesPlot(i)) {
                            if (o = this.metaInfo().plots[i].target, t[o]) continue;
                            t[o] = o, this.isOHLCBarsPlot(i) ? this._paneViews.push(new R(this, this._series, this._model, o)) : this.isOHLCCandlesPlot(i) && this._paneViews.push(new B(this, this._series, this._model, o)), r = new E(this, this._model, o), this._priceAxisViewsCache[o] = r, this._priceAxisViewsBase.push(r), e.push(o)
                        } else r = new E(this, this._model, n), this._priceAxisViewsCache[n] = r, this._priceAxisViewsBase.push(r), this._paneViews.push(new V(this, this._series, this._model, n)), this.properties().styles[n].trackPrice.value() && this._paneViews.push(new a(this, this._series, this._model, n)), e.push(n);
            if (this._properties.bands)
                for (i = 0; i < this._properties.bands.childCount(); i++) this._properties.bands[i].visible.value() && this._paneViews.push(new P(this._properties.bands[i], this));
            this._properties.bandsBackground && this._paneViews.push(new k(this)), s = [], this.metaInfo().graphics && (s = Object.keys(this.metaInfo().graphics), s.sort(function(t, e) {
                return S.graphicsZOrderPriority(t) - S.graphicsZOrderPriority(e)
            }));
            for (l in s) c = s[l], h = "_paneView" + c, d = "StudyPaneView_" + c, TradingView.Study[d] && (this[h] = new TradingView.Study[d](this, this._model), this._paneViews.push(this[h])), this._dataWindowView || "hhists" !== c || (this._dataWindowView = new TradingView.StudyHHistsDataWindowView(this, this._model));
            if (this._properties.areaBackground && this._paneViews.push(new H(this)), this._properties.filledAreas && this._metaInfo.filledAreas)
                for (i = 0; i < this._metaInfo.filledAreas.length; ++i) u = this._metaInfo.filledAreas[i], p = this._properties.filledAreasStyle[u.id], u.type === ct.FilledArea.TYPE_PLOTS ? this._paneViews.push(new N(this, u, p)) : u.type === ct.FilledArea.TYPE_HLINES ? this._paneViews.push(new I(this, u, p)) : TradingView.logWarn("Unsupported filledArea type: " + u.type);
            this.createPlotLabels(e), this._dataWindowView || (this._dataWindowView = new U(this, this._model)), this._statusView || (this._statusView = new q(this, this._model.properties())), this._priceAxisViews = [].concat(this._priceAxisViewsBase, this._hlinesPriceAsisViews, this._horizlinesPriceAsisViews)
        }, S.prototype.recalculate = function(t) {
            var e = this._model.paneForSource(this);
            this._model.recalculatePane(e, t), this._model.updateSource(this)
        }, S.prototype.data = function() {
            return this.m_data
        }, S.prototype.metaInfo = function() {
            return this._metaInfo
        }, S.prototype.status = function() {
            return this._status
        }, S.prototype.title = function(t, e) {
            var i, n, o, r, s = JSON.stringify([t, e]);
            return this._titleCache[s] ? this._titleCache[s] : (i = t ? this._metaInfo.shortDescription || this._properties.shortDescription && this._properties.shortDescription.value() || "Study" : this._metaInfo.description || this._properties.description && this._properties.description.value() || "Study", i = $.t(i), n = this._showStudyArgumentsProperty.value(), o = this.inputsForGUI() || [], r = this, e && "object" == typeof e || (e = {}), n && o.length > 0 && (o = o.map(function(t) {
                var i = isNumber(t) ? r._numericFormatter.format(t) : t;
                return e[i] && (i = e[i]), i
            }), i += " (" + o.join(", ") + ")"), this._titleCache[s] = i, i)
        }, S.prototype.graphics = function() {
            return this._graphics.graphics()
        }, S.prototype._checkTurnaround = function(t) {
            return t === this._turnaround || t === this._model.mainSeries()._turnaround || t === this._model.mainSeries()._turnaround + "_" + this._turnaround
        }, S.prototype._makeJSONForNSData = function(t, e) {
            var i, n = "" !== t.params.nonseries.d ? TradingView.parseJSONorNot(t.params.nonseries.d) : e || "";
            return n.dataCompressed && (i = new J(n.dataCompressed, {
                base64: !0
            }).file("").asText(), delete n.dataCompressed, n.data = TradingView.parseJSONorNot(i)), n.graphicsCmdsCompressed && (i = new J(n.graphicsCmdsCompressed, {
                base64: !0
            }).file("").asText(), delete n.graphicsCmdsCompressed, n.graphicsCmds = TradingView.parseJSONorNot(i)), n
        }, S.prototype.onData = function(t) {
            var e, i, n, o, r = this;
            switch (t.method) {
                case "study_loading":
                    this._status = $.t("loading..."), this._failed = !1, this._statusView.update(), this._model.updateSource(this), this._clearLoadingTimer(), -1 === ["Plot splits", "Plot earnings", "Plot dividends"].indexOf(r._metaInfo.description) && (r._loadingStartTime = (new Date).getTime(), r.loadingTimer = setTimeout(function() {
                        var t = {
                            chartSession: r._chartApi._sessionid,
                            studyName: r._metaInfo.description,
                            arguments: r.inputs()
                        };
                        X.sendReport("study_loading", t)
                    }, 15e3));
                    break;
                case "study_error":
                    this._clearLoadingTimer(), delete this._loadingStartTime, this._failed = !0, this.clearData(), t.params[2] ? this._status = $.t(t.params[2].split(":", 2)[0]) : this._status = "", -1 === ["Sessions"].indexOf(r._metaInfo.description) && X.sendReport("study_error", {
                        chartSession: r._chartApi._sessionid,
                        studyName: r._metaInfo.description,
                        arguments: r.inputs()
                    }), this._statusView.update(), this._model.updateSource(this);
                    break;
                case "study_completed":
                    if (!this._checkTurnaround(t.params[1])) return;
                    e = "chartSession:" + r._chartApi._sessionid, TradingView.logDebugChart(e + ", Study " + this._metaInfo.description + " loading took " + ((new Date).getTime() - this._loadingStartTime) + " ms"), this._clearLoadingTimer(), delete this._loadingStartTime, this._status = "", this._statusView.update(), i = this._model.paneForSource(this), this._model.recalculatePane(i), this._updateSources(), this._model.invalidate(new G(G.FULL_UPDATE));
                    break;
                case "study_deleted":
                    break;
                case "data_update":
                    if (!this._checkTurnaround(t.params.turnaround)) return;
                    r._clearLoadingTimer(), this._studyModified && (this.clearData(), this._studyModified = !1), n = 0 === this.m_data.size() && this._metaInfo.plots.length > 0, assert(!!t.params.nonseries, "data.params.nonseries is missing"), t.params.nonseries.d = this._makeJSONForNSData(t), this._processPlotOffsets(t.params), this.transformData(t.params.plots), o = this._mergeData(t.params.plots).earliestRow, this.hasBarColorer() && (null !== o ? this._model.mainSeries().invalidateBarStylesCache(o.index) : TradingView.logNormalChart("ERROR: No earliestRow in studies plots, " + this._debugId())), this._graphics.process(t.params.nonseries), this._postProcessGraphics(), i = this._model.paneForSource(this), this._model.recalculatePane(i, n), this._updateSources()
            }
        }, S.prototype.transformData = function(t) {}, S.prototype._updateSources = function() {
            this._model.updateSource(this), this.hasBarColorer() && this._model.updateSource(this._model.mainSeries())
        }, S.processPlotOffsets = function(t, e) {
            if (!e.nonseries || "nochange" !== e.nonseries.indexes) {
                var i = e.nonseries.d;
                if (!i || !i.indexes_replace) return i && i.offsets ? void(t._plotOffsets = i.offsets) : void(t._plotOffsets = {})
            }
        }, S.prototype._processPlotOffsets = function(t) {
            S.processPlotOffsets(this, t)
        }, S.prototype._mergeData = function(t) {
            return this.m_data.merge(t)
        }, S.prototype._postProcessGraphics = function() {
            var t = this,
                e = function(e) {
                    var i, n, o, r = t._graphics.graphics(),
                        s = [];
                    if (r && r[e])
                        for (o = r[e], i = 0; i < o.length; i += 1)
                            if (o[i].data)
                                for (n = 0; n < o[i].data.length; n += 1) s.push(new S.StudyPriceAxisView_hlines(t, t._model, o[i].data[n], o[i].styleId, e));
                    return s
                };
            this._hlinesPriceAsisViews = e("hlines"), this._horizlinesPriceAsisViews = e("horizlines"), this._priceAxisViews = [].concat(this._priceAxisViewsBase, this._hlinesPriceAsisViews, this._horizlinesPriceAsisViews)
        }, S.prototype.firstValue = function(t) {
            var e, i, n, o, r;
            return this._metaInfo.is_price_study && "Compare@tv-basicstudies" !== this._metaInfo.id ? this._series.data().firstValue() : (e = this._model.timeScale().visibleBars(), i = e.firstBar(), n = e.lastBar(), 0 === this.m_data.size() ? null : (r = this, this.m_data.range(i, n).each(function(e, i) {
                var n, s, a;
                for (n = 1; n < i.length; ++n)
                    if (!r.isSelfColorerPlot(n - 1) && (s = r._metaInfo.plots[n - 1].id, a = r.properties().styles[s], a.visible && a.visible.value() && !(t && Math.abs(i[n]) < 1e-10 || void 0 === i[n] || null === i[n] || o))) return o = i[n], !0
            }), o))
        }, S.offset = function(t, e) {
            var i = 0;
            return t._plotOffsets && void 0 !== t._plotOffsets[e] && (i += t._plotOffsets[e]), void 0 !== t._plotOffsetsMetaInfoOverride[e] ? i += t._plotOffsetsMetaInfoOverride[e] : t.properties().offsets && void 0 !== t.properties().offsets[e] && (i += t.properties().offsets[e].val.value()), t.properties().offset && (i += t.properties().offset.val.value()), i
        }, S.prototype.offset = function(t) {
            return S.offset(this, t)
        }, S.prototype.priceRange = function(t, e) {
            var i, n, o, r, a, l, c, h, d, u, p, f, _, g, m, v, y, w, b, S, T;
            if (!TradingView.isInteger(t)) return void TradingView.logDebugChart("Study.priceRange: incorrect startBar");
            if (!TradingView.isInteger(e)) return void TradingView.logDebugChart("Study.priceRange: incorrect endBar");
            if (0 === this.m_data.size()) return null;
            if (i = null, n = this, o = n._metaInfo, 0 === o.plots.length) return null;
            for (a = [], c = 0; c < o.plots.length; ++c)
                if (!(n.isSelfColorerPlot(c) || n.isTextColorerPlot(c) || n.isBarColorerPlot(c) || n.isBgColorerPlot(c) || n.isOHLCColorerPlot(c)) && (h = o.plots[c].id, n.isOHLCSeriesPlot(c) ? (u = o.plots[c].target, d = n.properties().ohlcPlots[u]) : d = n.properties().styles[h], d.visible.value() && (l = null, d.location && (l = d.location.value()), r || (p = [CanvasEx.MARKLOC_ABSOLUTE, CanvasEx.MARKLOC_TOP, CanvasEx.MARKLOC_BOTTOM].indexOf(l) < 0, f = n.isPlotShapesPlot(c) || n.isPlotCharsPlot(c), r = f && p || n.isPlotArrowsPlot(c)), _ = n.isLinePlot(c) || (n.isPlotShapesPlot(c) || n.isPlotCharsPlot(c)) && d.location.value() === CanvasEx.MARKLOC_ABSOLUTE || n.isOHLCSeriesPlot(c)))) {
                    if (g = {
                            index: c + 1,
                            offset: n.offset(h)
                        }, m = n.properties().styles[h].plottype.value(), !n.properties().skipHistogramBaseOnAutoScale && [ht.PLOT_HISTOGRAM, ht.PLOT_COLUMNS, ht.PLOT_AREA].indexOf(m) >= 0) {
                        if (v = n.properties().styles[h].histogramBase.value(), !isNumber(v)) continue;
                        g.baseValue = v
                    }
                    a.push(g)
                }
            if (y = n.m_data.minMaxOnRange2(t, e, a), r && (a = [{
                    index: TradingView.LOW_PLOT,
                    offset: 0
                }, {
                    index: TradingView.HIGH_PLOT,
                    offset: 0
                }], w = n.series().data().bars().minMaxOnRange2(t, e, a), y.min = null == y.min || void 0 === y.min ? w.min : Math.min(y.min, w.min), y.max = null == y.max || void 0 === y.max ? w.max : Math.max(y.max, w.max)), null !== y.min && (i = new s(y.min, y.max)), o.bands)
                for (c = 0; c < o.bands.length; c++)
                    if (n.properties().bands[c].visible.value()) {
                        if (v = n.properties().bands[c].value.value(), !isNumber(v)) continue;
                        i ? i.apply(v, v) : i = new s(v, v)
                    }
            return i && i.minValue() === i.maxValue() && (b = .005 * i.minValue(), i = new s(i.minValue() - b, i.maxValue() + b)), S = this.priceScale(), S && S.properties().percentage.value() && i ? (T = this.firstValue(), T ? i.convertToPercents(T) : null) : S && S.isLog() && i ? new s(n.priceScale().priceToLogical(i.minValue()), n.priceScale().priceToLogical(i.maxValue())) : i
        }, S.prototype.paneViews = function(t) {
            return this.properties().visible.value() ? this._paneViews : null
        }, S.prototype.dataWindowView = function() {
            return this._dataWindowView
        }, S.prototype.statusView = function() {
            return this._statusView
        }, S.prototype.priceAxisViews = function(t, e) {
            return this._model.paneForSource(this) === t && e === this.priceScale() && (this._model.properties().scalesProperties.showStudyLastValue.value() || this.properties().oldShowLastValue && this.properties().oldShowLastValue.value()) ? this._priceAxisViews : null
        }, S.prototype.isLinePlot = function(t) {
            var e = this._metaInfo.plots[t];
            return e.type === ht.PLOT_TYPE_LINE
        }, S.isSelfColorerPlot = function(t, e) {
            var i = t._metaInfo.plots[e];
            return i.type === ht.PLOT_TYPE_COLORER
        }, S.prototype.isSelfColorerPlot = function(t) {
            return S.isSelfColorerPlot(this, t)
        }, S.prototype.isTextColorerPlot = function(t) {
            var e = this._metaInfo.plots[t];
            return e.type === ht.PLOT_TYPE_TEXT_COLORER
        }, S.prototype.isBarColorerPlot = function(t) {
            var e = this._metaInfo.plots[t];
            return e.type === ht.PLOT_TYPE_BAR_COLORER
        }, S.prototype.isBgColorerPlot = function(t) {
            var e = this._metaInfo.plots[t];
            return e.type === ht.PLOT_TYPE_BG_COLORER
        }, S.prototype.isPlotShapesPlot = function(t) {
            var e = this._metaInfo.plots[t];
            return e.type === ht.PLOT_TYPE_SHAPES
        }, S.prototype.isPlotCharsPlot = function(t) {
            var e = this._metaInfo.plots[t];
            return e.type === ht.PLOT_TYPE_CHARS
        }, S.prototype.isPlotArrowsPlot = function(t) {
            var e = this._metaInfo.plots[t];
            return e.type === ht.PLOT_TYPE_ARROWS
        }, S.prototype.isOHLCBarsPlot = function(t) {
            var e = this._metaInfo.plots[t].target,
                i = this.metaInfo().defaults.ohlcPlots[e];
            return i && this.isOHLCSeriesPlot(t) && i.plottype === ht.OHLC_TYPE_BARS
        }, S.prototype.isOHLCCandlesPlot = function(t) {
            var e = this._metaInfo.plots[t].target,
                i = this.metaInfo().defaults.ohlcPlots[e];
            return i && this.isOHLCSeriesPlot(t) && i.plottype === ht.OHLC_TYPE_CANDLES
        }, S.prototype.isOHLCSeriesPlot = function(t) {
            var e = this._metaInfo.plots[t].type;
            return e === ht.PLOT_TYPE_OHLC_OPEN || e === ht.PLOT_TYPE_OHLC_HIGH || e === ht.PLOT_TYPE_OHLC_LOW || e === ht.PLOT_TYPE_OHLC_CLOSE
        }, S.prototype.isOHLCOpenPlot = function(t) {
            var e = this._metaInfo.plots[t];
            return e.type === ht.PLOT_TYPE_OHLC_OPEN
        }, S.prototype.isOHLCHighPlot = function(t) {
            var e = this._metaInfo.plots[t];
            return e.type === ht.PLOT_TYPE_OHLC_HIGH
        }, S.prototype.isOHLCLowPlot = function(t) {
            var e = this._metaInfo.plots[t];
            return e.type === ht.PLOT_TYPE_OHLC_LOW
        }, S.prototype.isOHLCClosePlot = function(t) {
            var e = this._metaInfo.plots[t];
            return e.type === ht.PLOT_TYPE_OHLC_CLOSE
        }, S.prototype.isOHLCColorerPlot = function(t) {
            var e = this._metaInfo.plots[t];
            return e.type === ht.PLOT_TYPE_OHLC_COLORER
        }, S.prototype.isDataOffsetPlot = function(t) {
            var e = this._metaInfo.plots[t];
            return e.type === ht.PLOT_TYPE_DATAOFFSET
        }, S.prototype.hasBarColorer = function() {
            for (var t = 0; t < this._metaInfo.plots.length; ++t)
                if (this.isBarColorerPlot(t)) return !0;
            return !1
        }, S.prototype.barColorer = function() {
            var t, e, i = null;
            for (t = 0; t < this._metaInfo.plots.length; ++t) this.isBarColorerPlot(t) && (e = new T(this, t), null == i ? i = e : i.pushBackBarColorer(e));
            if (null == i) throw Error("Cannot create BarColorer: study doesn't have a bar_colorer plot!");
            return i
        }, S.prototype.base = function() {
            return "Volume" === this._metaInfo.id ? 1 : 0
        }, S.prototype._createFormatter = function() {
            var t, e, i;
            "default" === this.properties().precision.value() ? this.metaInfo().defaults && (t = parseInt(this.metaInfo().defaults.precision)) : t = parseInt(this.properties().precision.value()), isFinite(t) || (t = -1 !== ["Volume@tv-basicstudies", "VbPVisible@tv-volumebyprice", "VbPSessions@tv-volumebyprice"].indexOf(this._metaInfo.id) ? 0 : 1e4), e = this.series().symbolInfo(), 0 === t ? (i = 0, e && (i = e.volume_precision ? e.volume_precision : e.has_fractional_volume ? 2 : 0), this._formatter = new st(i)) : this._formatter = new rt(Math.pow(10, t)), this.priceScale() && this.priceScale().updateFormatter()
        }, S.prototype.formatter = function() {
            return this._formatter
        }, S.prototype.nearestIndex = function(t, e) {
            if (!TradingView.isInteger(t)) return void TradingView.logDebugChart("Study.nearestIndex: incorrect logicalPoint");
            var i = this._series.data().bars().search(t, e);
            return i ? i.index : void 0
        }, S.prototype.updateAllViews = function() {
            var t;
            for (t = 0; t < this._paneViews.length; t++) this._paneViews[t].update();
            for (this._dataWindowView.update(), this._statusView.update(), t = 0; t < this._priceAxisViews.length; t++) this._priceAxisViews[t].update()
        }, S.prototype.tags = function() {
            return !this._metaInfo || !this._metaInfo.description || this._metaInfo.isTVScriptStub || this._metaInfo.is_hidden_study || this._metaInfo.isTVScript && "tv-scripting" === this._metaInfo.productId ? [] : [this._metaInfo.description]
        }, S.isPointsBasedStudy = function(t) {
            switch (t) {
                case "VbPFixed@tv-volumebyprice":
                case "mtp_tsanalysis@mtp-mtpredictor":
                case "mtp_riskreward@mtp-mtpredictor":
                case "mtp_decisionpoint@mtp-mtpredictor":
                case "mtp_ew_main@mtp-mtpredictor":
                case "mtp_ew_major@mtp-mtpredictor":
                case "mtp_ew_minor@mtp-mtpredictor":
                case "mtp_wpt_down1ora@mtp-mtpredictor":
                case "mtp_wpt_down2orb@mtp-mtpredictor":
                case "mtp_wpt_down3@mtp-mtpredictor":
                case "mtp_wpt_down4@mtp-mtpredictor":
                case "mtp_wpt_down5@mtp-mtpredictor":
                case "mtp_wpt_downc@mtp-mtpredictor":
                case "mtp_wpt_up1ora@mtp-mtpredictor":
                case "mtp_wpt_up2orb@mtp-mtpredictor":
                case "mtp_wpt_up3@mtp-mtpredictor":
                case "mtp_wpt_up4@mtp-mtpredictor":
                case "mtp_wpt_up5@mtp-mtpredictor":
                case "mtp_wpt_upc@mtp-mtpredictor":
                    return !0;
                default:
                    return !1
            }
        }, S.lineToolNameForPointsBasedStudy = function(t) {
            switch (t) {
                case "VbPFixed@tv-volumebyprice":
                    return "LineToolVbPFixed";
                case "RegressionTrend@tv-basicstudies":
                    return "LineToolRegressionTrend";
                case "mtp_tsanalysis@mtp-mtpredictor":
                    return "LineStudyMtpAnalysis";
                case "mtp_riskreward@mtp-mtpredictor":
                    return "LineStudyMtpRiskReward";
                case "mtp_decisionpoint@mtp-mtpredictor":
                    return "LineStudyMtpDecisionPoint";
                case "mtp_ew_main@mtp-mtpredictor":
                    return "LineStudyMtpElliotWaveMain";
                case "mtp_ew_major@mtp-mtpredictor":
                    return "LineStudyMtpElliotWaveMajor";
                case "mtp_ew_minor@mtp-mtpredictor":
                    return "LineStudyMtpElliotWaveMinor";
                case "mtp_wpt_down1ora@mtp-mtpredictor":
                    return "LineStudyMtpDownWave1OrA";
                case "mtp_wpt_down2orb@mtp-mtpredictor":
                    return "LineStudyMtpDownWave2OrB";
                case "mtp_wpt_down3@mtp-mtpredictor":
                    return "LineStudyMtpDownWave3";
                case "mtp_wpt_down4@mtp-mtpredictor":
                    return "LineStudyMtpDownWave4";
                case "mtp_wpt_down5@mtp-mtpredictor":
                    return "LineStudyMtpDownWave5";
                case "mtp_wpt_downc@mtp-mtpredictor":
                    return "LineStudyMtpDownWaveC";
                case "mtp_wpt_up1ora@mtp-mtpredictor":
                    return "LineStudyMtpUpWave1OrA";
                case "mtp_wpt_up2orb@mtp-mtpredictor":
                    return "LineStudyMtpUpWave2OrB";
                case "mtp_wpt_up3@mtp-mtpredictor":
                    return "LineStudyMtpUpWave3";
                case "mtp_wpt_up4@mtp-mtpredictor":
                    return "LineStudyMtpUpWave4";
                case "mtp_wpt_up5@mtp-mtpredictor":
                    return "LineStudyMtpUpWave5";
                case "mtp_wpt_upc@mtp-mtpredictor":
                    return "LineStudyMtpUpWaveC";
                default:
                    throw Error("There is no line tool name, associated with study id " + t)
            }
        }, S.isStudyLineTool = function(t) {
            var e = i(223).StudyLineDataSource,
                n = TradingView[t];
            return "function" == typeof n && n.prototype instanceof e
        }, S.prototype.onExtendedHoursChanged = function() {
            this.restart()
        }, S.prototype.hasSymbolInputs = function() {
            for (var t = this._metaInfo.inputs.length; t--;)
                if ("symbol" === this._metaInfo.inputs[t].type) return !0;
            return !1
        }, S.prototype._subscribeExtendedHours = function() {
            !this._isSubscribedToExtendedHours && this.hasSymbolInputs() && (this._series.extendedHours.listeners().subscribe(this, this.onExtendedHoursChanged), this._isSubscribedToExtendedHours = !0)
        }, S.prototype._unsubscribeExtendedHours = function() {
            this._isSubscribedToExtendedHours && (this._series.extendedHours.listeners().unsubscribe(this, this.onExtendedHoursChanged), delete this._isSubscribedToExtendedHours)
        }, S.prototype.removeByRemoveAllStudies = function() {
            return !0
        }, t.exports = {
            Study: S,
            createStudy: c,
            prepareCallStudyArgs: g,
            prepareStudyProperties: h,
            prepareStudyPropertiesForLoadChart: u,
            prepareStudyPropsStateForLoadChart: _,
            shiftColor: b
        }
    }).call(e, i(40), i(55), i(50), i(3), i(54))
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(e, i) {
            this._source = i, this._properties = e, this._points = [new t.Point(-1, -1)], this._invalidated = !0
        }

        function o(t) {
            this._data = t
        }

        function r(t) {
            this._source = t, this._points = []
        }

        function s(t, e, i) {
            this._source = t, this._points = [], assert(e.type === c.FilledArea.TYPE_HLINES, "Wrong filledArea type: " + e.type), this._initBandIndexes(e.objAId, e.objBId), this._fillStyleProps = i
        }
        var a = i(76).HorzLineRenderer,
            l = i(67),
            c = i(125);
        n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype.updateImpl = function() {
            var e, i = this._source.priceScale();
            return !i || i.isEmpty() ? void(this._points[0] = new t.Point(-1, -1)) : (e = this._properties.value.value(), void(isNumber(e) ? this._points[0] = new t.Point(-1, i.priceToCoordinate(e)) : this._points[0] = new t.Point(-1, NaN)))
        }, n.prototype.renderer = function() {
            this._invalidated && (this.updateImpl(), this._invalidated = !1);
            var t = {};
            return t.points = this._points, t.color = this._properties.color.value(), t.linewidth = this._properties.linewidth.value(), t.linestyle = this._properties.linestyle.value(), t.hitTestResult = l.REGULAR, new a(t)
        }, o.prototype.draw = function(t) {
            var e, i, n;
            0 !== this._data.points.length && (e = t.canvas.width, t.fillStyle = TradingView.generateColor(this._data.backcolor, this._data.transparency), i = Math.min(this._data.points[0], this._data.points[1]), n = Math.max(this._data.points[0], this._data.points[1]), t.fillRect(0, i, e, n - i))
        }, o.prototype.hitTest = function(t) {
            return null
        }, r.prototype.update = function() {
            var t, e, i, n;
            this._points = [], t = this._source.properties().bandsBackground, t.fillBackground.value() && (e = this._source.properties().bands[0], i = this._source.properties().bands[1], n = this._source.priceScale(), n && !n.isEmpty() && (this._points.push(n.priceToCoordinate(e.value.value())), this._points.push(n.priceToCoordinate(i.value.value()))))
        }, r.prototype.renderer = function() {
            var t = {};
            return t.points = this._points, t.backcolor = this._source.properties().bandsBackground.backgroundColor.value(), t.transparency = this._source.properties().bandsBackground.transparency.value(), new o(t)
        }, s.prototype._initBandIndexes = function(t, e) {
            var i, n;
            for (this._bandAKey = null, this._bandBKey = null, i = 0; i < this._source.metaInfo().bands.length; ++i) n = this._source.metaInfo().bands[i], null !== this._bandAKey || n.id !== t ? null !== this._bandBKey || n.id !== e || (this._bandBKey = i) : this._bandAKey = i
        }, s.prototype.update = function() {
            var t, e, i;
            this._points = [], this._fillStyleProps.visible.value() && (t = this._source.properties().bands[this._bandAKey], e = this._source.properties().bands[this._bandBKey], i = this._source.priceScale(), i && !i.isEmpty() && (this._points.push(i.priceToCoordinate(t.value.value())), this._points.push(i.priceToCoordinate(e.value.value()))))
        }, s.prototype.renderer = function() {
            var t = {};
            return t.points = this._points, t.backcolor = this._fillStyleProps.color.value(), t.transparency = this._fillStyleProps.transparency.value(), new o(t)
        }, e.BandPaneView = n, e.BandBackgroundPaneView = r, e.HlineFillPaneView = s
    }).call(e, i(40))
}, function(t, e, i) {
    "use strict";

    function n(t, e, i) {
        this._study = t, this._model = e, this._plotIndex = i, this._text = "", this._coordinate = 0, this._background = "black", this._color = "white", this._invalidated = !0, this._cache = new o
    }
    var o = i(119),
        r = i(60),
        s = i(62);
    inherit(n, r), n.prototype.update = function() {
        this._invalidated = !0
    }, n.prototype._updateImpl = function() {
        this._visible = !1, this._text = "";
        var t = this._study.lastValueData(this._plotIndex);
        t.noData || (this._visible = !0, this._text = t.text, this._coordinate = t.coordinate, this._floatCoordinate = t.floatCoordinate, this._background !== t.color && (this._background = t.color, this._color = this.color()))
    }, n.prototype.coordinate = function() {
        return this._invalidated && (this._updateImpl(), this._invalidated = !1), r.prototype.coordinate.call(this)
    }, n.prototype.renderer = function() {
        this._invalidated && (this._updateImpl(), this._invalidated = !1);
        var t = {
            text: this._text,
            coordinate: this._coordinate,
            color: this._color,
            background: this._background,
            visible: this._visible
        };
        return new s(t, this._cache)
    }, n.prototype.text = function() {
        return this._invalidated && (this._updateImpl(), this._invalidated = !1), r.prototype.text.call(this)
    }, t.exports = n
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(t, e, i, n) {
            var o, r;
            for (this.m_study = t, this.m_series = e, this.m_model = i, this._plotName = n, this.m_items = [], this._invalidated = !0, o = this.m_study.metaInfo().plots, this._colorer = null, this._palette = null, this._paletterProps = null, this._plotIndex = 0, r = 0; r < o.length; r++) o[r].id === this._plotName && (this._plotIndex = r), this.m_study.isSelfColorerPlot(r) && o[r].target === this._plotName && (this._colorer = r, this._palette = this.m_study.metaInfo().palettes[o[r].palette], this._paletterProps = this.m_study.properties().palettes[o[r].palette])
        }

        function o(t, e, i, n) {
            var o, r;
            for (this._study = t, this._series = e, this._model = i, this._plotName = n, this._items = [], this._invalidated = !0, o = this._study.metaInfo().plots, r = 0; r < o.length; r++) o[r].id === this._plotName && (this._plotIndex = r, assert(this._study.isBgColorerPlot(r), "Plot '" + this._plotName + "' is not a background colorer!"))
        }

        function r(t, e, i, n) {
            var o, r;
            for (this.m_study = t, this.m_series = e, this.m_model = i, this.m_plotName = n, this.m_items = [], this.m_invalidated = !0, this.m_plotIndex = null, o = this.m_study.metaInfo().plots, r = 0; r < o.length; r++)
                if (o[r].id === this.m_plotName) {
                    this.m_plotIndex = r;
                    break
                }
            for (o = this.m_study.metaInfo().plots, this._colorer = null, this._textColorer = null, this._palette = null, this._textPalette = null, this._paletterProps = null, this._textPaletterProps = null, this._plotIndex = 0, r = 0; r < o.length; r++) o[r].id === this.m_plotName && (this._plotIndex = r), this.m_study.isSelfColorerPlot(r) && o[r].target === this.m_plotName && (this._colorer = r, this._palette = this.m_study.metaInfo().palettes[o[r].palette], this._paletterProps = this.m_study.properties().palettes[o[r].palette]), this.m_study.isTextColorerPlot(r) && o[r].target === this.m_plotName && (this._textColorer = r, this._textPalette = this.m_study.metaInfo().palettes[o[r].palette], this._textPaletterProps = this.m_study.properties().palettes[o[r].palette])
        }

        function s(t, e, i, n) {
            r.call(this, t, e, i, n)
        }

        function a(t, e, i, n) {
            s.call(this, t, e, i, n)
        }

        function l(t, e, i, n) {
            r.call(this, t, e, i, n), this._maxAbsValue = 0
        }

        function c(t, e, i, n) {
            var o, r;
            for (this.m_study = t, this.m_series = e, this.m_model = i, this.m_plotName = n, this.m_bars = [], this._invalidated = !0, o = this.m_study.metaInfo().plots, this._colorer = null, this._palette = null, this._paletterProps = null, this._ohlcPlotIndexes = {}, r = 0; r < o.length; r++) o[r].target === this.m_plotName && (this.m_study.isOHLCOpenPlot(r) && (this._ohlcPlotIndexes[TradingView.OPEN_PLOT] = r), this.m_study.isOHLCHighPlot(r) && (this._ohlcPlotIndexes[TradingView.HIGH_PLOT] = r), this.m_study.isOHLCLowPlot(r) && (this._ohlcPlotIndexes[TradingView.LOW_PLOT] = r), this.m_study.isOHLCClosePlot(r) && (this._ohlcPlotIndexes[TradingView.CLOSE_PLOT] = r), this.m_study.isOHLCColorerPlot(r) && (this._colorer = r, this._palette = this.m_study.metaInfo().palettes[o[r].palette], this._paletterProps = this.m_study.properties().palettes[o[r].palette]))
        }

        function h(t, e, i, n) {
            c.call(this, t, e, i, n)
        }

        function d(t, e, i, n) {
            c.call(this, t, e, i, n)
        }
        var u = i(67),
            p = i(66),
            f = p.SelectionRenderer,
            _ = p.SelectionRendererArrowsUpDown,
            g = i(68),
            m = g.PaneRendererBars,
            v = g.PaneRendererHistogram,
            y = g.PaneRendererColumns,
            w = g.PaneRendererLine,
            b = g.PaneRendererArea,
            S = g.PaneRendererCandles,
            T = g.PaneRendererCross,
            x = g.PaneRendererCircles,
            C = g.PaneRendererArrowsUpDownItem,
            P = g.PaneRendererArrowsUpDown,
            k = g.PaneRendererUnicodeChar,
            I = g.PaneRendererBackground,
            E = i(70),
            L = i(71),
            V = i(72),
            M = i(61),
            A = M.RGBColor,
            D = M.rgbToHsl,
            O = M.hslToRgb,
            R = i(95).StudyConsts,
            $ = i(95).StudyPlotShapes;
        n.isIndexValid = function(t, e) {
            return t >= 0 && t < e._length()
        }, n.prototype.items = function() {
            return this.m_items
        }, n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype._updateImpl = function() {
            var e, i, o, r, s, a, l, c, h, d, p, f, _, g, m, v, y, w, b, S, T, x, C, P, k, I, E, L, M, A, D, O, $, B;
            if (this._histogramBase = null, this.m_items = [], !this.m_model.timeScale().isEmpty() && !this.m_study.priceScale().isEmpty() && (e = this.m_model.timeScale().visibleBars().clone(), !e.isEmpty())) {
                if (i = this.m_series.nearestIndex(e.firstBar(), TradingView.SEARCH_NEAREST_RIGHT), o = this.m_series.nearestIndex(e.lastBar(), TradingView.SEARCH_NEAREST_LEFT), r = this.m_study.offset(this._plotName), r > 0 ? (i -= r, o += r) : (i += r, o -= r), s = this.m_study.properties().styles[this._plotName].plottype.value(), a = [R.PLOT_LINE, R.PLOT_AREA, R.PLOT_CIRCLES, R.PLOT_CROSS].indexOf(s) >= 0, l = this.m_study.data(), c = this.m_study.firstValue(), a && l._length() > 0) {
                    for (h = l._bsearch(i); n.isIndexValid(h, l) && void 0 === l._valueAt(h)[this._plotIndex + 1];) h -= 1;
                    for (i = n.isIndexValid(h, l) ? l._indexAt(h) : i, d = l._bsearch(o); n.isIndexValid(d, l) && void 0 === l._valueAt(d)[this._plotIndex + 1];) d += 1;
                    o = n.isIndexValid(d, l) ? l._indexAt(d) : o
                }
                for (p = l.range(i, o), f = this.m_study.priceScale(), _ = f.properties().percentage.value(), g = this._getTranspValue(), m = {}, v = function(t, e) {
                    var i = t + "@" + e;
                    return m[i] || (this._plotName && "vol" === this._plotName ? m[i] = TradingView.generateColor(t, e) : m[i] = TradingView.generateColor(t, e, !0)),
                        m[i]
                }.bind(this), y = p._start; y < p._end; ++y) w = p._indexAt(y), w += r, w = Math.floor(w), b = p._valueAt(y), S = b[this._plotIndex + 1], T = void 0 === S || null === S, S = T ? NaN : S, _ && !T && (S = 100 * (S - c) / c), a && T || (x = new t.Point(w, S), C = void 0 !== b[this._colorer + 1] || this._palette && this._palette.addDefaultColor, this._colorer && C && (S = b[this._colorer + 1], x.style = {}, P = this.m_study.properties().styles[this._plotName], void 0 !== S && null !== S ? (k = this._palette.valToIndex ? this._palette.valToIndex[S] : S, I = this._paletterProps.colors[k], E = I.color.value(), x.style.color = TradingView.isHexColor(E) ? v(E, g) : E) : (E = P.color.value(), x.style.color = v(E, 100)), L = void 0 !== k ? I.width.value() : P.linewidth.value(), M = void 0 !== k ? I.style.value() : P.linestyle.value(), x.style.width = L, x.style.style = M), this.m_items.push(x));
                if (f.pricesToCoordinates(this.m_items), this.m_model.timeScale().indexesToCoordinates(this.m_items), this.m_study.properties().styles[this._plotName].histogramBase && (this._histogramBase = this.m_study.priceScale().priceToCoordinate(this.m_study.properties().styles[this._plotName].histogramBase.value())), this.m_study === this.m_model.selectedSource())
                    for (A = V(i, o), this._selectionData = {
                        points: []
                    }, this._selectionData.hittestResult = u.REGULAR, y = 0; y < A.length; y++) w = A[y], b = this.m_study.data().valueAt(w), w += r, void 0 !== b && (S = b[this._plotIndex + 1], f.properties().percentage.value() && (S = 100 * (S - c) / c), D = this.m_model.timeScale().indexToCoordinate(Math.floor(w)), O = this.m_study.priceScale().priceToCoordinate(S), this._selectionData.points.push(new t.Point(D, O)));
                $ = this.m_study.properties().styles[this._plotName], this._lineColor = TradingView.generateColor($.color.value(), g), this._lineWidth = $.linewidth.value(), B = $.color.value(), this._colorer && (B = this._paletterProps.colors[0].color.value(), this._lineWidth = this._paletterProps.colors[0].width.value(), this._lineColor = TradingView.generateColor(this._paletterProps.colors[0].color.value(), g)), this._color2 = TradingView.generateColor(B, g), this._color1 = TradingView.generateColor(n.addHueForColor(B), g)
            }
        }, n.addHueForColor = TradingView.memoize(function(t) {
            var e, i = new A(t),
                n = D(i.r, i.g, i.b),
                o = n[0] + .05;
            return n[0] = o - Math.floor(o), e = O(n[0], n[1], n[2]), i.r = e[0], i.g = e[1], i.b = e[2], i.toHex()
        }), n.prototype._getTranspValue = function() {
            var t = this.m_study.properties(),
                e = t.styles[this._plotName],
                i = 0,
                n = 0,
                o = this.m_study.metaInfo();
            return "Volume@tv-basicstudies" === o.id && o.version <= 46 && "transparency" in t ? (i = t.transparency.value(), i = isNumber(i) ? i : n) : (e.transparency && (i = e.transparency.value(), i = isNumber(i) ? i : n), i)
        }, n.prototype.renderer = function() {
            var t, e, i, n, o = this.m_study.properties().styles[this._plotName];
            if (o.visible.value() && this.m_study.priceScale()) {
                switch (this._invalidated && (this._updateImpl(), this._invalidated = !1), t = {}, t.barSpacing = this.m_model.timeScale().barSpacing(), t.items = this.m_items, t.histogramBase = this._histogramBase ? this._histogramBase : this.m_study.priceScale().height(), t.lineIndex = 0, t.lineStyle = o.linestyle.value(), t.lineColor = this._lineColor, t.lineWidth = this._lineWidth, t.lineWidth = isNumber(t.lineWidth) ? t.lineWidth : 1, t.color1 = this._color1, t.color2 = this._color2, t.bottom = t.histogramBase, this._colorer || (t.simpleMode = !0), e = new L, i = o.joinPoints ? o.joinPoints.value() : !1, o.plottype.value()) {
                    case R.PLOT_LINE:
                    case R.PLOT_LINE_WITH_BREAKS:
                        e.append(new w(t));
                        break;
                    case R.PLOT_AREA:
                    case R.PLOT_AREA_WITH_BREAKS:
                        e.append(new b(t));
                        break;
                    case R.PLOT_HISTOGRAM:
                        e.append(new v(t));
                        break;
                    case R.PLOT_COLUMNS:
                        e.append(new y(t));
                        break;
                    case R.PLOT_CROSS:
                        e.append(new T(t)), i && (n = TradingView.merge({}, t), n.lineWidth = 1, n.forceLineWidth = !0, e.append(new w(n)));
                        break;
                    case R.PLOT_CIRCLES:
                        e.append(new x(t)), i && (n = TradingView.merge({}, t), n.lineWidth = 1, n.ignorePaletteLineWidth = !0, e.append(new w(n)));
                        break;
                    default:
                        e.append(new w(t))
                }
                return this.m_study === this.m_model.selectedSource() && e.append(new f(this._selectionData)), e
            }
        }, o.prototype.items = function() {
            return this._items
        }, o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype._scalesReady = function() {
            var t = this._model.timeScale(),
                e = this._study.priceScale();
            return t && e && !t.isEmpty() && !e.isEmpty()
        }, o.prototype._updateImpl = function() {
            var e, i, n, o, r, s, a, l, c, h, d, u, p, f, _, g, m, v, y;
            if (this._items = [], assert(this._scalesReady(), "Scales must be ready!"), e = this._model.timeScale().visibleBars().clone(), !e.isEmpty()) {
                for (i = this._study.metaInfo().plots, n = i[this._plotIndex].palette, o = this._study.properties().palettes[n], r = o.colors, s = this._study.metaInfo().palettes[n], a = this._study.properties().styles[this._plotName].transparency.value(), l = this._series.nearestIndex(e.firstBar(), TradingView.SEARCH_NEAREST_RIGHT), c = this._series.nearestIndex(e.lastBar(), TradingView.SEARCH_NEAREST_LEFT), h = this._study.offset(this._plotName), h > 0 ? (l -= h, c += h) : (l += h, c -= h), d = this._study.data(), u = d.range(l, c), p = u._start; p < u._end; ++p) f = u._indexAt(p), f += h, _ = u._valueAt(p), g = _[this._plotIndex + 1], m = new t.Point(Math.floor(f) - .5), v = isNumber(a) ? a : 50, v = Math.min(v, 100), v = Math.max(v, 0), void 0 !== g && null !== g ? (y = s.valToIndex ? s.valToIndex[g] : g, m.color = TradingView.generateColor(r[y].color.value(), v)) : m.color = null, this._items.push(m);
                this._model.timeScale().indexesToCoordinates(this._items)
            }
        }, o.prototype.renderer = function() {
            var t, e;
            if (this._study.properties().styles[this._plotName].visible && this._study.properties().styles[this._plotName].visible.value() && this._scalesReady()) return this._invalidated && (this._updateImpl(), this._invalidated = !1), t = {
                items: this._items,
                y: 0,
                h: this._study.priceScale().height(),
                w: Math.ceil(this._model.timeScale().barSpacing())
            }, e = new L, e.append(new I(t)), e
        }, r.prototype.items = function() {
            return this.m_items
        }, r.prototype.update = function() {
            this.m_invalidated = !0
        }, r.prototype._scalesReady = function() {
            var t = this.m_model.timeScale(),
                e = this.m_study.priceScale();
            return t && e && !t.isEmpty() && !e.isEmpty()
        }, r.prototype._updateImpl = function() {
            var t, e, i, n, o, r, s, a, l, c, h, d, p, f, _, g, m, v, y, w, b, S, T, x, C, P, k, I, E;
            if (this.m_items = [], this._scalesReady() && (t = this.m_model.timeScale(), e = this.m_study.priceScale(), i = t.visibleBars().clone(), !i.isEmpty())) {
                for (n = this.m_series.nearestIndex(i.firstBar(), TradingView.SEARCH_NEAREST_RIGHT), o = this.m_series.nearestIndex(i.lastBar(), TradingView.SEARCH_NEAREST_LEFT), r = this.m_study.offset(this.m_plotName), r > 0 ? (n -= r, o += r) : (n += r, o -= r), s = this.m_study.data(), a = this.m_study.firstValue(), l = s.range(n, o), c = e.properties().percentage.value(), h = this._getTranspValue(), d = V(n, o), p = this.m_study === this.m_model.selectedSource(), p && (this.m_selectionData = {
                    points: [],
                    hittestResult: u.REGULAR,
                    vertOffset: 0
                }), f = this.m_series.properties().style.value(), _ = f === TradingView.Series.STYLE_LINE ? "lineStyle" : f === TradingView.Series.STYLE_AREA ? "areaStyle" : null, _ ? (g = this.m_series.properties()[_].priceSource.value(), m = g) : (g = "high", m = "low"), this._topCoord = e.coordinateToPrice(e.height() * e.topMargin()), this._bottomCoord = e.coordinateToPrice(e.height() * (1 - e.bottomMargin())), v = l._start; v < l._end; ++v) y = l._indexAt(v), w = Math.floor(y + r), b = l._valueAt(v), S = b[this.m_plotIndex + 1], null !== S && void 0 !== S && (T = this._createItem(w, S, g, m, c, a), void 0 !== T && null !== T && (x = void 0 !== b[this._colorer + 1] || this._palette && this._palette.addDefaultColor, this._colorer && x && (S = b[this._colorer + 1], T.style = {}, void 0 !== S && null !== S ? (P = this._palette.valToIndex ? this._palette.valToIndex[S] : S, C = this._paletterProps.colors[P].color.value(), T.style.color = TradingView.generateColor(C, h)) : (C = this.m_study.properties().styles[this.m_plotName].color.value(), T.style.color = TradingView.generateColor(C, 100)), k = h > 9 ? h - 10 : 0, T.style.borderColor = TradingView.generateColor(C, k)), I = void 0 !== b[this._textColorer + 1] || this._textPalette && this._textPalette.addDefaultColor, this._textColorer && I && (S = b[this._textColorer + 1], T.style || (T.style = {}), void 0 !== S && null !== S ? (P = this._textPalette.valToIndex ? this._textPalette.valToIndex[S] : S, E = this._textPaletterProps.colors[P].color.value(), T.style.textColor = TradingView.generateColor(E, h)) : (E = this.m_study.properties().styles[this.m_plotName].textColor.value(), T.style.textColor = TradingView.generateColor(E, 100))), p && -1 !== d.indexOf(y) && this.m_selectionData.points.push(T), this.m_items.push(T)));
                this._convertItemsToCoordinates()
            }
        }, r.prototype._getSeriesVal = function(t, e) {
            var i;
            t = t || "close", i = null;
            try {
                i = this.m_series[t](e)
            } catch (n) {}
            return i
        }, r.prototype._getTranspValue = function() {
            var t, e = 0;
            return this.m_study.properties().transparency && (e = this.m_study.properties().transparency.value(), e = isNumber(e) ? e : 50), t = this.m_study.properties().styles[this.m_plotName], t.transparency && (e = t.transparency.value(), e = isNumber(e) ? e : 50), e
        }, r.prototype._createItem = function(e, i, n, o, r, s) {
            var a, l, c, h, d = this.m_study.properties().styles[this.m_plotName].location.value();
            if (!i && d !== CanvasEx.MARKLOC_ABSOLUTE) return null;
            switch (d) {
                case CanvasEx.MARKLOC_ABOVEBAR:
                    if (a = this._getSeriesVal(n, e), void 0 === a || null == a) return null;
                    l = a;
                    break;
                case CanvasEx.MARKLOC_BELOWBAR:
                    if (c = this._getSeriesVal(o, e), void 0 === c || null == c) return null;
                    l = c;
                    break;
                case CanvasEx.MARKLOC_TOP:
                    l = this._topCoord;
                    break;
                case CanvasEx.MARKLOC_BOTTOM:
                    l = this._bottomCoord;
                    break;
                case CanvasEx.MARKLOC_ABSOLUTE:
                    l = i;
                    break;
                default:
                    throw Error("Bad value: " + d)
            }
            return r && d !== CanvasEx.MARKLOC_TOP && d !== CanvasEx.MARKLOC_BOTTOM && (l = 100 * (l - s) / s), h = new t.Point(e, l)
        }, r.prototype._convertItemsToCoordinates = function() {
            var t = this.m_model.timeScale(),
                e = this.m_study.priceScale();
            t.indexesToCoordinates(this.m_items), e.pricesToCoordinatesEx(this.m_items, function(t) {
                return t.y
            }, function(t, e) {
                t.y = e
            })
        }, r.prototype._calculateVerticalOffset = function(t, e) {
            var i = 0;
            switch (t) {
                case CanvasEx.MARKLOC_ABOVEBAR:
                case CanvasEx.MARKLOC_BOTTOM:
                    i = -e;
                    break;
                case CanvasEx.MARKLOC_BELOWBAR:
                case CanvasEx.MARKLOC_TOP:
                    i = e
            }
            return i
        }, r.prototype._calculateShapeHeight = function(t, e) {
            var i = t;
            switch (e) {
                case CanvasEx.SIZE_TINY:
                    i = .3 * t;
                    break;
                case CanvasEx.SIZE_SMALL:
                    i = .6 * t;
                    break;
                case CanvasEx.SIZE_NORMAL:
                    i = t;
                    break;
                case CanvasEx.SIZE_LARGE:
                    i = 1.5 * t;
                    break;
                case CanvasEx.SIZE_HUGE:
                    i = 2 * t
            }
            return i
        }, r.prototype.renderer = function() {
            var t, e, i, n, o, r, s, a, l, c;
            if (this.m_study.properties().styles[this.m_plotName].visible && this.m_study.properties().styles[this.m_plotName].visible.value() && this._scalesReady()) return t = this.m_model.timeScale(), this.m_invalidated && (this._updateImpl(), this.m_invalidated = !1), e = {}, i = this._getTranspValue(), n = t.barSpacing(), o = this._calculateShapeHeight(n), r = this.m_study.properties().styles[this.m_plotName].location.value(), s = this._calculateVerticalOffset(r, o + o / 2), e.barSpacing = n, e.items = this.m_items, e.color = TradingView.generateColor(this.m_study.properties().styles[this.m_plotName].color.value(), i), e.height = o, e.vertOffset = s, a = this.m_study.properties().styles[this.m_plotName].plottype.value(), l = $.Data[a], void 0 === l && TradingView.logError("Unknown style " + a), c = new L, c.append(new TradingView[l.paneRendererClass](e)), this.m_study === this.m_model.selectedSource() && (this.m_selectionData.vertOffset = s, c.append(new f(this.m_selectionData))), c
        }, inherit(s, r), s.prototype.renderer = function() {
            var t, e, i, n, o, r, s, a, l, c, h, d, u, p, _, g, m, v, y, w, b = this.m_study.properties().styles[this.m_plotName];
            if (b.visible && b.visible.value() && this._scalesReady()) return t = this.m_model.timeScale(), this.m_invalidated && (this._updateImpl(), this.m_invalidated = !1), e = {}, i = this._getTranspValue(), n = t.barSpacing(), b.size ? (r = b.size.value(), o = this._calculateShapeHeight(25, r)) : o = Math.round(n / 2), s = b.location.value(), a = TradingView.generateColor(b.color.value(), i), l = i > 19 ? i - 10 : 0, c = this._calculateVerticalOffset(s, Math.round(1.5 * o)), e.barSpacing = n, e.items = this.items(), e.color = a, e.borderColor = TradingView.generateColor(b.color.value(), l), e.height = o, e.vertOffset = c, h = b.plottype.value(), d = $.Data[h], void 0 === d && TradingView.logError("Unknown style " + h), u = new L, p = b.text ? b.text.value() : void 0, void 0 !== p && "" !== p.trim() && (_ = p.trim().replace(/\\n/gm, "\n"), _ = TradingView.cleanButAmpersand(_, !0), g = !1, m = !1, v = "Arial", y = 12, e.textCache = new E(_, g, m, v, y), w = b.textColor ? b.textColor.value() : void 0, e.textColor = w ? TradingView.generateColor(w, i) : a), u.append(new TradingView[d.paneRendererClass](e)), this.m_study === this.m_model.selectedSource() && (this.m_selectionData.vertOffset = c, u.append(new f(this.m_selectionData))), u
        }, inherit(a, s), a.prototype.renderer = function() {
            var t, e, i, n, o, r, s, a, l, c, h, d, u, p, _, g, m, v = this.m_study.properties().styles[this.m_plotName];
            if (v.visible && v.visible.value() && this._scalesReady()) return t = this.m_model.timeScale(), this.m_invalidated && (this._updateImpl(), this.m_invalidated = !1), e = {}, i = this._getTranspValue(), n = t.barSpacing(), v.size ? (r = v.size.value(), o = this._calculateShapeHeight(50, r)) : o = Math.round(n), s = v.location.value(), a = TradingView.generateColor(v.color.value(), i), l = this._calculateVerticalOffset(s, o), e.items = this.items(), e["char"] = v["char"].value(), e.height = o, e.vertOffset = l, e.color = a, c = new L, h = v.text ? v.text.value() : void 0, void 0 !== h && "" !== h.trim() && (d = h.trim().replace(/\\n/gm, "\n"), d = TradingView.cleanButAmpersand(d, !0), u = !1, p = !1, _ = "Arial", g = 12, e.textCache = new E(d, u, p, _, g), m = v.textColor ? v.textColor.value() : void 0, e.textColor = m ? TradingView.generateColor(m, i) : a), c.append(new k(e)), this.m_study === this.m_model.selectedSource() && (this.m_selectionData.vertOffset = l, c.append(new f(this.m_selectionData))), c
        }, inherit(l, r), l.prototype.renderer = function() {
            var t, e, i, n, o;
            if (this.m_study.properties().styles[this.m_plotName].visible && this.m_study.properties().styles[this.m_plotName].visible.value() && this._scalesReady()) return this.m_invalidated && (this._updateImpl(), this.m_invalidated = !1), t = {}, e = this._getTranspValue(), i = this.m_model.timeScale().barSpacing(), t.items = this.m_items, t.barSpacing = i, t.colorup = TradingView.generateColor(this.m_study.properties().styles[this.m_plotName].colorup.value(), e), t.colordown = TradingView.generateColor(this.m_study.properties().styles[this.m_plotName].colordown.value(), e), t.colorBorder = TradingView.generateColor("#000000", e), t.minHeight = this.m_study.properties().styles[this.m_plotName].minHeight.value(), t.maxHeight = this.m_study.properties().styles[this.m_plotName].maxHeight.value(), n = new L, n.append(new P(t)), this.m_study === this.m_model.selectedSource() && (o = this.m_selectionData, o.barSpacing = i, n.append(new _(o))), n
        }, l.prototype._createItem = function(t, e, i, n, o, r) {
            var s, a, l, c, h;
            if (0 !== e) {
                if (Math.abs(e) > this._maxAbsValue && (this._maxAbsValue = Math.abs(e)), s = e > 0) {
                    if (l = this._getSeriesVal(n, t), void 0 === l || null == l) return null;
                    a = l
                } else {
                    if (c = this._getSeriesVal(i, t), void 0 === c || null == c) return null;
                    a = c
                }
                return o && (a = 100 * (a - r) / r), h = new C(t, a, e, s)
            }
        }, l.prototype._convertItemsToCoordinates = function() {
            var t, e, i, n, o, r, s, a, l, c = this.m_model.timeScale(),
                h = this.m_study.priceScale();
            for (c.indexesToCoordinates(this.m_items), h.pricesToCoordinatesEx(this.m_items, function(t) {
                return t.y
            }, function(t, e) {
                t.y = e
            }), t = Math.abs(this.m_study.properties().styles[this.m_plotName].minHeight.value()), e = Math.abs(this.m_study.properties().styles[this.m_plotName].maxHeight.value()), t > e && (i = t, t = e, e = i), n = e - t, o = n / this._maxAbsValue, r = this.m_items, s = 0; s < r.length; s++) a = r[s], l = Math.abs(a.height), a.height = l * o + t
        }, c.prototype.update = function() {
            this._invalidated = !0
        }, c.prototype._updateImpl = function() {
            var e, i, n, o, r, s, a, l, c, h, d, p, f, _, g, m, v, y, w, b, S, T, x, C, P, k, I, E, L, M, R, $, B, z, N;
            if (this.m_bars.length = 0, !this.m_model.timeScale().isEmpty() && !this.m_study.priceScale().isEmpty() && (e = this.m_model.timeScale().visibleBars().clone(), !e.isEmpty())) {
                for (i = this.m_series.nearestIndex(e.firstBar(), TradingView.SEARCH_NEAREST_RIGHT), n = this.m_series.nearestIndex(e.lastBar(), TradingView.SEARCH_NEAREST_LEFT), o = this.m_study.data(), r = this.m_study.firstValue(), s = o.range(i, n), a = this.m_study.priceScale(), l = a.properties().percentage.value(), c = 0, h = this.m_study.properties().ohlcPlots[this.m_plotName], d = {}, p = function(t, e) {
                    var i = t + "@" + e;
                    return d[i] || (d[i] = TradingView.generateColor(t, e)), d[i]
                }, f = s._start; f < s._end; ++f) {
                    for (_ = s._indexAt(f), _ = Math.floor(_), g = s._valueAt(f), m = !0, v = {}, y = TradingView.OPEN_PLOT; y <= TradingView.CLOSE_PLOT; ++y) {
                        if (w = g[this._ohlcPlotIndexes[y] + 1], void 0 === w || null === w) {
                            m = !1;
                            break
                        }
                        v[y] = w
                    }
                    m && (b = v[TradingView.OPEN_PLOT], S = v[TradingView.CLOSE_PLOT], T = Math.max(b, v[TradingView.HIGH_PLOT], v[TradingView.LOW_PLOT], S), x = Math.min(b, v[TradingView.HIGH_PLOT], v[TradingView.LOW_PLOT], S), C = {}, C.time = Math.round(_), l ? (C.open = 100 * (b - r) / r, C.high = 100 * (T - r) / r, C.low = 100 * (x - r) / r, C.close = 100 * (S - r) / r) : (C.open = b, C.high = T, C.low = x, C.close = S), P = h.color.value(), k = void 0 !== g[this._colorer + 1] || this._palette && this._palette.addDefaultColor, this._colorer && k && (w = g[this._colorer + 1], void 0 !== w && null !== w && (I = this._palette.valToIndex ? this._palette.valToIndex[w] : w, E = this._paletterProps.colors[I], P = E.color.value())), C.color = p(P, c), L = new A(P), M = D(L.r, L.g, L.b), R = M[2] > .25 ? M[2] - .26 : M[2] + .75, $ = O(M[0], M[1], R), L.r = $[0], L.g = $[1], L.b = $[2], C.borderColor = p(L.toHex(), c), C.hollow = null, this.m_bars.push(C))
                }
                if (a.barPricesToCoordinates(this.m_bars), this.m_model.timeScale().barIndexesToCoordinates(this.m_bars), this.m_study === this.m_model.selectedSource())
                    for (B = V(i, n), this._selectionData = {
                        points: [],
                        hittestResult: u.REGULAR
                    }, f = 0; f < B.length; f++) _ = B[f], g = this.m_study.data().valueAt(_), void 0 !== g && (w = g[this._plotIndex + 1], a.properties().percentage.value() && (w = 100 * (w - r) / r), z = this.m_model.timeScale().indexToCoordinate(Math.floor(_)), N = this.m_study.priceScale().priceToCoordinate(w), this._selectionData.points.push(new t.Point(z, N)))
            }
        }, c.prototype.items = function() {
            return this.m_bars
        }, inherit(h, c), h.prototype.renderer = function() {
            var t, e, i = this.m_study.properties().ohlcPlots[this.m_plotName];
            if (i.visible.value()) return this._invalidated && (this._updateImpl(), this._invalidated = !1), t = {}, t.bars = this.m_bars, t.barSpacing = this.m_model.timeScale().barSpacing(), t.dontDrawOpen = this.m_series.properties().barStyle.dontDrawOpen.value(), e = new L, e.append(new m(t)), this.m_series === this.m_model.selectedSource() && e.append(new f(this._selectionData)), e
        }, inherit(d, c), d.prototype.renderer = function() {
            var t, e, i, n = this.m_study.properties().ohlcPlots[this.m_plotName];
            if (n.visible.value()) return this._invalidated && (this._updateImpl(), this._invalidated = !1), t = {}, t.bars = this.m_bars, t.barSpacing = this.m_model.timeScale().barSpacing(), t.drawWick = n.drawWick.value(), t.drawBorder = n.drawBorder.value(), e = n.wickColor.value(), t.borderColor = e, t.wickColor = e, i = new L, i.append(new S(t)), this.m_series === this.m_model.selectedSource() && i.append(new f(this._selectionData)), i
        }, e.StudyPaneView = n, e.StudyBackgroundPaneView = o, e.StudyPlotShapesPaneView = s, e.StudyPlotCharsPaneView = a, e.StudyPlotArrowsPaneView = l, e.StudyPlotCandlesPaneView = d, e.StudyPlotBarsPaneView = h
    }).call(e, i(40))
}, function(t, e, i) {
    "use strict";

    function n(t) {
        this._data = t
    }

    function o(t) {
        this._source = t, this._points1 = [], this._points2 = [], this._timePoints = [], this._getBarSpacing = t.model().timeScale().barSpacing.bind(t.model().timeScale()), this._invalidated = !0
    }

    function r(t) {
        o.call(this, t)
    }

    function s(t, e, i) {
        o.call(this, t), assert(e.type === c.FilledArea.TYPE_PLOTS, "Wrong filledArea type: " + e.type), this._fillMetaInfo = e, this._fillStyleProps = i
    }
    var a = i(67),
        l = i(69),
        c = i(125);
    n.prototype.hitTest = function(t) {
        var e, i, n, o;
        for (o = 1; o < this._data.points1.length; ++o)
            if (e = this._data.points1[o], i = this._data.points2[o], n = this._data.timePoints[o], n === t.x && (t.y >= e && t.y <= i || t.y <= e && t.y >= i)) return new a(a.REGULAR);
        return null
    }, n.prototype.draw = function(t) {
        var e, i, n, o, r, s, a, c, h, d, u, p, f, _, g;
        if (0 !== this._data.points1.length && 0 !== this._data.points2.length)
            for (e = this._data.timePoints, i = this._data.points1, n = this._data.points2, o = this._data.getBarSpacing() / 24, r = l.paneRendererCoordinateIsValid, s = isNumber(this._data.transparency) ? this._data.transparency : 50, s = Math.min(s, 100), s = Math.max(s, 0), a = TradingView.generateColor(this._data.backcolor, s), _ = 0; _ < this._data.timePoints.length; _++)
                if (h = e[_], d = i[_], u = n[_], p = i[_ + 1], f = n[_ + 1], r(d) && r(u) && (c || (c = {
                        points1: [],
                        points2: [],
                        timePoints: []
                    }), c.points1.push(d), c.points2.push(u), c.timePoints.push(h)), c && (!r(p) || !r(f))) {
                    for (1 === c.timePoints.length && (c.timePoints = [c.timePoints[0] - o, c.timePoints[0] + o], c.points1.push(c.points1[0]), c.points2.push(c.points2[0])), t.beginPath(), t.moveTo(c.timePoints[0], c.points1[0]), g = 1; g < c.timePoints.length; g++) t.lineTo(c.timePoints[g], c.points1[g]);
                    for (c.timePoints.length > 0 && c.points2.length > 0 && t.lineTo(c.timePoints[c.timePoints.length - 1], c.points2[c.timePoints.length - 1]), g = c.timePoints.length - 2; g >= 0; g--) t.lineTo(c.timePoints[g], c.points2[g]);
                    t.closePath(), t.fillStyle = a, t.fill(), c = null
                }
    }, o.prototype.update = function() {
        this._invalidated = !0
    }, o.prototype._updateImpl = function() {
        var t, e, i, n, o, r, s, a, l, c, h, d, u, p, f, _, g, m, v, y, w, b, S, T, x;
        if (this._points1 = [], this._points2 = [], this._timePoints = [], this._visible() && (t = this._source.priceScale(), e = this._source._model.timeScale(), t && !t.isEmpty() && !this._source._model.timeScale().isEmpty() && !this._source._series.bars().isEmpty() && (i = this._source.data()._columns.indexOf(this._plotAId()) + 1, n = this._source.data()._columns.indexOf(this._plotBId()) + 1, o = this._source._model.timeScale().visibleBars(), !o.isEmpty()))) {
            if (r = this._source._series.nearestIndex(o.firstBar(), TradingView.SEARCH_NEAREST_RIGHT), s = this._source._series.nearestIndex(o.lastBar(), TradingView.SEARCH_NEAREST_LEFT), a = this._source.data().range(r, s), this._source.data()._items.length > 0)
                for (l = this._source.firstValue(), c = a._start, h = a._end, d = this._source.offset(this._plotAId()), u = this._source.offset(this._plotBId()), p = Math.max(d, u), f = Math.min(d, u), _ = c + p, g = 0, c > g && (_ = p > c ? p : c), m = h + f, v = a._items.length, h > v + f && v > h && (m = v + f), 0 > f && v + f >= h && (m = h), y = a._indexAt(c), c > _ ? y += p : _ > h ? y += p : y = a._indexAt(_), w = _; m > w; ++w) b = a._valueAt(w - d), S = a._valueAt(w - u), T = b[i], x = S[n], t.properties().percentage.value() && (T = 100 * (T - l) / l, x = 100 * (x - l) / l), this._points1.push(T), this._points2.push(x), this._timePoints.push(e.indexToCoordinate(y++));
            t.pricesArrayToCoordinates(this._points1), t.pricesArrayToCoordinates(this._points2)
        }
    }, o.prototype.renderer = function() {
        this._invalidated && (this._updateImpl(), this._invalidated = !1);
        var t = {};
        return t.points1 = this._points1, t.points2 = this._points2, t.timePoints = this._timePoints, t.getBarSpacing = this._getBarSpacing, t.backcolor = this._color(), t.transparency = this._transparency(), new n(t)
    }, o.prototype._plotAId = function() {
        assert(!1, "Pure virtual call!")
    }, o.prototype._plotBId = function() {
        assert(!1, "Pure virtual call!")
    }, o.prototype._color = function() {
        assert(!1, "Pure virtual call!")
    }, o.prototype._transparency = function() {
        assert(!1, "Pure virtual call!")
    }, o.prototype._visible = function() {
        assert(!1, "Pure virtual call!")
    }, inherit(r, o), r.prototype._plotAId = function() {
        var t = this._source.properties().area[0];
        return t.name.value()
    }, r.prototype._plotBId = function() {
        var t = this._source.properties().area[1];
        return t.name.value()
    }, r.prototype._color = function() {
        return this._source.properties().areaBackground.backgroundColor.value()
    }, r.prototype._transparency = function() {
        return this._source.properties().areaBackground.transparency.value()
    }, r.prototype._visible = function() {
        return this._source.properties().areaBackground.fillBackground.value()
    }, inherit(s, o), s.prototype._plotAId = function() {
        return this._fillMetaInfo.objAId
    }, s.prototype._plotBId = function() {
        return this._fillMetaInfo.objBId
    }, s.prototype._color = function() {
        return this._fillStyleProps.color.value()
    }, s.prototype._transparency = function() {
        return this._fillStyleProps.transparency.value()
    }, s.prototype._visible = function() {
        return this._fillStyleProps.visible.value()
    }, e.PlotFillPaneView = s, e.AreaBackgroundPaneView = r
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(t, e) {
            var i, n, o, r, l;
            if (s.call(this), this._study = t, this._model = e, i = t.metaInfo().plots) {
                for (n = 0; n < i.length; ++n)
                    if (!(this._study.isSelfColorerPlot(n) || this._study.isBarColorerPlot(n) || this._study.isBgColorerPlot(n) || this._study.isDataOffsetPlot(n) || this._study.isOHLCColorerPlot(n))) {
                        if (o = i[n].id, "Compare@tv-basicstudies" === this._study.metaInfo().id) r = new a(this._study.inputsForGUI()[1], "");
                        else {
                            l = this._study.title();
                            try {
                                l = this._study.properties().styles[o].title.value()
                            } catch (c) {}
                            r = new a(l, "")
                        }
                        r.plotId = o, r.plotIndex = n, this._items.push(r)
                    }
                this.update(), this._invalidated = !0
            }
        }

        function o(t, e) {
            n.call(this, t, e)
        }
        var r = i(64),
            s = r.DataWindowView,
            a = r.DataWindowItem,
            l = i(122);
        inherit(n, s), n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype._updateImpl = function() {
            var e, i, n, o, r, s, a, l, c, h, d, u, p, f, _, g, m, v, y, w = !0;
            for (this._header = this._study.title(w), this._title = this._study.title(), e = this._study.isVisible() ? $.t("n/a") : "", i = 0; i < this._items.length; ++i) this._items[i].setValue(e);
            if (t.enabled("hide_last_na_study_output") && this._items.length && this._items[this._items.length - 1].setValue(""), !this._model.timeScale().isEmpty()) {
                if (n = this._study.metaInfo().plots, o = null, r = {}, n)
                    for (i = 0; i < n.length; i++)(this._study.isSelfColorerPlot(i) || this._study.isOHLCColorerPlot(i)) && (r[n[i].target] = {
                        index: i
                    }, r[n[i].target].palette = this._study.metaInfo().palettes[n[i].palette], r[n[i].target].paletterProps = this._study.properties().palettes[n[i].palette]);
                for (s = this._study.data().size() - 1, a = this._model.crossHairSource().appliedIndex(), l = this._study.formatter(), i = 0; i < this._items.length; ++i) c = this._items[i], h = c.plotId, d = c.plotIndex, u = this._study.offset(h), p = isNumber(a) ? this._study.nearestIndex(a - u, TradingView.SEARCH_NEAREST_LEFT) : s, void 0 !== p && (f = this._study.data().valueAt(p) || this._study.data().last(), f && (_ = f[d + 1], isNumber(_) && (c.setValue(l.format(_)), g = this._study.properties().styles[h].color.value(), this._study.isOHLCSeriesPlot(d) && (h = n[d].target, g = this._study.properties().ohlcPlots[h].color.value()), r[h] && f.length > r[h].index + 1 ? (m = f[r[h].index + 1], void 0 !== m && null !== m ? (o = r[h].palette, v = r[h].paletterProps, y = o.valToIndex ? o.valToIndex[m] : m, this._items[i].setColor(v.colors[y].color.value())) : this._items[i].setColor(g)) : this._items[i].setColor(g))))
            }
        }, n.prototype.items = function() {
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), this._items
        }, inherit(o, n), o.prototype.additional = function() {
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), this._additional
        }, o.prototype._updateImpl = function() {
            var t = l(this._study.symbolInfo());
            return t ? this._additional = "(Data Provided by " + t + ")" : this._additional = void 0, n.prototype._updateImpl.call(this)
        }, e.StudyDataWindowView = n, e.DataVendorStudyDataWindowView = o
    }).call(e, i(3))
}, function(t, e) {
    "use strict";

    function i(t) {
        this._graphics = i.emptyGraphics(), assert(!!t, "Study metaInfo is absent!"), this._metaInfo = t
    }
    i.emptyGraphics = function() {
        return {
            indexes: []
        }
    }, i.prototype.isEmpty = function() {
        var t = Object.keys(this._graphics).length > 1;
        return 0 === this._graphics.indexes.length && !t
    }, i.prototype.graphics = function() {
        return this._graphics
    }, i.prototype.setGraphics = function(t) {
        this._graphics = t, this._postProcessGraphicsData()
    }, i.prototype.process = function(t) {
        return "" !== t.d ? t.d.indexes_replace ? void this.replaceIndexes(t) : void(t.d.graphicsCmds && (this.processEraseCmds(t.d.graphicsCmds.erase), this.processCreateCmds(t.d.graphicsCmds.create, t.indexes))) : void 0
    }, i.prototype.replaceIndexes = function(t) {
        "" !== t.d && (assert(!!t.d.indexes_replace), this._graphics.indexes = t.indexes)
    }, i.prototype.processEraseCmds = function(t) {
        var e, n, o, r, s;
        if (t)
            for (assert(!!this._graphics, "_graphics object doesn't exist in the study!"), assert(!!this._graphics.indexes, "_graphics.indexes array doesn't exist in the study!"), e = 0; e < t.length; ++e)
                if (n = t[e], "all" === n.action) this._graphics = i.emptyGraphics();
                else {
                    if ("one" !== n.action) throw Error("Unknown graphics command " + n.action);
                    for (o in this._graphics[n.type]) r = this._graphics[n.type][o], s = i._findGraphicsObjIndexById(r.data, n.id), s >= 0 && r.data.splice(s, 1)
                }
    }, i._findGraphicsObjIndexById = function(t, e) {
        for (var i = 0; i < t.length; ++i)
            if (t[i].id === e) return i;
        return -1
    }, i.prototype.processCreateCmds = function(t, e) {
        var i, n, o, r, s, a;
        if (t) {
            assert(!!e, "indexes are missing in the study nonseries response!"), assert(!!this._graphics, "_graphics object doesn't exist in the study!"), assert(!!this._graphics.indexes, "_graphics.indexes array doesn't exist in the study!");
            for (i in t) {
                assert(i in this._metaInfo.graphics, "There is a '" + i + "' in study response, but it doesn't present in metaInfo!");
                for (n = 0; n < t[i].length; ++n) {
                    o = t[i][n], r = o.styleId, assert(r in this._metaInfo.graphics[i]), this._graphics[i] || (this._graphics[i] = []), s = null;
                    for (a = 0; a < this._graphics[i].length; ++a)
                        if (this._graphics[i][a].styleId === r) {
                            s = this._graphics[i][a];
                            break
                        }
                    null === s && (s = {
                        styleId: r,
                        data: []
                    }, this._graphics[i].push(s)), s.data = s.data.concat(o.data)
                }
            }
            "nochange" === e || (assert(Array.isArray(e)), this._graphics.indexes = e), this._postProcessGraphicsData()
        }
    }, i.prototype._postProcessGraphicsData = function() {
        var t, e, n;
        if (this._graphics)
            for (t in this._graphics.hhists) e = this._graphics.hhists[t], i._sortHHistItemsByPrice(e.data), n = this._graphics.indexes, e.dataObj = i._splitHHistItemsBySession(e.data, n)
    }, i._sortHHistItemsByPrice = function(t) {
        t.sort(function(t, e) {
            return t.priceLow - e.priceLow
        })
    }, i._splitHHistItemsBySession = function(t, e) {
        var i, n, o, r = {};
        for (i = 0; i < t.length; ++i) n = t[i], o = e[n.firstBarTime], void 0 !== o ? (o in r || (r[o] = []), r[o].push(n)) : TradingView.logError("Cannot find index " + n.firstBarTime + " in study timescale indexes");
        return r
    }, t.exports = i
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        return this instanceof n ? (this.files = {}, this.comment = null, this.root = "", t && this.load(t, e), void(this.clone = function() {
            var t, e = new n;
            for (t in this) "function" != typeof this[t] && (e[t] = this[t]);
            return e
        })) : new n(t, e)
    }
    var o = i(176);
    n.prototype = i(177), n.prototype.load = i(210), n.support = i(178), n.defaults = i(205), n.utils = i(217), n.base64 = {
        encode: function(t) {
            return o.encode(t)
        },
        decode: function(t) {
            return o.decode(t)
        }
    }, n.compressions = i(184), t.exports = n
}, function(t, e) {
    "use strict";
    var i = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
    e.encode = function(t, e) {
        for (var n, o, r, s, a, l, c, h = "", d = 0; d < t.length;) n = t.charCodeAt(d++), o = t.charCodeAt(d++), r = t.charCodeAt(d++), s = n >> 2, a = (3 & n) << 4 | o >> 4, l = (15 & o) << 2 | r >> 6, c = 63 & r, isNaN(o) ? l = c = 64 : isNaN(r) && (c = 64), h = h + i.charAt(s) + i.charAt(a) + i.charAt(l) + i.charAt(c);
        return h
    }, e.decode = function(t, e) {
        var n, o, r, s, a, l, c, h = "",
            d = 0;
        for (t = t.replace(/[^A-Za-z0-9\+\/\=]/g, ""); d < t.length;) s = i.indexOf(t.charAt(d++)), a = i.indexOf(t.charAt(d++)), l = i.indexOf(t.charAt(d++)), c = i.indexOf(t.charAt(d++)), n = s << 2 | a >> 4, o = (15 & a) << 4 | l >> 2, r = (3 & l) << 6 | c, h += String.fromCharCode(n), 64 != l && (h += String.fromCharCode(o)), 64 != c && (h += String.fromCharCode(r));
        return h
    }
}, function(t, e, i) {
    "use strict";
    var n, o, r, s, a, l, c, h, d, u, p, f, _ = i(178),
        g = i(183),
        m = i(203),
        v = i(204),
        y = i(205),
        w = i(176),
        b = i(184),
        S = i(206),
        T = i(202),
        x = i(207),
        C = i(208),
        P = i(209),
        k = function(t) {
            if (t._data instanceof S && (t._data = t._data.getContent(), t.options.binary = !0, t.options.base64 = !1, "uint8array" === g.getTypeOf(t._data))) {
                var e = t._data;
                t._data = new Uint8Array(e.length), 0 !== e.length && t._data.set(e, 0)
            }
            return t._data
        },
        I = function(t) {
            var e = k(t),
                i = g.getTypeOf(e);
            return "string" === i ? !t.options.binary && _.nodebuffer ? T(e, "utf-8") : t.asBinary() : e
        },
        E = function(t) {
            var e = k(this);
            return null === e || void 0 === e ? "" : (this.options.base64 && (e = w.decode(e)), e = t && this.options.binary ? f.utf8decode(e) : g.transformTo("string", e), t || this.options.binary || (e = g.transformTo("string", f.utf8encode(e))), e)
        },
        L = function(t, e, i) {
            this.name = t, this.dir = i.dir, this.date = i.date, this.comment = i.comment, this.unixPermissions = i.unixPermissions, this.dosPermissions = i.dosPermissions, this._data = e, this.options = i, this._initialMetadata = {
                dir: i.dir,
                date: i.date
            }
        };
    L.prototype = {
        asText: function() {
            return E.call(this, !0)
        },
        asBinary: function() {
            return E.call(this, !1)
        },
        asNodeBuffer: function() {
            var t = I(this);
            return g.transformTo("nodebuffer", t)
        },
        asUint8Array: function() {
            var t = I(this);
            return g.transformTo("uint8array", t)
        },
        asArrayBuffer: function() {
            return this.asUint8Array().buffer
        }
    }, n = function(t, e) {
        var i, n = "";
        for (i = 0; e > i; i++) n += String.fromCharCode(255 & t), t >>>= 8;
        return n
    }, o = function() {
        var t, e, i = {};
        for (t = 0; t < arguments.length; t++)
            for (e in arguments[t]) arguments[t].hasOwnProperty(e) && void 0 === i[e] && (i[e] = arguments[t][e]);
        return i
    }, r = function(t) {
        return t = t || {}, t.base64 !== !0 || null !== t.binary && void 0 !== t.binary || (t.binary = !0), t = o(t, y), t.date = t.date || new Date, null !== t.compression && (t.compression = t.compression.toUpperCase()), t
    }, s = function(t, e, i) {
        var n, o, s = g.getTypeOf(e);
        if (i = r(i), "string" == typeof i.unixPermissions && (i.unixPermissions = parseInt(i.unixPermissions, 8)), i.unixPermissions && 16384 & i.unixPermissions && (i.dir = !0), i.dosPermissions && 16 & i.dosPermissions && (i.dir = !0), i.dir && (t = l(t)), i.createFolders && (n = a(t)) && c.call(this, n, !0),
            i.dir || null === e || void 0 === e) i.base64 = !1, i.binary = !1, e = null, s = null;
        else if ("string" === s) i.binary && !i.base64 && i.optimizedBinaryString !== !0 && (e = g.string2binary(e));
        else {
            if (i.base64 = !1, i.binary = !0, !(s || e instanceof S)) throw Error("The data of '" + t + "' is in an unsupported format !");
            "arraybuffer" === s && (e = g.transformTo("uint8array", e))
        }
        return o = new L(t, e, i), this.files[t] = o, o
    }, a = function(t) {
        "/" == t.slice(-1) && (t = t.substring(0, t.length - 1));
        var e = t.lastIndexOf("/");
        return e > 0 ? t.substring(0, e) : ""
    }, l = function(t) {
        return "/" != t.slice(-1) && (t += "/"), t
    }, c = function(t, e) {
        return e = void 0 !== e ? e : !1, t = l(t), this.files[t] || s.call(this, t, null, {
            dir: !0,
            createFolders: e
        }), this.files[t]
    }, h = function(t, e, i) {
        var n, o = new S;
        return t._data instanceof S ? (o.uncompressedSize = t._data.uncompressedSize, o.crc32 = t._data.crc32, 0 === o.uncompressedSize || t.dir ? (e = b.STORE, o.compressedContent = "", o.crc32 = 0) : t._data.compressionMethod === e.magic ? o.compressedContent = t._data.getCompressedContent() : (n = t._data.getContent(), o.compressedContent = e.compress(g.transformTo(e.compressInputType, n), i))) : (n = I(t), n && 0 !== n.length && !t.dir || (e = b.STORE, n = ""), o.uncompressedSize = n.length, o.crc32 = m(n), o.compressedContent = e.compress(g.transformTo(e.compressInputType, n), i)), o.compressedSize = o.compressedContent.length, o.compressionMethod = e.magic, o
    }, d = function(t, e) {
        var i = t;
        return t || (i = e ? 16893 : 33204), (65535 & i) << 16
    }, u = function(t, e) {
        return 63 & (t || 0)
    }, p = function(t, e, i, o, r) {
        var s, a, l, c, h, p, f, _, y, w = (i.compressedContent, g.transformTo("string", x.utf8encode(e.name))),
            b = e.comment || "",
            S = g.transformTo("string", x.utf8encode(b)),
            T = w.length !== e.name.length,
            C = S.length !== b.length,
            P = e.options,
            k = "",
            I = "",
            E = "";
        return l = e._initialMetadata.dir !== e.dir ? e.dir : P.dir, c = e._initialMetadata.date !== e.date ? e.date : P.date, h = 0, p = 0, l && (h |= 16), "UNIX" === r ? (p = 798, h |= d(e.unixPermissions, l)) : (p = 20, h |= u(e.dosPermissions, l)), s = c.getHours(), s <<= 6, s |= c.getMinutes(), s <<= 5, s |= c.getSeconds() / 2, a = c.getFullYear() - 1980, a <<= 4, a |= c.getMonth() + 1, a <<= 5, a |= c.getDate(), T && (I = n(1, 1) + n(m(w), 4) + w, k += "up" + n(I.length, 2) + I), C && (E = n(1, 1) + n(this.crc32(S), 4) + S, k += "uc" + n(E.length, 2) + E), f = "", f += "\n\x00", f += T || C ? "\x00\b" : "\x00\x00", f += i.compressionMethod, f += n(s, 2), f += n(a, 2), f += n(i.crc32, 4), f += n(i.compressedSize, 4), f += n(i.uncompressedSize, 4), f += n(w.length, 2), f += n(k.length, 2), _ = v.LOCAL_FILE_HEADER + f + w + k, y = v.CENTRAL_FILE_HEADER + n(p, 2) + f + n(S.length, 2) + "\x00\x00\x00\x00" + n(h, 4) + n(o, 4) + w + k + S, {
            fileRecord: _,
            dirRecord: y,
            compressedObject: i
        }
    }, f = {
        load: function(t, e) {
            throw Error("Load method is not defined. Is the file jszip-load.js included ?")
        },
        filter: function(t) {
            var e, i, n, r, s = [];
            for (e in this.files) this.files.hasOwnProperty(e) && (n = this.files[e], r = new L(n.name, n._data, o(n.options)), i = e.slice(this.root.length, e.length), e.slice(0, this.root.length) === this.root && t(i, r) && s.push(r));
            return s
        },
        file: function(t, e, i) {
            if (1 === arguments.length) {
                if (g.isRegExp(t)) {
                    var n = t;
                    return this.filter(function(t, e) {
                        return !e.dir && n.test(t)
                    })
                }
                return this.filter(function(e, i) {
                        return !i.dir && e === t
                    })[0] || null
            }
            return t = this.root + t, s.call(this, t, e, i), this
        },
        folder: function(t) {
            var e, i, n;
            return t ? g.isRegExp(t) ? this.filter(function(e, i) {
                return i.dir && t.test(e)
            }) : (e = this.root + t, i = c.call(this, e), n = this.clone(), n.root = i.name, n) : this
        },
        remove: function(t) {
            var e, i, n;
            if (t = this.root + t, e = this.files[t], e || ("/" != t.slice(-1) && (t += "/"), e = this.files[t]), e && !e.dir) delete this.files[t];
            else
                for (i = this.filter(function(e, i) {
                    return i.name.slice(0, t.length) === t
                }), n = 0; n < i.length; n++) delete this.files[i[n].name];
            return this
        },
        generate: function(t) {
            var e, i, r, s, a, l, c, d, u, f, _, m, y, S, T, x;
            t = o(t || {}, {
                base64: !0,
                compression: "STORE",
                compressionOptions: null,
                type: "base64",
                platform: "DOS",
                comment: null,
                mimeType: "application/zip"
            }), g.checkSupport(t.type), "darwin" !== t.platform && "freebsd" !== t.platform && "linux" !== t.platform && "sunos" !== t.platform || (t.platform = "UNIX"), "win32" === t.platform && (t.platform = "DOS"), e = [], i = 0, r = 0, l = g.transformTo("string", this.utf8encode(t.comment || this.comment || ""));
            for (c in this.files)
                if (this.files.hasOwnProperty(c)) {
                    if (d = this.files[c], u = d.options.compression || t.compression.toUpperCase(), f = b[u], !f) throw Error(u + " is not a valid compression method !");
                    _ = d.options.compressionOptions || t.compressionOptions || {}, m = h.call(this, d, f, _), y = p.call(this, c, d, m, i, t.platform), i += y.fileRecord.length + m.compressedSize, r += y.dirRecord.length, e.push(y)
                }
            for (S = "", S = v.CENTRAL_DIRECTORY_END + "\x00\x00\x00\x00" + n(e.length, 2) + n(e.length, 2) + n(r, 4) + n(i, 4) + n(l.length, 2) + l, T = t.type.toLowerCase(), s = "uint8array" === T || "arraybuffer" === T || "blob" === T || "nodebuffer" === T ? new P(i + r + S.length) : new C(i + r + S.length), a = 0; a < e.length; a++) s.append(e[a].fileRecord), s.append(e[a].compressedObject.compressedContent);
            for (a = 0; a < e.length; a++) s.append(e[a].dirRecord);
            switch (s.append(S), x = s.finalize(), t.type.toLowerCase()) {
                case "uint8array":
                case "arraybuffer":
                case "nodebuffer":
                    return g.transformTo(t.type.toLowerCase(), x);
                case "blob":
                    return g.arrayBuffer2Blob(g.transformTo("arraybuffer", x), t.mimeType);
                case "base64":
                    return t.base64 ? w.encode(x) : x;
                default:
                    return x
            }
        },
        crc32: function(t, e) {
            return m(t, e)
        },
        utf8encode: function(t) {
            return g.transformTo("string", x.utf8encode(t))
        },
        utf8decode: function(t) {
            return x.utf8decode(t)
        }
    }, t.exports = f
}, function(t, e, i) {
    (function(t) {
        "use strict";
        var i, n, o;
        if (e.base64 = !0, e.array = !0, e.string = !0, e.arraybuffer = "undefined" != typeof ArrayBuffer && "undefined" != typeof Uint8Array, e.nodebuffer = void 0 !== t, e.uint8array = "undefined" != typeof Uint8Array, "undefined" == typeof ArrayBuffer) e.blob = !1;
        else {
            i = new ArrayBuffer(0);
            try {
                e.blob = 0 === new Blob([i], {
                        type: "application/zip"
                    }).size
            } catch (r) {
                try {
                    n = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder, o = new n, o.append(i), e.blob = 0 === o.getBlob("application/zip").size
                } catch (r) {
                    e.blob = !1
                }
            }
        }
    }).call(e, i(179).Buffer)
}, function(t, e, i) {
    (function(t, n) {
        "use strict";

        function o() {
            function t() {}
            try {
                var e = new Uint8Array(1);
                return e.foo = function() {
                    return 42
                }, e.constructor = t, 42 === e.foo() && e.constructor === t && "function" == typeof e.subarray && 0 === e.subarray(1, 1).byteLength
            } catch (i) {
                return !1
            }
        }

        function r() {
            return t.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823
        }

        function t(e) {
            return this instanceof t ? (t.TYPED_ARRAY_SUPPORT || (this.length = 0, this.parent = void 0), "number" == typeof e ? s(this, e) : "string" == typeof e ? a(this, e, arguments.length > 1 ? arguments[1] : "utf8") : l(this, e)) : arguments.length > 1 ? new t(e, arguments[1]) : new t(e)
        }

        function s(e, i) {
            if (e = _(e, 0 > i ? 0 : 0 | g(i)), !t.TYPED_ARRAY_SUPPORT)
                for (var n = 0; i > n; n++) e[n] = 0;
            return e
        }

        function a(t, e, i) {
            "string" == typeof i && "" !== i || (i = "utf8");
            var n = 0 | v(e, i);
            return t = _(t, n), t.write(e, i), t
        }

        function l(e, i) {
            if (t.isBuffer(i)) return c(e, i);
            if (tt(i)) return h(e, i);
            if (null == i) throw new TypeError("must start with number, buffer, array or string");
            if ("undefined" != typeof ArrayBuffer) {
                if (i.buffer instanceof ArrayBuffer) return d(e, i);
                if (i instanceof ArrayBuffer) return u(e, i)
            }
            return i.length ? p(e, i) : f(e, i)
        }

        function c(t, e) {
            var i = 0 | g(e.length);
            return t = _(t, i), e.copy(t, 0, 0, i), t
        }

        function h(t, e) {
            var i, n = 0 | g(e.length);
            for (t = _(t, n), i = 0; n > i; i += 1) t[i] = 255 & e[i];
            return t
        }

        function d(t, e) {
            var i, n = 0 | g(e.length);
            for (t = _(t, n), i = 0; n > i; i += 1) t[i] = 255 & e[i];
            return t
        }

        function u(e, i) {
            return t.TYPED_ARRAY_SUPPORT ? (i.byteLength, e = t._augment(new Uint8Array(i))) : e = d(e, new Uint8Array(i)), e
        }

        function p(t, e) {
            var i, n = 0 | g(e.length);
            for (t = _(t, n), i = 0; n > i; i += 1) t[i] = 255 & e[i];
            return t
        }

        function f(t, e) {
            var i, n, o = 0;
            for ("Buffer" === e.type && tt(e.data) && (i = e.data, o = 0 | g(i.length)), t = _(t, o), n = 0; o > n; n += 1) t[n] = 255 & i[n];
            return t
        }

        function _(e, i) {
            t.TYPED_ARRAY_SUPPORT ? (e = t._augment(new Uint8Array(i)), e.__proto__ = t.prototype) : (e.length = i, e._isBuffer = !0);
            var n = 0 !== i && i <= t.poolSize >>> 1;
            return n && (e.parent = G), e
        }

        function g(t) {
            if (t >= r()) throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + r().toString(16) + " bytes");
            return 0 | t
        }

        function m(e, i) {
            if (!(this instanceof m)) return new m(e, i);
            var n = new t(e, i);
            return delete n.parent, n
        }

        function v(t, e) {
            var i, n;
            if ("string" != typeof t && (t = "" + t), i = t.length, 0 === i) return 0;
            for (n = !1;;) switch (e) {
                case "ascii":
                case "binary":
                case "raw":
                case "raws":
                    return i;
                case "utf8":
                case "utf-8":
                    return W(t).length;
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                    return 2 * i;
                case "hex":
                    return i >>> 1;
                case "base64":
                    return Y(t).length;
                default:
                    if (n) return W(t).length;
                    e = ("" + e).toLowerCase(), n = !0
            }
        }

        function y(t, e, i) {
            var n = !1;
            if (e = 0 | e, i = void 0 === i || i === 1 / 0 ? this.length : 0 | i, t || (t = "utf8"), 0 > e && (e = 0), i > this.length && (i = this.length), e >= i) return "";
            for (;;) switch (t) {
                case "hex":
                    return V(this, e, i);
                case "utf8":
                case "utf-8":
                    return k(this, e, i);
                case "ascii":
                    return E(this, e, i);
                case "binary":
                    return L(this, e, i);
                case "base64":
                    return P(this, e, i);
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                    return M(this, e, i);
                default:
                    if (n) throw new TypeError("Unknown encoding: " + t);
                    t = (t + "").toLowerCase(), n = !0
            }
        }

        function w(t, e, i, n) {
            var o, r, s, a;
            if (i = +i || 0, o = t.length - i, n ? (n = +n, n > o && (n = o)) : n = o, r = e.length, r % 2 !== 0) throw Error("Invalid hex string");
            for (n > r / 2 && (n = r / 2), s = 0; n > s; s++) {
                if (a = parseInt(e.substr(2 * s, 2), 16), isNaN(a)) throw Error("Invalid hex string");
                t[i + s] = a
            }
            return s
        }

        function b(t, e, i, n) {
            return j(W(e, t.length - i), t, i, n)
        }

        function S(t, e, i, n) {
            return j(U(e), t, i, n)
        }

        function T(t, e, i, n) {
            return S(t, e, i, n)
        }

        function x(t, e, i, n) {
            return j(Y(e), t, i, n)
        }

        function C(t, e, i, n) {
            return j(q(e, t.length - i), t, i, n)
        }

        function P(t, e, i) {
            return 0 === e && i === t.length ? J.fromByteArray(t) : J.fromByteArray(t.slice(e, i))
        }

        function k(t, e, i) {
            var n, o, r, s, a, l, c, h, d;
            for (i = Math.min(t.length, i), n = [], o = e; i > o;) {
                if (r = t[o], s = null, a = r > 239 ? 4 : r > 223 ? 3 : r > 191 ? 2 : 1, i >= o + a) switch (a) {
                    case 1:
                        128 > r && (s = r);
                        break;
                    case 2:
                        l = t[o + 1], 128 === (192 & l) && (d = (31 & r) << 6 | 63 & l, d > 127 && (s = d));
                        break;
                    case 3:
                        l = t[o + 1], c = t[o + 2], 128 === (192 & l) && 128 === (192 & c) && (d = (15 & r) << 12 | (63 & l) << 6 | 63 & c, d > 2047 && (55296 > d || d > 57343) && (s = d));
                        break;
                    case 4:
                        l = t[o + 1], c = t[o + 2], h = t[o + 3], 128 === (192 & l) && 128 === (192 & c) && 128 === (192 & h) && (d = (15 & r) << 18 | (63 & l) << 12 | (63 & c) << 6 | 63 & h, d > 65535 && 1114112 > d && (s = d))
                }
                null === s ? (s = 65533, a = 1) : s > 65535 && (s -= 65536, n.push(s >>> 10 & 1023 | 55296), s = 56320 | 1023 & s), n.push(s), o += a
            }
            return I(n)
        }

        function I(t) {
            var e, i, n = t.length;
            if (X >= n) return String.fromCharCode.apply(String, t);
            for (e = "", i = 0; n > i;) e += String.fromCharCode.apply(String, t.slice(i, i += X));
            return e
        }

        function E(t, e, i) {
            var n, o = "";
            for (i = Math.min(t.length, i), n = e; i > n; n++) o += String.fromCharCode(127 & t[n]);
            return o
        }

        function L(t, e, i) {
            var n, o = "";
            for (i = Math.min(t.length, i), n = e; i > n; n++) o += String.fromCharCode(t[n]);
            return o
        }

        function V(t, e, i) {
            var n, o, r = t.length;
            for ((!e || 0 > e) && (e = 0), (!i || 0 > i || i > r) && (i = r), n = "", o = e; i > o; o++) n += F(t[o]);
            return n
        }

        function M(t, e, i) {
            var n, o = t.slice(e, i),
                r = "";
            for (n = 0; n < o.length; n += 2) r += String.fromCharCode(o[n] + 256 * o[n + 1]);
            return r
        }

        function A(t, e, i) {
            if (t % 1 !== 0 || 0 > t) throw new RangeError("offset is not uint");
            if (t + e > i) throw new RangeError("Trying to access beyond buffer length")
        }

        function D(e, i, n, o, r, s) {
            if (!t.isBuffer(e)) throw new TypeError("buffer must be a Buffer instance");
            if (i > r || s > i) throw new RangeError("value is out of bounds");
            if (n + o > e.length) throw new RangeError("index out of range")
        }

        function O(t, e, i, n) {
            0 > e && (e = 65535 + e + 1);
            for (var o = 0, r = Math.min(t.length - i, 2); r > o; o++) t[i + o] = (e & 255 << 8 * (n ? o : 1 - o)) >>> 8 * (n ? o : 1 - o)
        }

        function R(t, e, i, n) {
            0 > e && (e = 4294967295 + e + 1);
            for (var o = 0, r = Math.min(t.length - i, 4); r > o; o++) t[i + o] = e >>> 8 * (n ? o : 3 - o) & 255
        }

        function $(t, e, i, n, o, r) {
            if (e > o || r > e) throw new RangeError("value is out of bounds");
            if (i + n > t.length) throw new RangeError("index out of range");
            if (0 > i) throw new RangeError("index out of range")
        }

        function B(t, e, i, n, o) {
            return o || $(t, e, i, 4, 3.4028234663852886e38, -3.4028234663852886e38), Z.write(t, e, i, n, 23, 4), i + 4
        }

        function z(t, e, i, n, o) {
            return o || $(t, e, i, 8, 1.7976931348623157e308, -1.7976931348623157e308), Z.write(t, e, i, n, 52, 8), i + 8
        }

        function N(t) {
            if (t = H(t).replace(Q, ""), t.length < 2) return "";
            for (; t.length % 4 !== 0;) t += "=";
            return t
        }

        function H(t) {
            return t.trim ? t.trim() : t.replace(/^\s+|\s+$/g, "")
        }

        function F(t) {
            return 16 > t ? "0" + t.toString(16) : t.toString(16)
        }

        function W(t, e) {
            var i, n, o, r, s;
            for (e = e || 1 / 0, n = t.length, o = null, r = [], s = 0; n > s; s++) {
                if (i = t.charCodeAt(s), i > 55295 && 57344 > i) {
                    if (!o) {
                        if (i > 56319) {
                            (e -= 3) > -1 && r.push(239, 191, 189);
                            continue
                        }
                        if (s + 1 === n) {
                            (e -= 3) > -1 && r.push(239, 191, 189);
                            continue
                        }
                        o = i;
                        continue
                    }
                    if (56320 > i) {
                        (e -= 3) > -1 && r.push(239, 191, 189), o = i;
                        continue
                    }
                    i = (o - 55296 << 10 | i - 56320) + 65536
                } else o && (e -= 3) > -1 && r.push(239, 191, 189);
                if (o = null, 128 > i) {
                    if ((e -= 1) < 0) break;
                    r.push(i)
                } else if (2048 > i) {
                    if ((e -= 2) < 0) break;
                    r.push(i >> 6 | 192, 63 & i | 128)
                } else if (65536 > i) {
                    if ((e -= 3) < 0) break;
                    r.push(i >> 12 | 224, i >> 6 & 63 | 128, 63 & i | 128)
                } else {
                    if (!(1114112 > i)) throw Error("Invalid code point");
                    if ((e -= 4) < 0) break;
                    r.push(i >> 18 | 240, i >> 12 & 63 | 128, i >> 6 & 63 | 128, 63 & i | 128)
                }
            }
            return r
        }

        function U(t) {
            var e, i = [];
            for (e = 0; e < t.length; e++) i.push(255 & t.charCodeAt(e));
            return i
        }

        function q(t, e) {
            var i, n, o, r, s = [];
            for (r = 0; r < t.length && !((e -= 2) < 0); r++) i = t.charCodeAt(r), n = i >> 8, o = i % 256, s.push(o), s.push(n);
            return s
        }

        function Y(t) {
            return J.toByteArray(N(t))
        }

        function j(t, e, i, n) {
            for (var o = 0; n > o && !(o + i >= e.length || o >= t.length); o++) e[o + i] = t[o];
            return o
        }
        var G, X, K, Q, J = i(180),
            Z = i(181),
            tt = i(182);
        e.Buffer = t, e.SlowBuffer = m, e.INSPECT_MAX_BYTES = 50, t.poolSize = 8192, G = {}, t.TYPED_ARRAY_SUPPORT = void 0 !== n.TYPED_ARRAY_SUPPORT ? n.TYPED_ARRAY_SUPPORT : o(), t.TYPED_ARRAY_SUPPORT ? (t.prototype.__proto__ = Uint8Array.prototype, t.__proto__ = Uint8Array) : (t.prototype.length = void 0, t.prototype.parent = void 0), t.isBuffer = function(t) {
            return !(null == t || !t._isBuffer)
        }, t.compare = function(e, i) {
            var n, o, r, s;
            if (!t.isBuffer(e) || !t.isBuffer(i)) throw new TypeError("Arguments must be Buffers");
            if (e === i) return 0;
            for (n = e.length, o = i.length, r = 0, s = Math.min(n, o); s > r && e[r] === i[r];) ++r;
            return r !== s && (n = e[r], o = i[r]), o > n ? -1 : n > o ? 1 : 0
        }, t.isEncoding = function(t) {
            switch ((t + "").toLowerCase()) {
                case "hex":
                case "utf8":
                case "utf-8":
                case "ascii":
                case "binary":
                case "base64":
                case "raw":
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                    return !0;
                default:
                    return !1
            }
        }, t.concat = function(e, i) {
            var n, o, r, s;
            if (!tt(e)) throw new TypeError("list argument must be an Array of Buffers.");
            if (0 === e.length) return new t(0);
            if (void 0 === i)
                for (i = 0, n = 0; n < e.length; n++) i += e[n].length;
            for (o = new t(i), r = 0, n = 0; n < e.length; n++) s = e[n], s.copy(o, r), r += s.length;
            return o
        }, t.byteLength = v, t.prototype.toString = function() {
            var t = 0 | this.length;
            return 0 === t ? "" : 0 === arguments.length ? k(this, 0, t) : y.apply(this, arguments)
        }, t.prototype.equals = function(e) {
            if (!t.isBuffer(e)) throw new TypeError("Argument must be a Buffer");
            return this === e ? !0 : 0 === t.compare(this, e)
        }, t.prototype.inspect = function() {
            var t = "",
                i = e.INSPECT_MAX_BYTES;
            return this.length > 0 && (t = this.toString("hex", 0, i).match(/.{2}/g).join(" "), this.length > i && (t += " ... ")), "<Buffer " + t + ">"
        }, t.prototype.compare = function(e) {
            if (!t.isBuffer(e)) throw new TypeError("Argument must be a Buffer");
            return this === e ? 0 : t.compare(this, e)
        }, t.prototype.indexOf = function(e, i) {
            function n(t, e, i) {
                var n, o = -1;
                for (n = 0; i + n < t.length; n++)
                    if (t[i + n] === e[-1 === o ? 0 : n - o]) {
                        if (-1 === o && (o = n), n - o + 1 === e.length) return i + o
                    } else o = -1;
                return -1
            }
            if (i > 2147483647 ? i = 2147483647 : -2147483648 > i && (i = -2147483648), i >>= 0, 0 === this.length) return -1;
            if (i >= this.length) return -1;
            if (0 > i && (i = Math.max(this.length + i, 0)), "string" == typeof e) return 0 === e.length ? -1 : String.prototype.indexOf.call(this, e, i);
            if (t.isBuffer(e)) return n(this, e, i);
            if ("number" == typeof e) return t.TYPED_ARRAY_SUPPORT && "function" === Uint8Array.prototype.indexOf ? Uint8Array.prototype.indexOf.call(this, e, i) : n(this, [e], i);
            throw new TypeError("val must be string, number or Buffer")
        }, t.prototype.get = function(t) {
            return console.log(".get() is deprecated. Access using array indexes instead."), this.readUInt8(t)
        }, t.prototype.set = function(t, e) {
            return console.log(".set() is deprecated. Access using array indexes instead."), this.writeUInt8(t, e)
        }, t.prototype.write = function(t, e, i, n) {
            var o, r, s;
            if (void 0 === e ? (n = "utf8", i = this.length, e = 0) : void 0 === i && "string" == typeof e ? (n = e, i = this.length, e = 0) : isFinite(e) ? (e = 0 | e, isFinite(i) ? (i = 0 | i, void 0 === n && (n = "utf8")) : (n = i, i = void 0)) : (o = n, n = e, e = 0 | i, i = o), r = this.length - e, (void 0 === i || i > r) && (i = r), t.length > 0 && (0 > i || 0 > e) || e > this.length) throw new RangeError("attempt to write outside buffer bounds");
            for (n || (n = "utf8"), s = !1;;) switch (n) {
                case "hex":
                    return w(this, t, e, i);
                case "utf8":
                case "utf-8":
                    return b(this, t, e, i);
                case "ascii":
                    return S(this, t, e, i);
                case "binary":
                    return T(this, t, e, i);
                case "base64":
                    return x(this, t, e, i);
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                    return C(this, t, e, i);
                default:
                    if (s) throw new TypeError("Unknown encoding: " + n);
                    n = ("" + n).toLowerCase(), s = !0
            }
        }, t.prototype.toJSON = function() {
            return {
                type: "Buffer",
                data: Array.prototype.slice.call(this._arr || this, 0)
            }
        }, X = 4096, t.prototype.slice = function(e, i) {
            var n, o, r, s = this.length;
            if (e = ~~e, i = void 0 === i ? s : ~~i, 0 > e ? (e += s, 0 > e && (e = 0)) : e > s && (e = s), 0 > i ? (i += s, 0 > i && (i = 0)) : i > s && (i = s), e > i && (i = e), t.TYPED_ARRAY_SUPPORT) n = t._augment(this.subarray(e, i));
            else
                for (o = i - e, n = new t(o, void 0), r = 0; o > r; r++) n[r] = this[r + e];
            return n.length && (n.parent = this.parent || this), n
        }, t.prototype.readUIntLE = function(t, e, i) {
            var n, o, r;
            for (t = 0 | t, e = 0 | e, i || A(t, e, this.length), n = this[t], o = 1, r = 0; ++r < e && (o *= 256);) n += this[t + r] * o;
            return n
        }, t.prototype.readUIntBE = function(t, e, i) {
            var n, o;
            for (t = 0 | t, e = 0 | e, i || A(t, e, this.length), n = this[t + --e], o = 1; e > 0 && (o *= 256);) n += this[t + --e] * o;
            return n
        }, t.prototype.readUInt8 = function(t, e) {
            return e || A(t, 1, this.length), this[t]
        }, t.prototype.readUInt16LE = function(t, e) {
            return e || A(t, 2, this.length), this[t] | this[t + 1] << 8
        }, t.prototype.readUInt16BE = function(t, e) {
            return e || A(t, 2, this.length), this[t] << 8 | this[t + 1]
        }, t.prototype.readUInt32LE = function(t, e) {
            return e || A(t, 4, this.length), (this[t] | this[t + 1] << 8 | this[t + 2] << 16) + 16777216 * this[t + 3]
        }, t.prototype.readUInt32BE = function(t, e) {
            return e || A(t, 4, this.length), 16777216 * this[t] + (this[t + 1] << 16 | this[t + 2] << 8 | this[t + 3])
        }, t.prototype.readIntLE = function(t, e, i) {
            var n, o, r;
            for (t = 0 | t, e = 0 | e, i || A(t, e, this.length), n = this[t], o = 1, r = 0; ++r < e && (o *= 256);) n += this[t + r] * o;
            return o *= 128, n >= o && (n -= Math.pow(2, 8 * e)), n
        }, t.prototype.readIntBE = function(t, e, i) {
            var n, o, r;
            for (t = 0 | t, e = 0 | e, i || A(t, e, this.length), n = e, o = 1, r = this[t + --n]; n > 0 && (o *= 256);) r += this[t + --n] * o;
            return o *= 128, r >= o && (r -= Math.pow(2, 8 * e)), r
        }, t.prototype.readInt8 = function(t, e) {
            return e || A(t, 1, this.length), 128 & this[t] ? -1 * (255 - this[t] + 1) : this[t]
        }, t.prototype.readInt16LE = function(t, e) {
            e || A(t, 2, this.length);
            var i = this[t] | this[t + 1] << 8;
            return 32768 & i ? 4294901760 | i : i
        }, t.prototype.readInt16BE = function(t, e) {
            e || A(t, 2, this.length);
            var i = this[t + 1] | this[t] << 8;
            return 32768 & i ? 4294901760 | i : i
        }, t.prototype.readInt32LE = function(t, e) {
            return e || A(t, 4, this.length), this[t] | this[t + 1] << 8 | this[t + 2] << 16 | this[t + 3] << 24
        }, t.prototype.readInt32BE = function(t, e) {
            return e || A(t, 4, this.length), this[t] << 24 | this[t + 1] << 16 | this[t + 2] << 8 | this[t + 3]
        }, t.prototype.readFloatLE = function(t, e) {
            return e || A(t, 4, this.length), Z.read(this, t, !0, 23, 4)
        }, t.prototype.readFloatBE = function(t, e) {
            return e || A(t, 4, this.length), Z.read(this, t, !1, 23, 4)
        }, t.prototype.readDoubleLE = function(t, e) {
            return e || A(t, 8, this.length), Z.read(this, t, !0, 52, 8)
        }, t.prototype.readDoubleBE = function(t, e) {
            return e || A(t, 8, this.length), Z.read(this, t, !1, 52, 8)
        }, t.prototype.writeUIntLE = function(t, e, i, n) {
            var o, r;
            for (t = +t, e = 0 | e, i = 0 | i, n || D(this, t, e, i, Math.pow(2, 8 * i), 0), o = 1, r = 0, this[e] = 255 & t; ++r < i && (o *= 256);) this[e + r] = t / o & 255;
            return e + i
        }, t.prototype.writeUIntBE = function(t, e, i, n) {
            var o, r;
            for (t = +t, e = 0 | e, i = 0 | i, n || D(this, t, e, i, Math.pow(2, 8 * i), 0), o = i - 1, r = 1, this[e + o] = 255 & t; --o >= 0 && (r *= 256);) this[e + o] = t / r & 255;
            return e + i
        }, t.prototype.writeUInt8 = function(e, i, n) {
            return e = +e, i = 0 | i, n || D(this, e, i, 1, 255, 0), t.TYPED_ARRAY_SUPPORT || (e = Math.floor(e)), this[i] = 255 & e, i + 1
        }, t.prototype.writeUInt16LE = function(e, i, n) {
            return e = +e, i = 0 | i, n || D(this, e, i, 2, 65535, 0), t.TYPED_ARRAY_SUPPORT ? (this[i] = 255 & e, this[i + 1] = e >>> 8) : O(this, e, i, !0), i + 2
        }, t.prototype.writeUInt16BE = function(e, i, n) {
            return e = +e, i = 0 | i, n || D(this, e, i, 2, 65535, 0), t.TYPED_ARRAY_SUPPORT ? (this[i] = e >>> 8, this[i + 1] = 255 & e) : O(this, e, i, !1), i + 2
        }, t.prototype.writeUInt32LE = function(e, i, n) {
            return e = +e, i = 0 | i, n || D(this, e, i, 4, 4294967295, 0), t.TYPED_ARRAY_SUPPORT ? (this[i + 3] = e >>> 24, this[i + 2] = e >>> 16, this[i + 1] = e >>> 8, this[i] = 255 & e) : R(this, e, i, !0), i + 4
        }, t.prototype.writeUInt32BE = function(e, i, n) {
            return e = +e, i = 0 | i, n || D(this, e, i, 4, 4294967295, 0), t.TYPED_ARRAY_SUPPORT ? (this[i] = e >>> 24, this[i + 1] = e >>> 16, this[i + 2] = e >>> 8, this[i + 3] = 255 & e) : R(this, e, i, !1), i + 4
        }, t.prototype.writeIntLE = function(t, e, i, n) {
            var o, r, s, a;
            for (t = +t, e = 0 | e, n || (o = Math.pow(2, 8 * i - 1), D(this, t, e, i, o - 1, -o)), r = 0, s = 1, a = 0 > t ? 1 : 0, this[e] = 255 & t; ++r < i && (s *= 256);) this[e + r] = (t / s >> 0) - a & 255;
            return e + i
        }, t.prototype.writeIntBE = function(t, e, i, n) {
            var o, r, s, a;
            for (t = +t, e = 0 | e, n || (o = Math.pow(2, 8 * i - 1), D(this, t, e, i, o - 1, -o)), r = i - 1, s = 1, a = 0 > t ? 1 : 0, this[e + r] = 255 & t; --r >= 0 && (s *= 256);) this[e + r] = (t / s >> 0) - a & 255;
            return e + i
        }, t.prototype.writeInt8 = function(e, i, n) {
            return e = +e, i = 0 | i, n || D(this, e, i, 1, 127, -128), t.TYPED_ARRAY_SUPPORT || (e = Math.floor(e)), 0 > e && (e = 255 + e + 1), this[i] = 255 & e, i + 1
        }, t.prototype.writeInt16LE = function(e, i, n) {
            return e = +e, i = 0 | i, n || D(this, e, i, 2, 32767, -32768), t.TYPED_ARRAY_SUPPORT ? (this[i] = 255 & e, this[i + 1] = e >>> 8) : O(this, e, i, !0), i + 2
        }, t.prototype.writeInt16BE = function(e, i, n) {
            return e = +e, i = 0 | i, n || D(this, e, i, 2, 32767, -32768), t.TYPED_ARRAY_SUPPORT ? (this[i] = e >>> 8, this[i + 1] = 255 & e) : O(this, e, i, !1), i + 2
        }, t.prototype.writeInt32LE = function(e, i, n) {
            return e = +e, i = 0 | i, n || D(this, e, i, 4, 2147483647, -2147483648), t.TYPED_ARRAY_SUPPORT ? (this[i] = 255 & e, this[i + 1] = e >>> 8, this[i + 2] = e >>> 16, this[i + 3] = e >>> 24) : R(this, e, i, !0), i + 4
        }, t.prototype.writeInt32BE = function(e, i, n) {
            return e = +e, i = 0 | i, n || D(this, e, i, 4, 2147483647, -2147483648), 0 > e && (e = 4294967295 + e + 1), t.TYPED_ARRAY_SUPPORT ? (this[i] = e >>> 24, this[i + 1] = e >>> 16, this[i + 2] = e >>> 8, this[i + 3] = 255 & e) : R(this, e, i, !1), i + 4
        }, t.prototype.writeFloatLE = function(t, e, i) {
            return B(this, t, e, !0, i)
        }, t.prototype.writeFloatBE = function(t, e, i) {
            return B(this, t, e, !1, i)
        }, t.prototype.writeDoubleLE = function(t, e, i) {
            return z(this, t, e, !0, i)
        }, t.prototype.writeDoubleBE = function(t, e, i) {
            return z(this, t, e, !1, i)
        }, t.prototype.copy = function(e, i, n, o) {
            var r, s;
            if (n || (n = 0), o || 0 === o || (o = this.length), i >= e.length && (i = e.length), i || (i = 0), o > 0 && n > o && (o = n), o === n) return 0;
            if (0 === e.length || 0 === this.length) return 0;
            if (0 > i) throw new RangeError("targetStart out of bounds");
            if (0 > n || n >= this.length) throw new RangeError("sourceStart out of bounds");
            if (0 > o) throw new RangeError("sourceEnd out of bounds");
            if (o > this.length && (o = this.length), e.length - i < o - n && (o = e.length - i + n), r = o - n, this === e && i > n && o > i)
                for (s = r - 1; s >= 0; s--) e[s + i] = this[s + n];
            else if (1e3 > r || !t.TYPED_ARRAY_SUPPORT)
                for (s = 0; r > s; s++) e[s + i] = this[s + n];
            else e._set(this.subarray(n, n + r), i);
            return r
        }, t.prototype.fill = function(t, e, i) {
            var n, o, r;
            if (t || (t = 0), e || (e = 0), i || (i = this.length), e > i) throw new RangeError("end < start");
            if (i !== e && 0 !== this.length) {
                if (0 > e || e >= this.length) throw new RangeError("start out of bounds");
                if (0 > i || i > this.length) throw new RangeError("end out of bounds");
                if ("number" == typeof t)
                    for (n = e; i > n; n++) this[n] = t;
                else
                    for (o = W("" + t), r = o.length, n = e; i > n; n++) this[n] = o[n % r];
                return this
            }
        }, t.prototype.toArrayBuffer = function() {
            var e, i, n;
            if ("undefined" != typeof Uint8Array) {
                if (t.TYPED_ARRAY_SUPPORT) return new t(this).buffer;
                for (e = new Uint8Array(this.length), i = 0, n = e.length; n > i; i += 1) e[i] = this[i];
                return e.buffer
            }
            throw new TypeError("Buffer.toArrayBuffer not supported in this browser")
        }, K = t.prototype, t._augment = function(e) {
            return e.constructor = t, e._isBuffer = !0, e._set = e.set, e.get = K.get, e.set = K.set, e.write = K.write, e.toString = K.toString, e.toLocaleString = K.toString, e.toJSON = K.toJSON, e.equals = K.equals, e.compare = K.compare, e.indexOf = K.indexOf, e.copy = K.copy, e.slice = K.slice, e.readUIntLE = K.readUIntLE, e.readUIntBE = K.readUIntBE, e.readUInt8 = K.readUInt8, e.readUInt16LE = K.readUInt16LE, e.readUInt16BE = K.readUInt16BE, e.readUInt32LE = K.readUInt32LE, e.readUInt32BE = K.readUInt32BE, e.readIntLE = K.readIntLE, e.readIntBE = K.readIntBE, e.readInt8 = K.readInt8, e.readInt16LE = K.readInt16LE, e.readInt16BE = K.readInt16BE, e.readInt32LE = K.readInt32LE, e.readInt32BE = K.readInt32BE, e.readFloatLE = K.readFloatLE, e.readFloatBE = K.readFloatBE, e.readDoubleLE = K.readDoubleLE, e.readDoubleBE = K.readDoubleBE, e.writeUInt8 = K.writeUInt8, e.writeUIntLE = K.writeUIntLE, e.writeUIntBE = K.writeUIntBE, e.writeUInt16LE = K.writeUInt16LE, e.writeUInt16BE = K.writeUInt16BE, e.writeUInt32LE = K.writeUInt32LE, e.writeUInt32BE = K.writeUInt32BE, e.writeIntLE = K.writeIntLE, e.writeIntBE = K.writeIntBE, e.writeInt8 = K.writeInt8, e.writeInt16LE = K.writeInt16LE, e.writeInt16BE = K.writeInt16BE, e.writeInt32LE = K.writeInt32LE, e.writeInt32BE = K.writeInt32BE, e.writeFloatLE = K.writeFloatLE, e.writeFloatBE = K.writeFloatBE, e.writeDoubleLE = K.writeDoubleLE, e.writeDoubleBE = K.writeDoubleBE, e.fill = K.fill, e.inspect = K.inspect, e.toArrayBuffer = K.toArrayBuffer, e
        }, Q = /[^+\/0-9A-Za-z-_]/g
    }).call(e, i(179).Buffer, function() {
        return this
    }())
}, function(t, e, i) {
    var n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
    ! function(t) {
        "use strict";

        function e(t) {
            var e = t.charCodeAt(0);
            return e === s || e === d ? 62 : e === a || e === u ? 63 : l > e ? -1 : l + 10 > e ? e - l + 26 + 26 : h + 26 > e ? e - h : c + 26 > e ? e - c + 26 : void 0
        }

        function i(t) {
            function i(t) {
                c[d++] = t
            }
            var n, o, s, a, l, c, h, d;
            if (t.length % 4 > 0) throw Error("Invalid string. Length must be a multiple of 4");
            for (h = t.length, l = "=" === t.charAt(h - 2) ? 2 : "=" === t.charAt(h - 1) ? 1 : 0, c = new r(3 * t.length / 4 - l), s = l > 0 ? t.length - 4 : t.length, d = 0, n = 0, o = 0; s > n; n += 4, o += 3) a = e(t.charAt(n)) << 18 | e(t.charAt(n + 1)) << 12 | e(t.charAt(n + 2)) << 6 | e(t.charAt(n + 3)), i((16711680 & a) >> 16), i((65280 & a) >> 8), i(255 & a);
            return 2 === l ? (a = e(t.charAt(n)) << 2 | e(t.charAt(n + 1)) >> 4, i(255 & a)) : 1 === l && (a = e(t.charAt(n)) << 10 | e(t.charAt(n + 1)) << 4 | e(t.charAt(n + 2)) >> 2, i(a >> 8 & 255), i(255 & a)), c
        }

        function o(t) {
            function e(t) {
                return n.charAt(t)
            }

            function i(t) {
                return e(t >> 18 & 63) + e(t >> 12 & 63) + e(t >> 6 & 63) + e(63 & t)
            }
            var o, r, s, a = t.length % 3,
                l = "";
            for (o = 0, s = t.length - a; s > o; o += 3) r = (t[o] << 16) + (t[o + 1] << 8) + t[o + 2], l += i(r);
            switch (a) {
                case 1:
                    r = t[t.length - 1], l += e(r >> 2), l += e(r << 4 & 63), l += "==";
                    break;
                case 2:
                    r = (t[t.length - 2] << 8) + t[t.length - 1], l += e(r >> 10), l += e(r >> 4 & 63), l += e(r << 2 & 63), l += "="
            }
            return l
        }
        var r = "undefined" != typeof Uint8Array ? Uint8Array : Array,
            s = "+".charCodeAt(0),
            a = "/".charCodeAt(0),
            l = "0".charCodeAt(0),
            c = "a".charCodeAt(0),
            h = "A".charCodeAt(0),
            d = "-".charCodeAt(0),
            u = "_".charCodeAt(0);
        t.toByteArray = i, t.fromByteArray = o
    }(e)
}, function(t, e) {
    e.read = function(t, e, i, n, o) {
        var r, s, a = 8 * o - n - 1,
            l = (1 << a) - 1,
            c = l >> 1,
            h = -7,
            d = i ? o - 1 : 0,
            u = i ? -1 : 1,
            p = t[e + d];
        for (d += u, r = p & (1 << -h) - 1, p >>= -h, h += a; h > 0; r = 256 * r + t[e + d], d += u, h -= 8);
        for (s = r & (1 << -h) - 1, r >>= -h, h += n; h > 0; s = 256 * s + t[e + d], d += u, h -= 8);
        if (0 === r) r = 1 - c;
        else {
            if (r === l) return s ? NaN : (p ? -1 : 1) * (1 / 0);
            s += Math.pow(2, n), r -= c
        }
        return (p ? -1 : 1) * s * Math.pow(2, r - n)
    }, e.write = function(t, e, i, n, o, r) {
        var s, a, l, c = 8 * r - o - 1,
            h = (1 << c) - 1,
            d = h >> 1,
            u = 23 === o ? Math.pow(2, -24) - Math.pow(2, -77) : 0,
            p = n ? 0 : r - 1,
            f = n ? 1 : -1,
            _ = 0 > e || 0 === e && 0 > 1 / e ? 1 : 0;
        for (e = Math.abs(e), isNaN(e) || e === 1 / 0 ? (a = isNaN(e) ? 1 : 0, s = h) : (s = Math.floor(Math.log(e) / Math.LN2), e * (l = Math.pow(2, -s)) < 1 && (s--, l *= 2), e += s + d >= 1 ? u / l : u * Math.pow(2, 1 - d), e * l >= 2 && (s++, l /= 2), s + d >= h ? (a = 0, s = h) : s + d >= 1 ? (a = (e * l - 1) * Math.pow(2, o), s += d) : (a = e * Math.pow(2, d - 1) * Math.pow(2, o), s = 0)); o >= 8; t[i + p] = 255 & a, p += f, a /= 256, o -= 8);
        for (s = s << o | a, c += o; c > 0; t[i + p] = 255 & s, p += f, s /= 256, c -= 8);
        t[i + p - f] |= 128 * _
    }
}, function(t, e) {
    var i = {}.toString;
    t.exports = Array.isArray || function(t) {
            return "[object Array]" == i.call(t)
        }
}, function(t, e, i) {
    "use strict";

    function n(t) {
        return t
    }

    function o(t, e) {
        for (var i = 0; i < t.length; ++i) e[i] = 255 & t.charCodeAt(i);
        return e
    }

    function r(t) {
        var i, n, o = 65536,
            r = [],
            s = t.length,
            a = e.getTypeOf(t),
            l = 0,
            c = !0;
        try {
            switch (a) {
                case "uint8array":
                    String.fromCharCode.apply(null, new Uint8Array(0));
                    break;
                case "nodebuffer":
                    String.fromCharCode.apply(null, h(0))
            }
        } catch (d) {
            c = !1
        }
        if (!c) {
            for (i = "", n = 0; n < t.length; n++) i += String.fromCharCode(t[n]);
            return i
        }
        for (; s > l && o > 1;) try {
            "array" === a || "nodebuffer" === a ? r.push(String.fromCharCode.apply(null, t.slice(l, Math.min(l + o, s)))) : r.push(String.fromCharCode.apply(null, t.subarray(l, Math.min(l + o, s)))), l += o
        } catch (d) {
            o = Math.floor(o / 2)
        }
        return r.join("")
    }

    function s(t, e) {
        for (var i = 0; i < t.length; i++) e[i] = t[i];
        return e
    }
    var a, l = i(178),
        c = i(184),
        h = i(202);
    e.string2binary = function(t) {
        var e, i = "";
        for (e = 0; e < t.length; e++) i += String.fromCharCode(255 & t.charCodeAt(e));
        return i
    }, e.arrayBuffer2Blob = function(t, i) {
        var n, o;
        e.checkSupport("blob"), i = i || "application/zip";
        try {
            return new Blob([t], {
                type: i
            })
        } catch (r) {
            try {
                return n = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder, o = new n, o.append(t), o.getBlob(i)
            } catch (r) {
                throw Error("Bug : can't construct the Blob.")
            }
        }
    }, e.applyFromCharCode = r, a = {}, a.string = {
        string: n,
        array: function(t) {
            return o(t, Array(t.length))
        },
        arraybuffer: function(t) {
            return a.string.uint8array(t).buffer
        },
        uint8array: function(t) {
            return o(t, new Uint8Array(t.length))
        },
        nodebuffer: function(t) {
            return o(t, h(t.length))
        }
    }, a.array = {
        string: r,
        array: n,
        arraybuffer: function(t) {
            return new Uint8Array(t).buffer
        },
        uint8array: function(t) {
            return new Uint8Array(t)
        },
        nodebuffer: function(t) {
            return h(t)
        }
    }, a.arraybuffer = {
        string: function(t) {
            return r(new Uint8Array(t))
        },
        array: function(t) {
            return s(new Uint8Array(t), Array(t.byteLength))
        },
        arraybuffer: n,
        uint8array: function(t) {
            return new Uint8Array(t)
        },
        nodebuffer: function(t) {
            return h(new Uint8Array(t))
        }
    }, a.uint8array = {
        string: r,
        array: function(t) {
            return s(t, Array(t.length))
        },
        arraybuffer: function(t) {
            return t.buffer
        },
        uint8array: n,
        nodebuffer: function(t) {
            return h(t)
        }
    }, a.nodebuffer = {
        string: r,
        array: function(t) {
            return s(t, Array(t.length))
        },
        arraybuffer: function(t) {
            return a.nodebuffer.uint8array(t).buffer
        },
        uint8array: function(t) {
            return s(t, new Uint8Array(t.length))
        },
        nodebuffer: n
    }, e.transformTo = function(t, i) {
        var n, o;
        return i || (i = ""), t ? (e.checkSupport(t), n = e.getTypeOf(i), o = a[n][t](i)) : i
    }, e.getTypeOf = function(t) {
        return "string" == typeof t ? "string" : "[object Array]" === Object.prototype.toString.call(t) ? "array" : l.nodebuffer && h.test(t) ? "nodebuffer" : l.uint8array && t instanceof Uint8Array ? "uint8array" : l.arraybuffer && t instanceof ArrayBuffer ? "arraybuffer" : void 0
    }, e.checkSupport = function(t) {
        var e = l[t.toLowerCase()];
        if (!e) throw Error(t + " is not supported by this browser")
    }, e.MAX_VALUE_16BITS = 65535, e.MAX_VALUE_32BITS = -1, e.pretty = function(t) {
        var e, i, n = "";
        for (i = 0; i < (t || "").length; i++) e = t.charCodeAt(i), n += "\\x" + (16 > e ? "0" : "") + e.toString(16).toUpperCase();
        return n
    }, e.findCompression = function(t) {
        for (var e in c)
            if (c.hasOwnProperty(e) && c[e].magic === t) return c[e];
        return null
    }, e.isRegExp = function(t) {
        return "[object RegExp]" === Object.prototype.toString.call(t)
    }
}, function(t, e, i) {
    "use strict";
    e.STORE = {
        magic: "\x00\x00",
        compress: function(t, e) {
            return t
        },
        uncompress: function(t) {
            return t
        },
        compressInputType: null,
        uncompressInputType: null
    }, e.DEFLATE = i(185)
}, function(t, e, i) {
    "use strict";
    var n = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Uint32Array,
        o = i(186);
    e.uncompressInputType = n ? "uint8array" : "array", e.compressInputType = n ? "uint8array" : "array", e.magic = "\b\x00", e.compress = function(t, e) {
        return o.deflateRaw(t, {
            level: e.level || -1
        })
    }, e.uncompress = function(t) {
        return o.inflateRaw(t)
    }
}, function(t, e, i) {
    "use strict";
    var n = i(187).assign,
        o = i(188),
        r = i(196),
        s = i(200),
        a = {};
    n(a, o, r, s), t.exports = a
}, function(t, e) {
    "use strict";
    var i, n, o = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Int32Array;
    e.assign = function(t) {
        for (var e, i, n = Array.prototype.slice.call(arguments, 1); n.length;)
            if (e = n.shift()) {
                if ("object" != typeof e) throw new TypeError(e + "must be non-object");
                for (i in e) e.hasOwnProperty(i) && (t[i] = e[i])
            }
        return t
    }, e.shrinkBuf = function(t, e) {
        return t.length === e ? t : t.subarray ? t.subarray(0, e) : (t.length = e, t)
    }, i = {
        arraySet: function(t, e, i, n, o) {
            if (e.subarray && t.subarray) return void t.set(e.subarray(i, i + n), o);
            for (var r = 0; n > r; r++) t[o + r] = e[i + r]
        },
        flattenChunks: function(t) {
            var e, i, n, o, r, s;
            for (n = 0, e = 0, i = t.length; i > e; e++) n += t[e].length;
            for (s = new Uint8Array(n), o = 0, e = 0, i = t.length; i > e; e++) r = t[e], s.set(r, o), o += r.length;
            return s
        }
    }, n = {
        arraySet: function(t, e, i, n, o) {
            for (var r = 0; n > r; r++) t[o + r] = e[i + r]
        },
        flattenChunks: function(t) {
            return [].concat.apply([], t)
        }
    }, e.setTyped = function(t) {
        t ? (e.Buf8 = Uint8Array, e.Buf16 = Uint16Array, e.Buf32 = Int32Array, e.assign(e, i)) : (e.Buf8 = Array, e.Buf16 = Array, e.Buf32 = Array, e.assign(e, n))
    }, e.setTyped(o)
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        var i = new w(e);
        if (i.push(t, !0), i.err) throw i.msg;
        return i.result
    }

    function o(t, e) {
        return e = e || {}, e.raw = !0, n(t, e)
    }

    function r(t, e) {
        return e = e || {}, e.gzip = !0, n(t, e)
    }
    var s = i(189),
        a = i(187),
        l = i(194),
        c = i(193),
        h = i(195),
        d = Object.prototype.toString,
        u = 0,
        p = 4,
        f = 0,
        _ = 1,
        g = 2,
        m = -1,
        v = 0,
        y = 8,
        w = function(t) {
            var e, i;
            if (this.options = a.assign({
                    level: m,
                    method: y,
                    chunkSize: 16384,
                    windowBits: 15,
                    memLevel: 8,
                    strategy: v,
                    to: ""
                }, t || {}), e = this.options, e.raw && e.windowBits > 0 ? e.windowBits = -e.windowBits : e.gzip && e.windowBits > 0 && e.windowBits < 16 && (e.windowBits += 16),
                    this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new h, this.strm.avail_out = 0, i = s.deflateInit2(this.strm, e.level, e.method, e.windowBits, e.memLevel, e.strategy), i !== f) throw Error(c[i]);
            e.header && s.deflateSetHeader(this.strm, e.header)
        };
    w.prototype.push = function(t, e) {
        var i, n, o = this.strm,
            r = this.options.chunkSize;
        if (this.ended) return !1;
        n = e === ~~e ? e : e === !0 ? p : u, "string" == typeof t ? o.input = l.string2buf(t) : "[object ArrayBuffer]" === d.call(t) ? o.input = new Uint8Array(t) : o.input = t, o.next_in = 0, o.avail_in = o.input.length;
        do {
            if (0 === o.avail_out && (o.output = new a.Buf8(r), o.next_out = 0, o.avail_out = r), i = s.deflate(o, n), i !== _ && i !== f) return this.onEnd(i), this.ended = !0, !1;
            0 !== o.avail_out && (0 !== o.avail_in || n !== p && n !== g) || ("string" === this.options.to ? this.onData(l.buf2binstring(a.shrinkBuf(o.output, o.next_out))) : this.onData(a.shrinkBuf(o.output, o.next_out)))
        } while ((o.avail_in > 0 || 0 === o.avail_out) && i !== _);
        return n === p ? (i = s.deflateEnd(this.strm), this.onEnd(i), this.ended = !0, i === f) : n === g ? (this.onEnd(f), o.avail_out = 0, !0) : !0
    }, w.prototype.onData = function(t) {
        this.chunks.push(t)
    }, w.prototype.onEnd = function(t) {
        t === f && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = a.flattenChunks(this.chunks)), this.chunks = [], this.err = t, this.msg = this.strm.msg
    }, e.Deflate = w, e.deflate = n, e.deflateRaw = o, e.gzip = r
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        return t.msg = V[e], e
    }

    function o(t) {
        return (t << 1) - (t > 4 ? 9 : 0)
    }

    function r(t) {
        for (var e = t.length; --e >= 0;) t[e] = 0
    }

    function s(t) {
        var e = t.state,
            i = e.pending;
        i > t.avail_out && (i = t.avail_out), 0 !== i && (k.arraySet(t.output, e.pending_buf, e.pending_out, i, t.next_out), t.next_out += i, e.pending_out += i, t.total_out += i, t.avail_out -= i, e.pending -= i, 0 === e.pending && (e.pending_out = 0))
    }

    function a(t, e) {
        I._tr_flush_block(t, t.block_start >= 0 ? t.block_start : -1, t.strstart - t.block_start, e), t.block_start = t.strstart, s(t.strm)
    }

    function l(t, e) {
        t.pending_buf[t.pending++] = e
    }

    function c(t, e) {
        t.pending_buf[t.pending++] = e >>> 8 & 255, t.pending_buf[t.pending++] = 255 & e
    }

    function h(t, e, i, n) {
        var o = t.avail_in;
        return o > n && (o = n), 0 === o ? 0 : (t.avail_in -= o, k.arraySet(e, t.input, t.next_in, o, i), 1 === t.state.wrap ? t.adler = E(t.adler, e, o, i) : 2 === t.state.wrap && (t.adler = L(t.adler, e, o, i)), t.next_in += o, t.total_in += o, o)
    }

    function d(t, e) {
        var i, n, o = t.max_chain_length,
            r = t.strstart,
            s = t.prev_length,
            a = t.nice_match,
            l = t.strstart > t.w_size - lt ? t.strstart - (t.w_size - lt) : 0,
            c = t.window,
            h = t.w_mask,
            d = t.prev,
            u = t.strstart + at,
            p = c[r + s - 1],
            f = c[r + s];
        t.prev_length >= t.good_match && (o >>= 2), a > t.lookahead && (a = t.lookahead);
        do
            if (i = e, c[i + s] === f && c[i + s - 1] === p && c[i] === c[r] && c[++i] === c[r + 1]) {
                r += 2, i++;
                do; while (c[++r] === c[++i] && c[++r] === c[++i] && c[++r] === c[++i] && c[++r] === c[++i] && c[++r] === c[++i] && c[++r] === c[++i] && c[++r] === c[++i] && c[++r] === c[++i] && u > r);
                if (n = at - (u - r), r = u - at, n > s) {
                    if (t.match_start = e, s = n, n >= a) break;
                    p = c[r + s - 1], f = c[r + s]
                }
            }
        while ((e = d[e & h]) > l && 0 !== --o);
        return s <= t.lookahead ? s : t.lookahead
    }

    function u(t) {
        var e, i, n, o, r, s = t.w_size;
        do {
            if (o = t.window_size - t.lookahead - t.strstart, t.strstart >= s + (s - lt)) {
                k.arraySet(t.window, t.window, s, s, 0), t.match_start -= s, t.strstart -= s, t.block_start -= s, i = t.hash_size, e = i;
                do n = t.head[--e], t.head[e] = n >= s ? n - s : 0; while (--i);
                i = s, e = i;
                do n = t.prev[--e], t.prev[e] = n >= s ? n - s : 0; while (--i);
                o += s
            }
            if (0 === t.strm.avail_in) break;
            if (i = h(t.strm, t.window, t.strstart + t.lookahead, o), t.lookahead += i, t.lookahead + t.insert >= st)
                for (r = t.strstart - t.insert, t.ins_h = t.window[r], t.ins_h = (t.ins_h << t.hash_shift ^ t.window[r + 1]) & t.hash_mask; t.insert && (t.ins_h = (t.ins_h << t.hash_shift ^ t.window[r + st - 1]) & t.hash_mask, t.prev[r & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = r, r++, t.insert--, !(t.lookahead + t.insert < st)););
        } while (t.lookahead < lt && 0 !== t.strm.avail_in)
    }

    function p(t, e) {
        var i, n = 65535;
        for (n > t.pending_buf_size - 5 && (n = t.pending_buf_size - 5);;) {
            if (t.lookahead <= 1) {
                if (u(t), 0 === t.lookahead && e === M) return mt;
                if (0 === t.lookahead) break
            }
            if (t.strstart += t.lookahead, t.lookahead = 0, i = t.block_start + n, (0 === t.strstart || t.strstart >= i) && (t.lookahead = t.strstart - i, t.strstart = i, a(t, !1), 0 === t.strm.avail_out)) return mt;
            if (t.strstart - t.block_start >= t.w_size - lt && (a(t, !1), 0 === t.strm.avail_out)) return mt
        }
        return t.insert = 0, e === O ? (a(t, !0), 0 === t.strm.avail_out ? yt : wt) : t.strstart > t.block_start && (a(t, !1), 0 === t.strm.avail_out) ? mt : mt
    }

    function f(t, e) {
        for (var i, n;;) {
            if (t.lookahead < lt) {
                if (u(t), t.lookahead < lt && e === M) return mt;
                if (0 === t.lookahead) break
            }
            if (i = 0, t.lookahead >= st && (t.ins_h = (t.ins_h << t.hash_shift ^ t.window[t.strstart + st - 1]) & t.hash_mask, i = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = t.strstart), 0 !== i && t.strstart - i <= t.w_size - lt && (t.match_length = d(t, i)), t.match_length >= st)
                if (n = I._tr_tally(t, t.strstart - t.match_start, t.match_length - st), t.lookahead -= t.match_length, t.match_length <= t.max_lazy_match && t.lookahead >= st) {
                    t.match_length--;
                    do t.strstart++, t.ins_h = (t.ins_h << t.hash_shift ^ t.window[t.strstart + st - 1]) & t.hash_mask, i = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = t.strstart; while (0 !== --t.match_length);
                    t.strstart++
                } else t.strstart += t.match_length, t.match_length = 0, t.ins_h = t.window[t.strstart], t.ins_h = (t.ins_h << t.hash_shift ^ t.window[t.strstart + 1]) & t.hash_mask;
            else n = I._tr_tally(t, 0, t.window[t.strstart]), t.lookahead--, t.strstart++;
            if (n && (a(t, !1), 0 === t.strm.avail_out)) return mt
        }
        return t.insert = t.strstart < st - 1 ? t.strstart : st - 1, e === O ? (a(t, !0), 0 === t.strm.avail_out ? yt : wt) : t.last_lit && (a(t, !1), 0 === t.strm.avail_out) ? mt : vt
    }

    function _(t, e) {
        for (var i, n, o;;) {
            if (t.lookahead < lt) {
                if (u(t), t.lookahead < lt && e === M) return mt;
                if (0 === t.lookahead) break
            }
            if (i = 0, t.lookahead >= st && (t.ins_h = (t.ins_h << t.hash_shift ^ t.window[t.strstart + st - 1]) & t.hash_mask, i = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = t.strstart), t.prev_length = t.match_length, t.prev_match = t.match_start, t.match_length = st - 1, 0 !== i && t.prev_length < t.max_lazy_match && t.strstart - i <= t.w_size - lt && (t.match_length = d(t, i), t.match_length <= 5 && (t.strategy === W || t.match_length === st && t.strstart - t.match_start > 4096) && (t.match_length = st - 1)), t.prev_length >= st && t.match_length <= t.prev_length) {
                o = t.strstart + t.lookahead - st, n = I._tr_tally(t, t.strstart - 1 - t.prev_match, t.prev_length - st), t.lookahead -= t.prev_length - 1, t.prev_length -= 2;
                do ++t.strstart <= o && (t.ins_h = (t.ins_h << t.hash_shift ^ t.window[t.strstart + st - 1]) & t.hash_mask, i = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = t.strstart); while (0 !== --t.prev_length);
                if (t.match_available = 0, t.match_length = st - 1, t.strstart++, n && (a(t, !1), 0 === t.strm.avail_out)) return mt
            } else if (t.match_available) {
                if (n = I._tr_tally(t, 0, t.window[t.strstart - 1]), n && a(t, !1), t.strstart++, t.lookahead--, 0 === t.strm.avail_out) return mt
            } else t.match_available = 1, t.strstart++, t.lookahead--
        }
        return t.match_available && (n = I._tr_tally(t, 0, t.window[t.strstart - 1]), t.match_available = 0), t.insert = t.strstart < st - 1 ? t.strstart : st - 1, e === O ? (a(t, !0), 0 === t.strm.avail_out ? yt : wt) : t.last_lit && (a(t, !1), 0 === t.strm.avail_out) ? mt : vt
    }

    function g(t, e) {
        for (var i, n, o, r, s = t.window;;) {
            if (t.lookahead <= at) {
                if (u(t), t.lookahead <= at && e === M) return mt;
                if (0 === t.lookahead) break
            }
            if (t.match_length = 0, t.lookahead >= st && t.strstart > 0 && (o = t.strstart - 1, n = s[o], n === s[++o] && n === s[++o] && n === s[++o])) {
                r = t.strstart + at;
                do; while (n === s[++o] && n === s[++o] && n === s[++o] && n === s[++o] && n === s[++o] && n === s[++o] && n === s[++o] && n === s[++o] && r > o);
                t.match_length = at - (r - o), t.match_length > t.lookahead && (t.match_length = t.lookahead)
            }
            if (t.match_length >= st ? (i = I._tr_tally(t, 1, t.match_length - st), t.lookahead -= t.match_length, t.strstart += t.match_length, t.match_length = 0) : (i = I._tr_tally(t, 0, t.window[t.strstart]), t.lookahead--, t.strstart++), i && (a(t, !1), 0 === t.strm.avail_out)) return mt
        }
        return t.insert = 0, e === O ? (a(t, !0), 0 === t.strm.avail_out ? yt : wt) : t.last_lit && (a(t, !1), 0 === t.strm.avail_out) ? mt : vt
    }

    function m(t, e) {
        for (var i;;) {
            if (0 === t.lookahead && (u(t), 0 === t.lookahead)) {
                if (e === M) return mt;
                break
            }
            if (t.match_length = 0, i = I._tr_tally(t, 0, t.window[t.strstart]), t.lookahead--, t.strstart++, i && (a(t, !1), 0 === t.strm.avail_out)) return mt
        }
        return t.insert = 0, e === O ? (a(t, !0), 0 === t.strm.avail_out ? yt : wt) : t.last_lit && (a(t, !1), 0 === t.strm.avail_out) ? mt : vt
    }

    function v(t) {
        t.window_size = 2 * t.w_size, r(t.head), t.max_lazy_match = Tt[t.level].max_lazy, t.good_match = Tt[t.level].good_length, t.nice_match = Tt[t.level].nice_length, t.max_chain_length = Tt[t.level].max_chain, t.strstart = 0, t.block_start = 0, t.lookahead = 0, t.insert = 0, t.match_length = t.prev_length = st - 1, t.match_available = 0, t.ins_h = 0
    }

    function y() {
        this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = X, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new k.Buf16(2 * ot), this.dyn_dtree = new k.Buf16(2 * (2 * it + 1)), this.bl_tree = new k.Buf16(2 * (2 * nt + 1)), r(this.dyn_ltree), r(this.dyn_dtree), r(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new k.Buf16(rt + 1), this.heap = new k.Buf16(2 * et + 1), r(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new k.Buf16(2 * et + 1), r(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0
    }

    function w(t) {
        var e;
        return t && t.state ? (t.total_in = t.total_out = 0, t.data_type = G, e = t.state, e.pending = 0, e.pending_out = 0, e.wrap < 0 && (e.wrap = -e.wrap), e.status = e.wrap ? ht : _t, t.adler = 2 === e.wrap ? 0 : 1, e.last_flush = M, I._tr_init(e), $) : n(t, z)
    }

    function b(t) {
        var e = w(t);
        return e === $ && v(t.state), e
    }

    function S(t, e) {
        return t && t.state ? 2 !== t.state.wrap ? z : (t.state.gzhead = e, $) : z
    }

    function T(t, e, i, o, r, s) {
        var a, l;
        return t ? (a = 1, e === F && (e = 6), 0 > o ? (a = 0, o = -o) : o > 15 && (a = 2, o -= 16), 1 > r || r > K || i !== X || 8 > o || o > 15 || 0 > e || e > 9 || 0 > s || s > Y ? n(t, z) : (8 === o && (o = 9), l = new y, t.state = l, l.strm = t, l.wrap = a, l.gzhead = null, l.w_bits = o, l.w_size = 1 << l.w_bits, l.w_mask = l.w_size - 1, l.hash_bits = r + 7, l.hash_size = 1 << l.hash_bits, l.hash_mask = l.hash_size - 1, l.hash_shift = ~~((l.hash_bits + st - 1) / st), l.window = new k.Buf8(2 * l.w_size), l.head = new k.Buf16(l.hash_size), l.prev = new k.Buf16(l.w_size), l.lit_bufsize = 1 << r + 6, l.pending_buf_size = 4 * l.lit_bufsize, l.pending_buf = new k.Buf8(l.pending_buf_size), l.d_buf = l.lit_bufsize >> 1, l.l_buf = 3 * l.lit_bufsize, l.level = e, l.strategy = s, l.method = i, b(t))) : z
    }

    function x(t, e) {
        return T(t, e, X, Q, J, j)
    }

    function C(t, e) {
        var i, a, h, d, u, p, f;
        if (!t || !t.state || e > R || 0 > e) return t ? n(t, z) : z;
        if (a = t.state, !t.output || !t.input && 0 !== t.avail_in || a.status === gt && e !== O) return n(t, 0 === t.avail_out ? H : z);
        if (a.strm = t, i = a.last_flush, a.last_flush = e, a.status === ht && (2 === a.wrap ? (t.adler = 0, l(a, 31), l(a, 139), l(a, 8), a.gzhead ? (l(a, (a.gzhead.text ? 1 : 0) + (a.gzhead.hcrc ? 2 : 0) + (a.gzhead.extra ? 4 : 0) + (a.gzhead.name ? 8 : 0) + (a.gzhead.comment ? 16 : 0)), l(a, 255 & a.gzhead.time), l(a, a.gzhead.time >> 8 & 255), l(a, a.gzhead.time >> 16 & 255), l(a, a.gzhead.time >> 24 & 255), l(a, 9 === a.level ? 2 : a.strategy >= U || a.level < 2 ? 4 : 0), l(a, 255 & a.gzhead.os), a.gzhead.extra && a.gzhead.extra.length && (l(a, 255 & a.gzhead.extra.length), l(a, a.gzhead.extra.length >> 8 & 255)), a.gzhead.hcrc && (t.adler = L(t.adler, a.pending_buf, a.pending, 0)), a.gzindex = 0, a.status = dt) : (l(a, 0), l(a, 0), l(a, 0), l(a, 0), l(a, 0), l(a, 9 === a.level ? 2 : a.strategy >= U || a.level < 2 ? 4 : 0), l(a, bt), a.status = _t)) : (u = X + (a.w_bits - 8 << 4) << 8, p = -1, p = a.strategy >= U || a.level < 2 ? 0 : a.level < 6 ? 1 : 6 === a.level ? 2 : 3, u |= p << 6, 0 !== a.strstart && (u |= ct), u += 31 - u % 31, a.status = _t, c(a, u), 0 !== a.strstart && (c(a, t.adler >>> 16), c(a, 65535 & t.adler)), t.adler = 1)), a.status === dt)
            if (a.gzhead.extra) {
                for (h = a.pending; a.gzindex < (65535 & a.gzhead.extra.length) && (a.pending !== a.pending_buf_size || (a.gzhead.hcrc && a.pending > h && (t.adler = L(t.adler, a.pending_buf, a.pending - h, h)), s(t), h = a.pending, a.pending !== a.pending_buf_size));) l(a, 255 & a.gzhead.extra[a.gzindex]), a.gzindex++;
                a.gzhead.hcrc && a.pending > h && (t.adler = L(t.adler, a.pending_buf, a.pending - h, h)), a.gzindex === a.gzhead.extra.length && (a.gzindex = 0, a.status = ut)
            } else a.status = ut;
        if (a.status === ut)
            if (a.gzhead.name) {
                h = a.pending;
                do {
                    if (a.pending === a.pending_buf_size && (a.gzhead.hcrc && a.pending > h && (t.adler = L(t.adler, a.pending_buf, a.pending - h, h)), s(t), h = a.pending, a.pending === a.pending_buf_size)) {
                        d = 1;
                        break
                    }
                    d = a.gzindex < a.gzhead.name.length ? 255 & a.gzhead.name.charCodeAt(a.gzindex++) : 0, l(a, d)
                } while (0 !== d);
                a.gzhead.hcrc && a.pending > h && (t.adler = L(t.adler, a.pending_buf, a.pending - h, h)), 0 === d && (a.gzindex = 0, a.status = pt)
            } else a.status = pt;
        if (a.status === pt)
            if (a.gzhead.comment) {
                h = a.pending;
                do {
                    if (a.pending === a.pending_buf_size && (a.gzhead.hcrc && a.pending > h && (t.adler = L(t.adler, a.pending_buf, a.pending - h, h)), s(t), h = a.pending, a.pending === a.pending_buf_size)) {
                        d = 1;
                        break
                    }
                    d = a.gzindex < a.gzhead.comment.length ? 255 & a.gzhead.comment.charCodeAt(a.gzindex++) : 0, l(a, d)
                } while (0 !== d);
                a.gzhead.hcrc && a.pending > h && (t.adler = L(t.adler, a.pending_buf, a.pending - h, h)), 0 === d && (a.status = ft)
            } else a.status = ft;
        if (a.status === ft && (a.gzhead.hcrc ? (a.pending + 2 > a.pending_buf_size && s(t), a.pending + 2 <= a.pending_buf_size && (l(a, 255 & t.adler), l(a, t.adler >> 8 & 255), t.adler = 0, a.status = _t)) : a.status = _t), 0 !== a.pending) {
            if (s(t), 0 === t.avail_out) return a.last_flush = -1, $
        } else if (0 === t.avail_in && o(e) <= o(i) && e !== O) return n(t, H);
        if (a.status === gt && 0 !== t.avail_in) return n(t, H);
        if (0 !== t.avail_in || 0 !== a.lookahead || e !== M && a.status !== gt) {
            if (f = a.strategy === U ? m(a, e) : a.strategy === q ? g(a, e) : Tt[a.level].func(a, e), f !== yt && f !== wt || (a.status = gt), f === mt || f === yt) return 0 === t.avail_out && (a.last_flush = -1), $;
            if (f === vt && (e === A ? I._tr_align(a) : e !== R && (I._tr_stored_block(a, 0, 0, !1), e === D && (r(a.head), 0 === a.lookahead && (a.strstart = 0, a.block_start = 0, a.insert = 0))), s(t), 0 === t.avail_out)) return a.last_flush = -1, $
        }
        return e !== O ? $ : a.wrap <= 0 ? B : (2 === a.wrap ? (l(a, 255 & t.adler), l(a, t.adler >> 8 & 255), l(a, t.adler >> 16 & 255), l(a, t.adler >> 24 & 255), l(a, 255 & t.total_in), l(a, t.total_in >> 8 & 255), l(a, t.total_in >> 16 & 255), l(a, t.total_in >> 24 & 255)) : (c(a, t.adler >>> 16), c(a, 65535 & t.adler)), s(t), a.wrap > 0 && (a.wrap = -a.wrap), 0 !== a.pending ? $ : B)
    }

    function P(t) {
        var e;
        return t && t.state ? (e = t.state.status, e !== ht && e !== dt && e !== ut && e !== pt && e !== ft && e !== _t && e !== gt ? n(t, z) : (t.state = null, e === _t ? n(t, N) : $)) : z
    }
    var k = i(187),
        I = i(190),
        E = i(191),
        L = i(192),
        V = i(193),
        M = 0,
        A = 1,
        D = 3,
        O = 4,
        R = 5,
        $ = 0,
        B = 1,
        z = -2,
        N = -3,
        H = -5,
        F = -1,
        W = 1,
        U = 2,
        q = 3,
        Y = 4,
        j = 0,
        G = 2,
        X = 8,
        K = 9,
        Q = 15,
        J = 8,
        Z = 29,
        tt = 256,
        et = tt + 1 + Z,
        it = 30,
        nt = 19,
        ot = 2 * et + 1,
        rt = 15,
        st = 3,
        at = 258,
        lt = at + st + 1,
        ct = 32,
        ht = 42,
        dt = 69,
        ut = 73,
        pt = 91,
        ft = 103,
        _t = 113,
        gt = 666,
        mt = 1,
        vt = 2,
        yt = 3,
        wt = 4,
        bt = 3,
        St = function(t, e, i, n, o) {
            this.good_length = t, this.max_lazy = e, this.nice_length = i, this.max_chain = n, this.func = o
        },
        Tt = [new St(0, 0, 0, 0, p), new St(4, 4, 8, 4, f), new St(4, 5, 16, 8, f), new St(4, 6, 32, 32, f), new St(4, 4, 16, 16, _), new St(8, 16, 32, 32, _), new St(8, 16, 128, 128, _), new St(8, 32, 128, 256, _), new St(32, 128, 258, 1024, _), new St(32, 258, 258, 4096, _)];
    e.deflateInit = x, e.deflateInit2 = T, e.deflateReset = b, e.deflateResetKeep = w, e.deflateSetHeader = S, e.deflate = C, e.deflateEnd = P, e.deflateInfo = "pako deflate (from Nodeca project)"
}, function(t, e, i) {
    "use strict";

    function n(t) {
        for (var e = t.length; --e >= 0;) t[e] = 0
    }

    function o(t) {
        return 256 > t ? V[t] : V[256 + (t >>> 7)]
    }

    function r(t, e) {
        t.pending_buf[t.pending++] = 255 & e, t.pending_buf[t.pending++] = e >>> 8 & 255
    }

    function s(t, e, i) {
        t.bi_valid > ot - i ? (t.bi_buf |= e << t.bi_valid & 65535, r(t, t.bi_buf), t.bi_buf = e >> ot - t.bi_valid, t.bi_valid += i - ot) : (t.bi_buf |= e << t.bi_valid & 65535, t.bi_valid += i)
    }

    function a(t, e, i) {
        s(t, i[2 * e], i[2 * e + 1])
    }

    function l(t, e) {
        var i = 0;
        do i |= 1 & t, t >>>= 1, i <<= 1; while (--e > 0);
        return i >>> 1
    }

    function c(t) {
        16 === t.bi_valid ? (r(t, t.bi_buf), t.bi_buf = 0, t.bi_valid = 0) : t.bi_valid >= 8 && (t.pending_buf[t.pending++] = 255 & t.bi_buf, t.bi_buf >>= 8, t.bi_valid -= 8)
    }

    function h(t, e) {
        var i, n, o, r, s, a, l = e.dyn_tree,
            c = e.max_code,
            h = e.stat_desc.static_tree,
            d = e.stat_desc.has_stree,
            u = e.stat_desc.extra_bits,
            p = e.stat_desc.extra_base,
            f = e.stat_desc.max_length,
            _ = 0;
        for (r = 0; nt >= r; r++) t.bl_count[r] = 0;
        for (l[2 * t.heap[t.heap_max] + 1] = 0, i = t.heap_max + 1; it > i; i++) n = t.heap[i], r = l[2 * l[2 * n + 1] + 1] + 1, r > f && (r = f, _++), l[2 * n + 1] = r, n > c || (t.bl_count[r]++, s = 0, n >= p && (s = u[n - p]), a = l[2 * n], t.opt_len += a * (r + s), d && (t.static_len += a * (h[2 * n + 1] + s)));
        if (0 !== _) {
            do {
                for (r = f - 1; 0 === t.bl_count[r];) r--;
                t.bl_count[r]--, t.bl_count[r + 1] += 2, t.bl_count[f]--, _ -= 2
            } while (_ > 0);
            for (r = f; 0 !== r; r--)
                for (n = t.bl_count[r]; 0 !== n;) o = t.heap[--i], o > c || (l[2 * o + 1] !== r && (t.opt_len += (r - l[2 * o + 1]) * l[2 * o], l[2 * o + 1] = r), n--)
        }
    }

    function d(t, e, i) {
        var n, o, r, s = Array(nt + 1),
            a = 0;
        for (n = 1; nt >= n; n++) s[n] = a = a + i[n - 1] << 1;
        for (o = 0; e >= o; o++) r = t[2 * o + 1], 0 !== r && (t[2 * o] = l(s[r]++, r))
    }

    function u() {
        var t, e, i, n, o = Array(nt + 1),
            r = 0;
        for (i = 0; Q - 1 > i; i++)
            for (A[i] = r, t = 0; t < 1 << ht[i]; t++) M[r++] = i;
        for (M[r - 1] = i, n = 0, i = 0; 16 > i; i++)
            for (D[i] = n, t = 0; t < 1 << dt[i]; t++) V[n++] = i;
        for (n >>= 7; tt > i; i++)
            for (D[i] = n << 7, t = 0; t < 1 << dt[i] - 7; t++) V[256 + n++] = i;
        for (e = 0; nt >= e; e++) o[e] = 0;
        for (t = 0; 143 >= t;) _t[2 * t + 1] = 8, t++, o[8]++;
        for (; 255 >= t;) _t[2 * t + 1] = 9, t++, o[9]++;
        for (; 279 >= t;) _t[2 * t + 1] = 7, t++, o[7]++;
        for (; 287 >= t;) _t[2 * t + 1] = 8, t++, o[8]++;
        for (d(_t, Z + 1, o), t = 0; tt > t; t++) L[2 * t + 1] = 5, L[2 * t] = l(t, 5);
        R = new O(_t, ht, J + 1, Z, nt), $ = new O(L, dt, 0, tt, nt), B = new O(Array(0), ut, 0, et, rt)
    }

    function p(t) {
        var e;
        for (e = 0; Z > e; e++) t.dyn_ltree[2 * e] = 0;
        for (e = 0; tt > e; e++) t.dyn_dtree[2 * e] = 0;
        for (e = 0; et > e; e++) t.bl_tree[2 * e] = 0;
        t.dyn_ltree[2 * st] = 1, t.opt_len = t.static_len = 0, t.last_lit = t.matches = 0
    }

    function f(t) {
        t.bi_valid > 8 ? r(t, t.bi_buf) : t.bi_valid > 0 && (t.pending_buf[t.pending++] = t.bi_buf), t.bi_buf = 0, t.bi_valid = 0
    }

    function _(t, e, i, n) {
        f(t), n && (r(t, i), r(t, ~i)), H.arraySet(t.pending_buf, t.window, e, i, t.pending), t.pending += i
    }

    function g(t, e, i, n) {
        var o = 2 * e,
            r = 2 * i;
        return t[o] < t[r] || t[o] === t[r] && n[e] <= n[i]
    }

    function m(t, e, i) {
        for (var n = t.heap[i], o = i << 1; o <= t.heap_len && (o < t.heap_len && g(e, t.heap[o + 1], t.heap[o], t.depth) && o++, !g(e, n, t.heap[o], t.depth));) t.heap[i] = t.heap[o], i = o, o <<= 1;
        t.heap[i] = n
    }

    function v(t, e, i) {
        var n, r, l, c, h = 0;
        if (0 !== t.last_lit)
            do n = t.pending_buf[t.d_buf + 2 * h] << 8 | t.pending_buf[t.d_buf + 2 * h + 1], r = t.pending_buf[t.l_buf + h], h++, 0 === n ? a(t, r, e) : (l = M[r], a(t, l + J + 1, e), c = ht[l], 0 !== c && (r -= A[l], s(t, r, c)), n--, l = o(n), a(t, l, i), c = dt[l], 0 !== c && (n -= D[l], s(t, n, c))); while (h < t.last_lit);
        a(t, st, e)
    }

    function y(t, e) {
        var i, n, o, r = e.dyn_tree,
            s = e.stat_desc.static_tree,
            a = e.stat_desc.has_stree,
            l = e.stat_desc.elems,
            c = -1;
        for (t.heap_len = 0, t.heap_max = it, i = 0; l > i; i++) 0 !== r[2 * i] ? (t.heap[++t.heap_len] = c = i, t.depth[i] = 0) : r[2 * i + 1] = 0;
        for (; t.heap_len < 2;) o = t.heap[++t.heap_len] = 2 > c ? ++c : 0, r[2 * o] = 1, t.depth[o] = 0, t.opt_len--, a && (t.static_len -= s[2 * o + 1]);
        for (e.max_code = c, i = t.heap_len >> 1; i >= 1; i--) m(t, r, i);
        o = l;
        do i = t.heap[1], t.heap[1] = t.heap[t.heap_len--], m(t, r, 1), n = t.heap[1], t.heap[--t.heap_max] = i, t.heap[--t.heap_max] = n, r[2 * o] = r[2 * i] + r[2 * n], t.depth[o] = (t.depth[i] >= t.depth[n] ? t.depth[i] : t.depth[n]) + 1, r[2 * i + 1] = r[2 * n + 1] = o, t.heap[1] = o++, m(t, r, 1); while (t.heap_len >= 2);
        t.heap[--t.heap_max] = t.heap[1], h(t, e), d(r, c, t.bl_count)
    }

    function w(t, e, i) {
        var n, o, r = -1,
            s = e[1],
            a = 0,
            l = 7,
            c = 4;
        for (0 === s && (l = 138, c = 3), e[2 * (i + 1) + 1] = 65535, n = 0; i >= n; n++) o = s, s = e[2 * (n + 1) + 1], ++a < l && o === s || (c > a ? t.bl_tree[2 * o] += a : 0 !== o ? (o !== r && t.bl_tree[2 * o]++, t.bl_tree[2 * at]++) : 10 >= a ? t.bl_tree[2 * lt]++ : t.bl_tree[2 * ct]++, a = 0, r = o, 0 === s ? (l = 138, c = 3) : o === s ? (l = 6, c = 3) : (l = 7, c = 4))
    }

    function b(t, e, i) {
        var n, o, r = -1,
            l = e[1],
            c = 0,
            h = 7,
            d = 4;
        for (0 === l && (h = 138, d = 3), n = 0; i >= n; n++)
            if (o = l, l = e[2 * (n + 1) + 1], !(++c < h && o === l)) {
                if (d > c) {
                    do a(t, o, t.bl_tree); while (0 !== --c)
                } else 0 !== o ? (o !== r && (a(t, o, t.bl_tree), c--), a(t, at, t.bl_tree), s(t, c - 3, 2)) : 10 >= c ? (a(t, lt, t.bl_tree), s(t, c - 3, 3)) : (a(t, ct, t.bl_tree), s(t, c - 11, 7));
                c = 0, r = o, 0 === l ? (h = 138, d = 3) : o === l ? (h = 6, d = 3) : (h = 7, d = 4)
            }
    }

    function S(t) {
        var e;
        for (w(t, t.dyn_ltree, t.l_desc.max_code), w(t, t.dyn_dtree, t.d_desc.max_code), y(t, t.bl_desc), e = et - 1; e >= 3 && 0 === t.bl_tree[2 * pt[e] + 1]; e--);
        return t.opt_len += 3 * (e + 1) + 5 + 5 + 4, e
    }

    function T(t, e, i, n) {
        var o;
        for (s(t, e - 257, 5), s(t, i - 1, 5), s(t, n - 4, 4), o = 0; n > o; o++) s(t, t.bl_tree[2 * pt[o] + 1], 3);
        b(t, t.dyn_ltree, e - 1), b(t, t.dyn_dtree, i - 1)
    }

    function x(t) {
        var e, i = 4093624447;
        for (e = 0; 31 >= e; e++, i >>>= 1)
            if (1 & i && 0 !== t.dyn_ltree[2 * e]) return W;
        if (0 !== t.dyn_ltree[18] || 0 !== t.dyn_ltree[20] || 0 !== t.dyn_ltree[26]) return U;
        for (e = 32; J > e; e++)
            if (0 !== t.dyn_ltree[2 * e]) return U;
        return W
    }

    function C(t) {
        N || (u(), N = !0), t.l_desc = new z(t.dyn_ltree, R), t.d_desc = new z(t.dyn_dtree, $), t.bl_desc = new z(t.bl_tree, B), t.bi_buf = 0, t.bi_valid = 0, p(t)
    }

    function P(t, e, i, n) {
        s(t, (Y << 1) + (n ? 1 : 0), 3), _(t, e, i, !0)
    }

    function k(t) {
        s(t, j << 1, 3), a(t, st, _t), c(t)
    }

    function I(t, e, i, n) {
        var o, r, a = 0;
        t.level > 0 ? (t.strm.data_type === q && (t.strm.data_type = x(t)), y(t, t.l_desc), y(t, t.d_desc), a = S(t), o = t.opt_len + 3 + 7 >>> 3, r = t.static_len + 3 + 7 >>> 3, o >= r && (o = r)) : o = r = i + 5, o >= i + 4 && -1 !== e ? P(t, e, i, n) : t.strategy === F || r === o ? (s(t, (j << 1) + (n ? 1 : 0), 3), v(t, _t, L)) : (s(t, (G << 1) + (n ? 1 : 0), 3), T(t, t.l_desc.max_code + 1, t.d_desc.max_code + 1, a + 1), v(t, t.dyn_ltree, t.dyn_dtree)), p(t), n && f(t)
    }

    function E(t, e, i) {
        return t.pending_buf[t.d_buf + 2 * t.last_lit] = e >>> 8 & 255, t.pending_buf[t.d_buf + 2 * t.last_lit + 1] = 255 & e, t.pending_buf[t.l_buf + t.last_lit] = 255 & i, t.last_lit++, 0 === e ? t.dyn_ltree[2 * i]++ : (t.matches++, e--, t.dyn_ltree[2 * (M[i] + J + 1)]++, t.dyn_dtree[2 * o(e)]++), t.last_lit === t.lit_bufsize - 1
    }
    var L, V, M, A, D, O, R, $, B, z, N, H = i(187),
        F = 4,
        W = 0,
        U = 1,
        q = 2,
        Y = 0,
        j = 1,
        G = 2,
        X = 3,
        K = 258,
        Q = 29,
        J = 256,
        Z = J + 1 + Q,
        tt = 30,
        et = 19,
        it = 2 * Z + 1,
        nt = 15,
        ot = 16,
        rt = 7,
        st = 256,
        at = 16,
        lt = 17,
        ct = 18,
        ht = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0],
        dt = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13],
        ut = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7],
        pt = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15],
        ft = 512,
        _t = Array(2 * (Z + 2));
    n(_t), L = Array(2 * tt), n(L), V = Array(ft), n(V), M = Array(K - X + 1), n(M), A = Array(Q), n(A), D = Array(tt), n(D), O = function(t, e, i, n, o) {
        this.static_tree = t, this.extra_bits = e, this.extra_base = i, this.elems = n, this.max_length = o, this.has_stree = t && t.length
    }, z = function(t, e) {
        this.dyn_tree = t, this.max_code = 0, this.stat_desc = e
    }, N = !1, e._tr_init = C, e._tr_stored_block = P, e._tr_flush_block = I, e._tr_tally = E, e._tr_align = k
}, function(t, e) {
    "use strict";

    function i(t, e, i, n) {
        for (var o = 65535 & t | 0, r = t >>> 16 & 65535 | 0, s = 0; 0 !== i;) {
            s = i > 2e3 ? 2e3 : i, i -= s;
            do o = o + e[n++] | 0, r = r + o | 0; while (--s);
            o %= 65521, r %= 65521
        }
        return o | r << 16 | 0
    }
    t.exports = i
}, function(t, e) {
    "use strict";

    function i() {
        var t, e, i, n = [];
        for (e = 0; 256 > e; e++) {
            for (t = e, i = 0; 8 > i; i++) t = 1 & t ? 3988292384 ^ t >>> 1 : t >>> 1;
            n[e] = t
        }
        return n
    }

    function n(t, e, i, n) {
        var r, s = o,
            a = n + i;
        for (t = -1 ^ t, r = n; a > r; r++) t = t >>> 8 ^ s[255 & (t ^ e[r])];
        return -1 ^ t
    }
    var o = i();
    t.exports = n
}, function(t, e) {
    "use strict";
    t.exports = {
        2: "need dictionary",
        1: "stream end",
        0: "",
        "-1": "file error",
        "-2": "stream error",
        "-3": "data error",
        "-4": "insufficient memory",
        "-5": "buffer error",
        "-6": "incompatible version"
    }
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        var i, n;
        if (65537 > e && (t.subarray && l || !t.subarray && a)) return String.fromCharCode.apply(null, s.shrinkBuf(t, e));
        for (i = "", n = 0; e > n; n++) i += String.fromCharCode(t[n]);
        return i
    }
    var o, r, s = i(187),
        a = !0,
        l = !0;
    try {
        String.fromCharCode.apply(null, [0])
    } catch (c) {
        a = !1
    }
    try {
        String.fromCharCode.apply(null, new Uint8Array(1))
    } catch (c) {
        l = !1
    }
    for (o = new s.Buf8(256), r = 0; 256 > r; r++) o[r] = r >= 252 ? 6 : r >= 248 ? 5 : r >= 240 ? 4 : r >= 224 ? 3 : r >= 192 ? 2 : 1;
    o[254] = o[254] = 1, e.string2buf = function(t) {
        var e, i, n, o, r, a = t.length,
            l = 0;
        for (o = 0; a > o; o++) i = t.charCodeAt(o), 55296 === (64512 & i) && a > o + 1 && (n = t.charCodeAt(o + 1), 56320 === (64512 & n) && (i = 65536 + (i - 55296 << 10) + (n - 56320), o++)), l += 128 > i ? 1 : 2048 > i ? 2 : 65536 > i ? 3 : 4;
        for (e = new s.Buf8(l), r = 0, o = 0; l > r; o++) i = t.charCodeAt(o), 55296 === (64512 & i) && a > o + 1 && (n = t.charCodeAt(o + 1), 56320 === (64512 & n) && (i = 65536 + (i - 55296 << 10) + (n - 56320), o++)), 128 > i ? e[r++] = i : 2048 > i ? (e[r++] = 192 | i >>> 6, e[r++] = 128 | 63 & i) : 65536 > i ? (e[r++] = 224 | i >>> 12, e[r++] = 128 | i >>> 6 & 63, e[r++] = 128 | 63 & i) : (e[r++] = 240 | i >>> 18, e[r++] = 128 | i >>> 12 & 63, e[r++] = 128 | i >>> 6 & 63, e[r++] = 128 | 63 & i);
        return e
    }, e.buf2binstring = function(t) {
        return n(t, t.length)
    }, e.binstring2buf = function(t) {
        var e, i, n = new s.Buf8(t.length);
        for (e = 0, i = n.length; i > e; e++) n[e] = t.charCodeAt(e);
        return n
    }, e.buf2string = function(t, e) {
        var i, r, s, a, l = e || t.length,
            c = Array(2 * l);
        for (r = 0, i = 0; l > i;)
            if (s = t[i++], 128 > s) c[r++] = s;
            else if (a = o[s], a > 4) c[r++] = 65533, i += a - 1;
            else {
                for (s &= 2 === a ? 31 : 3 === a ? 15 : 7; a > 1 && l > i;) s = s << 6 | 63 & t[i++], a--;
                a > 1 ? c[r++] = 65533 : 65536 > s ? c[r++] = s : (s -= 65536, c[r++] = 55296 | s >> 10 & 1023, c[r++] = 56320 | 1023 & s)
            }
        return n(c, r)
    }, e.utf8border = function(t, e) {
        var i;
        for (e = e || t.length, e > t.length && (e = t.length), i = e - 1; i >= 0 && 128 === (192 & t[i]);) i--;
        return 0 > i ? e : 0 === i ? e : i + o[t[i]] > e ? i : e
    }
}, function(t, e) {
    "use strict";

    function i() {
        this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0
    }
    t.exports = i
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        var i = new p(e);
        if (i.push(t, !0), i.err) throw i.msg;
        return i.result
    }

    function o(t, e) {
        return e = e || {}, e.raw = !0, n(t, e)
    }
    var r = i(197),
        s = i(187),
        a = i(194),
        l = i(200),
        c = i(193),
        h = i(195),
        d = i(201),
        u = Object.prototype.toString,
        p = function(t) {
            var e, i;
            if (this.options = s.assign({
                    chunkSize: 16384,
                    windowBits: 0,
                    to: ""
                }, t || {}), e = this.options, e.raw && e.windowBits >= 0 && e.windowBits < 16 && (e.windowBits = -e.windowBits, 0 === e.windowBits && (e.windowBits = -15)), !(e.windowBits >= 0 && e.windowBits < 16) || t && t.windowBits || (e.windowBits += 32), e.windowBits > 15 && e.windowBits < 48 && 0 === (15 & e.windowBits) && (e.windowBits |= 15), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new h, this.strm.avail_out = 0, i = r.inflateInit2(this.strm, e.windowBits), i !== l.Z_OK) throw Error(c[i]);
            this.header = new d, r.inflateGetHeader(this.strm, this.header)
        };
    p.prototype.push = function(t, e) {
        var i, n, o, c, h, d = this.strm,
            p = this.options.chunkSize,
            f = !1;
        if (this.ended) return !1;
        n = e === ~~e ? e : e === !0 ? l.Z_FINISH : l.Z_NO_FLUSH, "string" == typeof t ? d.input = a.binstring2buf(t) : "[object ArrayBuffer]" === u.call(t) ? d.input = new Uint8Array(t) : d.input = t, d.next_in = 0, d.avail_in = d.input.length;
        do {
            if (0 === d.avail_out && (d.output = new s.Buf8(p), d.next_out = 0, d.avail_out = p), i = r.inflate(d, l.Z_NO_FLUSH), i === l.Z_BUF_ERROR && f === !0 && (i = l.Z_OK, f = !1), i !== l.Z_STREAM_END && i !== l.Z_OK) return this.onEnd(i), this.ended = !0, !1;
            d.next_out && (0 !== d.avail_out && i !== l.Z_STREAM_END && (0 !== d.avail_in || n !== l.Z_FINISH && n !== l.Z_SYNC_FLUSH) || ("string" === this.options.to ? (o = a.utf8border(d.output, d.next_out), c = d.next_out - o, h = a.buf2string(d.output, o), d.next_out = c, d.avail_out = p - c, c && s.arraySet(d.output, d.output, o, c, 0), this.onData(h)) : this.onData(s.shrinkBuf(d.output, d.next_out)))), 0 === d.avail_in && 0 === d.avail_out && (f = !0)
        } while ((d.avail_in > 0 || 0 === d.avail_out) && i !== l.Z_STREAM_END);
        return i === l.Z_STREAM_END && (n = l.Z_FINISH), n === l.Z_FINISH ? (i = r.inflateEnd(this.strm), this.onEnd(i), this.ended = !0, i === l.Z_OK) : n === l.Z_SYNC_FLUSH ? (this.onEnd(l.Z_OK), d.avail_out = 0, !0) : !0
    }, p.prototype.onData = function(t) {
        this.chunks.push(t)
    }, p.prototype.onEnd = function(t) {
        t === l.Z_OK && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = s.flattenChunks(this.chunks)), this.chunks = [], this.err = t, this.msg = this.strm.msg
    }, e.Inflate = p, e.inflate = n, e.inflateRaw = o, e.ungzip = n
}, function(t, e, i) {
    "use strict";

    function n(t) {
        return (t >>> 24 & 255) + (t >>> 8 & 65280) + ((65280 & t) << 8) + ((255 & t) << 24)
    }

    function o() {
        this.mode = 0, this.last = !1, this.wrap = 0, this.havedict = !1, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new m.Buf16(320), this.work = new m.Buf16(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0
    }

    function r(t) {
        var e;
        return t && t.state ? (e = t.state, t.total_in = t.total_out = e.total = 0, t.msg = "", e.wrap && (t.adler = 1 & e.wrap), e.mode = R, e.last = 0, e.havedict = 0, e.dmax = 32768, e.head = null, e.hold = 0, e.bits = 0, e.lencode = e.lendyn = new m.Buf32(ft), e.distcode = e.distdyn = new m.Buf32(_t), e.sane = 1, e.back = -1, I) : V
    }

    function s(t) {
        var e;
        return t && t.state ? (e = t.state, e.wsize = 0, e.whave = 0, e.wnext = 0, r(t)) : V
    }

    function a(t, e) {
        var i, n;
        return t && t.state ? (n = t.state, 0 > e ? (i = 0, e = -e) : (i = (e >> 4) + 1, 48 > e && (e &= 15)), e && (8 > e || e > 15) ? V : (null !== n.window && n.wbits !== e && (n.window = null), n.wrap = i, n.wbits = e, s(t))) : V
    }

    function l(t, e) {
        var i, n;
        return t ? (n = new o, t.state = n, n.window = null, i = a(t, e), i !== I && (t.state = null), i) : V
    }

    function c(t) {
        return l(t, mt)
    }

    function h(t) {
        if (vt) {
            var e;
            for (_ = new m.Buf32(512), g = new m.Buf32(32), e = 0; 144 > e;) t.lens[e++] = 8;
            for (; 256 > e;) t.lens[e++] = 9;
            for (; 280 > e;) t.lens[e++] = 7;
            for (; 288 > e;) t.lens[e++] = 8;
            for (b(T, t.lens, 0, 288, _, 0, t.work, {
                bits: 9
            }), e = 0; 32 > e;) t.lens[e++] = 5;
            b(x, t.lens, 0, 32, g, 0, t.work, {
                bits: 5
            }), vt = !1
        }
        t.lencode = _, t.lenbits = 9, t.distcode = g, t.distbits = 5
    }

    function d(t, e, i, n) {
        var o, r = t.state;
        return null === r.window && (r.wsize = 1 << r.wbits, r.wnext = 0, r.whave = 0, r.window = new m.Buf8(r.wsize)), n >= r.wsize ? (m.arraySet(r.window, e, i - r.wsize, r.wsize, 0), r.wnext = 0, r.whave = r.wsize) : (o = r.wsize - r.wnext, o > n && (o = n), m.arraySet(r.window, e, i - n, o, r.wnext), n -= o, n ? (m.arraySet(r.window, e, i - n, n, 0), r.wnext = n, r.whave = r.wsize) : (r.wnext += o, r.wnext === r.wsize && (r.wnext = 0), r.whave < r.wsize && (r.whave += o))), 0
    }

    function u(t, e) {
        var i, o, r, s, a, l, c, u, p, f, _, g, ft, _t, gt, mt, vt, yt, wt, bt, St, Tt, xt, Ct, Pt = 0,
            kt = new m.Buf8(4),
            It = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
        if (!t || !t.state || !t.output || !t.input && 0 !== t.avail_in) return V;
        i = t.state, i.mode === j && (i.mode = G), a = t.next_out, r = t.output, c = t.avail_out, s = t.next_in, o = t.input, l = t.avail_in, u = i.hold, p = i.bits, f = l, _ = c, Tt = I;
        t: for (;;) switch (i.mode) {
            case R:
                if (0 === i.wrap) {
                    i.mode = G;
                    break
                }
                for (; 16 > p;) {
                    if (0 === l) break t;
                    l--, u += o[s++] << p, p += 8
                }
                if (2 & i.wrap && 35615 === u) {
                    i.check = 0, kt[0] = 255 & u, kt[1] = u >>> 8 & 255, i.check = y(i.check, kt, 2, 0), u = 0, p = 0, i.mode = $;
                    break
                }
                if (i.flags = 0, i.head && (i.head.done = !1), !(1 & i.wrap) || (((255 & u) << 8) + (u >> 8)) % 31) {
                    t.msg = "incorrect header check", i.mode = dt;
                    break
                }
                if ((15 & u) !== O) {
                    t.msg = "unknown compression method", i.mode = dt;
                    break
                }
                if (u >>>= 4, p -= 4, St = (15 & u) + 8, 0 === i.wbits) i.wbits = St;
                else if (St > i.wbits) {
                    t.msg = "invalid window size", i.mode = dt;
                    break
                }
                i.dmax = 1 << St, t.adler = i.check = 1, i.mode = 512 & u ? q : j, u = 0, p = 0;
                break;
            case $:
                for (; 16 > p;) {
                    if (0 === l) break t;
                    l--, u += o[s++] << p, p += 8
                }
                if (i.flags = u, (255 & i.flags) !== O) {
                    t.msg = "unknown compression method", i.mode = dt;
                    break
                }
                if (57344 & i.flags) {
                    t.msg = "unknown header flags set", i.mode = dt;
                    break
                }
                i.head && (i.head.text = u >> 8 & 1), 512 & i.flags && (kt[0] = 255 & u, kt[1] = u >>> 8 & 255, i.check = y(i.check, kt, 2, 0)), u = 0, p = 0, i.mode = B;
            case B:
                for (; 32 > p;) {
                    if (0 === l) break t;
                    l--, u += o[s++] << p, p += 8
                }
                i.head && (i.head.time = u), 512 & i.flags && (kt[0] = 255 & u, kt[1] = u >>> 8 & 255, kt[2] = u >>> 16 & 255, kt[3] = u >>> 24 & 255, i.check = y(i.check, kt, 4, 0)), u = 0, p = 0, i.mode = z;
            case z:
                for (; 16 > p;) {
                    if (0 === l) break t;
                    l--, u += o[s++] << p, p += 8
                }
                i.head && (i.head.xflags = 255 & u, i.head.os = u >> 8), 512 & i.flags && (kt[0] = 255 & u, kt[1] = u >>> 8 & 255, i.check = y(i.check, kt, 2, 0)), u = 0, p = 0, i.mode = N;
            case N:
                if (1024 & i.flags) {
                    for (; 16 > p;) {
                        if (0 === l) break t;
                        l--, u += o[s++] << p, p += 8
                    }
                    i.length = u, i.head && (i.head.extra_len = u), 512 & i.flags && (kt[0] = 255 & u, kt[1] = u >>> 8 & 255, i.check = y(i.check, kt, 2, 0)), u = 0, p = 0
                } else i.head && (i.head.extra = null);
                i.mode = H;
            case H:
                if (1024 & i.flags && (g = i.length, g > l && (g = l), g && (i.head && (St = i.head.extra_len - i.length, i.head.extra || (i.head.extra = Array(i.head.extra_len)), m.arraySet(i.head.extra, o, s, g, St)), 512 & i.flags && (i.check = y(i.check, o, g, s)), l -= g, s += g, i.length -= g), i.length)) break t;
                i.length = 0, i.mode = F;
            case F:
                if (2048 & i.flags) {
                    if (0 === l) break t;
                    g = 0;
                    do St = o[s + g++], i.head && St && i.length < 65536 && (i.head.name += String.fromCharCode(St)); while (St && l > g);
                    if (512 & i.flags && (i.check = y(i.check, o, g, s)), l -= g, s += g, St) break t
                } else i.head && (i.head.name = null);
                i.length = 0, i.mode = W;
            case W:
                if (4096 & i.flags) {
                    if (0 === l) break t;
                    g = 0;
                    do St = o[s + g++], i.head && St && i.length < 65536 && (i.head.comment += String.fromCharCode(St)); while (St && l > g);
                    if (512 & i.flags && (i.check = y(i.check, o, g, s)), l -= g, s += g, St) break t
                } else i.head && (i.head.comment = null);
                i.mode = U;
            case U:
                if (512 & i.flags) {
                    for (; 16 > p;) {
                        if (0 === l) break t;
                        l--, u += o[s++] << p, p += 8
                    }
                    if (u !== (65535 & i.check)) {
                        t.msg = "header crc mismatch", i.mode = dt;
                        break
                    }
                    u = 0, p = 0
                }
                i.head && (i.head.hcrc = i.flags >> 9 & 1, i.head.done = !0), t.adler = i.check = 0, i.mode = j;
                break;
            case q:
                for (; 32 > p;) {
                    if (0 === l) break t;
                    l--, u += o[s++] << p, p += 8
                }
                t.adler = i.check = n(u), u = 0, p = 0, i.mode = Y;
            case Y:
                if (0 === i.havedict) return t.next_out = a, t.avail_out = c, t.next_in = s, t.avail_in = l, i.hold = u, i.bits = p, L;
                t.adler = i.check = 1, i.mode = j;
            case j:
                if (e === P || e === k) break t;
            case G:
                if (i.last) {
                    u >>>= 7 & p, p -= 7 & p, i.mode = lt;
                    break
                }
                for (; 3 > p;) {
                    if (0 === l) break t;
                    l--, u += o[s++] << p, p += 8
                }
                switch (i.last = 1 & u, u >>>= 1, p -= 1, 3 & u) {
                    case 0:
                        i.mode = X;
                        break;
                    case 1:
                        if (h(i), i.mode = et, e === k) {
                            u >>>= 2, p -= 2;
                            break t
                        }
                        break;
                    case 2:
                        i.mode = J;
                        break;
                    case 3:
                        t.msg = "invalid block type", i.mode = dt
                }
                u >>>= 2, p -= 2;
                break;
            case X:
                for (u >>>= 7 & p, p -= 7 & p; 32 > p;) {
                    if (0 === l) break t;
                    l--, u += o[s++] << p, p += 8
                }
                if ((65535 & u) !== (u >>> 16 ^ 65535)) {
                    t.msg = "invalid stored block lengths",
                        i.mode = dt;
                    break
                }
                if (i.length = 65535 & u, u = 0, p = 0, i.mode = K, e === k) break t;
            case K:
                i.mode = Q;
            case Q:
                if (g = i.length) {
                    if (g > l && (g = l), g > c && (g = c), 0 === g) break t;
                    m.arraySet(r, o, s, g, a), l -= g, s += g, c -= g, a += g, i.length -= g;
                    break
                }
                i.mode = j;
                break;
            case J:
                for (; 14 > p;) {
                    if (0 === l) break t;
                    l--, u += o[s++] << p, p += 8
                }
                if (i.nlen = (31 & u) + 257, u >>>= 5, p -= 5, i.ndist = (31 & u) + 1, u >>>= 5, p -= 5, i.ncode = (15 & u) + 4, u >>>= 4, p -= 4, i.nlen > 286 || i.ndist > 30) {
                    t.msg = "too many length or distance symbols", i.mode = dt;
                    break
                }
                i.have = 0, i.mode = Z;
            case Z:
                for (; i.have < i.ncode;) {
                    for (; 3 > p;) {
                        if (0 === l) break t;
                        l--, u += o[s++] << p, p += 8
                    }
                    i.lens[It[i.have++]] = 7 & u, u >>>= 3, p -= 3
                }
                for (; i.have < 19;) i.lens[It[i.have++]] = 0;
                if (i.lencode = i.lendyn, i.lenbits = 7, xt = {
                        bits: i.lenbits
                    }, Tt = b(S, i.lens, 0, 19, i.lencode, 0, i.work, xt), i.lenbits = xt.bits, Tt) {
                    t.msg = "invalid code lengths set", i.mode = dt;
                    break
                }
                i.have = 0, i.mode = tt;
            case tt:
                for (; i.have < i.nlen + i.ndist;) {
                    for (; Pt = i.lencode[u & (1 << i.lenbits) - 1], gt = Pt >>> 24, mt = Pt >>> 16 & 255, vt = 65535 & Pt, !(p >= gt);) {
                        if (0 === l) break t;
                        l--, u += o[s++] << p, p += 8
                    }
                    if (16 > vt) u >>>= gt, p -= gt, i.lens[i.have++] = vt;
                    else {
                        if (16 === vt) {
                            for (Ct = gt + 2; Ct > p;) {
                                if (0 === l) break t;
                                l--, u += o[s++] << p, p += 8
                            }
                            if (u >>>= gt, p -= gt, 0 === i.have) {
                                t.msg = "invalid bit length repeat", i.mode = dt;
                                break
                            }
                            St = i.lens[i.have - 1], g = 3 + (3 & u), u >>>= 2, p -= 2
                        } else if (17 === vt) {
                            for (Ct = gt + 3; Ct > p;) {
                                if (0 === l) break t;
                                l--, u += o[s++] << p, p += 8
                            }
                            u >>>= gt, p -= gt, St = 0, g = 3 + (7 & u), u >>>= 3, p -= 3
                        } else {
                            for (Ct = gt + 7; Ct > p;) {
                                if (0 === l) break t;
                                l--, u += o[s++] << p, p += 8
                            }
                            u >>>= gt, p -= gt, St = 0, g = 11 + (127 & u), u >>>= 7, p -= 7
                        }
                        if (i.have + g > i.nlen + i.ndist) {
                            t.msg = "invalid bit length repeat", i.mode = dt;
                            break
                        }
                        for (; g--;) i.lens[i.have++] = St
                    }
                }
                if (i.mode === dt) break;
                if (0 === i.lens[256]) {
                    t.msg = "invalid code -- missing end-of-block", i.mode = dt;
                    break
                }
                if (i.lenbits = 9, xt = {
                        bits: i.lenbits
                    }, Tt = b(T, i.lens, 0, i.nlen, i.lencode, 0, i.work, xt), i.lenbits = xt.bits, Tt) {
                    t.msg = "invalid literal/lengths set", i.mode = dt;
                    break
                }
                if (i.distbits = 6, i.distcode = i.distdyn, xt = {
                        bits: i.distbits
                    }, Tt = b(x, i.lens, i.nlen, i.ndist, i.distcode, 0, i.work, xt), i.distbits = xt.bits, Tt) {
                    t.msg = "invalid distances set", i.mode = dt;
                    break
                }
                if (i.mode = et, e === k) break t;
            case et:
                i.mode = it;
            case it:
                if (l >= 6 && c >= 258) {
                    t.next_out = a, t.avail_out = c, t.next_in = s, t.avail_in = l, i.hold = u, i.bits = p, w(t, _), a = t.next_out, r = t.output, c = t.avail_out, s = t.next_in, o = t.input, l = t.avail_in, u = i.hold, p = i.bits, i.mode === j && (i.back = -1);
                    break
                }
                for (i.back = 0; Pt = i.lencode[u & (1 << i.lenbits) - 1], gt = Pt >>> 24, mt = Pt >>> 16 & 255, vt = 65535 & Pt, !(p >= gt);) {
                    if (0 === l) break t;
                    l--, u += o[s++] << p, p += 8
                }
                if (mt && 0 === (240 & mt)) {
                    for (yt = gt, wt = mt, bt = vt; Pt = i.lencode[bt + ((u & (1 << yt + wt) - 1) >> yt)], gt = Pt >>> 24, mt = Pt >>> 16 & 255, vt = 65535 & Pt, !(p >= yt + gt);) {
                        if (0 === l) break t;
                        l--, u += o[s++] << p, p += 8
                    }
                    u >>>= yt, p -= yt, i.back += yt
                }
                if (u >>>= gt, p -= gt, i.back += gt, i.length = vt, 0 === mt) {
                    i.mode = at;
                    break
                }
                if (32 & mt) {
                    i.back = -1, i.mode = j;
                    break
                }
                if (64 & mt) {
                    t.msg = "invalid literal/length code", i.mode = dt;
                    break
                }
                i.extra = 15 & mt, i.mode = nt;
            case nt:
                if (i.extra) {
                    for (Ct = i.extra; Ct > p;) {
                        if (0 === l) break t;
                        l--, u += o[s++] << p, p += 8
                    }
                    i.length += u & (1 << i.extra) - 1, u >>>= i.extra, p -= i.extra, i.back += i.extra
                }
                i.was = i.length, i.mode = ot;
            case ot:
                for (; Pt = i.distcode[u & (1 << i.distbits) - 1], gt = Pt >>> 24, mt = Pt >>> 16 & 255, vt = 65535 & Pt, !(p >= gt);) {
                    if (0 === l) break t;
                    l--, u += o[s++] << p, p += 8
                }
                if (0 === (240 & mt)) {
                    for (yt = gt, wt = mt, bt = vt; Pt = i.distcode[bt + ((u & (1 << yt + wt) - 1) >> yt)], gt = Pt >>> 24, mt = Pt >>> 16 & 255, vt = 65535 & Pt, !(p >= yt + gt);) {
                        if (0 === l) break t;
                        l--, u += o[s++] << p, p += 8
                    }
                    u >>>= yt, p -= yt, i.back += yt
                }
                if (u >>>= gt, p -= gt, i.back += gt, 64 & mt) {
                    t.msg = "invalid distance code", i.mode = dt;
                    break
                }
                i.offset = vt, i.extra = 15 & mt, i.mode = rt;
            case rt:
                if (i.extra) {
                    for (Ct = i.extra; Ct > p;) {
                        if (0 === l) break t;
                        l--, u += o[s++] << p, p += 8
                    }
                    i.offset += u & (1 << i.extra) - 1, u >>>= i.extra, p -= i.extra, i.back += i.extra
                }
                if (i.offset > i.dmax) {
                    t.msg = "invalid distance too far back", i.mode = dt;
                    break
                }
                i.mode = st;
            case st:
                if (0 === c) break t;
                if (g = _ - c, i.offset > g) {
                    if (g = i.offset - g, g > i.whave && i.sane) {
                        t.msg = "invalid distance too far back", i.mode = dt;
                        break
                    }
                    g > i.wnext ? (g -= i.wnext, ft = i.wsize - g) : ft = i.wnext - g, g > i.length && (g = i.length), _t = i.window
                } else _t = r, ft = a - i.offset, g = i.length;
                g > c && (g = c), c -= g, i.length -= g;
                do r[a++] = _t[ft++]; while (--g);
                0 === i.length && (i.mode = it);
                break;
            case at:
                if (0 === c) break t;
                r[a++] = i.length, c--, i.mode = it;
                break;
            case lt:
                if (i.wrap) {
                    for (; 32 > p;) {
                        if (0 === l) break t;
                        l--, u |= o[s++] << p, p += 8
                    }
                    if (_ -= c, t.total_out += _, i.total += _, _ && (t.adler = i.check = i.flags ? y(i.check, r, _, a - _) : v(i.check, r, _, a - _)), _ = c, (i.flags ? u : n(u)) !== i.check) {
                        t.msg = "incorrect data check", i.mode = dt;
                        break
                    }
                    u = 0, p = 0
                }
                i.mode = ct;
            case ct:
                if (i.wrap && i.flags) {
                    for (; 32 > p;) {
                        if (0 === l) break t;
                        l--, u += o[s++] << p, p += 8
                    }
                    if (u !== (4294967295 & i.total)) {
                        t.msg = "incorrect length check", i.mode = dt;
                        break
                    }
                    u = 0, p = 0
                }
                i.mode = ht;
            case ht:
                Tt = E;
                break t;
            case dt:
                Tt = M;
                break t;
            case ut:
                return A;
            case pt:
            default:
                return V
        }
        return t.next_out = a, t.avail_out = c, t.next_in = s, t.avail_in = l, i.hold = u, i.bits = p, (i.wsize || _ !== t.avail_out && i.mode < dt && (i.mode < lt || e !== C)) && d(t, t.output, t.next_out, _ - t.avail_out) ? (i.mode = ut, A) : (f -= t.avail_in, _ -= t.avail_out, t.total_in += f, t.total_out += _, i.total += _, i.wrap && _ && (t.adler = i.check = i.flags ? y(i.check, r, _, t.next_out - _) : v(i.check, r, _, t.next_out - _)), t.data_type = i.bits + (i.last ? 64 : 0) + (i.mode === j ? 128 : 0) + (i.mode === et || i.mode === K ? 256 : 0), (0 === f && 0 === _ || e === C) && Tt === I && (Tt = D), Tt)
    }

    function p(t) {
        if (!t || !t.state) return V;
        var e = t.state;
        return e.window && (e.window = null), t.state = null, I
    }

    function f(t, e) {
        var i;
        return t && t.state ? (i = t.state, 0 === (2 & i.wrap) ? V : (i.head = e, e.done = !1, I)) : V
    }
    var _, g, m = i(187),
        v = i(191),
        y = i(192),
        w = i(198),
        b = i(199),
        S = 0,
        T = 1,
        x = 2,
        C = 4,
        P = 5,
        k = 6,
        I = 0,
        E = 1,
        L = 2,
        V = -2,
        M = -3,
        A = -4,
        D = -5,
        O = 8,
        R = 1,
        $ = 2,
        B = 3,
        z = 4,
        N = 5,
        H = 6,
        F = 7,
        W = 8,
        U = 9,
        q = 10,
        Y = 11,
        j = 12,
        G = 13,
        X = 14,
        K = 15,
        Q = 16,
        J = 17,
        Z = 18,
        tt = 19,
        et = 20,
        it = 21,
        nt = 22,
        ot = 23,
        rt = 24,
        st = 25,
        at = 26,
        lt = 27,
        ct = 28,
        ht = 29,
        dt = 30,
        ut = 31,
        pt = 32,
        ft = 852,
        _t = 592,
        gt = 15,
        mt = gt,
        vt = !0;
    e.inflateReset = s, e.inflateReset2 = a, e.inflateResetKeep = r, e.inflateInit = c, e.inflateInit2 = l, e.inflate = u, e.inflateEnd = p, e.inflateGetHeader = f, e.inflateInfo = "pako inflate (from Nodeca project)"
}, function(t, e) {
    "use strict";
    var i = 30,
        n = 12;
    t.exports = function(t, e) {
        var o, r, s, a, l, c, h = t.state,
            d = t.next_in,
            u = t.input,
            p = d + (t.avail_in - 5),
            f = t.next_out,
            _ = t.output,
            g = f - (e - t.avail_out),
            m = f + (t.avail_out - 257),
            v = h.dmax,
            y = h.wsize,
            w = h.whave,
            b = h.wnext,
            S = h.window,
            T = h.hold,
            x = h.bits,
            C = h.lencode,
            P = h.distcode,
            k = (1 << h.lenbits) - 1,
            I = (1 << h.distbits) - 1;
        t: do {
            15 > x && (T += u[d++] << x, x += 8, T += u[d++] << x, x += 8), o = C[T & k];
            e: for (;;) {
                if (r = o >>> 24, T >>>= r, x -= r, r = o >>> 16 & 255, 0 === r) _[f++] = 65535 & o;
                else {
                    if (!(16 & r)) {
                        if (0 === (64 & r)) {
                            o = C[(65535 & o) + (T & (1 << r) - 1)];
                            continue e
                        }
                        if (32 & r) {
                            h.mode = n;
                            break t
                        }
                        t.msg = "invalid literal/length code", h.mode = i;
                        break t
                    }
                    s = 65535 & o, r &= 15, r && (r > x && (T += u[d++] << x, x += 8), s += T & (1 << r) - 1, T >>>= r, x -= r), 15 > x && (T += u[d++] << x, x += 8, T += u[d++] << x, x += 8), o = P[T & I];
                    i: for (;;) {
                        if (r = o >>> 24, T >>>= r, x -= r, r = o >>> 16 & 255, !(16 & r)) {
                            if (0 === (64 & r)) {
                                o = P[(65535 & o) + (T & (1 << r) - 1)];
                                continue i
                            }
                            t.msg = "invalid distance code", h.mode = i;
                            break t
                        }
                        if (a = 65535 & o, r &= 15, r > x && (T += u[d++] << x, x += 8, r > x && (T += u[d++] << x, x += 8)), a += T & (1 << r) - 1, a > v) {
                            t.msg = "invalid distance too far back", h.mode = i;
                            break t
                        }
                        if (T >>>= r, x -= r, r = f - g, a > r) {
                            if (r = a - r, r > w && h.sane) {
                                t.msg = "invalid distance too far back", h.mode = i;
                                break t
                            }
                            if (l = 0, c = S, 0 === b) {
                                if (l += y - r, s > r) {
                                    s -= r;
                                    do _[f++] = S[l++]; while (--r);
                                    l = f - a, c = _
                                }
                            } else if (r > b) {
                                if (l += y + b - r, r -= b, s > r) {
                                    s -= r;
                                    do _[f++] = S[l++]; while (--r);
                                    if (l = 0, s > b) {
                                        r = b, s -= r;
                                        do _[f++] = S[l++]; while (--r);
                                        l = f - a, c = _
                                    }
                                }
                            } else if (l += b - r, s > r) {
                                s -= r;
                                do _[f++] = S[l++]; while (--r);
                                l = f - a, c = _
                            }
                            for (; s > 2;) _[f++] = c[l++], _[f++] = c[l++], _[f++] = c[l++], s -= 3;
                            s && (_[f++] = c[l++], s > 1 && (_[f++] = c[l++]))
                        } else {
                            l = f - a;
                            do _[f++] = _[l++], _[f++] = _[l++], _[f++] = _[l++], s -= 3; while (s > 2);
                            s && (_[f++] = _[l++], s > 1 && (_[f++] = _[l++]))
                        }
                        break
                    }
                }
                break
            }
        } while (p > d && m > f);
        s = x >> 3, d -= s, x -= s << 3, T &= (1 << x) - 1, t.next_in = d, t.next_out = f, t.avail_in = p > d ? 5 + (p - d) : 5 - (d - p), t.avail_out = m > f ? 257 + (m - f) : 257 - (f - m), h.hold = T, h.bits = x
    }
}, function(t, e, i) {
    "use strict";
    var n = i(187),
        o = 15,
        r = 852,
        s = 592,
        a = 0,
        l = 1,
        c = 2,
        h = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0],
        d = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78],
        u = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0],
        p = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64];
    t.exports = function(t, e, i, f, _, g, m, v) {
        var y, w, b, S, T, x, C, P, k, I, E = v.bits,
            L = 0,
            V = 0,
            M = 0,
            A = 0,
            D = 0,
            O = 0,
            R = 0,
            $ = 0,
            B = 0,
            z = 0,
            N = null,
            H = 0,
            F = new n.Buf16(o + 1),
            W = new n.Buf16(o + 1),
            U = null,
            q = 0;
        for (L = 0; o >= L; L++) F[L] = 0;
        for (V = 0; f > V; V++) F[e[i + V]]++;
        for (D = E, A = o; A >= 1 && 0 === F[A]; A--);
        if (D > A && (D = A), 0 === A) return _[g++] = 20971520, _[g++] = 20971520, v.bits = 1, 0;
        for (M = 1; A > M && 0 === F[M]; M++);
        for (M > D && (D = M), $ = 1, L = 1; o >= L; L++)
            if ($ <<= 1, $ -= F[L], 0 > $) return -1;
        if ($ > 0 && (t === a || 1 !== A)) return -1;
        for (W[1] = 0, L = 1; o > L; L++) W[L + 1] = W[L] + F[L];
        for (V = 0; f > V; V++) 0 !== e[i + V] && (m[W[e[i + V]]++] = V);
        if (t === a ? (N = U = m, x = 19) : t === l ? (N = h, H -= 257, U = d, q -= 257, x = 256) : (N = u, U = p, x = -1), z = 0, V = 0, L = M, T = g, O = D, R = 0, b = -1, B = 1 << D, S = B - 1, t === l && B > r || t === c && B > s) return 1;
        for (I = 0;;) {
            I++, C = L - R, m[V] < x ? (P = 0, k = m[V]) : m[V] > x ? (P = U[q + m[V]], k = N[H + m[V]]) : (P = 96, k = 0), y = 1 << L - R, w = 1 << O, M = w;
            do w -= y, _[T + (z >> R) + w] = C << 24 | P << 16 | k | 0; while (0 !== w);
            for (y = 1 << L - 1; z & y;) y >>= 1;
            if (0 !== y ? (z &= y - 1, z += y) : z = 0, V++, 0 === --F[L]) {
                if (L === A) break;
                L = e[i + m[V]]
            }
            if (L > D && (z & S) !== b) {
                for (0 === R && (R = D), T += M, O = L - R, $ = 1 << O; A > O + R && ($ -= F[O + R], !(0 >= $));) O++, $ <<= 1;
                if (B += 1 << O, t === l && B > r || t === c && B > s) return 1;
                b = z & S, _[b] = D << 24 | O << 16 | T - g | 0
            }
        }
        return 0 !== z && (_[T + z] = L - R << 24 | 64 << 16 | 0), v.bits = D, 0
    }
}, function(t, e) {
    t.exports = {
        Z_NO_FLUSH: 0,
        Z_PARTIAL_FLUSH: 1,
        Z_SYNC_FLUSH: 2,
        Z_FULL_FLUSH: 3,
        Z_FINISH: 4,
        Z_BLOCK: 5,
        Z_TREES: 6,
        Z_OK: 0,
        Z_STREAM_END: 1,
        Z_NEED_DICT: 2,
        Z_ERRNO: -1,
        Z_STREAM_ERROR: -2,
        Z_DATA_ERROR: -3,
        Z_BUF_ERROR: -5,
        Z_NO_COMPRESSION: 0,
        Z_BEST_SPEED: 1,
        Z_BEST_COMPRESSION: 9,
        Z_DEFAULT_COMPRESSION: -1,
        Z_FILTERED: 1,
        Z_HUFFMAN_ONLY: 2,
        Z_RLE: 3,
        Z_FIXED: 4,
        Z_DEFAULT_STRATEGY: 0,
        Z_BINARY: 0,
        Z_TEXT: 1,
        Z_UNKNOWN: 2,
        Z_DEFLATED: 8
    }
}, function(t, e) {
    "use strict";

    function i() {
        this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = "", this.comment = "", this.hcrc = 0, this.done = !1
    }
    t.exports = i
}, function(t, e, i) {
    (function(e) {
        "use strict";
        t.exports = function(t, i) {
            return new e(t, i)
        }, t.exports.test = function(t) {
            return e.isBuffer(t)
        }
    }).call(e, i(179).Buffer)
}, function(t, e, i) {
    "use strict";
    var n = i(183),
        o = [0, 1996959894, 3993919788, 2567524794, 124634137, 1886057615, 3915621685, 2657392035, 249268274, 2044508324, 3772115230, 2547177864, 162941995, 2125561021, 3887607047, 2428444049, 498536548, 1789927666, 4089016648, 2227061214, 450548861, 1843258603, 4107580753, 2211677639, 325883990, 1684777152, 4251122042, 2321926636, 335633487, 1661365465, 4195302755, 2366115317, 997073096, 1281953886, 3579855332, 2724688242, 1006888145, 1258607687, 3524101629, 2768942443, 901097722, 1119000684, 3686517206, 2898065728, 853044451, 1172266101, 3705015759, 2882616665, 651767980, 1373503546, 3369554304, 3218104598, 565507253, 1454621731, 3485111705, 3099436303, 671266974, 1594198024, 3322730930, 2970347812, 795835527, 1483230225, 3244367275, 3060149565, 1994146192, 31158534, 2563907772, 4023717930, 1907459465, 112637215, 2680153253, 3904427059, 2013776290, 251722036, 2517215374, 3775830040, 2137656763, 141376813, 2439277719, 3865271297, 1802195444, 476864866, 2238001368, 4066508878, 1812370925, 453092731, 2181625025, 4111451223, 1706088902, 314042704, 2344532202, 4240017532, 1658658271, 366619977, 2362670323, 4224994405, 1303535960, 984961486, 2747007092, 3569037538, 1256170817, 1037604311, 2765210733, 3554079995, 1131014506, 879679996, 2909243462, 3663771856, 1141124467, 855842277, 2852801631, 3708648649, 1342533948, 654459306, 3188396048, 3373015174, 1466479909, 544179635, 3110523913, 3462522015, 1591671054, 702138776, 2966460450, 3352799412, 1504918807, 783551873, 3082640443, 3233442989, 3988292384, 2596254646, 62317068, 1957810842, 3939845945, 2647816111, 81470997, 1943803523, 3814918930, 2489596804, 225274430, 2053790376, 3826175755, 2466906013, 167816743, 2097651377, 4027552580, 2265490386, 503444072, 1762050814, 4150417245, 2154129355, 426522225, 1852507879, 4275313526, 2312317920, 282753626, 1742555852, 4189708143, 2394877945, 397917763, 1622183637, 3604390888, 2714866558, 953729732, 1340076626, 3518719985, 2797360999, 1068828381, 1219638859, 3624741850, 2936675148, 906185462, 1090812512, 3747672003, 2825379669, 829329135, 1181335161, 3412177804, 3160834842, 628085408, 1382605366, 3423369109, 3138078467, 570562233, 1426400815, 3317316542, 2998733608, 733239954, 1555261956, 3268935591, 3050360625, 752459403, 1541320221, 2607071920, 3965973030, 1969922972, 40735498, 2617837225, 3943577151, 1913087877, 83908371, 2512341634, 3803740692, 2075208622, 213261112, 2463272603, 3855990285, 2094854071, 198958881, 2262029012, 4057260610, 1759359992, 534414190, 2176718541, 4139329115, 1873836001, 414664567, 2282248934, 4279200368, 1711684554, 285281116, 2405801727, 4167216745, 1634467795, 376229701, 2685067896, 3608007406, 1308918612, 956543938, 2808555105, 3495958263, 1231636301, 1047427035, 2932959818, 3654703836, 1088359270, 936918e3, 2847714899, 3736837829, 1202900863, 817233897, 3183342108, 3401237130, 1404277552, 615818150, 3134207493, 3453421203, 1423857449, 601450431, 3009837614, 3294710456, 1567103746, 711928724, 3020668471, 3272380065, 1510334235, 755167117];
    t.exports = function(t, e) {
        var i, r, s, a, l, c;
        if (void 0 === t || !t.length) return 0;
        for (i = "string" !== n.getTypeOf(t), void 0 === e && (e = 0), r = 0, s = 0, a = 0, e = -1 ^ e, l = 0, c = t.length; c > l; l++) a = i ? t[l] : t.charCodeAt(l), s = 255 & (e ^ a), r = o[s], e = e >>> 8 ^ r;
        return -1 ^ e
    }
}, function(t, e) {
    "use strict";
    e.LOCAL_FILE_HEADER = "PK", e.CENTRAL_FILE_HEADER = "PK", e.CENTRAL_DIRECTORY_END = "PK", e.ZIP64_CENTRAL_DIRECTORY_LOCATOR = "PK", e.ZIP64_CENTRAL_DIRECTORY_END = "PK", e.DATA_DESCRIPTOR = "PK\b"
}, function(t, e) {
    "use strict";
    e.base64 = !1, e.binary = !1, e.dir = !1, e.createFolders = !1, e.date = null, e.compression = null, e.compressionOptions = null, e.comment = null, e.unixPermissions = null, e.dosPermissions = null
}, function(t, e) {
    "use strict";

    function i() {
        this.compressedSize = 0, this.uncompressedSize = 0, this.crc32 = 0, this.compressionMethod = null, this.compressedContent = null
    }
    i.prototype = {
        getContent: function() {
            return null
        },
        getCompressedContent: function() {
            return null
        }
    }, t.exports = i
}, function(t, e, i) {
    "use strict";
    var n, o, r, s, a = i(183),
        l = i(178),
        c = i(202),
        h = Array(256);
    for (n = 0; 256 > n; n++) h[n] = n >= 252 ? 6 : n >= 248 ? 5 : n >= 240 ? 4 : n >= 224 ? 3 : n >= 192 ? 2 : 1;
    h[254] = h[254] = 1, o = function(t) {
        var e, i, n, o, r, s = t.length,
            a = 0;
        for (o = 0; s > o; o++) i = t.charCodeAt(o), 55296 === (64512 & i) && s > o + 1 && (n = t.charCodeAt(o + 1), 56320 === (64512 & n) && (i = 65536 + (i - 55296 << 10) + (n - 56320), o++)), a += 128 > i ? 1 : 2048 > i ? 2 : 65536 > i ? 3 : 4;
        for (e = l.uint8array ? new Uint8Array(a) : Array(a), r = 0, o = 0; a > r; o++) i = t.charCodeAt(o), 55296 === (64512 & i) && s > o + 1 && (n = t.charCodeAt(o + 1), 56320 === (64512 & n) && (i = 65536 + (i - 55296 << 10) + (n - 56320), o++)), 128 > i ? e[r++] = i : 2048 > i ? (e[r++] = 192 | i >>> 6, e[r++] = 128 | 63 & i) : 65536 > i ? (e[r++] = 224 | i >>> 12, e[r++] = 128 | i >>> 6 & 63, e[r++] = 128 | 63 & i) : (e[r++] = 240 | i >>> 18, e[r++] = 128 | i >>> 12 & 63, e[r++] = 128 | i >>> 6 & 63, e[r++] = 128 | 63 & i);
        return e
    }, r = function(t, e) {
        var i;
        for (e = e || t.length, e > t.length && (e = t.length), i = e - 1; i >= 0 && 128 === (192 & t[i]);) i--;
        return 0 > i ? e : 0 === i ? e : i + h[t[i]] > e ? i : e
    }, s = function(t) {
        var e, i, n, o, r = t.length,
            s = Array(2 * r);
        for (i = 0, e = 0; r > e;)
            if (n = t[e++], 128 > n) s[i++] = n;
            else if (o = h[n], o > 4) s[i++] = 65533, e += o - 1;
            else {
                for (n &= 2 === o ? 31 : 3 === o ? 15 : 7; o > 1 && r > e;) n = n << 6 | 63 & t[e++], o--;
                o > 1 ? s[i++] = 65533 : 65536 > n ? s[i++] = n : (n -= 65536, s[i++] = 55296 | n >> 10 & 1023, s[i++] = 56320 | 1023 & n)
            }
        return s.length !== i && (s.subarray ? s = s.subarray(0, i) : s.length = i), a.applyFromCharCode(s)
    }, e.utf8encode = function(t) {
        return l.nodebuffer ? c(t, "utf-8") : o(t)
    }, e.utf8decode = function(t) {
        var e, i, n, o, c;
        if (l.nodebuffer) return a.transformTo("nodebuffer", t).toString("utf-8");
        for (t = a.transformTo(l.uint8array ? "uint8array" : "array", t), e = [], i = 0, n = t.length, o = 65536; n > i;) c = r(t, Math.min(i + o, n)), l.uint8array ? e.push(s(t.subarray(i, c))) : e.push(s(t.slice(i, c))), i = c;
        return e.join("")
    }
}, function(t, e, i) {
    "use strict";
    var n = i(183),
        o = function() {
            this.data = []
        };
    o.prototype = {
        append: function(t) {
            t = n.transformTo("string", t), this.data.push(t)
        },
        finalize: function() {
            return this.data.join("")
        }
    }, t.exports = o
}, function(t, e, i) {
    "use strict";
    var n = i(183),
        o = function(t) {
            this.data = new Uint8Array(t), this.index = 0
        };
    o.prototype = {
        append: function(t) {
            0 !== t.length && (t = n.transformTo("uint8array", t), this.data.set(t, this.index), this.index += t.length)
        },
        finalize: function() {
            return this.data
        }
    }, t.exports = o
}, function(t, e, i) {
    "use strict";
    var n = i(176),
        o = i(211);
    t.exports = function(t, e) {
        var i, r, s, a;
        for (e = e || {}, e.base64 && (t = n.decode(t)), r = new o(t, e), i = r.files, s = 0; s < i.length; s++) a = i[s], this.file(a.fileName, a.decompressed, {
            binary: !0,
            optimizedBinaryString: !0,
            date: a.date,
            dir: a.dir,
            comment: a.fileComment.length ? a.fileComment : null,
            unixPermissions: a.unixPermissions,
            dosPermissions: a.dosPermissions,
            createFolders: e.createFolders
        });
        return r.zipComment.length && (this.comment = r.zipComment), this
    }
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        this.files = [], this.loadOptions = e, t && this.load(t)
    }
    var o = i(212),
        r = i(214),
        s = i(215),
        a = i(183),
        l = i(204),
        c = i(216),
        h = i(178),
        d = i(177);
    n.prototype = {
        checkSignature: function(t) {
            var e = this.reader.readString(4);
            if (e !== t) throw Error("Corrupted zip or bug : unexpected signature (" + a.pretty(e) + ", expected " + a.pretty(t) + ")")
        },
        readBlockEndOfCentral: function() {
            this.diskNumber = this.reader.readInt(2), this.diskWithCentralDirStart = this.reader.readInt(2), this.centralDirRecordsOnThisDisk = this.reader.readInt(2), this.centralDirRecords = this.reader.readInt(2), this.centralDirSize = this.reader.readInt(4), this.centralDirOffset = this.reader.readInt(4), this.zipCommentLength = this.reader.readInt(2), this.zipComment = this.reader.readString(this.zipCommentLength), this.zipComment = d.utf8decode(this.zipComment)
        },
        readBlockZip64EndOfCentral: function() {
            this.zip64EndOfCentralSize = this.reader.readInt(8), this.versionMadeBy = this.reader.readString(2), this.versionNeeded = this.reader.readInt(2), this.diskNumber = this.reader.readInt(4), this.diskWithCentralDirStart = this.reader.readInt(4), this.centralDirRecordsOnThisDisk = this.reader.readInt(8), this.centralDirRecords = this.reader.readInt(8), this.centralDirSize = this.reader.readInt(8), this.centralDirOffset = this.reader.readInt(8), this.zip64ExtensibleData = {};
            for (var t, e, i, n = this.zip64EndOfCentralSize - 44, o = 0; n > o;) t = this.reader.readInt(2), e = this.reader.readInt(4), i = this.reader.readString(e), this.zip64ExtensibleData[t] = {
                id: t,
                length: e,
                value: i
            }
        },
        readBlockZip64EndOfCentralLocator: function() {
            if (this.diskWithZip64CentralDirStart = this.reader.readInt(4), this.relativeOffsetEndOfZip64CentralDir = this.reader.readInt(8), this.disksCount = this.reader.readInt(4), this.disksCount > 1) throw Error("Multi-volumes zip are not supported")
        },
        readLocalFiles: function() {
            var t, e;
            for (t = 0; t < this.files.length; t++) e = this.files[t], this.reader.setIndex(e.localHeaderOffset), this.checkSignature(l.LOCAL_FILE_HEADER), e.readLocalPart(this.reader), e.handleUTF8(), e.processAttributes()
        },
        readCentralDir: function() {
            var t;
            for (this.reader.setIndex(this.centralDirOffset); this.reader.readString(4) === l.CENTRAL_FILE_HEADER;) t = new c({
                zip64: this.zip64
            }, this.loadOptions), t.readCentralPart(this.reader), this.files.push(t)
        },
        readEndOfCentral: function() {
            var t, e = this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);
            if (-1 === e) {
                t = !0;
                try {
                    this.reader.setIndex(0), this.checkSignature(l.LOCAL_FILE_HEADER), t = !1
                } catch (i) {}
                throw t ? Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html") : Error("Corrupted zip : can't find end of central directory")
            }
            if (this.reader.setIndex(e), this.checkSignature(l.CENTRAL_DIRECTORY_END), this.readBlockEndOfCentral(), this.diskNumber === a.MAX_VALUE_16BITS || this.diskWithCentralDirStart === a.MAX_VALUE_16BITS || this.centralDirRecordsOnThisDisk === a.MAX_VALUE_16BITS || this.centralDirRecords === a.MAX_VALUE_16BITS || this.centralDirSize === a.MAX_VALUE_32BITS || this.centralDirOffset === a.MAX_VALUE_32BITS) {
                if (this.zip64 = !0, e = this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR), -1 === e) throw Error("Corrupted zip : can't find the ZIP64 end of central directory locator");
                this.reader.setIndex(e), this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR), this.readBlockZip64EndOfCentralLocator(), this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir), this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END), this.readBlockZip64EndOfCentral()
            }
        },
        prepareReader: function(t) {
            var e = a.getTypeOf(t);
            "string" !== e || h.uint8array ? "nodebuffer" === e ? this.reader = new r(t) : this.reader = new s(a.transformTo("uint8array", t)) : this.reader = new o(t, this.loadOptions.optimizedBinaryString)
        },
        load: function(t) {
            this.prepareReader(t), this.readEndOfCentral(), this.readCentralDir(), this.readLocalFiles()
        }
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        this.data = t, e || (this.data = r.string2binary(this.data)), this.length = this.data.length, this.index = 0
    }
    var o = i(213),
        r = i(183);
    n.prototype = new o, n.prototype.byteAt = function(t) {
        return this.data.charCodeAt(t)
    }, n.prototype.lastIndexOfSignature = function(t) {
        return this.data.lastIndexOf(t)
    }, n.prototype.readData = function(t) {
        this.checkOffset(t);
        var e = this.data.slice(this.index, this.index + t);
        return this.index += t, e
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t) {
        this.data = null, this.length = 0, this.index = 0
    }
    var o = i(183);
    n.prototype = {
        checkOffset: function(t) {
            this.checkIndex(this.index + t)
        },
        checkIndex: function(t) {
            if (this.length < t || 0 > t) throw Error("End of data reached (data length = " + this.length + ", asked index = " + t + "). Corrupted zip ?")
        },
        setIndex: function(t) {
            this.checkIndex(t), this.index = t
        },
        skip: function(t) {
            this.setIndex(this.index + t)
        },
        byteAt: function(t) {},
        readInt: function(t) {
            var e, i = 0;
            for (this.checkOffset(t), e = this.index + t - 1; e >= this.index; e--) i = (i << 8) + this.byteAt(e);
            return this.index += t, i
        },
        readString: function(t) {
            return o.transformTo("string", this.readData(t))
        },
        readData: function(t) {},
        lastIndexOfSignature: function(t) {},
        readDate: function() {
            var t = this.readInt(4);
            return new Date((t >> 25 & 127) + 1980, (t >> 21 & 15) - 1, t >> 16 & 31, t >> 11 & 31, t >> 5 & 63, (31 & t) << 1)
        }
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t) {
        this.data = t, this.length = this.data.length, this.index = 0
    }
    var o = i(215);
    n.prototype = new o, n.prototype.readData = function(t) {
        this.checkOffset(t);
        var e = this.data.slice(this.index, this.index + t);
        return this.index += t, e
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t) {
        t && (this.data = t, this.length = this.data.length, this.index = 0)
    }
    var o = i(213);
    n.prototype = new o, n.prototype.byteAt = function(t) {
        return this.data[t]
    }, n.prototype.lastIndexOfSignature = function(t) {
        var e, i = t.charCodeAt(0),
            n = t.charCodeAt(1),
            o = t.charCodeAt(2),
            r = t.charCodeAt(3);
        for (e = this.length - 4; e >= 0; --e)
            if (this.data[e] === i && this.data[e + 1] === n && this.data[e + 2] === o && this.data[e + 3] === r) return e;
        return -1
    }, n.prototype.readData = function(t) {
        if (this.checkOffset(t), 0 === t) return new Uint8Array(0);
        var e = this.data.subarray(this.index, this.index + t);
        return this.index += t, e
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        this.options = t, this.loadOptions = e
    }
    var o = i(212),
        r = i(183),
        s = i(206),
        a = i(177),
        l = 0,
        c = 3;
    n.prototype = {
        isEncrypted: function() {
            return 1 === (1 & this.bitFlag)
        },
        useUTF8: function() {
            return 2048 === (2048 & this.bitFlag)
        },
        prepareCompressedContent: function(t, e, i) {
            return function() {
                var n, o = t.index;
                return t.setIndex(e), n = t.readData(i), t.setIndex(o), n
            }
        },
        prepareContent: function(t, e, i, n, o) {
            return function() {
                var t = r.transformTo(n.uncompressInputType, this.getCompressedContent()),
                    e = n.uncompress(t);
                if (e.length !== o) throw Error("Bug : uncompressed data size mismatch");
                return e
            }
        },
        readLocalPart: function(t) {
            var e, i;
            if (t.skip(22), this.fileNameLength = t.readInt(2), i = t.readInt(2), this.fileName = t.readString(this.fileNameLength), t.skip(i), -1 == this.compressedSize || -1 == this.uncompressedSize) throw Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");
            if (e = r.findCompression(this.compressionMethod), null === e) throw Error("Corrupted zip : compression " + r.pretty(this.compressionMethod) + " unknown (inner file : " + this.fileName + ")");
            if (this.decompressed = new s, this.decompressed.compressedSize = this.compressedSize, this.decompressed.uncompressedSize = this.uncompressedSize, this.decompressed.crc32 = this.crc32, this.decompressed.compressionMethod = this.compressionMethod, this.decompressed.getCompressedContent = this.prepareCompressedContent(t, t.index, this.compressedSize, e), this.decompressed.getContent = this.prepareContent(t, t.index, this.compressedSize, e, this.uncompressedSize), this.loadOptions.checkCRC32 && (this.decompressed = r.transformTo("string", this.decompressed.getContent()), a.crc32(this.decompressed) !== this.crc32)) throw Error("Corrupted zip : CRC32 mismatch")
        },
        readCentralPart: function(t) {
            if (this.versionMadeBy = t.readInt(2), this.versionNeeded = t.readInt(2), this.bitFlag = t.readInt(2), this.compressionMethod = t.readString(2), this.date = t.readDate(), this.crc32 = t.readInt(4), this.compressedSize = t.readInt(4), this.uncompressedSize = t.readInt(4), this.fileNameLength = t.readInt(2), this.extraFieldsLength = t.readInt(2), this.fileCommentLength = t.readInt(2), this.diskNumberStart = t.readInt(2), this.internalFileAttributes = t.readInt(2), this.externalFileAttributes = t.readInt(4), this.localHeaderOffset = t.readInt(4), this.isEncrypted()) throw Error("Encrypted zip are not supported");
            this.fileName = t.readString(this.fileNameLength), this.readExtraFields(t), this.parseZIP64ExtraField(t), this.fileComment = t.readString(this.fileCommentLength)
        },
        processAttributes: function() {
            this.unixPermissions = null, this.dosPermissions = null;
            var t = this.versionMadeBy >> 8;
            this.dir = !!(16 & this.externalFileAttributes), t === l && (this.dosPermissions = 63 & this.externalFileAttributes), t === c && (this.unixPermissions = this.externalFileAttributes >> 16 & 65535), this.dir || "/" !== this.fileName.slice(-1) || (this.dir = !0)
        },
        parseZIP64ExtraField: function(t) {
            if (this.extraFields[1]) {
                var e = new o(this.extraFields[1].value);
                this.uncompressedSize === r.MAX_VALUE_32BITS && (this.uncompressedSize = e.readInt(8)), this.compressedSize === r.MAX_VALUE_32BITS && (this.compressedSize = e.readInt(8)), this.localHeaderOffset === r.MAX_VALUE_32BITS && (this.localHeaderOffset = e.readInt(8)), this.diskNumberStart === r.MAX_VALUE_32BITS && (this.diskNumberStart = e.readInt(4))
            }
        },
        readExtraFields: function(t) {
            var e, i, n, o = t.index;
            for (this.extraFields = this.extraFields || {}; t.index < o + this.extraFieldsLength;) e = t.readInt(2), i = t.readInt(2), n = t.readString(i), this.extraFields[e] = {
                id: e,
                length: i,
                value: n
            }
        },
        handleUTF8: function() {
            var t, e;
            this.useUTF8() ? (this.fileName = a.utf8decode(this.fileName), this.fileComment = a.utf8decode(this.fileComment)) : (t = this.findExtraFieldUnicodePath(), null !== t && (this.fileName = t), e = this.findExtraFieldUnicodeComment(), null !== e && (this.fileComment = e))
        },
        findExtraFieldUnicodePath: function() {
            var t, e = this.extraFields[28789];
            return e ? (t = new o(e.value), 1 !== t.readInt(1) ? null : a.crc32(this.fileName) !== t.readInt(4) ? null : a.utf8decode(t.readString(e.length - 5))) : null
        },
        findExtraFieldUnicodeComment: function() {
            var t, e = this.extraFields[25461];
            return e ? (t = new o(e.value), 1 !== t.readInt(1) ? null : a.crc32(this.fileComment) !== t.readInt(4) ? null : a.utf8decode(t.readString(e.length - 5))) : null
        }
    }, t.exports = n
}, function(t, e, i) {
    "use strict";
    var n = i(183);
    e.string2binary = function(t) {
        return n.string2binary(t)
    }, e.string2Uint8Array = function(t) {
        return n.transformTo("uint8array", t)
    }, e.uint8Array2String = function(t) {
        return n.transformTo("string", t)
    }, e.string2Blob = function(t) {
        var e = n.transformTo("arraybuffer", t);
        return n.arrayBuffer2Blob(e)
    }, e.arrayBuffer2Blob = function(t) {
        return n.arrayBuffer2Blob(t)
    }, e.transformTo = function(t, e) {
        return n.transformTo(t, e)
    }, e.getTypeOf = function(t) {
        return n.getTypeOf(t)
    }, e.checkSupport = function(t) {
        return n.checkSupport(t)
    }, e.MAX_VALUE_16BITS = n.MAX_VALUE_16BITS, e.MAX_VALUE_32BITS = n.MAX_VALUE_32BITS, e.pretty = function(t) {
        return n.pretty(t)
    }, e.findCompression = function(t) {
        return n.findCompression(t)
    }, e.isRegExp = function(t) {
        return n.isRegExp(t)
    }
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        var n, o, r, s, a, l, c, h, d, u, p;
        if (!t) throw Error("No studies metainfo");
        if (n = i(219), this._studiesMetainfo = t, !e) throw Error("No studies migrations");
        for (this._studiesMigrations = e, this._migrations = {}, o = 0; o < this._studiesMigrations.length; o++)
            for (r = this._studiesMigrations[o], s = 0; s < r.length; s++)
                for (a = r[s], l = a.versFrom, c = a.versTo, h = 0; h < a.studyMigrations.length; h++) {
                    if (d = a.studyMigrations[h], u = d.studyId, 0 === d.rules.length) throw Error("Study Migration should have at least one convertion rule");
                    p = u in this._migrations ? this._migrations[u] : new n(u), p.addMigration(l, c, d.rules), this._migrations[u] = p
                }
        this._clientMigrations = [function(t, e) {
            var i, n, o, r, s;
            if (0 === this._studiesMetainfo.length || !t.isTVScript || t.version >= 22) return e;
            for (i = {}, n = 0, o = 0; r = e[o], void 0 !== r;) s = e[r.id], r.isFake && (r.id = "in_" + n++), i[o] = r, i[r.id] = s, o++;
            return i
        }]
    }
    var o = i(165),
        r = i(126),
        s = i(51),
        a = i(125);
    n.prototype.updateMetaInfo = function(t) {
        var e, i, n;
        if (!t) return t;
        for (assert(!t.isTVScript, "This method should update only built-in java indicators metaInfo. For Pine indicators use updateMetaInfoAsync"), e = null, i = this._studiesMetainfo, n = 0; n < i.length; n++)
            if (i[n].id === t.id) {
                e = i[n];
                break
            }
        return TradingView.clone(e)
    }, n.prototype.updateMetaInfoAsync = function(t, e) {
        var i, n, o, s, l, c, h, d = $.Deferred(),
            u = d.promise();
        if (!t) return d.reject("No old metaInfo was given"), u;
        if (e) return d.resolve(null), u;
        if (t.isTVScript && void 0 !== t.TVScriptSourceCode) i = a.versionOf(t), i !== a.CURRENT_METAINFO_FORMAT_VERSION ? (n = this._studiesMetainfo.length ? r.tvScriptingPkgVersion(this._studiesMetainfo) : "1", o = t.scriptIdPart || TVScript.createScriptIdPart(), r.translateScriptAsync(t.TVScriptSourceCode, null, o, n).done(function(t) {
            t = a.addOrReplaceStudyMetaInfo(this._studiesMetainfo, t), d.resolve(t)
        }.bind(this)).fail(function(e) {
            TradingView.logWarn("Could not compile Pine script (skipping): " + t.description + " " + e), d.reject(e)
        })) : (s = a.addOrReplaceStudyMetaInfo(this._studiesMetainfo, t), d.resolve(s));
        else {
            for (l = null, c = this._studiesMetainfo, h = 0; h < c.length; h++)
                if (c[h].id === t.id) {
                    l = c[h];
                    break
                }
            l ? d.resolve(TradingView.clone(l)) : d.resolve(null)
        }
        return u
    }, n.prototype.updateStudyState = function(t, e, i) {
        var o, r, s, l, c, h, d, u, p, f, _, g, m, v, y;
        if (t) {
            t = TradingView.clone(t), o = e.id, o in this._migrations && (r = this._migrations[o].updateInputs(e.version, t.inputs), t.inputs = r);
            for (s = 0; s < this._clientMigrations.length; ++s) r = this._clientMigrations[s].call(this, e, t.inputs), Object.keys(r).length === Object.keys(t.inputs).length ? t.inputs = r : TradingView.logWarn("StudyVersioning._clientMigrations application returned bad result. Skipping it...")
        }
        if (l = i, l && t && (c = {}, n.mergeInputs(c, l.inputs), n.mergeInputs(c, l.defaults.inputs), n.mergeInputs(c, t.inputs), t.inputs = c, h = a.versionOf(e), e.isTVScript && e.TVScriptSourceCode && h >= 12 && 26 >= h)) {
            for (d = {}, s = 0; s < e.plots.length; ++s) u = e.plots[s], p = l.plots[s], d[u.id] = p.id;
            for (f = Object.keys(t.styles), s = 0; s < f.length; ++s) _ = f[s], g = t.styles[_], delete t.styles[_], m = d[_], t.styles[m] = g;
            for (v = Object.keys(t.plots), s = 0; s < v.length; ++s) y = v[s], _ = t.plots[y].id, t.plots[y].id = d[_]
        }
        return t
    }, n.prototype.patchPointsBasedStudyState = function(t) {
        return n._fixInputsMaxValue(t.state, t.metaInfo), "LineToolRegressionTrend" === t.type && (t = o.patchSourceState(t)), t
    }, n.prototype.patchPointsBasedStudyData = function(t, e) {
        if ("battle" !== s()) return e;
        if (!t || !e) return e;
        var i = TradingView.clone(e);
        return "VbPFixed@tv-volumebyprice" === t.id && t.version && t.version <= 4 && n._patchOldVolumeProfiles(0, i), i
    }, n.prototype.patchStudyData = function(t, e, i, o) {
        var r, l, c, h, d, u, p;
        if ("battle" !== s()) return {
            data: e,
            nsData: i,
            indexes: o
        };
        if (r = TradingView.clone(e), l = TradingView.clone(i), c = TradingView.clone(o), "VbPVisible@tv-volumebyprice" === t.id && t.version && t.version <= 4 && n._patchOldVolumeProfiles(0, r.graphics), "VbPSessions@tv-volumebyprice" === t.id && t.version && t.version <= 4 && n._patchOldVolumeProfiles(0, r.graphics), h = a.versionOf(t), t.isTVScript && t.TVScriptSourceCode && h >= 12 && 26 >= h)
            for (d = r.columns, r.columns = [], u = 0; u < d.length; ++u) p = "plot_" + u, r.columns.push(p);
        return {
            data: r,
            nsData: l,
            indexes: c
        }
    }, n._patchOldVolumeProfiles = function(t, e) {
        var i, n = e.hhists[t].data,
            o = [];
        for (i in n) o = o.concat(n[i]);
        e.hhists[0].data = o
    }, n._fixInputsOrder = function(t, e) {
        var i, o, r, s, l = a.getOrderedInputIds(e),
            c = n.splitInputs(t.inputs),
            h = c.arr,
            d = c.obj,
            u = TradingView.merge({}, d);
        for (i = 0; i < l.length; ++i) o = l[i], r = n.findInputKeyById(h, o), null !== r && (s = h[r], u[i] = s);
        t.inputs = u
    }, n.INPUT_MAX_VALUE = 253370764800, n._verifyInputsMaxValue = function(t) {
        var e, i, o = n.INPUT_MAX_VALUE;
        if (t.inputs)
            for (e = 0; e < t.inputs.length; e++) i = t.inputs[e], "integer" === i.type && i.max && i.max > o && TradingView.logWarn("Bad integer input max value in metaInfo id=" + t.id + " title=" + t.description)
    }, n._fixInputsMaxValue = function(t, e) {
        var i, o, r, s, a, l;
        if (!TradingView.isAbsent(e)) {
            if (i = n.INPUT_MAX_VALUE, e.inputs)
                for (o = 0; o < e.inputs.length; o++) r = e.inputs[o], "integer" === r.type && r.max && r.max > i && (r.max = i);
            if (t && t.inputs) {
                s = n.splitInputs(t.inputs), a = s.arr;
                for (l in a) r = a[l], "integer" === r.type && r.max && r.max > i && (r.max = i);
                t.inputs = TradingView.merge(s.obj, s.arr)
            }
        }
    }, n.prototype.patchPropsStateAndMetaInfo = function(t, e, i) {
        var o, r, s, l, c, h, d, u, p, f;
        if (n._fixInputsOrder(t, e), n._fixInputsMaxValue(t, e), e.isTVScript && "undefined" != typeof TVScript && TVScript.createScriptIdPart && (e.scriptIdPart = e.scriptIdPart || TVScript.createScriptIdPart()), o = 60, e.isTVScript && e.version < o && ("Script$TV_EARNINGS@tv-scripting" !== e.id && "Script$TV_DIVIDENDS@tv-scripting" !== e.id && "Script$TV_SPLITS@tv-scripting" !== e.id || delete e.TVScriptSourceCode), "Volume" !== e.id && "Volume@tv-basicstudies" !== e.id || 0 !== e.inputs.length || (e.inputs = [{
                id: "length",
                type: "integer",
                defval: 20,
                min: 1,
                max: 1e3
            }], e.plots.push({
                id: "vol_ma",
                type: "line"
            })), "Volume@tv-basicstudies" === e.id && e.version && e.version <= 46 && (t.styles.vol.transparency = t.transparency || 87), "PivotPointsStandard@tv-basicstudies" === e.id && (0 === e.inputs.length ? (t.inputs = {
                kind: "Traditional",
                showHistoricalPivots: !0
            }, e.inputs = [{
                defval: "Traditional",
                id: "kind",
                type: "text",
                options: ["Traditional", "Fibonacci", "Woodie", "Classic", "DeMark", "Camarilla"]
            }, {
                id: "showHistoricalPivots",
                type: "bool",
                defval: !0
            }]) : 1 === e.inputs.length && (t.inputs = {
                kind: "Traditional"
            }, e.inputs = [{
                defval: "Traditional",
                id: "kind",
                type: "text",
                options: ["Traditional", "Fibonacci", "Woodie", "Classic", "DeMark", "Camarilla"]
            }, {
                id: "showHistoricalPivots",
                type: "bool",
                defval: !0
            }]), void 0 === t._hardCodedDefaultsVersion && (t._hardCodedDefaultsVersion = 1, r = t.color, delete t.color, t.levelsStyle = {
                colors: {
                    P: r,
                    "S1/R1": r,
                    "S2/R2": r,
                    "S3/R3": r,
                    "S4/R4": r,
                    "S5/R5": r
                }
            })), "CMF" === e.shortId && 2 === e.inputs.length && (t.inputs = {
                length: t.inputs["length fast"]
            }, e.inputs = e.inputs.splice(0, 1), e.inputs[0].id = "length"), e.defaults && void 0 === e.defaults.precision && (-1 !== ["Volume@tv-basicstudies", "VbPVisible@tv-volumebyprice", "VbPSessions@tv-volumebyprice"].indexOf(e.id) ? e.defaults.precision = 0 : e.defaults.precision = 4), s = 60, e.version < s)
            for (l = ["DIVIDENDS", "SPLITS", "EARNINGS"], c = 6, h = 0; h < l.length; h++) e.id.startsWith("Script$TV_" + l[h] + "@tv-scripting") && (e.fullId = "ESD" + e.fullId.substring(c), e.id = "ESD" + e.id.substring(c), e.name = "ESD" + e.name.substring(c), e.shortId = "ESD" + e.shortId.substring(c), e.productId = "ESD" + e.productId.substring(c));
        if ("MA" === e.id) {
            switch (d = new a({
                id: "MAExp",
                properties: [{
                    id: "is_price_study",
                    type: "bool",
                    value: "true"
                }],
                inputs: [{
                    id: "length",
                    type: "integer",
                    defval: 20,
                    min: 1,
                    max: 500
                }, {
                    id: "source",
                    type: "text",
                    defval: "close",
                    options: ["open", "high", "low", "close"]
                }],
                plots: [{
                    id: "MovAvgExp",
                    type: "line"
                }],
                palettes: {}
            }), u = new a({
                id: "MASimple",
                properties: [{
                    id: "is_price_study",
                    type: "bool",
                    value: "true"
                }],
                inputs: [{
                    id: "length",
                    type: "integer",
                    defval: 20,
                    min: 1,
                    max: 500
                }, {
                    id: "source",
                    type: "text",
                    defval: "close",
                    options: ["open", "high", "low", "close"]
                }],
                plots: [{
                    id: "MovAvgSimple",
                    type: "line"
                }],
                palettes: {}
            }), p = new a({
                id: "MAVolumeWeighted",
                properties: [{
                    id: "is_price_study",
                    type: "bool",
                    value: "true"
                }],
                inputs: [{
                    id: "length",
                    type: "integer",
                    defval: 20,
                    min: 1,
                    max: 500
                }, {
                    id: "source",
                    type: "text",
                    defval: "close",
                    options: ["open", "high", "low", "close"]
                }],
                plots: [{
                    id: "MovAvgVolumeWeighted",
                    type: "line"
                }],
                palettes: {}
            }), f = new a({
                id: "MAWeighted",
                properties: [{
                    id: "is_price_study",
                    type: "bool",
                    value: "true"
                }],
                inputs: [{
                    id: "length",
                    type: "integer",
                    defval: 20,
                    min: 1,
                    max: 500
                }, {
                    id: "source",
                    type: "text",
                    defval: "close",
                    options: ["open", "high", "low", "close"]
                }],
                plots: [{
                    id: "MovAvgWeighted",
                    type: "line"
                }],
                palettes: {}
            }), t.inputs.type) {
                case "exp":
                    e = d;
                    break;
                case "simple":
                    e = u;
                    break;
                case "weighted":
                    e = f;
                    break;
                case "volume weighted":
                    e = p
            }
            t.styles[e.plots[0].id] = t.styles.MovAvg, delete t.styles.MovAvg, delete t.inputs.type
        }
        return i.oldShowStudyLastValueProperty && (t.oldShowLastValue = t.showLastValue), delete t.showLastValue, delete t.showStudyArguments, {
            propsState: t,
            metaInfo: e
        }
    }, n.compareStudyVersions = function(t, e) {
        var i, n, o, r, s, a;
        return t = "" + t, e = "" + e, i = t.split("."), n = i[0], n = parseInt(n, 10), o = i.length > 1 ? i[1] : "0", o = parseInt(o, 10), r = e.split("."), s = r[0], s = parseInt(s, 10), a = r.length > 1 ? r[1] : "0", a = parseInt(a, 10), s > n ? -1 : n > s ? 1 : a > o ? -1 : o > a ? 1 : 0
    }, n.isLess = function(t, e) {
        var i = n.compareStudyVersions(t, e);
        return 0 > i
    }, n.isLessOrEqual = function(t, e) {
        var i = n.compareStudyVersions(t, e);
        return 0 >= i
    }, n.isEqual = function(t, e) {
        var i = n.compareStudyVersions(t, e);
        return 0 === i
    }, n.isGreater = function(t, e) {
        var i = n.compareStudyVersions(t, e);
        return i > 0
    }, n.isGreaterOrEqual = function(t, e) {
        var i = n.compareStudyVersions(t, e);
        return i >= 0
    }, n.isVersionTesting = function(t) {
        var e, i;
        return t ? (t = "" + t, e = RegExp("\\d+.\\d+"), i = e.exec(t) === t) : !1
    }, n.isVersionHead = function(t) {
        var e, i;
        return t ? (t = "" + t, e = RegExp("\\d+"), i = e.exec(t) === t) : !1
    }, n.mergeInputs = function(t, e) {
        n.mergeInputsArrPart(t, e), n.mergeInputsObjPart(t, e)
    }, n.mergeInputsArrPart = function(t, e) {
        var i, o, r = n.splitInputs(e);
        for (i in r.arr) o = n.findInputKeyById(t, r.arr[i].id), o ? TradingView.merge(t[o], r.arr[i]) : n.appendInputInfoToArr(t, r.arr[i])
    }, n.mergeInputsObjPart = function(t, e) {
        var i = n.splitInputs(e);
        TradingView.merge(t, i.obj)
    }, n.appendInputInfoToArr = function(t, e) {
        var i, n, o = -1;
        for (i in t) n = parseInt(i, 10), isNumber(n) && n > o && (o = n);
        t[o + 1] = e
    }, n.splitInputs = function(t) {
        var e, i = {},
            n = {};
        for (e in t) isNumber(parseInt(e, 10)) ? i[e] = t[e] : n[e] = t[e];
        return {
            arr: i,
            obj: n
        }
    }, n.findInputKeyById = function(t, e) {
        var i, n = null;
        for (i in t)
            if (isNumber(parseInt(i, 10)) && t[i].id === e) {
                n = i;
                break
            }
        return n
    }, n.getInputKeyById = function(t, e) {
        var i = n.findInputKeyById(t, e);
        if (!i) throw Error("Cannot find input with id: " + e);
        return i
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t) {
        this._studyId = t, this._maxToVers = "0", this._maxFromVers = "0", this._migrs = []
    }
    var o = i(218);
    n.prototype.addMigration = function(t, e, i) {
        o.isGreater(t, this._maxFromVers) && (this._maxFromVers = t), o.isGreater(e, this._maxToVers) && (this._maxToVers = e), this._migrs.push({
            fromVers: t,
            toVers: e,
            rules: i
        })
    }, n.prototype.updateInputs = function(t, e) {
        var i, n, r;
        if (!e) return e;
        for (i = TradingView.clone(e), n = t; o.isLess(n, this._maxToVers);) {
            if (r = this._findMigration(n), i = this._applyMigration(i, r), !o.isLess(n, r.toVers)) throw Error("Problems in study migration process... Possible infinite cycle has been detected and stopped.");
            n = r.toVers, TradingView.logDebugChart("Applied migration rule to study: " + this._studyId + " from vers: " + r.fromVers + " to vers: " + r.toVers)
        }
        return i
    }, n.prototype._findMigration = function(t) {
        var e, i, n = -1,
            r = this._maxFromVers;
        for (e = 0; e < this._migrs.length; e++) i = this._migrs[e], o.isLess(i.fromVers, t) || o.isLessOrEqual(i.fromVers, r) && (r = i.fromVers, n = e);
        if (0 > n) throw Error("Could not find matching migration for study: " + this._studyId + " vers: " + t);
        return this._migrs[n]
    }, n.prototype._applyMigration = function(t, e) {
        var i, n, o, r = t;
        for (i = 0; i < e.rules.length; i++) n = e.rules[i], o = this._getApplyRuleFun(n.type), r = o(r, n);
        return r
    }, n.prototype._getApplyRuleFun = function(t) {
        if ("inputRemoved" === t) return n._applyInputRemovedRule;
        if ("inputChangedType" === t) return n._applyInputChangedTypeRule;
        throw Error("Unknown migration rule type: " + t)
    }, n._applyInputRemovedRule = function(t, e) {
        var i, n, r, s;
        if (!(e.inputId in t)) return t;
        if (i = o.findInputKeyById(t, e.inputId), !i) return t;
        delete t[i], delete t[e.inputId], n = {}, r = 0;
        for (s in t) isNumber(parseInt(s, 10)) ? (n[r] = t[s], r++) : n[s] = t[s];
        return n
    }, n._applyInputChangedTypeRule = function(t, e) {
        var i = o.getInputKeyById(t, e.inputId);
        if ("resetToDefVal" !== e.action) throw Error("Unknown action " + e.action + " for rule with type " + e.type);
        return t[e.inputId] = e.defVal, t[i].defval = e.defVal, t[i].type = e.inputType, t
    }, t.exports = n
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t) {
            this._data = t
        }

        function o(t) {
            this._data = t
        }

        function r(t, e) {
            for (var i, n, o, r = 0, s = t.length - 1; s >= r;)
                if (i = r + s >>> 1, n = t[i].y1, o = t[i].y2, n > e) r = i + 1;
                else {
                    if (!(e > o)) return t[i + 1] && n === t[i + 1].y1 ? i + 1 : i;
                    s = i - 1
                }
            return -1
        }
        var s = i(116).TextRenderer,
            a = i(76).HorzLineRenderer,
            l = i(153).TrendLineRenderer,
            c = i(60),
            h = i(62),
            d = i(221),
            u = TradingView.Study,
            p = i(222),
            f = i(67),
            _ = i(71),
            g = i(91),
            m = g.clearRect;
        u.graphicsZOrderPriority = function(t) {
            switch (t) {
                case "polygons":
                    return -100;
                case "trendchannels":
                    return -90;
                default:
                    return 0
            }
        }, u.StudyPaneView_horizlines = function(t, e) {
            this._study = t, this._model = e, this._data = []
        }, u.StudyPaneView_horizlines.prototype.update = function() {
            this._invalidated = !0
        }, u.StudyPaneView_horizlines.prototype.renderer = function() {
            var t, e;
            for (this._invalidated && (this._updateViewInternal(), this._invalidated = !1), t = new _, e = 0; e < this._data.length; e++) t.append(new l(this._data[e], new f(f.REGULAR)));
            return t
        }, u.StudyPaneView_horizlines.prototype._updateViewInternal = function() {
            var t, i, n, o, r, s, a, l, c, h, d, u, p, f, _, g, m, v, y, w, b, S;
            if (this._data = [], t = this._study.graphics().horizlines, t && (i = this._study.priceScale(), n = this._study._model.timeScale(), i && !i.isEmpty() && n && !n.isEmpty()))
                for (o = this._study.graphics().indexes, r = this._model.timeScale().visibleBars(), s = r.firstBar(), a = r.lastBar(), l = 0; l < t.length; l++)
                    if (c = t[l], c.data && (h = this._study.properties().graphics.horizlines[c.styleId], h.visible.value()))
                        for (d = 0; d < c.data.length; d++) u = c.data[d], p = o[u.startIndex], f = o[u.endIndex], !u.extendRight && Math.max(p, f) < s || !u.extendLeft && Math.min(p, f) > a || (_ = {}, g = n.indexToCoordinate(p), m = n.indexToCoordinate(f), v = u.level, i.isPercent() && (y = this._study.firstValue(), v = i.priceRange().convertToPercent(v, y)), w = i.priceToCoordinate(v), b = new e.Point(g, w), S = new e.Point(m, w), _.points = [b, S], _.extendleft = u.extendLeft, _.extendright = u.extendRight, _.width = n.width(), _.height = i.height(), _.color = h.color.value(), _.linewidth = h.width.value(), _.linestyle = h.style.value(), this._data.push(_))
        }, u.StudyPaneView_vertlines = function(t, e) {
            this._study = t, this._model = e, this._data = []
        }, u.StudyPaneView_vertlines.prototype.update = function() {
            this._invalidated = !0
        }, u.StudyPaneView_vertlines.prototype.renderer = function() {
            var t, e;
            for (this._invalidated && (this._updateViewInternal(), this._invalidated = !1), t = new _, e = 0; e < this._data.length; e++) t.append(new l(this._data[e], new f(f.REGULAR)));
            return t
        }, u.StudyPaneView_vertlines.prototype._updateViewInternal = function() {
            var t, i, n, o, r, s, a, l, c, h, d, u, p, f, _, g, m, v, y, w, b;
            if (this._data = [], t = this._study.graphics().vertlines, t && (i = this._study.priceScale(), n = this._study._model.timeScale(), i && !i.isEmpty() && n && !n.isEmpty()))
                for (o = this._study.graphics().indexes, r = this._model.timeScale().visibleBars(), s = r.firstBar(), a = r.lastBar(), l = 0; l < t.length; l++)
                    if (c = t[l], c.data && (h = this._study.properties().graphics.vertlines[c.styleId], h.visible.value()))
                        for (d = 0; d < c.data.length; d++) u = c.data[d], p = {}, o[u.index] < s || o[u.index] > a || (f = n.indexToCoordinate(o[u.index]) + 1, _ = null, u.extendBottom ? g = i.height() : (v = u.startPrice, i.isPercent() && (_ = _ || this._study.firstValue(), v = i.priceRange().convertToPercent(v, _)), g = i.priceToCoordinate(v)), u.extendTop ? m = 0 : (y = u.endPrice, i.isPercent() && (_ = _ || this._study.firstValue(), y = i.priceRange().convertToPercent(y, _)), m = i.priceToCoordinate(y)), w = new e.Point(f, g), b = new e.Point(f, m), p.points = [w, b], p.extendleft = u.extendBottom, p.extendright = u.extendTop, p.width = n.width(), p.height = i.height(), p.color = h.color.value(), p.linewidth = h.width.value(), p.linestyle = h.style.value(), this._data.push(p))
        }, u.StudyPaneView_lines = function(t, e) {
            this._study = t, this._model = e, this._data = []
        }, u.StudyPaneView_lines.prototype.update = function() {
            this._invalidated = !0
        }, u.StudyPaneView_lines.prototype.renderer = function() {
            var t, e;
            for (this._invalidated && (this._updateViewInternal(), this._invalidated = !1), t = new _, e = 0; e < this._data.length; e++) t.append(new l(this._data[e], new f(f.REGULAR)));
            return t
        }, u.StudyPaneView_lines.prototype._updateViewInternal = function() {
            var t, i, n, o, r, s, a, l, c, h, d, u, p, f, _, g, m, v, y, w, b, S, T, x;
            if (this._data = [], t = this._study.graphics().lines, t && (i = this._study.priceScale(), n = this._study._model.timeScale(), i && !i.isEmpty() && n && !n.isEmpty()))
                for (o = this._study.graphics().indexes, r = this._model.timeScale().visibleBars(), s = r.firstBar(), a = r.lastBar(), l = 0; l < t.length; l++)
                    if (c = t[l], c.data && (h = this._study.properties().graphics.lines[c.styleId], h.visible.value()))
                        for (d = 0; d < c.data.length; d++) u = c.data[d], p = o[u.startIndex] + (u.startOffset || 0), f = o[u.endIndex] + (u.endOffset || 0), !u.extendRight && Math.max(p, f) < s || !u.extendLeft && Math.min(p, f) > a || (_ = {}, g = n.indexToCoordinate(p), m = n.indexToCoordinate(f), v = u.startPrice, y = u.endPrice, i.isPercent() && (w = this._study.firstValue(), v = i.priceRange().convertToPercent(v, w), y = i.priceRange().convertToPercent(y, w)), b = i.priceToCoordinate(v), S = i.priceToCoordinate(y), T = new e.Point(g, b), x = new e.Point(m, S), _.points = [T, x], _.color = h.color.value(), _.linewidth = h.width.value(), _.linestyle = h.style.value(), this._data.push(_))
        }, u.StudyPaneView_hlines = function(t, e) {
            this._study = t, this._model = e, this._data = [], this._textData = [], this._textRendererCache = {}
        }, u.StudyPaneView_hlines.prototype.update = function() {
            this._invalidated = !0
        }, u.StudyPaneView_hlines.prototype.renderer = function() {
            var t, e;
            for (this._invalidated && (this._updateViewInternal(), this._invalidated = !1), t = new _, e = 0; e < this._data.length; e++) t.append(new a(this._data[e]));
            for (e = 0; e < this._textData.length; e++) t.append(new s(this._textData[e], this._textRendererCache, new f(f.REGULAR)));
            return t
        }, u.StudyPaneView_hlines.prototype._updateViewInternal = function() {
            this._calcHorzLinesData(), this._calcTextData()
        }, u.StudyPaneView_hlines.prototype._calcTextData = function() {
            var t, i, n, o, r, s, a, l, c, h, d, u, p, f, _;
            if (this._textData = [], t = this._study.graphics().hlines, t && (i = this._study.priceScale(), n = this._study._model.timeScale(), i && !i.isEmpty() && n && !n.isEmpty()))
                for (o = 0; o < t.length; o++)
                    if (r = t[o], r.data && (s = this._study.properties().graphics.hlines[r.styleId], s.enableText.value() && s.showText.value()))
                        for (a = 0; a < r.data.length; a++) l = r.data[a], c = {}, c.text = void 0 === l.text ? "" : l.text, c.color = s.color.value(), c.font = "arial", c.fontsize = s.fontSize.value(), h = l.level, i.isPercent() && (d = this._study.firstValue(), h = i.priceRange().convertToPercent(h, d)), u = i.priceToCoordinate(h), p = s.textPos.value(), p === CanvasEx.TEXTPOS_TOPLEFT || p === CanvasEx.TEXTPOS_MIDDLELEFT || p === CanvasEx.TEXTPOS_BOTTOMLEFT ? (f = 4, c.horzAlign = "left") : p === CanvasEx.TEXTPOS_TOPCENTER || p === CanvasEx.TEXTPOS_MIDDLECENTER || p === CanvasEx.TEXTPOS_BOTTOMCENTER ? (f = n.width() / 2, c.horzAlign = "center") : p !== CanvasEx.TEXTPOS_TOPRIGHT && p !== CanvasEx.TEXTPOS_MIDDLERIGHT && p !== CanvasEx.TEXTPOS_BOTTOMRIGHT || (f = n.width(), c.horzAlign = "right"), p === CanvasEx.TEXTPOS_TOPLEFT || p === CanvasEx.TEXTPOS_TOPCENTER || p === CanvasEx.TEXTPOS_TOPRIGHT ? (c.vertAlign = "bottom", u -= 4) : p === CanvasEx.TEXTPOS_MIDDLELEFT || p === CanvasEx.TEXTPOS_MIDDLECENTER || p === CanvasEx.TEXTPOS_MIDDLERIGHT ? (c.vertAlign = "middle", u -= 2) : p !== CanvasEx.TEXTPOS_BOTTOMLEFT && p !== CanvasEx.TEXTPOS_BOTTOMCENTER && p !== CanvasEx.TEXTPOS_BOTTOMRIGHT || (c.vertAlign = "top"), _ = new e.Point(f, u), c.points = [_], c.offsetX = 0, c.offsetY = 0, this._textData.push(c)
        }, u.StudyPaneView_hlines.prototype._calcHorzLinesData = function() {
            var t, i, n, o, r, s, a, l, c, h, d, u;
            if (this._data = [], t = this._study.graphics().hlines, t && (i = this._study.priceScale(), i && !i.isEmpty()))
                for (n = 0; n < t.length; n++)
                    if (o = t[n], o.data && (r = this._study.properties().graphics.hlines[o.styleId], r.visible.value()))
                        for (s = 0; s < o.data.length; s++) a = o.data[s], l = {}, c = 0, h = a.level, i.isPercent() && (d = this._study.firstValue(), h = i.priceRange().convertToPercent(h, d)), u = i.priceToCoordinate(h), l.points = [new e.Point(c, u)], l.color = r.color.value(), l.linewidth = r.width.value(), l.linestyle = r.style.value(), l.hitTestResult = f.REGULAR, this._data.push(l)
        }, u.StudyPriceAxisView_hlines = function(t, e, i, n, o) {
            this._study = t, this._model = e, this._line = i, this._styleId = n, this._data = {}, this._lineType = o, this._invalidated = !0
        }, inherit(u.StudyPriceAxisView_hlines, c), u.StudyPriceAxisView_hlines.prototype.update = function() {
            this._invalidated = !0
        }, u.StudyPriceAxisView_hlines.prototype.updateImpl = function() {
            var t, e, i, n, o;
            if (this._data = {}, this._data.visible = !1, t = this._study.priceScale(), t && !t.isEmpty() && (e = this._study.properties().visible.value(), e && (i = this._study.properties().graphics[this._lineType][this._styleId], i.visible && i.visible.value() && i.showPrice && i.showPrice.value()))) {
                if (this._data.visible = !0, this._data.color = "white", this._data.background = i.color.value(), n = this._line.level, t.isPercent()) {
                    if (o = this._study.firstValue(), !isNumber(o)) return;
                    n = t.priceRange().convertToPercent(n, o)
                }
                this._data.coordinate = t.priceToCoordinate(n), this._data.text = t.formatter().format(n)
            }
        }, u.StudyPriceAxisView_hlines.prototype.renderer = function() {
            return this._invalidated && (this.updateImpl(), this._invalidated = !1), new h(this._data)
        }, TradingView.TriangleTextMarkRenderer = function(t, e) {
            this._data = t, this._textCache = e
        }, TradingView.TriangleTextMarkRenderer.prototype.fontStyle = function() {
            return (this._data.bold ? "bold " : "") + (this._data.italic ? "italic " : "") + this._data.fontSize + "px " + this._data.font
        }, TradingView.TriangleTextMarkRenderer.prototype.draw = function(t) {
            var e, i, n, o, r, s, a;
            if (this._data) {
                switch (e = "up" === this._data.direction ? 1 : -1, i = this._data.point.x, "left" === this._data.halign ? i -= this._data.size : "right" === this._data.halign && (i += this._data.size), n = this._data.point.y, t.font = this.fontStyle(), o = t.measureText(this._data.text).width, this._textCache.textWidth = o, r = this._data.fontSize, s = .65 * r, a = 1 * r, t.save(), t.translate(i + .5, n + .5), t.beginPath(), t.moveTo(0, 0), this._data.direction) {
                    case "up":
                    case "down":
                        t.lineTo(s, a * e), t.lineTo(.5 * o + s, a * e), t.lineTo(.5 * o + s, (a + 1.75 * r) * e), t.lineTo(.5 * -o - s, (a + 1.75 * r) * e), t.lineTo(.5 * -o - s, a * e), t.lineTo(-s, a * e), t.lineTo(0, 0), t.strokeStyle = this._data.borderColor, t.stroke(), t.fillStyle = this._data.color, t.fill(), t.fillStyle = this._data.fontColor, t.fillText(this._data.text, .5 * -o, 0 > e ? e * a - .5 * r : a + 1.25 * r);
                        break;
                    default:
                        throw Error(this._data.direction + " doesn't supported by TradingView.TriangleTextMarkRenderer")
                }
                t.restore()
            }
        }, TradingView.TriangleTextMarkRenderer.prototype.hitTest = function(t) {
            var i, n, o, r, s, a, l, c, h, d, u, p = this._textCache.textWidth,
                _ = this._data.fontSize;
            switch (this._data.direction) {
                case "up":
                case "down":
                    if (i = "up" === this._data.direction ? 1 : -1, n = .65 * _, o = 1 * _, r = this._data.point.x, "left" === this._data.halign ? r -= this._data.size : "right" === this._data.halign && (r += this._data.size), s = this._data.point.y, a = r - .5 * p - n, l = r + .5 * p + n, c = s + o * i, h = s + (o + 1.75 * _) * i, c > h && (s = c, c = h, h = s), e.pointInRect(t, new e.Point(a, c), new e.Point(l, h))) return new f(f.REGULAR);
                    if (d = [], d[0] = {}, d[0].x = this._data.point.x, d[0].y = this._data.point.y, d[1] = {}, d[1].x = this._data.point.x + .65 * _, d[1].y = this._data.point.y + _ * i, d[2] = {}, d[2].x = this._data.point.x - .65 * _, d[2].y = this._data.point.y + _ * i, u = (t.x - d[0].x) * (d[1].y - d[0].y) - (t.y - d[0].y) * (d[1].x - d[0].x), ((t.x - d[1].x) * (d[2].y - d[1].y) - (t.y - d[1].y) * (d[2].x - d[1].x)) * u > 0 && ((t.x - d[2].x) * (d[0].y - d[2].y) - (t.y - d[2].y) * (d[0].x - d[2].x)) * u > 0) return new f(f.REGULAR);
                    break;
                default:
                    throw Error(this._data.direction + " doesn't supported by TradingView.TriangleTextMarkRenderer")
            }
            return null
        }, TradingView.RectangleTextMarkRenderer = function(t, e) {
            this._data = t, this._textCache = e
        }, TradingView.RectangleTextMarkRenderer.prototype.fontStyle = function() {
            return (this._data.bold ? "bold " : "") + (this._data.italic ? "italic " : "") + this._data.fontSize + "px " + this._data.font
        }, TradingView.RectangleTextMarkRenderer.prototype.draw = function(t) {
            var e, i, n, o, r;
            if (this._data) {
                switch (e = this._data.point.x, i = this._data.point.y, t.font = this.fontStyle(), n = t.measureText(this._data.text).width, this._textCache.textWidth = n, t.save(), t.translate(e + .5, i + .5), t.beginPath(), t.moveTo(0, 0), o = this._data.halign, r = this._data.valign, t.textAlign = o, r) {
                    case "middle":
                        t.textBaseline = "middle";
                        break;
                    case "top":
                        t.textBaseline = "bottom";
                        break;
                    case "bottom":
                        t.textBaseline = "hanging"
                }
                t.fillStyle = this._data.fontColor, t.fillText(this._data.text, 0, 0), t.restore()
            }
        }, TradingView.RectangleTextMarkRenderer.prototype.hitTest = function(t) {
            var i, n, o = this._data.point.x + .5,
                r = this._data.point.y + .5,
                s = this._textCache.textWidth,
                a = this._data.fontSize,
                l = this._data.halign,
                c = this._data.valign;
            switch (c) {
                case "middle":
                    r -= a / 2;
                    break;
                case "bottom":
                    r -= a
            }
            switch (l) {
                case "right":
                    o -= s;
                    break;
                case "center":
                    o -= s / 2
            }
            return i = new e.Point(o, r), n = new e.Point(o + s, r + a), e.pointInRect(t, i, n) ? new f(f.REGULAR) : null
        }, TradingView.CircleShapeMarkRenderer = function(t, e) {
            this._data = t, this._textCache = e
        }, TradingView.CircleShapeMarkRenderer.prototype.draw = function(t) {
            var e, i, n;
            this._data && (e = "down" === this._data.direction ? 1 : "up" === this._data.direction ? -1 : 0, i = this._data.point.x, n = this._data.point.y, t.save(), t.fillStyle = this._data.color, t.beginPath(), t.arc(i + 1, n + 2 * this._data.size * e + .5, this._data.size, 0, 2 * Math.PI), t.closePath(), t.fill(), t.stroke())
        }, TradingView.CircleShapeMarkRenderer.prototype.hitTest = function(t) {
            var e = "down" === this._data.direction ? 1 : "up" === this._data.direction ? -1 : 0;
            return Math.pow(this._data.point.x + .5 - t.x, 2) + Math.pow(this._data.point.y + .5 + 2 * this._data.size * e - t.y, 2) <= Math.pow(this._data.size, 2) ? new f(f.REGULAR) : null
        }, TradingView.SquareShapeMarkRenderer = function(t, e) {
            this._data = t, this._textCache = e
        }, TradingView.SquareShapeMarkRenderer.prototype.draw = function(t) {
            var i, n, o, r, s;
            this._data && (i = "down" === this._data.direction ? 1 : "up" === this._data.direction ? -1 : 0, n = parseInt(this._data.size), o = new e.Point(this._data.point.x - n / 2, this._data.point.y - n / 2 + i * n), r = new e.Point(this._data.point.x + n / 2, this._data.point.y + n / 2 + i * n), s = r.substract(o), t.beginPath(), t.fillStyle = this._data.color, t.rect(o.x, o.y, s.x, s.y), t.stroke(), t.fill())
        }, TradingView.SquareShapeMarkRenderer.prototype.hitTest = function(t) {
            var i = "down" === this._data.direction ? 1 : "up" === this._data.direction ? -1 : 0,
                n = parseInt(this._data.size),
                o = new e.Point(this._data.point.x - n / 2, this._data.point.y - n / 2 + i * n),
                r = new e.Point(this._data.point.x + n / 2, this._data.point.y + n / 2 + i * n),
                s = new e.Point(Math.min(o.x, r.x), Math.min(o.y, r.y)),
                a = new e.Point(Math.max(o.x, r.x), Math.max(o.y, r.y));
            return e.pointInRect(t, s, a) ? new f(f.REGULAR) : null
        }, TradingView.ArrowShapeMarkRenderer = function(t, e, i) {
            this._data = t, this._textCache = e, this._arrowDirection = i
        }, TradingView.ArrowShapeMarkRenderer.prototype.draw = function(t) {
            var e, i, n, o, r, s, a, l, c, h, d;
            if (this._data) {
                switch (e = this._arrowDirection, i = 1 * this._data.size, n = this._data.color, o = this._data.point.x + 1, r = this._data.point.y, s = 1.1 * i, e) {
                    case "up":
                        r -= s;
                        break;
                    case "down":
                        r += s
                }
                switch (a = i / 6, l = i / 4, c = i / 3, h = i / 2, d = .6666666 * i, t.save(), t.fillStyle = n, t.beginPath(), e) {
                    case "up":
                        t.moveTo(o, r), t.lineTo(o - h, r + d), t.lineTo(o - l, r + d), t.lineTo(o, r + c), t.lineTo(o + l, r + d), t.lineTo(o + h, r + d), t.lineTo(o, r);
                        break;
                    case "down":
                        t.moveTo(o, r + i), t.lineTo(o - h, r + c), t.lineTo(o - l, r + c), t.lineTo(o, r + d), t.lineTo(o + l, r + c), t.lineTo(o + h, r + c), t.lineTo(o, r + i);
                        break;
                    case "right":
                        t.moveTo(o + a, r), t.lineTo(o - a, r - l), t.lineTo(o - a, r + l), t.lineTo(o + a, r);
                        break;
                    case "left":
                        t.moveTo(o - a, r), t.lineTo(o + a, r - l), t.lineTo(o + a, r + l), t.lineTo(o - a, r)
                }
                t.closePath(), t.fill(), t.stroke()
            }
        }, TradingView.ArrowShapeMarkRenderer.prototype.hitTest = function(t) {
            var i, n, o, r, s, a, l, c = this._data.point.x,
                h = this._data.point.y,
                d = this._arrowDirection,
                u = 1 * this._data.size,
                p = u / 2,
                _ = 1.1 * u;
            switch (d) {
                case "up":
                    h -= _;
                    break;
                case "down":
                    h += _
            }
            switch (i = u / 6, n = u / 4, o = u / 3, p = u / 2, r = .6666666 * u, d) {
                case "up":
                    s = new e.Point(c, h), a = new e.Point(c + p, h + r), l = new e.Point(c - p, h + r);
                    break;
                case "down":
                    s = new e.Point(c, h + u), a = new e.Point(c + p, h + o), l = new e.Point(c - p, h + o);
                    break;
                case "right":
                    s = new e.Point(c + i, h), a = new e.Point(c - i, h - n), l = new e.Point(c - i, h + n);
                    break;
                case "left":
                    s = new e.Point(c - i, h), a = new e.Point(c + i, h - n), l = new e.Point(c + i, h + n)
            }
            return e.pointInTriangle(s, a, l, t) ? new f(f.REGULAR) : null
        }, u.StudyPaneView_textmarks = function(t, e) {
            this._study = t, this._model = e, this._data = [], this._textCache = []
        }, inherit(u.StudyPaneView_textmarks, p), u.StudyPaneView_textmarks.prototype.update = function() {
            this._invalidated = !0
        }, u.StudyPaneView_textmarks.prototype.renderer = function() {
            var t, e;
            for (this._invalidated && (this._updateViewInternal(), this._invalidated = !1), t = new _, e = 0; e < this._data.length; e++) switch (this._data[e].shape) {
                case "triangle":
                    t.append(new TradingView.TriangleTextMarkRenderer(this._data[e], this._textCache[e]));
                    break;
                case "rectangle":
                    t.append(new TradingView.RectangleTextMarkRenderer(this._data[e], this._textCache[e]))
            }
            return t
        }, u.StudyPaneView_textmarks.prototype._updateViewInternal = function() {
            var t, i, n, o, r, s, a, l, c, h, d, u, p, f, _, g, m, v, y, w, b, S;
            if (this._data = [], t = this._study.graphics().textmarks, t && (i = this._study.priceScale(), n = this._model.timeScale(), i && !i.isEmpty() && n && !n.isEmpty()))
                for (o = this._study.graphics().indexes, r = this._model.timeScale().visibleBars(), s = r.firstBar(), a = r.lastBar(), l = 0; l < t.length; l++)
                    if (c = t[l], c.data && (h = this._study.properties().graphics.textmarks[c.styleId], h.visible.value()))
                        for (d = c.data, u = 0; u < d.length; u++)
                            if (p = d[u], f = {}, _ = h.location.value(), g = h.shape.value(), m = o[p.time], !(s > m || m > a) && (v = this._study.series().bars().valueAt(m))) {
                                switch (m = o[p.time] + (p.offset || 0), f.font = h.fontFamily.value(), f.color = TradingView.generateColor(h.color.value(), h.transparency.value()), f.bold = h.fontBold.value(), f.fontColor = TradingView.generateColor(h.fontColor.value(), h.transparency.value()), f.italic = h.fontItalic.value(), f.fontSize = h.fontSize.value(), f.text = p.text ? p.text : "", f.halign = h.halign.value(), f.valign = void 0 !== h.valign ? h.valign.value() : "middle", f.shape = h.shape.value(), f.size = .5 * n.barSpacing(), f.borderColor = "rgb(0, 0, 0)", y = 50, g) {
                                    case "triangle":
                                        S = this._calcCoordsForTriangleShape(_, m, y, p.price, i), f.direction = S.direction, w = Math.round(n.indexToCoordinate(m)), b = S.y;
                                        break;
                                    case "rectangle":
                                        S = this._calcCoordsForRectangleShape(_, m, p.price, i, n), w = S.x, b = S.y
                                }
                                f.point = new e.Point(w, b), this._data.push(f), this._textCache.push({})
                            }
        }, u.StudyPaneView_textmarks.prototype._calcCoordsForTriangleShape = function(t, e, i, n, o) {
            var r, s, a;
            switch (t) {
                case CanvasEx.MARKLOC_TOP:
                    r = o.height() - i, s = "down";
                    break;
                case CanvasEx.MARKLOC_BOTTOM:
                    r = i, s = "up";
                    break;
                case CanvasEx.MARKLOC_ABSOLUTEDOWN:
                    o.isPercent() && (a = this._study.firstValue(), n = o.priceRange().convertToPercent(n, a)), r = o.priceToCoordinate(n), s = "down";
                    break;
                case CanvasEx.MARKLOC_ABSOLUTEUP:
                    o.isPercent() && (a = this._study.firstValue(), n = o.priceRange().convertToPercent(n, a)), r = o.priceToCoordinate(n), s = "up";
                    break;
                case CanvasEx.MARKLOC_ABOVEBAR:
                    r = this._locationToY(t, e), s = "down";
                    break;
                case CanvasEx.MARKLOC_BELOWBAR:
                    r = this._locationToY(t, e), s = "up";
                    break;
                default:
                    r = this._locationToY(t, e), s = "up"
            }
            return {
                y: r,
                direction: s
            }
        }, u.StudyPaneView_textmarks.prototype._calcCoordsForRectangleShape = function(t, e, i, n, o) {
            var r, s, a = Math.round(o.indexToCoordinate(e));
            switch (t) {
                case CanvasEx.MARKLOC_ABSOLUTEDOWN:
                case CanvasEx.MARKLOC_ABSOLUTEUP:
                case CanvasEx.MARKLOC_ABSOLUTE:
                    n.isPercent() && (s = this._study.firstValue(), i = n.priceRange().convertToPercent(i, s)), r = n.priceToCoordinate(i);
                    break;
                case CanvasEx.MARKLOC_ABOVEBAR:
                    r = this._locationToY(t, e);
                    break;
                case CanvasEx.MARKLOC_BELOWBAR:
                    r = this._locationToY(t, e);
                    break;
                case CanvasEx.MARKLOC_RIGHT:
                    a = o.width(), n.isPercent() && (s = this._study.firstValue(), i = n.priceRange().convertToPercent(i, s)), r = n.priceToCoordinate(i);
                    break;
                case CanvasEx.MARKLOC_LEFT:
                    a = o.width(), n.isPercent() && (s = this._study.firstValue(), i = n.priceRange().convertToPercent(i, s)), r = n.priceToCoordinate(i);
                    break;
                default:
                    r = this._locationToY(t, e)
            }
            return {
                x: a,
                y: r
            }
        }, u.StudyPaneView_shapemarks = function(t, e) {
            this._study = t, this._model = e, this._data = [], this._textCache = []
        }, inherit(u.StudyPaneView_shapemarks, p), u.StudyPaneView_shapemarks.prototype.update = function() {
            this._invalidated = !0
        }, u.StudyPaneView_shapemarks.prototype.renderer = function() {
            var t, e;
            for (this._invalidated && (this._updateViewInternal(), this._invalidated = !1), t = new _, e = 0; e < this._data.length; e++) switch (this._data[e].shape) {
                case "circle":
                    t.append(new TradingView.CircleShapeMarkRenderer(this._data[e], this._textCache[e]));
                    break;
                case "square":
                    t.append(new TradingView.SquareShapeMarkRenderer(this._data[e], this._textCache[e]));
                    break;
                case "arrowUp":
                    t.append(new TradingView.ArrowShapeMarkRenderer(this._data[e], this._textCache[e], "up"));
                    break;
                case "arrowDown":
                    t.append(new TradingView.ArrowShapeMarkRenderer(this._data[e], this._textCache[e], "down"));
                    break;
                case "arrowRight":
                    t.append(new TradingView.ArrowShapeMarkRenderer(this._data[e], this._textCache[e], "right"));
                    break;
                case "arrowLeft":
                    t.append(new TradingView.ArrowShapeMarkRenderer(this._data[e], this._textCache[e], "left"))
            }
            return t
        }, u.StudyPaneView_shapemarks.prototype._updateViewInternal = function() {
            var t, i, n, o, r, s, a, l, c, h, d, u, p, f, _, g, m, v, y, w, b, S;
            if (this._data = [], t = this._study.graphics().shapemarks, t && (i = this._study.priceScale(), n = this._model.timeScale(), i && !i.isEmpty() && n && !n.isEmpty()))
                for (o = this._study.graphics().indexes, r = this._model.timeScale().visibleBars(), s = r.firstBar(), a = r.lastBar(), l = 0; l < t.length; l++)
                    if (c = t[l], c.data && (h = this._study.properties().graphics.shapemarks[c.styleId], h.visible.value()))
                        for (d = c.data, u = 0; u < d.length; u++)
                            if (p = d[u], f = o[p.time], !(s > f || f > a) && (_ = {}, null != p.time && (g = this._study.series().bars().valueAt(f)))) {
                                switch (_.color = TradingView.generateColor(h.color.value(), h.transparency.value()), m = 0, "left" === h.halign.value() ? m -= n.barSpacing() / 2 + 1 : "right" === h.halign.value() && (m += n.barSpacing() / 2 + 1), _.size = h.size.value(), _.shape = h.shape.value(), v = Math.round(n.indexToCoordinate(f)) + m, y = p.price, i.isPercent() && (w = this._study.firstValue(), y = i.priceRange().convertToPercent(y, w)), b = i.priceToCoordinate(y), S = h.location.value()) {
                                    case CanvasEx.MARKLOC_ABSOLUTE:
                                        _.direction = "";
                                        break;
                                    case CanvasEx.MARKLOC_ABSOLUTEDOWN:
                                        _.direction = "down";
                                        break;
                                    case CanvasEx.MARKLOC_ABSOLUTEUP:
                                        _.direction = "up";
                                        break;
                                    case CanvasEx.MARKLOC_ABOVEBAR:
                                        b = this._locationToY(S, f, Math.floor(2 * _.size / n.barSpacing()) + 1), _.direction = "up";
                                        break;
                                    case CanvasEx.MARKLOC_BELOWBAR:
                                        b = this._locationToY(S, f, Math.floor(2 * _.size / n.barSpacing()) + 1), _.direction = "down";
                                        break;
                                    default:
                                        TradingView.logWarn("Bad location value: " + S), b = this._locationToY(CanvasEx.MARKLOC_ABSOLUTEUP, f), _.direction = "up"
                                }
                                _.point = new e.Point(v, b), this._data.push(_), this._textCache.push({})
                            }
        }, n.prototype.draw = function(t) {}, n.prototype.drawBackground = function(t) {
            var e = this._data;
            m(t, e.x1, e.y1, e.x2 - e.x1, e.y2 - e.y1, TradingView.generateColor(this._data.color, this._data.transparency))
        }, n.prototype.hitTest = function(t) {
            return null
        }, u.StudyPaneView_backgrounds = function(t, e) {
            this._study = t, this._model = e, this._data = []
        }, u.StudyPaneView_backgrounds.prototype.update = function() {
            this._invalidated = !0
        }, u.StudyPaneView_backgrounds.prototype.renderer = function() {
            var t, e;
            for (this._invalidated && (this._updateViewInternal(), this._invalidated = !1), t = new _, e = 0; e < this._data.length; e++) t.append(new n(this._data[e]));
            return t
        }, u.StudyPaneView_backgrounds.prototype._hideExtendedHours = function(t) {
            return "inSession" === t || "outOfSession" === t ? !this._study._series.properties().extendedHours.value() : !1
        }, u.StudyPaneView_backgrounds.prototype._updateViewInternal = function() {
            var t, e, i, n, o, r, s, a, l, c, h, d, u, p, f, _, g, m, v, y, w;
            if (this._data = [], t = this._study.graphics().backgrounds, t && (e = this._model.timeScale(), i = this._study.priceScale(), i && !i.isEmpty() && e && !e.isEmpty()))
                for (n = this._study.graphics().indexes, o = this._model.timeScale().visibleBars(), r = o.firstBar(), s = o.lastBar(), a = 0; a < t.length; a++)
                    if (l = t[a], c = l.styleId, h = l.data, d = this._study.properties().graphics.backgrounds[c], !this._hideExtendedHours(c) && d.visible.value())
                        for (f = 0; f < h.length; f++) _ = h[f], g = {}, m = n[_.start], v = n[_.stop], r > v || m > s || null != _.start && null != _.stop && (y = Math.ceil(e.indexToCoordinate(m, !0) - .5 * e.barSpacing()), w = Math.ceil(e.indexToCoordinate(v, !0) + .5 * e.barSpacing()), p === m - 1 && (y = u), u = w, p = v, 0 > y && 0 > w || y > e.width() && w > e.width() || (g.x1 = y, g.x2 = w, g.y1 = 0, g.y2 = i.height(), g.color = d.color.value(), g.transparency = d.transparency.value(), this._data.push(g)))
        }, u.StudyPaneView_polygons = function(t, e) {
            this._study = t, this._model = e, this._data = []
        }, u.StudyPaneView_polygons.prototype.update = function() {
            this._invalidated = !0
        }, u.StudyPaneView_polygons.prototype.renderer = function() {
            var t, e;
            for (this._invalidated && (this._updateViewInternal(), this._invalidated = !1), t = new _, e = 0; e < this._data.length; e++) t.append(new d(this._data[e], new f(f.REGULAR)));
            return t
        }, u.StudyPaneView_polygons.prototype._updateViewInternal = function() {
            var t, i, n, o, r, s, a, l, c, h, d, u, p, f, _, g, m, v, y, w, b, S, T;
            if (this._data = [], t = this._study.graphics().polygons, t && (i = this._study.priceScale(), n = this._study._model.timeScale(), i && !i.isEmpty() && n && !n.isEmpty()))
                for (o = this._study.graphics().indexes, r = this._model.timeScale().visibleBars(), s = r.firstBar(), a = r.lastBar(), l = 0; l < t.length; l++)
                    if (c = t[l], c.data && (h = this._study.properties().graphics.polygons[c.styleId], 100 !== h.transparency.value()))
                        for (d = 0; d < c.data.length; d++) {
                            for (u = c.data[d], p = 1 / 0, f = -(1 / 0), _ = 0; u.points && _ < u.points.length; _++) g = o[u.points[_].index] + (u.points[_].offset || 0), p = Math.min(p, g), f = Math.max(f, g);
                            if (!(s > f || p > a)) {
                                for (m = {}, m.points = [],
                                         _ = 0; u.points && _ < u.points.length; _++) v = u.points[_], y = n.indexToCoordinate(o[v.index] + (v.offset || 0)), w = v.level, i.isPercent() && (b = this._study.firstValue(), w = i.priceRange().convertToPercent(w, b)), S = i.priceToCoordinate(w), T = new e.Point(y, S), T.data = _, m.points.push(T);
                                m.color = h.color.value(), m.backcolor = h.color.value(), m.linewidth = void 0 !== h.showBorder && h.showBorder.value() ? 1 : 0, m.linestyle = CanvasEx.LINESTYLE_SOLID, m.filled = !0, m.fillBackground = !0, m.transparency = h.transparency.value(), m.mouseTouchable = h.mouseTouchable.value(), this._data.push(m)
                            }
                        }
        }, u.StudyPaneView_trendchannels = function(t, e) {
            this._study = t, this._model = e, this._data = []
        }, u.StudyPaneView_trendchannels.prototype.update = function() {
            this._invalidated = !0
        }, u.StudyPaneView_trendchannels.prototype.renderer = function() {
            var t, e;
            for (this._invalidated && (this._updateViewInternal(), this._invalidated = !1), t = new _, e = 0; e < this._data.length; e++) t.append(new d(this._data[e], new f(f.REGULAR)));
            return t
        }, u.StudyPaneView_trendchannels.prototype._convertToYCoord = function(t) {
            var e = this._study.priceScale(),
                i = this._study.firstValue();
            return e.isPercent() && (t = e.priceRange().convertToPercent(t, i)), e.priceToCoordinate(t)
        }, u.StudyPaneView_trendchannels.prototype._updateViewInternal = function() {
            var t, i, n, o, r, s, a, l, c, h, d, u, p, f, _, g, m, v, y, w, b, S, T, x, C, P, k, I, E, L;
            if (this._data = [], t = this._study.graphics().trendchannels, t && (i = this._study.priceScale(), n = this._study._model.timeScale(), i && !i.isEmpty() && n && !n.isEmpty()))
                for (o = function(t, i, n, o, r, s) {
                    var a, l, c = new e.Point(0, 0),
                        h = new e.Point(n, o);
                    return r && (a = t.substract(i), l = e.intersectRayWithRect(t, t.add(a), c, h), l ? t = l : i.x = n), s && (a = i.substract(t), l = e.intersectRayWithRect(i, i.add(a), c, h), l ? i = l : i.x = n), [t, i]
                }, r = this._study.graphics().indexes, s = this._model.timeScale().visibleBars(), a = s.firstBar(), l = s.lastBar(), c = 0; c < t.length; c++)
                    if (h = t[c], h.data)
                        for (d = this._study.properties().graphics.trendchannels[h.styleId], u = 0; u < h.data.length; u++) p = h.data[u], f = r[p.startIndex], _ = r[p.endIndex], Math.max(f, _) < a && !p.extendRight || Math.min(f, _) > l && !p.extendLeft || (g = this._convertToYCoord(p.startHighPrice), m = this._convertToYCoord(p.startLowPrice), v = this._convertToYCoord(p.endHighPrice), y = g - m, w = v - y, b = n.indexToCoordinate(f), S = n.indexToCoordinate(_), T = new e.Point(b, g), x = new e.Point(b, m), C = new e.Point(S, v), P = new e.Point(S, w), k = o(T, C, n.width(), i.height(), p.extendLeft, p.extendRight), I = o(x, P, n.width(), i.height(), p.extendLeft, p.extendRight), T = k[0], C = k[1], x = I[0], P = I[1], E = {}, E.points = [T, x, P, C], E.color = d.color.value(), E.backcolor = d.color.value(), E.linewidth = void 0 !== d.borderWidth ? d.borderWidth.value() : 0, E.linestyle = CanvasEx.LINESTYLE_SOLID, E.filled = !0, E.fillBackground = !0, p.transparency ? (L = p.transparency + d.transparency.value(), E.transparency = Math.min(L, 100)) : E.transparency = d.transparency.value(), E.mouseTouchable = !0, this._data.push(E))
        }, u.StudyPaneView_hhists = function(t, e) {
            this._study = t, this._model = e, this._data = [], this._textData = [], this._textRendererCache = {}
        }, u.StudyPaneView_hhists.prototype.update = function() {
            this._invalidated = !0
        }, u.StudyPaneView_hhists.prototype.renderer = function() {
            var t, e;
            this._invalidated && (this._updateViewInternal(), this._invalidated = !1), t = new _;
            for (e in this._data) t.append(new o(this._data[e]));
            for (e = 0; e < this._textData.length; e++) t.append(new s(this._textData[e], this._textRendererCache, new f(f.REGULAR)));
            return t
        }, u.StudyPaneView_hhists.prototype._updateViewInternal = function() {
            var t, e, i, n, o, r, s, a, l, c, h, d, u, p, f, _;
            if (this._data = [], this._textData = [], t = this._study.priceScale(), e = this._model.timeScale(), t && !t.isEmpty() && e && !e.isEmpty() && (i = this._study.graphics().hhists))
                for (n = this._study.graphics().indexes, o = this._model.timeScale().visibleBars(), r = o.firstBar(), s = o.lastBar(), a = 0; a < i.length; a++)
                    if (l = i[a], c = this._study.properties().graphics.hhists[l.styleId], c.visible.value()) {
                        h = l.dataObj;
                        for (d in h) {
                            for (u = h[d], p = 1 / 0, f = -(1 / 0), _ = u.length; _--;) p = Math.min(p, n[u[_].firstBarTime]), f = Math.max(f, n[u[_].lastBarTime]);
                            r > f || p > s || this._updateDataForRenderers(u, c, t, e, n)
                        }
                    }
        }, u.StudyPaneView_hhists.prototype._updateDataForRenderers = function(t, n, o, r, s) {
            var a, l, c, h, d, u, p, f, _, g, m, v, y, w, b, S, T, x, C, P, k, I, E, L = [],
                V = this._findMaxRate(t),
                M = null,
                A = null,
                D = null,
                O = {},
                R = i(168).shiftColor,
                $ = function(t, e, i) {
                    if (i === CanvasEx.HHISTDIR_LEFTTORIGHT) return t + e;
                    if (i === CanvasEx.HHISTDIR_RIGHTTOLEFT) return e + t;
                    throw Error("Unknown direction value: " + i)
                };
            for (u = 0; u < t.length; u++)
                for (p = t[u], null == A && (A = this._findActualRateLength(p.rate)), null == M && (f = Math.abs(r.indexToCoordinate(s[p.firstBarTime]) - r.indexToCoordinate(s[p.lastBarTime])), M = n.percentWidth.value() * f / 100, M -= A, M = Math.max(M, 0)), _ = !1, v = 0; A > v; v++)
                    if (0 !== p.rate[v]) {
                        if (void 0 === O[v] ? O[v] = p.rate[v] : O[v] += p.rate[v], o.isPercent() ? (y = this._study.firstValue(), a = o.priceRange().convertToPercent(p.priceHigh, y), l = o.priceRange().convertToPercent(p.priceLow, y)) : (a = p.priceHigh, l = p.priceLow), w = {}, w.y1 = o.priceToCoordinate(a) + 1, w.y2 = o.priceToCoordinate(l) - 1, 0 === u && (g = w.y2, m = w.y2 - w.y1), b = n.location.value(), S = n.direction.value(), b === CanvasEx.HHISTLOC_ABSOLUTE && S === CanvasEx.HHISTDIR_LEFTTORIGHT) h = r.indexToCoordinate(s[p.firstBarTime]), c = 1, d = "left";
                        else if (b === CanvasEx.HHISTLOC_ABSOLUTE && S === CanvasEx.HHISTDIR_RIGHTTOLEFT) h = r.indexToCoordinate(s[p.lastBarTime]), c = -1, d = "right";
                        else if (b === CanvasEx.HHISTLOC_RELATIVE && S === CanvasEx.HHISTDIR_LEFTTORIGHT) h = 0, c = 1, d = "left";
                        else {
                            if (b !== CanvasEx.HHISTLOC_RELATIVE || S !== CanvasEx.HHISTDIR_RIGHTTOLEFT) throw Error("Unknown location/direction values: " + b + "/" + S);
                            h = r.width(), c = -1, d = "right"
                        }
                        if (0 === v ? w.x1 = h : w.x1 = h + c * (M * p.rate[v - 1] / V + A), w.x2 = w.x1 + c * (M * p.rate[v] / V), w.colorBg = n.colors[v].value(), w.transparency = n.transparencies[v].value(), w.blendedColor = TradingView.generateColor(w.colorBg, w.transparency), w.x0 = h, L.push(w), D || (D = .6 * (w.y2 - w.y1)), !_ && n.showValues.value() && D >= 7.5) {
                            for (_ = !0, T = {}, x = this._study.formatter(), T.text = "", C = 0; A > C; C++) T.text = $(T.text, x.format(p.rate[C]), S), C !== A - 1 && (T.text = $(T.text, "x", S));
                            if (T.color = n.valuesColor.value(), T.font = "arial", T.fontsize = D, T.horzAlign = d, T.vertAlign = "middle", P = new e.Point(h + 3 * c, w.y2 - .61 * (w.y2 - w.y1)), T.points = [P], T.offsetX = 0, T.offsetY = 0, this._textData.push(T), u === t.length - 1) {
                                for (k = h + 3 * c, I = g + .39 * m, E = {
                                    text: "",
                                    color: R(n.valuesColor.value(), 1.5),
                                    font: "arial",
                                    fontsize: D,
                                    horzAlign: d,
                                    vertAlign: "middle",
                                    points: [new e.Point(k, I)],
                                    offsetX: 0,
                                    offsetY: 0
                                }, C = 0; A > C; C++) E.text = $(E.text, x.format(O[C]), S), C !== A - 1 && (E.text = $(E.text, "x", S));
                                this._textData.push(E)
                            }
                        }
                    }
            L.length > 0 && this._data.push(L)
        }, u.StudyPaneView_hhists.prototype._findMaxRate = function(t) {
            var e, i, n = 0,
                o = 0;
            for (e = 0; e < t.length; e++) {
                for (o = 0, i = 0; i < t[e].rate.length; i++) o += t[e].rate[i];
                n = Math.max(n, o)
            }
            return n
        }, u.StudyPaneView_hhists.prototype._findActualRateLength = function(t) {
            var e, i, n = 0;
            for (e = 0; e < t.length && (i = t[e], null !== i && void 0 !== i); ++e) n++;
            return n
        }, o.prototype.hitTest = function(t) {
            var e, i, n = r(this._data, t.y);
            return 0 > n ? null : (e = Math.min(this._data[n].x0, this._data[n].x2), i = Math.max(this._data[n].x0, this._data[n].x2), e <= t.x && t.x <= i ? new f(f.REGULAR) : null)
        }, o.prototype.draw = function(t) {
            var e, i, n, o, r, s, a;
            for (t.save(), e = {}, i = [], o = 0; o < this._data.length; o++) r = this._data[o], e[r.blendedColor] ? e[r.blendedColor].push(r) : (i.push(r.blendedColor), e[r.blendedColor] = [r]);
            for (s = 0; s < i.length; s++) {
                for (a = i[s], t.fillStyle = a, t.strokeStyle = a, t.beginPath(), n = e[a], o = 0; o < n.length; o++) r = n[o], t.rect(r.x1, r.y1, r.x2 - r.x1, r.y2 - r.y1);
                t.stroke(), t.fill()
            }
            t.restore()
        }, t.exports = u
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e, i) {
            this._data = t, this._hittest = e || new s(s.MOVEPOINT), this._backHittest = i || new s(s.MOVEPOINT_BACKGROUND), this._points = t.points
        }
        var o = i(77).LineDataSource,
            r = i(153).TrendLineRenderer,
            s = i(67);
        n.prototype.draw = function(t) {
            var e, i, n;
            if (0 !== this._points.length) {
                for (t.beginPath(), t.lineCap = "butt", t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, t.lineStyle = this._data.linestyle, e = this._points[0], t.moveTo(e.x, e.y), i = 0; i < this._points.length; i++) n = this._points[i], t.lineTo(n.x, n.y);
                this._data.filled && this._data.fillBackground && (t.fillStyle = TradingView.generateColor(this._data.backcolor, this._data.transparency), t.fill()), this._data.filled && !this._data.skipClosePath && t.closePath(), this._data.linewidth > 0 && t.stroke(), this._points.length > 1 && (this._data.leftend === o.LINEEND_ARROW && r.prototype.drawArrow(this._points[1], this._points[0], t, t.lineWidth), this._data.rightend === o.LINEEND_ARROW && r.prototype.drawArrow(this._points[this._points.length - 2], this._points[this._points.length - 1], t, t.lineWidth))
            }
        }, n.prototype.hitTest = function(t) {
            var i, n, o, r, s;
            if (void 0 !== this._data.mouseTouchable && !this._data.mouseTouchable) return null;
            for (i = TradingView.isMobile.any() ? 24 : 3, n = 1; n < this._points.length; n++)
                if (o = this._points[n - 1], r = this._points[n], s = e.distanceToSegment(o, r, t), s.distance <= i) return this._hittest;
            return this._data.filled && this._data.fillBackground && this._points.length > 0 && (o = this._points[0], r = this._points[this._points.length - 1], s = e.distanceToSegment(o, r, t), s.distance <= i) ? this._hittest : this._data.filled && this._data.fillBackground && e.isInPolygon(this._data.points, t) ? this._backHittest : null
        }, t.exports = n
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function i() {}
        i.prototype._locationToY = function(t, i, n) {
            var o, r, s, a, l, c, h;
            switch (n || (n = 0), o = [], r = this._study.priceScale(), t) {
                case CanvasEx.MARKLOC_ABOVEBAR:
                    s = TradingView.HIGH_PLOT;
                    break;
                case CanvasEx.MARKLOC_BELOWBAR:
                    s = TradingView.LOW_PLOT
            }
            for (a = this._study.firstValue(), n >= 1 && (n -= 1), l = -n; n >= l; l++) c = this._study.series().bars().valueAt(i + l), c && (h = c[s], r.isPercent() && (h = r.priceRange().convertToPercent(h, a)), o.push(r.priceToCoordinate(h)));
            switch (t) {
                case CanvasEx.MARKLOC_ABOVEBAR:
                    return e.min(o) - 15;
                case CanvasEx.MARKLOC_BELOWBAR:
                    return e.max(o) + 15
            }
        }, t.exports = i
    }).call(e, i(40))
}, function(t, e, i) {
    "use strict";

    function n(t, e, i, r) {
        var a = new o(this, t);
        e.push(a), s.call(this, t, e, i), this.properties().listeners().subscribe(this, n.prototype.changeStyles), this._constructor = r, this._studyId = null, this._nonseriesdata = null, this._indexes = null, this._metaInfo = null, this._graphics = null, this._inputs = null
    }

    function o(t, e) {
        a.call(this, t, e)
    }

    function r(t, e) {
        a.call(this, t, e)
    }
    var s = i(77).LineDataSource,
        a = i(115),
        l = i(224).VertLineRenderer,
        c = i(153).TrendLineRenderer,
        h = i(66).SelectionRenderer,
        d = i(71),
        u = i(174),
        p = i(124),
        f = i(125);
    inherit(n, s), n.prototype.pointsCount = function() {
        throw Error("Reimplement this in a child class")
    }, n.prototype.title = function() {
        return this._metaInfo.description
    }, n.prototype.studyId = function() {
        return this._metaInfo.id
    }, n.prototype._requestStudy = function() {
        throw Error("Reimplement this in a child class")
    }, n.prototype.changeStyles = function() {
        var t, e, n, o = i(218);
        if (this._inputs) {
            t = o.splitInputs(this.properties().inputs.state()), e = t.obj;
            for (n in e)
                if (e[n] !== this._inputs[n]) {
                    this._inputs = e, this._requestStudy(), this._properties.lastUpdateTime.setValue((new Date).valueOf());
                    break
                }
        } else t = o.splitInputs(this.properties().inputs.state()), this._inputs = TradingView.clone(t.obj), this._requestStudy(), this._properties.lastUpdateTime.setValue((new Date).valueOf())
    }, n.prototype._checkTurnaround = function(t) {
        return t === this._turnaround || t === this._model.mainSeries()._turnaround || t === this._model.mainSeries()._turnaround + "_" + this._turnaround
    }, n.prototype.stop = function() {
        s.prototype.stop.call(this), this._studyId && this._model.chartApi().removeStudy(this._studyId)
    }, n.prototype.onData = function(t) {
        throw Error("Reimplement this in a child class")
    }, n.prototype._correctedPoint = function(t) {
        var e = parseInt(this._model.mainSeries().bars().first(), 10),
            i = parseInt(this._model.mainSeries().bars().last(), 10);
        return t.index = Math.max(t.index, e), t.index = Math.min(t.index, i), t
    }, n.prototype.addPoint = function(t) {
        var e = s.prototype.addPoint.call(this, this._correctedPoint(t));
        return e
    }, n.prototype.setLastPoint = function(t) {
        return s.prototype.setLastPoint.call(this, this._correctedPoint(t))
    }, n.prototype.move = function(t) {}, n.prototype.clearData = function() {
        void 0 !== this.m_data && (this.m_data = new p(this._plotFields)), this._nonseriesdata = null, this._indexes = null, this._graphics = new u(this._metaInfo), this.updateAllViews()
    }, n.prototype.state = function(t) {
        var e = s.prototype.state.call(this, t);
        return t && (void 0 !== this.m_data && (e.data = this.m_data.state()), e.nonseriesdata = this._nonseriesdata, e.nonseriesindexes = this._indexes, e.graphics = this._graphics.graphics()), this.metaInfo() instanceof f ? e.metaInfo = this.metaInfo().state() : (e.metaInfo = $.extend({}, this.metaInfo()), e.metaInfo.id = f.parseIdString(e.metaInfo.id + (e.metaInfo.version ? "-" + e.metaInfo.version : "")).fullId), e
    }, n.prototype.restoreData = function(t) {
        void 0 !== this.m_data && void 0 !== t.data && this.m_data.restoreState(t.data), this._nonseriesdata = t.nonseriesdata ? t.nonseriesdata : null, this._indexes = t.nonseriesindexes ? t.nonseriesindexes : null, this._graphics.setGraphics(t.graphics ? t.graphics : u.emptyGraphics())
    }, n.prototype.setPoint = function(t, e) {
        this._nonseriesdata = null, this._indexes = null, s.prototype.setPoint.call(this, t, this._correctedPoint(e))
    }, n.prototype.disconnect = function() {
        this._studyId = 0
    }, n.prototype.graphics = function() {
        return this._graphics.graphics()
    }, n.prototype.firstValue = function() {
        return this._model.mainSeries().data().firstValue()
    }, n.prototype.formatter = function() {
        return this._model.mainSeries().data().formatter()
    }, n.prototype.metaInfo = function() {
        return this._metaInfo
    }, inherit(o, a), o.prototype.renderer = function() {
        var t, e, i, n, o, r = new d;
        return this._points.length < 2 ? r : this._source._nonseriesdata ? r : this._source._graphics && !this._source._graphics.isEmpty() ? r : (t = this._points[0], e = this._points[1], i = {}, i.points = [t], i.color = "#808080", i.linewidth = this._source._doNotNeedLine ? 0 : 1, i.linestyle = CanvasEx.LINESTYLE_SOLID, r.append(new l(i)), n = {}, n.points = [e], n.color = "#808080", n.linewidth = this._source._doNotNeedLine ? 0 : 1, n.linestyle = CanvasEx.LINESTYLE_SOLID, r.append(new l(n)), o = {
            points: [t, e],
            width: this._model.timeScale().width(),
            height: this._source.priceScale().height(),
            color: "#808080",
            linewidth: this._source._doNotNeedLine ? 0 : 1,
            linestyle: CanvasEx.LINESTYLE_SOLID,
            extendleft: !1,
            extendright: !1,
            leftend: s.LINEEND_NORMAL,
            rightend: s.LINEEND_NORMAL
        }, r.append(new c(o)), r)
    }, inherit(r, a), r.prototype.renderer = function() {
        var t = new d;
        return this.isAnchorsRequired() && (t.append(new h({
            points: this._points
        })), t.append(this.createLineAnchor({
            points: this._points
        }))), t
    }, e.StudyLineDataSource = n, e.StudyLineDataSourcePaneView = r
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(t, e) {
            this._data = t, this._hittest = e
        }

        function o(t, e) {
            a.call(this, t, e), this._invalidated = !0
        }

        function r(t, e) {
            c.call(this), this._source = t, this._model = e, this._invalidated = !0
        }

        function s(t, e) {
            this._constructor = "LineToolVertLine";
            var i = e || new f("linetoolvertline");
            this._timeAxisView = new r(this, t), l.call(this, t, new o(this, t), i)
        }
        var a = i(115),
            l = i(77).LineDataSource,
            c = i(78),
            h = i(79),
            d = i(67),
            u = i(68).PaneRendererClockIcon,
            p = i(71),
            f = i(81).DefaultProperty,
            _ = i(83).DateTimeFormatter;
        n.prototype.draw = function(t) {
            var e, i;
            0 !== this._data.points.length && (this._data.linewidth <= 0 || (e = this._data.points[0].x, t.translate(1, 0), i = t.canvas.height, t.lineCap = "square", t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, t.lineStyle = this._data.linestyle, CanvasEx.drawLine(t, e, 0, e, i)))
        }, n.prototype.hitTest = function(t) {
            var e, i;
            return 0 === this._data.points.length ? null : (e = 3, i = this._hittest || new d(d.MOVEPOINT), Math.abs(t.x - this._data.points[0].x) <= e ? i : null)
        }, inherit(o, a), o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.updateImpl = function() {
            a.prototype.update.call(this), this._invalidated = !1
        }, o.prototype.renderer = function() {
            var e, i, o;
            return this._invalidated && this.updateImpl(), e = {}, e.points = this._points, e.color = this._source.properties().linecolor.value(), e.linewidth = this._source.properties().linewidth.value(), e.linestyle = this._source.properties().linestyle.value(), i = new p, i.append(new n(e)), this.addAnchors(i), TradingView.printing || !this._source.hasAlert.value() || this._model.readOnly() || 1 !== e.points.length || (o = new t.Point(this._points[0].x, this._source.priceScale().height() / 2), this._source.getAlertIsActive(function(t) {
                i.append(new u({
                    point1: o,
                    color: t ? e.color : defaults("chartproperties.alertsProperties.drawingIcon.color")
                }))
            })), i
        }, inherit(r, c), r.prototype.update = function() {
            this._invalidated = !0
        }, r.prototype.updateImpl = function() {
            var t, e;
            this._model.timeScale().isEmpty() || 0 !== this._source.points().length && (this._text = "", this._background = this._source.properties().linecolor.value(), t = this._source.points()[0].index, this._coordinate = this._model.timeScale().indexToCoordinate(t), e = this._model.timeScale().indexToUserTime(t), e && (this._text = new _(this._model.mainSeries().isDWM()).format(e)), this._invalidated = !1)
        }, r.prototype.renderer = function() {
            this._invalidated && this.updateImpl();
            var t = {
                text: this._text,
                coordinate: this._coordinate,
                color: this.color(),
                background: this._background
            };
            return new h(t)
        }, inherit(s, l), s.prototype.pointsCount = function() {
            return 1
        }, s.prototype.title = function() {
            return "Vertical Line"
        }, s.prototype.timeAxisViews = function() {
            return this.symbol() !== this._model.mainSeries().symbol() ? null : this.properties().showTime.value() ? [this._timeAxisView] : null
        }, s.prototype.updateAllViews = function() {
            l.prototype.updateAllViews.call(this), this._timeAxisView.update()
        }, s.prototype.canHasAlert = function() {
            return !0
        }, s.prototype._getAlertPlots = function() {
            var t = this._points[0],
                e = {
                    index: t.index,
                    price: t.price + 1
                };
            return [this._linePointsToAlertPlot([t, e], null, !0, !0)]
        }, e.VertLineRenderer = n, e.LineToolVertLine = s
    }).call(e, i(40))
}, function(t, e, i) {
    "use strict";

    function n(t, e, i) {
        this.customization = {
            forcePriceAxisLabel: !0,
            disableSelection: !0,
            disableErasing: !0
        }, o.call(this, t, e, i)
    }
    var o = i(77).LineDataSource;
    inherit(n, o), n.POINTS_COUNT = 1, n.prototype.pointsCount = function() {
        return n.POINTS_COUNT
    }, n.prototype.hasContextMenu = function() {
        return !1
    }, n.prototype.state = function() {
        return null
    }, n.prototype.startMoving = function() {
        o.prototype.startMoving.apply(this, arguments), this._cursorMoved = !1
    }, n.prototype.endMoving = function() {
        o.prototype.endMoving.apply(this, arguments), this._cursorMoved = !1
    }, n.prototype.correctPoints = function(t) {
        var e, i, n, o, r;
        for (this._currentMovingPoint && this._startMovingPoint ? this._currentMovingPoint.price - this._startMovingPoint.price && (this._cursorMoved = !0) : this._cursorMoved = !1, e = this.priceScale(), i = e.mainSource().base(), n = 1 / i, o = 0; o < t.length; o++) r = t[o], this._cursorMoved && (r.price = this._currentMovingPoint.price), r.price = n * Math.round(r.price / n), t[o] = r
    }, n.prototype.userEditEnabled = function() {
        return !0
    }, n.prototype.isUserDeletable = function() {
        return !1
    }, n.prototype.showInObjectTree = function() {
        return !1
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t, e, i, n) {
        var o, r, l, g, m, v, y, w, b, S, T, x, C, P, k, I = "VbPFixed@tv-volumebyprice",
            E = c.lineToolNameForPointsBasedStudy(I);
        if (i = i || _.findStudyMetaInfo(t.studiesMetaData(), I), o = t.studyVersioning(), r = e || h(i, null, null, o), this._metaInfo = i, this.m_data = new f, this._plotOffsets = {}, this._plotOffsetsMetaInfoOverride = {}, l = this, g = new a(l, t), m = new c.StudyPaneView_hhists(l, t), v = new c.StudyPaneView_horizlines(l, t), y = new c.StudyPaneView_polygons(l, t), w = [g, m, v, y], n = t.mainSeries(), i.plots.length > 0 && (b = new d(l, n, t, i.plots[0].id), w.push(b)), i.plots.length > 1 && (S = new d(l, n, t, i.plots[1].id), w.push(S)), i.plots.length > 2 && (T = new d(l, n, t, i.plots[2].id), w.push(T)), s.call(this, t, w, r, E), this._turnaroundCounter = 1, this._turnaround = "vbpfixed_" + this._turnaroundCounter, this._metaInfo = i, this._graphics = new u(i), this._plotFields = [], x = this.metaInfo().plots)
            for (C = 0, P = x.length; P > C; C++) k = x[C].id, this._plotFields.push(k);
        this.clearData(), this._formatter = new p
    }
    var o = i(223),
        r = i(77).LineDataSource,
        s = o.StudyLineDataSource,
        a = o.StudyLineDataSourcePaneView,
        l = i(168),
        c = l.Study,
        h = l.prepareStudyProperties,
        d = i(171).StudyPaneView,
        u = i(174),
        p = i(83).VolumeFormatter,
        f = i(124),
        _ = i(125);
    inherit(n, s), n.prototype.pointsCount = function() {
        return 2
    }, n.prototype._requestStudy = function() {
        var t, e, i, n, o, r, s = this.points()[0],
            a = this.points()[1],
            l = Math.min(s.index, a.index),
            h = Math.max(s.index, a.index);
        return l === h ? void this.clearData() : (t = this._model.mainSeries().bars().valueAt(l), e = this._model.mainSeries().bars().valueAt(h), void(t && e && (i = 1e3 * t[TradingView.TIME_PLOT], n = 1e3 * e[TradingView.TIME_PLOT], o = [], void 0 !== this.properties().inputs.rowsLayout && o.push(this.properties().inputs.rowsLayout.value()), o.push(this.properties().inputs.rows.value()), o.push(this.properties().inputs.volume.value()), o.push(i), o.push(n), o.push(this.properties().inputs.vaVolume.value()), r = this, this._studyId ? (this._turnaround = "vbpfixed_" + ++this._turnaroundCounter, this._model.chartApi().modifyStudy(this._studyId, this._turnaround, o, function(t) {
            r.onData(t)
        })) : (this._studyId = c.makeNextStudyId(), this._model.chartApi().createStudy(this._studyId, this._turnaround, this._model.mainSeries()._seriesId, this._metaInfo.id + "-1!", o, function(t) {
            r.onData(t)
        })))))
    }, n.prototype.onData = function(t) {
        if ("data_update" === t.method && t.params.customId === "pointset_" + this._currentPointsetId) r.prototype.onData.call(this, t), 2 === this._points.length && this._requestStudy();
        else if ("data_update" === t.method && t.params.customId === this._studyId) {
            if (!this._checkTurnaround(t.params.turnaround)) return;
            t.params.nonseries.d = c.prototype._makeJSONForNSData.call(this, t), this._processPlotOffsets(t.params), this._mergeData(t.params.plots), "" !== t.params.nonseries.d && (this._graphics.process(t.params.nonseries), this._correctPoints(this._graphics.graphics())), t.params.nonseries.indexes.length > 0 && (this._indexes = t.params.nonseries.indexes), this.updateAllViews(), this._model.updateSource(this)
        }
    }, n.prototype._correctPoints = function(t) {
        var e, i, n, o, r, s;
        if (t && (void 0 === t.indexes || 0 !== t.indexes.length) && t.hhists) {
            for (e = t.hhists[0].data, i = null, n = null, o = 0; o < e.length; ++o) r = e[o].priceLow, s = e[o].priceHigh, (!i || i > r) && (i = r), (!n || s > n) && (n = s);
            this._points[0].price = n, this._points[1].price = i
        }
    }, n.prototype.calcIsActualSymbol = function() {
        this._isActualSymbol = !0, this.calcIsActualInterval()
    }, n.prototype.formatter = function() {
        return this._formatter
    }, n.prototype.isSelfColorerPlot = function(t) {
        return c.isSelfColorerPlot(this, t)
    }, n.prototype.offset = function(t) {
        return c.offset(this, t)
    }, n.prototype.data = function() {
        return this.m_data
    }, n.prototype._processPlotOffsets = function(t) {
        c.processPlotOffsets(this, t)
    }, n.prototype._mergeData = function(t) {
        this.m_data.merge(t)
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t, e, i) {
        var n = this._mtpStudyId() + "@mtp-mtpredictor",
            o = i || u.findStudyMetaInfo(t.studiesMetaData(), n),
            s = e || l(o, null, null, t.studyVersioning()),
            a = TradingView.Study.lineToolNameForPointsBasedStudy(n);
        r.call(this, t, this.createPaneViews(t), s, a), this._doNotNeedLine = !0, this._turnaroundCounter = 0, this._nextTurnaround(), this._metaInfo = o, this._graphics = new h(o), this._formatter = new d
    }
    var o = i(223),
        r = o.StudyLineDataSource,
        s = o.StudyLineDataSourcePaneView,
        a = i(168),
        l = a.prepareStudyProperties,
        c = i(77).LineDataSource,
        h = i(174),
        d = i(83).VolumeFormatter,
        u = i(125);
    inherit(n, r), n.prototype.series = function() {
        return TradingView.isInherited(this._ownerSource.constructor, TradingView.Series) ? this._ownerSource : this._ownerSource.series()
    }, n.prototype.calcIsActualSymbol = function() {
        return c.prototype.calcIsActualSymbol.call(this)
    }, n.prototype._nextTurnaround = function() {
        this._turnaround = this._mtpStudyId() + "_" + ++this._turnaroundCounter
    }, n.prototype.createPaneViews = function(t) {
        return [new s(this, t), new TradingView.Study.StudyPaneView_textmarks(this, t), new TradingView.Study.StudyPaneView_polygons(this, t), new TradingView.Study.StudyPaneView_lines(this, t)]
    }, n.prototype.onData = function(t) {
        if ("data_update" === t.method && t.params.customId === "pointset_" + this._currentPointsetId) c.prototype.onData.call(this, t), this._points.length === this.pointsCount() && this._requestStudy();
        else if ("data_update" === t.method && t.params.customId === this._studyId) {
            if (!this._checkTurnaround(t.params.turnaround)) return;
            t.params.nonseries.d = TradingView.Study.prototype._makeJSONForNSData.call(this, t), "" !== t.params.nonseries.d && this._graphics.process(t.params.nonseries), t.params.nonseries.indexes.length > 0 && (this._indexes = t.params.nonseries.indexes), this.updateAllViews(), this._model.updateSource(this)
        }
    }, n.prototype._requestStudy = function() {
        var t = this,
            e = function(e) {
                t.onData(e)
            },
            i = this._studyInputs();
        i && (this._studyId ? (this._nextTurnaround(), this._model.chartApi().modifyStudy(this._studyId, this._turnaround, i, e)) : (this._studyId = TradingView.Study.makeNextStudyId(), this._model.chartApi().createStudy(this._studyId, this._turnaround, this._model.mainSeries()._seriesId, this._metaInfo.id + "-1!", i, e)))
    }, t.exports = n
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            r.call(this, t, e), this._invalidated = !0
        }

        function o(t, e) {
            this._constructor = "LineToolBarsPattern";
            var i = e || new f("linetoolbarspattern");
            s.call(this, t, new n(this, t), i), i.mirrored.listeners().subscribe(this, o.prototype.mirror), i.flipped.listeners().subscribe(this, o.prototype.flip), i.addExclusion("mirrored"), i.addExclusion("flipped"), this._scaleCoeff = 1, this.version = o.version, this._pattern = [], this._properties.mode.listeners().subscribe(this, o.prototype.onModeChanged)
        }
        var r = i(115),
            s = i(77).LineDataSource,
            a = i(224).VertLineRenderer,
            l = i(151).RectangleRenderer,
            c = i(153).TrendLineRenderer,
            h = i(163).Action,
            d = i(67),
            u = i(68).PaneRendererLine,
            p = i(71),
            f = i(81).DefaultProperty;
        inherit(n, r), n.prototype.renderer = function() {
            var t, i, n, r, h, f, _, g, m, v, y, w, b, S, T, x, C, P;
            if (this._invalidated && (this.updateImpl(), this._invalidated = !1), this._pattern && 2 === this._source.points().length) {
                if (t = this._source.points()[0].index, i = this._source.points()[1].index, n = i > t ? this._points[0] : this._points[1], !n) return new p;
                if (r = Math.abs((this._points[0].x - this._points[1].x) / (this._pattern.length - 1)), this._source.properties().mode.value() === o.BARS_MODE || this._source.properties().mode.value() === o.OPENCLOSE_MODE) {
                    for (h = new p, f = this._source.properties().mode.value() === o.BARS_MODE ? ["high", "low"] : ["open", "close"], _ = f[0], g = f[1], m = 0; m < this._pattern.length; m++) v = Math.round(n.x + m * r + .5), y = n.y + Math.round(this._pattern[m][_]), w = n.y + Math.round(this._pattern[m][g]), b = {}, b.points = [new e.Point(v - 1, y), new e.Point(v + 1, w)], b.color = this._source.properties().color.value(), b.linewidth = 1, b.backcolor = this._source.properties().color.value(), b.fillBackground = !0, b.transparency = 10, h.append(new l(b));
                    return this.isAnchorsRequired() && h.append(this.createLineAnchor({
                        points: this._points
                    })), h
                }
                return h = new p, b = {}, b.barSpacing = r, b.items = this._pattern, b.histogramBase = 0, b.lineIndex = 0, b.lineColor = TradingView.generateColor(this._source.properties().color.value(), 10), b.lineStyle = CanvasEx.LINESTYLE_SOLID, b.lineWidth = 2, b.hittest = new d(d.MOVEPOINT), h.append(new u(b)), this.isAnchorsRequired() && h.append(this.createLineAnchor({
                    points: this._points
                })), h
            }
            return h = new p, this._points.length < 2 ? h : (S = this._points[0], T = this._points[1], x = {}, x.points = [S], x.color = "#808080", x.linewidth = 1, x.linestyle = CanvasEx.LINESTYLE_SOLID, h.append(new a(x)), C = {}, C.points = [T], C.color = "#808080", C.linewidth = 1, C.linestyle = CanvasEx.LINESTYLE_SOLID, h.append(new a(C)), P = {
                points: [S, T],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: "#808080",
                linewidth: 1,
                linestyle: CanvasEx.LINESTYLE_SOLID,
                extendleft: !1,
                extendright: !1,
                leftend: s.LINEEND_NORMAL,
                rightend: s.LINEEND_NORMAL
            }, h.append(new c(P)), h)
        }, n.prototype.update = function() {
            r.prototype.update.call(this), this._invalidated = !0
        }, n.prototype.updateImpl = function() {
            var t, i, n, o, r, s, a, l, c, h, d, u, p, f, _, g;
            !this._source.priceScale() || this._source.priceScale().isEmpty() || this._points.length < 2 || (this._source._pattern && this._source._pattern.length > 0 && 2 === this._source.points().length ? (t = this._source.priceScale(), i = this._source.firstPatternPrice(), n = this._source.pressCoeff(), t = this._source.priceScale(), o = this._source.ownerSource().firstValue(), r = t.priceRange(), t.isPercent() ? (a = r.convertToPercent(i, o), s = t.priceToCoordinate(a)) : s = t.priceToCoordinate(i), l = function(e) {
                var a, l = (e - i) * n + i;
                return t.isPercent() && (l = r.convertToPercent(l, o)), a = t.priceToCoordinate(l) - s
            }, c = parseInt(this._source.properties().mode.value()), h = this._source.points()[0].index, d = this._source.points()[1].index, u = h > d ? 1 : 0, p = this._points[u], f = p.x, _ = Math.abs((this._points[0].x - this._points[1].x) / (this._source._pattern.length - 1)), g = {
                0: function(t) {
                    return {
                        high: l(t[TradingView.HIGH_PLOT]),
                        low: l(t[TradingView.LOW_PLOT])
                    }
                },
                1: function(t, i) {
                    return new e.Point(f + i * _, l(t[TradingView.CLOSE_PLOT]) + p.y)
                },
                2: function(t) {
                    return {
                        open: l(t[TradingView.OPEN_PLOT]),
                        close: l(t[TradingView.CLOSE_PLOT])
                    }
                },
                3: function(t, i) {
                    return new e.Point(f + i * _, l(t[TradingView.OPEN_PLOT]) + p.y)
                },
                4: function(t, i) {
                    return new e.Point(f + i * _, l(t[TradingView.HIGH_PLOT]) + p.y)
                },
                5: function(t, i) {
                    return new e.Point(f + i * _, l(t[TradingView.LOW_PLOT]) + p.y)
                },
                6: function(t, i) {
                    return new e.Point(f + i * _, l((t[TradingView.HIGH_PLOT] + t[TradingView.LOW_PLOT]) / 2) + p.y)
                }
            }, this._pattern = this._source._pattern.map(g[c])) : delete this._pattern)
        }, inherit(o, s), o.version = 2, o.BARS_MODE = 0, o.LINE_MODE = 1, o.OPENCLOSE_MODE = 2, o.LINEOPEN_MODE = 3, o.LINEHIGH_MODE = 4, o.LINELOW_MODE = 5, o.LINEHL2_MODE = 6, o.prototype.onModeChanged = function() {
            var t = this.patternPriceDiff();
            t *= this._pressCoeff, this._points[1].price = this._timePoint[1].price = this._points[0].price + t
        }, o.prototype.additionalActions = function(t) {
            var e, i, n = new h({
                    checked: this.properties().mirrored.value(),
                    checkable: !0,
                    text: $.t("Mirrored"),
                    callbackContext: {
                        target: this
                    }
                }),
                o = new h({
                    checked: this.properties().flipped.value(),
                    checkable: !0,
                    text: $.t("Flipped"),
                    callbackContext: {
                        target: this
                    }
                });
            return n.callbacks().subscribe(null, function(e) {
                var i = e.callbackContext(),
                    n = i.target;
                t.setProperty(n.properties().mirrored, !n.properties().mirrored.value(), "Bats Pattern Mirroring"), n.updateAllViews(), n._model.updateSource(n)
            }), o.callbacks().subscribe(null, function(e) {
                var i = e.callbackContext(),
                    n = i.target;
                t.setProperty(n.properties().flipped, !n.properties().flipped.value(), "Bats Pattern Flipping"), n.updateAllViews(), n._model.updateSource(n)
            }), e = new h({
                checkable: !0,
                text: $.t("Restore Size")
            }), i = this, e.callbacks().subscribe(null, function(e) {
                var n = i.points()[0],
                    o = i.patternPriceDiff(),
                    r = n.price + o,
                    s = n.index + i._pattern.length - 1;
                t.startChangingLinetool(i, {
                    price: r,
                    index: s
                }, 1, {}), t.changeLinePoint({
                    price: r,
                    index: s
                }, {}), t.endChangingLinetool()
            }), [n, o, e]
        }, o.prototype.pointsCount = function() {
            return 2
        }, o.prototype.state = function(t) {
            var e = s.prototype.state.call(this, t);
            return e.pattern = this._pattern, e
        }, o.prototype.restoreData = function(t) {
            t.pattern && (this._pattern = t.pattern)
        }, o.prototype.title = function() {
            return "Bars Pattern"
        }, o.prototype.cloneData = function(t) {
            this._pattern = TradingView.clone(t._pattern)
        }, o.prototype.mirror = function() {
            var t, e, i, n, o, r = this._pattern,
                s = r[0][TradingView.HIGH_PLOT],
                a = Math.min(r[0][TradingView.LOW_PLOT], r[0][TradingView.HIGH_PLOT]),
                l = Math.max(r[0][TradingView.LOW_PLOT], r[0][TradingView.HIGH_PLOT]);
            for (t = 1; t < r.length; t++) a = Math.min(a, r[t][TradingView.LOW_PLOT]), l = Math.max(l, r[t][TradingView.HIGH_PLOT]);
            if (l > a)
                for (e = (a + l) / 2, i = function(t) {
                    var i = t - e,
                        n = e - i;
                    return n
                }, t = 0; t < r.length; t++) r[t][TradingView.HIGH_PLOT] = i(r[t][TradingView.HIGH_PLOT]), r[t][TradingView.LOW_PLOT] = i(r[t][TradingView.LOW_PLOT]), r[t][TradingView.OPEN_PLOT] = i(r[t][TradingView.OPEN_PLOT]), r[t][TradingView.CLOSE_PLOT] = i(r[t][TradingView.CLOSE_PLOT]);
            n = r[0][TradingView.HIGH_PLOT] - s, o = r[r.length - 1][TradingView.LOW_PLOT] - r[0][TradingView.HIGH_PLOT], this._points[0].price += n, this._points[1].price = this._points[0].price + o, this.updateAllViews()
        }, o.prototype.flip = function() {
            var t, e, i;
            for (this._points[0].price = this._points[1].price, t = 0; t < this._pattern.length / 2; t++) e = this._pattern[t], this._pattern[t] = this._pattern[this._pattern.length - t - 1], this._pattern[this._pattern.length - t - 1] = e;
            i = this._pattern[this._pattern.length - 1][TradingView.LOW_PLOT] - this._pattern[0][TradingView.HIGH_PLOT], this._points[1].price = this._points[0].price + i, this.updateAllViews()
        }, o.prototype.firstPatternPrice = function() {
            var t, e, i, n = parseInt(this.properties().mode.value(), 10);
            return n === o.LINEHL2_MODE ? t = (this._pattern[0][TradingView.HIGH_PLOT] + this._pattern[0][TradingView.LOW_PLOT]) / 2 : (e = {
                0: TradingView.HIGH_PLOT,
                1: TradingView.CLOSE_PLOT,
                2: TradingView.OPEN_PLOT,
                3: TradingView.OPEN_PLOT,
                4: TradingView.HIGH_PLOT,
                5: TradingView.LOW_PLOT
            }, i = e[n], t = this._pattern[0][i])
        }, o.prototype.lastPatternPrice = function() {
            var t, e, i, n = parseInt(this.properties().mode.value(), 10);
            return n === o.LINEHL2_MODE ? t = (this._pattern[this._pattern.length - 1][TradingView.HIGH_PLOT] + this._pattern[this._pattern.length - 1][TradingView.LOW_PLOT]) / 2 : (e = {
                0: TradingView.LOW_PLOT,
                1: TradingView.CLOSE_PLOT,
                2: TradingView.CLOSE_PLOT,
                3: TradingView.OPEN_PLOT,
                4: TradingView.HIGH_PLOT,
                5: TradingView.LOW_PLOT
            }, i = e[n], t = this._pattern[this._pattern.length - 1][i])
        }, o.prototype.patternPriceDiff = function() {
            return this.lastPatternPrice() - this.firstPatternPrice()
        }, o.prototype.pressCoeff = function() {
            var t = this.patternPriceDiff(),
                e = this.points()[0].price,
                i = this.points()[1].price,
                n = i - e,
                o = n / t;
            return this._pressCoeff = o, o
        }, o.prototype.addPoint = function(t, e) {
            var i, n, r, a, l, c, h, d, u, p, f = this._model.mainSeries(),
                _ = f.nearestIndex(t.index, TradingView.SEARCH_NEAREST_RIGHT);
            if (this.properties().mode.value() === o.BARS_MODE ? t.price = f.bars().valueAt(_)[TradingView.HIGH_PLOT] : t.price = f.bars().valueAt(_)[TradingView.CLOSE_PLOT], i = this.priceScale().priceRange().length(), t.price += .05 * i, n = f.priceScale(), n.isPercent() && (r = f.firstValue(), t.price = n.priceRange().convertToPercent(t.price, r)), a = s.prototype.addPoint.call(this, t, e, !0)) {
                for (l = Math.min(this.points()[0].index, this.points()[1].index), c = Math.max(this.points()[0].index, this.points()[1].index), _ = this._model.mainSeries().nearestIndex(l, TradingView.SEARCH_NEAREST_RIGHT), h = this._model.mainSeries().nearestIndex(c, TradingView.SEARCH_NEAREST_LEFT), this.points()[0].index > this.points()[1].index && (this._points[0].price = this._points[1].price), this._pattern = [], d = _; h >= d; d++) u = this._model.mainSeries().data().valueAt(d), this._pattern.push(TradingView.clone(u));
                this._pattern.length > 0 && (p = this.patternPriceDiff(), this._points[1].price = this._points[0].price + p, this._points[1].index = this._points[0].index + (h - _), this.normalizePoints(), this.createServerPoints())
            }
            return a
        }, o.prototype.setPoint = function(t, e, i) {
            var n = this._points[0].price - this._points[1].price;
            1 === t && e.index <= this._points[0].index && (e.index = this._points[0].index + 1), 0 === t && e.index >= this._points[1].index && (e.index = this._points[1].index - 1), s.prototype.setPoint.call(this, t, e, i), 1 === t ? this._points[0].price = this._points[1].price + n : this._points[1].price = this._points[0].price - n
        }, o.prototype.migrateVersion = function(t, e, i) {
            if (1 === t && this._pattern.length > 0) {
                var n = this.patternPriceDiff();
                2 === this._timePoint.length && (this._timePoint[1].price = this._timePoint[0].price + n), 2 === this._points.length && (this._points[1].price = this._points[0].price + n)
            }
        }, t.exports = o
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            s.call(this, t, e), this._rendererCache = {}, this._invalidated = !0
        }

        function o(t, e) {
            this._constructor = "LineToolTrendBasedFibTime";
            var i = e || new this.createPropertiesObject("linetooltrendbasedfibtime");
            a.call(this, t, new n(this, t), i), this.version = o.version
        }
        var r = i(224).VertLineRenderer,
            s = i(115),
            a = i(77).LineDataSource,
            l = i(149),
            c = i(116).TextRenderer,
            h = i(151).RectangleTransparencyRenderer,
            d = i(153).TrendLineRenderer,
            u = i(67),
            p = i(71);
        inherit(n, s), n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype.updateImpl = function() {
            var t, e, i, n, o, r, a, l, c, h, d, u, p, f, _;
            if (s.prototype.update.call(this), !(this._source.points().length < 3) && this._source.priceScale() && !this._source.priceScale().isEmpty() && !this._model.timeScale().isEmpty() && (t = this._source.points()[0], e = this._source.points()[1], i = this._source.points()[2], this._levels = [], e.index !== t.index && (n = e.index - t.index, o = this._source.properties(), r = i.index, a = this._model.timeScale().visibleBars(), !a.isEmpty())))
                for (l = 1; 11 >= l; l++) c = "level" + l, h = o[c], h.visible.value() && (d = h.coeff.value(), u = h.color.value(), p = Math.round(r + d * n), f = this._model.timeScale().indexToCoordinate(p), _ = {
                    x: f,
                    coeff: d,
                    color: u,
                    linewidth: h.linewidth.value(),
                    linestyle: h.linestyle.value(),
                    index: l
                }, o.showCoeffs.value() && (_.text = d, _.y = this._source.priceScale().height()), this._levels.push(_))
        }, n.prototype.renderer = function() {
            var t, i, n, o, s, l, f, _, g, m, v, y, w, b, S, T, x, C;
            if (this._invalidated && (this.updateImpl(), this._invalidated = !1), t = new p, this._points.length < 2) return t;
            if (i = this._points[0], n = this._points[1], o = this._source.properties(), o.trendline.visible.value() && (s = {
                    points: [i, n],
                    width: this._model.timeScale().width(),
                    height: this._source.priceScale().height(),
                    color: o.trendline.color.value(),
                    linewidth: o.trendline.linewidth.value(),
                    linestyle: o.trendline.linestyle.value(),
                    extendleft: !1,
                    extendright: !1,
                    leftend: a.LINEEND_NORMAL,
                    rightend: a.LINEEND_NORMAL
                }, t.append(new d(s))), this._points.length < 3) return this.addAnchors(t), t;
            for (l = this._points[2], o.trendline.visible.value() && (s = {
                points: [n, l],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: o.trendline.color.value(),
                linewidth: o.trendline.linewidth.value(),
                linestyle: o.trendline.linestyle.value(),
                extendleft: !1,
                extendright: !1,
                leftend: a.LINEEND_NORMAL,
                rightend: a.LINEEND_NORMAL
            }, t.append(new d(s))), f = o.fillBackground.value(), _ = o.transparency.value(), g = 0; g < this._levels.length; g++) {
                if (g > 0 && f && (m = this._levels[g - 1], i = new e.Point(m.x, 0), n = new e.Point(this._levels[g].x, this._source.priceScale().height()), v = {}, v.points = [i, n], v.color = this._levels[g].color, v.linewidth = 0, v.backcolor = this._levels[g].color, v.fillBackground = !0, v.transparency = _, t.append(new h(v))), void 0 !== this._levels[g].text) {
                    switch (S = o.horzLabelsAlign.value(), S = "left" === S ? "right" : "right" === S ? "left" : "center") {
                        case "left":
                            w = 3;
                            break;
                        case "center":
                            w = 0;
                            break;
                        case "right":
                            w = -3
                    }
                    switch (o.vertLabelsAlign.value()) {
                        case "top":
                            y = new e.Point(this._levels[g].x, 0), b = 5;
                            break;
                        case "middle":
                            y = new e.Point(this._levels[g].x, .5 * this._levels[g].y), b = 0;
                            break;
                        case "bottom":
                            y = new e.Point(this._levels[g].x, this._levels[g].y), b = -10
                    }
                    T = {
                        points: [y],
                        text: "" + this._levels[g].text,
                        color: this._levels[g].color,
                        vertAlign: "middle",
                        horzAlign: S,
                        font: o.font.value(),
                        offsetX: w,
                        offsetY: b,
                        fontsize: 12
                    }, t.append(new c(T, this._rendererCache))
                }
                x = {}, x.points = [new e.Point(this._levels[g].x, 0)], x.color = this._levels[g].color, x.linewidth = this._levels[g].linewidth, x.linestyle = this._levels[g].linestyle, C = new u(u.MOVEPOINT, null, this._levels[g].index), t.append(new r(x, C))
            }
            return this.addAnchors(t), t
        }, inherit(o, a), o.version = 1, o.prototype.pointsCount = function() {
            return 3
        }, o.prototype.title = function() {
            return "Trend-Based Fib Time"
        }, o.prototype.migrateVersion = function(t, e, i) {}, o.prototype.processErase = function(t, e) {
            var i = "level" + e,
                n = this.properties()[i].visible;
            t.setProperty(n, !1, "Erase level line")
        }, o.prototype.createPropertiesObject = function(t, e, i) {
            return new l(t, e, i, {
                range: [1, 11]
            })
        }, t.exports = o
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            r.call(this, t, e), this._levels = [], this._rendererCache = {}, this._invalidated = !0
        }

        function o(t, e) {
            this._constructor = "LineToolFibTimeZone";
            var i = e || this.createPropertiesObject("linetoolfibtimezone");
            s.call(this, t, new n(this, t), i), this.version = o.version
        }
        var r = i(115),
            s = i(77).LineDataSource,
            a = i(224).VertLineRenderer,
            l = i(149),
            c = i(116).TextRenderer,
            h = i(151).RectangleTransparencyRenderer,
            d = i(153).TrendLineRenderer,
            u = i(67),
            p = i(71);
        inherit(n, r), n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype.updateImpl = function() {
            var t, e, i, n, o, s, a, l, c, h, d;
            if (r.prototype.update.call(this), !(this._source.points().length < 1) && this._source.priceScale() && !this._source.priceScale().isEmpty() && !this._model.timeScale().isEmpty() && (t = this._source.points()[0], 2 === this._source.points().length && (e = this._source.points()[1]), i = this._source.properties(), n = this._source.points()[0].index, o = this._model.timeScale().visibleBars(), !o.isEmpty()))
                for (this._levels = [], s = e ? e.index - t.index : 1, a = 1; 11 >= a; a++) l = i["level" + a], l.visible.value() && (c = Math.round(n + l.coeff.value() * s), h = this._model.timeScale().indexToCoordinate(c), d = {
                    index: a,
                    x: h,
                    color: l.color.value(),
                    width: l.linewidth.value(),
                    style: l.linestyle.value()
                }, i.showLabels.value() && (d.text = l.coeff.value(), d.y = this._source.priceScale().height()), this._levels.push(d))
        }, n.prototype.renderer = function() {
            var t, i, n, o, r, l, f, _, g, m, v, y, w, b, S;
            for (this._invalidated && (this.updateImpl(), this._invalidated = !1), t = new p, i = this._source.properties(), n = 0; n < this._levels.length; n++)
                if (o = {}, o.points = [new e.Point(this._levels[n].x, 0)], o.color = this._levels[n].color, o.linewidth = this._levels[n].width, o.linestyle = this._levels[n].style, r = new u(u.MOVEPOINT, null, this._levels[n].index), t.append(new a(o, r)), n > 0 && i.fillBackground.value() && (l = this._levels[n - 1], f = new e.Point(this._levels[n].x, 0), _ = new e.Point(l.x, this._source.priceScale().height()), g = {}, g.points = [f, _], g.color = this._levels[n].color, g.linewidth = 0, g.backcolor = this._levels[n].color, g.fillBackground = !0, g.transparency = i.transparency.value(), t.append(new h(g))), void 0 !== this._levels[n].text) {
                    switch (w = i.horzLabelsAlign.value(), w = "left" === w ? "right" : "right" === w ? "left" : "center") {
                        case "left":
                            v = 3;
                            break;
                        case "center":
                            v = 0;
                            break;
                        case "right":
                            v = -3
                    }
                    switch (i.vertLabelsAlign.value()) {
                        case "top":
                            m = new e.Point(this._levels[n].x, 0), y = 5;
                            break;
                        case "middle":
                            m = new e.Point(this._levels[n].x, .5 * this._levels[n].y), y = 0;
                            break;
                        case "bottom":
                            m = new e.Point(this._levels[n].x, this._levels[n].y), y = -10
                    }
                    b = {
                        points: [m],
                        text: "" + this._levels[n].text,
                        color: o.color,
                        vertAlign: "middle",
                        horzAlign: w,
                        font: i.font.value(),
                        offsetX: v,
                        offsetY: y,
                        fontsize: 12
                    }, t.append(new c(b, this._rendererCache))
                }
            return 2 === this._points.length && (S = {
                points: [this._points[0], this._points[1]],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: i.trendline.color.value(),
                linewidth: i.trendline.linewidth.value(),
                linestyle: i.trendline.linestyle.value(),
                extendleft: !1,
                extendright: !1,
                leftend: s.LINEEND_NORMAL,
                rightend: s.LINEEND_NORMAL
            }, t.append(new d(S))), this.isAnchorsRequired() && (2 === this._source.points().length ? t.append(this.createLineAnchor({
                points: this._points
            })) : this._points.length > 0 && t.append(this.createLineAnchor({
                points: [new e.Point(this._points[0].x, this._source.priceScale().height() / 2)],
                hittestResult: u.MOVEPOINT
            }))), t
        }, inherit(o, s), o.version = 2, o.prototype.migrateVersion = function(t, e, i) {
            var n;
            if (1 === t) {
                for (i.properties.level1.color.setValue(i.properties.baselinecolor.value()), n = 2; 11 >= n; n++) i.properties["level" + n].color.setValue(i.properties.linecolor.value());
                for (n = 1; 11 >= n; n++) i.properties["level" + n].linewidth.setValue(i.properties.linewidth.value()), i.properties["level" + n].linestyle.setValue(i.properties.linestyle.value())
            }
        }, o.prototype.pointsCount = function() {
            return 2
        }, o.prototype.title = function() {
            return "Fib Time Zone"
        }, o.prototype.processErase = function(t, e) {
            var i = "level" + e,
                n = this.properties()[i].visible;
            t.setProperty(n, !1, "Erase level line")
        }, o.prototype.createPropertiesObject = function(t, e, i) {
            return new l(t, e, i, {
                range: [1, 11]
            })
        }, t.exports = o
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            r.call(this, t, e), this._lines = [], this._invalidated = !0
        }

        function o(t, e) {
            this._constructor = "LineToolCircleLines";
            var i = e || new d("linetoolcirclelines");
            s.call(this, t, new n(this, t), i)
        }
        var r = i(115),
            s = i(77).LineDataSource,
            a = i(224).VertLineRenderer,
            l = i(153).TrendLineRenderer,
            c = i(67),
            h = i(71),
            d = i(81).DefaultProperty;
        inherit(n, r), n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype.updateImpl = function() {
            var t, e, i, n, o, s, a;
            if (r.prototype.update.call(this), !(this._source.points().length < 2) && (t = this._model.timeScale(), this._source.priceScale() && !this._source.priceScale().isEmpty() && !t.isEmpty() && (e = this._source.points()[0], i = this._source.points()[1], n = i ? i.index - e.index : 1, this._lines = [], 0 !== n)))
                if (o = t.visibleBars(), n > 0)
                    for (s = e.index, a = s; a <= o.lastBar(); a += n) this._lines.push({
                        x: t.indexToCoordinate(a)
                    });
                else
                    for (s = e.index, a = s; a >= o.firstBar(); a += n) this._lines.push({
                        x: t.indexToCoordinate(a)
                    })
        }, n.prototype.renderer = function() {
            var t, i, n, o, r, d, u, p;
            if (this._invalidated && (this.updateImpl(), this._invalidated = !1), t = new h, this._points.length < 2) return t;
            for (i = this._points[0], n = this._points[1], o = this._source.properties(), r = {
                points: [i, n],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: o.trendline.color.value(),
                linewidth: o.trendline.linewidth.value(),
                linestyle: o.trendline.linestyle.value(),
                extendleft: !1,
                extendright: !1,
                leftend: s.LINEEND_NORMAL,
                rightend: s.LINEEND_NORMAL
            }, t.append(new l(r)), o = this._source.properties(), d = 0; d < this._lines.length; d++) u = {
                points: [new e.Point(this._lines[d].x, 0)],
                color: o.linecolor.value(),
                linewidth: o.linewidth.value(),
                linestyle: o.linestyle.value()
            }, t.append(new a(u));
            return this.isAnchorsRequired() && (2 === this._source.points().length ? (p = [].concat(this._points), t.append(this.createLineAnchor({
                points: p
            }))) : t.append(this.createLineAnchor({
                points: [new e.Point(this._points[0].x, this._source.priceScale().height() / 2)],
                hittestResult: c.MOVEPOINT
            }))), t
        }, inherit(o, s), o.prototype.pointsCount = function() {
            return 2
        }, o.prototype.title = function() {
            return "Cyclic Lines"
        }, t.exports = o
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            s.call(this, t, e), this._rendererCache = {}, this._invalidated = !0
        }

        function o(t, e) {
            this._constructor = "LineToolDateRange";
            var i = e || new d("linetooldaterange");
            r.call(this, t, new n(this, t), i)
        }
        var r = i(77).LineDataSource,
            s = i(115),
            a = i(116).TextRenderer,
            l = i(151).RectangleRenderer,
            c = i(153).TrendLineRenderer,
            h = i(71),
            d = i(81).DefaultProperty,
            u = i(83).TimeSpanFormatter;
        inherit(n, s), n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype.updateImpl = function() {
            s.prototype.update.call(this), this._invalidated = !1
        }, n.prototype.renderer = function() {
            var t, i, n, o, s, d, p, f, _, g, m, v, y, w, b, S, T, x, C, P, k, I, E, L, V;
            return this._invalidated && this.updateImpl(), t = new h, this._points.length < 2 || this._source.points().length < 2 ? t : (i = this._source.properties(), i.fillBackground && i.fillBackground.value() && (n = {}, n.points = this._points, n.color = "white", n.linewidth = 0, n.backcolor = i.backgroundColor.value(), n.fillBackground = !0, n.transparency = i.backgroundTransparency.value(), t.append(new l(n))), o = this, s = function(e, i) {
                var n = {};
                n.points = [e, i], n.width = o._model.timeScale().width(), n.height = o._source.priceScale().height(), n.color = o._source.properties().linecolor.value(), n.linewidth = o._source.properties().linewidth.value(), n.linestyle = CanvasEx.LINESTYLE_SOLID, n.extendleft = !1, n.extendright = !1, n.leftend = r.LINEEND_NORMAL, n.rightend = r.LINEEND_NORMAL, t.append(new c(n))
            }, d = this._points[0], p = this._points[1], s(d, new e.Point(d.x, p.y)), s(new e.Point(p.x, d.y), p), f = (d.y + p.y) / 2, _ = new e.Point(d.x, f), g = new e.Point(p.x, f), n = {}, n.points = [_, g], n.width = o._model.timeScale().width(), n.height = o._source.priceScale().height(), n.color = o._source.properties().linecolor.value(), n.linewidth = o._source.properties().linewidth.value(), n.linestyle = CanvasEx.LINESTYLE_DASHED, n.extendleft = !1, n.extendright = !1, n.leftend = r.LINEEND_NORMAL, n.rightend = r.LINEEND_ARROW, t.append(new c(n)), m = this._source.points()[0].index, v = this._source.points()[1].index, y = v - m, w = this._model.timeScale().indexToUserTime(m), b = this._model.timeScale().indexToUserTime(v), S = "", w && b && (T = (b.valueOf() - w.valueOf()) / 1e3, S = ", " + (new u).format(T)), x = $.t("{0} bars").format(y) + S, n = {}, C = {
                x: 0,
                y: 10
            }, n.text = x, n.color = i.textcolor.value(), n.height = o._source.priceScale().height(), n.font = i.font.value(), n.offsetX = C.x, n.offsetY = C.y, n.vertAlign = "middle", n.horzAlign = "center", n.fontsize = i.fontsize.value(), n.backgroundRoundRect = 4, n.backgroundHorzInflate = .4 * i.fontsize.value(), n.backgroundVertInflate = .2 * i.fontsize.value(), i.fillLabelBackground && i.fillLabelBackground.value() && (n.backgroundColor = i.labelBackgroundColor.value(), n.backgroundTransparency = 1 - i.labelBackgroundTransparency.value() / 100 || 0), i.drawBorder && i.drawBorder.value() && (n.borderColor = i.borderColor.value()), P = .5 * (d.x + p.x), k = p.y, I = new e.Point(P, k), E = new a(n, this._rendererCache), L = E.measure(), V = {
                x: P + n.backgroundHorzInflate + L.textBgPadding - L.width / L.textBgPadding,
                y: d.y > p.y ? I.y - L.height - 2 * L.textBgPadding - C.y > 0 ? k - L.height - C.y - 2 * L.textBgPadding : C.y - 2 * L.textBgPadding : I.y + L.height + L.textBgPadding + C.y > n.height ? n.height - L.height - C.y : k + L.textBgPadding
            }, E.setPoints([new e.Point(P, V.y)]), t.append(E), this.addAnchors(t), t)
        }, inherit(o, r), o.prototype.pointsCount = function() {
            return 2
        }, o.prototype.title = function() {
            return "Date Range"
        }, t.exports = o
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            r.call(this, t, e), this._rendererCache = {}, this._invalidated = !0, this._percentageFormatter = new u
        }

        function o(t, e) {
            this._constructor = "LineToolPriceRange";
            var i = e || new d("linetoolpricerange");
            s.call(this, t, new n(this, t), i)
        }
        var r = i(115),
            s = i(77).LineDataSource,
            a = i(116).TextRenderer,
            l = i(151).RectangleRenderer,
            c = i(153).TrendLineRenderer,
            h = i(71),
            d = i(81).DefaultProperty,
            u = i(83).PercentageFormatter;
        inherit(n, r), n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype.updateImpl = function() {
            r.prototype.update.call(this)
        }, n.prototype.renderer = function() {
            var t, i, n, o, r, d, u, p, f, _, g, m, v, y, w, b, S, T, x, C, P, k, I;
            return this._invalidated && (this.updateImpl(), this._invalidated = !1), t = new h, this._points.length < 2 || this._source.points().length < 2 ? t : (i = this._source.properties(), i.fillBackground && i.fillBackground.value() && (r = {}, r.points = this._points, r.color = "white", r.linewidth = 0, r.backcolor = i.backgroundColor.value(), r.fillBackground = !0, r.transparency = i.backgroundTransparency.value(), t.append(new l(r))), d = this, u = function(e, i) {
                var n = {};
                n.points = [e, i], n.width = d._model.timeScale().width(), n.height = d._source.priceScale().height(), n.color = d._source.properties().linecolor.value(), n.linewidth = d._source.properties().linewidth.value(), n.linestyle = CanvasEx.LINESTYLE_SOLID, n.extendleft = !1, n.extendright = !1, n.leftend = s.LINEEND_NORMAL, n.rightend = s.LINEEND_NORMAL, t.append(new c(n))
            }, n = this._points[0], o = this._points[1], o = new e.Point(o.x, n.y), u(n, o), n = this._points[0], o = this._points[1], n = new e.Point(n.x, o.y), u(n, o), n = this._points[0], o = this._points[1], p = (n.x + o.x) / 2, f = new e.Point(p, n.y), _ = new e.Point(p, o.y), r = {}, r.points = [f, _], r.width = d._model.timeScale().width(), r.height = d._source.priceScale().height(), r.color = d._source.properties().linecolor.value(), r.linewidth = d._source.properties().linewidth.value(), r.linestyle = CanvasEx.LINESTYLE_DASHED, r.extendleft = !1, r.extendright = !1, r.leftend = s.LINEEND_NORMAL, r.rightend = s.LINEEND_ARROW, t.append(new c(r)), g = this._source.points()[0].price, m = this._source.points()[1].price, v = m - g, y = 100 * v / g, w = this._source.priceScale().formatter().format(v) + " (" + this._percentageFormatter.format(y) + ")", r = {}, m > g ? (b = o.clone(), b.y -= 2 * i.fontsize.value(), b.x = .5 * (n.x + o.x), r.points = [b]) : (b = o.clone(), b.x = .5 * (n.x + o.x), b.y += .7 * i.fontsize.value(), r.points = [b]), S = {
                x: 0,
                y: 10
            }, r.text = w, r.color = i.textcolor.value(), r.height = d._source.priceScale().height(), r.font = i.font.value(), r.offsetX = S.x, r.offsetY = S.y, r.vertAlign = "middle", r.horzAlign = "center", r.fontsize = i.fontsize.value(), r.backgroundRoundRect = 4, r.backgroundHorzInflate = .4 * i.fontsize.value(), r.backgroundVertInflate = .2 * i.fontsize.value(), i.fillLabelBackground && i.fillLabelBackground.value() && (r.backgroundColor = i.labelBackgroundColor.value(), r.backgroundTransparency = 1 - i.labelBackgroundTransparency.value() / 100 || 0), i.drawBorder && i.drawBorder.value() && (r.borderColor = i.borderColor.value()), T = .5 * (n.x + o.x), x = o.y, C = new e.Point(T, x), P = new a(r, this._rendererCache), k = P.measure(), I = {
                x: T + r.backgroundHorzInflate + k.textBgPadding - k.width / k.textBgPadding,
                y: n.y > o.y ? C.y - k.height - 2 * k.textBgPadding - S.y > 0 ? x - k.height - S.y - 2 * k.textBgPadding : S.y - 2 * k.textBgPadding : C.y + k.height + k.textBgPadding + S.y > r.height ? r.height - k.height - S.y : x + k.textBgPadding
            }, P.setPoints([new e.Point(T, I.y)]), t.append(P), this.addAnchors(t), t)
        }, inherit(o, s), o.prototype.pointsCount = function() {
            return 2
        }, o.prototype.title = function() {
            return "Price Range"
        }, t.exports = o
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            r.call(this, t, e), this._rendererCache = {}, this._percentageFormatter = new p, this._invalidated = !0
        }

        function o(t, e) {
            this._constructor = "LineToolDateAndPriceRange";
            var i = e || new d("linetooldateandpricerange");
            s.call(this, t, new n(this, t), i)
        }
        var r = i(115),
            s = i(77).LineDataSource,
            a = i(116).TextRenderer,
            l = i(151).RectangleRenderer,
            c = i(153).TrendLineRenderer,
            h = i(71),
            d = i(81).DefaultProperty,
            u = i(83),
            p = u.PercentageFormatter,
            f = u.TimeSpanFormatter;
        inherit(n, r), n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype.updateImpl = function() {
            r.prototype.update.call(this), this._invalidated = !1
        }, n.prototype.renderer = function() {
            var t, i, n, o, r, d, u, p, _, g, m, v, y, w, b, S, T, x, C, P, k, I, E, L, V, M, A, D, O, R, B;
            return this._invalidated && this.updateImpl(), t = new h, this._points.length < 2 || this._source.points().length < 2 ? t : (i = this._source.properties(), i.fillBackground && i.fillBackground.value() && (n = {}, n.points = this._points, n.color = "white", n.linewidth = 0, n.backcolor = i.backgroundColor.value(), n.fillBackground = !0, n.transparency = i.backgroundTransparency.value(), t.append(new l(n))), o = this, r = function(e, i) {
                var n = {};
                n.points = [e, i], n.width = o._model.timeScale().width(), n.height = o._source.priceScale().height(), n.color = o._source.properties().linecolor.value(), n.linewidth = o._source.properties().linewidth.value(), n.linestyle = CanvasEx.LINESTYLE_SOLID, n.extendleft = !1, n.extendright = !1, n.leftend = s.LINEEND_NORMAL, n.rightend = s.LINEEND_NORMAL, t.append(new c(n))
            }, d = this._points[0], u = this._points[1], r(d, new e.Point(u.x, d.y)), r(new e.Point(d.x, u.y), u), r(d, new e.Point(d.x, u.y)), r(new e.Point(u.x, d.y), u), p = (d.y + u.y) / 2, _ = new e.Point(d.x, p), g = new e.Point(u.x, p), n = {}, n.points = [_, g], n.width = o._model.timeScale().width(), n.height = o._source.priceScale().height(), n.color = o._source.properties().linecolor.value(), n.linewidth = o._source.properties().linewidth.value(), n.linestyle = CanvasEx.LINESTYLE_DASHED, n.extendleft = !1, n.extendright = !1, n.leftend = s.LINEEND_NORMAL, n.rightend = s.LINEEND_ARROW, t.append(new c(n)), d = this._points[0], u = this._points[1], m = (d.x + u.x) / 2, _ = new e.Point(m, d.y), g = new e.Point(m, u.y), n = {}, n.points = [_, g], n.width = o._model.timeScale().width(), n.height = o._source.priceScale().height(), n.color = o._source.properties().linecolor.value(), n.linewidth = o._source.properties().linewidth.value(), n.linestyle = CanvasEx.LINESTYLE_DASHED, n.extendleft = !1, n.extendright = !1, n.leftend = s.LINEEND_NORMAL, n.rightend = s.LINEEND_ARROW, t.append(new c(n)), v = this._source.points()[0].price, y = this._source.points()[1].price, w = y - v, b = 100 * w / v, S = this._source.points()[0].index, T = this._source.points()[1].index, x = T - S, C = this._model.timeScale().indexToUserTime(S), P = this._model.timeScale().indexToUserTime(T), k = "", C && P && (I = (P.valueOf() - C.valueOf()) / 1e3, k = ", " + (new f).format(I)), E = this._source.priceScale().formatter().format(w) + " (" + this._percentageFormatter.format(Math.round(100 * b) / 100) + ")\n" + $.t("{0} bars").format(x) + k, n = {}, y > v ? (L = u.clone(), L.y -= 2 * i.fontsize.value(), L.x = .5 * (d.x + u.x), n.points = [L]) : (L = u.clone(), L.x = .5 * (d.x + u.x), L.y += .7 * i.fontsize.value(), n.points = [L]), V = {
                x: 0,
                y: 10
            }, n.text = E, n.color = i.textcolor.value(), n.height = o._source.priceScale().height(), n.font = i.font.value(), n.offsetX = V.x, n.offsetY = V.y, n.padding = 5, n.vertAlign = "middle", n.horzAlign = "center", n.fontsize = i.fontsize.value(), n.backgroundRoundRect = 4, n.backgroundHorzInflate = .4 * i.fontsize.value(), n.backgroundVertInflate = .2 * i.fontsize.value(), i.fillLabelBackground && i.fillLabelBackground.value() && (n.backgroundColor = i.labelBackgroundColor.value(), n.backgroundTransparency = 1 - i.labelBackgroundTransparency.value() / 100 || 0), i.drawBorder && i.drawBorder.value() && (n.borderColor = i.borderColor.value()), M = .5 * (d.x + u.x), A = u.y, D = new e.Point(M, A), O = new a(n, this._rendererCache), R = O.measure(), B = {
                x: M + n.backgroundHorzInflate + R.textBgPadding - R.width / R.textBgPadding,
                y: d.y > u.y ? D.y - R.height - 2 * R.textBgPadding - V.y > 0 ? A - R.height - V.y + R.textBgPadding : V.y - 2 * R.textBgPadding : D.y + R.height + R.textBgPadding + V.y > n.height ? n.height - R.height - V.y : A + R.textBgPadding
            }, window.t1 = o._source.priceScale().height(), window.t2 = D.y + R.height + 2 * R.textBgPadding + V.y, O.setPoints([new e.Point(M, B.y)]), t.append(O), this.addAnchors(t), t)
        }, inherit(o, s), o.prototype.pointsCount = function() {
            return 2
        }, o.prototype.title = function() {
            return "Date and Price Range"
        }, t.exports = o
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e, n) {
        "use strict";

        function o(t) {
            this._data = t
        }

        function r(t, e) {
            a.call(this, t, e), this._label = null, this._rendererCache = {}, this._invalidated = !0
        }

        function s(t, e) {
            this._constructor = "LineToolTrendAngleLine";
            var i = e || new _("linetooltrendangle");
            l.call(this, t, new r(this, t), i), this._properties.addProperty("angle"), this._properties.angle = new s.AngleProperty(this)
        }
        var a = i(115),
            l = i(77).LineDataSource,
            c = i(153),
            h = c.TrendLineStatsRenderer,
            d = c.LineToolTrendLine,
            u = i(116).TextRenderer,
            p = i(153).TrendLineRenderer,
            f = i(71),
            _ = i(81).DefaultProperty,
            g = i(83),
            m = g.PercentageFormatter;
        o.prototype.hitTest = function() {
            return null
        }, o.prototype.draw = function(t) {
            var e, i;
            t.save(), t.translate(this._data.point.x, this._data.point.y), t.strokeStyle = this._data.color, e = [1, 2], "function" == typeof t.setLineDash ? t.setLineDash(e) : void 0 !== t.mozDash ? t.mozDash = e : void 0 !== t.webkitLineDash && (t.webkitLineDash = e), i = this._data.size, t.beginPath(), t.moveTo(0, 0), t.lineTo(i, 0), t.arc(0, 0, i, 0, -this._data.angle, this._data.angle > 0), t.stroke(), t.restore()
        }, inherit(r, a), r.prototype.update = function() {
            this._invalidated = !0
        }, r.prototype.updateImpl = function() {
            var t, i, n, o, r, s, l, c, h, d, u, p, f, _;
            a.prototype.update.call(this), this._points.length > 0 && void 0 !== this._source._angle && (t = this._points[0], i = Math.cos(this._source._angle), n = -Math.sin(this._source._angle), o = new e.Point(i, n), this._secondPoint = t.addScaled(o, this._source._distance), this._secondPoint.data = 1), this._label = null, this._source.points().length < 2 || (t = this._source.points()[0], r = this._source.points()[1], s = [], this._source.properties().showPriceRange.value() && this._source.priceScale() && (h = r.price - t.price, d = h / t.price, l = this._source.priceScale().formatter().format(h) + " (" + (new m).format(100 * d) + ")", u = this._model.mainSeries().base(), u && (p = Math.round(h * u), l += ", " + p), s.push("priceRange")), f = this._source.properties().showBarsRange.value(), f && (c = "", _ = r.index - t.index, c += $.t("{0} bars").format(_), s.push("barsRange")), this._label = [l, c].filter(function(t) {
                    return t
                }).join("\n") || null, this._icons = s)
        }, r.prototype.renderer = function() {
            var t, e, i, n, r, s, a, c, _, g;
            return this._invalidated && (this.updateImpl(), this._invalidated = !1), t = new f, e = {}, i = this.isAnchorsRequired(), n = i || this._source.properties().alwaysShowStats.value(), this._secondPoint && this._points.length > 0 && (e.points = [this._points[0], this._secondPoint], e.width = this._model.timeScale().width(), e.height = this._source.priceScale().height(), e.color = this._source.properties().linecolor.value(), e.linewidth = this._source.properties().linewidth.value(), e.linestyle = this._source.properties().linestyle.value(), e.extendleft = this._source.properties().extendLeft.value(), e.extendright = this._source.properties().extendRight.value(), e.leftend = l.LINEEND_NORMAL, e.rightend = l.LINEEND_NORMAL, t.append(new p(e)), n && this._label && 2 === this._points.length && (r = {
                points: [this._secondPoint],
                text: this._label,
                color: this._source.properties().textcolor.value(),
                font: d.LABEL_FONT,
                fontsize: d.LABEL_FONTSIZE,
                lineSpacing: d.LABEL_LINESPACING,
                backgroundColor: d.LABEL_BGCOLOR,
                borderColor: d.LABEL_BORDERCOLOR,
                borderWidth: 1,
                padding: d.LABEL_PADDING,
                paddingLeft: 30,
                doNotAlignText: !0,
                icons: this._icons
            }, s = d.LABEL_OFFSET, this._points[1].y < this._points[0].y ? (r.vertAlign = "bottom", r.offsetY = -s) : r.offsetY = s, this._points[1].x < this._points[0].x ? (r.horzAlign = "right", r.offsetX = -s) : r.offsetX = s, t.append(new h(r, this._rendererCache))), a = {}, a.point = this._points[0], a.angle = this._source._angle, a.color = this._source.properties().linecolor.value(), a.size = 50, t.append(new o(a)), c = Math.round(180 * a.angle / Math.PI) + "Âº", _ = this._points[0].clone(), _.x = _.x + 50, g = {
                points: [_],
                text: c,
                color: this._source.properties().textcolor.value(),
                horzAlign: "left",
                font: this._source.properties().font.value(),
                offsetX: 5,
                offsetY: 0,
                bold: this._source.properties().bold.value(),
                italic: this._source.properties().italic.value(),
                fontsize: this._source.properties().fontsize.value(),
                vertAlign: "middle"
            }, t.append(new u(g, this._rendererCache))), !TradingView.printing && this._source.hasAlert.value() && !this._model.readOnly() && e && e.points && e.points.length >= 2 && this._source.getAlertIsActive(function(i) {
                t.append(new TradingView.PaneRendererClockIcon({
                    point1: e.points[0],
                    point2: e.points[1],
                    color: i ? e.color : defaults("chartproperties.alertsProperties.drawingIcon.color")
                }))
            }), this._secondPoint && this._points.length > 0 && i && t.append(this.createLineAnchor({
                points: [this._points[0], this._secondPoint]
            })), t
        }, inherit(s, l), s.AngleProperty = function(t) {
            n.call(this), this._lineSource = t
        }, inherit(s.AngleProperty, n), s.AngleProperty.prototype.value = function() {
            var t = this._lineSource._angle,
                e = 180 * t / Math.PI;
            return Math.round(e)
        }, s.AngleProperty.prototype.setValue = function(t) {
            var i, n, o, r, s, a, l = t * Math.PI / 180;
            this._lineSource._angle = l, i = this._lineSource.pointToScreenPoint(this._lineSource.points()[0])[0], n = Math.cos(this._lineSource._angle), o = -Math.sin(this._lineSource._angle), r = new e.Point(n, o), s = i.addScaled(r, this._lineSource._distance), a = this._lineSource.screenPointToPoint(s), this._lineSource._points[1] = a, this._lineSource._model.updateSource(this._lineSource), this._lineSource.updateAllViews(), this._lineSource._model.updateSource(this._lineSource)
        }, s.prototype.pointsCount = function() {
            return 2
        }, s.prototype.title = function() {
            return "Trend Angle"
        }, s.prototype._calculateAngle = function() {
            var t, e = this.pointToScreenPoint(this.points()[0])[0],
                i = this.pointToScreenPoint(this.points()[1])[0],
                n = i.substract(e);
            n.length() > 0 ? (n = n.normalized(), this._angle = Math.acos(n.x), n.y > 0 && (this._angle = -this._angle), this._distance = i.substract(e).length()) : delete this._angle, t = this.properties(), t.hasOwnProperty("angle") && this.properties().angle.listeners().fire(this.properties().angle)
        }, s.prototype.addPoint = function(t, e) {
            var i = l.prototype.addPoint.call(this, t, e);
            return i && this._calculateAngle(), i
        }, s.prototype.setLastPoint = function(t, e) {
            l.prototype.setLastPoint.call(this, t, e), this.points().length > 1 && this._calculateAngle()
        }, s.prototype.axisPoints = function() {
            var t, i, n, o, r, s, a = this.points();
            return a.length < 2 ? [] : (t = [this.points()[0]], i = this.pointToScreenPoint(this.points()[0])[1], n = Math.cos(this._angle) * this._distance, o = -Math.sin(this._angle) * this._distance, r = i.add(new e.Point(n, o)), s = this.screenPointToPoint(r), t.push(s), t)
        }, s.prototype.setPoint = function(t, e, i) {
            l.prototype.setPoint.call(this, t, e, i), this.points().length > 1 && 1 === t && this._calculateAngle()
        }, s.prototype.restoreData = function(t) {
            this._angle = t.angle, this._distance = t.distance
        }, s.prototype.state = function(t) {
            var e = l.prototype.state.call(this, t);
            return e.angle = this._angle, e.distance = this._distance, e
        }, s.prototype.cloneData = function(t) {
            this._angle = t._angle, this._distance = t._distance
        }, s.prototype.canHasAlert = function() {
            return !0
        }, s.prototype._getAlertPlots = function() {
            return [this._linePointsToAlertPlot(this._points, null, this.properties().extendLeft.value(), this.properties().extendRight.value())]
        }, t.exports = s
    }).call(e, i(40), i(55))
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(t, e) {
            var i = e || new d("linetoolarrowmark");
            l.call(this, t, new h(this, t, this.image, this.width, this.height, this.offsetX, this.offsetY), i)
        }

        function o(t, e) {
            this._constructor = "LineToolArrowMarkLeft", n.call(this, t, e), this._textPaneView = new c(this, t, 22, -3, "middle", "left"), this._textPaneView._noSelection = !0
        }

        function r(t, e) {
            this._constructor = "LineToolArrowMarkUp", n.call(this, t, e), this._textPaneView = new c(this, t, 0, 18, "top", "center"), this._textPaneView._noSelection = !0
        }

        function s(t, e) {
            this._constructor = "LineToolArrowMarkRight", n.call(this, t, e), this._textPaneView = new c(this, t, -22, -3, "middle", "right"), this._textPaneView._noSelection = !0
        }

        function a(t, e) {
            this._constructor = "LineToolArrowMarkDown", n.call(this, t, e), this._textPaneView = new c(this, t, 0, -23, "bottom", "center"), this._textPaneView._noSelection = !0
        }
        var l = i(77).LineDataSource,
            c = i(116).TextPaneView,
            h = i(237),
            d = i(81).DefaultProperty;
        inherit(n, l), n.prototype.width = 21, n.prototype.height = 21, n.prototype.offsetX = 0, n.prototype.offsetY = 0, n.prototype.paneViews = function(t) {
            var e = l.prototype.paneViews.call(this, t);
            return null !== e && this._textPaneView && e.push(this._textPaneView), e
        }, n.prototype.pointsCount = function() {
            return 1
        }, n.prototype.title = function() {
            return "Arrow Mark"
        }, inherit(o, n), o.prototype.image = new Image, o.prototype.image.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAB50lEQVR4AWMgETAKKAgIAGkQ5mCgAmCWdtTWV4yxvgFkWwKxOKUGssr5Gccrx9t+Vk6w+w/kxwKxIrmGMTKIivIohFvONKsI+e/cl/ofamgGECuTYyCTqJ2mqlK01Vnr+uj/HjNy/1v1J8AMzSTHUBYZP6MgpTjb97bNsf9dpmf9N++J/W/UEQEztAiIbUEGo2EpIObE8C4oVuVDzLuBmv869aT8t5+c+t+0K/q/YXs4GGsWeIAMRscwy/yhBiO8K2ijJKcYZXXYuj7qv/u0nP/W/Yn/jTsjQYYRwliDhUXKy8BVKdbmuW1T7H+3Gdn/LXrjQN4FaSDLUBa5MItyoOAvp67k/45T0pC9S56hSrHWhY4tif9D5pUDXZjz36w7Blkx+S5VDLNoBUWMY3fKfwdExMAw+WEq7Wvkoxhn+waUhFwRSYhcQxGxL26jpqQYbX3CBpjY3aeDYj+BothHpFNxcW75cIvJpmXB/516Uv/bT0r5b9IVRUY6xQSssr6GkcAc9dGuNe6/y7RMMnMUJmCWcNTSBgbHZeuG6P+eM/P+W/VRlPcRwSGoJMgvH265yKIq/L9LfzqKoZSXp0Em6cDy9BvU0Dhyy1PM4PAwMFWKs7kFZFsBsQQDlQAjr4a0MJAWxFdHAQAcI3sGHsO1dgAAAABJRU5ErkJggg==",
            o.prototype.offsetX = 1, o.prototype.offsetY = -10, o.prototype.title = function() {
            return "Arrow Mark Left"
        }, inherit(r, n), r.prototype.image = new Image, r.prototype.image.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAACBklEQVR4AWMgErAoxVoXgmgGKgEWxTCLVseWxP9yYRbl1DCYSdrXyEc5we5vyLzy/0D6l5SXgStInFwDGcVt1JQU42zfOHan/HebkfPfqSv5v1KszXNBGyU5kDzpRoqLcytGW5+wbY797zA59b9Zd8x/xylp/22bYv8rRlkdBqrgINVIVvlwi8k29dH/Xadn/Tftiv5v2B4Opt1mZP+3ro/6Lx9i3k1K+DLL+hpGmpYF/3efnvPfvCcWZCAcW/TG/XeflvMfFM4yfkZBxIQvo4SjlrZSnO1Hp57U/9b9Cf+NOiKQDQXxgeKJ/516Uv4D1b0XtdNUxRu+gkqC/MBwvGzXGvffflLKf+POSISBCAwWtweGMyi8laKtzjKIivLgCUfLRdYN0f9dpmX+N+mKghiCieHh6wIMb2tguCuEW84E6ccIR7kgk3SLqvD/njPzYOFICIPVeczI/W9WEfJfzs84HmQOIhw9DEyV422/ufSn/7fqg4cjIQxWZwUMd+e+1P9A/Z+lHbX1weHLqyEtrBRncwsYm/+RsWaBBz4DwfLoehRjrG8IKAgIgOMHiK2AOA6IM6G4CKgIr6EgeZA6qPoMII4FYksgFmCA5gwJIFYEYmUotiXSUFuYHqh+cXw5TZlIQ5WxaR4mhuLBZBkqBcT+oJjFg/3B6kgAnFANyniwFEQdJgAAOuN7Bp7MBuYAAAAASUVORK5CYII=", r.prototype.offsetX = -9, r.prototype.offsetY = 0, r.prototype.title = function() {
            return "Arrow Mark Up"
        }, inherit(s, n), s.prototype.image = new Image, s.prototype.image.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAB60lEQVR4AWPAAziAWJBXQ1oYSDMyUAlIALGVUpzNLQkPA1Mgm5kahioCcZxygt1/5Xjbb3JBJulAPiulhioDcSbIUJf+9P8WVeH/5cMtFwkqCfKDgoNiQ636Ev57zsz7b90Q/V8x2vqyhKOWNqHg4ARiKZAhaNgWiItAhhp1RPw374n97zIt879da9x/pTjbj7K+hpE4gwNqoD9IMzasWeDx37A9HIxNuqL+209K+e/Uk/rftCwYGBwWkxnExbkRwYHpTZBGgti4M/K/dX/Cf/fpOf9t6sHBcULcRk0JaAYT6YYiMDw4XKdn/bdtjv2vGGf7RtrXyAdoDguZhiKwaVf0f4fJqf8du1NAQfVXMcyiFWQwmYYisFl3zH+3GTn/Q+aV/3dsSfyvFGtdSLFLHaek/XfqSga59JdcmEU5yKVkh6lFbxzQhdn/bZtiga6zeS7lZeAKMpCC2E/87z4t5791fdR/xSirw4I2SnKg2CcxnSK8aw+MGKceSMTIh5h3Q0szRvJzFCQJgXLUexk/oyCQd8nP+8DE7jEjF+jd6P9K0VZnRe00VWHeJcfQDJChzn2p/80qQv4rhFvOZBAV5QF5l5LyNBZann6W8zOOp0Z5Kg7Eloox1jekHbX1qVLyQ2NVQEBBQIBU7wIAOFZ7BmG7RzYAAAAASUVORK5CYII=", s.prototype.offsetX = -19, s.prototype.offsetY = -10, s.prototype.title = function() {
            return "Arrow Mark Right"
        }, inherit(a, n), a.prototype.image = new Image, a.prototype.image.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAB/UlEQVR4AWPAATj3Wij8J4RB6hhIAFIgTS9a8nBhmKFSpBiqDNJ0P80PF4YZqkyyobfD7HDh4WJolaKY+G5zhXvoMXva2xifoWB5dD07zeTvFKvxioDMFY6RFUgEGvzzQVk8OGafVib9v5fkhc9QkDxIHVj9vaKY/7vM5b+HS/JFA80TAhnKA8TGZSoiS057GYFiFqzhTpQTPkNB8iB1YPUnPQz+5ykKzQGaYwjE3CBDmUCuBWKHabqSZ0656oI0EY1B6idoSx4F6reDupIJFrTMQCwtxsYcvNZY5uU5T0OiDDwLdOFKI9knvMzM/kD9kmBz0AAbEKs6iHAX7zSX/3nF3xyvgZd8Tf9vM5P/ZiXAmQdNBazYEgIjEHOBwiVHXmjWcSctnAbeDLH5f8xR83+SjNBEoHo9sD4owGWwIBDb9mtJHMIVviDxDg3x3UB11kDMD9ZHADCDwkeAmdlvhZHMI2C4oRh4xl3//1IDmbvszAxeQHXiUPWEATR8lE0EubJB4QYMP7CBF31M/m82k/usy8uRCpRXAKsjEXCCwiteVqD/qIPG/+tBVv/3WCj8C5Pi7wCKawMxBwMZgBEaXlbtGuI7T7ro/G9QFdsI5JsDMR/+cCQcvuLsLAzubRoSa4FsJyAWBSdwsgEifKVBXoYmcBYGagCoQZzEGggAoyq6zKXuV5gAAAAASUVORK5CYII=", a.prototype.offsetX = -9, a.prototype.offsetY = -18, a.prototype.title = function() {
            return "Arrow Mark Down"
        }, s.prototype.version = o.prototype.version = a.prototype.version = r.prototype.version = 2, a.prototype.migrateVersion = function(e) {
            1 === e && (this.version = 1, this._paneViews[0]._offsetX = -10, this._paneViews[0]._offsetY = 0, this._paneViews[0].setAnchors(new t.Point(0, 21)), this._textPaneView._offsetX = 0, this._textPaneView._offsetY = -4)
        }, r.prototype.migrateVersion = function(e) {
            1 === e && (this.version = 1, this._paneViews[0]._offsetX = -10, this._paneViews[0]._offsetY = 0, this._paneViews[0].setAnchors(new t.Point(0, 0)), this._textPaneView._offsetX = 0, this._textPaneView._offsetY = 18)
        }, s.prototype.migrateVersion = function(e) {
            1 === e && (this.version = 1, this._paneViews[0]._offsetX = 0, this._paneViews[0]._offsetY = 0, this._paneViews[0].setAnchors(new t.Point(0, 0)), this._textPaneView._offsetX = 0, this._textPaneView._offsetY = 10)
        }, o.prototype.migrateVersion = function(e) {
            1 === e && (this.version = 1, this._paneViews[0]._offsetX = 0, this._paneViews[0]._offsetY = 0, this._paneViews[0].setAnchors(new t.Point(0, 0)), this._textPaneView._offsetX = 21, this._textPaneView._offsetY = 10)
        }, e.LineToolArrowMark = n, e.LineToolArrowMarkLeft = o, e.LineToolArrowMarkRight = s, e.LineToolArrowMarkUp = r, e.LineToolArrowMarkDown = a
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t) {
            this._data = t
        }

        function o(t, e, i, n, o, s, a) {
            r.call(this, t, e), this._image = i, this._offsetX = s || 0, this._offsetY = a || 0, this._width = n, this._height = o, this._invalidated = !0
        }
        var r = i(115),
            s = i(67),
            a = i(66).SelectionRenderer,
            l = i(71);
        n.prototype.draw = function(t) {
            var e, i;
            0 !== this._data.points.length && (e = this._data.points[0].x + this._data.offsetX, i = this._data.points[0].y + this._data.offsetY, t.translate(-.5, -.5), t.drawImage(this._data.image, e, i, this._data.width, this._data.height))
        }, n.prototype.hitTest = function(t) {
            if (0 === this._data.points.length) return null;
            var i = this._data.points[0].clone();
            return this._data.offsetX && (i.x += this._data.offsetX), this._data.offsetY && (i.y += this._data.offsetY), e.pointInRect(t, i, i.add(new e.Point(this._data.width, this._data.height))) ? new s(s.MOVEPOINT) : null
        }, inherit(o, r), o.prototype.setAnchors = function(t) {
            this._anchorsOffset = t
        }, o.prototype.renderer = function() {
            var t, e, i, o;
            if (this._invalidated && this.updateImpl(), t = {}, t.points = this._points, t.color = this._source.properties().color.value(), t.image = this._image, t.offsetX = this._offsetX, t.offsetY = this._offsetY, t.width = this._width, t.height = this._height, this.isAnchorsRequired() && 1 === t.points.length) {
                if (e = new l, e.append(new n(t)), this._anchorsOffset) {
                    for (i = [], o = 0; o < t.points.length; o++) i.push(t.points[o].clone().add(this._anchorsOffset));
                    e.append(new a({
                        points: i
                    }))
                } else e.append(new a({
                    points: t.points
                }));
                return e
            }
            return new n(t)
        }, o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.updateImpl = function() {
            r.prototype.update.call(this), this._invalidated = !1
        }, t.exports = o
    }).call(e, i(40))
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        r.call(this, t, e), this._invalidated = !0
    }

    function o(t, e) {
        this._constructor = "LineToolPitchfan";
        var i = e || this.createPropertiesObject("linetoolpitchfan");
        s.call(this, t, new n(this, t), i)
    }
    var r = i(115),
        s = i(77).LineDataSource,
        a = i(149),
        l = i(239).ChannelRenderer,
        c = i(153).TrendLineRenderer,
        h = i(67),
        d = i(71);
    inherit(n, r), n.prototype.update = function() {
        this._invalidated = !0
    }, n.prototype.updateImpl = function() {
        r.prototype.update.call(this), 0 !== this._floatPoints.length && (3 === this._floatPoints.length ? (this._medianPoint = this._floatPoints[1].add(this._floatPoints[2]).scaled(.5), this._medianPoint.data = 3) : 2 === this._floatPoints.length ? (this._medianPoint = this._floatPoints[1], this._medianPoint.data = 3) : (this._medianPoint = this._floatPoints[0], this._medianPoint.data = 3))
    }, n.prototype.renderer = function() {
        var t, e, i, n, o, r, a, u, p, f, _, g, m, v, y, w;
        if (this._invalidated && (this.updateImpl(), this._invalidated = !1), t = new d, this._floatPoints.length < 2) return t;
        if (!this._medianPoint) return t;
        if (e = {
                points: [this._floatPoints[0], this._medianPoint],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: this._source.properties().median.color.value(),
                linewidth: this._source.properties().median.linewidth.value(),
                linestyle: this._source.properties().median.linestyle.value(),
                extendleft: !1,
                extendright: !0,
                leftend: s.LINEEND_NORMAL,
                rightend: s.LINEEND_NORMAL
            }, t.append(new c(e)), this._floatPoints.length < 3) return this.addAnchors(t), t;
        for (i = {
            points: [this._floatPoints[1], this._floatPoints[2]],
            width: this._model.timeScale().width(),
            height: this._source.priceScale().height(),
            color: this._source.properties().median.color.value(),
            linewidth: this._source.properties().median.linewidth.value(),
            linestyle: this._source.properties().median.linestyle.value(),
            extendleft: !1,
            extendright: !1,
            leftend: s.LINEEND_NORMAL,
            rightend: s.LINEEND_NORMAL
        }, t.append(new c(i)), n = 0, o = this._floatPoints[2].substract(this._floatPoints[1]).scaled(.5), r = this._source.properties().fillBackground.value(), a = this._source.properties().transparency.value(), u = 0; 8 >= u; u++) p = "level" + u, f = this._source.properties()[p], f.visible.value() && (_ = this._medianPoint.addScaled(o, f.coeff.value()), g = this._medianPoint.addScaled(o, -f.coeff.value()), r && (m = {}, m.width = this._model.timeScale().width(), m.p1 = this._floatPoints[0], m.p2 = _, m.p3 = this._floatPoints[0], m.p4 = this._medianPoint.addScaled(o, n), m.color = f.color.value(), m.transparency = a, m.hittestOnBackground = !0, t.append(new l(m)), m = {}, m.width = this._model.timeScale().width(), m.p1 = this._floatPoints[0], m.p2 = g, m.p3 = this._floatPoints[0], m.p4 = this._medianPoint.addScaled(o, -n), m.color = f.color.value(), m.transparency = a, m.hittestOnBackground = !0, t.append(new l(m))), n = f.coeff.value(), v = {
            points: [this._floatPoints[0], _],
            width: this._model.timeScale().width(),
            height: this._source.priceScale().height(),
            color: f.color.value(),
            linewidth: f.linewidth.value(),
            linestyle: f.linestyle.value(),
            extendleft: !1,
            extendright: !0,
            leftend: s.LINEEND_NORMAL,
            rightend: s.LINEEND_NORMAL
        }, y = new h(h.MOVEPOINT, null, u), t.append(new c(v, y)), w = {
            points: [this._floatPoints[0], g],
            width: this._model.timeScale().width(),
            height: this._source.priceScale().height(),
            color: f.color.value(),
            linewidth: f.linewidth.value(),
            linestyle: f.linestyle.value(),
            extendleft: !1,
            extendright: !0,
            leftend: s.LINEEND_NORMAL,
            rightend: s.LINEEND_NORMAL
        }, y = new h(h.MOVEPOINT, null, u), t.append(new c(w, y)));
        return this.addAnchors(t), t
    }, inherit(o, s), o.prototype.pointsCount = function() {
        return 3
    }, o.prototype.title = function() {
        return "Pitchfan"
    }, o.prototype.processErase = function(t, e) {
        var i = "level" + e,
            n = this.properties()[i].visible;
        t.setProperty(n, !1, "Erase level line")
    }, o.prototype.createPropertiesObject = function(t, e, i) {
        return new a(t, e, i, {
            range: [0, 8]
        })
    }, t.exports = o
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(t) {
            this._data = t
        }

        function o(t, e) {
            c.call(this, t, e), this._invalidated = !0
        }

        function r(t, e) {
            o.call(this, t, e), this._invalidated = !0
        }

        function s(t, e) {
            r.call(this, t, e), this._invalidated = !0
        }

        function a(t, e) {
            o.call(this, t, e), this._invalidated = !0
        }

        function l(t, e) {
            this._constructor = "LineToolPitchfork";
            var i = e || this.createPropertiesObject("linetoolpitchfork");
            h.call(this, t, new o(this, t), i), this._properties.style.listeners().subscribe(this, l.prototype._recreatePaneView), this._recreatePaneView()
        }
        var c = i(115),
            h = i(77).LineDataSource,
            d = i(149),
            u = i(153).TrendLineRenderer,
            p = i(163).Action,
            f = i(67),
            _ = i(71);
        n.prototype.extendPoints = function(e, i, n) {
            var o = new t.Point(0, -5e3),
                r = new t.Point(n, 5e3),
                s = i.substract(e),
                a = t.intersectRayWithRect(i, i.add(s), o, r);
            return a && (i = a), !t.pointInRect(e, o, r) && t.pointInRect(i, o, r) && (a = t.intersectRayWithRect(i, e, o, r), a && (e = a)), !t.pointInRect(i, o, r) && t.pointInRect(e, o, r) && (a = t.intersectRayWithRect(e, i, o, r), a && (i = a)), [e, i]
        }, n.prototype.draw = function(t) {
            var e = t.canvas.width,
                i = this.extendPoints(this._data.p1, this._data.p2, e),
                n = this.extendPoints(this._data.p3, this._data.p4, e);
            t.beginPath(), t.moveTo(i[0].x, i[0].y), t.lineTo(i[1].x, i[1].y), i[1].x < n[1].x && t.lineTo(n[1].x, i[1].y), t.lineTo(n[1].x, n[1].y), t.lineTo(n[0].x, n[0].y), t.lineTo(i[0].x, i[0].y), t.fillStyle = TradingView.generateColor(this._data.color, this._data.transparency, !0), t.fill()
        }, n.prototype.hitTest = function(e) {
            var i, n, o, r;
            return this._data.hittestOnBackground ? (i = this._data.width, n = this.extendPoints(this._data.p1, this._data.p2, i), o = this.extendPoints(this._data.p3, this._data.p4, i), r = [new t.Point(n[0].x, n[0].y), new t.Point(n[1].x, n[1].y)], n[1].x < o[1].x && r.push(new t.Point(o[1].x, n[1].y)), r.push(new t.Point(o[1].x, o[1].y)), r.push(new t.Point(o[0].x, o[0].y)), r.push(new t.Point(n[0].x, n[0].y)), t.isInPolygon(r, e) ? new f(f.MOVEPOINT_BACKGROUND) : null) : null
        }, inherit(o, c), o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.updateImpl = function() {
            c.prototype.update.call(this), 0 !== this._floatPoints.length && (3 === this._floatPoints.length ? (this._medianPoint = this._floatPoints[1].add(this._floatPoints[2]).scaled(.5), this._medianPoint.data = 3) : 2 === this._floatPoints.length ? (this._medianPoint = this._floatPoints[1], this._medianPoint.data = 3) : (this._medianPoint = this._floatPoints[0], this._medianPoint.data = 3))
        }, o.prototype.renderer = function() {
            var t, e, i, o, r, s, a, l, c, d, p, g, m, v, y, w, b, S, T;
            if (this._invalidated && (this.updateImpl(), this._invalidated = !1), t = new _, this._floatPoints.length < 2) return t;
            if (!this._medianPoint) return t;
            if (e = {
                    points: [this._floatPoints[0], this._medianPoint],
                    width: this._model.timeScale().width(),
                    height: this._source.priceScale().height(),
                    color: this._source.properties().median.color.value(),
                    linewidth: this._source.properties().median.linewidth.value(),
                    linestyle: this._source.properties().median.linestyle.value(),
                    extendleft: !1,
                    extendright: !0,
                    leftend: h.LINEEND_NORMAL,
                    rightend: h.LINEEND_NORMAL
                }, t.append(new u(e)), this._floatPoints.length < 3) return this.addAnchors(t), t;
            for (i = {
                points: [this._floatPoints[1], this._floatPoints[2]],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: this._source.properties().median.color.value(),
                linewidth: this._source.properties().median.linewidth.value(),
                linestyle: this._source.properties().median.linestyle.value(),
                extendleft: !1,
                extendright: !1,
                leftend: h.LINEEND_NORMAL,
                rightend: h.LINEEND_NORMAL
            }, t.append(new u(i)), o = this._floatPoints[2].substract(this._floatPoints[1]).scaled(.5), r = this._medianPoint.substract(this._floatPoints[0]), s = 0, a = this._source.properties().fillBackground.value(), l = this._source.properties().transparency.value(), c = 0; 8 >= c; c++) d = "level" + c, p = this._source.properties()[d], p.visible.value() && (g = this._medianPoint.addScaled(o, p.coeff.value()), m = g.add(r), v = this._medianPoint.addScaled(o, -p.coeff.value()), y = v.add(r), a && (w = {}, w.width = this._model.timeScale().width(), w.p1 = g, w.p2 = m, w.p3 = this._medianPoint.addScaled(o, s), w.p4 = w.p3.add(r), w.color = p.color.value(), w.width = this._model.timeScale().width(), w.transparency = l, w.hittestOnBackground = !0, t.append(new n(w)), w = {}, w.width = this._model.timeScale().width(), w.p1 = v, w.p2 = y, w.p3 = this._medianPoint.addScaled(o, -s), w.p4 = w.p3.add(r), w.color = p.color.value(), w.width = this._model.timeScale().width(), w.transparency = l, w.hittestOnBackground = !0, t.append(new n(w))), s = p.coeff.value(), b = {
                points: [g, m],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: p.color.value(),
                linewidth: p.linewidth.value(),
                linestyle: p.linestyle.value(),
                extendleft: !1,
                extendright: !0,
                leftend: h.LINEEND_NORMAL,
                rightend: h.LINEEND_NORMAL
            }, S = new f(f.MOVEPOINT, null, c), t.append(new u(b, S)), T = {
                points: [v, y],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: p.color.value(),
                linewidth: p.linewidth.value(),
                linestyle: p.linestyle.value(),
                extendleft: !1,
                extendright: !0,
                leftend: h.LINEEND_NORMAL,
                rightend: h.LINEEND_NORMAL
            }, S = new f(f.MOVEPOINT, null, c), t.append(new u(T, S)));
            return this.addAnchors(t), t
        }, inherit(r, o), r.prototype.renderer = function() {
            var t, e, i, o, r, s, a, l, c, d, p, g, m, v, y, w, b, S, T;
            if (this._invalidated && (this.updateImpl(), this._invalidated = !1), t = new _, this._floatPoints.length < 2) return t;
            if (e = {
                    points: [this._floatPoints[0], this._floatPoints[1]],
                    width: this._model.timeScale().width(),
                    height: this._source.priceScale().height(),
                    color: this._source.properties().median.color.value(),
                    linewidth: this._source.properties().median.linewidth.value(),
                    linestyle: this._source.properties().median.linestyle.value(),
                    extendleft: !1,
                    extendright: !1,
                    leftend: h.LINEEND_NORMAL,
                    rightend: h.LINEEND_NORMAL
                }, t.append(new u(e)), !this._medianPoint || !this._modifiedBase) return this.addAnchors(t), t;
            if (i = {
                    points: [this._modifiedBase, this._medianPoint],
                    width: this._model.timeScale().width(),
                    height: this._source.priceScale().height(),
                    color: this._source.properties().median.color.value(),
                    linewidth: this._source.properties().median.linewidth.value(),
                    linestyle: this._source.properties().median.linestyle.value(),
                    extendleft: !1,
                    extendright: !0,
                    leftend: h.LINEEND_NORMAL,
                    rightend: h.LINEEND_NORMAL
                }, t.append(new u(i)), this._floatPoints.length < 3) return this.addAnchors(t), t;
            for (o = {
                points: [this._floatPoints[1], this._floatPoints[2]],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: this._source.properties().median.color.value(),
                linewidth: this._source.properties().median.linewidth.value(),
                linestyle: this._source.properties().median.linestyle.value(),
                extendleft: !1,
                extendright: !1,
                leftend: h.LINEEND_NORMAL,
                rightend: h.LINEEND_NORMAL
            }, t.append(new u(o)), r = this._floatPoints[2].substract(this._floatPoints[1]).scaled(.5), s = this._medianPoint.substract(this._modifiedBase), a = 0, l = this._source.properties().fillBackground.value(), c = this._source.properties().transparency.value(), d = 0; 8 >= d; d++) p = "level" + d, g = this._source.properties()[p], g.visible.value() && (m = this._medianPoint.addScaled(r, g.coeff.value()), v = m.add(s), y = this._medianPoint.addScaled(r, -g.coeff.value()), w = y.add(s), l && (e = {}, e.p1 = m, e.p2 = v, e.p3 = this._medianPoint.addScaled(r, a), e.p4 = e.p3.add(s), e.color = g.color.value(), e.width = this._model.timeScale().width(), e.transparency = c, e.hittestOnBackground = !0, t.append(new n(e)), e = {}, e.p1 = y, e.p2 = w, e.p3 = this._medianPoint.addScaled(r, -a), e.p4 = e.p3.add(s), e.color = g.color.value(), e.width = this._model.timeScale().width(), e.transparency = c, e.hittestOnBackground = !0, t.append(new n(e))), a = g.coeff.value(), b = {
                points: [m, v],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: g.color.value(),
                linewidth: g.linewidth.value(),
                linestyle: g.linestyle.value(),
                extendleft: !1,
                extendright: !0,
                leftend: h.LINEEND_NORMAL,
                rightend: h.LINEEND_NORMAL
            }, S = new f(f.MOVEPOINT, null, d), t.append(new u(b, S)), T = {
                points: [y, w],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: g.color.value(),
                linewidth: g.linewidth.value(),
                linestyle: g.linestyle.value(),
                extendleft: !1,
                extendright: !0,
                leftend: h.LINEEND_NORMAL,
                rightend: h.LINEEND_NORMAL
            }, S = new f(f.MOVEPOINT, null, d), t.append(new u(T, S)));
            return this.addAnchors(t), t
        }, r.prototype.update = function() {
            this._invalidated = !0
        }, r.prototype.updateImpl = function() {
            o.prototype.updateImpl.call(this), this._floatPoints.length > 1 && (this._modifiedBase = this._floatPoints[0].add(this._floatPoints[1]).scaled(.5))
        }, inherit(s, r), s.prototype.update = function() {
            this._invalidated = !0
        }, s.prototype.updateImpl = function() {
            var e, i, n;
            o.prototype.updateImpl.call(this), this._floatPoints.length > 2 && (e = this._floatPoints[0].x, i = .5 * (this._floatPoints[0].y + this._floatPoints[1].y), n = new t.Point(e, i), this._modifiedBase = n)
        }, inherit(a, o), a.prototype.update = function() {
            this._invalidated = !0
        }, a.prototype.updateImpl = function() {
            o.prototype.updateImpl.call(this), this._floatPoints.length > 1 && (this._modifiedBase = this._floatPoints[0].add(this._floatPoints[1]).scaled(.5))
        }, a.prototype.renderer = function() {
            var t, e, i, o, r, s, a, l, c, d, p, g, m, v, y, w, b, S, T, x;
            if (this._invalidated && (this.updateImpl(), this._invalidated = !1), t = new _, this._floatPoints.length < 2) return t;
            if (!this._medianPoint || !this._modifiedBase) return this.addAnchors(t), t;
            if (3 === this._floatPoints.length && (e = {
                    points: [this._modifiedBase, this._floatPoints[2]],
                    width: this._model.timeScale().width(),
                    height: this._source.priceScale().height(),
                    color: this._source.properties().median.color.value(),
                    linewidth: this._source.properties().median.linewidth.value(),
                    linestyle: this._source.properties().median.linestyle.value(),
                    extendleft: !1,
                    extendright: !1,
                    leftend: h.LINEEND_NORMAL,
                    rightend: h.LINEEND_NORMAL
                }, t.append(new u(e))), i = {
                    points: [this._floatPoints[0], this._floatPoints[1]],
                    width: this._model.timeScale().width(),
                    height: this._source.priceScale().height(),
                    color: this._source.properties().median.color.value(),
                    linewidth: this._source.properties().median.linewidth.value(),
                    linestyle: this._source.properties().median.linestyle.value(),
                    extendleft: !1,
                    extendright: !1,
                    leftend: h.LINEEND_NORMAL,
                    rightend: h.LINEEND_NORMAL
                }, t.append(new u(i)), this._floatPoints.length < 3) return this.addAnchors(t), t;
            for (o = {
                points: [this._floatPoints[1], this._floatPoints[2]],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: this._source.properties().median.color.value(),
                linewidth: this._source.properties().median.linewidth.value(),
                linestyle: this._source.properties().median.linestyle.value(),
                extendleft: !1,
                extendright: !1,
                leftend: h.LINEEND_NORMAL,
                rightend: h.LINEEND_NORMAL
            }, t.append(new u(o)), r = this._floatPoints[2].substract(this._floatPoints[1]).scaled(.5), s = this._floatPoints[2].substract(this._modifiedBase), a = 0, l = this._source.properties().fillBackground.value(), c = this._source.properties().transparency.value(), d = {
                points: [this._medianPoint, this._medianPoint.add(s)],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: this._source.properties().median.color.value(),
                linewidth: this._source.properties().median.linewidth.value(),
                linestyle: this._source.properties().median.linestyle.value(),
                extendleft: !1,
                extendright: !0,
                leftend: h.LINEEND_NORMAL,
                rightend: h.LINEEND_NORMAL
            }, t.append(new u(d)), p = 0; 8 >= p; p++) g = "level" + p, m = this._source.properties()[g], m.visible.value() && (v = this._medianPoint.addScaled(r, m.coeff.value()), y = v.add(s), w = this._medianPoint.addScaled(r, -m.coeff.value()), b = w.add(s), l && (i = {}, i.p1 = v, i.p2 = y, i.p3 = this._medianPoint.addScaled(r, a), i.p4 = i.p3.add(s), i.color = m.color.value(), i.width = this._model.timeScale().width(), i.transparency = c, i.hittestOnBackground = !0, t.append(new n(i)), i = {}, i.p1 = w, i.p2 = b, i.p3 = this._medianPoint.addScaled(r, -a), i.p4 = i.p3.add(s), i.color = m.color.value(), i.width = this._model.timeScale().width(), i.transparency = c, i.hittestOnBackground = !0, t.append(new n(i))), a = m.coeff.value(), S = {
                points: [v, y],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: m.color.value(),
                linewidth: m.linewidth.value(),
                linestyle: m.linestyle.value(),
                extendleft: !1,
                extendright: !0,
                leftend: h.LINEEND_NORMAL,
                rightend: h.LINEEND_NORMAL
            }, T = new f(f.MOVEPOINT, null, p), t.append(new u(S, T)), x = {
                points: [w, b],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: m.color.value(),
                linewidth: m.linewidth.value(),
                linestyle: m.linestyle.value(),
                extendleft: !1,
                extendright: !0,
                leftend: h.LINEEND_NORMAL,
                rightend: h.LINEEND_NORMAL
            }, T = new f(f.MOVEPOINT, null, p), t.append(new u(x, T)));
            return this.addAnchors(t), t
        }, inherit(l, h), l.STYLE_ORIGINAL = 0, l.STYLE_SCHIFF = 1, l.STYLE_INSIDE = 2, l.STYLE_SCHIFF2 = 3, l.prototype.additionalActions = function() {
            var t, e, i = [],
                n = ["Original", "Modified Schiff", "Inside", "Schiff"];
            for (t = 0; 4 > t; t++) e = new p({
                checked: this.properties().style.value() === t,
                checkable: !0,
                text: $.t(n[t]),
                callbackContext: {
                    target: this,
                    value: t
                }
            }), e.callbacks().subscribe(null, function(t) {
                var e = t.callbackContext(),
                    i = e.target,
                    n = e.value;
                i.properties().style.setValue(n), i.updateAllViews(), i._model.updateSource(i)
            }), i.push(e);
            return [i[0], i[3], i[1], i[2]]
        }, l.prototype._recreatePaneView = function() {
            this._properties.style.value() === l.STYLE_ORIGINAL ? this._paneViews = [new o(this, this._model)] : this._properties.style.value() === l.STYLE_SCHIFF ? this._paneViews = [new r(this, this._model)] : this._properties.style.value() === l.STYLE_SCHIFF2 ? this._paneViews = [new s(this, this._model)] : this._properties.style.value() === l.STYLE_INSIDE && (this._paneViews = [new a(this, this._model)])
        }, l.prototype.pointsCount = function() {
            return 3
        }, l.prototype.title = function() {
            return $.t("Pitchfork")
        }, l.prototype.processErase = function(t, e) {
            var i = "level" + e,
                n = this.properties()[i].visible;
            t.setProperty(n, !1, "Erase level line")
        }, l.prototype.createPropertiesObject = function(t, e, i) {
            return new d(t, e, i, {
                range: [0, 8]
            })
        }, e.ChannelRenderer = n, e.LineToolPitchfork = l
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            r.call(this, t, e), this._rendererCache = {}, this._numericFormatter = new u, this._invalidated = !0
        }

        function o(t, e) {
            this._constructor = "LineToolGannSquare";
            var i = e || this.createPropertiesObject("linetoolgannsquare");
            s.call(this, t, new n(this, t), i)
        }
        var r = i(115),
            s = i(77).LineDataSource,
            a = i(149),
            l = i(116).TextRenderer,
            c = i(151).RectangleTransparencyRenderer,
            h = i(153).TrendLineRenderer,
            d = i(71),
            u = i(83).NumericFormatter;
        inherit(n, r), n.prototype.renderer = function() {
            var t, i, n, o, r, a, u, p, f, _, g, m, v, y, w, b, S, T, x, C, P;
            if (this._invalidated && (this.updateImpl(), this._invalidated = !1), t = new d, this._points.length < 2) return this.addAnchors(t), t;
            for (i = this._points[0], n = this._points[1], o = Math.min(i.x, n.x), r = Math.min(i.y, n.y), a = Math.max(i.x, n.x), u = Math.max(i.y, n.y), p = this._source.properties(), f = this._source.properties().fillHorzBackground.value(), _ = this._source.properties().horzTransparency.value(), g = this._source.properties().fillVertBackground.value(), m = this._source.properties().vertTransparency.value(), v = 0; v < this._hlevels.length; v++) v > 0 && f && (y = this._hlevels[v - 1], i = new e.Point(o, this._hlevels[v].y), n = new e.Point(a, y.y), w = {}, w.points = [i, n], w.color = this._hlevels[v].color, w.linewidth = 0, w.backcolor = this._hlevels[v].color, w.fillBackground = !0, w.transparency = _, t.append(new c(w))), i = new e.Point(o, this._hlevels[v].y), n = new e.Point(a, this._hlevels[v].y), b = {
                points: [i, n],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: this._hlevels[v].color,
                linewidth: p.linewidth.value(),
                linestyle: p.linestyle.value(),
                extendleft: !1,
                extendright: !1,
                leftend: s.LINEEND_NORMAL,
                rightend: s.LINEEND_NORMAL
            }, t.append(new h(b)), p.showLeftLabels.value() && (S = {
                points: [i],
                text: this._numericFormatter.format(this._hlevels[v].coeff),
                color: this._hlevels[v].color,
                vertAlign: "middle",
                horzAlign: "right",
                font: p.font.value(),
                offsetX: -5,
                offsetY: 0,
                fontsize: 12
            }, t.append(new l(S, this._rendererCache))), p.showRightLabels.value() && (T = {
                points: [n],
                text: this._numericFormatter.format(this._hlevels[v].coeff),
                color: this._hlevels[v].color,
                vertAlign: "middle",
                horzAlign: "left",
                font: p.font.value(),
                offsetX: 5,
                offsetY: 0,
                fontsize: 12
            }, t.append(new l(T, this._rendererCache)));
            for (v = 0; v < this._vlevels.length; v++) i = new e.Point(this._vlevels[v].x, r), n = new e.Point(this._vlevels[v].x, u), v > 0 && g && (y = this._vlevels[v - 1], x = new e.Point(y.x, r), w = {}, w.points = [x, n], w.color = this._vlevels[v].color, w.linewidth = 0, w.backcolor = this._vlevels[v].color, w.fillBackground = !0, w.transparency = m, t.append(new c(w))), b = {
                points: [i, n],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: this._vlevels[v].color,
                linewidth: p.linewidth.value(),
                linestyle: p.linestyle.value(),
                extendleft: !1,
                extendright: !1,
                leftend: s.LINEEND_NORMAL,
                rightend: s.LINEEND_NORMAL
            }, t.append(new h(b)), p.showTopLabels.value() && (C = {
                points: [i],
                text: this._numericFormatter.format(this._vlevels[v].coeff),
                color: this._vlevels[v].color,
                vertAlign: "bottom",
                horzAlign: "center",
                font: p.font.value(),
                offsetX: 0,
                offsetY: -5,
                fontsize: 12
            }, t.append(new l(C, this._rendererCache))), p.showBottomLabels.value() && (P = {
                points: [n],
                text: this._numericFormatter.format(this._vlevels[v].coeff),
                color: this._vlevels[v].color,
                vertAlign: "top",
                horzAlign: "center",
                font: p.font.value(),
                offsetX: 0,
                offsetY: 5,
                fontsize: 12
            }, t.append(new l(P, this._rendererCache)));
            return this.addAnchors(t), t
        }, n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype.updateImpl = function() {
            var t, e, i, n, o, s, a, l, c, h, d, u, p, f;
            if (r.prototype.update.call(this), !(this._source.points().length < 2) && this._source.priceScale() && !this._source.priceScale().isEmpty() && !this._model.timeScale().isEmpty()) {
                for (t = this._source.points()[0], e = this._source.points()[1], this._hlevels = [], i = e.price - t.price, this._source.priceScale().isPercent() && (n = this._source.ownerSource().firstValue()), o = 1; 7 >= o; o++) s = "hlevel" + o, a = this._source.properties()[s], a.visible.value() && (l = a.coeff.value(), c = a.color.value(), h = t.price + l * i, this._source.priceScale().isPercent() && (h = this._source.priceScale().priceRange().convertToPercent(h, n)), d = this._source.priceScale().priceToCoordinate(h), this._hlevels.push({
                    coeff: l,
                    color: c,
                    y: d
                }));
                for (this._vlevels = [], u = e.index - t.index, o = 1; 7 >= o; o++) s = "vlevel" + o, a = this._source.properties()[s], a.visible.value() && (l = a.coeff.value(), c = a.color.value(), p = Math.round(t.index + l * u), f = this._model.timeScale().indexToCoordinate(p), this._vlevels.push({
                    coeff: l,
                    color: c,
                    x: f
                }))
            }
        }, inherit(o, s), o.prototype.pointsCount = function() {
            return 2
        }, o.prototype.title = function() {
            return "Gann Box"
        }, o.prototype.createPropertiesObject = function(t, e, i) {
            return new a(t, e, i, {
                range: [1, 7],
                prefixes: ["h", "v"],
                names: ["coeff", "color", "visible"]
            })
        }, t.exports = o
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            r.call(this, t, e), this._rendererCache = {}, this._numericFormatter = new p, this._invalidated = !0
        }

        function o(t, e) {
            this._constructor = "LineToolFibSpeedResistanceFan";
            var i = e || this.createPropertiesObject("linetoolfibspeedresistancefan");
            s.call(this, t, new n(this, t), i)
        }
        var r = i(115),
            s = i(77).LineDataSource,
            a = i(149),
            l = i(239).ChannelRenderer,
            c = i(116).TextRenderer,
            h = i(153).TrendLineRenderer,
            d = i(67),
            u = i(71),
            p = i(83).NumericFormatter;
        inherit(n, r), n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype.updateImpl = function() {
            var t, e, i, n, o, s, a, l, c, h, d, u, p, f;
            if (r.prototype.update.call(this), !(this._source.points().length < 2) && this._source.priceScale() && !this._source.priceScale().isEmpty() && !this._model.timeScale().isEmpty()) {
                for (t = this._source.points()[0], e = this._source.points()[1], this._hlevels = [], i = e.price - t.price, this._source.priceScale().isPercent() && (n = this._source.ownerSource().firstValue()), o = 1; 7 >= o; o++) s = "hlevel" + o, a = this._source.properties()[s], a.visible.value() && (l = a.coeff.value(), c = a.color.value(), h = t.price + l * i, this._source.priceScale().isPercent() && (h = this._source.priceScale().priceRange().convertToPercent(h, n)), d = this._source.priceScale().priceToCoordinate(h, !0), this._hlevels.push({
                    coeff: l,
                    color: c,
                    y: d,
                    index: o
                }));
                for (this._vlevels = [], u = e.index - t.index, o = 1; 7 >= o; o++) s = "vlevel" + o, a = this._source.properties()[s], a.visible.value() && (l = a.coeff.value(), c = a.color.value(), p = Math.round(t.index + l * u), f = this._model.timeScale().indexToCoordinate(p, !0), this._vlevels.push({
                    coeff: l,
                    color: c,
                    x: f,
                    index: o
                }))
            }
        }, n.prototype.renderer = function() {
            var t, i, n, o, r, a, p, f, _, g, m, v, y, w, b, S, T, x, C, P, k, I, E, L;
            if (this._invalidated && (this.updateImpl(), this._invalidated = !1), t = new u, this._floatPoints.length < 2) return t;
            for (i = this._floatPoints[0], n = this._floatPoints[1], o = Math.min(i.x, n.x), r = Math.min(i.y, n.y), a = Math.max(i.x, n.x), p = Math.max(i.y, n.y), f = this._source.properties(), _ = f.grid.color.value(), g = f.grid.linewidth.value(), m = f.grid.linestyle.value(), v = 0; v < this._hlevels.length; v++) i = new e.Point(o, this._hlevels[v].y), n = new e.Point(a, this._hlevels[v].y), f.grid.visible.value() && (y = {
                points: [i, n],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: _,
                linewidth: g,
                linestyle: m,
                extendleft: !1,
                extendright: !1,
                leftend: s.LINEEND_NORMAL,
                rightend: s.LINEEND_NORMAL
            }, t.append(new h(y))), f.showLeftLabels.value() && (w = {
                points: [i],
                text: this._numericFormatter.format(this._hlevels[v].coeff),
                color: this._hlevels[v].color,
                vertAlign: "middle",
                horzAlign: "right",
                font: f.font.value(),
                offsetX: -5,
                offsetY: 0,
                fontsize: 12
            }, t.append(new c(w, this._rendererCache))), f.showRightLabels.value() && (b = {
                points: [n],
                text: this._numericFormatter.format(this._hlevels[v].coeff),
                color: this._hlevels[v].color,
                vertAlign: "middle",
                horzAlign: "left",
                font: f.font.value(),
                offsetX: 5,
                offsetY: 0,
                fontsize: 12
            }, t.append(new c(b, this._rendererCache)));
            for (v = 0; v < this._vlevels.length; v++) i = new e.Point(this._vlevels[v].x, r), n = new e.Point(this._vlevels[v].x, p), f.grid.visible.value() && (y = {
                points: [i, n],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: _,
                linewidth: g,
                linestyle: m,
                extendleft: !1,
                extendright: !1,
                leftend: s.LINEEND_NORMAL,
                rightend: s.LINEEND_NORMAL
            }, t.append(new h(y))), f.showTopLabels.value() && (S = {
                points: [i],
                text: this._numericFormatter.format(this._vlevels[v].coeff),
                color: this._vlevels[v].color,
                vertAlign: "bottom",
                horzAlign: "center",
                font: f.font.value(),
                offsetX: 0,
                offsetY: -5,
                fontsize: 12
            }, t.append(new c(S, this._rendererCache))), f.showBottomLabels.value() && (T = {
                points: [n],
                text: this._numericFormatter.format(this._vlevels[v].coeff),
                color: this._vlevels[v].color,
                vertAlign: "top",
                horzAlign: "center",
                font: f.font.value(),
                offsetX: 0,
                offsetY: 5,
                fontsize: 12
            }, t.append(new c(T, this._rendererCache)));
            for (x = f.fillBackground.value(), C = f.transparency.value(), i = this._floatPoints[0], n = this._floatPoints[1], v = 0; v < this._hlevels.length; v++) P = new e.Point(n.x, this._hlevels[v].y), v > 0 && x && (k = new e.Point(n.x, this._hlevels[v - 1].y), I = {}, I.width = this._model.timeScale().width(), I.p1 = i, I.p2 = P, I.p3 = i, I.p4 = k, I.color = this._hlevels[v].color, I.transparency = C, I.hittestOnBackground = !0, t.append(new l(I))), y = {
                points: [i, P],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: this._hlevels[v].color,
                linewidth: f.linewidth.value(),
                linestyle: f.linestyle.value(),
                extendleft: !1,
                extendright: !0,
                leftend: s.LINEEND_NORMAL,
                rightend: s.LINEEND_NORMAL
            }, E = new d(d.MOVEPOINT, null, {
                type: "h",
                index: this._hlevels[v].index
            }), t.append(new h(y, E));
            for (v = 0; v < this._vlevels.length; v++) L = new e.Point(this._vlevels[v].x, n.y), v > 0 && x && (k = new e.Point(this._vlevels[v - 1].x, n.y), I = {}, I.width = this._model.timeScale().width(), I.p1 = i, I.p2 = L, I.p3 = i, I.p4 = k, I.color = this._vlevels[v].color, I.transparency = C, I.hittestOnBackground = !0, t.append(new l(I))), y = {
                points: [i, L],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: this._vlevels[v].color,
                linewidth: f.linewidth.value(),
                linestyle: f.linestyle.value(),
                extendleft: !1,
                extendright: !0,
                leftend: s.LINEEND_NORMAL,
                rightend: s.LINEEND_NORMAL
            }, E = new d(d.MOVEPOINT, null, {
                type: "v",
                index: this._vlevels[v].index
            }), t.append(new h(y, E));
            return this.addAnchors(t), t
        }, inherit(o, s), o.prototype.pointsCount = function() {
            return 2
        }, o.prototype.title = function() {
            return "Fib Speed Resistance Fan"
        }, o.prototype.processErase = function(t, e) {
            var i = "h" === e.type ? "hlevel" + e.index : "vlevel" + e.index,
                n = this.properties()[i].visible;
            t.setProperty(n, !1, "Erase level line")
        }, o.prototype.createPropertiesObject = function(t, e, i) {
            return new a(t, e, i, {
                range: [1, 7],
                prefixes: ["h", "v"],
                names: ["coeff", "color", "visible"]
            })
        }, t.exports = o
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t) {
            this._data = t
        }

        function o(t, e) {
            l.call(this, t, e), this._rendererCache = {}, this._invalidated = !0
        }

        function r(t, e) {
            this._constructor = "LineToolGannComplex";
            var i = e || this.createPropertiesObject("linetoolganncomplex");
            a.call(this, t, new o(this, t), i)
        }

        function s(t, e, i) {
            c.call(this, t, e, i, {
                names: ["width", "color", "visible"]
            })
        }
        var a = i(77).LineDataSource,
            l = i(115),
            c = i(149),
            h = i(153).TrendLineRenderer,
            d = i(38).isSameType,
            u = i(67),
            p = i(71);
        n.prototype.draw = function(t) {
            var e, i, n, o, r, s;
            t.lineCap = "butt", t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, t.translate(this._data.center.x, this._data.center.y), e = this._data.edge.substract(this._data.center), i = e.y / e.x, n = this._data.point.substract(this._data.center), n.y /= i, o = n.length(), r = this._data.prevPoint.substract(this._data.center), r.y /= i, s = r.length(), t.scale(1, i), this._data.fillBack && (this._data.point.x < this._data.center.x && (o = -o, s = -s), t.beginPath(), t.moveTo(s, 0), t.lineTo(o, 0), t.arcTo(o, o, 0, o, Math.abs(o)), t.lineTo(0, s), t.arcTo(s, s, s, 0, Math.abs(s)), t.fillStyle = TradingView.generateColor(this._data.color, this._data.transparency, !0), t.fill()), t.beginPath(), this._data.point.x > this._data.center.x ? t.arc(0, 0, Math.abs(o), 0, Math.PI / 2, !1) : t.arc(0, 0, Math.abs(o), -Math.PI / 2, -Math.PI, !0), t.scale(1, 1 / i), t.stroke()
        }, n.prototype.hitTest = function(t) {
            var e, i, n, o, r, s = t.substract(this._data.center),
                a = this._data.edge.substract(this._data.center),
                l = a.y / a.x;
            return s.y /= l, e = this._data.point.substract(this._data.center), e.y /= l, i = e.length(), n = s.length(), o = this._data.prevPoint.substract(this._data.center), o.y /= l, r = o.length(), Math.abs(n - i) < 5 && a.x * s.x >= 0 && a.y * s.y >= 0 ? new u(u.MOVEPOINT) : this._data.fillBack && n >= r && i >= n && a.x * s.x >= 0 && a.y * s.y >= 0 ? new u(u.MOVEPOINT_BACKGROUND) : null
        }, inherit(o, l), o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.updateImpl = function() {
            l.prototype.update.call(this), this._source._cornerPoint && this._points.push(this._source.pointToScreenPoint(this._source._cornerPoint)[0])
        }, o.prototype.renderer = function() {
            var t, i, o, r, s, l, c, d, u, f, _, g, m, v, y, w, b, S, T, x, C, P;
            if (this._invalidated && (this.updateImpl(), this._invalidated = !1), t = this._source.properties(), i = new p, this._points.length < 2) return this.addAnchors(i), i;
            for (o = this._points[0], r = 3 === this._points.length ? this._points[2] : this._points[1], s = this._points[1], d = 0; 6 > d; d++) u = t.levels[d], u.visible.value() && (f = d / 5, l = o.x + f * (r.x - o.x), _ = o.y, g = r.y, m = {
                points: [new e.Point(l, _), new e.Point(l, g)],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: u.color.value(),
                linewidth: u.width.value(),
                linestyle: CanvasEx.LINESTYLE_SOLID,
                extendleft: !1,
                extendright: !1,
                leftend: a.LINEEND_NORMAL,
                rightend: a.LINEEND_NORMAL
            }, i.append(new h(m)), c = o.y + f * (r.y - o.y), v = o.x, y = r.x, m = {
                points: [new e.Point(v, c), new e.Point(y, c)],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: u.color.value(),
                linewidth: u.width.value(),
                linestyle: CanvasEx.LINESTYLE_SOLID,
                extendleft: !1,
                extendright: !1,
                leftend: a.LINEEND_NORMAL,
                rightend: a.LINEEND_NORMAL
            }, i.append(new h(m)));
            for (d in t.fanlines._childs) w = t.fanlines[d], w.visible.value() && (b = w.x.value(), S = w.y.value(), b > S ? (l = r.x, f = S / b, c = o.y + f * (r.y - o.y)) : (c = r.y, f = b / S, l = o.x + f * (r.x - o.x)), m = {
                points: [o, new e.Point(l, c)],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: w.color.value(),
                linewidth: w.width.value(),
                linestyle: CanvasEx.LINESTYLE_SOLID,
                extendleft: !1,
                extendright: !1,
                leftend: a.LINEEND_NORMAL,
                rightend: a.LINEEND_NORMAL
            }, i.append(new h(m)));
            T = o;
            for (d in t.arcs._childs) x = t.arcs[d], x.visible.value() && (b = x.x.value() / 5, S = x.y.value() / 5, l = o.x + b * (r.x - o.x), c = o.y + S * (r.y - o.y), C = {
                center: o,
                point: new e.Point(l, c),
                edge: r,
                color: x.color.value(),
                linewidth: x.width.value(),
                fillBack: t.arcsBackground.fillBackground.value(),
                transparency: t.arcsBackground.transparency.value(),
                prevPoint: T
            }, i.append(new n(C)), T = C.point);
            return this.isAnchorsRequired() && (P = [o, s], this._model.lineBeingCreated() === this._source && P.pop(), i.append(this.createLineAnchor({
                points: P
            }))), i
        }, inherit(r, a), r.prototype._recalcSecondPoint = function() {
            var t, e, i, n, o, r = this._model.mainSeries().properties().style.value(),
                s = this._model.mainSeries().interval();
            r === this._currentStyle && s === this._currentInterval || (t = this.pointToScreenPoint(this.points()[0])[0], e = this.pointToScreenPoint(this.points()[2])[0], i = e.substract(t), n = t.add(i.scaled(.2 / Math.sqrt(2))), o = this.screenPointToPoint(n), this._points[1] = o)
        }, r.prototype.pointsCount = function() {
            return 2
        }, r.prototype.title = function() {
            return "Gann Square"
        }, r.prototype._fixThirdPoint = function(t) {
            var i, n, o, r, s, a, l, c;
            this.points().length < 2 || (i = this.pointToScreenPoint(this.points()[0])[0], n = this.pointToScreenPoint(this.points()[1])[0], o = n.substract(i), t ? (r = i.add(o.scaled(5 * Math.sqrt(2))), this._cornerPoint = this.screenPointToPoint(r)) : (s = o.x < 0 ? -1 : 1, a = o.y < 0 ? -1 : 1, l = n.substract(i).length(), r = i.add(new e.Point(5 * l * s, 5 * l * a)), c = this.screenPointToPoint(r), this._cornerPoint = c))
        }, r.prototype.setPoint = function(t, e, i) {
            var n, o, r = a.prototype.setPoint.call(this, t, e, i),
                s = i && i.shift;
            return this._fixThirdPoint(s), this._points[2] = this._cornerPoint, delete this._cornerPoint, n = this._model.mainSeries().properties().style.value(), o = this._model.mainSeries().interval(), this._currentStyle = n, this._currentInterval = o, r
        }, r.prototype.setLastPoint = function(t, e) {
            var i = a.prototype.setLastPoint.call(this, t, e),
                n = e && e.shift;
            return this._fixThirdPoint(n), i
        }, r.prototype.addPoint = function(t, e) {
            var i, n, o, r, s = $.extend({}, t),
                a = this._model.mainSeries().properties().style.value(),
                l = this._model.mainSeries().interval();
            return this._currentStyle = a, this._currentInterval = l, i = this.priceScale(), i.isPercent() && (n = this.ownerSource().firstValue(), s.price = i.priceRange().convertFromPercent(s.price, n)), o = e && e.shift, this._points.push(s), this._lastPoint = null, r = this._points.length === this.pointsCount(), r ? (this._fixThirdPoint(o), this._points.push(this._cornerPoint), delete this._cornerPoint, this.normalizePoints(), this.createServerPoints()) : this._lastPoint = s, r
        }, r.prototype.onData = function(t) {
            a.prototype.onData.call(this, t), this._recalcSecondPoint()
        }, inherit(s, c), s.prototype._iterateLevels = function(t, e) {
            var i, n, o;
            for (i in t.levels)
                if (t.levels[i] && d(t.levels[i], e.typecheck())) {
                    n = e.tpl();
                    for (o in this._map.names) n = e.fill(o, this._map.names[o], t.levels[i], n);
                    t.levels[i] = n
                }
            return t
        }, r.prototype.createPropertiesObject = function(t, e, i) {
            return new s(t, e, i)
        }, t.exports = r
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            s.call(this, t, e), this._rendererCache = {}, this._invalidated = !0
        }

        function o(t, e) {
            this._constructor = "LineToolGannFan";
            var i = e || this.createPropertiesObject("linetoolgannfan");
            r.call(this, t, new n(this, t), i)
        }
        var r = i(77).LineDataSource,
            s = i(115),
            a = i(149),
            l = i(239).ChannelRenderer,
            c = i(116).TextRenderer,
            h = i(153).TrendLineRenderer,
            d = i(67),
            u = i(71);
        inherit(n, s), n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype.updateImpl = function() {
            var t, e, i, n, o, r, a, l, c, h, d, u, p, f;
            if (s.prototype.update.call(this), !(this._source.points().length < 2) && this._source.priceScale() && !this._source.priceScale().isEmpty() && !this._model.timeScale().isEmpty())
                for (t = this._floatPoints[0], e = this._floatPoints[1], this._fans = [], i = e.x - t.x, n = e.y - t.y, a = 1; 9 >= a; a++) l = "level" + a, c = this._source.properties()[l], c.visible.value() && (h = c.coeff1.value(), d = c.coeff2.value(), u = h / d, p = c.color.value(), f = "" + h + "/" + d, h > d ? (o = e.x, r = t.y + n / u) : (o = t.x + i * u, r = e.y), this._fans.push({
                    label: f,
                    color: p,
                    x: o,
                    y: r,
                    linewidth: c.linewidth.value(),
                    linestyle: c.linestyle.value(),
                    index: a
                }))
        }, n.prototype.renderer = function() {
            var t, i, n, o, s, a, p, f, _, g, m, v;
            if (this._invalidated && (this.updateImpl(), this._invalidated = !1), t = new u, this._floatPoints.length < 2) return t;
            for (i = this._floatPoints[0], n = this._source.properties(), o = this._source.properties().fillBackground.value(), s = this._source.properties().transparency.value(), a = 0; a < this._fans.length; a++) p = new e.Point(this._fans[a].x, this._fans[a].y), o && (this._fans[a].index < 4 ? (f = new e.Point(this._fans[a + 1].x, this._fans[a + 1].y), _ = {}, _.width = this._model.timeScale().width(), _.p1 = i, _.p2 = p, _.p3 = i, _.p4 = f, _.color = this._fans[a].color, _.transparency = s, _.hittestOnBackground = !0, t.append(new l(_))) : this._fans[a].index > 4 && a > 0 && (f = new e.Point(this._fans[a - 1].x, this._fans[a - 1].y), _ = {}, _.width = this._model.timeScale().width(), _.p1 = i, _.p2 = p, _.p3 = i, _.p4 = f, _.color = this._fans[a].color, _.transparency = s, _.hittestOnBackground = !0, t.append(new l(_)))), g = {
                points: [i, p],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: this._fans[a].color,
                linewidth: this._fans[a].linewidth,
                linestyle: this._fans[a].linestyle,
                extendleft: !1,
                extendright: !0,
                leftend: r.LINEEND_NORMAL,
                rightend: r.LINEEND_NORMAL
            }, m = new d(d.MOVEPOINT, null, this._fans[a].index), t.append(new h(g, m)), n.showLabels.value() && (v = {
                points: [p],
                text: this._fans[a].label,
                color: this._fans[a].color,
                vertAlign: "middle",
                horzAlign: "left",
                font: n.font.value(),
                offsetX: 0,
                offsetY: -5,
                fontsize: 12
            }, t.append(new c(v, this._rendererCache)));
            return this.addAnchors(t), t
        }, inherit(o, r), o.prototype.pointsCount = function() {
            return 2
        }, o.prototype.title = function() {
            return "Gann Fan"
        }, o.prototype.processErase = function(t, e) {
            var i = "level" + e,
                n = this.properties()[i].visible;
            t.setProperty(n, !1, "Erase level line")
        }, o.prototype.createPropertiesObject = function(t, e, i) {
            return new a(t, e, i, {
                range: [1, 9]
            })
        }, t.exports = o
    }).call(e, i(40))
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        a.call(this, t, e), this._label = null, this._rendererCache = {}, this._invalidated = !0
    }

    function o(t, e) {
        this._constructor = "LineToolDisjointAngle";
        var i = e || new u("linetooldisjointangle");
        l.call(this, t, new n(this, t), i), this.version = o.version
    }
    var r = i(153).TrendLineRenderer,
        s = i(239).ChannelRenderer,
        a = i(115),
        l = i(77).LineDataSource,
        c = i(116).TextRenderer,
        h = i(221),
        d = i(71),
        u = i(81).DefaultProperty;
    inherit(n, a), n.prototype.update = function() {
        this._invalidated = !0
    }, n.prototype.updateImpl = function() {
        var t, e, i, n;
        a.prototype.update.call(this), this._label = null, this._source.points().length < 2 || this._source.priceScale() && (t = this._source.points()[0], e = this._source.points()[1], this._price1 = this._source.priceScale().formatter().format(t.price), this._price2 = this._source.priceScale().formatter().format(e.price), 3 === this._source.points().length && (i = this._source.points()[2], this._price3 = this._source.priceScale().formatter().format(i.price), n = e.price - t.price, this._price4 = this._source.priceScale().formatter().format(i.price + n)))
    }, n.prototype.renderer = function() {
        var t, e, i, n, o, a, l, u, p, f, _, g, m, v, y, w, b, S, T, x, C, P;
        return this._invalidated && (this.updateImpl(), this._invalidated = !1), t = new d, this._points.length < 2 ? t : (e = this._points[0], i = this._points[1], a = this._source.properties(), l = this._model, u = this._source, a = u.properties(), this._points.length >= 3 && (n = this._points[2], n.x = i.x, p = i.y - e.y, o = e.clone(), o.y = n.y + p, o.data = 3, a.fillBackground.value() && (f = {}, _ = l.timeScale().width(), g = a.extendLeft.value(), m = a.extendRight.value(), g || m ? !g && m ? (v = {}, v.width = _, v.p1 = e, v.p2 = i, v.p3 = o, v.p4 = n, v.color = a.backgroundColor.value(), v.transparency = a.transparency.value(), v.hittestOnBackground = TradingView.isMobile.any(), t.append(new s(v))) : g && !m ? (v = {}, v.width = _, v.p1 = i, v.p2 = e, v.p3 = n, v.p4 = o, v.color = a.backgroundColor.value(), v.transparency = a.transparency.value(), v.hittestOnBackground = TradingView.isMobile.any(), t.append(new s(v))) : (y = e.add(i).scaled(.5), w = o.add(n).scaled(.5), b = {}, b.width = _, b.p1 = y, b.p2 = i, b.p3 = w, b.p4 = n, b.color = a.backgroundColor.value(), b.transparency = a.transparency.value(), b.hittestOnBackground = TradingView.isMobile.any(), t.append(new s(b)), S = {}, S.width = _, S.p1 = y, S.p2 = e, S.p3 = w, S.p4 = o, S.color = a.backgroundColor.value(), S.transparency = a.transparency.value(), S.hittestOnBackground = TradingView.isMobile.any(), t.append(new s(S))) : (f.points = [e, i, n, o], f.color = "rgba(0,0,0,0)", f.linewidth = 0, f.linestyle = CanvasEx.LINESTYLE_SOLID, f.filled = !0, f.backcolor = a.backgroundColor.value(), f.fillBackground = !0, f.transparency = a.transparency.value(), t.append(new h(f))))), T = function(t, e) {
            var i = {
                points: [t, e],
                width: l.timeScale().width(),
                height: u.priceScale().height(),
                color: a.linecolor.value(),
                linewidth: a.linewidth.value(),
                linestyle: a.linestyle.value(),
                extendleft: a.extendLeft.value(),
                extendright: a.extendRight.value(),
                leftend: a.leftEnd.value(),
                rightend: a.rightEnd.value()
            };
            return i
        }, t.append(new r(T(e, i))), x = this, C = function(e, i, n, o) {
            var r;
            x._source.properties().showPrices.value() && (r = {
                points: [e],
                text: n,
                color: x._source.properties().textcolor.value(),
                horzAlign: e.x > i.x ? "left" : "right",
                vertAlign: "middle",
                font: x._source.properties().font.value(),
                offsetX: e.x > i.x ? -5 : 5,
                offsetY: -5,
                bold: x._source.properties().bold.value(),
                italic: x._source.properties().italic.value(),
                fontsize: x._source.properties().fontsize.value()
            }, t.append(new c(r, x._rendererCache)), r = {
                points: [i],
                text: o,
                color: x._source.properties().textcolor.value(),
                horzAlign: e.x < i.x ? "left" : "right",
                vertAlign: "middle",
                font: x._source.properties().font.value(),
                offsetX: e.x > i.x ? -5 : 5,
                offsetY: -5,
                bold: x._source.properties().bold.value(),
                italic: x._source.properties().italic.value(),
                fontsize: x._source.properties().fontsize.value()
            }, t.append(new c(r, x._rendererCache)))
        }, t.append(new r(T(e, i))), C(e, i, this._price1, this._price2), 2 === this._points.length ? (this.addAnchors(t), t) : (t.append(new r(T(o, n))), C(n, o, this._price3, this._price4), this.isAnchorsRequired() && (P = [e, i, n, o], this._model.lineBeingCreated() === this._source && P.pop(), t.append(this.createLineAnchor({
            points: P
        }))), !TradingView.printing && this._source.hasAlert.value() && !this._model.readOnly() && e && i && this._source.getAlertIsActive(function(n) {
            t.append(new TradingView.PaneRendererClockIcon({
                point1: e,
                point2: i,
                color: n ? a.linecolor.value() : defaults("chartproperties.alertsProperties.drawingIcon.color")
            }))
        }), t))
    }, inherit(o, l), o.version = 1, o.prototype.pointsCount = function() {
        return 3
    }, o.prototype.title = function() {
        return "Disjoint Angle"
    }, o.prototype.addPoint = function(t, e) {
        return e && e.shift && 2 === this.points().length && this._snapPoint45Degree(t, this.points()[this.points().length - 2]), l.prototype.addPoint.call(this, t)
    }, o.prototype.setLastPoint = function(t, e) {
        return e && e.shift && 2 === this.points().length && this._snapPoint45Degree(t, this.points()[this.points().length - 2]), l.prototype.setLastPoint.call(this, t)
    }, o.prototype.setPoint = function(t, e, i) {
        var n, o, r, s, a, c = .5 * (this._points[1].price + this._points[2].price);
        i && i.shift && 1 === t && (n = 0, this._snapPoint45Degree(e, this.points()[n])), 3 > t && l.prototype.setPoint.call(this, t, e), 0 !== t && 2 !== t && (1 === t ? (o = this._points[1].price - c, this._points[2].price = this._points[1].price - 2 * o) : 3 === t && (r = this.priceScale(), s = e.price, r.isPercent() && (a = this.ownerSource().firstValue(), s = r.priceRange().convertFromPercent(s, a)), o = s - this._points[2].price, this._points[0].price = this._points[1].price - o, this._points[0].index = e.index))
    }, o.prototype.canHasAlert = function() {
        return !0
    }, o.prototype._getAlertPlots = function() {
        var t, e, i, n, o, r, s, a, l, c = this._points[0],
            h = this._points[1],
            d = [];
        return c.index <= h.index ? (d.push(c), d.push(h)) : (d.push(h), d.push(c)), t = this._points[2], t.time = h.time, t.index = h.index, e = {
            price: t.price + (h.price - c.price),
            time: c.time,
            index: c.index
        }, i = [], t.index <= e.index ? (i.push(t), i.push(e)) : (i.push(e), i.push(t)), d[0].price > i[0].price ? (n = d, o = i) : i[0].price > d[0].price ? (n = i, o = d) : i[1].price > d[1].price ? (n = i, o = d) : (n = d, o = i), a = this.properties().extendLeft.value(), l = this.properties().extendRight.value(), c.index <= h.index ? (r = a, s = l) : (r = l, s = a), [this._linePointsToAlertPlot(n, "Upper", r, s), this._linePointsToAlertPlot(o, "Lower", r, s)]
    }, t.exports = o
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        r.call(this, t, e), this._label1 = null, this._label2 = null, this._rendererCache = {}, this._invalidated = !0
    }

    function o(t, e) {
        this._constructor = "LineToolFlatBottom";
        var i = e || new u("linetoolflatbottom");
        s.call(this, t, new n(this, t), i), this.version = o.version
    }
    var r = i(115),
        s = i(77).LineDataSource,
        a = i(239).ChannelRenderer,
        l = i(153).TrendLineRenderer,
        c = i(116).TextRenderer,
        h = i(221),
        d = i(71),
        u = i(81).DefaultProperty;
    inherit(n, r), n.prototype.update = function() {
        this._invalidated = !0
    }, n.prototype.updateImpl = function() {
        var t, e, i;
        r.prototype.update.call(this), this._label1 = null, this._label2 = null, this._source.points().length < 2 || this._source.priceScale() && (t = this._source.points()[0], e = this._source.points()[1], this._price1 = this._source.priceScale().formatter().format(t.price), this._price2 = this._source.priceScale().formatter().format(e.price), 3 === this._source.points().length && (i = this._source.points()[2], this._price3 = this._source.priceScale().formatter().format(i.price)))
    }, n.prototype.renderer = function() {
        var t, e, i, n, o, r, s, u, p, f, _, g, m, v, y, w, b, S, T, x, C;
        return this._invalidated && (this.updateImpl(), this._invalidated = !1), t = new d, this._points.length < 2 ? t : (e = this._points[0], i = this._points[1], r = this._source.properties(), s = this._model, u = this._source, 3 === this._points.length && (n = this._points[2], n.x = i.x, o = e.clone(), o.y = n.y, o.data = 3, r.fillBackground.value() && (p = {}, f = s.timeScale().width(), _ = r.extendLeft.value(), g = r.extendRight.value(), _ || g ? !_ && g ? (m = {}, m.width = f, m.p1 = e, m.p2 = i, m.p3 = o, m.p4 = n, m.color = r.backgroundColor.value(), m.transparency = r.transparency.value(), m.hittestOnBackground = TradingView.isMobile.any(), t.append(new a(m))) : _ && !g ? (m = {}, m.width = f, m.p1 = i, m.p2 = e, m.p3 = n, m.p4 = o, m.color = r.backgroundColor.value(), m.transparency = r.transparency.value(), m.hittestOnBackground = TradingView.isMobile.any(), t.append(new a(m))) : (v = e.add(i).scaled(.5), y = o.add(n).scaled(.5), w = {}, w.width = f, w.p1 = v, w.p2 = i, w.p3 = y, w.p4 = n, w.color = r.backgroundColor.value(), w.transparency = r.transparency.value(), w.hittestOnBackground = TradingView.isMobile.any(), t.append(new a(w)), b = {}, b.width = f, b.p1 = v, b.p2 = e, b.p3 = y, b.p4 = o, b.color = r.backgroundColor.value(), b.transparency = r.transparency.value(), b.hittestOnBackground = TradingView.isMobile.any(), t.append(new a(b))) : (p.points = [e, i, n, o], p.color = "rgba(0,0,0,0)", p.linewidth = 0, p.linestyle = CanvasEx.LINESTYLE_SOLID, p.filled = !0, p.backcolor = r.backgroundColor.value(), p.fillBackground = !0, p.transparency = r.transparency.value(), t.append(new h(p))))), S = function(t, e) {
            var i = {
                points: [t, e],
                width: s.timeScale().width(),
                height: u.priceScale().height(),
                color: r.linecolor.value(),
                linewidth: r.linewidth.value(),
                linestyle: r.linestyle.value(),
                extendleft: r.extendLeft.value(),
                extendright: r.extendRight.value(),
                leftend: r.leftEnd.value(),
                rightend: r.rightEnd.value()
            };
            return i
        }, t.append(new l(S(e, i))), 2 === this._points.length ? (this.addAnchors(t), t) : (T = this, x = function(e, i, n, o) {
            var r;
            T._source.properties().showPrices.value() && (r = {
                points: [e],
                text: n,
                color: T._source.properties().textcolor.value(),
                horzAlign: e.x > i.x ? "left" : "right",
                vertAlign: "middle",
                font: T._source.properties().font.value(),
                offsetX: e.x > i.x ? -5 : 5,
                offsetY: -5,
                bold: T._source.properties().bold.value(),
                italic: T._source.properties().italic.value(),
                fontsize: T._source.properties().fontsize.value()
            }, t.append(new c(r, T._rendererCache)), r = {
                points: [i],
                text: o,
                color: T._source.properties().textcolor.value(),
                horzAlign: e.x < i.x ? "left" : "right",
                vertAlign: "middle",
                font: T._source.properties().font.value(),
                offsetX: e.x > i.x ? -5 : 5,
                offsetY: -5,
                bold: T._source.properties().bold.value(),
                italic: T._source.properties().italic.value(),
                fontsize: T._source.properties().fontsize.value()
            }, t.append(new c(r, T._rendererCache)))
        }, t.append(new l(S(e, i))), x(e, i, this._price1, this._price2), 2 === this._points.length ? t : (t.append(new l(S(o, n))), x(n, o, this._price3, this._price3), this.isAnchorsRequired() && (C = [e, i, n, o], this._model.lineBeingCreated() === this._source && C.pop(), t.append(this.createLineAnchor({
            points: C
        }))), !TradingView.printing && this._source.hasAlert.value() && !this._model.readOnly() && e && i && this._source.getAlertIsActive(function(n) {
            t.append(new TradingView.PaneRendererClockIcon({
                point1: e,
                point2: i,
                color: n ? r.linecolor.value() : defaults("chartproperties.alertsProperties.drawingIcon.color")
            }))
        }), t)))
    }, inherit(o, s), o.version = 1, o.prototype.pointsCount = function() {
        return 3
    }, o.prototype.title = function() {
        return "Flat Bottom"
    }, o.prototype.addPoint = function(t, e) {
        return e && e.shift && 2 === this.points().length && this._snapPoint45Degree(t, this.points()[this.points().length - 2]), s.prototype.addPoint.call(this, t)
    }, o.prototype.setLastPoint = function(t, e) {
        return e && e.shift && 2 === this.points().length && this._snapPoint45Degree(t, this.points()[this.points().length - 2]), s.prototype.setLastPoint.call(this, t)
    }, o.prototype.setPoint = function(t, e, i) {
        if (i && i.shift && 1 === t) {
            var n = 0;
            this._snapPoint45Degree(e, this.points()[n])
        }
        3 > t ? s.prototype.setPoint.call(this, t, e) : this._points[0].index = e.index
    }, o.prototype.canHasAlert = function() {
        return !0
    }, o.prototype._getAlertPlots = function() {
        var t, e, i, n, o, r, s, a, l, c = this._points[0],
            h = this._points[1],
            d = [];
        return c.index <= h.index ? (d.push(c), d.push(h)) : (d.push(h), d.push(c)), t = this._points[2], t.time = h.time, t.index = h.index, e = {
            price: t.price,
            time: c.time,
            index: c.index
        }, i = [], t.index <= e.index ? (i.push(t), i.push(e)) : (i.push(e), i.push(t)), d[0].price > i[0].price ? (n = d, o = i) : i[0].price > d[0].price ? (n = i, o = d) : i[1].price > d[1].price ? (n = i, o = d) : (n = d, o = i), a = this.properties().extendLeft.value(), l = this.properties().extendRight.value(), c.index <= h.index ? (r = a, s = l) : (r = l, s = a), [this._linePointsToAlertPlot(n, "Upper", r, s), this._linePointsToAlertPlot(o, "Lower", a, s)]
    }, t.exports = o
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            this._data = t, this._cache = e
        }

        function o(t, e) {
            s.call(this, t, e), this._cache = {}, this._invalidated = !0
        }

        function r(t, e) {
            this._constructor = "LineToolIcon";
            var i = e || new d("linetoolicon");
            i.addExclusion("angle"), i.addExclusion("scale"), a.call(this, t, new o(this, t), i), this.version = r.version
        }
        var s = i(115),
            a = i(77).LineDataSource,
            l = i(153).TrendLineRenderer,
            c = i(67),
            h = i(71),
            d = i(81).DefaultProperty;
        n.prototype.draw = function(t) {
            var e, i, n, o = String.fromCharCode(this._data.icon);
            t.font = this._data.size + "px FontAwesome", e = t.measureText(o).width, t.textBaseline = "middle", i = this._data.point, t.translate(i.x, i.y), t.rotate(this._data.angle - Math.PI / 2), t.scale(this._data.scale, 1), n = 65536 * this._data.icon + this._data.size, this._cache[n] = e, this._data.selected && (t.fillStyle = "rgba(80, 80, 80, 0.2)", t.fillRect(-this._cache[n] / 2, -this._data.size / 2, this._cache[n], this._data.size)), t.fillStyle = this._data.color, t.fillText(o, -this._cache[n] / 2, 0)
        }, n.prototype.hitTest = function(t) {
            var i = 65536 * this._data.icon + this._data.size,
                n = this._cache[i] * this._data.scale,
                o = e.Matrix.rotate(-this._data.angle),
                r = t.substract(this._data.point);
            return r = o.mult(r), Math.abs(r.y) <= n / 2 && Math.abs(r.x) <= this._data.size / 2 ? new c(c.MOVEPOINT) : null
        }, inherit(o, s), o.anchorLimit = 80, o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.updateImpl = function() {
            s.prototype.update.call(this), this._invalidated = !1
        }, o.prototype.renderer = function() {
            var t, i, r, s, c, d, u, p, f, _, g, m, v, y, w, b, S, T;
            return this._invalidated && this.updateImpl(), t = new h, this._points.length < 1 ? t : (i = this._source.properties(), r = {
                point: this._points[0],
                color: i.color.value(),
                size: i.size.value(),
                icon: i.icon.value(),
                angle: i.angle.value(),
                scale: i.scale.value(),
                selected: this.isAnchorsRequired()
            }, s = this._model, c = this._source, t.append(new n(r, this._cache)), this.isAnchorsRequired() && (d = 65536 * r.icon + r.size, u = this._cache[d], p = r.size, f = this._points[0], _ = i.scale.value(), g = new e.Point(Math.max(o.anchorLimit, p) / 2, 0), m = new e.Point(0, Math.max(o.anchorLimit, _ * u) / 2), v = e.Matrix.rotate(i.angle.value()), g = v.mult(g), m = v.mult(m), y = f.add(g), y.data = 0, w = f.substract(g), w.data = 1, b = f.add(m), b.data = 2, b.square = !0, S = f.substract(m), S.data = 3, S.square = !0, r = {
                points: [y, w],
                width: s.timeScale().width(),
                height: c.priceScale().height(),
                color: "#808080",
                linewidth: 1,
                linestyle: CanvasEx.LINESTYLE_DASHED,
                extendleft: !1,
                extendright: !1,
                leftend: a.LINEEND_NORMAL,
                rightend: a.LINEEND_NORMAL
            }, T = new l(r), T._hittest = null, t.append(T), t.append(this.createLineAnchor({
                points: [y, w, b, S]
            }))), t)
        }, r._getAvailIcons = function() {
            var t, e, i = [];
            for (i = i.concat([61536, 61537, 61538, 61539]), i = i.concat([61725, 61726]), i = i.concat([61575, 61576, 61796, 61797]), i = i.concat([61779, 61780, 61781, 61782, 61783, 61784, 61785, 61786]), t = i.slice(0), e = 61440; 61846 >= e; e++) - 1 === $.inArray(e, i) && (e % 16 === 15 && 61487 !== e || e >= 61620 && 61630 >= e || 61718 !== e && 61719 !== e && 61472 !== e && 61619 !== e && t.push(e));
            return t
        }, r.availIcons = r._getAvailIcons(), inherit(r, a), r.version = 1, r.prototype.pointsCount = function() {
            return 1
        }, r.prototype.title = function() {
            return "Icon"
        }, r.prototype.startChanging = function(t, e) {
            var i, n;
            a.prototype.startChanging.call(this, t, e), i = this.properties(), n = 65536 * i.icon.value() + i.size.value(), this._startChangeWidth = this._paneViews[0]._cache[n], i.size.value() < o.anchorLimit ? this._sizeScale = i.size.value() / o.anchorLimit : this._sizeScale = 1, this._origScale = i.scale.value(), this._startChangeWidth * this._origScale < o.anchorLimit ? this._resizeRatio = this._startChangeWidth / o.anchorLimit : this._resizeRatio = 1
        }, r.prototype.endChanging = function() {
            a.prototype.endChanging.call(this), delete this._startChangeWidth, delete this._sizeScale, delete this._resizeRatio
        }, r.prototype.setPoint = function(t, e, i) {
            var n, r, s, a, l, c, h, d, u, p, f = $.extend({}, e),
                _ = this.priceScale();
            _.isPercent() && (n = this.ownerSource().firstValue(), f.price = _.priceRange().convertFromPercent(f.price, n)), i && i.shift && this._properties.snapTo45Degrees && this._snapPoint45Degree(f, this.points()[0]), r = this.pointToScreenPoint(this.points()[0])[1], s = this.pointToScreenPoint(f)[1], 0 === t || 1 === t ? (a = s.substract(r).normalized(), l = 2 * s.substract(r).length(), l *= this._sizeScale, this._properties.size.setValue(l), c = -a.x, h = Math.acos(c), Math.asin(a.y) > 0 && (h = 2 * Math.PI - h), 0 === t && (h += Math.PI), this._properties.angle.setValue(h)) : (d = this._startChangeWidth, u = s.substract(r).length(), this._origScale * d < o.anchorLimit ? (p = o.anchorLimit / 2, this._properties.scale.setValue(this._origScale * u / p)) : (p = d / 2, this._properties.scale.setValue(u / p)))
        }, t.exports = r
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            s.call(this, t, e), this._invalidated = !0
        }

        function o(t, e) {
            this._constructor = "LineToolRotatedRectangle";
            var i = e || new h("linetoolrotatedrectangle");
            r.call(this, t, new n(this, t), i)
        }
        var r = i(77).LineDataSource,
            s = i(115),
            a = i(153).TrendLineRenderer,
            l = i(221),
            c = i(71),
            h = i(81).DefaultProperty;
        inherit(n, s), n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype.updateImpl = function() {
            s.prototype.update.call(this), this._distance = 0, 3 === this._points.length && (this._distance = e.distanceToLine(this._points[0], this._points[1], this._points[2]).distance)
        }, n.prototype.renderer = function() {
            var t, i, n, o, s, h, d, u, p, f, _, g, m;
            return this._invalidated && (this.updateImpl(), this._invalidated = !1), t = new c, i = this._source.properties(), n = this._points[0], o = this._points[1], 2 === this._points.length ? (p = {}, p.points = this._points, p.floatPoints = this._floatPoints, p.width = this._model.timeScale().width(), p.height = this._source.priceScale().height(), p.color = i.color.value(), p.linewidth = 1, p.linestyle = CanvasEx.LINESTYLE_SOLID, p.extendleft = !1, p.extendright = !1, p.leftend = r.LINEEND_NORMAL, p.rightend = r.LINEEND_NORMAL, t.append(new a(p))) : 3 === this._points.length && (f = o.substract(n), _ = new e.Point(f.y, -f.x).normalized().scaled(this._distance), g = _.scaled(-1), s = n.add(_), h = o.add(_), d = n.add(g), u = o.add(g), p = {}, p.points = [s, h, u, d], p.color = i.color.value(), p.linewidth = this._source.properties().linewidth.value(), p.linestyle = CanvasEx.LINESTYLE_SOLID, p.filled = !0, p.backcolor = i.backgroundColor.value(), p.fillBackground = i.fillBackground.value(), p.transparency = i.transparency.value(), t.append(new l(p))), this.isAnchorsRequired() && (m = [], m.push(n), this._points.length >= 2 && m.push(o), 3 === this._points.length && (s.data = 2, d.data = 2, h.data = 2, u.data = 2, m.push(s), m.push(d), m.push(h), m.push(u)), t.append(this.createLineAnchor({
                points: m
            }))), t
        }, inherit(o, r), o.prototype.startChanging = function(t, i) {
            var n, o, s, a;
            r.prototype.startChanging.call(this, t, i), 0 !== t && 1 !== t || (n = this._paneViews[0], o = n._points[0], s = n._points[1], a = n._points[2], this._distance = e.distanceToLine(o, s, a).distance)
        }, o.prototype.setPoint = function(t, i, n) {
            var o, s, a, l, c, h, d;
            r.prototype.setPoint.call(this, t, i, n), 0 !== t && 1 !== t || (o = this._paneViews[0], o.update(), s = o._points[0], a = o._points[1], l = a.substract(s), c = new e.Point(l.y, -l.x).normalized().scaled(this._distance), h = s.add(c), d = this.screenPointToPoint(h), this._points[2] = d)
        }, o.prototype.endChanging = function() {
            delete this._distance
        }, o.prototype.pointsCount = function() {
            return 3
        }, o.prototype.title = function() {
            return "Rotated Rectangle"
        }, t.exports = o
    }).call(e, i(40))
}, function(t, e, i) {
    "use strict";

    function n(t) {
        this._data = t
    }

    function o(t, e) {
        a.call(this, t, e), this._invalidated = !0
    }

    function r(t, e) {
        this._constructor = "LineToolFibSpiral";
        var i = e || new d("linetoolfibspiral");
        s.call(this, t, new o(this, t), i)
    }
    var s = i(77).LineDataSource,
        a = i(115),
        l = i(153).TrendLineRenderer,
        c = i(67),
        h = i(71),
        d = i(81).DefaultProperty;
    n.prototype._fibNumbers = function() {
        return [0, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89]
    }, n.prototype._continiusFib = function(t) {
        var e, i, n, o = this._fibNumbers(),
            r = Math.floor(t),
            s = Math.ceil(t);
        return s >= o.length ? null : (e = t - r, e = Math.pow(e, 1.15), i = o[s] - o[r], n = o[r] + i * e)
    }, n.prototype.hitTest = function(t) {
        var e, i, n, o, r = this._data.points[0],
            s = this._data.points[1],
            a = s.substract(r),
            l = t.substract(r),
            h = a.normalized(),
            d = h.transponed(),
            u = l.normalized(),
            p = Math.acos(h.dotProduct(u)),
            f = Math.asin(d.dotProduct(u));
        for (0 > f && (p = 2 * Math.PI - p), e = l.length(), i = 0; 4 > i; i++)
            if (n = p / (.5 * Math.PI), o = this._continiusFib(n + 4 * i), o = o * a.length() / 5, null !== o && Math.abs(o - e) < 5) return new c(c.MOVEPOINT);
        return null
    }, n.prototype.draw = function(t) {
        var e, i, n, o, r, s, a, l, c, h, d, u;
        for (t.lineCap = "round", t.strokeStyle = this._data.color, e = this._data.points[0], i = this._data.points[1], t.translate(e.x, e.y), n = i.substract(e), o = n.length(), n = n.normalized(), r = Math.acos(n.x), Math.asin(n.y) < 0 && (r = 2 * Math.PI - r), t.rotate(r), t.scale(o / 5, o / 5), t.lineWidth = this._data.linewidth, CanvasEx.setLineStyle(t, this._data.linestyle), s = 50, a = Math.PI / (2 * s), t.moveTo(0, 0), l = 0; l < (this._fibNumbers().length - 1) * s; l++) c = l * a, h = this._continiusFib(l / s), d = Math.cos(c) * h, u = Math.sin(c) * h, t.lineTo(d, u);
        t.scale(5 / o, 5 / o), t.rotate(-r), t.stroke()
    }, inherit(o, a), o.prototype.update = function() {
        this._invalidated = !0
    }, o.prototype.updateImpl = function() {
        a.prototype.update.call(this), this._invalidated = !1
    }, o.prototype.renderer = function() {
        var t, e;
        return this._invalidated && this.updateImpl(), t = new h, this._floatPoints.length < 2 ? t : (e = {}, e.points = this._floatPoints, e.width = this._model.timeScale().width(), e.height = this._source.priceScale().height(), e.color = this._source.properties().linecolor.value(), e.linewidth = this._source.properties().linewidth.value(), e.linestyle = this._source.properties().linestyle.value(), e.extendleft = !1, e.extendright = !0, e.leftend = s.LINEEND_NORMAL, e.rightend = s.LINEEND_NORMAL, t.append(new l(e)), e = {}, e.points = this._floatPoints, e.width = this._model.timeScale().width(), e.height = this._source.priceScale().height(), e.color = this._source.properties().linecolor.value(), e.linewidth = this._source.properties().linewidth.value(), e.linestyle = this._source.properties().linestyle.value(), t.append(new n(e)), this.isAnchorsRequired() && this.addAnchors(t), t)
    }, inherit(r, s), r.prototype.pointsCount = function() {
        return 2
    }, r.prototype.title = function() {
        return "Fib Spiral"
    }, t.exports = r
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            r.call(this, t, e),
                this._rendererCache = {}, this._invalidated = !0
        }

        function o(t, e) {
            this._constructor = "LineToolHeadAndShoulders";
            var i = e || new d("linetoolheadandshoulders");
            s.call(this, t, new n(this, t), i)
        }
        var r = i(115),
            s = i(77).LineDataSource,
            a = i(153).TrendLineRenderer,
            l = i(250).TriangleRenderer,
            c = i(116).TextRenderer,
            h = i(71),
            d = i(81).DefaultProperty;
        inherit(n, r), n.prototype.renderer = function() {
            var t, e, i, n, o, r, d, u, p, f, _, g, m, v, y;
            if (this._invalidated && (this.updateImpl(), this._invalidated = !1), this._points.length < 2) return null;
            for (t = this._source.properties(), e = new h, i = this, n = function(e, n) {
                var o = {
                    points: [e],
                    text: $.t(n),
                    color: t.textcolor.value(),
                    horzAlign: "center",
                    font: t.font.value(),
                    offsetX: 0,
                    offsetY: 0,
                    bold: t.bold && t.bold.value(),
                    italic: t.italic && t.italic.value(),
                    fontsize: t.fontsize.value(),
                    backgroundColor: i._source.properties().color.value(),
                    backgroundRoundRect: 4
                };
                return o
            }, o = function(e, n, o, r) {
                var a = {
                    points: [e, n],
                    width: i._model.timeScale().width(),
                    height: i._source.priceScale().height(),
                    color: TradingView.generateColor(i._source.properties().color.value(), o),
                    linewidth: r || t.linewidth.value(),
                    linestyle: CanvasEx.LINESTYLE_SOLID,
                    extendleft: !1,
                    extendright: !1,
                    leftend: s.LINEEND_NORMAL,
                    rightend: s.LINEEND_NORMAL
                };
                return a
            }, r = function(e, i, n) {
                var o = [e, i, n],
                    r = {};
                return r.points = o, r.color = t.color.value(), r.linewidth = 0, r.backcolor = t.backgroundColor.value(), r.fillBackground = t.fillBackground.value(), r.transparency = t.transparency.value(), r
            }, d = 1; d < this._points.length; d++) u = o(this._points[d - 1], this._points[d], 0), e.append(new a(u));
            return this._points.length >= 5 && (_ = !1, g = !1, this._intersect1 ? p = this._intersect1 : (p = this._points[2], _ = !0), this._intersect2 ? f = this._intersect2 : (f = this._points[4], g = !0), u = o(p, f, 0), u.extendleft = _, u.extendright = g, e.append(new a(u)), m = r(this._points[2], this._points[3], this._points[4]), e.append(new l(m))), this._intersect1 && (m = r(this._intersect1, this._points[1], this._points[2]), e.append(new l(m))), this._intersect2 && (m = r(this._points[4], this._points[5], this._intersect2), e.append(new l(m))), this._points.length >= 2 && (v = this._points[1], y = n(v, "Left Shoulder"), this._points[1].y < this._points[0].y ? (y.vertAlign = "bottom", y.offsetY = -10) : (y.vertAlign = "top", y.offsetY = 5), e.append(new c(y, this._rendererCache))), this._points.length >= 4 && (v = this._points[3], y = n(v, "Head"), this._points[3].y < this._points[2].y ? (y.vertAlign = "bottom", y.offsetY = -10) : (y.vertAlign = "top", y.offsetY = 5), e.append(new c(y, this._rendererCache))), this._points.length >= 6 && (v = this._points[5], y = n(v, "Right Shoulder"), this._points[5].y < this._points[4].y ? (y.vertAlign = "bottom", y.offsetY = -10) : (y.vertAlign = "top", y.offsetY = 5), e.append(new c(y, this._rendererCache))), this.addAnchors(e), e
        }, n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype.updateImpl = function() {
            var t, i, n, o, s, a, l, c;
            r.prototype.update.call(this), delete this._intersect1, delete this._intersect2, this._points.length >= 5 && (t = this._points[0], i = this._points[1], n = this._points[2], o = this._points[4], s = e.intersectSegment(n, o, t, i), null !== s && (a = o.substract(n), this._intersect1 = n.add(a.scaled(s))), 7 === this._points.length && (l = this._points[5], c = this._points[6], s = e.intersectSegment(n, o, l, c), null !== s && (a = o.substract(n), this._intersect2 = n.add(a.scaled(s)))))
        }, inherit(o, s), o.prototype.pointsCount = function() {
            return 7
        }, o.prototype.title = function() {
            return "Head & Shoulders"
        }, t.exports = o
    }).call(e, i(40))
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(t) {
            this._data = t
        }

        function o(t, e) {
            a.call(this, t, e), this._invalidated = !0
        }

        function r(t, e) {
            this._constructor = "LineToolTriangle";
            var i = e || new h("linetooltriangle");
            s.call(this, t, new o(this, t), i)
        }
        var s = i(77).LineDataSource,
            a = i(115),
            l = i(67),
            c = i(71),
            h = i(81).DefaultProperty;
        n.prototype.draw = function(t) {
            var e, i, n;
            this._data.points.length < 2 || (t.lineCap = "butt", t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, t.lineStyle = this._data.linestyle, e = this._data.points[0], i = this._data.points[1], n = 2 === this._data.points.length ? i : this._data.points[2], t.beginPath(), t.moveTo(e.x, e.y), t.lineTo(i.x, i.y), t.lineTo(n.x, n.y), t.lineTo(e.x, e.y), this._data.fillBackground && (t.fillStyle = TradingView.generateColor(this._data.backcolor, this._data.transparency), t.fill()), t.stroke())
        }, n.prototype.hitTest = function(e) {
            var i, n, o, r, s;
            return this._data.points.length < 2 ? null : (i = this._data.points[0], n = this._data.points[1], o = this._data.points[2], r = 3, s = t.distanceToSegment(i, n, e), s.distance <= r ? new l(l.MOVEPOINT) : (s = t.distanceToSegment(n, o, e), s.distance <= r ? new l(l.MOVEPOINT) : (s = t.distanceToSegment(o, i, e), s.distance <= r ? new l(l.MOVEPOINT) : this._data.fillBackground && t.pointInTriangle(i, n, o, e) ? new l(l.MOVEPOINT_BACKGROUND) : null)))
        }, inherit(o, a), o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.updateImpl = function() {
            a.prototype.update.call(this), this._invalidated = !1
        }, o.prototype.renderer = function() {
            var t, e;
            return this._invalidated && this.updateImpl(), t = {}, t.points = this._points, t.color = this._source.properties().color.value(), t.linewidth = this._source.properties().linewidth.value(), t.backcolor = this._source.properties().backgroundColor.value(), t.fillBackground = this._source.properties().fillBackground.value(), t.transparency = this._source.properties().transparency.value(), this.isAnchorsRequired() ? (e = new c, e.append(new n(t)), this.addAnchors(e), e) : new n(t)
        }, inherit(r, s), r.prototype.pointsCount = function() {
            return 3
        }, r.prototype.title = function() {
            return "Triangle"
        }, e.TriangleRenderer = n, e.LineToolTriangle = r
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            r.call(this, t, e), this._rendererCache = {}, this._invalidated = !0
        }

        function o(t, e) {
            this._constructor = "LineToolTrianglePattern";
            var i = e || new u("linetooltrianglepattern");
            s.call(this, t, new n(this, t), i)
        }
        var r = i(115),
            s = i(77).LineDataSource,
            a = i(250).TriangleRenderer,
            l = i(153).TrendLineRenderer,
            c = i(116).TextRenderer,
            h = i(221),
            d = i(71),
            u = i(81).DefaultProperty;
        inherit(n, r), n.prototype.renderer = function() {
            var t, e, i, n, o, r, u, p, f;
            return this._invalidated && (this.updateImpl(), this._invalidated = !1), this._points.length < 2 ? null : (t = this._source.properties(), e = new d, i = this, n = function(e, n) {
                var o = {
                    points: [e],
                    text: n,
                    color: t.textcolor.value(),
                    vertAlign: "middle",
                    horzAlign: "center",
                    font: t.font.value(),
                    offsetX: 0,
                    offsetY: 0,
                    bold: t.bold && t.bold.value(),
                    italic: t.italic && t.italic.value(),
                    fontsize: t.fontsize.value(),
                    backgroundColor: i._source.properties().color.value(),
                    backgroundRoundRect: 4
                };
                return o
            }, o = function(e, n) {
                var o = {
                    points: [e, n],
                    width: i._model.timeScale().width(),
                    height: i._source.priceScale().height(),
                    color: i._source.properties().color.value(),
                    linewidth: t.linewidth.value(),
                    linestyle: CanvasEx.LINESTYLE_SOLID,
                    extendleft: !1,
                    extendright: !1,
                    leftend: s.LINEEND_NORMAL,
                    rightend: s.LINEEND_NORMAL
                };
                return o
            }, r = o(this._points[0], this._points[1]), e.append(new l(r)), this._points.length >= 3 && (r = o(this._points[1], this._points[2]), e.append(new l(r))), 4 === this._points.length && (r = o(this._points[2], this._points[3]), e.append(new l(r)), this._intersectPoint ? (u = [this._startPoint1, this._startPoint2, this._intersectPoint], p = {}, p.points = u, p.color = t.color.value(), p.linewidth = t.linewidth.value(), p.backcolor = t.backgroundColor.value(), p.fillBackground = t.fillBackground.value(), p.transparency = t.transparency.value(), e.append(new a(p))) : this._intersectPoint1 && this._intersectPoint2 && (u = [this._startPoint1, this._startPoint2, this._intersectPoint2, this._intersectPoint1], p = {}, p.filled = !0, p.fillBackground = !0, p.points = u, p.color = t.color.value(), p.linewidth = t.linewidth.value(), p.backcolor = t.backgroundColor.value(), p.transparency = t.transparency.value(), e.append(new h(p)))), f = n(this._points[0], "A"), this._points[1].y > this._points[0].y ? (f.vertAlign = "bottom", f.offsetY = -10) : (f.vertAlign = "top", f.offsetY = 5), e.append(new c(f, this._rendererCache)), f = n(this._points[1], "B"), this._points[1].y < this._points[0].y ? (f.vertAlign = "bottom", f.offsetY = -10) : (f.vertAlign = "top", f.offsetY = 5), e.append(new c(f, this._rendererCache)), this._points.length > 2 && (f = n(this._points[2], "C"), this._points[2].y < this._points[1].y ? (f.vertAlign = "bottom", f.offsetY = -10) : (f.vertAlign = "top", f.offsetY = 5), e.append(new c(f, this._rendererCache))), this._points.length > 3 && (f = n(this._points[3], "D"), this._points[3].y < this._points[2].y ? (f.vertAlign = "bottom", f.offsetY = -10) : (f.vertAlign = "top", f.offsetY = 5), e.append(new c(f, this._rendererCache))), this.addAnchors(e), e)
        }, n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype.updateImpl = function() {
            var t, i, n, o, s, a, l, c, h, d, u, p;
            if (r.prototype.update.call(this), this._valid = !1, delete this._intersectPoint, delete this._intersectPoint1, delete this._intersectPoint2, 4 === this._points.length) {
                if (t = this._points[0], i = this._points[1], n = this._points[2], o = this._points[3], Math.abs(n.x - t.x) < 1 || Math.abs(o.x - i.x) < 1) return;
                if (s = Math.min(t.x, i.x), s = Math.min(s, n.x), s = Math.min(s, o.x), a = (n.y - t.y) / (n.x - t.x), l = t.y + (s - t.x) * a, c = (o.y - i.y) / (o.x - i.x), h = i.y + (s - i.x) * c, Math.abs(a - c) < 1e-6) return;
                this._startPoint1 = new e.Point(s, l), this._startPoint2 = new e.Point(s, h), d = (i.y - t.y + (t.x * a - i.x * c)) / (a - c), this._valid = !0, s > d && (u = Math.max(t.x, i.x), u = Math.max(u, n.x), u = Math.max(u, o.x), l = t.y + (u - t.x) * a, h = i.y + (u - i.x) * c, this._startPoint1 = new e.Point(u, l), this._startPoint2 = new e.Point(u, h)), p = t.y + (d - t.x) * a, this._intersectPoint = new e.Point(d, p)
            }
        }, inherit(o, s), o.prototype.pointsCount = function() {
            return 4
        }, o.prototype.title = function() {
            return "Triangle Pattern"
        }, t.exports = o
    }).call(e, i(40))
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        a.call(this, t, e), this._rendererCache = {}, this._numericFormatter = new g, this._invalidated = !0
    }

    function o(t, e) {
        this._constructor = "LineTool5PointsPattern";
        var i = e || new p("linetool5pointspattern");
        l.call(this, t, new n(this, t), i)
    }

    function r(t, e) {
        this._constructor = "LineToolCypherPattern";
        var i = e || new p("linetoolcypherpattern");
        l.call(this, t, new s(this, t), i)
    }

    function s(t, e) {
        a.call(this, t, e), this._rendererCache = {}, this._numericFormatter = new g, this._invalidated = !0
    }
    var a = i(115),
        l = i(77).LineDataSource,
        c = i(153).TrendLineRenderer,
        h = i(250).TriangleRenderer,
        d = i(116).TextRenderer,
        u = i(71),
        p = i(81).DefaultProperty,
        f = i(83),
        _ = f.DateTimeFormatter,
        g = f.NumericFormatter;
    inherit(n, a), n.prototype.renderer = function() {
        var t, e, i, n, o, r, s, a, p, f;
        return this._invalidated && (this.updateImpl(), this._invalidated = !1), this._points.length < 2 ? null : (t = this._source.properties(), e = new u, i = [this._points[0], this._points[1], this._points.length < 3 ? this._points[1] : this._points[2]], n = this, o = function(e, i) {
            var o = {
                points: [e],
                text: i,
                color: t.textcolor.value(),
                vertAlign: "middle",
                horzAlign: "center",
                font: t.font.value(),
                offsetX: 0,
                offsetY: 0,
                bold: t.bold && t.bold.value(),
                italic: t.italic && t.italic.value(),
                fontsize: t.fontsize.value(),
                backgroundColor: n._source.properties().color.value(),
                backgroundRoundRect: 4
            };
            return o
        }, r = function(t, e) {
            var i = {
                points: [t, e],
                width: n._model.timeScale().width(),
                height: n._source.priceScale().height(),
                color: n._source.properties().color.value(),
                linewidth: 1,
                linestyle: CanvasEx.LINESTYLE_SOLID,
                extendleft: !1,
                extendright: !1,
                leftend: l.LINEEND_NORMAL,
                rightend: l.LINEEND_NORMAL
            };
            return i
        }, s = {}, s.points = i, s.color = t.color.value(), s.linewidth = t.linewidth.value(), s.backcolor = t.backgroundColor.value(), s.fillBackground = t.fillBackground.value(), s.transparency = t.transparency.value(), e.append(new h(s)), this._points.length > 3 && (i = [this._points[2], this._points[3], 5 === this._points.length ? this._points[4] : this._points[3]], s = {}, s.points = i, s.color = t.color.value(), s.linewidth = t.linewidth.value(), s.backcolor = t.backgroundColor.value(), s.fillBackground = t.fillBackground.value(), s.transparency = t.transparency.value(), e.append(new h(s))), this._points.length >= 3 && (a = this._points[0].add(this._points[2]).scaled(.5), p = o(a, this._numericFormatter.format(this._ABRetracement)), e.append(new d(p, this._rendererCache))), this._points.length >= 4 && (a = this._points[1].add(this._points[3]).scaled(.5), f = r(this._points[1], this._points[3]), e.append(new c(f)), p = o(a, this._numericFormatter.format(this._BCRetracement)), e.append(new d(p, this._rendererCache))), this._points.length >= 5 && (a = this._points[2].add(this._points[4]).scaled(.5), p = o(a, this._numericFormatter.format(this._CDRetracement)), e.append(new d(p, this._rendererCache)), f = r(this._points[0], this._points[4]), e.append(new c(f)), a = this._points[0].add(this._points[4]).scaled(.5), p = o(a, this._numericFormatter.format(this._XDRetracement)), e.append(new d(p, this._rendererCache))), p = o(this._points[0], "X"), this._points[1].y > this._points[0].y ? (p.vertAlign = "bottom", p.offsetY = -10) : (p.vertAlign = "top", p.offsetY = 5), e.append(new d(p, this._rendererCache)), p = o(this._points[1], "A"), this._points[1].y < this._points[0].y ? (p.vertAlign = "bottom", p.offsetY = -10) : (p.vertAlign = "top", p.offsetY = 5), e.append(new d(p, this._rendererCache)), this._points.length > 2 && (p = o(this._points[2], "B"), this._points[2].y < this._points[1].y ? (p.vertAlign = "bottom", p.offsetY = -10) : (p.vertAlign = "top", p.offsetY = 5), e.append(new d(p, this._rendererCache))), this._points.length > 3 && (p = o(this._points[3], "C"), this._points[3].y < this._points[2].y ? (p.vertAlign = "bottom", p.offsetY = -10) : (p.vertAlign = "top", p.offsetY = 5), e.append(new d(p, this._rendererCache))), this._points.length > 4 && (p = o(this._points[4], "D"), this._points[4].y < this._points[3].y ? (p.vertAlign = "bottom", p.offsetY = -10) : (p.vertAlign = "top", p.offsetY = 5), e.append(new d(p, this._rendererCache))), this.addAnchors(e), e)
    }, n.prototype.update = function() {
        this._invalidated = !0
    }, n.prototype.updateImpl = function() {
        var t, e, i, n, o;
        a.prototype.update.call(this), this._source.points().length >= 3 && (t = this._source.points()[0], e = this._source.points()[1], i = this._source.points()[2], this._ABRetracement = Math.round(1e3 * Math.abs((i.price - e.price) / (e.price - t.price))) / 1e3), this._source.points().length >= 4 && (n = this._source.points()[3], this._BCRetracement = Math.round(1e3 * Math.abs((n.price - i.price) / (i.price - e.price))) / 1e3), this._source.points().length >= 5 && (o = this._source.points()[4], this._CDRetracement = Math.round(1e3 * Math.abs((o.price - n.price) / (n.price - i.price))) / 1e3, this._XDRetracement = Math.round(1e3 * Math.abs((o.price - e.price) / (e.price - t.price))) / 1e3)
    }, inherit(o, l), o.prototype.pointsCount = function() {
        return 5
    }, o.prototype.title = function() {
        return "XABCD Pattern"
    }, o.prototype._tooltipFieldsHash = {
        time0: {
            title: "Date 1",
            value: null
        },
        price0: {
            title: "Price 1",
            value: null
        },
        time1: {
            title: "Date 2",
            value: null
        },
        price1: {
            title: "Price 2",
            value: null
        },
        time2: {
            title: "Date 3",
            value: null
        },
        price2: {
            title: "Price 3",
            value: null
        },
        time3: {
            title: "Date 4",
            value: null
        },
        price3: {
            title: "Price 4",
            value: null
        },
        time4: {
            title: "Date 5",
            value: null
        },
        price4: {
            title: "Price 5",
            value: null
        }
    }, o.prototype._updateTooltip = function() {
        var t, e, i, n, o, r = this._tooltipFieldsHash,
            s = this.points().m_values;
        s[0] && (e = this._model.timeScale().indexToUserTime(s[0].index), r.time0.value = e ? new _(this._model.mainSeries().isDWM()).format(e) : 0, r.price0.value = this._model.mainSeries()._formatter.format(s[0].price)), s[1] && (t = this._model.timeScale().indexToUserTime(s[1].index), r.time1.value = t ? new _(this._model.mainSeries().isDWM()).format(t) : 0, r.price1.value = this._model.mainSeries()._formatter.format(s[1].price)), s[2] && (i = this._model.timeScale().indexToUserTime(s[2].index), r.time2.value = i ? new _(this._model.mainSeries().isDWM()).format(i) : 0, r.price2.value = this._model.mainSeries()._formatter.format(s[2].price)), s[3] && (n = this._model.timeScale().indexToUserTime(s[3].index), r.time3.value = n ? new _(this._model.mainSeries().isDWM()).format(n) : 0, r.price3.value = this._model.mainSeries()._formatter.format(s[3].price)), s[4] && (o = this._model.timeScale().indexToUserTime(s[4].index), r.time4.value = t ? new _(this._model.mainSeries().isDWM()).format(o) : 0, r.price4.value = this._model.mainSeries()._formatter.format(s[4].price))
    }, o.prototype.tooltip = function() {
        return this._updateTooltip(), this._formatTooltip()
    }, inherit(r, o), inherit(s, n), s.prototype.update = function() {
        this._invalidated = !0
    }, s.prototype.updateImpl = function() {
        var t, e, i, n, o;
        a.prototype.update.call(this), this._source.points().length >= 3 && (t = this._source.points()[0], e = this._source.points()[1], i = this._source.points()[2], this._ABRetracement = Math.round(1e3 * Math.abs((i.price - e.price) / (e.price - t.price))) / 1e3), this._source.points().length >= 4 && (n = this._source.points()[3], this._BCRetracement = Math.round(1e3 * Math.abs((n.price - t.price) / (e.price - t.price))) / 1e3), this._source.points().length >= 5 && (o = this._source.points()[4], this._CDRetracement = Math.round(1e3 * Math.abs((o.price - n.price) / (n.price - i.price))) / 1e3, this._XDRetracement = Math.round(1e3 * Math.abs((o.price - n.price) / (t.price - n.price))) / 1e3)
    }, e.LineTool5PointsPattern = o, e.LineToolCypherPattern = r
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        r.call(this, t, e), this._rendererCache = {}, this._numericFormatter = new d, this._invalidated = !0
    }

    function o(t, e) {
        this._constructor = "LineToolThreeDrivers";
        var i = e || new h("linetoolthreedrivers");
        s.call(this, t, new n(this, t), i)
    }
    var r = i(115),
        s = i(77).LineDataSource,
        a = i(153).TrendLineRenderer,
        l = i(116).TextRenderer,
        c = i(71),
        h = i(81).DefaultProperty,
        d = i(83).NumericFormatter;
    inherit(n, r), n.prototype.renderer = function() {
        var t, e, i, n, o, r, h, d, u;
        if (this._invalidated && (this.updateImpl(), this._invalidated = !1), this._points.length < 2) return null;
        for (t = this._source.properties(), e = new c, i = this, n = function(e, n) {
            var o = {
                points: [e],
                text: n,
                color: t.textcolor.value(),
                vertAlign: "middle",
                horzAlign: "center",
                font: t.font.value(),
                offsetX: 0,
                offsetY: 0,
                bold: t.bold && t.bold.value(),
                italic: t.italic && t.italic.value(),
                fontsize: t.fontsize.value(),
                backgroundColor: i._source.properties().color.value(),
                backgroundRoundRect: 4
            };
            return o
        }, o = function(e, n, o, r) {
            var a = {
                points: [e, n],
                width: i._model.timeScale().width(),
                height: i._source.priceScale().height(),
                color: TradingView.generateColor(i._source.properties().color.value(), o),
                linewidth: r || t.linewidth.value(),
                linestyle: CanvasEx.LINESTYLE_SOLID,
                extendleft: !1,
                extendright: !1,
                leftend: s.LINEEND_NORMAL,
                rightend: s.LINEEND_NORMAL
            };
            return a
        }, r = 1; r < this._points.length; r++) h = o(this._points[r - 1], this._points[r], 0), e.append(new a(h));
        return this._retrace1 && (h = o(this._points[1], this._points[3], 70, 1), e.append(new a(h)), d = this._points[1].add(this._points[3]).scaled(.5), u = n(d, this._numericFormatter.format(this._retrace1)), e.append(new l(u, this._rendererCache))), this._retrace2 && (h = o(this._points[3], this._points[5], 70, 1), e.append(new a(h)), d = this._points[5].add(this._points[3]).scaled(.5), u = n(d, this._numericFormatter.format(this._retrace2)), e.append(new l(u, this._rendererCache))), this.addAnchors(e), e
    }, n.prototype.update = function() {
        this._invalidated = !0
    }, n.prototype.updateImpl = function() {
        var t, e, i, n, o;
        r.prototype.update.call(this), delete this._retrace1, delete this._retrace2, this._source.points().length >= 4 && (t = this._source.points()[1], e = this._source.points()[2], i = this._source.points()[3], this._retrace1 = Math.round(100 * Math.abs((i.price - e.price) / (e.price - t.price))) / 100), this._source.points().length >= 6 && (i = this._source.points()[3], n = this._source.points()[4], o = this._source.points()[5], this._retrace2 = Math.round(100 * Math.abs((o.price - n.price) / (n.price - i.price))) / 100)
    }, inherit(o, s), o.prototype.pointsCount = function() {
        return 7
    }, o.prototype.title = function() {
        return "Three Drives Pattern"
    }, t.exports = o
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        r.call(this, t, e), this._rendererCache = {}, this._numericFormatter = new p, this._invalidated = !0
    }

    function o(t, e) {
        this._constructor = "LineToolABCD";
        var i = e || new h("linetoolabcd");
        s.call(this, t, new n(this, t), i)
    }
    var r = i(115),
        s = i(77).LineDataSource,
        a = i(153).TrendLineRenderer,
        l = i(116).TextRenderer,
        c = i(71),
        h = i(81).DefaultProperty,
        d = i(83),
        u = d.DateTimeFormatter,
        p = d.NumericFormatter;
    inherit(n, r), n.prototype.renderer = function() {
        var t, e, i, n, o, r, h, d, u;
        return this._invalidated && (this.updateImpl(), this._invalidated = !1), this._points.length < 2 ? null : (t = this._source.properties(), e = new c, i = this._points, n = this, o = function(e, i) {
            var o = {
                points: [e],
                text: i,
                color: t.textcolor.value(),
                vertAlign: "middle",
                horzAlign: "center",
                font: t.font.value(),
                offsetX: 0,
                offsetY: 0,
                bold: t.bold && t.bold.value(),
                italic: t.italic && t.italic.value(),
                fontsize: t.fontsize.value(),
                backgroundColor: n._source.properties().color.value(),
                backgroundRoundRect: 4
            };
            return o
        }, r = function(e, i, o, r) {
            var a = {
                points: [e, i],
                width: n._model.timeScale().width(),
                height: n._source.priceScale().height(),
                color: TradingView.generateColor(n._source.properties().color.value(), o),
                linewidth: r || t.linewidth.value(),
                linestyle: CanvasEx.LINESTYLE_SOLID,
                extendleft: !1,
                extendright: !1,
                leftend: s.LINEEND_NORMAL,
                rightend: s.LINEEND_NORMAL
            };
            return a
        }, h = r(i[0], i[1], 0), e.append(new a(h)), i.length >= 3 && (h = r(i[1], i[2], 0), e.append(new a(h))), 4 === i.length && (h = r(i[2], i[3], 0), e.append(new a(h))), d = o(this._points[0], "A"), this._points[1].y > this._points[0].y ? (d.vertAlign = "bottom", d.offsetY = -10) : (d.vertAlign = "top", d.offsetY = 5), e.append(new l(d, this._rendererCache)), d = o(this._points[1], "B"), this._points[1].y < this._points[0].y ? (d.vertAlign = "bottom", d.offsetY = -10) : (d.vertAlign = "top", d.offsetY = 5), e.append(new l(d, this._rendererCache)), this._points.length > 2 && (d = o(this._points[2], "C"), this._points[2].y < this._points[1].y ? (d.vertAlign = "bottom", d.offsetY = -10) : (d.vertAlign = "top", d.offsetY = 5), e.append(new l(d, this._rendererCache))), this._points.length > 3 && (d = o(this._points[3], "D"), this._points[3].y < this._points[2].y ? (d.vertAlign = "bottom", d.offsetY = -10) : (d.vertAlign = "top", d.offsetY = 5), e.append(new l(d, this._rendererCache))), this._points.length >= 3 && (u = this._points[0].add(this._points[2]).scaled(.5), h = r(this._points[0], this._points[2], 70, 1), e.append(new a(h)), d = o(u, this._numericFormatter.format(this._ABRetracement)), e.append(new l(d, this._rendererCache))), this._points.length >= 4 && (u = this._points[1].add(this._points[3]).scaled(.5), h = r(this._points[1], this._points[3], 70, 1), e.append(new a(h)), d = o(u, this._numericFormatter.format(this._CDRetracement)), e.append(new l(d, this._rendererCache))), this.addAnchors(e), e)
    }, n.prototype.update = function() {
        this._invalidated = !0
    }, n.prototype.updateImpl = function() {
        var t, e, i, n;
        r.prototype.update.call(this), this._source.points().length >= 3 && (t = this._source.points()[0], e = this._source.points()[1], i = this._source.points()[2], this._ABRetracement = Math.round(1e3 * Math.abs((i.price - e.price) / (e.price - t.price))) / 1e3), 4 === this._source.points().length && (n = this._source.points()[3], this._CDRetracement = Math.round(1e3 * Math.abs((n.price - i.price) / (i.price - e.price))) / 1e3)
    }, inherit(o, s), o.prototype.pointsCount = function() {
        return 4
    }, o.prototype.title = function() {
        return "ABCD Pattern"
    }, o.prototype._tooltipFieldsHash = {
        time0: {
            title: "Date 1",
            value: null
        },
        price0: {
            title: "Price 1",
            value: null
        },
        time1: {
            title: "Date 2",
            value: null
        },
        price1: {
            title: "Price 2",
            value: null
        },
        time2: {
            title: "Date 3",
            value: null
        },
        price2: {
            title: "Price 3",
            value: null
        },
        time3: {
            title: "Date 4",
            value: null
        },
        price3: {
            title: "Price 4",
            value: null
        }
    }, o.prototype._updateTooltip = function() {
        var t, e, i, n, o = this._tooltipFieldsHash,
            r = this.points().m_values;
        r[0] && (t = this._model.timeScale().indexToUserTime(r[0].index), o.time0.value = t ? new u(this._model.mainSeries().isDWM()).format(t) : 0, o.price0.value = this._model.mainSeries()._formatter.format(r[0].price)), r[1] && (e = this._model.timeScale().indexToUserTime(r[1].index), o.time1.value = e ? new u(this._model.mainSeries().isDWM()).format(e) : 0, o.price1.value = this._model.mainSeries()._formatter.format(r[1].price)), r[2] && (i = this._model.timeScale().indexToUserTime(r[2].index), o.time2.value = i ? new u(this._model.mainSeries().isDWM()).format(i) : 0, o.price2.value = this._model.mainSeries()._formatter.format(r[2].price)), r[3] && (n = this._model.timeScale().indexToUserTime(r[3].index), o.time3.value = n ? new u(this._model.mainSeries().isDWM()).format(n) : 0, o.price3.value = this._model.mainSeries()._formatter.format(r[3].price))
    }, o.prototype.tooltip = function() {
        return this._updateTooltip(), this._formatTooltip()
    }, t.exports = o
}, function(t, e, i) {
    (function(t, n) {
        "use strict";

        function o(t, e) {
            c.call(this, t, e), this._rendererCache = {}, this._invalidated = !0, this._percentageFormatter = new b, this._numericFormatter = new S
        }

        function r(t, e, i, n) {
            this._source = t, this._model = e, this._text = "", this._invalidated = !0, this._coordinate = 0, this._background = "black", this._pricePropName = i, this._colorPropName = n
        }

        function s(t, e) {
            var i, a, l, c, d, u, p, f, _, g, m = e || new y("linetoolriskreward");
            this._entryPriceAxisView = new r(this, t, "entryPrice", "linecolor"), this._stopPriceAxisView = new r(this, t, "stopPrice", "stopBackground"), this._profitPriceAxisView = new r(this, t, "targetPrice", "profitBackground"), h.call(this, t, new o(this, t), m), this._properties.addExclusion && (this._properties.addExclusion("stopLevel"), this._properties.addExclusion("profitLevel")), e.stopLevel || e.profitLevel || (i = t.timeScale().visibleBars(), a = i.firstBar(), l = i.lastBar(), c = t.mainSeries().priceRange(a, l), d = t.mainSeries().priceScale(), d.isLog() && (u = d.logicalToPrice(c.minValue()), p = d.logicalToPrice(c.maxValue()), c = new n(u, p)), d.isPercent() && (f = t.mainSeries().firstValue(), u = d.priceRange().convertFromPercent(c.minValue(), f), p = d.priceRange().convertFromPercent(c.maxValue(), f), c = new n(u, p)), c && !c.isEmpty() && (_ = Math.round(.2 * c.length() * t.mainSeries().base()), m.merge({
                stopLevel: _,
                profitLevel: _
            }))), g = this, m.stopLevel.listeners().subscribe(this, s.prototype.recalculate), m.stopLevel.listeners().subscribe(null, function() {
                g.properties().stopPrice._listeners.fire(g.properties().stopPrice)
            }), m.profitLevel.listeners().subscribe(this, s.prototype.recalculate), m.profitLevel.listeners().subscribe(null, function() {
                g.properties().targetPrice._listeners.fire(g.properties().targetPrice)
            }), m.addProperty("entryPrice"), m.entryPrice = new s.PriceProperty(this, 0), m.addProperty("stopPrice"), m.stopPrice = new s.StopPriceProperty(this), m.addProperty("targetPrice"), m.targetPrice = new s.TargetPriceProperty(this), this.version = s.version
        }

        function a(t, e) {
            this._constructor = "LineToolRiskRewardShort";
            var i = e || new y("linetoolriskrewardshort");
            s.call(this, t, i)
        }

        function l(t, e) {
            this._constructor = "LineToolRiskRewardLong";
            var i = e || new y("linetoolriskrewardlong");
            s.call(this, t, i)
        }
        var c = i(115),
            h = i(77).LineDataSource,
            d = i(153).TrendLineRenderer,
            u = i(60),
            p = i(62),
            f = i(116).TextRenderer,
            _ = i(151).RectangleRenderer,
            g = i(82),
            m = i(67),
            v = i(71),
            y = i(81).DefaultProperty,
            w = i(83),
            b = w.PercentageFormatter,
            S = w.NumericFormatter;
        inherit(o, c), o.prototype.i18nCache = {
            pnl: $.t("{0} P&L: {1}"),
            open: $.t("Open", {
                context: "line_tool_position"
            }),
            closed: $.t("Closed", {
                context: "line_tool_position"
            }),
            ratio: $.t("Risk/Reward Ratio: {0}"),
            stop: $.t("Stop: {0} ({1})"),
            target: $.t("Target: {0} ({1})")
        }, o.prototype._formatInTicks = function(t) {
            var e = this._model.mainSeries().base();
            return Math.round(t * e)
        }, o.INDEX_ENTRY = 0, o.INDEX_CLOSE = 1, o.INDEX_ACTUALENTRY = 2, o.INDEX_ACTUALCLOSE = 3, o.prototype.isLabelVisible = function() {
            return this.isHoveredSource() || this.isSelectedSource()
        }, o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype._updateImpl = function() {
            var t, e, i, n, r, s, a, l, h;
            if (c.prototype.update.call(this), this._stopLevel = null, this._profitLevel = null, t = this._model.timeScale(), e = this._source.priceScale(), e && !e.isEmpty() && !t.isEmpty() && 0 !== this._source.points().length && 0 !== this._points.length && this._model.mainSeries().bars().last() && !(this._source.points().length < 2) && 0 !== this._model.mainSeries().bars().length) {
                if (this._isClosed = 4 === this._source.points().length, this._isClosed) {
                    if (i = this._source.points()[o.INDEX_ACTUALCLOSE].price, this._source.points()[o.INDEX_ACTUALCLOSE].index < parseInt(this._source._model.mainSeries().bars().first())) return;
                    n = Math.min(parseInt(this._source._model.mainSeries().bars().last()), this._source.points()[o.INDEX_ACTUALCLOSE].index), this._closeBar = this._source._model.timeScale().indexToCoordinate(n)
                } else {
                    if (this._source.points()[o.INDEX_CLOSE].index < parseInt(this._source._model.mainSeries().bars().first())) return;
                    n = Math.min(parseInt(this._source._model.mainSeries().bars().last()), this._source.points()[o.INDEX_CLOSE].index), r = this._model.mainSeries().bars().valueAt(n), i = r[TradingView.CLOSE_PLOT], this._closeBar = this._source._model.timeScale().indexToCoordinate(n)
                }
                s = this._source.priceScale(), a = this._source.stopPrice(), l = this._source.profitPrice(), this._pl = this._source.points().length > 1 ? this._source.calculatePL(i) : 0, s.isPercent() && (h = this._source.ownerSource().firstValue(), a = s.priceRange().convertToPercent(a, h), l = s.priceRange().convertToPercent(l, h), i = s.priceRange().convertToPercent(i, h)), this._entryLevel = this._points[o.INDEX_ENTRY].y, this._stopLevel = e.priceToCoordinate(a), this._profitLevel = e.priceToCoordinate(l), this._closeLevel = e.priceToCoordinate(i), this._closeBar = this._source._model.timeScale().indexToCoordinate(n)
            }
        }, o.prototype.renderer = function() {
            var e, i, n, r, s, a, l, c, u, p, g, y, w, b, S, T, x, C, P, k, I, E, L, V, M, A, D, O, R, $, B, z, N;
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), e = new v, this._points.length < 2 || this._source.points().length < 2 ? e : (i = this, n = this._source.properties(), r = this._points[o.INDEX_ENTRY].x, s = this._points[o.INDEX_ACTUALENTRY] ? this._points[o.INDEX_ACTUALENTRY].x : this._points[o.INDEX_CLOSE].x, a = this._points[o.INDEX_ACTUALCLOSE] ? this._points[o.INDEX_ACTUALCLOSE].x : this._points[o.INDEX_CLOSE].x, l = this._points[o.INDEX_CLOSE].x, c = new t.Point(r, this._entryLevel), u = new t.Point(l, this._stopLevel), p = {}, p.points = [c, u], p.color = "white", p.linewidth = 0, p.backcolor = n.stopBackground.value(), p.fillBackground = !0, p.transparency = n.stopBackgroundTransparency.value(), e.append(new _(p, new m(m.MOVEPOINT), new m(m.MOVEPOINT))), this._pl < 0 && (c = new t.Point(s, this._entryLevel), u = new t.Point(a, this._closeLevel), p = {}, p.points = [c, u], p.color = "white", p.linewidth = 0, p.backcolor = n.stopBackground.value(), p.fillBackground = !0, g = .01 * n.stopBackgroundTransparency.value(), y = 100 * (1 - g * g * g), w = 100 - y, p.transparency = w, e.append(new _(p, new m(m.MOVEPOINT), new m(m.MOVEPOINT)))), c = new t.Point(r, this._entryLevel), u = new t.Point(l, this._profitLevel), p = {}, p.points = [c, u], p.color = "white", p.linewidth = 0, p.backcolor = n.profitBackground.value(), p.fillBackground = !0, p.transparency = n.profitBackgroundTransparency.value(), e.append(new _(p, new m(m.MOVEPOINT), new m(m.MOVEPOINT))), this._pl > 0 && (c = new t.Point(s, this._entryLevel), u = new t.Point(a, this._closeLevel), p = {}, p.points = [c, u], p.color = "white", p.linewidth = 0, p.backcolor = n.profitBackground.value(), p.fillBackground = !0, g = .01 * n.profitBackgroundTransparency.value(), b = 100 * (1 - g * g * g), S = 100 - b, p.transparency = S, e.append(new _(p, new m(m.MOVEPOINT), new m(m.MOVEPOINT)))), T = function(t, n, o) {
                var r = {};
                r.points = [t, n], r.width = i._model.timeScale().width(), r.height = i._source.priceScale().height(), r.color = o || i._source.properties().linecolor.value(), r.linewidth = i._source.properties().linewidth.value(), r.linestyle = CanvasEx.LINESTYLE_SOLID, r.extendleft = !1, r.extendright = !1, r.leftend = h.LINEEND_NORMAL, r.rightend = h.LINEEND_NORMAL, e.append(new d(r))
            }, this._points[o.INDEX_ACTUALENTRY] && (c = this._points[o.INDEX_ACTUALENTRY], u = this._isClosed ? this._points[o.INDEX_ACTUALCLOSE] : new t.Point(this._closeBar, this._closeLevel), p = {}, p.points = [c, u], p.width = i._model.timeScale().width(), p.height = i._source.priceScale().height(), p.color = i._source.properties().linecolor.value(), p.linewidth = 1, p.linestyle = CanvasEx.LINESTYLE_DASHED, p.extendleft = !1, p.extendright = !1, p.leftend = h.LINEEND_NORMAL, p.rightend = h.LINEEND_ARROW, e.append(new d(p))), i = this, x = function(t, o, r, s, a, l) {
                if (i.isLabelVisible() || TradingView.printing) {
                    var c = {};
                    c.points = [t], c.text = o, c.color = n.textcolor.value(), c.font = n.font.value(), c.offsetX = 3, c.offsetY = a, c.vertAlign = s, c.horzAlign = "center", c.backgroundRoundRect = 4, c.backgroundColor = TradingView.resetTransparency(r), c.fontsize = n.fontsize.value(), c.backgroundHorzInflate = 4, c.backgroundVertInflate = 2, l && (c.borderColor = l), e.append(new f(c, i._rendererCache))
                }
            }, C = this._source.entryPrice(), P = this._source.stopPrice(), k = this._source.profitPrice(), I = Math.abs(P - C), E = Math.round(1e4 * I / C) / 100, L = Math.abs(k - C), V = Math.round(1e4 * L / C) / 100, M = Math.abs(C - k) / Math.abs(C - P), c = new t.Point(r, this._points[o.INDEX_ENTRY].y), u = new t.Point(l, this._points[o.INDEX_ENTRY].y), T(c, u), A = new t.Point((r + l) / 2, Math.round(this._points[0].y) + .5), D = "", this._points[1] && void 0 !== this._pl && (O = this._isClosed ? this.i18nCache.closed : this.i18nCache.open, D = this.i18nCache.pnl.format(O, this._source.priceScale().formatter().format(this._pl)) + "\n"), D += this.i18nCache.ratio.format(this._numericFormatter.format(Math.round(100 * M) / 100)) + " ", R = n.linecolor.value(), this._pl < 0 ? R = n.stopBackground.value() : this._pl > 0 && (R = n.profitBackground.value()), x(A, D, R, "middle", 0, "white"), c = new t.Point(r, this._stopLevel), u = new t.Point(l, this._stopLevel), T(c, u, n.stopBackground.value()),
                A = new t.Point((r + l) / 2, this._stopLevel), D = this.i18nCache.stop.format(this._source.priceScale().formatter().format(I), this._percentageFormatter.format(E)), x(A, D, n.stopBackground.value(), P > C ? "bottom" : "top", P > C ? -12 : -1), c = new t.Point(r, this._profitLevel), u = new t.Point(l, this._profitLevel), T(c, u, n.profitBackground.value()), A = new t.Point((r + l) / 2, this._profitLevel), D = this.i18nCache.target.format(this._source.priceScale().formatter().format(L), this._percentageFormatter.format(V)), x(A, D, n.profitBackground.value(), P > C ? "top" : "bottom", P > C ? -1 : -12), this.isAnchorsRequired() && ($ = this._points[0].clone(), $.data = 0, B = new t.Point(r, this._stopLevel), B.data = 1, z = new t.Point(r, this._profitLevel), z.data = 2, N = new t.Point(l, $.y), N.data = 3, e.append(this.createLineAnchor({
                points: [$, B, z, N]
            }))), e)
        }, inherit(r, u), r.prototype.update = function() {
            this._invalidated = !0
        }, r.prototype.updateImpl = function() {
            if (0 !== this._source.points().length && this._source.priceScale() && !this._source.priceScale().isEmpty()) {
                var t = this._source.properties()[this._pricePropName].value();
                this._background = this._source.properties()[this._colorPropName].value(), this._coordinate = this._source.priceScale().priceToCoordinate(t), this._text = this._source.priceScale() ? this._source.priceScale().formatter().format(t) : ""
            }
        }, r.prototype.renderer = function() {
            this._invalidated && (this.updateImpl(), this._invalidated = !1);
            var t = {
                text: this._text,
                coordinate: this._coordinate,
                color: this.color(),
                background: TradingView.resetTransparency(this._background),
                visible: !0
            };
            return new p(t)
        }, inherit(s, h), s.version = 2, s.prototype.i18nCache = {
            title: $.t("Risk/Reward")
        }, s.prototype.migrateVersion = function(t, e, i) {
            var n, o, r, s;
            1 === t && this._points.length >= 1 && (n = [], n.push(this._points[0]), o = this._points[0], o = {
                price: o.price,
                index: o.index + 50
            }, n.push(o), this._points[1] && n.push(this._points[1]), this._points[2] && n.push(this._points[2]), this._points = n, this._timePoint.length >= 1 && (r = [], o = this._timePoint[0], r.push(o), s = {
                price: o.price,
                time_t: o.time_t,
                offset: o.offset + 50
            }, r.push(s), this._timePoint[1] && n.push(this._points[1]), this._timePoint[2] && n.push(this._points[2]), this._timePoint = r))
        }, s.prototype.checkAlert = function() {
            this.recalculate()
        }, s.prototype.priceAxisViews = function(t, e) {
            return this._isActualSymbol ? e !== this.priceScale() || this._model.paneForSource(this) !== t ? null : [this._entryPriceAxisView, this._stopPriceAxisView, this._profitPriceAxisView] : null
        }, s.prototype.updateAllViews = function() {
            this._isActualSymbol && this._properties.visible.value() && (g.hideAllDrawings().value() && this.userEditEnabled() || (h.prototype.updateAllViews.call(this), this._entryPriceAxisView.update(), this._stopPriceAxisView.update(), this._profitPriceAxisView.update()))
        }, s.prototype.setPoint = function(t, e) {
            var i, n = this.priceScale();
            switch (n.isPercent() && (i = this.ownerSource().firstValue(), e.price = n.priceRange().convertFromPercent(e.price, i)), t) {
                case 0:
                    e.price = this._roundPrice(e.price), n.isPercent() && (e.price = n.priceRange().convertToPercent(e.price, i)), h.prototype.setPoint.call(this, t, e), this.recalculate();
                    break;
                case 1:
                    this.properties().stopPrice.setValue(this.preparseStopPrice(e.price));
                    break;
                case 2:
                    this.properties().targetPrice.setValue(this.preparseProfitPrice(e.price));
                    break;
                case 3:
                    e.price = this._roundPrice(e.price), n.isPercent() && (e.price = n.priceRange().convertToPercent(e.price, i)), h.prototype.setPoint.call(this, 1, e), this.recalculate()
            }
        }, s.PriceProperty = function(t, e) {
            h.PointPriceProperty.call(this, t, e)
        }, inherit(s.PriceProperty, h.PointPriceProperty), s.PriceProperty.prototype.setValue = function(t) {
            var e = this._lineSource.points()[this._pointIndex];
            e.price = parseFloat(t), this._lineSource.setPoint(this._pointIndex, e), this._lineSource.recalculate(), this._lineSource._model.updateSource(this._lineSource), this._listeners.fire(this), this._lineSource.endChanging()
        }, s.StopPriceProperty = function(t) {
            s.PriceProperty.call(this, t, 1)
        }, inherit(s.StopPriceProperty, s.PriceProperty), s.StopPriceProperty.prototype.value = function() {
            var t = this._lineSource.stopPrice(),
                e = this._lineSource.ownerSource().formatter(),
                i = e.parse(e.format(t));
            return i.price ? i.price : i.value
        }, s.StopPriceProperty.prototype.setValue = function(t) {
            var e = Math.round(Math.abs(t - this._lineSource.entryPrice()) * this._lineSource._model.mainSeries().base());
            this._lineSource.properties().stopLevel.setValue(e), this._lineSource.properties().stopLevel.listeners().fire(this._lineSource.properties().stopLevel)
        }, s.TargetPriceProperty = function(t) {
            s.PriceProperty.call(this, t, 2)
        }, inherit(s.TargetPriceProperty, s.PriceProperty), s.TargetPriceProperty.prototype.value = function() {
            var t = this._lineSource.profitPrice(),
                e = this._lineSource.ownerSource().formatter(),
                i = e.parse(e.format(t));
            return i.price ? i.price : i.value
        }, s.TargetPriceProperty.prototype.setValue = function(t) {
            var e = Math.round(Math.abs(t - this._lineSource.entryPrice()) * this._lineSource._model.mainSeries().base());
            this._lineSource.properties().profitLevel.setValue(e), this._lineSource.properties().profitLevel.listeners().fire(this._lineSource.properties().profitLevel)
        }, s.prototype.pointsCount = function() {
            return 1
        }, s.prototype.title = function() {
            return this.i18nCache.title
        }, s.prototype.addPoint = function(t) {
            var e, i, n, o = $.extend({}, t),
                r = this.priceScale();
            return r.isPercent() && (e = this.ownerSource().firstValue(), o.price = r.priceRange().convertFromPercent(o.price, e)), o.price = this._roundPrice(o.price), this._points.push(o), i = {
                price: o.price,
                index: o.index + 50
            }, this._points.push(i), n = this.calculateActualEntry(o, i), n && (this._points.push(n), i = this.findClosePoint(n, i), i && this._points.push(i)), this._lastPoint = null, this.normalizePoints(), this.createServerPoints(), !0
        }, s.prototype._roundPrice = function(t) {
            var e = this._model.mainSeries().base(),
                i = Math.round(t * e);
            return i / e
        }, s.prototype.recalculate = function() {
            var t, e, i, n, o;
            this.properties().interval.value() === this._model.mainSeries().interval() && 0 !== this.points().length && (t = this.properties().targetPrice.value(), e = this.properties().stopPrice.value(), i = [this._points[0], this._points[1]], n = this.calculateActualEntry(this.points()[0], this.points()[1]), n && (i.push(n), o = this.findClosePoint(n, this.points()[1]), o && i.push(o)), this._points = i, t !== this.properties().targetPrice.value() && this.properties().targetPrice._listeners.fire(this.properties().targetPrice), e !== this.properties().stopPrice.value() && this.properties().stopPrice._listeners.fire(this.properties().stopPrice))
        }, s.prototype.startMoving = function(t) {
            t.price = this._roundPrice(t.price), h.prototype.startMoving.call(this, t)
        }, s.prototype.move = function(t) {
            t.price = this._roundPrice(t.price), h.prototype.move.call(this, t), this.recalculate(), this._entryPriceAxisView.update()
        }, s.prototype.correctPoints = function(t) {
            h.prototype.correctPoints.call(this, [t[0], t[1]])
        }, s.prototype.entryPrice = function() {
            return this.points()[0].price
        }, s.prototype.findClosePoint = function(t, e) {
            var i, n, o, r = this._model.mainSeries().bars(),
                s = parseInt(r.first(), 10),
                a = Math.max(t.index, s),
                l = parseInt(r.last(), 10);
            for (i = a; i <= Math.min(l, e.index); i++)
                if (n = r.valueAt(i), o = this.checkStopPrice(n), null != o) return {
                    index: i,
                    price: o
                };
            return null
        }, s.prototype.calculateActualEntry = function(t, e) {
            var i, n, o = this._model.mainSeries().bars(),
                r = parseInt(o.first(), 10),
                s = Math.max(t.index, r),
                a = t.price,
                l = parseInt(o.last(), 10);
            for (i = s; i <= Math.min(l, e.index); i++)
                if (n = o.valueAt(i), n[TradingView.HIGH_PLOT] >= a && n[TradingView.LOW_PLOT] <= a) return {
                    index: i,
                    price: a
                };
            return null
        }, inherit(a, s), a.prototype.i18nCache = {
            title: $.t("Risk/Reward short")
        }, a.prototype.title = function() {
            return this.i18nCache.title
        }, a.prototype.stopPrice = function() {
            return this.entryPrice() + this.properties().stopLevel.value() / this._model.mainSeries().base()
        }, a.prototype.profitPrice = function() {
            return this.entryPrice() - this.properties().profitLevel.value() / this._model.mainSeries().base()
        }, a.prototype.calculatePL = function(t) {
            return this.entryPrice() - t
        }, a.prototype.preparseStopPrice = function(t) {
            t = this._roundPrice(t);
            var e = this.entryPrice() + 1 / this._model.mainSeries().base();
            return Math.max(t, e)
        }, a.prototype.preparseProfitPrice = function(t) {
            t = this._roundPrice(t);
            var e = this.entryPrice() - 1 / this._model.mainSeries().base();
            return Math.min(t, e)
        }, a.prototype.checkStopPrice = function(t) {
            var e = this.stopPrice(),
                i = this.profitPrice();
            return t[TradingView.HIGH_PLOT] >= e ? this.stopPrice() : t[TradingView.LOW_PLOT] <= i ? this.profitPrice() : null
        }, l.prototype.i18nCache = {
            title: $.t("Risk/Reward long")
        }, inherit(l, s), l.prototype.stopPrice = function() {
            return this.entryPrice() - this.properties().stopLevel.value() / this._model.mainSeries().base()
        }, l.prototype.profitPrice = function() {
            return this.entryPrice() + this.properties().profitLevel.value() / this._model.mainSeries().base()
        }, l.prototype.calculatePL = function(t) {
            return t - this.entryPrice()
        }, l.prototype.preparseStopPrice = function(t) {
            t = this._roundPrice(t);
            var e = this.entryPrice() - 1 / this._model.mainSeries().base();
            return Math.min(t, e)
        }, l.prototype.preparseProfitPrice = function(t) {
            t = this._roundPrice(t);
            var e = this.entryPrice() + 1 / this._model.mainSeries().base();
            return Math.max(t, e)
        }, l.prototype.checkStopPrice = function(t) {
            var e = this.stopPrice(),
                i = this.profitPrice();
            return t[TradingView.LOW_PLOT] <= e ? this.stopPrice() : t[TradingView.HIGH_PLOT] >= i ? this.profitPrice() : null
        }, l.prototype.title = function() {
            return this.i18nCache.title
        }, e.LineToolRiskReward = s, e.LineToolRiskRewardLong = l, e.LineToolRiskRewardShort = a
    }).call(e, i(40), i(54))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            r.call(this, t, e), this._invalidated = !0
        }

        function o(t, e) {
            this._constructor = "LineToolPolyline";
            var i;
            e ? i = e : (i = new c("linetoolpolyline"), i.filled.setValue(!1)), s.call(this, t, new n(this, t), i), i.addExclusion("filled")
        }
        var r = i(115),
            s = i(77).LineDataSource,
            a = i(221),
            l = i(71),
            c = i(81).DefaultProperty;
        inherit(n, r), n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype.updateImpl = function() {
            r.prototype.update.call(this), this._invalidated = !1
        }, n.prototype.renderer = function() {
            var t, e;
            return this._invalidated && this.updateImpl(), t = {}, t.points = this._points, t.color = this._source.properties().linecolor.value(), t.linewidth = this._source.properties().linewidth.value(), t.linestyle = this._source.properties().linestyle.value(), t.filled = this._source.properties().filled.value(), t.backcolor = this._source.properties().backgroundColor.value(), t.fillBackground = this._source.properties().fillBackground.value(), t.transparency = this._source.properties().transparency.value(), this.isAnchorsRequired() ? (e = new l, e.append(new a(t)), this.addAnchors(e), e) : new a(t)
        }, inherit(o, s), o.prototype.pointsCount = function() {
            return -1
        }, o.prototype.title = function() {
            return "Polyline"
        }, o.prototype.addPoint = function(t) {
            var i, n, o, r, a, l, c, h, d, u, p, f, _ = this._model.timeScale().indexToCoordinate(t.index),
                g = t.price,
                m = null;
            if (this.priceScale().isPercent() && (m = this.ownerSource().firstValue()), i = this.priceScale().priceToCoordinate(g), n = 5, this._points.length > 0) {
                if (o = this._points[this._points.length - 1], r = this._model.timeScale().indexToCoordinate(o.index), a = o.price, this.priceScale().isPercent() && (a = this.priceScale().priceRange().convertToPercent(a, m)), l = this.priceScale().priceToCoordinate(a), c = new e.Point(_, i).substract(new e.Point(r, l)).length(), n > c) return this._lastPoint = null, this.normalizePoints(), this.createServerPoints(), !0;
                if (h = this._points[0], d = this._model.timeScale().indexToCoordinate(h.index), u = h.price, this.priceScale().isPercent() && (u = this.priceScale().priceRange().convertToPercent(u, m)), p = this.priceScale().priceToCoordinate(u), f = new e.Point(_, i).substract(new e.Point(d, p)).length(), n > f) return this._properties.filled.setValue(!0), this._lastPoint = null, this.normalizePoints(), this.createServerPoints(), !0
            }
            return s.prototype.addPoint.call(this, t)
        }, o.prototype.setPoint = function(t, i) {
            var n, o, r, a, l, c, h;
            s.prototype.setPoint.call(this, t, i), this._model.timeScale().isEmpty() || this.priceScale().isEmpty() || t !== this._points.length - 1 && 0 !== t || (n = 5, o = this._model.timeScale().indexToCoordinate(i.index), r = this.priceScale().priceToCoordinate(i.price), a = t === this._points.length - 1 ? this._points[0] : this._points[this._points.length - 1], l = this._model.timeScale().indexToCoordinate(a.index), c = this.priceScale().priceToCoordinate(a.price), h = new e.Point(o, r).substract(new e.Point(l, c)).length(), n > h && this._properties.filled.setValue(!0))
        }, t.exports = o
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t) {
            this._data = t, this._targetFontSize1 = 11, this._targetFontSize2 = 11, this._targetFontSize3 = 14, this._font = "Arial", this._sourceFontSize1 = 12, this._sourceFontSize2 = 10
        }

        function o(t, e) {
            s.call(this, t, e), this._clockWhite = d("prediction-clock-white", TradingView.wrapUrl("/static/images/prediction-clock-white.png")), this._clockBlack = d("prediction-clock-black", TradingView.wrapUrl("/static/images/prediction-clock-black.png")), this._successIcon = d("prediction-success-white", TradingView.wrapUrl("/static/images/prediction-success-white.png")), this._failureIcon = d("prediction-failure-white", TradingView.wrapUrl("/static/images/prediction-failure-white.png")), this._percentageFormatter = new _, this._invalidated = !0
        }

        function r(t, e) {
            this._constructor = "LineToolPrediction";
            var i = e || new p("linetoolprediction");
            i.merge({
                status: r.ALERT_STATUS_WAITING
            }), a.call(this, t, new o(this, t), i)
        }
        var s = i(115),
            a = i(77).LineDataSource,
            l = i(15),
            c = i(67),
            h = i(71),
            d = i(258),
            u = i(61).RGBColor,
            p = i(81).DefaultProperty,
            f = i(83),
            _ = f.PercentageFormatter,
            g = f.DateFormatter,
            m = f.TimeFormatter,
            v = f.TimeSpanFormatter;
        n.prototype.drawBalloon = function(t, i, n, o, r, s) {
            var a, l, c = 6,
                h = 5,
                d = 5,
                u = s || 20,
                p = 3;
            return t.beginPath(), "down" === r ? (a = new e.Point(i.x - u, i.y - c - d - o), t.moveTo(a.x + p, a.y), t.lineTo(a.x + n - p, a.y), t.arcTo(a.x + n, a.y, a.x + n, a.y + p, p), t.lineTo(a.x + n, a.y + o - p), t.arcTo(a.x + n, a.y + o, a.x + n - p, a.y + o, p), t.lineTo(a.x + u + h, a.y + o), t.lineTo(a.x + u, a.y + o + d), t.lineTo(a.x + u - h, a.y + o), t.lineTo(a.x + p, a.y + o), t.arcTo(a.x, a.y + o, a.x, a.y + o - p, p), t.lineTo(a.x, a.y + p), t.arcTo(a.x, a.y, a.x + p, a.y, p), a) : (l = new e.Point(i.x - u, i.y + c + d + o), t.moveTo(l.x + p, l.y), t.lineTo(l.x + n - p, l.y), t.arcTo(l.x + n, l.y, l.x + n, l.y - p, p), t.lineTo(l.x + n, l.y - o + p), t.arcTo(l.x + n, l.y - o, l.x + n - p, l.y - o, p), t.lineTo(l.x + u + h, l.y - o), t.lineTo(l.x + u, l.y - o - d), t.lineTo(l.x + u - h, l.y - o), t.lineTo(l.x + p, l.y - o), t.arcTo(l.x, l.y - o, l.x, l.y - o + p, p), t.lineTo(l.x, l.y - p), t.arcTo(l.x, l.y, l.x + p, l.y, p), new e.Point(l.x, l.y - o))
        }, n.prototype.drawTargetLabel = function(t) {
            var e, i, n, o, s, a, l, c, h, d, u, p, f, _, g, m, v, y, w, b, S, T, x = this._data.points[1];
            if (t.save(), t.translate(.5, .5), t.font = "normal " + this._targetFontSize3 + "px " + this._font, e = 1.5 * this._targetFontSize1 + 1.5 * this._targetFontSize2 + 3, i = t.measureText(this._data.targetLine1).width, n = t.measureText(this._data.targetLine2).width, t.font = "normal " + this._targetFontSize2 + "px " + this._font, o = t.measureText(this._data.targetLine3).width, s = t.measureText(this._data.targetLine4).width, a = Math.max(i + n, o + s + 10) + 20, l = "up" === this._data.direction ? "down" : "up", c = x.x + a - t.canvas.width + 5, c = Math.max(20, Math.min(a - 15, c)), h = this.drawBalloon(t, x, a, e, l, c), t.save(), t.fillStyle = TradingView.generateColor(this._data.targetBackColor, this._data.transparency), t.fill(), t.restore(), t.save(), t.lineWidth = 2, t.strokeStyle = TradingView.generateColor(this._data.targetStrokeColor, this._data.transparency), t.stroke(), t.restore(), d = 3, t.beginPath(), t.arc(x.x, x.y, d, 0, 2 * Math.PI, !1), t.fillStyle = this._data.centersColor, t.fill(), t.textAlign = "left", u = 6, p = 4, t.fillStyle = this._data.targetTextColor, t.font = "normal " + this._targetFontSize3 + "px " + this._font, t.fillText(this._data.targetLine1, h.x + u, h.y + this._targetFontSize1 + p), f = 13, _ = 5, t.fillText(this._data.targetLine2, h.x + u + i + _, h.y + this._targetFontSize1 + p), t.font = "normal " + this._targetFontSize2 + "px " + this._font, g = h.y + this._targetFontSize1 + 2 * p + this._targetFontSize2, t.fillText(this._data.targetLine3, h.x + u, g), t.drawImage(this._data.clockWhite, h.x + u + o + 6, g - this._targetFontSize2 + 3), t.fillText(this._data.targetLine4, h.x + u + o + f + 5, g), !this._data.status) return void t.restore();
            switch (m = this._targetFontSize1 + 4, t.font = "bold " + this._targetFontSize1 + "px " + this._font, this._data.status) {
                case r.ALERT_STATUS_SUCCESS:
                    v = $.t("SUCCESS"), y = TradingView.generateColor(this._data.successBackground, this._data.transparency), w = this._data.successTextColor, b = this._data.successIcon;
                    break;
                case r.ALERT_STATUS_FAILURE:
                    v = $.t("FAILURE"), y = TradingView.generateColor(this._data.failureBackground, this._data.transparency), w = this._data.failureTextColor, b = this._data.failureIcon
            }
            S = t.measureText(v).width, T = Math.round((a - S) / 2), t.fillStyle = y, "up" === this._data.direction ? (t.roundRect(h.x - 1, h.y - m - 2, a + 2, m, 5), t.fill(), t.fillStyle = w, t.fillText(v, h.x + T, h.y - 5), t.drawImage(b, h.x + T - 13, h.y - 14)) : (t.roundRect(h.x - 1, h.y + e + 3, a + 2, m, 5), t.fill(), t.fillStyle = w, t.fillText(v, h.x + T, h.y + e + m - 1), t.drawImage(b, h.x + T - 13, h.y + e + 5)), t.restore()
        }, n.prototype.drawStartLabel = function(t) {
            var e, i, n, o, r, s, a, l, c;
            t.save(), t.translate(.5, .5), t.font = "normal " + this._sourceFontSize1 + "px " + this._font, e = 1.5 * this._sourceFontSize1 + 1.5 * this._sourceFontSize2, i = t.measureText(this._data.sourceLine1).width, t.font = "normal " + this._fontsize2 + "px " + this._font, n = t.measureText(this._data.sourceLine2).width, o = Math.max(i, n) - 5, r = this._data.points[0], s = this.drawBalloon(t, r, o, e, this._data.direction), t.fillStyle = TradingView.generateColor(this._data.sourceBackColor, this._data.transparency), t.fill(), t.lineWidth = 2, t.strokeStyle = TradingView.generateColor(this._data.sourceStrokeColor, this._data.transparency), t.stroke(), a = 3, t.beginPath(), t.arc(r.x, r.y, a, 0, 2 * Math.PI, !1), t.fillStyle = this._data.centersColor, t.fill(), t.textAlign = "left", l = 3, c = 2, t.fillStyle = this._data.sourceTextColor, t.font = "normal " + this._sourceFontSize1 + "px " + this._font, t.fillText(this._data.sourceLine1, s.x + l, s.y + this._sourceFontSize1 + c), t.font = "normal " + this._sourceFontSize2 + "px " + this._font, t.fillText(this._data.sourceLine2, s.x + l, s.y + this._sourceFontSize1 + 2 * c + this._sourceFontSize2), t.restore()
        }, n.prototype.draw = function(t) {
            var e, i, n, o, r, s, a, l, c, h, d, u, p, f;
            if (!(this._data.points.length < 2)) {
                if (t.lineCap = "butt", t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, t.lineStyle = this._data.linestyle, e = this._data.points[0], i = this._data.points[1], n = i.substract(e), Math.abs(n.x) < 1 || Math.abs(n.y) < 1 ? (t.beginPath(), t.moveTo(e.x, e.y), t.lineTo(i.x, i.y), t.stroke()) : (t.save(), t.beginPath(), t.translate(e.x, e.y), t.scale(1, n.y / n.x), t.moveTo(0, 0), t.arcTo(n.x, 0, n.x, n.x, Math.abs(n.x)), t.lineTo(n.x, n.x), t.restore(), t.stroke()), this.drawTargetLabel(t), this.drawStartLabel(t), o = Math.max(8, 4 * this._data.linewidth), t.fillStyle = this._data.color, r = n.y < 0 ? 1 : -1, Math.abs(n.x) < 1 || Math.abs(n.y) < 1) s = Math.atan(n.x / n.y);
                else {
                    if (a = Math.abs(n.x), l = Math.abs(n.y), c = 0, h = Math.PI / 2, d = (c + h) / 2, n.length() > o)
                        for (;;) {
                            if (u = a * Math.sin(d), p = l * (1 - Math.cos(d)), f = Math.sqrt((u - a) * (u - a) + (p - l) * (p - l)), Math.abs(f - o) < 1) break;
                            f > o ? c = d : h = d, d = (c + h) / 2
                        }
                    s = Math.atan((a - u) / (l - p)), n.x * n.y < 0 && (s = -s)
                }
                t.save(), t.beginPath(), t.translate(i.x, i.y), t.rotate(-s), t.moveTo(0, 0), t.lineTo(-o / 2, r * o), t.lineTo(o / 2, r * o), t.lineTo(0, 0), t.restore(), t.fill()
            }
        }, n.prototype.targetLabelHitTest = function(t) {
            var e, i, n, o, r, s, a, l, h, d = this._data.points[1],
                u = 1.5 * this._targetFontSize1 + 1.5 * this._targetFontSize2,
                p = this._targetFontSize1 * this._data.targetLine1.length,
                f = this._targetFontSize1 * this._data.targetLine2.length,
                _ = this._targetFontSize2 * this._data.targetLine3.length,
                g = this._targetFontSize2 * this._data.targetLine4.length;
            return this._data.status && (u += 1.5 * this._targetFontSize1), e = Math.max(p + f, _ + g) - 20, i = 20, n = 5, o = "up" === this._data.direction ? -1 : 1, r = d.x - i, s = d.y + n * o, a = d.y + (n + u) * o, l = Math.min(s, a), h = Math.max(s, a), t.x >= r && t.x <= r + e && t.y >= l && t.y <= h ? new c(c.MOVEPOINT) : null
        }, n.prototype.sourceLabelHitTest = function(t) {
            var e = 1.5 * this._sourceFontSize1 + 1.5 * this._sourceFontSize2,
                i = this._sourceFontSize1 * this._data.sourceLine1.length,
                n = this._sourceFontSize2 * this._data.sourceLine2.length,
                o = Math.max(i, n),
                r = this._data.points[0],
                s = 20,
                a = 5,
                l = "up" === this._data.direction ? 1 : -1,
                h = r.x - s,
                d = r.y + a * l,
                u = r.y + (a + e) * l,
                p = Math.min(d, u),
                f = Math.max(d, u);
            return t.x >= h && t.x <= h + o && t.y >= p && t.y <= f ? new c(c.MOVEPOINT) : null
        }, n.prototype.hitTest = function(t) {
            var i, n, o, r, s, a, l, h, d;
            return this._data.points.length < 2 ? null : (i = this._data.points[0], n = this._data.points[1], o = n.substract(i), o = n.substract(i), r = t.substract(i), s = Math.abs(o.x), a = Math.abs(o.y), l = e.sign(o.y) * (a - a * Math.sqrt(1 - r.x * r.x / (s * s))), h = 3, Math.abs(l - r.y) < h ? new c(c.MOVEPOINT) : (d = this.targetLabelHitTest(t), d ? d : this.sourceLabelHitTest(t)))
        }, inherit(o, s), o.prototype.renderer = function() {
            var t, e;
            return this._invalidated && (this.updateImpl(), this._invalidated = !1), t = {}, t.points = this._points, t.color = this._source.properties().linecolor.value(), t.linewidth = this._source.properties().linewidth.value(), t.targetLine1 = this._targetLine1, t.targetLine2 = this._targetLine2, t.targetLine3 = this._targetLine3, t.targetLine4 = this._targetLine4, t.status = this._source.properties().status.value(), t.transparency = this._source.properties().transparency.value(), t.targetBackColor = this._source.properties().targetBackColor.value(), t.targetStrokeColor = this._source.properties().targetStrokeColor.value(), t.targetTextColor = this._source.properties().targetTextColor.value(), t.sourceBackColor = this._source.properties().sourceBackColor.value(), t.sourceStrokeColor = this._source.properties().sourceStrokeColor.value(), t.sourceTextColor = this._source.properties().sourceTextColor.value(), t.successBackground = this._source.properties().successBackground.value(), t.successTextColor = this._source.properties().successTextColor.value(), t.failureBackground = this._source.properties().failureBackground.value(), t.failureTextColor = this._source.properties().failureTextColor.value(), t.intermediateBackColor = this._source.properties().intermediateBackColor.value(), t.intermediateTextColor = this._source.properties().intermediateTextColor.value(), t.sourceLine1 = this._sourceLine1, t.sourceLine2 = this._sourceLine2, t.direction = this._direction, t.clockWhite = this._clockWhite, t.clockBlack = this._clockBlack, t.successIcon = this._successIcon, t.failureIcon = this._failureIcon, t.finished = this._finished, t.centersColor = new u(this._model._properties.paneProperties.background._value).blackWhiteContrast(), this.isAnchorsRequired() ? (e = new h, e.append(new n(t)), this.addAnchors(e), e) : new n(t)
        }, o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.updateImpl = function() {
            var t, e, i, n, o, a, c, h, d, u, p, f;
            s.prototype.update.call(this), this._targetLine1 = "", this._targetLine2 = "", this._targetLine3 = "", this._targetLine4 = "", this._source.points().length < 2 || this._source.priceScale() && (t = this._source.points()[1], e = this._source.points()[0], this._targetLine3 = this._source.priceScale().formatter().format(t.price), i = t.price - e.price, n = 0 > i ? "-" : "+", this._targetLine1 = this._source.priceScale().formatter().format(Math.abs(i)), o = Math.abs(Math.round(1e4 * (i / e.price)) / 100), this._targetLine1 = n + this._targetLine1 + " (" + n + this._percentageFormatter.format(o) + ")", a = this._model.timeScale().indexToUserTime(e.index), c = this._model.timeScale().indexToUserTime(t.index), h = e.time && t.time, h && (a = TradingView.isString(e.time) ? new Date(Date.parse(e.time)) : e.time, c = TradingView.isString(t.time) ? new Date(Date.parse(t.time)) : t.time), d = this._model.mainSeries().isDWM(), u = l.kind(this._model.mainSeries().interval()) === l.SECONDS, c && a && (this._targetLine4 = (new g).format(c), d || (this._targetLine4 = this._targetLine4 + "  " + new m(u ? "%h:%m:%s" : "%h:%m").format(c)), p = (c.valueOf() - a.valueOf()) / 1e3, this._targetLine2 = $.t("in", {
                    context: "dates"
                }) + " " + (new v).format(p)), this._sourceLine1 = this._source.priceScale().formatter().format(e.price), this._sourceLine2 = "", f = this._model.timeScale().indexToUserTime(e.index), f && (this._sourceLine2 = (new g).format(f), d || (this._sourceLine2 = this._sourceLine2 + " " + new m(u ? "%h:%m:%s" : "%h:%m").format(f))), this._direction = this._source.direction() === r.DIRECTION_UP ? "up" : "down", this._finished = this._model.lineBeingCreated() !== this._source && this._model.lineBeingEdited() !== this._source && this._model.sourceBeingMoved() !== this._source)
        }, r.ALERT_STATUS_WAITING = 0, r.ALERT_STATUS_SUCCESS = 1, r.ALERT_STATUS_FAILURE = 2, r.DIRECTION_UP = 1, r.DIRECTION_DOWN = 2, inherit(r, a), r.prototype.status = function() {
            return this._properties.status.value()
        }, r.prototype.setStatus = function(t) {
            return this._properties.status.setValue(t)
        }, r.prototype.pointsCount = function() {
            return 2
        }, r.prototype.title = function() {
            return "Forecast"
        }, r.prototype.restorePoints = function(t, e, i) {
            a.prototype.restorePoints.call(this, t, e, i), this.checkAlert()
        }, r.prototype.checkAlert = function() {
            var t, e, i, n, o;
            if (!(this._points.length < 2 || this._model.mainSeries().bars().isEmpty())) {
                if (t = this._points[1], this.status()) return void(t.index > this._model.timeScale().points().lastTimePointIndex() && this.setStatus(r.ALERT_STATUS_WAITING));
                e = this._model.timeScale().indexToTimePoint(t.index), e && (i = this._model.mainSeries().bars().valueAt(t.index), n = this.direction(), n === r.DIRECTION_UP && i[TradingView.HIGH_PLOT] >= t.price ? this.setStatus(r.ALERT_STATUS_SUCCESS) : n === r.DIRECTION_DOWN && i[TradingView.LOW_PLOT] <= t.price ? this.setStatus(r.ALERT_STATUS_SUCCESS) : (o = this._model.mainSeries().bars().last().value, i[TradingView.TIME_PLOT] !== o[TradingView.TIME_PLOT] && this.setStatus(r.ALERT_STATUS_FAILURE)))
            }
        }, r.prototype.addPoint = function(t) {
            var e = a.prototype.addPoint.call(this, t);
            return e && this.checkAlert(), e
        }, r.prototype.endChanging = function() {
            a.prototype.endChanging.call(this), this.setStatus(r.ALERT_STATUS_WAITING), this.checkAlert()
        }, r.prototype.onData = function(t) {
            a.prototype.onData.call(this, t), this.checkAlert()
        }, r.prototype.endMoving = function() {
            a.prototype.endMoving.call(this), this.setStatus(r.ALERT_STATUS_WAITING), this.checkAlert()
        }, r.prototype.direction = function() {
            var t, e;
            return this.points().length < 2 ? r.DIRECTION_UP : (t = this.points()[0], e = this.points()[1], e.price > t.price ? r.DIRECTION_UP : r.DIRECTION_DOWN)
        }, t.exports = r
    }).call(e, i(40))
}, function(t, e) {
    "use strict";
    t.exports = function(t, e) {
        var i = document.body,
            n = i[t];
        return n || (n = document.createElement("img"), n.src = e, i[t] = n), n
    }
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e, i) {
            this._data = t, this._measureCache = e, this._chartModel = i, this._points = t.points
        }

        function o(t, e, i) {
            s.call(this, t, e), this._image = d("price_label", TradingView.wrapUrl("/static/images/price_label.png")), this._rendererCache = {}, this._invalidated = !0
        }

        function r(t, e) {
            this._constructor = "LineToolPriceLabel";
            var i = e || new u("linetoolpricelabel");
            a.call(this, t, new o(this, t), i)
        }
        var s = i(115),
            a = i(77).LineDataSource,
            l = i(66).SelectionRenderer,
            c = i(67),
            h = i(71),
            d = i(258),
            u = i(81).DefaultProperty;
        n.prototype.draw = function(t) {
            var e, i, n, o, r, s, a, l, c;
            0 !== this._points.length && (t.font = [this._data.fontWeight, this._data.fontSize + "px", this._data.fontFamily].join(" "), e = t.measureText(this._data.label), e.height = this._data.fontSize, i = 3, n = 15, o = -9, r = {
                left: 10,
                top: 5
            }, s = e.width + 2 * r.left, a = e.height + 2 * r.top, l = this._points[0].x - o, c = this._points[0].y - (a + n), this._measureCache && $.extend(this._measureCache, {
                innerWidth: s,
                innerHeight: a,
                tailLeft: o,
                tailHeight: n
            }), t.translate(.5 + l, .5 + c), t.beginPath(), t.moveTo(12, a), t.lineTo(o, a + n), t.lineTo(o - 1, a + n - 1), t.lineTo(5, a), t.lineTo(i, a), t.arcTo(0, a, 0, 0, i), t.lineTo(0, i), t.arcTo(0, 0, s, 0, i), t.lineTo(s - i, 0), t.arcTo(s, 0, s, a, i), t.lineTo(s, a - i), t.arcTo(s, a, 0, a, i), t.lineTo(12, a), t.fillStyle = TradingView.generateColor(this._data.backgroundColor, this._data.transparency), t.fill(), t.strokeStyle = this._data.borderColor, t.lineWidth = 2, t.stroke(), t.closePath(), t.textBaseline = "top", t.fillStyle = this._data.color, t.fillText(this._data.label, r.left, r.top - 1), t.translate(-.5, -.5), t.beginPath(), t.arc(o, a + n, 2.5, 0, 2 * Math.PI, !1), t.fillStyle = TradingView.generateColor(this._data.borderColor, this._data.transparency), t.fill(), t.strokeStyle = this._chartModel.backgroundColor(), t.lineWidth = 1, t.stroke(), t.closePath())
        }, n.prototype.hitTest = function(t) {
            var i, n;
            return 0 === this._points.length ? null : (i = this._points[0].x - this._measureCache.tailLeft, n = this._points[0].y - (this._measureCache.innerHeight + this._measureCache.tailHeight), e.pointInRect(t, new e.Point(i, n), new e.Point(i + this._measureCache.innerWidth, n + this._measureCache.innerHeight)) ? new c(c.MOVEPOINT) : null)
        }, inherit(o, s), o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.updateImpl = function() {
            var t, e, i;
            if (s.prototype.update.call(this), this._source.points().length > 0) {
                if (t = this._source.points()[0].price, e = this._source.priceScale(), !e || e.isEmpty()) return;
                e.isPercent() && (i = this._source.ownerSource().firstValue(), t = e.priceRange().convertToPercent(t, i)), this._priceLabel = e.formatter().format(t)
            }
        }, o.prototype.renderer = function() {
            var t, e;
            return this._invalidated && (this.updateImpl(), this._invalidated = !1), t = {}, t.points = this._points, t.borderColor = this._source.properties().borderColor.value(), t.backgroundColor = this._source.properties().backgroundColor.value(), t.color = this._source.properties().color.value(), t.fontWeight = this._source.properties().fontWeight.value(), t.fontSize = this._source.properties().fontsize.value(), t.fontFamily = this._source.properties().font.value(), t.transparency = this._source.properties().transparency.value(), t.label = this._priceLabel, t.image = this._image, this.isAnchorsRequired() && 1 === t.points.length ? (e = new h, e.append(new n(t, this._rendererCache, this._model)), e.append(new l({
                points: t.points
            })), e) : new n(t, this._rendererCache, this._model)
        }, inherit(r, a), r.prototype.pointsCount = function() {
            return 1
        }, r.prototype.title = function() {
            return "Price Label"
        }, t.exports = r
    }).call(e, i(40))
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n() {}

        function o(t, e) {
            this._source = t, this._data = e
        }

        function r(t, e) {
            l.call(this, t, e), this._rendererSource = new n, this._invalidated = !0
        }

        function s(t, e) {
            this._constructor = "LineToolNote";
            var i = e || new f("linetoolnote");
            c.call(this, t, new r(this, t), i), this.version = s.version
        }

        function a(t, e) {
            var i = e || new f("linetoolnoteabsolute");
            i.locked.value() || i.locked.setValue(!0), s.call(this, t, i)
        }
        var l = i(115),
            c = i(77).LineDataSource,
            h = i(116).TextRenderer,
            d = i(66).SelectionRenderer,
            u = i(67),
            p = i(71),
            f = i(81).DefaultProperty;
        n.prototype.update = function(t) {
            this._data && (!this._data || t.markerColor === this._data.markerColor && t.width === this._data.width && t.height === this._data.height) || this._createSource(t.width, t.height, t.markerColor), this._data = t
        }, n.prototype._createSource = function(e, i, n) {
            var o, r;
            this._sourceCanvas = document.createElement("canvas"), this._sourceCanvas.width = e, this._sourceCanvas.height = i, this._translate = new t.Point(-e / 2, -i + .5), this._translate.x % 1 === 0 && (this._translate.x += .5), o = this._sourceCanvas.getContext("2d"), r = .6 * e, o.fillStyle = n, o.beginPath(), o.moveTo(e / 2, i), o.quadraticCurveTo(e, e / 1.15, e, e / 2), o.arc(e / 2, e / 2, e / 2, 0, Math.PI, !0), o.quadraticCurveTo(0, e / 1.15, e / 2, i), o.fill(), o.globalCompositeOperation = "destination-out", o.beginPath(), o.moveTo((e - r) / 2, e / 2), o.arc(e / 2, e / 2, r / 2, 0, 2 * Math.PI), o.fill()
        }, n.prototype.drawOn = function(e) {
            var i = new t.Point(Math.round(this._data.point.x), Math.round(this._data.point.y)).add(this._translate);
            e.drawImage(this._sourceCanvas, i.x, i.y)
        }, n.prototype.hasPoint = function(e) {
            var i = this._data.point.add(this._translate),
                n = new t.Point(this._data.point.x - this._translate.x, this._data.point.y);
            return t.pointInRect(e, i, n)
        }, o.prototype.draw = function(t) {
            this._source.drawOn(t), this._data.tooltipVisible && this.drawTooltipOn(t)
        }, o.prototype.drawTooltipOn = function(t) {
            var e, i, n, o, r, a, l, c, d, u, p, f, _, g, m;
            for (t.save(), e = (this._data.text + "").replace(/^\s+|\s+$/g, "").replace(/[\r\n]+/g, "\n"), t.font = (this._data.bold ? "bold " : "") + (this._data.italic ? "italic " : "") + this._data.fontSize + "px " + this._data.font, i = s.TOOLTIP_WIDTH - 2 * s.TOOLTIP_PADDING, n = h.prototype.wordWrap(e, i, t.font), o = this._data.point, r = s.TOOLTIP_LINESPACING, a = s.TOOLTIP_WIDTH, l = n.length * this._data.fontSize + 2 * s.TOOLTIP_PADDING, n.length > 1 && (l += (n.length - 1) * r), c = Math.round(o.x - a / 2), d = Math.round(o.y - this._data.height - l - 8), u = o.x < 20 || o.x + 20 > this._data.vpWidth, p = u ? null : "top", f = u ? null : Math.round(o.x), 10 > d ? d = o.y + 13 : p = "bottom", 10 > c ? c += Math.abs(c - 10) : c + a + 10 > this._data.vpWidth && (c -= c + a + 10 - this._data.vpWidth), t.fillStyle = TradingView.generateColor(this._data.backgroundColor, this._data.backgroundTransparency), t.strokeStyle = this._data.markerColor, t.lineWidth = 1, t.beginPath(), t.moveTo(c, d), u || "top" !== p || (t.lineTo(f - 7, d), t.lineTo(f, d - 7), t.lineTo(f + 7, d)), t.lineTo(c + a, d), t.lineTo(c + a, d + l), u || "bottom" !== p || (t.lineTo(f + 7, d + l), t.lineTo(f, d + l + 7), t.lineTo(f - 7, d + l)), t.lineTo(c, d + l), t.closePath(), t.fill(), t.stroke(), t.textBaseline = "middle", t.fillStyle = this._data.textColor, _ = c + s.TOOLTIP_PADDING, g = d + s.TOOLTIP_PADDING + this._data.fontSize / 2,
                     m = 0; m < n.length; m++) t.fillText(n[m].replace(/^\s+/, ""), _, g), g += this._data.fontSize + r;
            t.restore()
        }, o.prototype.hitTest = function(t) {
            return this._source.hasPoint(t) ? new u(u.MOVEPOINT) : void 0
        }, inherit(r, l), r.prototype.update = function() {
            this._invalidated = !0
        }, r.prototype.updateImpl = function() {
            l.prototype.update.call(this), this._invalidated = !1
        }, r.prototype.isLabelVisible = function() {
            return this.isHoveredSource() || this.isSelectedSource()
        }, r.prototype.renderer = function() {
            var t, e, i, n, r, s, a;
            return this._invalidated && this.updateImpl(), t = new p, e = this._source.properties(), i = e.locked && e.locked.value(), n = i ? this._source.fixedPoints() : this._points, n.length < 1 ? t : (r = this.isLabelVisible(), s = r, a = $.extend(e.state(), {
                point: n[0],
                width: 24,
                height: 32,
                tooltipVisible: s,
                vpWidth: this._model.m_timeScale.m_width,
                vpHeight: this._source.m_priceScale.m_height
            }), this._rendererSource.update(a), t.append(new o(this._rendererSource, a)), r && t.append(new d({
                points: n
            })), t)
        }, inherit(s, c), s.TOOLTIP_WIDTH = 300, s.TOOLTIP_PADDING = 10, s.TOOLTIP_LINESPACING = 5, s.version = 1, s.prototype.pointsCount = function() {
            return 1
        }, s.prototype.title = function() {
            return $.t("Note")
        }, s.prototype.restoreTemplate = function(t) {
            delete t.locked, delete t.text, c.prototype.restoreTemplate.call(this, t)
        }, inherit(a, s), a.prototype.title = function() {
            return $.t("Anchored Note")
        }, s.prototype.state = function(t) {
            var e = c.prototype.state.call(this, t);
            return t && (e.state.fixedSize = !1), e
        }, e.LineToolNote = s, e.LineToolNoteAbsolute = a
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            r.call(this, t, e), this._invalidated = !0, this._model = e, this._source = t
        }

        function o(t, e) {
            this._constructor = "LineToolBrush";
            var i = e || new h("linetoolbrush");
            s.call(this, t, new n(this, t), i), this._finished = !1
        }
        var r = i(115),
            s = i(77).LineDataSource,
            a = i(221),
            l = i(66).SelectionRenderer,
            c = i(71),
            h = i(81).DefaultProperty;
        inherit(n, r), n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype._smoothArray = function(t, i) {
            var n, o, r, s, a, l = Array(t.length);
            for (n = 0; n < t.length; n++) {
                for (o = new e.Point(0, 0), r = 0; i > r; r++) s = Math.max(n - r, 0), a = Math.min(n + r, t.length - 1), o = o.add(t[s]), o = o.add(t[a]);
                l[n] = o.scaled(.5 / i)
            }
            return l.push(t[t.length - 1]), l
        }, n.prototype._updateInternal = function() {
            var t, e, i, n, o, s, a, l, c;
            if (r.prototype.update.call(this), t = Math.max(1, this._source.properties().smooth.value()), e = this._points, 0 !== e.length) {
                for (i = [e[0]], n = 1; n < e.length; n++) {
                    for (o = e[n].substract(e[n - 1]), s = o.length(), a = Math.min(5, Math.floor(s / t)), l = o.normalized().scaled(s / a), c = 0; a - 1 > c; c++) i.push(e[n - 1].add(l.scaled(c)));
                    i.push(e[n])
                }
                this._points = this._smoothArray(i, t)
            }
        }, n.prototype.renderer = function() {
            var t, e, i, n;
            return this._invalidated && (this._updateInternal(), this._invalidated = !1), t = {}, e = this._source.properties(), t.points = this._points, t.color = e.linecolor.value(), t.linewidth = e.linewidth.value(), t.linestyle = e.linestyle.value(), t.skipClosePath = !0, t.leftend = this._source.properties().leftEnd.value(), t.rightend = this._source.properties().rightEnd.value(), e.fillBackground.value() && this._model.lineBeingCreated() !== this._source && (t.filled = !0, t.fillBackground = !0, t.backcolor = e.backgroundColor.value(), t.transparency = e.transparency.value()), this.isAnchorsRequired() && this._source.finished() ? (i = new c, i.append(new a(t)), t.points.length > 0 && (n = [t.points[0], t.points[t.points.length - 1]], i.append(new l({
                points: n
            }))), i) : new a(t)
        }, inherit(o, s), o.prototype.pointsCount = function() {
            return -1
        }, o.prototype.finished = function() {
            return this._finished
        }, o.prototype.finish = function() {
            this._finished = !0, this._lastPoint = null, this.normalizePoints(), this.createServerPoints()
        }, o.prototype.title = function() {
            return "Brush"
        }, o.prototype.percentDistance = function(t, e) {
            return Math.abs((e - t) / t)
        }, o.prototype.addPoint = function(t) {
            var e, i, n, o;
            return this._finished ? !0 : (this._lastPoint = null, this._points.length > 0 && (e = this._points[this._points.length - 1], i = this.pointToScreenPoint(e)[1], n = this.pointToScreenPoint(t)[1], o = n.substract(i).length(), 2 > o) ? this._finished : (s.prototype.addPoint.call(this, t), this._finished))
        }, o.prototype.restorePoints = function(t, e, i) {
            s.prototype.restorePoints.call(this, t, e, i), this._finished = !0
        }, t.exports = o
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t) {
            this._data = t, this._data.angleFrom = 0, this._data.angleTo = Math.PI, this._data.clockwise = !1
        }

        function o(t, e) {
            s.call(this, t, e), this._invalidated = !0
        }

        function r(t, e) {
            this._constructor = "LineToolArc";
            var i = e || new h("linetoolarc");
            a.call(this, t, new o(this, t), i), this.version = r.version
        }
        var s = i(115),
            a = i(77).LineDataSource,
            l = i(67),
            c = i(71),
            h = i(81).DefaultProperty;
        n.prototype.draw = function(t) {
            var i, n, o, r, s, a, l, c, h, d, u, p, f, _;
            if (!(this._data.points.length < 2)) {
                if (i = this._data.points[0], n = this._data.points[1], this._data.points.length < 3) return t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, t.beginPath(), t.moveTo(i.x, i.y), t.lineTo(n.x, n.y), void t.stroke();
                if (o = this._data.points[2], r = e.distanceToLine(i, n, o).distance, 1 > r) return t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, t.beginPath(), t.moveTo(i.x, i.y), t.lineTo(n.x, n.y), void t.stroke();
                s = n.substract(i), a = i.add(n).scaled(.5), l = new e.Point(-s.y, s.x), l = l.normalized(), o = a.add(l.scaled(r)), t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, c = s.length(), h = s.x / c, d = s.y / c, u = Math.acos(h), 0 > d && (u = -u), p = this._data.points[2], f = e.Matrix.translate(-a.x, -a.y), p = f.mult(p), f = e.Matrix.rotate(-u), p = f.mult(p), f = e.Matrix.scale(1, c / (2 * r)), p = f.mult(p), p.y < 0 ? this._data.clockwise = !0 : this._data.clockwise = !1, t.save(), t.beginPath(), t.translate(i.x, i.y), t.rotate(u), _ = 1 - Math.sqrt(3) / 2, t.scale(1, r / (c * _)), this._data.clockwise ? t.arc(.5 * c, c * Math.sqrt(3) / 2, c, -2 * Math.PI / 3, -Math.PI / 3, !1) : t.arc(.5 * c, -c * Math.sqrt(3) / 2, c, Math.PI / 3, 2 * Math.PI / 3, !1), t.restore(), t.stroke(), this._data.fillBackground && (t.fillStyle = TradingView.generateColor(this._data.backcolor, this._data.transparency), t.fill())
            }
        }, n.prototype.hitTest = function(t) {
            var i, n, o, r, s, a, c, h, d, u, p, f, _, g, m, v, y;
            return this._data.points.length < 3 ? null : (i = 5, n = this._data.points[0], o = this._data.points[1], r = this._data.points[2], s = e.distanceToLine(n, o, r).distance, 1 > s ? (s = e.distanceToLine(n, o, t).distance, i > s ? new l(l.MOVEPOINT) : null) : (a = o.substract(n), c = a.length(), h = n.add(o).scaled(.5), d = r.substract(h), d = d.normalized(), r = h.add(d.scaled(s)), u = a.x / c, p = a.y / c, f = Math.acos(u), 0 > p && (f = -f), _ = e.Matrix.translate(-n.x, -n.y), t = _.mult(t), _ = e.Matrix.rotate(-f), t = _.mult(t), d = _.mult(d), g = 1 - Math.sqrt(3) / 2, _ = e.Matrix.scale(1, c * g / s), t = _.mult(t), d = _.mult(d), t.y * d.y < 0 ? null : (m = t.y < 0 ? new e.Point(.5 * c, c * Math.sqrt(3) / 2) : new e.Point(.5 * c, -c * Math.sqrt(3) / 2), v = t.substract(m), y = v.length(), Math.abs(y - c) <= i ? new l(l.MOVEPOINT) : null)))
        }, inherit(o, s), o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.updateImpl = function() {
            s.prototype.update.call(this), this._invalidated = !1
        }, o.prototype.renderer = function() {
            var t, i, o, r, s, a, l, h, d, u, p, f, _, g, m, v, y, w, b, S;
            return this._invalidated && this.updateImpl(), t = {}, t.points = this._points, t.color = this._source.properties().color.value(), t.linewidth = this._source.properties().linewidth.value(), t.backcolor = this._source.properties().backgroundColor.value(), t.fillBackground = this._source.properties().fillBackground.value(), t.transparency = this._source.properties().transparency.value(), this.isAnchorsRequired() ? (i = new c, i.append(new n(t)), o = [], r = t.points[0], s = new e.Point(r.x, r.y), s.data = 0, o.push(s), 1 === t.points.length ? i : (a = t.points[1], l = new e.Point(a.x, a.y), l.data = 1, 2 === t.points.length ? (this.addAnchors(i), i) : (o.push(l), h = t.points[2], d = e.distanceToLine(r, a, h).distance, u = a.substract(r), p = r.add(a).scaled(.5), f = new e.Point(-u.y, u.x), f = f.normalized(), h = p.add(f.scaled(d)), _ = p.add(f.scaled(-d)), g = u.length(), m = u.x / g, v = u.y / g, y = Math.acos(m), 0 > v && (y = -y), w = t.points[2], b = e.Matrix.translate(-p.x, -p.y), w = b.mult(w), b = e.Matrix.rotate(-y), w = b.mult(w), b = e.Matrix.scale(1, g / (2 * d)), w = b.mult(w), S = w.y >= 0 ? new e.Point(h.x, h.y) : new e.Point(_.x, _.y), S.data = 2, o.push(S), i.append(this.createLineAnchor({
                points: o
            })), i))) : new n(t)
        }, inherit(r, a), r.prototype.startChanging = function(t, i) {
            var n, o, r, s, l, c, h, d;
            a.prototype.startChanging.call(this, t, i), 0 !== t && 1 !== t || (n = this.pointToScreenPoint(this._points[0])[0], o = this.pointToScreenPoint(this._points[1])[0], r = this.pointToScreenPoint(this._points[2])[0], this._dist = e.distanceToLine(n, o, r).distance, s = o.substract(n), l = new e.Point(-s.y, s.x), c = n.add(o).scaled(.5), h = r.substract(c), d = h.dotProduct(l), 0 > d && (this._dist = -this._dist))
        }, r.prototype.pointsCount = function() {
            return 3
        }, r.prototype.title = function() {
            return "Arc"
        }, r.prototype.setPoint = function(t, i) {
            var n, o, r, s, a, l, c, h, d, u, p, f, _, g = $.extend({}, i),
                m = this.pointToScreenPoint(this._points[0])[0],
                v = this.pointToScreenPoint(this._points[1])[0],
                y = this.pointToScreenPoint(this._points[2])[0],
                w = this.priceScale();
            switch (w.isPercent() && (n = this.ownerSource().firstValue(), g.price = w.priceRange().convertFromPercent(g.price, n)), t) {
                case 0:
                    m = this.pointToScreenPoint(g)[0], o = v.substract(m), r = m.add(v).scaled(.5), s = new e.Point(-o.y, o.x), s = s.normalized(), y = r.add(s.scaled(this._dist)), y = this.screenPointToPoint(y), this._points[0] = g, this._points[2] = y;
                    break;
                case 1:
                    a = e.distanceToLine(m, v, y).distance, v = this.pointToScreenPoint(g)[0], o = v.substract(m), r = m.add(v).scaled(.5), s = new e.Point(-o.y, o.x), s = s.normalized(), y = r.add(s.scaled(this._dist)), y = this.screenPointToPoint(y), this._points[1] = g, this._points[2] = y;
                    break;
                case 2:
                    g = this.pointToScreenPoint(g)[0], a = e.distanceToLine(m, v, g).distance, o = v.substract(m), r = m.add(v).scaled(.5), s = new e.Point(-o.y, o.x), s = s.normalized(), y = r.add(s.scaled(a)), l = r.add(s.scaled(-a)), c = o.length(), h = o.x / c, d = o.y / c, u = Math.acos(h), 0 > d && (u = -u), p = e.Matrix.translate(-r.x, -r.y), g = p.mult(g), f = p.mult(y), p = e.Matrix.rotate(-u), g = p.mult(g), f = p.mult(f), p = e.Matrix.scale(1, c / (2 * a)), g = p.mult(g), f = p.mult(f), _ = g.y * f.y >= 0 ? new e.Point(y.x, y.y) : new e.Point(l.x, l.y), _ = this.screenPointToPoint(_), this._points[2] = _
            }
            this.normalizePoints()
        }, r.version = 2, r.prototype.migrateVersion = function(t, e, i) {
            var n, o;
            1 === t && 2 === this._points.length && (n = (2 * this._points[0].price + 3 * this._points[1].price) / 5, this._points.append({
                price: n,
                index: this._points[1].index
            })), 1 === t && 2 === this._timePoint.length && (n = (2 * this._timePoint[0].price + 3 * this._timePoint[1].price) / 5, o = {
                price: n,
                offset: this._timePoint[1].offset,
                time_t: this._timePoint[1].time_t
            }, this._timePoint.append(o))
        }, t.exports = r
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            this._data = t, t.lines = this.wordWrap(t.text, t.wordWrapWidth), this._textSizeCache = e
        }

        function o(t, e) {
            s.call(this, t, e), this._textSizeCache = {}, this._invalidated = !0
        }

        function r(t, e) {
            this._constructor = "LineToolCallout";
            var i = e || new d("linetoolcallout");
            a.call(this, t, new o(this, t), i), this._barOffset = 0, this._timeScale = t.timeScale()
        }
        var s = i(115),
            a = i(77).LineDataSource,
            l = i(80).DataSource,
            c = i(67),
            h = i(71),
            d = i(81).DefaultProperty;
        n.ROUND_RADIUS = 8, n.TEXT_MARGINS = 2,
            function() {
                function t() {
                    var t = document.createElement("canvas");
                    t.width = 0, t.height = 0, e = t.getContext("2d"), t = null
                }
                var e;
                n.prototype.wordWrap = function(i, n) {
                    var o, r, s, a, l, c, h, d, u;
                    if (e || t(), n = +n, i += "", o = i.split(/[^\S\r\n]*(?:\r\n|\r|\n|$)/), o[o.length - 1] || o.pop(), !isFinite(n) || 0 >= n) return o;
                    for (e.font = this.fontStyle(), r = [], s = 0; s < o.length; s++)
                        if (a = o[s], l = e.measureText(a).width, n >= l) r.push(a);
                        else
                            for (c = a.split(/([-\)\]\},.!?:;])|(\s+)/); c.length;) {
                                if (h = ~~(n / l * (c.length + 2) / 3), 0 >= h || e.measureText(c.slice(0, 3 * h - 1).join("")).width <= n)
                                    for (; e.measureText(c.slice(0, 3 * (h + 1) - 1).join("")).width <= n;) h++;
                                else
                                    for (; h > 0 && e.measureText(c.slice(0, 3 * --h - 1).join("")).width > n;);
                                if (h > 0) r.push(c.slice(0, 3 * h - 1).join("")), c.splice(0, 3 * h);
                                else {
                                    if (d = c[0] + (c[1] || ""), u = 1 === u ? 1 : ~~(n / e.measureText(d) * d.length), e.measureText(d.substr(0, u)).width <= n)
                                        for (; e.measureText(d.substr(0, u + 1)).width <= n;) u++;
                                    else
                                        for (; u > 1 && e.measureText(d.substr(0, --u)).width > n;);
                                    1 > u && (u = 1), r.push(d.substr(0, u)), c[0] = d.substr(u), c[1] = ""
                                }
                                if (l = e.measureText(c.join("")).width, n >= l) {
                                    r.push(c.join(""));
                                    break
                                }
                            }
                    return r
                }
            }(), n.prototype.hitTest = function(t) {
            var e, i, n, o, r;
            return this._data.points.length < 2 ? null : (e = this._data.points[0], i = this._data.points[1], n = 3, e.substract(t).length() < n ? new c(c.CHANGEPOINT, 0) : (o = i.x - this._textSizeCache.totalWidth / 2, r = i.y - this._textSizeCache.totalHeight / 2, t.x >= o && t.x <= o + this._textSizeCache.totalWidth && t.y >= r && t.y <= r + this._textSizeCache.totalHeight ? new c(c.MOVEPOINT) : null))
        }, n.prototype.fontStyle = function() {
            return (this._data.bold ? "bold " : "") + (this._data.italic ? "italic " : "") + this._data.fontSize + "px " + this._data.font
        }, n.prototype.draw = function(t) {
            var e, i, o, r, s, a, l, c, h, d, u, p, f, _;
            if (!(this._data.points.length < 2)) {
                for (e = this._data.points[0].clone(), i = this._data.points[1].clone(), t.lineCap = "butt", t.strokeStyle = this._data.bordercolor, t.lineWidth = this._data.linewidth, t.textBaseline = "bottom", t.font = this.fontStyle(), o = this._data.fontSize * this._data.lines.length, r = this._data.wordWrapWidth || this._data.lines.reduce(function(e, i) {
                        return Math.max(e, t.measureText(i).width)
                    }, 0), this._textSizeCache.textHeight = o, this._textSizeCache.textHeight = r, s = n.ROUND_RADIUS, a = n.TEXT_MARGINS, l = r + 2 * a + 2 * s, c = o + 2 * a + 2 * s, this._textSizeCache.totalWidth = l, this._textSizeCache.totalHeight = c, h = i.x - l / 2, d = i.y - c / 2, u = 0, p = r + 2 * a > 2 * s, f = o + 2 * a > 2 * s, e.x > h + l ? u = 20 : e.x > h && (u = 10), e.y > d + c ? u += 2 : e.y > d && (u += 1), t.save(), t.translate(h, d), e.x -= h, e.y -= d, i.x -= h, i.y -= d, t.beginPath(), t.moveTo(s, 0), 10 === u ? p ? (t.lineTo(i.x - s, 0), t.lineTo(e.x, e.y), t.lineTo(i.x + s, 0), t.lineTo(l - s, 0)) : (t.lineTo(e.x, e.y), t.lineTo(l - s, 0)) : t.lineTo(l - s, 0), 20 === u ? (t.lineTo(e.x, e.y), t.lineTo(l, s)) : t.arcTo(l, 0, l, s, s), 21 === u ? f ? (t.lineTo(l, i.y - s), t.lineTo(e.x, e.y), t.lineTo(l, i.y + s), t.lineTo(l, c - s)) : (t.lineTo(e.x, e.y), t.lineTo(l, c - s)) : t.lineTo(l, c - s), 22 === u ? (t.lineTo(e.x, e.y), t.lineTo(l - s, c)) : t.arcTo(l, c, l - s, c, s), 12 === u ? p ? (t.lineTo(i.x + s, c), t.lineTo(e.x, e.y), t.lineTo(i.x - s, c), t.lineTo(s, c)) : (t.lineTo(e.x, e.y), t.lineTo(s, c)) : t.lineTo(s, c), 2 === u ? (t.lineTo(e.x, e.y), t.lineTo(0, c - s)) : t.arcTo(0, c, 0, c - s, s), 1 === u ? f ? (t.lineTo(0, i.y + s), t.lineTo(e.x, e.y), t.lineTo(0, i.y - s), t.lineTo(0, s)) : (t.lineTo(e.x, e.y), t.lineTo(0, s)) : t.lineTo(0, s), 0 === u ? (t.lineTo(e.x, e.y), t.lineTo(s, 0)) : t.arcTo(0, 0, s, 0, s), t.stroke(), t.fillStyle = TradingView.generateColor(this._data.backcolor, this._data.transparency), t.fill(), t.fillStyle = this._data.color, d = s + a + this._data.fontSize, h = s + a, _ = 0; _ < this._data.lines.length; _++) t.fillText(this._data.lines[_], h, d), d += this._data.fontSize;
                t.restore()
            }
        }, inherit(o, s), o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.updateImpl = function() {
            s.prototype.update.call(this), this._source._calculatePoint2()
        }, o.prototype.renderer = function() {
            var t, i, o, r, s, a, l, c;
            return this._invalidated && (this.updateImpl(), this._invalidated = !1), this._points[0] ? this._points.length < 2 ? void 0 : (t = this._source.properties(), i = {}, i.points = [], i.points.push(this._points[0]), o = this._points[1].clone(), o.x = this._points[0].x + this._source._barOffset * this._model.timeScale().barSpacing(), i.points.push(o), i.color = t.color.value(), i.linewidth = t.linewidth.value(), i.backcolor = t.backgroundColor.value(), i.transparency = t.transparency.value(), i.text = t.text.value(), i.font = t.font.value(), i.fontSize = t.fontsize.value(), i.bordercolor = t.bordercolor.value(), t.wordWrap && t.wordWrap.value() && (i.wordWrapWidth = t.wordWrapWidth.value()), i.bold = t.bold && t.bold.value(), i.italic = t.italic && t.italic.value(), r = new n(i, this._textSizeCache), this.isAnchorsRequired() ? (s = new h, s.append(r), a = i.points[1], l = [].concat(i.points), l.splice(l.length - 1, 1), s.append(this.createLineAnchor({
                points: l
            })), i.wordWrapWidth && (c = new e.Point(a.x + (i.wordWrapWidth >> 1) + n.ROUND_RADIUS + n.TEXT_MARGINS, a.y), c.data = 1, s.append(this.createLineAnchor({
                points: [c]
            }))), s) : r) : new h
        }, inherit(r, a), r.MIN_WIDTH = 100, r.prototype.pointsCount = function() {
            return 2
        }, r.prototype.title = function() {
            return "Callout"
        }, r.prototype.correctPoints = function(t) {
            var e = this._currentMovingPoint.index - this._startMovingPoint.index,
                i = this._currentMovingPoint.price - this._startMovingPoint.price,
                n = t[1];
            n.index += e, n.price += i, t[1] = n
        }, r.prototype.addPoint = function(t) {
            var e = a.prototype.addPoint.call(this, t);
            return e && this._calculateBarOffset(), e
        }, r.prototype._calculateBarOffset = function() {
            this.points().length > 1 && (this._barOffset = this.points()[1].index - this.points()[0].index)
        }, r.prototype.setLastPoint = function(t) {
            a.prototype.setLastPoint.call(this, t), 2 === this.points().length && this._calculateBarOffset()
        }, r.prototype.setPoint = function(t, e) {
            var i, o, s, l, c;
            switch (t) {
                case 0:
                    a.prototype.setPoint.call(this, t, e), this._calculateBarOffset();
                    break;
                case 1:
                    if (i = this.properties(), !i.wordWrapWidth) return;
                    if (o = this._points, s = this._dragStartLeftEdgeIndex, l = Math.round((e.index - s) / 2), isFinite(s) && isFinite(l)) {
                        if (o[1] = {
                                index: s + l,
                                price: o[1].price
                            }, this._calculateBarOffset(), this.normalizePoints(), c = this._timeScale.indexToCoordinate(s + 2 * l) - this._timeScale.indexToCoordinate(s) - n.ROUND_RADIUS - n.TEXT_MARGINS, !isFinite(c)) return;
                        i.wordWrapWidth.setValue(Math.max(r.MIN_WIDTH, c));
                        break
                    }
                    o[1] = e, this._calculateBarOffset(), this.normalizePoints()
            }
        }, r.prototype.startDragPoint = function(t, e) {
            var i = this.properties();
            1 === t && i.wordWrap && i.wordWrap.value() && (this._dragStartLeftEdgeIndex = 2 * this.points()[1].index - e.index)
        }, r.prototype.move = function(t) {
            a.prototype.move.call(this, t), this._calculateBarOffset()
        }, r.prototype.state = function(t) {
            var e = a.prototype.state.call(this, t);
            return e.barOffset = this._barOffset, e
        }, r.prototype.restoreData = function(t) {
            t.barOffset ? this._barOffset = t.barOffset : this._calculateBarOffset(), this._calculatePoint2()
        }, r.prototype.setPriceScale = function(t) {
            l.prototype.setPriceScale.call(this, t), t && t.priceRange() && this._calculatePoint2()
        }, r.prototype._calculatePoint2 = function() {
            var t, e;
            this._model.lineBeingEdited() !== this && this._model.sourceBeingMoved() !== this && (this._points.length < 2 || (t = this.points()[0], e = this.points()[1], this._points[1] = {
                price: e.price,
                index: t.index + this._barOffset
            }))
        }, t.exports = r
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            this._measureCache = e, this._data = t
        }

        function o(t, e) {
            s.call(this, t, e), this._rendererCache = {}, this._invalidated = !0
        }

        function r(t, e) {
            this._constructor = "LineToolBalloon";
            var i = e || new d("linetoolballoon");
            a.call(this, t, new o(this, t), i)
        }
        var s = i(115),
            a = i(77).LineDataSource,
            l = i(66).SelectionRenderer,
            c = i(67),
            h = i(71),
            d = i(81).DefaultProperty;
        n.prototype.draw = function(t) {
            var e, i, n, o, r, s, a;
            0 !== this._data.points.length && (t.font = [this._data.fontWeight, this._data.fontSize + "px", this._data.fontFamily].join(" "), e = t.measureText(this._data.label), e.height = this._data.fontSize, i = 15, n = {
                left: i,
                top: (2 * i - e.height) / 2
            }, o = e.width + 2 * n.left, r = 2 * i, s = this._data.points[0].x - (n.left + 20), a = this._data.points[0].y - (r + 9), this._measureCache && $.extend(this._measureCache, {
                innerWidth: o,
                innerHeight: r,
                padding: n
            }), t.translate(.5 + s, .5 + a), t.beginPath(), t.moveTo(i + 9, r), t.lineTo(i, r), t.arcTo(-1e3, 0, 1e3, 0, i), t.lineTo(o - i, 0), t.arcTo(1e3, r, -1e3, r, i), t.lineTo(i + 18, r), t.quadraticCurveTo(i + 18, r + 4, i + 20, r + 9), t.quadraticCurveTo(i + 12, r + 6, i + 9, r), t.fillStyle = TradingView.generateColor(this._data.backgroundColor, this._data.transparency), t.fill(), t.strokeStyle = this._data.borderColor, t.lineWidth = 2, t.stroke(), t.closePath(), t.textBaseline = "top", t.fillStyle = this._data.color, t.fillText(this._data.label, n.left, n.top - 1))
        }, n.prototype.hitTest = function(t) {
            var i, n;
            return 0 !== this._data.points.length && this._measureCache.padding ? (i = this._data.points[0].x - (this._measureCache.padding.left + 20), n = this._data.points[0].y - (this._measureCache.innerHeight + 9), e.pointInRect(t, new e.Point(i, n), new e.Point(i + this._measureCache.innerWidth, n + this._measureCache.innerHeight)) ? new c(c.MOVEPOINT) : null) : null
        }, inherit(o, s), o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.updateImpl = function() {
            s.prototype.update.call(this), this._invalidated = !1
        }, o.prototype.renderer = function() {
            var t, e;
            return this._invalidated && this.updateImpl(), t = {}, t.points = this._points, t.color = this._source.properties().color.value(), t.borderColor = this._source.properties().borderColor.value(), t.backgroundColor = this._source.properties().backgroundColor.value(), t.transparency = this._source.properties().transparency.value(), t.fontWeight = this._source.properties().fontWeight.value(), t.fontSize = this._source.properties().fontsize.value(), t.fontFamily = this._source.properties().font.value(), t.label = this._source.properties().text.value(), this.isAnchorsRequired() && 1 === t.points.length ? (e = new h, e.append(new n(t, this._rendererCache)), e.append(new l({
                points: t.points
            })), e) : new n(t, this._rendererCache)
        }, inherit(r, a), r.prototype.pointsCount = function() {
            return 1
        }, r.prototype.title = function() {
            return "Balloon"
        }, t.exports = r
    }).call(e, i(40))
}, function(t, e, i) {
    "use strict";

    function n(t) {
        this._data = t
    }

    function o(t, e) {
        l.call(this, t, e), this._rendererCache = {}, this._invalidated = !0
    }

    function r(t, e) {
        this._source = t, this._model = e, this._text = "", this._coordinate = 0, this._background = "black"
    }

    function s(t, e) {
        this._constructor = "LineToolHorzRay";
        var i = e || new f("linetoolhorzray");
        this._priceAxisView = new r(this, t), a.call(this, t, new o(this, t), i)
    }
    var a = i(77).LineDataSource,
        l = i(115),
        c = i(60),
        h = i(116).TextRenderer,
        d = i(62),
        u = i(67),
        p = i(71),
        f = i(81).DefaultProperty;
    n.prototype.draw = function(t) {
        var e, i, n, o;
        return 0 === this._data.points.length ? null : (e = t.canvas.width, i = this._data.points[0].y, n = Math.max(0, this._data.points[0].x), o = Math.max(e, this._data.points[0].x), t.lineCap = "square", t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, t.lineStyle = this._data.linestyle, void CanvasEx.drawLine(t, n, i, o, i))
    }, n.prototype.hitTest = function(t) {
        if (0 === this._data.points.length) return null;
        if (t.x < this._data.points[0].x) return null;
        var e = 3;
        return Math.abs(t.y - this._data.points[0].y) <= e ? new u(this._data.hitTestResult) : null
    }, inherit(o, l), o.prototype.update = function() {
        this._invalidated = !0
    }, o.prototype.updateImpl = function() {
        l.prototype.update.call(this)
    }, o.prototype.renderer = function() {
        var t, e, i, o, r, s, a, l, c;
        return this._invalidated && (this.updateImpl(), this._invalidated = !1), t = new p, e = {}, e.points = this._points, e.color = this._source.properties().linecolor.value(), e.linewidth = this._source.properties().linewidth.value(), e.linestyle = this._source.properties().linestyle.value(), e.hitTestResult = u.MOVEPOINT, i = this._source.properties(), t.append(new n(e)), this._source.properties().showLabel.value() && 1 === this._points.length && (o = i.vertLabelsAlign.value(), r = i.horzLabelsAlign.value(), s = this._points[0].clone(), a = 0, l = 0, "right" === r ? (s.x = this._model.timeScale().width(), l = -5) : "center" === r && (s.x = (s.x + this._model.timeScale().width()) / 2), "middle" === o ? a = -this._source.properties().fontsize.value() / 6 : "bottom" === o && (a = -4), c = {
            points: [s],
            text: i.text.value(),
            color: i.textcolor.value(),
            vertAlign: o,
            horzAlign: r,
            font: i.font.value(),
            offsetX: l,
            offsetY: a,
            bold: this._source.properties().bold.value(),
            italic: this._source.properties().italic.value(),
            fontsize: this._source.properties().fontsize.value()
        }, t.append(new h(c, this._rendererCache))), this.addAnchors(t), TradingView.printing || !this._source.hasAlert.value() || this._model.readOnly() || 1 !== this._points.length || this._source.getAlertIsActive(function(i) {
            t.append(new TradingView.PaneRendererClockIcon({
                point1: e.points[0],
                color: i ? e.color : defaults("chartproperties.alertsProperties.drawingIcon.color")
            }))
        }), t
    }, inherit(r, c), r.prototype.update = function() {
        this._invaildated = !0
    }, r.prototype.updateImpl = function() {
        0 !== this._source.points().length && this._source.priceScale() && !this._source.priceScale().isEmpty() && (this._background = this._source.properties().linecolor.value(), this._coordinate = this._source.priceScale().priceToCoordinate(this._source.points()[0].price), this._text = this._source.priceScale().formatter().format(this._source.points()[0].price))
    }, r.prototype.renderer = function() {
        this._invaildated && (this.updateImpl(), this._invaildated = !1);
        var t = {
            text: this._text,
            coordinate: this._coordinate,
            color: this.color(),
            background: this._background,
            visible: !0
        };
        return new d(t)
    }, inherit(s, a), s.prototype.pointsCount = function() {
        return 1
    }, s.prototype.title = function() {
        return "Horizontal Ray"
    }, s.prototype.priceAxisViews = function(t, e) {
        return this.isActualSymbol() && e === this.priceScale() && this.properties().showPrice.value() && this._model.paneForSource(this) === t ? [this._priceAxisView] : null
    }, s.prototype.updateAllViews = function() {
        a.prototype.updateAllViews.call(this), this._priceAxisView.update()
    }, s.prototype.canHasAlert = function() {
        return !0
    }, s.prototype._getAlertPlots = function() {
        var t = this._points[0],
            e = {
                index: t.index + 1,
                price: t.price
            };
        return [this._linePointsToAlertPlot([t, e], null, !1, !0)]
    }, t.exports = s
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t) {
            this._data = t, this._data.angleFrom = 0, this._data.angleTo = 2 * Math.PI, this._data.clockwise = !1
        }

        function o(t, e) {
            a.call(this, t, e), this._invalidated = !0
        }

        function r(t, e) {
            this._constructor = "LineToolEllipse";
            var i = e || new h("linetoolellipse");
            s.call(this, t, new o(this, t), i), this.version = r.version
        }
        var s = i(77).LineDataSource,
            a = i(115),
            l = i(67),
            c = i(71),
            h = i(81).DefaultProperty;
        n.prototype.draw = function(t) {
            var i, n, o, r, s, a, l, c, h, d, u, p, f;
            if (!(this._data.points.length < 2)) {
                if (i = this._data.points[0], n = this._data.points[1], this._data.points.length < 3) return t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, t.beginPath(), t.moveTo(i.x, i.y), t.lineTo(n.x, n.y), void t.stroke();
                if (o = this._data.points[2], r = e.distanceToLine(i, n, o).distance, 1 > r) return t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, t.beginPath(), t.moveTo(i.x, i.y), t.lineTo(n.x, n.y), void t.stroke();
                s = n.substract(i), a = i.add(n).scaled(.5), l = new e.Point(-s.y, s.x), l = l.normalized(), o = a.add(l.scaled(r)), t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, c = s.length(), h = s.x / c, d = s.y / c, u = Math.acos(h), 0 > d && (u = -u), p = this._data.points[2], f = e.Matrix.translate(-a.x, -a.y), p = f.mult(p), f = e.Matrix.rotate(-u), p = f.mult(p), f = e.Matrix.scale(1, c / (2 * r)), p = f.mult(p), p.y < 0 ? this._data.clockwise = !0 : this._data.clockwise = !1, t.save(), t.beginPath(), t.translate(a.x, a.y), t.rotate(u), t.scale(1, 2 * r / c), t.arc(0, 0, .5 * c, this._data.angleFrom, this._data.angleTo, this._data.clockwise), t.restore(), t.stroke(), this._data.fillBackground && (t.fillStyle = TradingView.generateColor(this._data.backcolor, this._data.transparency), t.fill())
            }
        }, n.prototype._additionalPointTest = function(t, e) {
            return !0
        }, n.prototype.hitTest = function(t) {
            var i, n, o, r, s, a, c, h, d, u, p, f, _, g, m;
            return this._data.points.length < 3 ? null : (i = this._data.points[0], n = this._data.points[1], o = this._data.points[2], r = e.distanceToLine(i, n, o).distance, s = n.substract(i), a = i.add(n).scaled(.5), c = new e.Point(-s.y, s.x), c = c.normalized(), o = a.add(c.scaled(r)), h = s.length(), d = s.x / h, u = s.y / h, p = Math.acos(d), 0 > u && (p = -p), f = e.Matrix.translate(-a.x, -a.y), t = f.mult(t), _ = f.mult(this._data.points[2]), f = e.Matrix.rotate(-p), t = f.mult(t), _ = f.mult(_), f = e.Matrix.scale(1, h / (2 * r)), t = f.mult(t), _ = f.mult(_), g = t.length(), m = 3, this._additionalPointTest(t, _) ? Math.abs(g - .5 * h) <= m ? new l(l.MOVEPOINT) : this._data.fillBackground && !this._data.noHitTestOnBackground && .5 * h >= g ? new l(l.MOVEPOINT_BACKGROUND) : null : null)
        }, inherit(o, a), o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.updateImpl = function() {
            a.prototype.update.call(this), this._invalidated = !1
        }, o.prototype.renderer = function() {
            var t, i, o, r, s, a, l, h, d, u, p, f, _, g;
            return this._invalidated && this.updateImpl(), t = new c, this._points.length < 2 ? t : (i = {}, i.points = this._points, i.color = this._source.properties().color.value(), i.linewidth = this._source.properties().linewidth.value(), i.backcolor = this._source.properties().backgroundColor.value(), i.fillBackground = this._source.properties().fillBackground.value(), i.transparency = this._source.properties().transparency.value(), t.append(new n(i)), this.isAnchorsRequired() ? (o = i.points[0], r = i.points[1], 2 === this._points.length ? (this.addAnchors(t), t) : (s = i.points[2], a = e.distanceToLine(o, r, s).distance, l = r.substract(o), h = o.add(r).scaled(.5), d = new e.Point(-l.y, l.x), d = d.normalized(), s = h.add(d.scaled(a)), u = h.add(d.scaled(-a)), p = new e.Point(o.x, o.y), p.data = 0, f = new e.Point(r.x, r.y), f.data = 1, _ = new e.Point(s.x, s.y), _.data = 2, g = new e.Point(u.x, u.y), g.data = 3, t.append(this.createLineAnchor({
                points: [p, f, _, g]
            })), t)) : t)
        }, inherit(r, s), r.prototype.startChanging = function(t, i) {
            var n, o, r;
            s.prototype.startChanging.call(this, t, i), 0 !== t && 1 !== t || (n = this.pointToScreenPoint(this._points[0])[0], o = this.pointToScreenPoint(this._points[1])[0], r = this.pointToScreenPoint(this._points[2])[0], this._dist = e.distanceToLine(n, o, r).distance || 0)
        }, r.prototype._preparePoint = function(t, e) {
            var i = this._preparePointInternal(t, e, !1);
            return e && e.shift && this._points[0].index === this._points[1].index && this._fixVerticalDiameterPoints(this._points[1], this._points[0], i), i
        }, r.prototype._preparePointInternal = function(t, i, n) {
            var o, r, a, l, c, h, d, u, p, f, _;
            if (this._convertPriceFromPercentIfNeeded(t), o = $.extend({}, t), i && i.shift) {
                if (r = this.points().length, !this._fakePointAdded && 3 === r && !n) return o;
                (this._fakePointAdded || 2 === r || n) && (this._snapPoint45Degree(t, this._points[0]), this._fakePointAdded ? this._points[1] = t : n || (this._fakePointAdded = !0, s.prototype._addPointIntenal.call(this, t)), a = this.pointToScreenPoint(this._points[0])[0], l = this.pointToScreenPoint(this._points[1])[0], c = l.x - a.x, h = l.y - a.y, d = Math.sqrt(c * c + h * h) / 2, u = l.substract(a), p = a.add(l).scaled(.5), f = new e.Point(-u.y, u.x), f = f.normalized(), _ = p.add(f.scaled(d)), o = this.screenPointToPoint(_), (TradingView.isNaN(o.price) || TradingView.isNaN(o.index)) && (o = this.screenPointToPoint(p)))
            } else this._fakePointAdded && (this._points.splice(1, 1), this._fakePointAdded = !1);
            return o
        }, r.prototype._fixVerticalDiameterPoints = function(t, e, i) {
            var n = this.pointToScreenPoint(t)[0],
                o = this.pointToScreenPoint(e)[0],
                r = this._model.timeScale(),
                s = r.indexToCoordinate(t.index),
                a = r.indexToCoordinate(i.index),
                l = 2 * Math.abs(s - a);
            l *= e.price > t.price ? 1 : -1, t.price = this.screenPointToPoint({
                x: n.x,
                y: o.y + l
            }).price
        }, r.prototype.addPoint = function(t, e, i) {
            var n = s.prototype.addPoint.call(this, t, e, i);
            return n && (this._fakePointAdded = !1), n
        }, r.prototype.setPoint = function(t, i, n) {
            var o, r, s, a, l = $.extend({}, i),
                c = this.pointToScreenPoint(this._points[0])[0],
                h = this.pointToScreenPoint(this._points[1])[0],
                d = this.pointToScreenPoint(this._points[2])[0];
            switch (this._convertPriceFromPercentIfNeeded(l), t) {
                case 0:
                    if (n && n.shift) {
                        this._snapPoint45Degree(l, this._points[1]), this._points[0] = l, this._points[2] = this._preparePointInternal(this._points[2], n, !0), this._points[0].index === this._points[1].index && this._fixVerticalDiameterPoints(this._points[0], this._points[1], this._points[2]);
                        break
                    }
                    c = this.pointToScreenPoint(l)[0], o = h.substract(c), r = c.add(h).scaled(.5), s = new e.Point(-o.y, o.x), s = s.normalized(), d = r.add(s.scaled(this._dist)), d = this.screenPointToPoint(d), this._points[0] = l, this._points[2] = d;
                    break;
                case 1:
                    if (n && n.shift) {
                        this._snapPoint45Degree(l, this._points[0]), this._points[1] = l, this._points[2] = this._preparePointInternal(this._points[2], n, !0), this._points[0].index === this._points[1].index && this._fixVerticalDiameterPoints(this._points[1], this._points[0], this._points[2]);
                        break
                    }
                    h = this.pointToScreenPoint(l)[0], o = h.substract(c), r = c.add(h).scaled(.5), s = new e.Point(-o.y, o.x), s = s.normalized(), d = r.add(s.scaled(this._dist)), d = this.screenPointToPoint(d), this._points[1] = l, this._points[2] = d;
                    break;
                case 2:
                    l = this.pointToScreenPoint(l)[0], a = e.distanceToLine(c, h, l).distance, o = h.substract(c), r = c.add(h).scaled(.5), s = new e.Point(-o.y, o.x), s = s.normalized(), d = r.add(s.scaled(a)), d = this.screenPointToPoint(d), this._points[2] = d;
                    break;
                case 3:
                    l = this.pointToScreenPoint(l)[0], a = e.distanceToLine(c, h, l).distance, o = h.substract(c), r = c.add(h).scaled(.5), s = new e.Point(-o.y, o.x), s = s.normalized(), d = r.add(s.scaled(a)), d = this.screenPointToPoint(d), this._points[2] = d
            }
            this.normalizePoints()
        }, r.prototype.pointsCount = function() {
            return 3
        }, r.prototype.title = function() {
            return "Ellipse"
        }, r.version = 2, r.prototype.migrateVersion = function(t, e, i) {
            var n, o, r;
            1 === t && 2 === this._points.length && (n = this._points[0].price, o = .5 * (this._points[0].price + this._points[1].price), this._points[0] = {
                price: o,
                index: this._points[0].index
            }, this._points[1] = {
                price: o,
                index: this._points[1].index
            }, this._points.push({
                price: n,
                index: this._points[0].index
            })), 1 === t && 2 === this._timePoint.length && (n = this._timePoint[0].price, o = .5 * (this._timePoint[0].price + this._timePoint[1].price), this._timePoint[0].price = o, this._timePoint[1].price = o, r = {
                price: n,
                offset: this._timePoint[0].offset,
                time_t: this._timePoint[0].time_t
            }, this._timePoint.push(r))
        }, t.exports = r
    }).call(e, i(40));
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t) {
            this._data = t
        }

        function o(t, e) {
            a.call(this, t, e), this._invalidated = !0
        }

        function r(t, e) {
            this._constructor = "LineToolTimeCycles";
            var i;
            i = e ? e : new h("linetooltimecycles"), s.call(this, t, new o(this, t), i)
        }
        var s = i(77).LineDataSource,
            a = i(115),
            l = i(67),
            c = i(71),
            h = i(81).DefaultProperty;
        n.prototype.draw = function(t) {
            t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, CanvasEx.setLineStyle(t, this._data.linestyle), t.save(), t.translate(this._data.point.x + 1, this._data.point.y), t.scale(this._data.width, this._data.height), t.beginPath(), t.arc(.5, 0, .5, Math.PI, 0, !1), t.restore(), t.stroke(), this._data.fillBackground && (t.fillStyle = TradingView.generateColor(this._data.backcolor, this._data.transparency), t.fill())
        }, n.prototype.hitTest = function(t) {
            var i, n, o, r, s;
            return t.y > this._data.point.y ? null : t.x < this._data.point.x || t.x > this._data.point.x + this._data.width ? null : (i = new e.Point(this._data.point.x + this._data.width / 2, this._data.point.y), n = t.substract(i), o = this._data.height / this._data.width, n.y /= o, r = n.length(), s = 3, Math.abs(r - this._data.width / 2) < s ? new l(l.MOVEPOINT) : null)
        }, inherit(o, a), o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.updateImpl = function() {
            a.prototype.update.call(this), this._invalidated = !1
        }, o.prototype.renderer = function() {
            var t, i, o, r, s, a, l, h, d, u, p, f, _, g, m, v, y, w, b;
            if (this._invalidated && this.updateImpl(), this._points.length < 2) return null;
            if (t = this._source.points(), i = t[0], o = t[1], r = Math.min(i.index, o.index), s = Math.max(i.index, o.index), a = s - r, l = this._points[0], h = this._points[1], d = Math.abs(l.x - h.x), u = new c, p = this._source.properties(), f = this._model.timeScale(), 0 === a) return null;
            for (_ = Math.min(l.x, h.x), g = [], m = r; _ > -d; m -= a) _ = f.indexToCoordinate(m), g.push(_);
            for (_ = Math.max(l.x, h.x), m = s; _ < f.width(); m += a) _ = f.indexToCoordinate(m), g.push(_);
            for (v = 0; v < g.length; v++) y = new e.Point(g[v], l.y), w = {
                point: y,
                width: d,
                height: d,
                color: p.linecolor.value(),
                linewidth: p.linewidth.value(),
                linestyle: p.linestyle.value(),
                fillBackground: p.fillBackground.value(),
                backcolor: p.backgroundColor.value(),
                transparency: p.transparency.value()
            }, b = new n(w), u.append(b);
            return this.addAnchors(u), u
        }, inherit(r, s), r.prototype.pointsCount = function() {
            return 2
        }, r.prototype.title = function() {
            return "Time Cycles"
        }, r.prototype.setPoint = function(t, e, i) {
            var n, o = $.extend({}, e),
                r = this._points[0],
                s = this._points[1],
                a = this.priceScale();
            a.isPercent() && (n = this.ownerSource().firstValue(), o.price = a.priceRange().convertFromPercent(o.price, n)), r.price = o.price, s.price = o.price, this._points[t] = o, this.normalizePoints()
        }, r.prototype.addPoint = function(t, e, i) {
            var n, o, r = s.prototype.addPoint.call(this, t, e, !0);
            return r && (n = this._points[0], o = this._points[1], o.price = n.price, i || (this.normalizePoints(), this.createServerPoints())), r
        }, t.exports = r
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t) {
            this._data = t
        }

        function o(t, e) {
            a.call(this, t, e), this._invalidated = !0
        }

        function r(t, e) {
            this._constructor = "LineToolSineLine";
            var i;
            i = e ? e : new h("linetoolsineline"), s.call(this, t, new o(this, t), i)
        }
        var s = i(77).LineDataSource,
            a = i(115),
            l = i(67),
            c = i(71),
            h = i(81).DefaultProperty;
        n.prototype.draw = function(t) {
            var e, i, n;
            for (t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, CanvasEx.setLineStyle(t, this._data.linestyle), t.beginPath(), t.moveTo(this._data.point.x, this._data.point.y), e = 1; e <= 2 * this._data.width; e++) i = e * Math.PI / this._data.width, n = Math.sin(i - Math.PI / 2) * this._data.height / 2, t.lineTo(this._data.point.x + e, this._data.point.y + n + this._data.height / 2);
            t.stroke()
        }, n.prototype.hitTest = function(t) {
            var e, i, n, o;
            return t.x < this._data.point.x || t.x > this._data.point.x + 2 * this._data.width ? null : (e = t.x - this._data.point.x, i = e * Math.PI / this._data.width, n = Math.sin(i - Math.PI / 2) * this._data.height / 2, n = this._data.point.y + n + this._data.height / 2, o = 3, Math.abs(n - t.y) <= o ? new l(l.MOVEPOINT) : null)
        }, inherit(o, a), o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.updateImpl = function() {
            a.prototype.update.call(this), this._invalidated = !1
        }, o.prototype.renderer = function() {
            var t, i, o, r, s, a, l, h, d, u, p, f, _, g, m, v, y, w, b, S;
            if (this._invalidated && this.updateImpl(), this._points.length < 2) return null;
            if (t = this._source.points(), i = t[0], o = t[1], r = Math.min(i.index, o.index), s = Math.max(i.index, o.index), a = 2 * (s - r), l = this._points[0], h = this._points[1], d = Math.abs(l.x - h.x), u = h.y - l.y, p = new c, f = this._source.properties(), _ = this._model.timeScale(), 0 === a) return null;
            for (g = _.indexToCoordinate(r), m = [], v = r; g > -d; v -= a) g = _.indexToCoordinate(v), m.push(g);
            for (g = g = _.indexToCoordinate(r + a), v = r + a; g < _.width(); v += a) g = _.indexToCoordinate(v), m.push(g);
            for (y = 0; y < m.length; y++) w = new e.Point(m[y], l.y), b = {
                point: w,
                width: d,
                height: u,
                color: f.linecolor.value(),
                linewidth: f.linewidth.value(),
                linestyle: f.linestyle.value()
            }, S = new n(b), p.append(S);
            return this.addAnchors(p), p
        }, inherit(r, s), r.prototype.pointsCount = function() {
            return 2
        }, r.prototype.title = function() {
            return "Sine Line"
        }, t.exports = r
    }).call(e, i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            l.call(this, t, e), this._invalidated = !0
        }

        function o(t, e, i) {
            this._source = t, this._index = e, this._bars = i || []
        }

        function r(t, e, i) {
            this._source = t, p.call(this, "linetoolghostfeed", e, i)
        }

        function s(t, e, i) {
            var o, l;
            this._constructor = "LineToolGhostFeed", e ? (o = e, o._source = this) : o = new r(this), i || (l = Math.round(t.mainSeries().data().calculateATR()), o.averageHL.setValue(l)), a.call(this, t, new n(this, t), o), this._segments = [], o.averageHL.listeners().subscribe(this, s.prototype.regenerate), o.variance.listeners().subscribe(this, s.prototype.regenerate), o.points || o.addProperty("points"), this._currentAverageHL = this._properties.averageHL.value(), this._currentVariance = this._properties.variance.value(), this._currentInterval = t.mainSeries().interval()
        }
        var a = i(77).LineDataSource,
            l = i(115),
            c = i(153).TrendLineRenderer,
            h = i(67),
            d = i(68).PaneRendererCandles,
            u = i(71),
            p = i(81).DefaultProperty;
        inherit(n, l), n.prototype.update = function() {
            l.prototype.update.call(this), this._invalidated = !0
        }, n.prototype.udpateImpl = function() {
            var t = this;
            this._segments = [], t._points.length < 2 || (this._segments = this._source.segments().map(function(i, n) {
                var o, r, s, a, l, c, h, d, u, p, f, _ = t._source.points();
                return n >= t._points.length - 1 ? null : (o = t._points[n].x, r = _[n].price, s = _[n + 1].price, a = _[n + 1].index - _[n].index, l = t._model.timeScale().barSpacing() * e.sign(a), c = (s - r) / (i.bars().length - 1), h = t._source.properties(), d = h.candleStyle.upColor.value(), u = h.candleStyle.downColor.value(), p = h.candleStyle.borderUpColor.value(), f = h.candleStyle.borderDownColor.value(), {
                    bars: i.bars().map(function(e, i) {
                        var n = e.c >= e.o;
                        return {
                            time: o + i * l,
                            open: t.priceToCoordinate(e.o + r + i * c),
                            high: t.priceToCoordinate(e.h + r + i * c),
                            low: t.priceToCoordinate(e.l + r + i * c),
                            close: t.priceToCoordinate(e.c + r + i * c),
                            color: n ? d : u,
                            borderColor: n ? p : f,
                            hollow: !1
                        }
                    })
                })
            }).filter(function(t) {
                return !!t
            }))
        }, n.prototype.renderer = function() {
            var t, e, i, n, o, r, s, l, p, f, _, g, m;
            for (this._invalidated && (this.udpateImpl(), this._invalidated = !1), t = new u, e = 1; e < this._points.length; e++) i = this._points[e - 1], n = this._points[e], o = {
                points: [i, n],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: "#808080",
                linewidth: 1,
                linestyle: CanvasEx.LINESTYLE_SOLID,
                extendleft: !1,
                extendright: !1,
                leftend: a.LINEEND_NORMAL,
                rightend: a.LINEEND_NORMAL
            }, r = new h(h.MOVEPOINT, null), t.append(new c(o, r));
            for (s = this._source.properties(), l = s.candleStyle.drawWick.value(), p = s.candleStyle.drawBorder.value(), f = s.candleStyle.borderColor.value(), _ = s.candleStyle.wickColor.value(), g = new u, g.setGlobalAlpha(1 - s.transparency.value() / 100), e = 0; e < this._segments.length; e++) m = {
                bars: this._segments[e].bars,
                barSpacing: this._model.timeScale().barSpacing(),
                drawWick: l,
                drawBorder: p,
                borderColor: f,
                wickColor: _,
                hittest: new h(h.MOVEPOINT, null)
            }, g.append(new d(m));
            return t.append(g), this.addAnchors(t), t
        }, o.prototype.setBars = function(t) {
            this._bars = t || []
        }, o.prototype.clone = function(t) {
            return new o(t, this._index, TradingView.clone(this._bars))
        }, o.prototype.createBar = function() {
            var t, e, i, n, o, r, s = this._source.properties().averageHL.value(),
                a = this._source.properties().variance.value() / 100,
                l = this._source._model.mainSeries().base(),
                c = Math.random(),
                h = s * (1 - 2 * c) * a;
            return c = Math.random(), t = s * (1 + (.5 - c) * a), e = h - t / 2, i = e + t, n = e + Math.random() * t, o = e + Math.random() * t, r = {
                o: n / l,
                h: i / l,
                l: e / l,
                c: o / l
            }
        }, o.prototype.generate = function() {
            var t, i, n, o, r, s;
            if (this._bars = [], t = this._source.points(), i = t[this._index], n = t[this._index + 1], i && n && i.index !== n.index)
                for (this._avgHL = this._source.properties().averageHL.value(), this._variance = this._source.properties().variance.value() / 100, o = this._index ? i.index + 1 : i.index, r = e.sign(n.index - i.index), s = o; s !== n.index; s += r) this._bars.push(this.createBar())
        }, o.prototype.bars = function() {
            return this._bars
        }, o.prototype.setSize = function(t) {
            if (t < this._bars.length) this._bars.splice(t, this._bars.length - t);
            else
                for (; this._bars.length < t;) this._bars.push(this.createBar())
        }, inherit(r, p), r.prototype.restoreFactoryDefaults = function() {
            var t, e;
            p.prototype.restoreFactoryDefaults.call(this), t = this._source._model, e = Math.round(t.mainSeries().data().calculateATR()), this.averageHL.setValue(e)
        }, inherit(s, a), s.prototype.createPropertiesObject = function(t, e, i) {
            return new r(null, e, i)
        }, s.prototype.regenerate = function() {
            this._currentAverageHL = this._properties.averageHL.value(), this._currentVariance = this._properties.variance.value(), this._segments.forEach(function(t) {
                t.generate()
            }), this.updateAllViews(), this._model.updateSource(this)
        }, s.prototype.propertiesChanged = function() {
            a.prototype.propertiesChanged.call(this), this._currentAverageHL === this._properties.averageHL.value() && this._currentVariance === this._properties.variance.value() || this.regenerate()
        }, s.prototype.pointsCount = function() {
            return -1
        }, s.prototype.title = function() {
            return "Ghost Feed"
        }, s.prototype.segmentBars = function(t) {
            return this._segments[t].bars()
        }, s.prototype.segments = function() {
            return this._segments
        }, s.prototype.generateBars = function(t) {
            this._segments.length <= t && this._segments.push(new o(this, t)), this._segments[t].generate()
        }, s.prototype.addPoint = function(t) {
            var e, i, n;
            if (this._points.length > 0 && (e = this._points[this._points.length - 1], e.index === t.index)) {
                for (this._lastPoint = null, this.normalizePoints(), this.createServerPoints(), i = 0; i < this._points.length; i++) this._createPointProperty(i);
                return !0
            }
            return n = a.prototype.addPoint.call(this, t), this._finished && (this._lastPoint = null), this._points.length > 1 && this.generateBars(this._points.length - 2), n || this._finished
        }, s.prototype.finish = function() {
            this._finished = !0, this._lastPoint = null, this.normalizePoints(), this.createServerPoints()
        }, s.prototype.setPoint = function(t, e, i) {
            var n, o, r;
            a.prototype.setPoint.call(this, t, e, i), t > 0 && (n = this.points()[t - 1], o = e.index - n.index, this._segments[t - 1].setSize(Math.abs(o))), t < this.points().length - 1 && (r = this.points()[t + 1], o = r.index - e.index, this._segments[t].setSize(Math.abs(o)))
        }, s.prototype.state = function(t) {
            var e = a.prototype.state.call(this, t);
            return e.segments = this._segments.map(function(t) {
                return {
                    bars: t.bars()
                }
            }), e
        }, s.prototype.restoreData = function(t) {
            var e = this;
            t.segments && (this._segments = t.segments.map(function(t, i) {
                return new o(e, i, [].concat(t.bars))
            })), this._currentAverageHL = this._properties.averageHL.value(), this._currentVariance = this._properties.variance.value()
        }, s.prototype.onData = function(t) {
            if (a.prototype.onData.call(this, t), 0 === this.properties().points._childs.length)
                for (var e = 0; e < this._points.length; e++) this._createPointProperty(e);
            this._currentInterval !== this._model.mainSeries().interval() && (this.regenerate(), this._currentInterval = this._model.mainSeries().interval())
        }, s.prototype.cloneData = function(t) {
            var e = this;
            this._segments = t._segments.map(function(t) {
                return t.clone(e)
            })
        }, t.exports = s
    }).call(e, i(40))
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(t, e, i, n) {
            var o, r, s, a, l, c = i.substract(t).length() + i.substract(e).length(),
                h = 3 / c,
                d = 5;
            for (o = 0; 1 >= o; o += h)
                if (r = t.scaled((1 - o) * (1 - o)), s = i.scaled(2 * o * (1 - o)), a = e.scaled(o * o), l = r.add(s).add(a), l.substract(n).length() < d) return !0;
            return null
        }

        function o(t, e, i, n, o) {
            var r, s, a, l, c, h, d = i.substract(t).length() + n.substract(i).length() + e.substract(n).length(),
                u = 3 / d,
                p = 5;
            for (r = 0; 1 >= r; r += u)
                if (s = t.scaled((1 - r) * (1 - r) * (1 - r)), a = i.scaled(3 * (1 - r) * (1 - r) * r), l = n.scaled(3 * (1 - r) * r * r), c = e.scaled(r * r * r), h = s.add(a).add(l).add(c), h.substract(o).length() < p) return !0
        }

        function r(t, e, i, n, o) {
            var r, s, a, l, c, h, d, u, p, f, _ = i.substract(t).length() + i.substract(e).length();
            if (!_) return [];
            for (r = 3 / _, s = 500, a = [], l = 1; s * r >= l; l += r) c = t.scaled((1 - l) * (1 - l)), h = i.scaled(2 * l * (1 - l)), d = e.scaled(l * l), u = c.add(h).add(d), a.length > 0 && (p = a[a.length - 1], f = p.substract(u).length(), 2 > f && (r *= 2)), a.push(u);
            return a
        }

        function s(t) {
            this._data = t
        }

        function a(t, e) {
            p.call(this, t, e), this._invalidated = !0
        }

        function l(t, e) {
            this._constructor = "LineToolBezierQuadro";
            var i;
            i = e ? e : new m("linetoolbezierquadro"), u.call(this, t, new a(this, t), i)
        }

        function c(t) {
            this._data = t
        }

        function h(t, e) {
            p.call(this, t, e), this._invalidated = !0
        }

        function d(t, e) {
            this._constructor = "LineToolBezierCubic";
            var i;
            i = e ? e : new m("linetoolbeziercubic"), u.call(this, t, new h(this, t), i)
        }
        var u = i(77).LineDataSource,
            p = i(115),
            f = i(153).TrendLineRenderer,
            _ = i(67),
            g = i(71),
            m = i(81).DefaultProperty;
        s.prototype.draw = function(t) {
            var e, i, n, o, r, s, a, l = this._data.points[0],
                c = this._data.points[1];
            if (t.lineCap = "butt", t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, CanvasEx.setLineStyle(t, this._data.linestyle), 2 === this._data.points.length) t.beginPath(), t.moveTo(l.x, l.y), t.lineTo(c.x, c.y), t.stroke();
            else {
                if (e = this._data.points[2], i = c.substract(l), n = e.substract(i.scaled(.25)), o = e.add(i.scaled(.25)), this._data.fillBack && this._data.points.length > 2 && (t.fillStyle = TradingView.generateColor(this._data.backcolor, this._data.transparency), t.beginPath(), t.moveTo(l.x, l.y), t.quadraticCurveTo(n.x, n.y, e.x, e.y), t.quadraticCurveTo(o.x, o.y, c.x, c.y), t.fill()), t.beginPath(), t.moveTo(l.x, l.y), this._data.extendLeftPoints.length > 0)
                    for (r = this._data.extendLeftPoints[this._data.extendLeftPoints.length - 1], t.moveTo(r.x, r.y), s = this._data.extendLeftPoints.length - 2; s >= 0; s--) a = this._data.extendLeftPoints[s], t.lineTo(a.x, a.y);
                for (t.quadraticCurveTo(n.x, n.y, e.x, e.y), t.quadraticCurveTo(o.x, o.y, c.x, c.y), s = 0; s < this._data.extendRightPoints.length; s++) a = this._data.extendRightPoints[s], t.lineTo(a.x, a.y);
                t.stroke(), this._data.leftend === u.LINEEND_ARROW && f.prototype.drawArrow(n, l, t, t.lineWidth), this._data.rightend === u.LINEEND_ARROW && f.prototype.drawArrow(o, c, t, t.lineWidth)
            }
        }, s.prototype.hitTest = function(e) {
            var i, o, r, s, a, l, c, h, d, u;
            if (3 === this._data.points.length) {
                if (i = this._data.points[0], o = this._data.points[1], r = this._data.points[2], s = o.substract(i), a = r.substract(s.scaled(.25)), l = r.add(s.scaled(.25)), c = n(r, i, a, e) || n(r, o, l, e)) return new _(_.MOVEPOINT);
                for (h = 3, d = 1; d < this._data.extendLeftPoints.length; d++)
                    if (i = this._data.extendLeftPoints[d - 1], o = this._data.extendLeftPoints[d], u = t.distanceToSegment(i, o, e).distance, h > u) return new _(_.MOVEPOINT);
                for (d = 1; d < this._data.extendRightPoints.length; d++)
                    if (i = this._data.extendRightPoints[d - 1], o = this._data.extendRightPoints[d], u = t.distanceToSegment(i, o, e).distance, h > u) return new _(_.MOVEPOINT)
            }
            return null
        }, inherit(a, p), a.prototype.update = function() {
            p.prototype.update.call(this), this._invalidated = !0
        }, a.prototype.updateImpl = function() {
            var t, e, i, n, o, s, a, l;
            this._extendLeftPoints = [], this._extendRightPoints = [], this._source.points().length < 3 || (t = this._source.pointToScreenPoint(this._source.points()[0])[1], e = this._source.pointToScreenPoint(this._source.points()[1])[1], i = this._source.pointToScreenPoint(this._source.points()[2])[1], n = e.substract(t), o = i.substract(n.scaled(.25)), s = i.add(n.scaled(.25)), a = this._model.timeScale().width(), l = this._source.priceScale().height(), this._source.properties().extendLeft.value() && (this._extendLeftPoints = r(i, t, o, a, l)), this._source.properties().extendRight.value() && (this._extendRightPoints = r(i, e, s, a, l)))
        }, a.prototype.renderer = function() {
            var t, e, i, n;
            return this._points.length < 2 ? new g : (this._invalidated && (this.updateImpl(), this._invalidated = !1), t = [].concat(this._points), this._source._controlPoint && t.push(this._source.pointToScreenPoint(this._source._controlPoint)[0]), e = {}, i = this._source.properties(), e.points = t, e.color = i.linecolor.value(), e.linewidth = i.linewidth.value(), e.linestyle = i.linestyle.value(), e.leftend = i.leftEnd.value(), e.rightend = i.rightEnd.value(), e.fillBack = i.fillBackground.value(), e.backcolor = i.backgroundColor.value(), e.transparency = i.transparency.value(), e.extendLeftPoints = this._extendLeftPoints, e.extendRightPoints = this._extendRightPoints, n = new g, n.append(new s(e)), this.addAnchors(n), n)
        }, inherit(l, u), l.prototype.pointsCount = function() {
            return 2
        }, l.prototype.title = function() {
            return "Curve"
        }, l.prototype.controlPoint = function() {
            var t = this.pointToScreenPoint(this.points()[0])[0],
                e = this.pointToScreenPoint(this.points()[1])[0],
                i = e.substract(t).scaled(.5),
                n = i.transponed().scaled(.3),
                o = t.add(e).scaled(.5),
                r = o.add(n),
                s = this.screenPointToPoint(r);
            return s
        }, l.prototype.setLastPoint = function(t, e) {
            u.prototype.setLastPoint.call(this, t, e), this._controlPoint = this.controlPoint()
        }, l.prototype.addPoint = function(t, e, i) {
            var n, o = u.prototype.addPoint.call(this, t, e, !0);
            return o && (n = this.controlPoint(), this._points.push(n), delete this._controlPoint, i || (this.normalizePoints(), this.createServerPoints()), this._createPointProperty(2)), o
        }, l.prototype.restorePoints = function(t, e, i) {
            u.prototype.restorePoints.call(this, t, e, i), this._createPointProperty(2)
        }, c.prototype.draw = function(t) {
            var e, i, n, o, r, s, a, l, c, h, d, p, _;
            if (t.lineCap = "butt", t.strokeStyle = this._data.color, t.lineWidth = this._data.linewidth, CanvasEx.setLineStyle(t, this._data.linestyle), e = this._data.points[0], i = this._data.points[1], 2 === this._data.points.length) t.beginPath(), t.moveTo(e.x, e.y), t.lineTo(i.x, i.y), t.stroke(), this._data.leftend === u.LINEEND_ARROW && f.prototype.drawArrow(i, e, t, t.lineWidth), this._data.rightend === u.LINEEND_ARROW && f.prototype.drawArrow(e, i, t, t.lineWidth);
            else {
                if (n = this._data.points[2], o = this._data.points[3], r = o.substract(e), s = n.substract(r.scaled(.25)), a = n.add(r.scaled(.25)), l = i.substract(n), c = o.substract(l.scaled(.25)), h = o.add(l.scaled(.25)), this._data.fillBack && this._data.points.length > 2 && (t.fillStyle = TradingView.generateColor(this._data.backcolor, this._data.transparency), t.beginPath(), t.moveTo(e.x, e.y), t.quadraticCurveTo(s.x, s.y, n.x, n.y), t.bezierCurveTo(a.x, a.y, c.x, c.y, o.x, o.y), t.quadraticCurveTo(h.x, h.y, i.x, i.y), t.fill()), t.beginPath(), this._data.extendLeftPoints.length > 0)
                    for (d = this._data.extendLeftPoints[this._data.extendLeftPoints.length - 1], t.moveTo(d.x, d.y), p = this._data.extendLeftPoints.length - 2; p >= 0; p--) _ = this._data.extendLeftPoints[p], t.lineTo(_.x, _.y);
                for (t.moveTo(e.x, e.y), t.quadraticCurveTo(s.x, s.y, n.x, n.y), t.bezierCurveTo(a.x, a.y, c.x, c.y, o.x, o.y), t.quadraticCurveTo(h.x, h.y, i.x, i.y), p = 0; p < this._data.extendRightPoints.length; p++) _ = this._data.extendRightPoints[p], t.lineTo(_.x, _.y);
                t.stroke(), this._data.leftend === u.LINEEND_ARROW && f.prototype.drawArrow(s, e, t, t.lineWidth), this._data.rightend === u.LINEEND_ARROW && f.prototype.drawArrow(h, i, t, t.lineWidth)
            }
        }, c.prototype.hitTest = function(e) {
            var i, r, s, a, l, c, h, d, u, p, f, g, m, v;
            if (4 === this._data.points.length) {
                if (i = this._data.points[0], r = this._data.points[1], s = this._data.points[2], a = this._data.points[3], l = a.substract(i), c = s.substract(l.scaled(.25)), h = s.add(l.scaled(.25)), d = r.substract(s), u = a.substract(d.scaled(.25)), p = a.add(d.scaled(.25)), f = n(s, i, c, e) || o(s, a, h, u, e) || n(a, r, p, e)) return new _(_.MOVEPOINT);
                for (g = 3, m = 1; m < this._data.extendLeftPoints.length; m++)
                    if (i = this._data.extendLeftPoints[m - 1], r = this._data.extendLeftPoints[m], v = t.distanceToSegment(i, r, e).distance, g > v) return new _(_.MOVEPOINT);
                for (m = 1; m < this._data.extendRightPoints.length; m++)
                    if (i = this._data.extendRightPoints[m - 1], r = this._data.extendRightPoints[m], v = t.distanceToSegment(i, r, e).distance, g > v) return new _(_.MOVEPOINT)
            }
            return null
        }, inherit(h, p), h.prototype.update = function() {
            p.prototype.update.call(this), this._invalidated = !0
        }, h.prototype.updateImpl = function() {
            var t, e, i, n, o, s, a, l, c, h;
            this._extendLeftPoints = [], this._extendRightPoints = [], this._source.points().length < 4 || (t = this._source.pointToScreenPoint(this._source.points()[0])[1], e = this._source.pointToScreenPoint(this._source.points()[1])[1], i = this._source.pointToScreenPoint(this._source.points()[2])[1], n = this._source.pointToScreenPoint(this._source.points()[3])[1], o = n.substract(t), s = i.substract(o.scaled(.25)), a = e.substract(i), l = n.add(a.scaled(.25)), c = this._model.timeScale().width(), h = this._source.priceScale().height(), this._source.properties().extendLeft.value() && (this._extendLeftPoints = r(i, t, s, c, h)), this._source.properties().extendRight.value() && (this._extendRightPoints = r(n, e, l, c, h)))
        }, h.prototype.renderer = function() {
            var t, e, i, n;
            return this._points.length < 2 ? new g : (this._invalidated && (this.updateImpl(), this._invalidated = !1), t = [].concat(this._points), this._source._controlPoints && (t.push(this._source.pointToScreenPoint(this._source._controlPoints[0])[0]), t.push(this._source.pointToScreenPoint(this._source._controlPoints[1])[0])), e = {}, i = this._source.properties(), e.points = t, e.color = i.linecolor.value(), e.linewidth = i.linewidth.value(), e.linestyle = i.linestyle.value(), e.leftend = i.leftEnd.value(), e.rightend = i.rightEnd.value(), e.fillBack = i.fillBackground.value(), e.backcolor = i.backgroundColor.value(), e.transparency = i.transparency.value(), e.extendLeftPoints = this._extendLeftPoints, e.extendRightPoints = this._extendRightPoints, n = new g, n.append(new c(e)), this.addAnchors(n), n)
        }, inherit(d, u), d.prototype.pointsCount = function() {
            return 2
        }, d.prototype.title = function() {
            return "Double Curve"
        }, d.prototype.controlPoints = function() {
            var t = this.pointToScreenPoint(this.points()[0])[0],
                e = this.pointToScreenPoint(this.points()[1])[0],
                i = e.substract(t).scaled(.5),
                n = i.transponed().scaled(.3),
                o = t.add(e).scaled(.33),
                r = t.add(e).scaled(.67),
                s = o.add(n),
                a = r.substract(n);
            return [this.screenPointToPoint(s), this.screenPointToPoint(a)]
        }, d.prototype.setLastPoint = function(t, e) {
            u.prototype.setLastPoint.call(this, t, e), this._controlPoints = this.controlPoints()
        }, d.prototype.addPoint = function(t, e, i) {
            var n, o = u.prototype.addPoint.call(this, t, e, !0);
            return o && (n = this.controlPoints(), delete this._controlPoints, this._points.push(n[0]), this._points.push(n[1]), i || (this.normalizePoints(), this.createServerPoints()), this._createPointProperty(2), this._createPointProperty(3)), o
        }, d.prototype.restorePoints = function(t, e, i) {
            u.prototype.restorePoints.call(this, t, e, i), this._createPointProperty(2), this._createPointProperty(3)
        }, e.LineToolBezierQuadro = l, e.LineToolBezierCubic = d
    }).call(e, i(40))
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        this._constructor = "LineToolArrow";
        var i = e || new r("linetoolarrow");
        o.call(this, t, i)
    }
    var o = i(153).LineToolTrendLine,
        r = i(81).DefaultProperty;
    inherit(n, o), n.prototype.title = function() {
        return "Arrow"
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        this._constructor = "LineToolRay";
        var i = e || new r("linetoolray");
        o.call(this, t, i)
    }
    var o = i(153).LineToolTrendLine,
        r = i(81).DefaultProperty;
    inherit(n, o), n.prototype.title = function() {
        return "Ray"
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        this._constructor = "LineToolExtended";
        var i = e || new r("linetoolextended");
        o.call(this, t, i)
    }
    var o = i(153).LineToolTrendLine,
        r = i(81).DefaultProperty;
    inherit(n, o), n.prototype.title = function() {
        return "Extended Line"
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        var i = e || this.createPropertiesObject("linetoolschiffpitchfork");
        r.call(this, t, i), this._constructor = "LineToolSchiffPitchfork"
    }
    var o = i(149),
        r = i(239).LineToolPitchfork;
    inherit(n, r), n.prototype.title = function() {
        return $.t("Modified Schiff Pitchfork")
    }, n.prototype.createPropertiesObject = function(t, e, i) {
        return new o(t, e, i, {
            range: [0, 8]
        })
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        var i = e || this.createPropertiesObject("linetoolschiffpitchfork2");
        r.call(this, t, i), this._constructor = "LineToolSchiffPitchfork2"
    }
    var o = i(149),
        r = i(239).LineToolPitchfork;
    inherit(n, r), n.prototype.title = function() {
        return $.t("Schiff Pitchfork")
    }, n.prototype.createPropertiesObject = function(t, e, i) {
        return new o(t, e, i, {
            range: [0, 8]
        })
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        var i = e || this.createPropertiesObject("linetoolinsidepitchfork");
        r.call(this, t, i), this._constructor = "LineToolInsidePitchfork"
    }
    var o = i(149),
        r = i(239).LineToolPitchfork;
    inherit(n, r), n.prototype.title = function() {
        return $.t("Inside Pitchfork")
    }, n.prototype.createPropertiesObject = function(t, e, i) {
        return new o(t, e, i, {
            range: [0, 8]
        })
    }, t.exports = n
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, i) {
            this._constructor = "LineToolFlagMark";
            var n = i || new s("linetoolflagmark");
            o.call(this, t, new r(this, t, this.image, 25, 25, -8, -21), n), this._paneViews[0].setAnchors(new e.Point(0, 0))
        }
        var o = i(77).LineDataSource,
            r = i(237),
            s = i(81).DefaultProperty;
        inherit(n, o), n.prototype.image = new Image, n.prototype.image.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAsElEQVR4AWMYWcDExOS/YUd4hWF7+H90bNAePpO2liDwJTxyi2htyVXLvlBOWlry2bAtVIumwWXQERFF4zgJ20iPiP8JDCpLeqSuJ6ZdoRJ0SMIRx7QbQtmItgSXnGFbRCzMEnIzK8ISWgL6WzJqibGxsYaFhYUC7SxBWMQPNMjazMxMjebBZWhoKAq00NHc3FyL5nFiaWkpDTTYz8jISI/mEW9qaqoExGFgS+gFRgEAaE0hWxrw50oAAAAASUVORK5CYII=", n.prototype.pointsCount = function() {
            return 1
        }, n.prototype.title = function() {
            return "Flag Mark"
        }, n.prototype.version = 2, n.prototype.migrateVersion = function(t) {
            1 === t && (this.version = 1, this._paneViews[0]._offsetX = 0, this._paneViews[0]._offsetY = 0, this._paneViews[0].setAnchors(new e.Point(9, 21)))
        }, t.exports = n
    }).call(e, i(40))
}, function(t, e, i) {
    "use strict";

    function n(t) {
        this._line = t, this._data = {
            bodyText: "position",
            quantityText: "0"
        }
    }

    function o(t, e) {
        h.call(this, t, e)
    }

    function r(t, e) {
        c.call(this, t, e), this._rendererCache = {}
    }

    function s(t, e) {
        this._adapter = new n(this), this._constructor = "LineToolPosition";
        var i = e || new f("linetoolposition");
        a.call(this, t, new r(this, t), i)
    }
    var a = i(225),
        l = i(77).LineDataSource,
        c = i(115),
        h = i(77).LineToolPriceAxisView,
        d = i(143),
        u = i(67),
        p = i(91).Rect,
        f = i(81).DefaultProperty;
    n.prototype.getPrice = function() {
        return this._line.points()[0].price
    }, n.prototype.setPrice = function(t) {
        var e = this._line.points()[0];
        return e.price = t, this._line._points[0] = e, this._line.normalizePoints(), this._line.updateAllViewsAndRedraw(), this
    }, n.prototype.getText = function() {
        return this._data.bodyText
    }, n.prototype.setText = function(t) {
        return this._data.bodyText = t || "", this._line.updateAllViewsAndRedraw(), this
    }, n.prototype.setTooltip = function(t) {
        return null == t ? t = "" : t += "", this._line.properties().tooltip.setValue(t), this
    }, n.prototype.getTooltip = function() {
        return this._line.properties().tooltip.value()
    }, n.prototype.getQuantity = function() {
        return this._data.quantityText
    }, n.prototype.setQuantity = function(t) {
        return this._data.quantityText = t || "", this._line.updateAllViewsAndRedraw(), this
    }, n.prototype.getExtendLeft = function() {
        var t = this._line.properties().extendLeft.value();
        return "inherit" === t ? this._line._model.properties().tradingProperties.extendLeft.value() : t
    }, n.prototype.setExtendLeft = function(t) {
        return this._line.properties().extendLeft.setValue(t), this
    }, n.prototype.getLineLength = function() {
        var t = this._line.properties().lineLength.value();
        return "inherit" === t ? this._line._model.properties().tradingProperties.lineLength.value() : t
    }, n.prototype.setLineLength = function(t) {
        return this._line.properties().lineLength.setValue(Math.max(0, Math.min(t, 100))), this
    }, n.prototype.getLineColor = function() {
        return d.getColorFromProperties(this._line.properties().lineColor, this._line.properties().lineTransparency)
    }, n.prototype.setLineColor = function(t) {
        return d.setColorToProperties(t, this._line.properties().lineColor, this._line.properties().lineTransparency), this
    }, n.prototype.getLineStyle = function() {
        var t = this._line.properties().lineStyle.value();
        return "inherit" === t ? this._line._model.properties().tradingProperties.lineStyle.value() : t
    }, n.prototype.setLineStyle = function(t) {
        return this._line.properties().lineStyle.setValue(t), this
    }, n.prototype.getLineWidth = function() {
        var t = this._line.properties().lineWidth.value();
        return "inherit" === t ? this._line._model.properties().tradingProperties.lineWidth.value() : t
    }, n.prototype.setLineWidth = function(t) {
        return this._line.properties().lineWidth.setValue(t), this
    }, n.prototype.getBodyBorderColor = function() {
        return d.getColorFromProperties(this._line.properties().bodyBorderColor, this._line.properties().bodyBorderTransparency)
    }, n.prototype.setBodyBorderColor = function(t) {
        return d.setColorToProperties(t, this._line.properties().bodyBorderColor, this._line.properties().bodyBorderTransparency), this
    }, n.prototype.getBodyBackgroundColor = function() {
        return d.getColorFromProperties(this._line.properties().bodyBackgroundColor, this._line.properties().bodyBackgroundTransparency)
    }, n.prototype.setBodyBackgroundColor = function(t) {
        return d.setColorToProperties(t, this._line.properties().bodyBackgroundColor, this._line.properties().bodyBackgroundTransparency), this
    }, n.prototype.getBodyTextColor = function() {
        return d.getColorFromProperties(this._line.properties().bodyTextColor, this._line.properties().bodyTextTransparency)
    }, n.prototype.setBodyTextColor = function(t) {
        return d.setColorToProperties(t, this._line.properties().bodyTextColor, this._line.properties().bodyTextTransparency), this
    }, n.prototype.getBodyFont = function() {
        return d.getFontFromProperties(this._line.properties().bodyFontFamily, this._line.properties().bodyFontSize, this._line.properties().bodyFontBold, this._line.properties().bodyFontItalic)
    }, n.prototype.setBodyFont = function(t) {
        return d.setFontToProperties(t, this._line.properties().bodyFontFamily, this._line.properties().bodyFontSize, this._line.properties().bodyFontBold, this._line.properties().bodyFontItalic), this
    }, n.prototype.getQuantityBorderColor = function() {
        return d.getColorFromProperties(this._line.properties().quantityBorderColor, this._line.properties().quantityBorderTransparency)
    }, n.prototype.setQuantityBorderColor = function(t) {
        return d.setColorToProperties(t, this._line.properties().quantityBorderColor, this._line.properties().quantityBorderTransparency), this
    }, n.prototype.getQuantityBackgroundColor = function() {
        return d.getColorFromProperties(this._line.properties().quantityBackgroundColor, this._line.properties().quantityBackgroundTransparency)
    }, n.prototype.setQuantityBackgroundColor = function(t) {
        return d.setColorToProperties(t, this._line.properties().quantityBackgroundColor, this._line.properties().quantityBackgroundTransparency), this
    }, n.prototype.getQuantityTextColor = function() {
        return d.getColorFromProperties(this._line.properties().quantityTextColor, this._line.properties().quantityTextTransparency)
    }, n.prototype.setQuantityTextColor = function(t) {
        return d.setColorToProperties(t, this._line.properties().quantityTextColor, this._line.properties().quantityTextTransparency), this
    }, n.prototype.getQuantityFont = function() {
        return d.getFontFromProperties(this._line.properties().quantityFontFamily, this._line.properties().quantityFontSize, this._line.properties().quantityFontBold, this._line.properties().quantityFontItalic)
    }, n.prototype.setQuantityFont = function(t) {
        return d.setFontToProperties(t, this._line.properties().quantityFontFamily, this._line.properties().quantityFontSize, this._line.properties().quantityFontBold, this._line.properties().quantityFontItalic), this
    }, n.prototype.getReverseButtonBorderColor = function() {
        return d.getColorFromProperties(this._line.properties().reverseButtonBorderColor, this._line.properties().reverseButtonBorderTransparency)
    }, n.prototype.setReverseButtonBorderColor = function(t) {
        return d.setColorToProperties(t, this._line.properties().reverseButtonBorderColor, this._line.properties().reverseButtonBorderTransparency), this
    }, n.prototype.getReverseButtonBackgroundColor = function() {
        return d.getColorFromProperties(this._line.properties().reverseButtonBackgroundColor, this._line.properties().reverseButtonBackgroundTransparency)
    }, n.prototype.setReverseButtonBackgroundColor = function(t) {
        return d.setColorToProperties(t, this._line.properties().reverseButtonBackgroundColor, this._line.properties().reverseButtonBackgroundTransparency), this
    }, n.prototype.getReverseButtonIconColor = function() {
        return d.getColorFromProperties(this._line.properties().reverseButtonIconColor, this._line.properties().reverseButtonIconTransparency)
    }, n.prototype.setReverseButtonIconColor = function(t) {
        return d.setColorToProperties(t, this._line.properties().reverseButtonIconColor, this._line.properties().reverseButtonIconTransparency),
            this
    }, n.prototype.getCloseButtonBorderColor = function() {
        return d.getColorFromProperties(this._line.properties().closeButtonBorderColor, this._line.properties().closeButtonBorderTransparency)
    }, n.prototype.setCloseButtonBorderColor = function(t) {
        return d.setColorToProperties(t, this._line.properties().closeButtonBorderColor, this._line.properties().closeButtonBorderTransparency), this
    }, n.prototype.getCloseButtonBackgroundColor = function() {
        return d.getColorFromProperties(this._line.properties().closeButtonBackgroundColor, this._line.properties().closeButtonBackgroundTransparency)
    }, n.prototype.setCloseButtonBackgroundColor = function(t) {
        return d.setColorToProperties(t, this._line.properties().closeButtonBackgroundColor, this._line.properties().closeButtonBackgroundTransparency), this
    }, n.prototype.getCloseButtonIconColor = function() {
        return d.getColorFromProperties(this._line.properties().closeButtonIconColor, this._line.properties().closeButtonIconTransparency)
    }, n.prototype.setCloseButtonIconColor = function(t) {
        return d.setColorToProperties(t, this._line.properties().closeButtonIconColor, this._line.properties().closeButtonIconTransparency), this
    }, n.prototype.block = function() {
        this._blocked = !0, this._line.updateAllViewsAndRedraw()
    }, n.prototype.unblock = function() {
        this._blocked = !1, this._line.updateAllViewsAndRedraw()
    }, n.prototype.isFunction = function(t) {
        return "function" == typeof t
    }, n.prototype.onReverse = function(t, e) {
        return e ? this.isFunction(e) && (this._onReverseData = t, this._onReverseCallback = e) : this.isFunction(t) && (this._onReverseCallback = t), this
    }, n.prototype.callOnReverse = function() {
        this.isFunction(this._onReverseCallback) && this._onReverseCallback.call(this, this._onReverseData)
    }, n.prototype.isOnReverseCallbackPresent = function() {
        return this.isFunction(this._onReverseCallback)
    }, n.prototype.onClose = function(t, e) {
        return e ? this.isFunction(e) && (this._onCloseData = t, this._onCloseCallback = e) : this.isFunction(t) && (this._onCloseCallback = t), this
    }, n.prototype.callOnClose = function() {
        this.isFunction(this._onCloseCallback) && this._onCloseCallback.call(this, this._onCloseData)
    }, n.prototype.isOnCloseCallbackPresent = function() {
        return this.isFunction(this._onCloseCallback)
    }, n.prototype.onModify = function(t, e) {
        return e ? this.isFunction(e) && (this._onModifyData = t, this._onModifyCallback = e) : this.isFunction(t) && (this._onModifyCallback = t), this
    }, n.prototype.callOnModify = function() {
        this.isFunction(this._onModifyCallback) && this._onModifyCallback.call(this, this._onModifyData)
    }, n.prototype.onContextMenu = function(t, e) {
        return e ? this.isFunction(e) && (this._onContextMenuData = t, this._onContextMenuCallback = e) : this.isFunction(t) && (this._onContextMenuCallback = t), this
    }, n.prototype.callOnContextMenu = function() {
        return this.isFunction(this._onContextMenuCallback) ? this._onContextMenuCallback.call(this, this._onContextMenuData) : void 0
    }, n.prototype.remove = function() {
        this._line._model.removeSource(this._line), delete this._line
    }, TradingView.PositionRenderer = function(t, e, i) {
        this._data = t, this._cache = e, this._adapter = i
    }, TradingView.PositionRenderer.prototype._height = function() {
        var t = 1;
        return Math.max(20, t + Math.max(d.fontHeight(this._adapter.getBodyFont()), d.fontHeight(this._adapter.getQuantityFont())))
    }, TradingView.PositionRenderer.prototype._bodyWidth = function(t) {
        var e, i;
        return 0 === this._adapter.getText().length ? 0 : (t.save(), t.font = this._adapter.getBodyFont(), e = 10, i = t.measureText(this._adapter.getText()).width, t.restore(), Math.round(e + i))
    }, TradingView.PositionRenderer.prototype._quantityWidth = function(t) {
        var e, i;
        return 0 === this._adapter.getQuantity().length ? 0 : (t.save(), t.font = this._adapter.getQuantityFont(), e = 10, i = t.measureText(this._adapter.getQuantity()).width, t.restore(), Math.round(Math.max(this._height(), e + i)))
    }, TradingView.PositionRenderer.prototype._reverseButtonWidth = function() {
        return this._adapter.isOnReverseCallbackPresent() ? this._height() : 0
    }, TradingView.PositionRenderer.prototype._closeButtonWidth = function() {
        return this._adapter.isOnCloseCallbackPresent() ? this._height() : 0
    }, TradingView.PositionRenderer.prototype._drawLines = function(t, e, i, n, o) {
        t.save(), t.strokeStyle = this._adapter.getLineColor(), t.lineStyle = this._adapter.getLineStyle(), t.lineWidth = this._adapter.getLineWidth(), CanvasEx.drawLine(t, i, n, o, n), this._adapter.getExtendLeft() && CanvasEx.drawLine(t, 0, n, e, n), t.restore()
    }, TradingView.PositionRenderer.prototype._drawBody = function(t, e, i) {
        var n, o;
        t.strokeStyle = this._adapter.getBodyBorderColor(), t.fillStyle = this._adapter.getBodyBackgroundColor(), n = this._bodyWidth(t), o = this._height(), t.fillRect(e + .5, i + .5, n - 1, o - 1), t.strokeRect(e, i, n, o)
    }, TradingView.PositionRenderer.prototype._drawBodyText = function(t, e, i) {
        var n, o;
        t.save(), t.textAlign = "center", t.textBaseline = "middle", t.font = this._adapter.getBodyFont(), t.fillStyle = this._adapter.getBodyTextColor(), n = e + this._bodyWidth(t) / 2, o = i + this._height() / 2, t.fillText(this._adapter.getText(), n, o), t.restore()
    }, TradingView.PositionRenderer.prototype._drawQuantity = function(t, e, i) {
        var n, o;
        t.strokeStyle = this._adapter.getQuantityBorderColor(), t.fillStyle = this._adapter.getQuantityBackgroundColor(), n = this._quantityWidth(t), o = this._height(), t.fillRect(e + .5, i + .5, n - 1, o - 1), t.strokeRect(e, i, n, o)
    }, TradingView.PositionRenderer.prototype._drawQuantityText = function(t, e, i) {
        var n, o;
        t.save(), t.textAlign = "center", t.textBaseline = "middle", t.font = this._adapter.getQuantityFont(), t.fillStyle = this._adapter.getQuantityTextColor(), n = e + this._quantityWidth(t) / 2, o = i + this._height() / 2, t.fillText(this._adapter.getQuantity(), n, o), t.restore()
    }, TradingView.PositionRenderer.prototype._drawReverseButton = function(t, e, i) {
        var n, o, r, s, a, l, c;
        t.save(), t.strokeStyle = this._adapter.getReverseButtonBorderColor(), t.fillStyle = this._adapter.getReverseButtonBackgroundColor(), n = this._reverseButtonWidth(), o = this._height(), t.fillRect(e + .5, i + .5, n - 1, o - 1), t.strokeRect(e, i, n, o), t.strokeStyle = this._adapter.getReverseButtonIconColor(), r = function(t, e) {
            CanvasEx.drawLine(t, 0, 0, 0, e), CanvasEx.drawLine(t, -1, 1, 1, 1), CanvasEx.drawLine(t, -2, 2, 2, 2)
        }, s = 6, a = 10, l = e + Math.round((this._reverseButtonWidth() - s) / 2), c = i + 5, t.save(), t.translate(l, c), r(t, a), t.translate(s, a), t.rotate(Math.PI), r(t, a), t.restore(), this._adapter._blocked && (t.fillStyle = "rgba(140, 140, 140, 0.75)", t.fillRect(e + .5, i + .5, n - 1, o - 1)), t.restore()
    }, TradingView.PositionRenderer.prototype._drawCloseButton = function(t, e, i) {
        var n, o, r, s, a, l, c;
        t.save(), t.strokeStyle = this._adapter.getCloseButtonBorderColor(), t.fillStyle = this._adapter.getCloseButtonBackgroundColor(), n = this._closeButtonWidth(), o = this._height(), t.fillRect(e + .5, i + .5, n - 1, o - 1), t.strokeRect(e, i, n, o), r = e + n, s = i + o, t.strokeStyle = this._adapter.getCloseButtonIconColor(), a = 8, l = (this._closeButtonWidth() - a) / 2, c = (this._height() - a) / 2, CanvasEx.drawPoly(t, [{
            x: e + l,
            y: i + c
        }, {
            x: r - l,
            y: s - c
        }], !0), CanvasEx.drawPoly(t, [{
            x: r - l,
            y: i + c
        }, {
            x: e + l,
            y: s - c
        }], !0), this._adapter._blocked && (t.fillStyle = "rgba(140, 140, 140, 0.75)", t.fillRect(e + .5, i + .5, n - 1, o - 1)), t.restore()
    }, TradingView.PositionRenderer.prototype.draw = function(t) {
        var e, i, n, o, r, s, a, l, c, h, d;
        !this._data.points || this._data.points.length < 1 || (e = this._data.width, i = this._bodyWidth(t), n = this._quantityWidth(t), o = this._reverseButtonWidth(t), r = i + n + o + this._closeButtonWidth(), s = e - r, a = Math.max(this._adapter.getLineLength() / 100 * e, 1), l = Math.round(e - Math.min(s, a)), c = l - r, h = Math.round(this._data.points[0].y), d = Math.round(h - (this._height() + 1) / 2), this._cache.bodyRight = c + i, this._cache.quantityRight = this._cache.bodyRight + n, this._cache.reverseButtonRight = this._cache.quantityRight + o, this._cache.top = d, this._cache.bottom = d + this._height(), this._cache.left = c, this._cache.right = l, this._drawLines(t, c, l, h, e), 0 !== i && (this._drawBody(t, c, d), this._drawBodyText(t, c, d)), 0 !== n && (this._drawQuantity(t, this._cache.bodyRight, d), this._drawQuantityText(t, this._cache.bodyRight, d)), 0 !== o && this._drawReverseButton(t, this._cache.quantityRight, d), 0 !== this._closeButtonWidth() && this._drawCloseButton(t, this._cache.reverseButtonRight, d))
    }, TradingView.PositionRenderer.prototype.hitTest = function(t) {
        return 0 === this._data.points.length ? null : t.y < this._cache.top || t.y > this._cache.bottom || t.x < this._cache.left || this._cache.right < t.x ? null : this._adapter._blocked ? new u(u.CUSTOM, {
            tooltip: {
                text: $.t("Position is being changed"),
                rect: new p(this._cache.bodyRight, this._cache.top, this._cache.quantityRight - this._cache.bodyRight, this._cache.bottom - this._cache.top)
            }
        }) : t.x >= this._cache.bodyRight && t.x < this._cache.quantityRight && this._adapter._onModifyCallback ? new u(u.CUSTOM, {
            mouseDownHandler: this._adapter.callOnModify.bind(this._adapter),
            tooltip: {
                text: $.t("Edit Position"),
                rect: new p(this._cache.bodyRight, this._cache.top, this._cache.quantityRight - this._cache.bodyRight, this._cache.bottom - this._cache.top)
            }
        }) : t.x >= this._cache.quantityRight && t.x < this._cache.reverseButtonRight ? new u(u.CUSTOM, {
            mouseDownHandler: this._adapter.callOnReverse.bind(this._adapter),
            tooltip: {
                text: $.t("Reverse Position"),
                rect: new p(this._cache.quantityRight, this._cache.top, this._cache.reverseButtonRight - this._cache.quantityRight, this._cache.bottom - this._cache.top)
            }
        }) : t.x >= this._cache.reverseButtonRight && t.x < this._cache.right ? new u(u.CUSTOM, {
            mouseDownHandler: this._adapter.callOnClose.bind(this._adapter),
            tooltip: {
                text: $.t("Close Position"),
                rect: new p(this._cache.reverseButtonRight, this._cache.top, this._cache.right - this._cache.reverseButtonRight, this._cache.bottom - this._cache.top)
            }
        }) : new u(u.REGULAR, {
            mouseDownHandler: function() {}
        })
    }, inherit(o, h), o.prototype._updateImpl = function() {
        h.prototype._updateImpl.call(this), this._background = this._linetool.properties().lineColor.value()
    }, inherit(r, c), r.prototype.renderer = function() {
        var t = {
            points: this._points,
            width: this._model.timeScale().width()
        };
        return new TradingView.PositionRenderer(t, this._rendererCache, this._source._adapter)
    }, inherit(s, a), s.prototype.setPoint = function(t, e, i) {
        this._points[t] = e, this.normalizePoints()
    }, s.prototype.addPoint = function(t, e) {
        return this._points.push(t), this._lastPoint = null, this.normalizePoints(), this.createServerPoints(), !0
    }, s.skipMagnetting = !0, s.prototype.title = function() {
        return "Position"
    }, s.prototype.createPriceAxisView = function(t) {
        return this._priceAxisView = new o(this, t), this._priceAxisView
    }, s.prototype.paneViews = function(t) {
        return TradingView.printing ? null : this._model.properties().tradingProperties.showPositions.value() ? l.prototype.paneViews.call(this, t) : null
    }, s.prototype.priceAxisViews = function(t, e) {
        return TradingView.printing ? null : this._model.properties().tradingProperties.showPositions.value() ? l.prototype.priceAxisViews.call(this, t, e) : null
    }, s.prototype.hasContextMenu = function() {
        return !0
    }, s.prototype.contextMenuItems = function() {
        return this._adapter.callOnContextMenu()
    }, t.exports = s
}, function(t, e, i) {
    "use strict";

    function n(t) {
        this._line = t, this._data = {
            bodyText: "order",
            quantityText: "0"
        }
    }

    function o(t, e, i) {
        this._data = t, this._cache = e, this._adapter = i
    }

    function r(t, e) {
        c.call(this, t, e)
    }

    function s(t, e) {
        u.call(this, t, e), this._rendererCache = {}
    }

    function a(t, e) {
        this._adapter = new n(this), this._constructor = "LineToolOrder";
        var i = e || new _("linetoolorder");
        l.call(this, t, new s(this, t), i)
    }
    var l = i(225),
        c = i(77).LineToolPriceAxisView,
        h = i(143),
        d = i(77).LineDataSource,
        u = i(115),
        p = i(67),
        f = i(91).Rect,
        _ = i(81).DefaultProperty;
    n.prototype.getPrice = function() {
        return this._line.points()[0].price
    }, n.prototype.setPrice = function(t) {
        var e = this._line.points()[0];
        return e.price = t, this._line._points[0] = e, this._line.normalizePoints(), this._line.updateAllViewsAndRedraw(), this
    }, n.prototype.getText = function() {
        return this._data.bodyText
    }, n.prototype.setText = function(t) {
        return this._data.bodyText = t || "", this._line.updateAllViewsAndRedraw(), this
    }, n.prototype.setTooltip = function(t) {
        return null == t ? t = "" : t += "", this._line.properties().tooltip.setValue(t), this
    }, n.prototype.getTooltip = function() {
        return this._line.properties().tooltip.value()
    }, n.prototype.getQuantity = function() {
        return this._data.quantityText
    }, n.prototype.setQuantity = function(t) {
        return this._data.quantityText = t || "", this._line.updateAllViewsAndRedraw(), this
    }, n.prototype.getExtendLeft = function() {
        var t = this._line.properties().extendLeft.value();
        return "inherit" === t ? this._line._model.properties().tradingProperties.extendLeft.value() : t
    }, n.prototype.setExtendLeft = function(t) {
        return this._line.properties().extendLeft.setValue(t), this
    }, n.prototype.getLineLength = function() {
        var t = this._line.properties().lineLength.value();
        return "inherit" === t ? this._line._model.properties().tradingProperties.lineLength.value() : t
    }, n.prototype.setLineLength = function(t) {
        return this._line.properties().lineLength.setValue(Math.max(0, Math.min(t, 100))), this
    }, n.prototype.getLineColor = function() {
        return h.getColorFromProperties(this._line.properties().lineColor, this._line.properties().lineTransparency)
    }, n.prototype.setLineColor = function(t) {
        return h.setColorToProperties(t, this._line.properties().lineColor, this._line.properties().lineTransparency), this
    }, n.prototype.getLineStyle = function() {
        var t = this._line.properties().lineStyle.value();
        return "inherit" === t ? this._line._model.properties().tradingProperties.lineStyle.value() : t
    }, n.prototype.setLineStyle = function(t) {
        return this._line.properties().lineStyle.setValue(t), this
    }, n.prototype.getLineWidth = function() {
        var t = this._line.properties().lineWidth.value();
        return "inherit" === t ? this._line._model.properties().tradingProperties.lineWidth.value() : t
    }, n.prototype.setLineWidth = function(t) {
        return this._line.properties().lineWidth.setValue(t), this
    }, n.prototype.getBodyBorderColor = function() {
        return h.getColorFromProperties(this._line.properties().bodyBorderColor, this._line.properties().bodyBorderTransparency)
    }, n.prototype.setBodyBorderColor = function(t) {
        return h.setColorToProperties(t, this._line.properties().bodyBorderColor, this._line.properties().bodyBorderTransparency), this
    }, n.prototype.getBodyBackgroundColor = function() {
        return h.getColorFromProperties(this._line.properties().bodyBackgroundColor, this._line.properties().bodyBackgroundTransparency)
    }, n.prototype.setBodyBackgroundColor = function(t) {
        return h.setColorToProperties(t, this._line.properties().bodyBackgroundColor, this._line.properties().bodyBackgroundTransparency), this
    }, n.prototype.getBodyTextColor = function() {
        return h.getColorFromProperties(this._line.properties().bodyTextColor, this._line.properties().bodyTextTransparency)
    }, n.prototype.setBodyTextColor = function(t) {
        return h.setColorToProperties(t, this._line.properties().bodyTextColor, this._line.properties().bodyTextTransparency), this
    }, n.prototype.getBodyFont = function() {
        return h.getFontFromProperties(this._line.properties().bodyFontFamily, this._line.properties().bodyFontSize, this._line.properties().bodyFontBold, this._line.properties().bodyFontItalic)
    }, n.prototype.setBodyFont = function(t) {
        return h.setFontToProperties(t, this._line.properties().bodyFontFamily, this._line.properties().bodyFontSize, this._line.properties().bodyFontBold, this._line.properties().bodyFontItalic), this
    }, n.prototype.getQuantityBorderColor = function() {
        return h.getColorFromProperties(this._line.properties().quantityBorderColor, this._line.properties().quantityBorderTransparency)
    }, n.prototype.setQuantityBorderColor = function(t) {
        return h.setColorToProperties(t, this._line.properties().quantityBorderColor, this._line.properties().quantityBorderTransparency), this
    }, n.prototype.getQuantityBackgroundColor = function() {
        return h.getColorFromProperties(this._line.properties().quantityBackgroundColor, this._line.properties().quantityBackgroundTransparency)
    }, n.prototype.setQuantityBackgroundColor = function(t) {
        return h.setColorToProperties(t, this._line.properties().quantityBackgroundColor, this._line.properties().quantityBackgroundTransparency), this
    }, n.prototype.getQuantityTextColor = function() {
        return h.getColorFromProperties(this._line.properties().quantityTextColor, this._line.properties().quantityTextTransparency)
    }, n.prototype.setQuantityTextColor = function(t) {
        return h.setColorToProperties(t, this._line.properties().quantityTextColor, this._line.properties().quantityTextTransparency), this
    }, n.prototype.getQuantityFont = function() {
        return h.getFontFromProperties(this._line.properties().quantityFontFamily, this._line.properties().quantityFontSize, this._line.properties().quantityFontBold, this._line.properties().quantityFontItalic)
    }, n.prototype.setQuantityFont = function(t) {
        return h.setFontToProperties(t, this._line.properties().quantityFontFamily, this._line.properties().quantityFontSize, this._line.properties().quantityFontBold, this._line.properties().quantityFontItalic), this
    }, n.prototype.getCancelButtonBorderColor = function() {
        return h.getColorFromProperties(this._line.properties().cancelButtonBorderColor, this._line.properties().cancelButtonBorderTransparency)
    }, n.prototype.setCancelButtonBorderColor = function(t) {
        return h.setColorToProperties(t, this._line.properties().cancelButtonBorderColor, this._line.properties().cancelButtonBorderTransparency), this
    }, n.prototype.getCancelButtonBackgroundColor = function() {
        return h.getColorFromProperties(this._line.properties().cancelButtonBackgroundColor, this._line.properties().cancelButtonBackgroundTransparency)
    }, n.prototype.setCancelButtonBackgroundColor = function(t) {
        return h.setColorToProperties(t, this._line.properties().cancelButtonBackgroundColor, this._line.properties().cancelButtonBackgroundTransparency), this
    }, n.prototype.getCancelButtonIconColor = function() {
        return h.getColorFromProperties(this._line.properties().cancelButtonIconColor, this._line.properties().cancelButtonIconTransparency)
    }, n.prototype.setCancelButtonIconColor = function(t) {
        return h.setColorToProperties(t, this._line.properties().cancelButtonIconColor, this._line.properties().cancelButtonIconTransparency), this
    }, n.prototype.isFunction = function(t) {
        return "function" == typeof t
    }, n.prototype.onCancel = function(t, e) {
        return e ? this.isFunction(e) && (this._onCancelData = t, this._onCancelCallback = e) : this.isFunction(t) && (this._onCancelCallback = t), this
    }, n.prototype.callOnCancel = function() {
        this.isFunction(this._onCancelCallback) && this._onCancelCallback.call(this, this._onCancelData)
    }, n.prototype.isOnCancelCallbackPresent = function() {
        return this.isFunction(this._onCancelCallback)
    }, n.prototype.onModify = function(t, e) {
        return e ? this.isFunction(e) && (this._onModifyData = t, this._onModifyCallback = e) : this.isFunction(t) && (this._onModifyCallback = t), this
    }, n.prototype.callOnModify = function() {
        this.isFunction(this._onModifyCallback) && this._onModifyCallback.call(this, this._onModifyData)
    }, n.prototype.onMove = function(t, e) {
        return e ? this.isFunction(e) && (this._onMoveData = t, this._onMoveCallback = e) : this.isFunction(t) && (this._onMoveCallback = t), this
    }, n.prototype.callOnMove = function() {
        this.isFunction(this._onMoveCallback) && this._onMoveCallback.call(this, this._onMoveData)
    }, n.prototype.onContextMenu = function(t, e) {
        return e ? this.isFunction(e) && (this._onContextMenuData = t, this._onContextMenuCallback = e) : this.isFunction(t) && (this._onContextMenuCallback = t), this
    }, n.prototype.callOnContextMenu = function() {
        return this.isFunction(this._onContextMenuCallback) ? this._onContextMenuCallback.call(this, this._onContextMenuData) : void 0
    }, n.prototype.remove = function() {
        this._line._model.removeSource(this._line), delete this._line
    }, o.prototype._height = function() {
        var t = 1;
        return Math.max(20, t + Math.max(h.fontHeight(this._adapter.getBodyFont()), h.fontHeight(this._adapter.getQuantityFont())))
    }, o.prototype._bodyWidth = function(t) {
        var e, i, n;
        return 0 === this._adapter.getText().length ? 0 : (t.save(), t.font = this._adapter.getBodyFont(), e = 10, i = 10, n = t.measureText(this._adapter.getText()).width, t.restore(), Math.round(e + i + n))
    }, o.prototype._quantityWidth = function(t) {
        var e, i;
        return 0 === this._adapter.getQuantity().length ? 0 : (t.save(), t.font = this._adapter.getQuantityFont(), e = 10, i = t.measureText(this._adapter.getQuantity()).width, t.restore(), Math.round(Math.max(this._height(), e + i)))
    }, o.prototype._cancelButtonWidth = function() {
        return this._adapter.isOnCancelCallbackPresent() ? this._height() : 0
    }, o.prototype._drawLines = function(t, e, i, n, o) {
        t.save(), t.strokeStyle = this._adapter.getLineColor(), t.lineStyle = this._adapter.getLineStyle(), t.lineWidth = this._adapter.getLineWidth(), CanvasEx.drawLine(t, i, n, o, n), this._adapter.getExtendLeft() && CanvasEx.drawLine(t, 0, n, e, n), t.restore()
    }, o.prototype._drawMovePoints = function(t, e, i) {
        var n, o, r, s, a, l, c, h;
        for (t.save(), t.strokeStyle = this._adapter.getBodyBorderColor(), t.fillStyle = this._adapter.getBodyBorderColor(), n = 2, o = 4, r = 5, s = e + o, a = s + n, l = Math.floor((this._height() - 2 * r) / 2) + 1, c = 0; l > c; ++c) h = i + r + 2 * c, CanvasEx.drawLine(t, s, h, a, h);
        t.restore()
    }, o.prototype._drawBody = function(t, e, i) {
        var n, o;
        t.strokeStyle = this._adapter.getBodyBorderColor(), t.fillStyle = this._adapter.getBodyBackgroundColor(), n = this._bodyWidth(t), o = this._height(), t.fillRect(e + .5, i + .5, n - 1, o - 1), t.strokeRect(e, i, n, o)
    }, o.prototype._drawBodyText = function(t, e, i) {
        var n, o, r;
        t.textAlign = "center", t.textBaseline = "middle", t.font = this._adapter.getBodyFont(), t.fillStyle = this._adapter.getBodyTextColor(), n = 5, o = e + this._bodyWidth(t) / 2, r = i + this._height() / 2, t.fillText(this._adapter.getText(), n + o - 2, r)
    }, o.prototype._drawQuantity = function(t, e, i, n) {
        var o, r;
        t.save(), t.strokeStyle = this._adapter.getQuantityBorderColor(), t.fillStyle = this._adapter.getQuantityBackgroundColor(), o = this._quantityWidth(t), r = this._height(), t.fillRect(e + .5, i + .5, o - 1, r - 1), n && t.clip && (t.beginPath(), t.rect(e + .5, i - .5, o + 1, r + 1), t.clip()), t.strokeRect(e, i, o, r), t.restore()
    }, o.prototype._drawQuantityText = function(t, e, i) {
        var n, o;
        t.save(), t.textAlign = "center", t.textBaseline = "middle", t.font = this._adapter.getQuantityFont(), t.fillStyle = this._adapter.getQuantityTextColor(), n = e + this._quantityWidth(t) / 2, o = i + this._height() / 2, t.fillText(this._adapter.getQuantity(), n, o), t.restore()
    }, o.prototype._drawCancelButton = function(t, e, i, n) {
        var o, r, s, a, l, c, h;
        t.strokeStyle = this._adapter.getCancelButtonBorderColor(), t.fillStyle = this._adapter.getCancelButtonBackgroundColor(), o = this._cancelButtonWidth(), r = this._height(), t.fillRect(e + .5, i + .5, o - 1, r - 1), t.save(), n && t.clip && (t.beginPath(), t.rect(e + .5, i - .5, o + 1, r + 1), t.clip()), t.strokeRect(e, i, o, r), t.restore(), s = e + o, a = i + r, t.strokeStyle = this._adapter.getCancelButtonIconColor(), l = 8, c = (this._cancelButtonWidth() - l) / 2, h = (this._height() - l) / 2, CanvasEx.drawPoly(t, [{
            x: e + c,
            y: i + h
        }, {
            x: s - c,
            y: a - h
        }], !0), CanvasEx.drawPoly(t, [{
            x: s - c,
            y: i + h
        }, {
            x: e + c,
            y: a - h
        }], !0)
    }, o.prototype.draw = function(t) {
        var e, i, n, o, r, s, a, l, c, h, d;
        !this._data.points || this._data.points.length < 1 || (e = this._data.width, i = this._bodyWidth(t), n = this._quantityWidth(t), o = i + n + this._cancelButtonWidth(), r = e - o, s = Math.max(this._adapter.getLineLength() / 100 * e, 1), a = Math.round(e - Math.min(r, s)), l = a - o, c = Math.round(this._data.points[0].y), h = Math.round(c - (this._height() + 1) / 2), this._cache.bodyRight = l + i, this._cache.quantityRight = l + i + n, this._cache.top = h, this._cache.bottom = h + this._height(), this._cache.left = l, this._cache.right = a, this._drawLines(t, l, a, c, e), d = !1, 0 !== i && (this._drawBody(t, l, h), this._drawMovePoints(t, l, h), this._drawBodyText(t, l, h), d = !0), 0 !== n && (this._drawQuantity(t, l + i, h, d), this._drawQuantityText(t, l + i, h), d = !0), 0 !== this._cancelButtonWidth() && this._drawCancelButton(t, l + i + n, h, d))
    }, o.prototype.hitTest = function(t) {
        return 0 === this._data.points.length ? null : t.y < this._cache.top || t.y > this._cache.bottom ? null : t.x >= this._cache.left && t.x < this._cache.bodyRight ? 0 === this._adapter.getTooltip().length ? new p(p.MOVEPOINT) : new p(p.MOVEPOINT, {
            tooltip: {
                text: this._adapter.getTooltip(),
                rect: new f(this._cache.left, this._cache.top, this._cache.bodyRight - this._cache.left, this._cache.bottom - this._cache.top)
            }
        }) : t.x >= this._cache.bodyRight && t.x < this._cache.quantityRight ? new p(p.CUSTOM, {
            mouseDownHandler: this._adapter.callOnModify.bind(this._adapter),
            tooltip: {
                text: $.t("Edit Order"),
                rect: new f(this._cache.bodyRight, this._cache.top, this._cache.quantityRight - this._cache.bodyRight, this._cache.bottom - this._cache.top)
            }
        }) : t.x >= this._cache.quantityRight && t.x < this._cache.right ? new p(p.CUSTOM, {
            mouseDownHandler: this._adapter.callOnCancel.bind(this._adapter),
            tooltip: {
                text: $.t("Cancel Order"),
                rect: new f(this._cache.quantityRight, this._cache.top, this._cache.right - this._cache.quantityRight, this._cache.bottom - this._cache.top)
            }
        }) : null
    }, inherit(r, c), r.prototype._updateImpl = function() {
        c.prototype._updateImpl.call(this), this._background = this._linetool.properties().lineColor.value()
    }, inherit(s, u), s.prototype.renderer = function() {
        var t = {
            points: this._points,
            width: this._model.timeScale().width()
        };
        return new o(t, this._rendererCache, this._source._adapter)
    }, inherit(a, l), a.skipMagnetting = !0, a.prototype.setPoint = function(t, e, i) {
        this._points[t] = e, this.normalizePoints()
    }, a.prototype.addPoint = function(t, e) {
        return this._points.push(t), this._lastPoint = null, this.normalizePoints(), this.createServerPoints(), !0
    }, a.prototype.title = function() {
        return "Order"
    }, a.prototype.endMoving = function(t) {
        var e = this._startMovingPoint && this._currentMovingPoint && this._startMovingPoint.price !== this._currentMovingPoint.price;
        l.prototype.endMoving.call(this), !t && e && this._adapter.callOnMove()
    }, a.prototype.createPriceAxisView = function(t) {
        return this._priceAxisView = new r(this, t), this._priceAxisView
    }, a.prototype.paneViews = function(t) {
        return TradingView.printing ? null : this._model.properties().tradingProperties.showOrders.value() ? d.prototype.paneViews.call(this, t) : null
    }, a.prototype.priceAxisViews = function(t, e) {
        return TradingView.printing ? null : this._model.properties().tradingProperties.showOrders.value() ? d.prototype.priceAxisViews.call(this, t, e) : null
    }, a.prototype.hasContextMenu = function() {
        return !0
    }, a.prototype.contextMenuItems = function() {
        return this._adapter.callOnContextMenu()
    }, a.prototype.onlyYMoving = function() {
        return !0
    }, t.exports = a
}, function(t, e, i) {
    "use strict";
    for (var n = {
        StudyStrategy: i(281),
        StatusView: i(135),
        StudyLineDataSource: i(223).StudyLineDataSource,
        StudyLineDataSourcePaneView: i(223).StudyLineDataSourcePaneView,
        StudyVersioning: i(218),
        StudyMigration: i(219),
        StudyHHistsDataWindowView: i(283),
        ESDStudyBase: i(134).ESDStudyBase,
        study_ESD$TV_EARNINGS: i(134).study_ESD$TV_EARNINGS,
        study_ESD$TV_SPLITS: i(134).study_ESD$TV_SPLITS,
        study_ESD$TV_DIVIDENDS: i(134).study_ESD$TV_DIVIDENDS,
        study_ElliottWave: i(284),
        study_LinearRegression: i(166).study_LinearRegression,
        study_PivotPointsHighLow: i(285),
        study_PivotPointsStandard: i(286),
        study_Sessions: i(287),
        study_VbPSessions: i(288),
        study_VbPVisible: i(289),
        study_ZigZag: i(290),
        study_Overlay: i(291).study_Overlay,
        study_Compare: i(292),
        study_ScriptWithDataOffset: i(293),
        StudyPaneView: i(171).StudyPaneView,
        StudyBackgroundPaneView: i(171).StudyBackgroundPaneView,
        StudyPlotShapesPaneView: i(171).StudyPlotShapesPaneView,
        StudyPlotCharsPaneView: i(171).StudyPlotCharsPaneView,
        StudyPlotArrowsPaneView: i(171).StudyPlotArrowsPaneView,
        StudyPlotCandlesPaneView: i(171).StudyPlotCandlesPaneView,
        StudyStrategyOrdersPaneView: i(282),
        StudyPriceAxisView: i(170),
        StudyDataWindowView: i(173).StudyDataWindowView,
        DataVendorStudyDataWindowView: i(173).DataVendorStudyDataWindowView,
        LineStudyMtpAnalysis: i(294),
        LineStudyMtpDecisionPoint: i(295),
        LineStudyMtpRiskReward: i(296),
        LineStudyMtpElliotWaveMain: i(297).LineStudyMtpElliotWaveMain,
        LineStudyMtpElliotWaveMajor: i(297).LineStudyMtpElliotWaveMajor,
        LineStudyMtpElliotWaveMinor: i(297).LineStudyMtpElliotWaveMinor,
        LineStudyMtpDownWave1OrA: i(298).LineStudyMtpDownWave1OrA,
        LineStudyMtpDownWave2OrB: i(298).LineStudyMtpDownWave2OrB,
        LineStudyMtpDownWave3: i(298).LineStudyMtpDownWave3,
        LineStudyMtpDownWave4: i(298).LineStudyMtpDownWave4,
        LineStudyMtpDownWave5: i(298).LineStudyMtpDownWave5,
        LineStudyMtpDownWaveC: i(298).LineStudyMtpDownWaveC,
        LineStudyMtpUpWave1OrA: i(298).LineStudyMtpUpWave1OrA,
        LineStudyMtpUpWave2OrB: i(298).LineStudyMtpUpWave2OrB,
        LineStudyMtpUpWave3: i(298).LineStudyMtpUpWave3,
        LineStudyMtpUpWave4: i(298).LineStudyMtpUpWave4,
        LineStudyMtpUpWave5: i(298).LineStudyMtpUpWave5,
        LineStudyMtpUpWaveC: i(298).LineStudyMtpUpWaveC
    }, o = Object.keys(n), r = o.length; r--;) TradingView[o[r]] = n[o[r]];
    t.exports = n
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, i, n, r) {
            o.call(this, t, i, n, r), this._barsIndexes = [], this._reportDataBuffer = null, this._reportData = null, this.watchedData = new e, this.model().addStrategySource(this)
        }
        var o = i(168).Study,
            r = i(282);
        inherit(n, o), n.prototype.stop = function() {
            return o.prototype.stop.call(this), this._avoidRemoveStrategySource ? void delete this._avoidRemoveStrategySource : void this.model().removeStrategySource(this)
        }, n.prototype.start = function() {
            this.model().addStrategySource(this), o.prototype.start.call(this)
        }, n.prototype.processHibernate = function() {
            this._studyId && !this.isVisible() && (this._avoidRemoveStrategySource = !0), o.prototype.processHibernate.call(this)
        }, n.prototype.onData = function(t) {
            var e, i, n, r;
            o.prototype.onData.call(this, t), t.method && "data_update" === t.method && (e = t.params && t.params.nonseries && t.params.nonseries.d, i = e && e.data && e.data.report, i ? (e.isUpdate && this._reportDataBuffer && (i = $.extend(this._reportDataBuffer, i)), this._reportDataBuffer = this._reportData = $.extend(this._reportDataBuffer || {}, i)) : (n = $.extend({}, t), $.extend(!0, n, {
                params: {
                    nonseries: {
                        d: {
                            data: {
                                report: this._reportDataBuffer
                            }
                        }
                    }
                }
            }), t = n), r = t.params && t.params.nonseries && t.params.nonseries.indexes, "nochange" !== r && r instanceof Array && r.length && this._collateBarsIndexes(r)), this.watchedData.setValue(t)
        }, n.prototype._collateBarsIndexes = function(t) {
            var e, i;
            if (Array.isArray(t) && (e = this._reportData && this._reportData.filledOrders, e && e.length))
                for (this._barsIndexes.length = 0, i = 0; i < e.length; i++) this._barsIndexes[i] = t[e[i].tm]
        }, n.prototype.reportData = function() {
            return this._reportData
        }, n.prototype.ordersData = function() {
            return this._reportData && this._reportData.filledOrders
        }, n.prototype.barsIndexes = function() {
            return this._barsIndexes
        }, n.prototype.clearData = function() {
            o.prototype.clearData.call(this), this._strategyOrdersPaneView && this._strategyOrdersPaneView.clearItems()
        }, n.prototype.restoreData = function(t) {
            o.prototype.restoreData.apply(this, arguments), this.model().addStrategySource(this), t.reportData && t.barsIndexes && (this._reportData = t.reportData, this._barsIndexes = t.barsIndexes, this.watchedData.setValue({
                method: "data_update",
                params: {
                    nonseries: {
                        d: {
                            data: {
                                report: this._reportData
                            }
                        }
                    }
                }
            })), t.activeState && (this._activeState = !0)
        }, n.prototype.activeState = function() {
            return this._activeState
        }, n.prototype.updateAllViews = function() {
            o.prototype.updateAllViews.call(this), this._strategyOrdersPaneView && this._strategyOrdersPaneView.update()
        }, n.prototype.createViews = function() {
            o.prototype.createViews.call(this), this._strategyOrdersPaneView = new r(this, this._series, this._model)
        }, n.prototype.state = function(t) {
            var e = o.prototype.state.apply(this, arguments);
            return t && this._reportData && this._barsIndexes && (e.data || (e.data = {}), e.data.reportData = this._reportData, e.data.barsIndexes = this._barsIndexes, e.data.activeState = this.model().activeStrategySource().value() === this), e
        }, t.exports = n
    }).call(e, i(17))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e, i) {
            this._study = t, this._series = e, this._model = i, this._invalidated = !0, this._orderArrow = {
                vMargin: n.DEFAULT_ORDER_ARROW_VMARGIN,
                width: n.DEFAULT_ORDER_ARROW_WIDTH,
                height: n.DEFAULT_ORDER_ARROW_HEIGHT
            }, this._exitLineWidth = n.DEFAULT_ORDER_ARROW_EXIT_LINE_WIDTH, this._priceArrow = {
                width: n.DEFAULT_PRICE_ARROW_WIDTH,
                height: n.DEFAULT_PRICE_ARROW_HEIGHT
            }, this._text = {
                vMargin: n.DEFAULT_TEXT_VMARGIN,
                font: n.DEFAULT_FONT,
                fontSize: n.DEFAULT_FONT_SIZE
            }, this._checkHideTextIfBarSpacingLT = n.DEFAULT_CHECK_HIDE_TEXT_IF_BARSPACING_LT, this._textIsVisible = !0, this._colors = {
                entryBuy: n.DEFAULT_ENTRY_BUY_COLOR,
                entrySell: n.DEFAULT_ENTRY_SELL_COLOR,
                exit: n.DEFAULT_EXIT_COLOR
            }, this._items = {
                entryBuy: [],
                entrySell: [],
                exit: []
            }, this._textWidths = {}, this._study.properties().strategy.orders.subscribe(this, this.update)
        }
        var o = i(68).PaneRendererStudyStrategyOrders,
            r = i(71);
        n.DEFAULT_ORDER_ARROW_VMARGIN = 7, n.DEFAULT_ORDER_ARROW_WIDTH = 9, n.DEFAULT_ORDER_ARROW_HEIGHT = 11, n.DEFAULT_ORDER_ARROW_EXIT_LINE_WIDTH = 2, n.DEFAULT_PRICE_ARROW_WIDTH = 5, n.DEFAULT_PRICE_ARROW_HEIGHT = 9, n.DEFAULT_TEXT_VMARGIN = 2, n.DEFAULT_FONT = "Arial", n.DEFAULT_FONT_SIZE = 10, n.DEFAULT_CHECK_HIDE_TEXT_IF_BARSPACING_LT = 10, n.DEFAULT_ENTRY_BUY_COLOR = "#008fff", n.DEFAULT_ENTRY_SELL_COLOR = "#f00", n.DEFAULT_EXIT_COLOR = "#cc47ed", n.prototype._updateImpl = function() {
            var t, i, n, o, r, s, a, l, c, h, d, u, p, f, _, g, m, v, y, w, b, S, T, x, C, P;
            if (this.clearItems(), t = this._study.ordersData(), t && t.length && (i = this._model.timeScale(), n = this._series.priceScale(), !(!i || !n || i && i.isEmpty() || n && n.isEmpty() || (o = i.visibleBars().clone(), o.isEmpty())))) {
                for (r = this._study.barsIndexes(),
                         s = this._series.nearestIndex(o.firstBar(), TradingView.SEARCH_NEAREST_RIGHT), a = this._series.nearestIndex(o.lastBar(), TradingView.SEARCH_NEAREST_LEFT), l = s, c = [], h = []; a >= l; l++)
                    for (d = -1; - 1 !== (d = r.indexOf(l, d + 1));) u = t[d], u && (c.push(u), h.push(l));
                for (p = this._study.properties(), f = p.strategy.orders.showLabels.value(), _ = p.strategy.orders.showQty.value(), g = f || _, g && i.barSpacing() < this._checkHideTextIfBarSpacingLT && this._orderArrow.width * c.length * 2 > i.width() && (g = !1), m = g && this._text.fontSize + this._text.vMargin || 0, v = m && m * (f + _), y = 0, w = {
                    upper: [],
                    lower: []
                }; y < c.length; y++) u = c[y], d = h[y], b = i.indexToCoordinate(d, !0), S = n.priceToCoordinate(this._series[u.b ? "low" : "high"](d), !0), T = u.b ? "lower" : "upper", x = "number" == typeof w[T][d] && w[T][d] || 0, S += u.b ? x : -x, "number" != typeof w[T][d] && (w[T][d] = 0), w[T][d] += (u.e ? 0 : this._exitLineWidth) + this._orderArrow.vMargin + this._orderArrow.height + v, C = n.priceToCoordinate(u.p, !0), P = u.e ? !u.b && u.e ? "entrySell" : "entryBuy" : "exit", this._items[P].push({
                    orderPoint: new e.Point(b, S),
                    pricePoint: new e.Point(b, C),
                    label: f && (u.c || u.id || "Untitled") || null,
                    qty: _ && (u.b ? "+" : "-") + ~~u.q || null,
                    pos: T
                });
                this._textLabelIsVisible = f, this._textQtyIsVisible = _, this._textIsVisible = g
            }
        }, n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype.clearItems = function() {
            this._items.entryBuy.length = this._items.entrySell.length = this._items.exit.length = 0
        }, n.prototype.renderer = function() {
            var t, e, i, n = this._study.properties();
            if (n.visible.value() && n.strategy.orders.visible.value() && (t = this._series.priceScale(), (this._invalidated || t && t.isScaled()) && (this._updateImpl(), this._invalidated = !1), this._items.entryBuy.length || this._items.entrySell.length || this._items.exit.length)) {
                e = new r;
                for (i in this._items) this._items[i].length && e.append(new o({
                    items: this._items[i],
                    color: this._colors[i],
                    orderArrow: this._orderArrow,
                    exitLineWidth: "exit" === i && this._exitLineWidth || 0,
                    priceArrow: this._priceArrow,
                    text: this._textIsVisible && this._text || null
                }, this._textWidths));
                return e
            }
        }, t.exports = n
    }).call(e, i(40))
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        var i, n, o, a, l, c;
        if (r.call(this), this._study = t, this._model = e, i = t.metaInfo().graphics.hhists) {
            n = 0;
            for (o in i) {
                for (a = i[o], l = 0; l < a.titles.length; l++) c = new s(this._study.title(), ""), c.histElemIndex = l, c.histIndex = n, c.histId = o, this._items.push(c);
                n++
            }
            this.update(), this._invalidated = !0
        }
    }
    var o = i(64),
        r = o.DataWindowView,
        s = o.DataWindowItem;
    inherit(n, r), n.prototype.update = function() {
        this._invalidated = !0
    }, n.prototype._updateImpl = function() {
        var t, e, i, o, r, s, a, l, c, h, d, u, p, f, _;
        for (this._header = this._study.title(), t = 0; t < this._items.length; ++t) this._items[t].setValue("n/a");
        if (e = this._study.priceScale(), i = this._model.timeScale(), e && !e.isEmpty() && i && !i.isEmpty())
            for (o = this._model.crossHairSource(), r = o.appliedIndex(), s = o.price, a = this._study.formatter(), t = 0; t < this._items.length; ++t) {
                if (l = this._items[t].histId, c = this._items[t].histIndex, h = this._items[t].histElemIndex, d = this._study.graphics().hhists, !d) return;
                u = d[c].dataObj, u && (p = n._findHistogramBar(u, r, s), p && (f = p.rate[h], this._items[t].setValue(isNumber(f) ? a.format(f) : ""), _ = this._study.properties().graphics.hhists[l].colors[h].value(), this._items[t].setColor(_)))
            }
    }, n._findHistogramBar = function(t, e, i) {
        var n, o, r;
        return 0 === t.length ? null : (n = this._findHistogramKey(t, e), o = t[n], o && 0 !== o.length ? (r = this._findBar(o, i), o[r]) : null)
    }, n._findHistogramKey = function(t, e) {
        var i, n, o = Object.keys(t),
            r = [];
        for (i in o) o[i] <= e && r.push(parseInt(o[i], 10));
        if (0 === r.length) return null;
        for (n = null, i = 0; i < r.length; ++i)(null === n || r[i] > n) && (n = r[i]);
        return n
    }, n._findBar = function(t, e) {
        for (var i, n, o, r = 0, s = t.length - 1; s >= r;)
            if (i = r + s >>> 1, n = t[i].priceHigh, o = t[i].priceLow, e > n) r = i + 1;
            else {
                if (!(o > e)) return i;
                s = i - 1
            }
        return null
    }, n.prototype.items = function() {
        return this._invalidated && (this._updateImpl(), this._invalidated = !1), this._items
    }, t.exports = n
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            this._model = t, this._source = e, this._waves = [], this._highlights = [], this._retracements = [], this._textCache = {}, this._invalidated = !0
        }

        function o(t, e, i, o) {
            a.call(this, t, e, i, o, new n(t, this))
        }
        var r = i(77).LineDataSource,
            s = i(116).TextRenderer,
            a = i(167),
            l = i(153).TrendLineRenderer,
            c = i(67),
            h = i(71);
        n._wave5Labels = [
            ["i", "ii", "iii", "iv", "v"],
            ["(i)", "(ii)", "(iii)", "(iv)", "(v)"],
            ["((i))", "((ii))", "((iii))", "((iv))", "((v))"],
            ["1", "2", "3", "4", "5"],
            ["(1)", "(2)", "(3)", "(4)", "(5)"],
            ["((1))", "((2))", "((3))", "((4))", "((5))"],
            ["I", "II", "III", "IV", "V"],
            ["(I)", "(II)", "(III)", "(IV)", "(V)"],
            ["((I))", "((II))", "((III))", "((IV))", "((V))"]
        ], n._wave3Labels = [
            ["a", "b", "c"],
            ["A", "B", "C"]
        ], n._fontSizes = [10, 10, 10, 11, 11, 11, 12, 12, 12], n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype.updateImpl = function() {
            var t, i, o, r, s, a, l, c, h, d, u, p, f, _, g, m, v, y, w, b, S, T, x, C, P, k, I, E, L, V, M, A, D, O, R, $, B, z, N, H;
            if (this._waves = [], this._highlights = [], this._retracements = [], this._source._nonseriesdata && this._source.properties().visible.value() && (t = this._source._nonseriesdata.waves, i = this._source._indexes, o = this._model.timeScale(), r = this._source.priceScale(), s = this._model.mainSeries(), a = s.firstBar(), r && !r.isEmpty() && !o.isEmpty() && a && t)) {
                for (l = o.visibleBars(), c = l.lastBar(), h = l.firstBar(), d = ["m0StartIndex", "startIndex", "endIndex", "m2EndIndex", "m3EndIndex"], p = 0; p < t.length; p++)
                    if (t[p]) {
                        for (f = [], _ = 0; 5 > _ && (g = i[t[p][d[_]]], isFinite(g)); _++) f.push(g);
                        if (0 !== f.length && !(f[0] > c || f[f.length - 1] < h) && (m = +t[p].size, isFinite(m) && (v = "level" + m, y = this._source.properties()[v], y.visible.value()))) {
                            for (w = parseInt(t[p].direction, 10), b = [], b.dir = w, b.prices = [], b.orig_prices = [], u = s.firstValue(), S = 0; S < f.length; S++) {
                                if (void 0 !== f[S]) {
                                    if (T = {}, x = f[S], a = s.bars().first(), a > x) continue;
                                    if (T.x = o.indexToCoordinate(x), C = s.bars().valueAt(x), !C) {
                                        b.push(void 0), b.prices.push(void 0), b.orig_prices.push(void 0), w = -w;
                                        continue
                                    }
                                    P = 1 === w ? C[TradingView.HIGH_PLOT] : C[TradingView.LOW_PLOT], b.orig_prices.push(P), r.isPercent() ? (k = r.priceRange().convertToPercent(P, u), T.y = r.priceToCoordinate(k), b.prices.push(k)) : (b.prices.push(P), T.y = r.priceToCoordinate(P)), T.label = n._wave5Labels[m][S], T.align = -1 === w ? "top" : "bottom", T.color = y.color.value(), delete T.backgroundColor, b.id = "wave_" + p, this._source === this._model.hoveredSource() && (I = this._model.lastHittestData(), I && I.wave && I.wave.id === b.id && (T.color = "#FFFFFF", T.backgroundColor = y.color.value())), T.fontsize = n._fontSizes[m], T._textCache = {
                                        widths: []
                                    }, T.wave = b, b.push(T)
                                } else b.push(void 0), b.prices.push(void 0);
                                w = -w
                            }
                            b.inds = f, b.dir = w, b.color = y.color.value(), this._waves.push(b)
                        }
                    }
                if (this._source === this._model.hoveredSource() && (I = this._model.lastHittestData())) {
                    for (f = I.wave.inds, w = -I.wave.dir, E = I.backgroundColor ? I.backgroundColor : I.color, L = I.wave.orig_prices, V = null, S = 0; S < f.length; S++) {
                        if (void 0 !== f[S]) {
                            if (x = f[S], M = o.indexToCoordinate(x), C = s.bars().valueAt(x), !C) {
                                w = -w;
                                continue
                            }
                            P = L[S], r.isPercent() && (P = r.priceRange().convertToPercent(P, u)), A = r.priceToCoordinate(P), D = new e.Point(M, A), V && this._highlights.push({
                                points: [V, D],
                                color: E
                            }), V = D
                        }
                        w = -w
                    }
                    void 0 !== L[1] && void 0 !== L[2] && (O = L[1], R = L[2], $ = L[3], B = L[0], r.isPercent() && (O = r.priceRange().convertToPercent(O, u), R = r.priceRange().convertToPercent(R, u), void 0 !== B && (B = r.priceRange().convertToPercent(B, u)), void 0 !== $ && ($ = r.priceRange().convertToPercent($, u))), this._retracements.push({
                        y: r.priceToCoordinate(O),
                        x: 0,
                        extendLeft: !0,
                        extendRight: !0,
                        color: E,
                        text: "",
                        style: CanvasEx.LINESTYLE_SOLID
                    }), this._retracements.push({
                        y: r.priceToCoordinate(O),
                        x: 0,
                        extendLeft: !0,
                        extendRight: !0,
                        color: E,
                        text: "",
                        style: CanvasEx.LINESTYLE_SOLID
                    }), w = R - O, void 0 !== L[0] && (z = B - O, N = z / w, P = O + N * w, M = o.indexToCoordinate(f[0]), this._retracements.push({
                        y: r.priceToCoordinate(P),
                        x: M,
                        extendLeft: !1,
                        extendRight: !0,
                        color: E,
                        text: "" + N.toFixed(3),
                        style: CanvasEx.LINESTYLE_DASHED
                    })), void 0 !== $ && (H = R - $, N = H / w, P = R - N * w, M = o.indexToCoordinate(f[3]), this._retracements.push({
                        y: r.priceToCoordinate(P),
                        x: M,
                        extendLeft: !0,
                        extendRight: !1,
                        color: E,
                        text: "" + N.toFixed(3),
                        style: CanvasEx.LINESTYLE_DASHED
                    })))
                }
            }
        }, n.prototype.CIRCLE_SIZE = 16, n.prototype.renderer = function() {
            var t, i, n, o, a, d, u, p, f, _, g, m, v, y, w, b;
            for (this._invalidated && (this.updateImpl(), this._invalidated = !1), t = new h, i = this.CIRCLE_SIZE, n = {}, o = 0; o < this._waves.length; o++)
                for (a = this._waves[o], d = 0; d < a.length; d++) u = a[d], void 0 !== u && ("top" === u.align ? (p = u.y + 4, n["top_" + u.x] ? (p += n["top_" + u.x] * i, n["top_" + u.x] = n["top_" + u.x] + 1) : n["top_" + u.x] = 1, f = p + i) : (p = u.y - i - 4, n["bottom_" + u.x] ? (p -= n["bottom_" + u.x] * i, n["bottom_" + u.x] = n["bottom_" + u.x] + 1) : n["bottom_" + u.x] = 1, f = p + i), _ = {}, _.points = [new e.Point(u.x, (p + f) / 2)], _.text = u.label, _.color = u.color, _.backgroundColor = u.backgroundColor, _.font = "Verdana", _.bold = !0, _.offsetX = 0, _.offsetY = 0, _.vertAlign = "middle", _.horzAlign = "center", _.fontsize = u.fontsize, g = new c(c.REGULAR, u), m = o + "_" + d, this._textCache[m] = this._textCache[m] || {}, t.append(new s(_, this._textCache[m], g)));
            for (o = 0; o < this._highlights.length; o++) v = this._highlights[o], y = {
                points: v.points,
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: TradingView.generateColor(v.color, 50),
                linewidth: 3,
                linestyle: CanvasEx.LINESTYLE_SOLID,
                extendleft: !1,
                extendright: !1,
                leftend: r.LINEEND_CIRCLE,
                rightend: r.LINEEND_CIRCLE
            }, t.append(new l(y));
            for (o = 0; o < this._retracements.length; o++) w = this._retracements[o], y = {
                points: [new e.Point(w.x + 1, w.y), new e.Point(w.x, w.y)],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: TradingView.generateColor(w.color, 50),
                linewidth: 1,
                linestyle: w.style,
                extendleft: w.extendLeft,
                extendright: w.extendRight,
                leftend: r.LINEEND_NORMAL,
                rightend: r.LINEEND_NORMAL
            }, t.append(new l(y)), this._retracements[o]._textCache = {}, b = {
                points: [new e.Point(w.x, w.y)],
                text: this._retracements[o].text,
                backgroundColor: "#606060",
                color: "#FFFFFF",
                vertAlign: "middle",
                horzAlign: "center",
                font: "Arial",
                offsetX: w.extendRight ? -50 : 50,
                offsetY: -2,
                fontsize: 12
            }, t.append(new s(b, this._retracements[o]._textCache));
            return t
        }, inherit(o, a), o.prototype.margins = function() {
            return [.1, .1]
        }, o.prototype.isVisible = function() {
            if (!this.properties().visible.value()) return !1;
            for (var t = 0; 8 >= t; t++)
                if (this.properties()["level" + t].visible.value()) return !0;
            return !1
        }, t.exports = o
    }).call(e, i(40))
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        this._data = t, this._textCache = e
    }

    function o(t, e) {
        this._model = t, this._source = e, this._pivots = [], this._textCache = {}, this._invalidated = !0
    }

    function r(t, e, i, n) {
        s.call(this, t, e, i, n, new o(t, this))
    }
    var s = i(167),
        a = i(67),
        l = i(71);
    n.prototype.draw = function(t) {
        t.textBaseline = "bottom", t.font = (this._data.bold ? "bold " : "normal ") + this._data.fontsize + "px " + this._data.font;
        var e = Math.round(t.measureText(this._data.text).width + 4);
        this._textCache.width = e, t.translate(this._data.x + .5, this._data.y), t.strokeStyle = this._data.borderColor, t.fillStyle = this._data.backColor, t.beginPath(), t.moveTo(0, 0), 1 === this._data.type ? (t.lineTo(5, -5), t.lineTo(e / 2, -5), t.lineTo(e / 2, -5 - this._data.fontsize), t.lineTo(-e / 2, -5 - this._data.fontsize), t.lineTo(-e / 2, -5), t.lineTo(-5, -5), t.lineTo(0, 0)) : (t.lineTo(5, 5), t.lineTo(e / 2, 5), t.lineTo(e / 2, 5 + this._data.fontsize), t.lineTo(-e / 2, 5 + this._data.fontsize), t.lineTo(-e / 2, 5), t.lineTo(-5, 5), t.lineTo(0, 0)), t.fill(), t.stroke(), t.fillStyle = this._data.textColor, t.textAlign = "center", 1 === this._data.type ? t.fillText(this._data.text, 0, -4) : t.fillText(this._data.text, 0, 6 + this._data.fontsize)
    }, n.prototype.hitTest = function(t) {
        var e = this._textCache.width,
            i = this._data.fontsize + 12,
            n = this._data.x - e / 2,
            o = this._data.y;
        return 1 === this._data.type && (o -= i), t.x >= n && t.x <= n + e && t.y >= o && t.y <= o + i ? new a(a.REGULAR) : null
    }, o.prototype.update = function() {
        this._invalidated = !0
    }, o.prototype.updateImpl = function() {
        var t, e, i, n, o, r, s, a, l, c, h, d, u, p, f, _;
        if (this._pivots = [], this._source._nonseriesdata && this._source._nonseriesdata.pivots && this._source.properties().visible.value() && (t = this._source._nonseriesdata.pivots, e = this._source._indexes, i = this._model.timeScale(), n = this._source.priceScale(), o = this._model.mainSeries(), r = o.firstValue(), n && !n.isEmpty() && !i.isEmpty() && r))
            for (s = i.visibleBars(), a = s.firstBar(), l = s.lastBar(), c = 0; c < t.length; c++) t[c] && (h = e[t[c].index], a > h || h > l || (d = t[c].type, u = o.bars().valueAt(h), u && (p = 1 === d ? u[TradingView.HIGH_PLOT] : u[TradingView.LOW_PLOT], n.isPercent() && (p = n.priceRange().convertToPercent(p, r)), f = Math.round(i.indexToCoordinate(h)), _ = n.priceToCoordinate(p), 1 === d ? _ -= i.barSpacing() / 6 : _ += i.barSpacing() / 6 + 1, _ = Math.round(_), this._pivots.push({
                x: f,
                y: _,
                price: n.formatter().format(p),
                type: d
            }))))
    }, o.prototype.renderer = function() {
        var t, e, i, o, r, s, a, c, h, d;
        if (this._invalidated && (this.updateImpl(), this._invalidated = !1), 0 !== this._pivots.length) {
            for (t = this._source.properties().font.value(), e = this._source.properties().fontsize.value(), i = this._source.properties().borderColor.value(), o = this._source.properties().backColor.value(), r = this._source.properties().textColor.value(), s = new l, a = 0; a < this._pivots.length; a++) c = this._pivots[a], h = {
                x: c.x,
                y: c.y,
                type: c.type,
                text: c.price,
                font: t,
                fontsize: e,
                borderColor: i,
                backColor: o,
                textColor: r
            }, d = a, this._textCache[d] || (this._textCache[d] = {}), s.append(new n(h, this._textCache[d]));
            return s
        }
    }, inherit(r, s), r.prototype.isVisible = function() {
        return this.properties().visible.value()
    }, r.prototype.margins = function() {
        return [.1, .1]
    }, t.exports = r
}, function(t, e, i) {
    (function(e, n) {
        "use strict";

        function o(t, e, i, n) {
            this._prices = [], this._canvas = $("<canvas>"), this._cache = this._canvas.get(0).getContext("2d"), this.reset({
                font: t,
                fontSize: e,
                backColors: i,
                colors: n
            }), this._priceAxisFontSize = 11
        }

        function r(t, e, i) {
            this._source = t, this._model = t._model, this._name = e, this._completeName = "P" === e.toUpperCase() ? "P" : "S" + e[1] + "/R" + e[1], this._rendererData = {
                visible: !1,
                text: "",
                coordinate: 0,
                color: "",
                background: ""
            }, this._renderer = new p(this._rendererData)
        }

        function s(t, e) {
            this._model = t, this._source = e, this._pivots = [], this._textCache = {}
        }

        function a(t, e) {
            this._source = t, this._model = t._model, this._prices = [], this._invidated = !0, this._cache = e;
            var i = this;
            t.priceScale() && (this._cachedFormatter = t.priceScale().formatter(), this._formatterCache = new d(function(t) {
                return i._cachedFormatter.format(t)
            }))
        }

        function l(t, e, i, n) {
            var o, r, a;
            for (u.call(this, t, e, i, n, new s(t, this)), o = ["P", "S1/R1", "S2/R2", "S3/R3", "S4/R4", "S5/R5"], r = this.properties().levelsStyle.visibility, a = 0; a < o.length; a++) r[o[a]].listeners().subscribe(this, TradingView.Study.prototype.processHibernate)
        }
        var c = i(135),
            h = i(173).StudyDataWindowView,
            d = i(140),
            u = i(167),
            p = i(62),
            f = i(170),
            _ = i(77).LineDataSource,
            g = i(153).TrendLineRenderer,
            m = i(118),
            v = i(60),
            y = i(154),
            w = i(67),
            b = i(71),
            S = i(61).RGBColor;
        o.prototype.remove = function() {
            this._canvas.remove()
        }, o.prototype.reset = function(t) {
            this._prices = [], this._params = t, this._cache.setFont(t.fontSize + "px " + t.font);
            var e = this;
            this._labelWidth = ["P", "S1", "R1", "S2", "R2", "S3", "R3", "S4", "R4", "S5", "R5", "/"].reduce(function(t, i) {
                var n = e._cache.measureText(i).width;
                return Math.max(n, t)
            }, 0)
        }, o.prototype.rowHeight = function() {
            return this._priceAxisFontSize + 4
        }, o.prototype._labelRectByIndex = function(t) {
            var e = 0,
                i = Math.round(this._topByIndex(t)),
                n = Math.round(this._labelWidth + 4),
                o = this._params.fontSize + 8;
            return {
                left: e,
                top: i,
                width: n,
                height: o
            }
        }, o.prototype.params = function() {
            return this._params
        }, o.prototype._centerByIndex = function(t) {
            var e = 8;
            return Math.round((t + .5) * (this._params.fontSize + e))
        }, o.prototype._topByIndex = function(t) {
            var e = 8;
            return Math.round(t * (this._params.fontSize + e))
        }, o.prototype.setPrices = function(t) {
            var e, i, n, o, r, s, a = 8,
                l = !1,
                c = function(t, e) {
                    return void 0 === t && void 0 === e ? !0 : t.formatted === e.formatted
                };
            if (t.length !== this._prices.length) l = !0;
            else
                for (e = 0; e < this._prices.length; e++)
                    if (!c(this._prices[e], t[e])) {
                        l = !0;
                        break
                    } if (l) {
                for (i = this, i._cache.save(), i._cache.font = this._priceAxisFontSize + "px Arial", i._cache.restore(), n = this._labelWidth + 6, o = window.hidpiCanvasRatio || 1, n *= o, this._canvas.prop("width", n), r = Math.max(t.length, 22) * (this._params.fontSize + a), r *= o, this._canvas.prop("height", r), this._canvas.css("width", n).css("height", r), this._prices = t, this._cache.clearRect(0, 0, n, r), this._cache.save(), this._cache.translate(.5, .5), this._cache.font = this._params.fontSize + "px " + this._params.font, this._cache.textBaseline = "middle", e = 0; e < this._prices.length; e++) this._prices[e] && (s = ["P", "S1", "R1", "S2", "R2", "S3", "R3", "S4", "R4", "S5", "R5"][e], this._cache.fillStyle = this._params.backColors[e], this._cache.fillText(s, 0, this._centerByIndex(e)), this._cache.fillText("/", 0, this._centerByIndex(e + 11)));
                this._prices = t, this._cache.restore()
            }
        }, inherit(r, f), r.prototype._updateImpl = function() {
            var t, e, i, n, o, r;
            this._rendererData.visible = !1, this._rendererData.text = "", this._source.properties().visible.value() && (t = this._source.pricesView().prices(), e = this._completeName, i = this._source.properties().levelsStyle.visibility, i[e] && i[e].value() && (this._model.timeScale().isEmpty() || this._source.priceScale().isEmpty() || (n = this._model.timeScale().visibleBars(), n.isEmpty() || this._source._nonseriesdata && this._source._nonseriesdata.pivots && (o = ["P", "S1", "R1", "S2", "R2", "S3", "R3", "S4", "R4", "S5", "R5"].indexOf(this._name.toUpperCase()), r = t[o], r && (this._rendererData.visible = !0, this._rendererData.background !== r.color && (this._rendererData.background = r.color, this._rendererData.color = new S(r.color).blackWhiteContrast()), this._rendererData.text = r.formatted, this._rendererData.coordinate = r.coordinate, this._coordinate = r.coordinate, this._floatCoordinate = r.coordinate)))))
        }, r.prototype.renderer = function() {
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), this._renderer
        }, r.prototype.text = function() {
            return this._rendererData.visible ? this._rendererData.text : ""
        }, r.prototype.coordinate = function() {
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), v.prototype.coordinate.call(this)
        }, r.prototype.floatCoordinate = function() {
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), v.prototype.floatCoordinate.call(this)
        }, s.prototype.setCache = function(t) {
            this._cache = t
        }, s.prototype.priceAxisViews = function(t, e) {
            return this._priceAxisViews
        }, s.prototype.mergeLabel = function(t, e, i) {
            var n = "" + e;
            void 0 === t[n] ? (t[n] = {}, t[n].text = i, t[n].ids = [this.complete(i)]) : (t[n].text += "/" + i, t[n].ids.push(this.complete(i)))
        }, s.prototype.complete = function(t) {
            return "P" === t ? t : "S" + t[1] + "/R" + t[1]
        }, s.prototype.update = function() {
            this._invalidated = !0
        }, s.prototype._updateImpl = function() {
            var t, e, i, n, o, r, s, a, l, c, h, d, u, p, f, _, g, m;
            if (this._source.pricesView().prices(), this._pivots = [], this._source._nonseriesdata && this._source._nonseriesdata.pivots && this._source.properties().visible.value() && (t = this._source._nonseriesdata.pivots, e = this._source._indexes, i = this._model.timeScale(), n = this._source.priceScale(), n && !n.isEmpty() && !i.isEmpty() && t)) {
                if (o = i.visibleBars(), r = o.firstBar(), s = o.lastBar(), a = null, n.isPercent()) {
                    if (!this._source.ownerSource()) return;
                    a = this._source.ownerSource().firstValue()
                }
                for (l = 0; l < t.length; l++)
                    if (t[l] && (c = e[t[l].startIndex], h = e[t[l].endIndex], !(r > h || c > s))) {
                        d = {}, u = this._source.properties().levelsStyle.visibility, u.P.value() && this.mergeLabel(d, t[l].p, "P"), u["S1/R1"].value() && (this.mergeLabel(d, t[l].s1, "S1"), this.mergeLabel(d, t[l].r1, "R1")), u["S2/R2"].value() && (this.mergeLabel(d, t[l].s2, "S2"), this.mergeLabel(d, t[l].r2, "R2")), u["S3/R3"].value() && (this.mergeLabel(d, t[l].s3, "S3"), this.mergeLabel(d, t[l].r3, "R3")), u["S4/R4"].value() && (this.mergeLabel(d, t[l].s4, "S4"), this.mergeLabel(d, t[l].r4, "R4")), u["S5/R5"].value() && (this.mergeLabel(d, t[l].s5, "S5"), this.mergeLabel(d, t[l].r5, "R5")), p = i.indexToCoordinate(c), f = i.indexToCoordinate(h);
                        for (_ in d) g = parseFloat(_), n.isPercent() && (g = n.priceRange().convertToPercent(g, a)), m = n.priceToCoordinate(g), this._pivots.push({
                            x1: p,
                            x2: f,
                            y: m,
                            label: d[_].text,
                            labelIds: d[_].ids
                        })
                    }
            }
        }, s.prototype.renderer = function() {
            var t, i, n, o, r, s, a, l, c, h, d, u, p, f, m, v;
            for (this._invalidated && (this._updateImpl(), this._invalidated = !1), t = new b, i = this._source.properties().levelsStyle.colors, n = this._source.properties().levelsStyle.widths, o = 0; o < this._pivots.length; o++)
                if (r = this._pivots[o], s = new e.Point(r.x1, r.y), a = new e.Point(r.x2, r.y), l = {
                        points: [s, a],
                        width: this._model.timeScale().width(),
                        height: this._source.priceScale().height(),
                        color: i[r.labelIds[0]].value(),
                        linewidth: n[r.labelIds[0]].value(),
                        linestyle: CanvasEx.LINESTYLE_SOLID,
                        extendleft: !1,
                        extendright: !1,
                        leftend: _.LINEEND_NORMAL,
                        rightend: _.LINEEND_NORMAL
                    }, t.append(new g(l, new w(w.REGULAR))), this._source.properties().levelsStyle.showLabels.value())
                    for (c = r.label.split("/"), h = 0, d = 0; d < c.length; d++) u = ["P", "S1", "R1", "S2", "R2", "S3", "R3", "S4", "R4", "S5", "R5"].indexOf(c[d]), d > 0 && (p = this._cache._labelRectByIndex(u + 11), f = {
                        left: s.x - p.width + h,
                        top: Math.round(s.y - p.height / 2),
                        width: p.width,
                        height: p.height
                    }, h += p.width / 2, m = this._cache._canvas.get(0), v = new y(m, p, f), t.append(v)), p = this._cache._labelRectByIndex(u), f = {
                        left: s.x - p.width + h,
                        top: Math.round(s.y - p.height / 2),
                        width: p.width,
                        height: p.height
                    }, h += p.width, m = this._cache._canvas.get(0), v = new y(m, p, f), t.append(v);
            return t
        }, a.prototype._updateImpl = function() {
            var t, e, i, n, o, r, s, a, l, c, h, u, p, f, _, g, m, v, y, w, b;
            if (!this._model.timeScale().isEmpty() && !this._source.priceScale().isEmpty() && (t = this._model.timeScale().visibleBars(), !t.isEmpty() && this._source._nonseriesdata && this._source._nonseriesdata.pivots && (this._cachedFormatter !== this._source.priceScale().formatter() && (this._cachedFormatter = this._source.priceScale().formatter(), e = this, this._formatterCache = new d(function(t) {
                    return e._cachedFormatter.format(t)
                })), e = this, i = this._model.mainSeries(), n = this._source.priceScale(), o = i.bars().search(t.lastBar(), TradingView.SEARCH_NEAREST_LEFT)))) {
                for (r = o.index, s = this._source._nonseriesdata.pivots, a = this._source._indexes, l = this._source.properties(), c = 0; c < s.length; c++)
                    if (s[c] && (h = a[s[c].startIndex], u = a[s[c].endIndex], p = l.inputs.showHistoricalPivots.value(), u > r && r >= h || !p))
                        for (n.properties().percentage.value() && (f = e._source.firstValue()), _ = ["p", "s1", "r1", "s2", "r2", "s3", "r3", "s4", "r4", "s5", "r5"], this._prices = [], g = 0; g < _.length; g++) m = _[g], v = s[c][m], void 0 !== v && (n.properties().percentage.value() && (v = 100 * (v - f) / f), y = n.priceToCoordinate(v), w = {
                            P: "P",
                            S1: "S1/R1",
                            S2: "S2/R2",
                            S3: "S3/R3",
                            S4: "S4/R4",
                            S5: "S5/R5",
                            R1: "S1/R1",
                            R2: "S2/R2",
                            R3: "S3/R3",
                            R4: "S4/R4",
                            R5: "S5/R5"
                        }, b = l.levelsStyle.colors[w[m.toUpperCase()]].value(), this._prices.push({
                            formatted: e._formatterCache.format(v),
                            price: v,
                            coordinate: y,
                            color: b
                        }));
                this._cache.setPrices(this._prices)
            }
        }, a.prototype.update = function() {
            this._invidated = !0
        }, a.prototype.prices = function() {
            return this._invidated && (this._updateImpl(), this._invidated = !1), this._prices
        }, inherit(l, u), l.prototype.lastValueData = function(t, e, i) {
            var n = ["P", "S1", "R1", "S2", "R2", "S3", "R3", "S4", "R4", "S5", "R5"].indexOf(t.toUpperCase()),
                o = {
                    noData: !0
                },
                r = this._pricesView.prices()[n];
            return null !== r && void 0 !== r ? r : o
        }, l.prototype.lastPriceLabelFixedCoordinate = function(t) {
            var e = ["P", "S1", "R1", "S2", "R2", "S3", "R3", "S4", "R4", "S5", "R5"].indexOf(t.toUpperCase()),
                i = this._priceAxisViews[e];
            return i._fixedCoordinate
        }, l.prototype.priceLabelText = function(t) {
            return this._metaInfo.shortDescription + ":" + t.toUpperCase()
        }, l.prototype.pricesView = function() {
            return this._pricesView
        }, l.prototype._getActualCacheParams = function() {
            var t = {};
            return t.font = this.properties().font.value(), t.fontSize = this.properties().fontsize.value(), t.backColors = [this.properties().levelsStyle.colors.P.value(), this.properties().levelsStyle.colors["S1/R1"].value(), this.properties().levelsStyle.colors["S1/R1"].value(), this.properties().levelsStyle.colors["S2/R2"].value(), this.properties().levelsStyle.colors["S2/R2"].value(), this.properties().levelsStyle.colors["S3/R3"].value(), this.properties().levelsStyle.colors["S3/R3"].value(), this.properties().levelsStyle.colors["S4/R4"].value(), this.properties().levelsStyle.colors["S4/R4"].value(), this.properties().levelsStyle.colors["S5/R5"].value(), this.properties().levelsStyle.colors["S5/R5"].value()], t.colors = t.backColors.map(function(t) {
                return new S(t).blackWhiteContrast()
            }), t
        }, l.prototype.updateAllViews = function() {
            var t;
            for (u.prototype.updateAllViews.call(this), this._pricesView.update(), t = 0; t < this._priceAxisViews.length; t++) this._priceAxisViews[t].update();
            for (t = 0; t < this._paneViews.length; t++) this._paneViews[t].update()
        }, l.prototype.paneViews = function(t) {
            var e = u.prototype.paneViews.call(this, t);
            return e ? e.concat(this._paneViews) : this._paneViews
        }, l.prototype.createViews = function() {
            var t, e, i, n, s = this._getActualCacheParams();
            for (this._cache && this._cache.remove(), this._cache = new o(s.font, s.fontSize, s.backColors, s.colors), this._priceAxisViews = [], t = ["P", "S1", "R1", "S2", "R2", "S3", "R3", "S4", "R4", "S5", "R5"], this._paneViews.length = 0, e = this.properties().levelsStyle.visibility, i = 0; i < t.length; i++) this._priceAxisViews.push(new r(this, t[i], this._cache)), n = "P" === t[i].toUpperCase() ? "P" : "S" + t[i][1] + "/R" + t[i][1], e[n] && e[n].value() && this._paneViews.push(new m(this._model, this, t[i], "priceLabelText", "showStudyPlotLabels"));
            this._dataWindowView || (this._dataWindowView = new h(this, this._model)), this._statusView || (this._statusView = new c(this, this._model.properties())), this._paneView.setCache(this._cache), this._pricesView = new a(this, this._cache)
        }, l.prototype._postProcessGraphics = function() {}, l.prototype.isVisible = function() {
            var t, e, i;
            if (!this.properties().visible.value()) return !1;
            for (t = ["P", "S1/R1", "S2/R2", "S3/R3", "S4/R4", "S5/R5"], e = this.properties().levelsStyle.visibility, i = 0; i < t.length; i++)
                if (e[t[i]].value()) return !0;
            return !1
        }, l.prototype.stop = function() {
            TradingView.Study.prototype.stop.call(this), this._cache && this._cache.remove()
        }, l.prototype.priceRange = function(t, e) {
            var i, o, r, s, a, l, c, h, d, u;
            if (!this._nonseriesdata || !this._nonseriesdata.pivots || !this._indexes) return null;
            if (!this.priceScale()) return null;
            for (i = this._nonseriesdata.pivots, o = this._indexes, r = null, s = 0; s < i.length; s++)
                if (i[s] && (a = o[i[s].startIndex], l = o[i[s].endIndex], !(t > l || a > e)))
                    for (c = [], h = this._properties.levelsStyle.visibility, h.P.value() && c.push(i[s].p), h["S1/R1"].value() && c.push(i[s].s1, i[s].r1), h["S2/R2"].value() && c.push(i[s].s2, i[s].r2), h["S3/R3"].value() && c.push(i[s].s3, i[s].r3), h["S4/R4"].value() && c.push(i[s].s4, i[s].r4), h["S5/R5"].value() && c.push(i[s].s5, i[s].r5), d = 0; d < c.length; d++) c[d] && (null === r ? r = new n(c[d], c[d]) : r.apply(c[d], c[d]));
            return this.priceScale().isLog() && r ? new n(this.priceScale().priceToLogical(r.minValue()), this.priceScale().priceToLogical(r.maxValue())) : this.priceScale().properties().percentage.value() && r ? (u = this.ownerSource().firstValue(), u ? r.convertToPercents(u) : null) : r
        }, t.exports = l
    }).call(e, i(40), i(54))
}, function(t, e, i) {
    "use strict";

    function n(t, e, i, n) {
        o.call(this, t, e, i, n)
    }
    var o = i(168).Study;
    inherit(n, o), n.prototype.hasContextMenu = function() {
        return !1
    }, n.prototype.showInObjectTree = function() {
        return !1
    }, n.prototype.isSavedInStudyTemplates = function() {
        return !1
    }, n.prototype.isRemovedByStudyTemplates = function() {
        return !1
    }, n.prototype.removeByRemoveAllStudies = function() {
        return !1
    }, n.prototype.isUserDeletable = function() {
        return !1
    }, n.prototype.statusView = function() {
        return !1
    }, t.exports = n
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e, i, n) {
            o.call(this, t, e, i, n)
        }
        var o = i(168).Study;
        inherit(n, o), n.prototype.priceRange = function(t, i) {
            var n, o, r, s, a, l, c, h, d, u, p, f, _ = this.graphics().hhists,
                g = this.graphics().indexes;
            if (!_ || !_.length) return null;
            for (_ = _[0].data, n = !1, o = null, r = null, s = null, a = 0; a < _.length; a++) l = _[a], c = g[l.firstBarTime], h = g[l.lastBarTime], d = c >= t && i >= c, u = h >= t && i >= h, p = t >= c && h >= i, (d || u || p) && (n ? (_[a].priceLow < o && (o = _[a].priceLow, r = _[a].priceHigh), s = Math.max(s, _[a].priceHigh)) : (o = _[a].priceLow, r = _[a].priceHigh, s = _[a].priceHigh, n = !0));
            return n ? (f = null, f = this._properties.graphics.hhists.histBars.showValues.value() ? new e(o - .8 * (r - o), s) : new e(o, s), this.priceScale().isLog() && f ? new e(this.priceScale().priceToLogical(f.minValue()), this.priceScale().priceToLogical(f.maxValue())) : f) : null
        }, t.exports = n
    }).call(e, i(54))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e, i, n) {
            o.call(this, t, e, i, n)
        }
        var o = i(168).Study;
        inherit(n, o), n.prototype.priceRange = function(t, i) {
            var n, o, r = this.graphics().hhists;
            return r ? (n = r[0].data[0], o = null, o = this._properties.graphics.hhists.histBars.showValues.value() ? new e(n.priceLow - .8 * (n.priceHigh - n.priceLow), n.priceHigh) : new e(n.priceLow, n.priceHigh), this.priceScale().isLog() && o ? new e(this.priceScale().priceToLogical(o.minValue()), this.priceScale().priceToLogical(o.maxValue())) : o) : null
        }, t.exports = n
    }).call(e, i(54))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e) {
            this._model = t, this._source = e, this._pivots = [], this._textCache = {}, this._invalidated = !0
        }

        function o(t, e, i, o) {
            r.call(this, t, e, i, o, new n(t, this))
        }
        var r = i(167),
            s = i(77).LineDataSource,
            a = i(153).TrendLineRenderer,
            l = i(67),
            c = i(71);
        n.prototype.update = function() {
            this._invalidated = !0
        }, n.prototype.updateImpl = function() {
            var t, e, i, n, o, r, s, a, l, c, h, d, u;
            if (this._pivots = [], this._source._nonseriesdata && this._source._nonseriesdata.zigzag && this._source.properties().visible.value() && (t = this._source._nonseriesdata.zigzag, e = this._source._indexes, i = this._model.timeScale(), n = this._source.priceScale(), o = this._model.mainSeries(), r = o.firstValue(), n && !n.isEmpty() && !i.isEmpty() && r))
                for (s = 0; s < t.length; s++) t[s] && (a = e[t[s].index], l = t[s].type, c = o.bars().valueAt(a), c && (h = 1 === l ? c[TradingView.HIGH_PLOT] : c[TradingView.LOW_PLOT], n.isPercent() && (h = n.priceRange().convertToPercent(h, r)), d = Math.round(i.indexToCoordinate(a)), u = n.priceToCoordinate(h), this._pivots.push({
                    x: d,
                    y: u
                })))
        }, n.prototype.renderer = function() {
            var t, i, n, o, r, h, d, u, p;
            for (this._invalidated && (this.updateImpl(), this._invalidated = !1), t = new c, i = this._source.properties().color.value(), n = this._source.properties().linewidth.value(), o = 1; o < this._pivots.length; o++) r = this._pivots[o], h = this._pivots[o - 1], d = new e.Point(h.x, h.y), u = new e.Point(r.x, r.y), p = {
                points: [d, u],
                width: this._model.timeScale().width(),
                height: this._source.priceScale().height(),
                color: i,
                linewidth: n,
                linestyle: CanvasEx.LINESTYLE_SOLID,
                extendleft: !1,
                extendright: !1,
                leftend: s.LINEEND_NORMAL,
                rightend: s.LINEEND_NORMAL
            }, t.append(new a(p, new l(l.REGULAR)));
            return t
        }, inherit(o, r), o.prototype.isVisible = function() {
            return this.properties().visible.value()
        }, t.exports = o
    }).call(e, i(40))
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function n(e, i) {
            this._source = e, this._model = i, this._points = [new t.Point(0, 0)]
        }

        function o(t, e) {
            this._source = t, this._model = e, this._invalidated = !0, this._text = "", this._coordinate = 0, this._background = "black", this._color = "white"
        }

        function r(t, e) {
            y.call(this), this._study = t, this._model = e, this._items.push(new w("Open", "")), this._items.push(new w("High", "")), this._items.push(new w("Low", "")), this._items.push(new w("Close", "")), this._invalidated = !0, this.update()
        }

        function s(t, e, i, n) {
            this._symbolLabelView = new T(t, this, "close", "symbol", "showSymbolLabels"), l.call(this, t, e, i, n), this._formatter = null, this._paneView = null;
            var o = this;
            this.properties().minTick.listeners().subscribe(null, function() {
                o._createFormatter(), o.updateAllViews(), o._model.invalidate(new P(P.FULL_UPDATE))
            })
        }
        var a = i(53),
            l = i(168).Study,
            c = i(60),
            h = i(62),
            d = i(65),
            u = d.SeriesAreaPaneView,
            p = d.SeriesLinePaneView,
            f = d.SeriesHollowCandlesPaneView,
            _ = d.SeriesCandlesPaneView,
            g = d.SeriesBarsPaneView,
            m = i(135),
            v = i(64),
            y = v.DataWindowView,
            w = v.DataWindowItem,
            b = i(75).SeriesBarColorer,
            S = i(76).HorzLineRenderer,
            T = i(118),
            x = i(67),
            C = i(122),
            P = i(104),
            k = i(83),
            I = k.PriceFormatter;
        n.prototype.update = function() {
            if (this._visible = !1, this._source.properties().showPriceLine.value()) {
                var e = this._source.lastValueData("close", !0);
                e.noData || (this._visible = !0, this._points = [new t.Point(0, e.coordinate)], this._color = e.color)
            }
        }, n.prototype.renderer = function() {
            var t = {};
            return t.points = this._points, t.color = this._color, t.linewidth = 1, t.linestyle = CanvasEx.LINESTYLE_DOTTED, t.hitTestResult = x.REGULAR, t.visible = this._visible, new S(t)
        }, inherit(o, c), o.prototype.update = function() {
            this._invalidated = !0
        }, o.prototype.coordinate = function() {
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), c.prototype.coordinate.call(this)
        }, o.prototype._updateImpl = function() {
            this._visible = !1, this._text = "";
            var t = this._source.lastValueData("close", !1);
            t.noData || (this._text = t.text, this._floatCoordinate = t.floatCoordinate, this._coordinate = t.coordinate, this._background = t.color, this._visible = !0)
        }, o.prototype.renderer = function() {
            this._invalidated && (this._updateImpl(), this._invalidated = !1);
            var t = {
                text: this._text,
                coordinate: this._coordinate,
                color: this.color(),
                background: this._background,
                visible: this._visible
            };
            return new h(t)
        }, inherit(r, y), r.prototype._updateImpl = function() {
            var t, e, i, n, o, r, s, l, c, h, d, u;
            if (this._header = this._study.title(), !this._model.timeScale().isEmpty() && 0 !== this._study.data().length) {
                if (i = !1, this._study.properties().style.value() === a.STYLE_BARS ? (t = this._study.properties().barStyle.upColor.value(), e = this._study.properties().barStyle.downColor.value(), i = this._study.properties().barStyle.barColorsOnPrevClose.value()) : this._study.properties().style.value() === a.STYLE_CANDLES ? (t = this._study.properties().candleStyle.upColor.value(), e = this._study.properties().candleStyle.downColor.value(), i = this._study.properties().candleStyle.barColorsOnPrevClose.value()) : this._study.properties().style.value() === a.STYLE_HOLLOW_CANDLES ? (t = this._study.properties().hollowCandleStyle.upColor.value(), e = this._study.properties().hollowCandleStyle.downColor.value(), i = !0) : this._study.properties().style.value() === a.STYLE_LINE ? t = e = this._study.properties().lineStyle.color.value() : this._study.properties().style.value() === a.STYLE_AREA && (t = e = this._study.properties().areaStyle.linecolor.value()), n = this._study.series(), o = this._model.crossHairSource().appliedIndex(), r = n.nearestIndex(o, TradingView.SEARCH_NEAREST_LEFT), void 0 !== r) {
                    if (s = this._study.data().valueAt(r), !(s && s[TradingView.OPEN_PLOT] && s[TradingView.HIGH_PLOT] && s[TradingView.LOW_PLOT] && s[TradingView.CLOSE_PLOT])) return;
                    for (l = this._study.formatter(), this._items[0].setValue(l.format(s[TradingView.OPEN_PLOT])), this._items[1].setValue(l.format(s[TradingView.HIGH_PLOT])), this._items[2].setValue(l.format(s[TradingView.LOW_PLOT])), this._items[3].setValue(l.format(s[TradingView.CLOSE_PLOT])), i && r >= 1 ? (h = this._study.data().valueAt(r - 1), c = h[TradingView.CLOSE_PLOT] <= s[TradingView.CLOSE_PLOT] ? t : e) : c = s[TradingView.OPEN_PLOT] <= s[TradingView.CLOSE_PLOT] ? t : e, d = 0; 4 > d; d++) this._items[d].setColor(c)
                }
                u = C(this._study.symbolInfo()), u ? this._additional = "(Data Provided by " + u + ")" : this._additional = void 0
            }
        }, r.prototype.items = function() {
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), this._items
        }, r.prototype.update = function() {
            this._invalidated = !0
        }, r.prototype.additional = function() {
            return this._invalidated && (this._updateImpl(), this._invalidated = !1), this._additional
        }, inherit(s, l), s.prototype.createPlotLabels = function(t) {}, s.prototype.symbol = function() {
            var t, e = this.properties().inputs.symbol.value(),
                i = this._resolvedSymbols ? this._resolvedSymbols[e] : null;
            return t = i ? i.name : e, t.toUpperCase()
        }, s.prototype.lastValueData = function(t, e) {
            var i, n, o = l.prototype.lastValueData.call(this, "close", e);
            if (o.noData) return o;
            switch (i = this.properties(), n = o.item, i.style.value()) {
                case a.STYLE_BARS:
                    o.color = n[TradingView.OPEN_PLOT] <= n[TradingView.CLOSE_PLOT] ? i.barStyle.upColor.value() : i.barStyle.downColor.value();
                    break;
                case a.STYLE_CANDLES:
                    o.color = n[TradingView.OPEN_PLOT] <= n[TradingView.CLOSE_PLOT] ? i.candleStyle.upColor.value() : i.candleStyle.downColor.value();
                    break;
                case a.STYLE_HOLLOW_CANDLES:
                    o.color = n[TradingView.OPEN_PLOT] <= n[TradingView.CLOSE_PLOT] ? i.candleStyle.upColor.value() : i.candleStyle.downColor.value();
                    break;
                case a.STYLE_LINE:
                    o.color = i.lineStyle.color.value();
                    break;
                case a.STYLE_AREA:
                    o.color = i.areaStyle.color1.value()
            }
            return o
        }, s.prototype.createViews = function() {
            this._priceAxisViews = [], this._priceAxisViewsBase = [new o(this, this._model)], this._paneViews = [];
            var t = null;
            switch (this._properties.style.value()) {
                case a.STYLE_BARS:
                    t = new g(this, this._model);
                    break;
                case a.STYLE_CANDLES:
                    t = new _(this, this._model);
                    break;
                case a.STYLE_HOLLOW_CANDLES:
                    t = new f(this, this._model);
                    break;
                case a.STYLE_LINE:
                    t = new p(this, this._properties.lineStyle.priceSource.value(), this._model);
                    break;
                case a.STYLE_AREA:
                    t = new u(this, this._properties.areaStyle.priceSource.value(), this._model)
            }
            t && this._paneViews.push(t), this._paneViews.push(new n(this, this._model)), this._paneViews.push(this._symbolLabelView), this._dataWindowView || (this._dataWindowView = new r(this, this._model)), this._statusView || (this._statusView = new m(this)), this._priceAxisViews = [].concat(this._priceAxisViewsBase, this._hlinesPriceAsisViews, this._horizlinesPriceAsisViews)
        }, s.prototype.barColorer = function() {
            return new b(this)
        }, s.prototype.start = function() {
            this._formatter = null, l.prototype.start.call(this), this.priceScale() && this.priceScale().updateFormatter()
        }, s.prototype._createFormatter = function() {
            var t, e, i, n, o, r, s;
            "default" === this.properties().minTick.value() ? (t = this.properties().inputs.symbol.value(), e = this._resolvedSymbols[t], this._formatter = new I(e ? e.pricescale : 100, e ? e.minmov : 1, e ? e.fractional : !1)) : (i = this.properties().minTick.value(), n = isNumber(i) ? ["100", "1", "false"] : i.split(","), o = parseInt(n[0]), r = parseInt(n[1]), s = "true" === n[2], this._formatter = new I(o, r, s)), this.priceScale() && this.priceScale().updateFormatter()
        }, s.prototype.formatter = function() {
            return this._formatter || this._createFormatter(), this._formatter
        }, s.prototype._changeInputs = function() {
            l.prototype._changeInputs.call(this, this.inputs()), this.m_formatter = null, this.priceScale().updateFormatter()
        }, s.prototype.title = function() {
            var t, e = this.properties().inputs.symbol.value(),
                i = this._resolvedSymbols[e];
            return t = i ? i.name + ", " + i.exchange : e, t.toUpperCase()
        }, s.prototype.bars = function() {
            return this.m_data
        }, s.prototype.open = function(t) {
            return this.bars().valueAt(t)[TradingView.OPEN_PLOT]
        }, s.prototype.high = function(t) {
            return this.bars().valueAt(t)[TradingView.HIGH_PLOT]
        }, s.prototype.low = function(t) {
            return this.bars().valueAt(t)[TradingView.LOW_PLOT]
        }, s.prototype.close = function(t) {
            return this.bars().valueAt(t)[TradingView.CLOSE_PLOT]
        }, s.prototype.hl2 = function(t) {
            return (this.high(t) + this.low(t)) / 2
        }, s.prototype.hlc3 = function(t) {
            return (this.high(t) + this.low(t) + this.close(t)) / 3
        }, s.prototype.ohlc4 = function(t) {
            return (this.open(t) + this.high(t) + this.low(t) + this.close(t)) / 4
        }, s.prototype.symbolInfo = function() {
            if (!this._resolvedSymbols) return null;
            var t = this._properties.inputs.symbol.value();
            return t ? this._resolvedSymbols[t] : null
        }, s.prototype.lastPriceLabelFixedCoordinate = function() {
            return this._priceAxisViews[0]._fixedCoordinate
        }, s.prototype.tags = function() {
            var t = [],
                e = this.symbolInfo();
            return e ? t.push(e.name) : this._properties.inputs.symbol.value() && t.push(this._properties.inputs.symbol.value()), t
        }, e.OverlayDataWindowView = r, e.study_Overlay = s
    }).call(e, i(40))
}, function(t, e, i) {
    "use strict";

    function n(t, e, i, n) {
        this._symbolLabelView = new r(t, this, "compare", "symbol", "showSymbolLabels"), TradingView.Study.call(this, t, e, i, n);
        var o = this;
        this._properties.minTick.listeners().subscribe(null, function() {
            o._createFormatter()
        }), this.properties().minTick.listeners().subscribe(null, function() {
            o._model.invalidate(new s(s.FULL_UPDATE))
        }), this._properties.merge({
            skipHistogramBaseOnAutoScale: !0
        })
    }
    var o = i(173).DataVendorStudyDataWindowView,
        r = i(118),
        s = i(104),
        a = i(83),
        l = a.PriceFormatter;
    inherit(n, TradingView.Study), n.prototype.createPlotLabels = function(t) {}, n.prototype.createViews = function() {
        this._dataWindowView || (this._dataWindowView = new o(this, this._model)), TradingView.Study.prototype.createViews.call(this), this._paneViews.push(this._symbolLabelView)
    }, n.prototype._createFormatter = function() {
        var t, e, i, n, o, r = this.properties().inputs.symbol.value(),
            s = this._resolvedSymbols ? this._resolvedSymbols[r] : null;
        "default" === this.properties().minTick.value() ? this._formatter = new l(s ? s.pricescale : 100, s ? s.minmov : 1, s ? s.fractional : !1) : (t = this.properties().minTick.value(), e = isNumber(t) ? ["100", "1", "false"] : t.split(","), i = parseInt(e[0]), n = parseInt(e[1]), o = "true" === e[2], this._formatter = new l(i, n, o)), this.priceScale() && this.priceScale().updateFormatter()
    }, n.prototype.symbol = function() {
        var t, e = this.properties().inputs.symbol.value(),
            i = this._resolvedSymbols ? this._resolvedSymbols[e] : null;
        return t = i ? i.name : e, t.toUpperCase()
    }, n.prototype.title = function(t) {
        var e, i = this.properties().inputs.symbol.value(),
            n = this._resolvedSymbols ? this._resolvedSymbols[i] : null;
        return e = n ? n.name + ", " + n.exchange : i, e.toUpperCase()
    }, n.prototype.symbolInfo = function() {
        if (!this._resolvedSymbols) return null;
        var t = this._properties.inputs.symbol.value();
        return t ? this._resolvedSymbols[t] : null
    }, n.prototype.lastPriceLabelFixedCoordinate = function() {
        return this._priceAxisViews[0]._fixedCoordinate
    }, n.prototype.tags = function() {
        var t = this.symbol();
        return t ? [t] : []
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t, e, i, n) {
        o.call(this, t, e, i, n)
    }
    var o = i(168).Study,
        r = i(124);
    inherit(n, o), n.prototype.clearData = function() {
        o.prototype.clearData.call(this), this._underlyingData = new r(this._plotFields)
    }, n.prototype._mergeData = function(t) {
        var e, i, n, o = 0 === this._underlyingData._length() ? null : this._underlyingData._indexAt(0);
        for (this._underlyingData.merge(t), o !== this._underlyingData._indexAt(0) && (this.m_data = new r(this._underlyingData.columns())), this.m_data._start = this._underlyingData._start, this.m_data._end = this._underlyingData._end, e = this.m_data._length(), i = e; i < this._underlyingData._length(); ++i) n = TradingView.merge({}, this._underlyingData._valueAt(i)), this.m_data.add(this._underlyingData._indexAt(i), n);
        return this._plotsForStrategyProcessing().forEach(function(t) {
            var i = this._createStrategy(t.strategy, t.strategyIndex, t.targetIndex, e);
            i.rebuildData(this.m_data)
        }, this), this.m_data
    }, n.prototype._plotsForStrategyProcessing = function() {
        var t = ["dataoffset"],
            e = [];
        return this._metaInfo.plots.forEach(function(i, n) {
            var o, r, s = t.indexOf(i.type) > -1;
            s && (o = null, this._metaInfo.plots.forEach(function(t, e) {
                t.id === i.target && (o = e)
            }), assert(o >= 0, "target plot not found for strategy plot " + i.id), r = {
                strategy: i.type,
                strategyIndex: n,
                targetIndex: o
            }, e.push(r))
        }, this), e
    }, n.prototype._createStrategy = function(t, e, i, o) {
        var r = "Strategy_" + t;
        return new n[r](e, i, o)
    }, n.Strategy_dataoffset = function(t, e, i) {
        this._strategyPlotIndex = t, this._targetPlotIndex = e, this._startIndex = i
    }, n.Strategy_dataoffset.prototype.rebuildData = function(t) {
        var e, i, n, o, r, s, a, l = this._targetPlotIndex + 1,
            c = this._strategyPlotIndex + 1,
            h = null,
            d = null;
        for (e = this._startIndex; e < t._length(); ++e) i = t._valueAt(e), n = i[l], o = i[c] ? Math.round(i[c]) : null, i[l] = null, i[c] = null, !o || o > 0 || (r = e + o, s = {
            pointIndex: r,
            value: n
        }, d ? d.pointIndex !== s.pointIndex && (r >= 0 && (t._items[r].value[l] = n), a = !1, h && (a = h.value <= d.value && d.value <= n || h.value >= d.value && d.value >= n), a ? d.pointIndex >= 0 && (t._items[d.pointIndex].value[l] = null) : h = d, d = s) : d = s)
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t, e, i) {
        o.call(this, t, e, i)
    }
    var o = i(227);
    inherit(n, o), n.prototype._mtpStudyId = function() {
        return "mtp_tsanalysis"
    }, n.prototype.pointsCount = function() {
        return 1
    }, n.prototype._studyInputs = function() {
        var t = this.points()[0].index,
            e = this._model.mainSeries().bars().valueAt(t);
        return e ? [this.properties().inputs.displayZoneLabels.value(), 1e3 * e[TradingView.TIME_PLOT], this.properties().inputs.account_size.value(), this.properties().inputs.percent_risk.value(), this.properties().inputs.tickEntryOffset.value(), this.properties().inputs.tickStopOffset.value(), this.properties().inputs.minRRRatio.value(), this.properties().inputs.shouldFilterWPTZones.value(), this.properties().inputs.shouldFilterSTFTrends.value()] : null
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t, e, i) {
        o.call(this, t, e, i), this._symbolIntervalChanged = !1, this._model.mainSeries().onSymbolIntervalChanged().subscribe(this, this.onSymbolIntervalChanged)
    }
    var o = i(227);
    inherit(n, o), n.prototype._mtpStudyId = function() {
        return "mtp_decisionpoint"
    }, n.prototype.onSymbolIntervalChanged = function() {
        this._symbolIntervalChanged = !0
    }, n.prototype.pointsCount = function() {
        return 1
    }, n.prototype._studyInputs = function() {
        var t = this.points()[0].index,
            e = this._model.mainSeries().bars().valueAt(t);
        return e ? [this.properties().inputs.displayZoneLabels.value(), this._symbolIntervalChanged, 1e3 * e[TradingView.TIME_PLOT]] : null
    }, n.prototype.onData = function(t) {
        o.prototype.onData.call(this, t), this._symbolIntervalChanged = !1
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t, e, i) {
        o.call(this, t, e, i)
    }
    var o = i(227);
    inherit(n, o), n.prototype._mtpStudyId = function() {
        return "mtp_riskreward"
    }, n.prototype.pointsCount = function() {
        return 3
    }, n.getTooltipText = function(t) {
        return t && 0 !== t._points.length ? 1 === t._points.length ? "Select Stop Bar" : 2 === t._points.length ? "Select Target Point" : null : "Select Entry Setup Bar"
    }, n.prototype._studyInputs = function() {
        var t = this.points()[0].index,
            e = this.points()[1].index,
            i = this.points()[2].index,
            n = this._model.mainSeries().bars().valueAt(t),
            o = this._model.mainSeries().bars().valueAt(e),
            r = this._model.mainSeries().bars().valueAt(i);
        return n && o && r ? [1e3 * n[TradingView.TIME_PLOT], 1e3 * o[TradingView.TIME_PLOT], 1e3 * r[TradingView.TIME_PLOT], this.points()[2].price, this.properties().inputs.account_size.value(), this.properties().inputs.percent_risk.value(), this.properties().inputs.tickEntryOffset.value(), this.properties().inputs.tickStopOffset.value()] : null
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t, e, i) {
        a.call(this, t, e, i)
    }

    function o(t, e, i) {
        n.call(this, t, e, i)
    }

    function r(t, e, i) {
        n.call(this, t, e, i)
    }

    function s(t, e, i) {
        n.call(this, t, e, i)
    }
    var a = i(227);
    inherit(n, a), n.prototype.pointsCount = function() {
        return 1
    }, n.prototype._studyInputs = function() {
        var t = this.points()[0].index,
            e = this._model.mainSeries().bars().valueAt(t);
        return e ? [this.properties().inputs.displayZoneLabels.value(), 1e3 * e[TradingView.TIME_PLOT]] : null
    }, inherit(o, n), o.prototype._mtpStudyId = function() {
        return "mtp_ew_main"
    }, inherit(r, n), r.prototype._mtpStudyId = function() {
        return "mtp_ew_major"
    }, inherit(s, n), s.prototype._mtpStudyId = function() {
        return "mtp_ew_minor"
    }, e.LineStudyMtpElliotWaveMinor = s, e.LineStudyMtpElliotWaveMajor = r, e.LineStudyMtpElliotWaveMain = o, e.LineStudyMtpElliotWave = n
}, function(t, e, i) {
    "use strict";

    function n(t, e, i, n, o) {
        this._wptStudyId = n, this._pointsCount = o, g.call(this, t, e, i)
    }

    function o(t, e, i) {
        n.call(this, t, e, i, "mtp_wpt_down1ora", 2)
    }

    function r(t, e, i) {
        n.call(this, t, e, i, "mtp_wpt_down2orb", 2)
    }

    function s(t, e, i) {
        n.call(this, t, e, i, "mtp_wpt_down3", 3)
    }

    function a(t, e, i) {
        n.call(this, t, e, i, "mtp_wpt_down4", 2)
    }

    function l(t, e, i) {
        n.call(this, t, e, i, "mtp_wpt_down5", 5)
    }

    function c(t, e, i) {
        n.call(this, t, e, i, "mtp_wpt_downc", 3)
    }

    function h(t, e, i) {
        n.call(this, t, e, i, "mtp_wpt_up1ora", 2)
    }

    function d(t, e, i) {
        n.call(this, t, e, i, "mtp_wpt_up2orb", 2)
    }

    function u(t, e, i) {
        n.call(this, t, e, i, "mtp_wpt_up3", 3)
    }

    function p(t, e, i) {
        n.call(this, t, e, i, "mtp_wpt_up4", 2)
    }

    function f(t, e, i) {
        n.call(this, t, e, i, "mtp_wpt_up5", 5)
    }

    function _(t, e, i) {
        n.call(this, t, e, i, "mtp_wpt_upc", 3)
    }
    var g = i(227);
    inherit(n, g), n.prototype._studyInputs = function() {
        var t, e, i, n = [this.properties().inputs.displayZoneLabels.value()];
        for (t = 0; t < this.pointsCount(); ++t) {
            if (e = this.points()[t].index, i = this._model.mainSeries().bars().valueAt(e), !i) return null;
            n.push(1e3 * i[TradingView.TIME_PLOT])
        }
        return n
    }, n.prototype._mtpStudyId = function() {
        return this._wptStudyId
    }, n.prototype.pointsCount = function() {
        return this._pointsCount
    }, inherit(o, n), o.getTooltipText = function(t) {
        var e = t ? t._points.length : 0;
        return "Down Wave 1 or A: Select Point " + (e + 1)
    }, inherit(r, n), r.getTooltipText = function(t) {
        var e = t ? t._points.length : 0;
        return "Down Wave 2 or B: Select Point " + (e + 1)
    }, inherit(s, n), s.getTooltipText = function(t) {
        var e = t ? t._points.length : 0;
        return "Down Wave 3: Select Point " + (e + 1)
    }, inherit(a, n), a.getTooltipText = function(t) {
        var e = t ? t._points.length : 0;
        return "Down Wave 4: Select Point " + (e + 1)
    }, inherit(l, n), l.getTooltipText = function(t) {
        var e = t ? t._points.length : 0;
        return "Down Wave 5: Select Point " + (e + 1)
    }, inherit(c, n), c.getTooltipText = function(t) {
        var e = t ? t._points.length : 0;
        return "Down Wave C: Select Point " + (e + 1)
    }, inherit(h, n), h.getTooltipText = function(t) {
        var e = t ? t._points.length : 0;
        return "Up Wave 1 or A: Select Point " + (e + 1)
    }, inherit(d, n), d.getTooltipText = function(t) {
        var e = t ? t._points.length : 0;
        return "Up Wave 2 or B: Select Point " + (e + 1)
    }, inherit(u, n), u.getTooltipText = function(t) {
        var e = t ? t._points.length : 0;
        return "Up Wave 3: Select Point " + (e + 1)
    }, inherit(p, n), p.getTooltipText = function(t) {
        var e = t ? t._points.length : 0;
        return "Up Wave 4: Select Point " + (e + 1)
    }, inherit(f, n), f.getTooltipText = function(t) {
        var e = t ? t._points.length : 0;
        return "Up Wave 5: Select Point " + (e + 1)
    }, inherit(_, n), _.getTooltipText = function(t) {
        var e = t ? t._points.length : 0;
        return "Up Wave C: Select Point " + (e + 1)
    }, e.LineStudyMtpDownWave1OrA = o, e.LineStudyMtpDownWave2OrB = r, e.LineStudyMtpDownWave3 = s, e.LineStudyMtpDownWave4 = a, e.LineStudyMtpDownWave5 = l, e.LineStudyMtpDownWaveC = c, e.LineStudyMtpUpWave1OrA = h, e.LineStudyMtpUpWave2OrB = d, e.LineStudyMtpUpWave3 = u, e.LineStudyMtpUpWave4 = p, e.LineStudyMtpUpWave5 = f, e.LineStudyMtpUpWaveC = _
}, function(t, e, i) {
    (function(e, n) {
        "use strict";

        function o(t, i) {
            var n = this;
            _.call(this), this._properties = i, this._model = t, this._dataWindowView = new h(this, t), this._priceAxisView = new c(this, t), this._startMeasurePriceAxisView = new c(this, t, "measureStartY"), this._endMeasurePriceAxisView = new c(this, t, "measureEndY"), this._timeAxisView = new d(this, t), this._startMeasureTimeAxisView = new d(this, t, "measureStartX"), this._endMeasureTimeAxisView = new d(this, t, "measureEndX"), this.visible = !0, t.readOnly() ? this.areLinesVisible = !0 : g.cursorTool.subscribe(function(t) {
                n.areLinesVisible = "arrow" !== t
            }, {
                callWithLast: !0
            }), this._movedDelegate = new e, this._subscribed = !1
        }

        function r(t, e) {
            this._source = t, this._pane = e, this._rendererCache = {}
        }

        function s(t, e, i) {
            this.source = t, this.pane = e, this._horzVisible = i
        }

        function a(t, e, i) {
            this.source = t, this.pane = e, this._axis = i || "x"
        }
        var l = i(77).LineDataSource,
            c = i(300),
            h = i(301),
            d = i(302),
            u = i(153).TrendLineRenderer,
            p = i(116).TextRenderer,
            f = i(151).RectangleRenderer,
            _ = i(80).DataSource,
            g = i(82),
            m = i(68),
            v = m.PaneRendererCrossHair,
            y = m.PaneRendererCrossHairLock,
            w = i(71),
            b = i(104),
            S = i(83),
            T = S.PercentageFormatter,
            x = S.TimeSpanFormatter;
        inherit(o, _), o.prototype.index = 0, o.prototype.price = NaN, o.prototype.pane = null, o.prototype.color = "white", o.prototype.style = "", o.prototype.properties = function() {
            return this._properties
        }, o.prototype.moved = function() {
            return this._movedDelegate
        }, o.prototype.setPosition = function(t, e, i) {
            if (this._subscribed || (this._model.mainSeries().onRestarted().subscribe(this, o.prototype.clearMeasure), this._subscribed = !0), this.setLockedPosition(i), this.index = t, this.x = this._model.timeScale().indexToCoordinate(t), i && !i.defaultPriceScale().isEmpty()) {
                this.price = e;
                var n = i.defaultPriceScale();
                this.y = n.priceToCoordinate(e), this.pane = i
            } else this.price = NaN, this.y = NaN, this.pane = null;
            this.visible = !0, this.updateAllViews(), this._movedDelegate.fire({
                time: this._model.timeScale().points().roughTime(t),
                price: this.price
            })
        }, o.prototype.updateIndex = function() {
            var t = this.index;
            this.index = this._model.timeScale().coordinateToIndex(this.x), this.index !== t && this.updateAllViews()
        }, o.prototype.setLockedPosition = function(t) {
            delete this.lockedIndex, delete this.lockedX, t !== this._measurePane && g.lockTimeAxis().value() && (this.lockedIndex = this._model.timeScale().points().roughIndex(g.lockTimeAxisTime.value()), this.lockedX = this._model.timeScale().indexToCoordinate(this.lockedIndex))
        }, o.prototype.clearPosition = function() {
            this.visible = !1, this.index = parseInt(this._model.mainSeries().data().bars().last()), this.price = NaN, this.y = NaN, this.pane = null
        }, o.prototype.measureStartY = function() {
            var t, e = this._startMeasurePoint.price,
                i = this._measurePane;
            return i.defaultPriceScale().isPercent() && (t = i.mainDataSource().firstValue(), e = i.defaultPriceScale().priceRange().convertToPercent(e, t)), i.defaultPriceScale().priceToCoordinate(e)
        }, o.prototype.measureStartX = function() {
            return this._model.timeScale().indexToCoordinate(this._startMeasurePoint.index)
        }, o.prototype.measureEndY = function() {
            var t, e = this._endMeasurePoint.price,
                i = this._measurePane;
            return i.defaultPriceScale().isPercent() && (t = i.mainDataSource().firstValue(), e = i.defaultPriceScale().priceRange().convertToPercent(e, t)), i.defaultPriceScale().priceToCoordinate(e)
        }, o.prototype.measureEndX = function() {
            return this._model.timeScale().indexToCoordinate(this._endMeasurePoint.index)
        }, o.prototype.paneViews = function(t) {
            var e = [new s(this, t, t === this.pane)];
            return t === this._measurePane && (this._measurePaneView || (this._measurePaneView = new r(this, t)), this._measurePaneView.update(), e.push(this._measurePaneView)), g.lockTimeAxis().value() && e.push(this._timeLockPaneView = this._timeLockPaneView || new a(this, t)), e
        }, o.prototype.dataWindowView = function() {
            return this._dataWindowView
        }, o.prototype.priceAxisViews = function(t, e) {
            if (!this.visible || this.pane !== t || e !== t.defaultPriceScale()) return null;
            var i = [this._priceAxisView];
            return this._startMeasurePoint && i.push(this._startMeasurePriceAxisView), this._endMeasurePoint && i.push(this._endMeasurePriceAxisView), i
        }, o.prototype.timeAxisView = function() {
            if (!this.visible && !g.lockTimeAxis().value()) return null;
            var t = [this._timeAxisView];
            return this._startMeasurePoint && t.push(this._startMeasureTimeAxisView), this._endMeasurePoint && t.push(this._endMeasureTimeAxisView), t
        }, o.prototype.updateAllViews = function() {
            this._priceAxisView.update(), this._startMeasurePoint && (this._startMeasurePriceAxisView.update(), this._startMeasureTimeAxisView.update()), this._endMeasurePoint && (this._endMeasurePriceAxisView.update(), this._endMeasureTimeAxisView.update()), this._timeAxisView.update()
        }, o.prototype.startMeasurePoint = function() {
            return this._startMeasurePoint
        }, o.prototype.startMeasuring = function(t, e) {
            if (e.defaultPriceScale().isPercent()) {
                var i = e.mainDataSource().firstValue();
                t.price = e.defaultPriceScale().priceRange().convertFromPercent(t.price, i)
            }
            this._startMeasurePoint = t, this._measurePane = e
        }, o.prototype.finishMeasure = function(t) {
            var e, i = this._measurePane;
            i.defaultPriceScale().isPercent() && (e = i.mainDataSource().firstValue(), t.price = i.defaultPriceScale().priceRange().convertFromPercent(t.price, e)), this._endMeasurePoint = t
        }, o.prototype.endMeasurePoint = function() {
            return this._endMeasurePoint
        }, o.prototype.clearMeasure = function(t) {
            delete this._measurePane, delete this._startMeasurePoint, delete this._endMeasurePoint, delete this._lastValidMeasurePoint, this._model.invalidate(new b(b.LIGHT_UPDATE))
        }, o.prototype.measurePoints = function() {
            var t, e, i, n, o;
            return this.updateAllViews(), t = [this._startMeasurePoint], this._endMeasurePoint ? t.push(this._endMeasurePoint) : (this._measurePane === this.pane && (this._lastValidMeasurePoint = {
                x: this.x,
                y: this.y,
                rawPrice: this.price,
                price: this.price,
                index: this.index
            }), e = this._lastValidMeasurePoint.rawPrice, i = this._measurePane, n = i.defaultPriceScale(), n.isPercent() && !n.isEmpty() && (o = i.mainDataSource().firstValue(), this._lastValidMeasurePoint.price = n.priceRange().convertFromPercent(e, o)), t.push(this._lastValidMeasurePoint)), t
        }, o.prototype.currentPoint = function() {
            return new n.Point(this.x, this.y)
        }, o.prototype.appliedIndex = function() {
            return isFinite(this.lockedIndex) && this.lockedIndex || this.index
        }, o.prototype.appliedX = function() {
            return isFinite(this.lockedX) && this.lockedX || this.x
        }, r.prototype.update = function() {
            var t, e, i, o, r, s, a, l, c, h, d, u, p, f, _, g, m, v;
            if (this._source._endMeasurePoint) t = this._source._endMeasurePoint.price, e = this._source._endMeasurePoint.index;
            else if (this._source._measurePane === this._source.pane) t = this._source.price, e = this._source.index;
            else {
                if (!this._source._lastValidMeasurePoint) return;
                t = this._source._lastValidMeasurePoint.rawPrice, e = this._source._lastValidMeasurePoint.index
            }
            i = t - this._source._startMeasurePoint.price, o = e - this._source._startMeasurePoint.index, r = this._source._startMeasurePoint.price, s = this._source._measurePane, s.defaultPriceScale().isPercent() && (a = s.mainDataSource().firstValue(), this._source._endMeasurePoint && (t = s.defaultPriceScale().priceRange().convertToPercent(t, a)), r = s.defaultPriceScale().priceRange().convertToPercent(r, a)), l = this._source._measurePane.defaultPriceScale().formatter().format(i), this._source._startMeasurePoint.price && (c = i / this._source._startMeasurePoint.price, l += " (" + (new T).format(100 * c) + ")"), this._label = "" + l + "\n" + $.t("{0} bars").format(o), r = this._source._model._magnet.align(r, this._source._startMeasurePoint.index, this._source._measurePane), t = this._source._model._magnet.align(t, e, this._source._measurePane), h = this._source._model.timeScale().indexToCoordinate(this._source._startMeasurePoint.index), d = this._source._model.timeScale().indexToCoordinate(e), u = this._source._measurePane.defaultPriceScale().priceToCoordinate(r), p = this._source._measurePane.defaultPriceScale().priceToCoordinate(t), this._p1 = new n.Point(h, u), this._p2 = new n.Point(d, p), f = this._source._model.timeScale().indexToUserTime(this._source._startMeasurePoint.index), _ = this._source._model.timeScale().indexToUserTime(e), g = this._source._measurePane.mainDataSource().base(), (f && _ || g) && (m = (_.valueOf() - f.valueOf()) / 1e3, v = Math.round(i * g), this._label = "" + l + " , " + v + "\n" + $.t("{0} bars").format(o) + ", " + (new x).format(m))
        }, r.prototype.renderer = function() {
            var t, e, i, o, r, s, a, c, h, d, _, g, m, v = new w,
                y = {};
            return y.points = [this._p1, this._p2], y.width = this._source._model.timeScale().width(), y.height = this._source._measurePane.defaultPriceScale().height(), y.color = "#D3E7FF", y.linewidth = 0, y.fillBackground = !0, y.transparency = 60, y.backcolor = "#BADAFF", v.append(new f(y)), t = this._p1.add(this._p2).scaled(.5), e = new n.Point(this._p1.x, t.y), i = new n.Point(this._p2.x, t.y), o = {
                points: [e, i],
                width: y.width,
                height: y.height,
                color: "#646668",
                linewidth: 1,
                linestyle: CanvasEx.LINESTYLE_DASHED,
                extendleft: !1,
                extendright: !1,
                leftend: l.LINEEND_NORMAL,
                rightend: l.LINEEND_ARROW
            }, v.append(new u(o)), e = new n.Point(t.x, this._p1.y), i = new n.Point(t.x, this._p2.y), o = {
                points: [e, i],
                width: y.width,
                height: y.height,
                color: "#646668",
                linewidth: 1,
                linestyle: CanvasEx.LINESTYLE_DASHED,
                extendleft: !1,
                extendright: !1,
                leftend: l.LINEEND_NORMAL,
                rightend: l.LINEEND_ARROW
            }, v.append(new u(o)), r = {
                x: 0,
                y: 10
            }, s = function(t, e) {
                return {
                    points: [e],
                    text: t,
                    color: "#FFFFFF",
                    horzAlign: "left",
                    vertAlign: "middle",
                    font: "Arial",
                    offsetX: r.x,
                    offsetY: r.y,
                    bold: !1,
                    italic: !1,
                    fontsize: 12,
                    padding: 5,
                    highlightBorder: !1,
                    backgroundColor: TradingView.generateColor("#5b85bf", 10),
                    backgroundTransparency: 10,
                    backgroundVertInflate: 5,
                    backgroundHorzInflate: 5,
                    backgroundRoundRect: 4
                }
            }, a = .5 * (this._p1.x + this._p2.x), c = this._p2.y, h = new n.Point(a, c), d = s(this._label, h), _ = new p(d, this._rendererCache), g = _.measure(), m = {
                x: a + d.backgroundHorzInflate + g.textBgPadding - g.width / g.textBgPadding,
                y: this._p1.y > this._p2.y ? h.y - g.height - 2 * g.textBgPadding - r.y > 0 ? c - g.height - r.y + g.textBgPadding : r.y - 2 * g.textBgPadding : h.y + g.height + g.textBgPadding + r.y > y.height ? y.height - g.height - r.y : c + g.textBgPadding
            }, _.setPoints([new n.Point(m.x, m.y)]), v.append(_), v
        }, s.prototype.update = function() {}, s.prototype.renderer = function() {
            var t, e, i, n, o, r = {},
                s = this.source.visible && this.source.areLinesVisible,
                a = g.lockTimeAxis().value();
            return r.horzLinesVisible = s && this._horzVisible, r.vertLinesVisible = s || a, t = this.pane._model.readOnly(), e = t ? defaults("chartproperties.paneProperties.crossHairProperties") : null, i = TradingView.isMobile.any() && l.isLineTool(this.source._model.currentTool()), n = i ? "#a000a0" : t ? e.color : this.pane._model.properties().paneProperties.crossHairProperties.color.value(), o = t ? e.transparency : this.pane._model.properties().paneProperties.crossHairProperties.transparency.value(), !i && o > 0 && (n = TradingView.generateColor(n, o)), r.color = n, r.lineWidth = t ? e.width : this.pane._model.properties().paneProperties.crossHairProperties.width.value(), r.lineStyle = t ? e.style : this.pane._model.properties().paneProperties.crossHairProperties.style.value(), r.drawCenter = i && this.pane === this.source.pane, r.w = this.pane.width(), r.h = this.pane.height(), r.x = isFinite(this.source.lockedX) && this.source.lockedX || this.source.x, r.y = this.source.y, new v(r)
        }, a.prototype.update = function() {}, a.prototype.renderer = function() {
            var t, e, i, n, o = this.source.visible && this.source.areLinesVisible,
                r = g.lockTimeAxis().value(),
                s = o && this._horzVisible,
                a = o || r;
            if (("y" !== this._axis || s) && a) return t = 9, e = 11, i = "y" === this._axis ? this.pane.width() - t / 2 : this.source.lockedX + 1, n = "y" === this._axis ? this.source.y : this.pane.height() - e / 2 - 1, new y({
                x: i,
                y: n,
                width: t,
                height: e,
                bodyHeight: 7
            })
        }, t.exports = o
    }).call(e, i(50), i(40))
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        this._crossHair = t, this._model = e, this._rendererData = {
            background: "#585858",
            color: "white",
            visible: !0
        }, this._defaultFormatter = new a(100)
    }
    var o = i(62),
        r = i(60),
        s = i(83),
        a = s.PriceFormatter;
    inherit(n, r), n.prototype.update = function() {
        var t, e, i, n = this._rendererData,
            o = this._crossHair.pane;
        n.coordinate = this._crossHair.y, this.text = "", o && this._crossHair.visible && (t = o.defaultPriceScale(), t.isEmpty() || (i = t.mainSource(), e = i ? i.formatter() : this._defaultFormatter, n.text = e.format(this._crossHair.price)))
    }, n.prototype.renderer = function() {
        return this._renderer || (this._renderer = new o(this._rendererData)), this._renderer
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        r.call(this), this._header = null, this._crossHair = t, this._model = e, this._items.push(new s("Date", "")), this._items.push(new s("Time", "")), this._items.push(new s("Price", "")), this._defaultFormatter = new l(100)
    }
    var o = i(64),
        r = o.DataWindowView,
        s = o.DataWindowItem,
        a = i(83),
        l = a.PriceFormatter,
        c = a.DateFormatter,
        h = a.TimeFormatter;
    inherit(n, r), n.prototype.update = function() {
        var t, e, i, n, o, r, s = this._model.mainSeries().isDWM();
        this._items[1].setVisible(!s), this._items[0].setValue("n/a"), this._items[1].setValue("n/a"), this._items[2].setValue("n/a"), this._model.timeScale().isEmpty() || (t = this._crossHair.appliedIndex(), e = this._model.timeScale().indexToUserTime(t), null === e ? (this._items[0].setValue("n/a"), s || this._items[1].setValue("n/a")) : (this._items[0].setValue((new c).format(e)), s || this._items[1].setValue((new h).format(e))), i = this._crossHair.pane, i && (n = i.defaultPriceScale(), n.isEmpty() || (o = n.mainSource(), r = o ? o.formatter() : this._defaultFormatter, this._items[2].setValue(r.format(this._crossHair.price)))))
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        o.call(this), this._crosshair = t, this._model = e, this._rendererData = {
            visible: !1,
            background: "#585858",
            color: "white",
            text: ""
        }
    }
    var o = i(78),
        r = i(79),
        s = i(83).DateTimeFormatter;
    inherit(n, o), n.prototype.update = function() {
        var t, e = this._rendererData,
            i = this._model.timeScale();
        e.coordinate = this._crosshair.appliedX(), t = i.indexToUserTime(this._crosshair.appliedIndex()), t ? (e.visible = !0, e.text = new s(this._model.mainSeries().isDWM()).format(t)) : (e.visible = !1, e.text = "")
    }, n.prototype.renderer = function() {
        var t = this._rendererData;
        return this._renderer || (this._renderer = new r(t)), this._renderer
    }, t.exports = n
}, function(t, e) {
    "use strict";

    function i(t) {
        function e(t, e) {
            var i = t.font;
            return o.hasOwnProperty(i) || (o[i] = {}), o[i].hasOwnProperty(e) || (o[i][e] = t.measureText(e).width), o[i][e]
        }

        function i() {
            var i = n.width(),
                o = n.height();
            return {
                draw: function(n) {
                    var s, a, l, c, h, d, u, p = t.symbolInfo();
                    if (p) {
                        for (n.fillStyle = TradingView.generateColor(r.color.value(), r.transparency.value()), s = p.name, /QUANDL/.test(p.exchange) && (a = s.split(/\//), a.length && (s = a[a.length - 1])), l = [{
                            text: s ? s + ", " + TradingView.translatedIntervalString(t.interval()) : "",
                            font: "96px Verdana, Arial, sans-serif",
                            lineHeight: 114,
                            baselineOffset: 87
                        }, {
                            text: p.description || "",
                            font: "48px Verdana, Arial, sans-serif",
                            lineHeight: 57,
                            baselineOffset: 43.5
                        }], c = 0, h = 0; h < l.length; h++) d = l[h], d.text && (n.font = d.font, u = e(n, d.text), u > i ? (d.zoom = i / u, u = i) : d.zoom = 1, d.offsetLeft = (i - u) / 2, c += d.lineHeight * d.zoom);
                        for (c = Math.max((o - c) / 2, 0), h = 0; h < l.length; h++) d = l[h], d.text && (n.save(), n.font = d.font, n.translate(d.offsetLeft, c), n.scale(d.zoom, d.zoom), n.fillText(d.text, 0, d.baselineOffset), n.restore(), c += d.lineHeight * d.zoom)
                    }
                }
            }
        }
        var n = null,
            o = {},
            r = t.model().properties().symbolWatermarkProperties,
            s = {
                renderer: i,
                update: function() {}
            };
        this.paneViews = function(t) {
            return t.containsMainSeries() ? (n = t, [s]) : []
        }
    }
    t.exports = i
}, function(t, e) {
    "use strict";

    function i() {
        this.visible = !0, this.horzLinesVisible = !0, this.horzLinesColor = "white", this.horzLinesStyle = "", this.vertLinesVisible = !0, this.vertLinesColor = "white", this.vertLinesStyle = ""
    }

    function n(t, e) {
        this.source = t, this.pane = e
    }

    function o(t) {
        this.data = t
    }
    i.prototype.paneViews = function(t) {
        return [new n(this, t)]
    }, n.prototype.update = function() {}, n.prototype.renderer = function() {
        var t = {};
        return this.pane.defaultPriceScale().isEmpty() || this.pane.timeScale().isEmpty() ? null : (t.horzLinesVisible = !0, t.vertLinesVisible = !0, t.horzLinesColor = this.pane._model.properties().paneProperties.horzGridProperties.color.value(), t.vertLinesColor = this.pane._model.properties().paneProperties.vertGridProperties.color.value(), t.horzLineStyle = this.pane._model.properties().paneProperties.horzGridProperties.style.value(), t.vertLineStyle = this.pane._model.properties().paneProperties.vertGridProperties.style.value(), t.priceMarks = this.pane.defaultPriceScale().marks(), t.timeMarks = this.pane.timeScale().marks(), t.w = this.pane.width(), t.h = this.pane.height(), new o(t))
    }, o.prototype.draw = function(t) {
        var e;
        if (t.lineWidth = 1,
                this.data.vertLinesVisible) {
            for (t.strokeStyle = this.data.vertLinesColor, CanvasEx.setLineStyle(t, this.data.vertLineStyle), t.beginPath(), e = 0; e < this.data.timeMarks.length; e++) t.moveTo(this.data.timeMarks[e].coord + 1, 0), t.lineTo(this.data.timeMarks[e].coord + 1, this.data.h);
            t.stroke()
        }
        if (this.data.horzLinesVisible) {
            for (t.strokeStyle = this.data.horzLinesColor, CanvasEx.setLineStyle(t, this.data.horzLineStyle), t.beginPath(), e = 0; e < this.data.priceMarks.length; e++) t.moveTo(0, this.data.priceMarks[e].coord), t.lineTo(this.data.w, this.data.priceMarks[e].coord);
            t.stroke()
        }
    }, t.exports = i
}, function(t, e, i) {
    "use strict";

    function n(t, e, i) {
        this._magnetProperty = t, this._timeScale = e
    }
    var o = i(53);
    n.prototype.align = function(t, e, i) {
        var n, r, s, a, l, c, h, d, u, p = 50,
            f = i.defaultPriceScale(),
            _ = f.priceToCoordinate(t),
            g = t;
        if (!this._magnetProperty.value()) return g;
        for (n = f.dataSources(), r = null, s = 0; s < n.length; s++)
            if (n[s] instanceof o) {
                r = n[s];
                break
            }
        if (r && (a = r.bars(), a.contains(e) && (l = a.valueAt(e), c = [l[TradingView.OPEN_PLOT], l[TradingView.HIGH_PLOT], l[TradingView.LOW_PLOT], l[TradingView.CLOSE_PLOT]], f = r.priceScale(), !f.isEmpty()))) {
            if (h = [], f.isPercent())
                for (d = r.firstValue(), s = 0; s < c.length; s++) c[s] = f.priceRange().convertToPercent(c[s], d);
            for (s = 0; s < c.length; s++) h.push({
                y: f.priceToCoordinate(c[s]),
                price: c[s]
            });
            h.sort(function(t, e) {
                var i = Math.abs(t.y - _),
                    n = Math.abs(e.y - _);
                return i - n
            }), u = h[0], Math.abs(u.y - _) < p && (g = u.price)
        }
        return g
    }, t.exports = n
}, function(t, e, i) {
    (function(e, n, o) {
        "use strict";

        function r() {
            return [$.t("Jan"), $.t("Feb"), $.t("Mar"), $.t("Apr"), $.t("May"), $.t("Jun"), $.t("Jul"), $.t("Aug"), $.t("Sep"), $.t("Oct"), $.t("Nov"), $.t("Dec")]
        }

        function s(t) {
            this._model = t, this._properties = t.properties().timeScale, this._scalesProperties = t.properties().scalesProperties, this.m_width = 0, this._defaultRightOffset = this._properties.rightOffset.value(), this.m_rightOffset = this._properties.rightOffset.value(), this.m_points = new p, this.m_barSpacing = this._properties.barSpacing.value(), this.m_scrollStartPoint = null, this.m_scaleStartPoint = null, this.m_stateSnapshot = null, this.m_tickmarks = new c, this._locked = !1, this._formattedBySpan = {}
        }
        var a = i(74),
            l = i(140),
            c = i(307),
            h = i(104),
            d = i(81).saveDefaultProperties,
            u = i(83).numberToStringWithLeadingZero,
            p = i(308);
        TradingView.MONTH_NAMES = null, TradingView.MINUTE_SPAN = 20, TradingView.HOUR_SPAN = 30, TradingView.DAY_SPAN = 40, TradingView.WEEK_SPAN = 50, TradingView.MONTH_SPAN = 60, TradingView.YEAR_SPAN = 70, TradingView.DEFAULT_BAR_SPACING = 6, TradingView.MAX_BAR_SPACING = 50, TradingView.MIN_BAR_SPACING = .5, TradingView.DEFAULT_RIGHT_OFFSET = 5, s.prototype.tickMarks = function() {
            return this.m_tickmarks
        }, s.prototype.reset = function() {
            this._visibleBarsCache = null, this.m_points = new p, this.m_scrollStartPoint = null, this.m_scaleStartPoint = null, this.m_stateSnapshot = null, this.m_tickmarks.reset()
        }, s.prototype.restoreDefault = function() {
            this._visibleBarsCache = null, this.m_barSpacing = TradingView.DEFAULT_BAR_SPACING, this.m_rightOffset = this._properties.rightOffset.value(), this.saveDefault("barSpacing"), this._correctOffset(), this.recalcLockedScale()
        }, s.prototype.rightOffset = function() {
            return this.m_rightOffset
        }, s.prototype.scrollToRealtime = function(t) {
            var e, i, n, o, r = this._properties.rightOffset.value();
            return t ? (e = this, i = this.m_rightOffset, n = this.m_width / this.m_barSpacing - 10, n > 0 && r > n && (r = n), o = this._model, void $({
                offset: i
            }).animate({
                offset: r
            }, {
                duration: 1e3,
                easing: "easeInOutQuint",
                step: function(t) {
                    e._visibleBarsCache = null, e.m_rightOffset = t, o.recalculateAllPanes(), o.invalidate(new h(h.LIGHT_UPDATE)), o.recalcVisibleRangeStudy(o.dataSources())
                }
            })) : (this._visibleBarsCache = null, this.m_rightOffset = r, void this._correctOffset())
        }, s.prototype.points = function() {
            return this.m_points
        }, s.prototype.width = function() {
            return this.m_width
        }, s.prototype.barSpacing = function() {
            return this.m_barSpacing
        }, s.prototype.setWidth = function(t) {
            this._visibleBarsCache = null, !isFinite(t) || 0 >= t || (this._locked && this.m_width && (this.m_barSpacing *= t / this.m_width), this.m_width = t, this._correctOffset())
        }, s.prototype.visibleBars = function() {
            var t, e, i, n;
            if (this._visibleBarsCache) return this._visibleBarsCache;
            if (!this.isEmpty()) return t = Math.ceil(this.m_width / this.m_barSpacing) - 1, e = Math.round(this.m_rightOffset + this.m_points.lastTimePointIndex()), i = e - t, n = new a(i, e), this._visibleBarsCache = n, n
        }, s.prototype.isEmpty = function() {
            return 0 === this.m_width || 0 === this.m_points.size()
        }, s.prototype.indexToCoordinate = function(t, e) {
            var i, n;
            return this.isEmpty() ? 0 : TradingView.isInteger(t) ? (i = this.m_points.lastTimePointIndex() + this.m_rightOffset - t, n = this.m_width - (i + .5) * this.m_barSpacing, e ? n : Math.round(n)) : 0
        }, s.prototype.barIndexesToCoordinates = function(t) {
            var e, i, n, o;
            for (e = 0; e < t.length; e++) i = t[e].time, n = this.m_points.lastTimePointIndex() + this.m_rightOffset - i, o = this.m_width - (n + .5) * this.m_barSpacing, t[e].time = Math.round(o), t[e].exactTime = o
        }, s.prototype.indexesToCoordinates = function(t) {
            var e, i, n, o = this.m_points.lastTimePointIndex() + this.m_rightOffset,
                r = this.m_width - o * this.m_barSpacing - .5 * this.m_barSpacing;
            for (e = 0; e < t.length; e++) i = t[e].x, n = r + i * this.m_barSpacing, t[e].x = Math.round(n)
        }, s.prototype.coordinateToIndex = function(t) {
            var e = (this.m_width + 1 - t) / this.m_barSpacing,
                i = this.m_points.lastTimePointIndex(),
                n = i + this.m_rightOffset - e,
                o = Math.round(1e6 * n) / 1e6;
            return Math.ceil(o)
        }, s.prototype.timeToCoordinate = function(t) {
            function e(t) {
                return 0 >= t || t >= l.m_width
            }
            var i, n, o, r = this.m_points.closestIndexLeft(t),
                s = this.m_points.valueAt(r),
                a = this.indexToCoordinate(r, !0),
                l = this;
            return e(a) ? null : (i = this.barSpacing(), n = function() {
                var t = this.m_points.lastTimePointIndex();
                return this.m_points.valueAt(t) - this.m_points.valueAt(t - 1)
            }.bind(this)(), o = Math.round(a + (t - s) / n * i) + 1, e(o) ? null : o)
        }, s.prototype.alignCoordinate = function(t) {
            if (this.isEmpty()) return t;
            var e = this.coordinateToIndex(t);
            return this.indexToCoordinate(e)
        }, s.prototype.timePointToIndex = function(t) {
            return this.m_points.indexOf(t, !0)
        }, s.prototype.indexToTimePoint = function(t) {
            var e = this.m_points.valueAt(t);
            return e ? new Date(1e3 * e) : null
        }, s.prototype.indexToUserTime = function(t) {
            return this.m_tickmarks.indexToTime(t)
        }, s.prototype.marks = function() {
            var t, e, i, n, o, r, s, a, l, c, h, d;
            if (this.isEmpty()) return null;
            for (t = this.m_barSpacing, e = this._scalesProperties.fontSize.value() || 0, i = 5 * (e + 4), n = Math.round(i / t), o = this.visibleBars(), r = Math.max(o.firstBar(), o.firstBar() - n), s = Math.max(o.lastBar(), o.lastBar() - n), a = this.m_tickmarks.build(t, i), l = [], c = 0; c < a.length; ++c) h = a[c], r <= h.index && h.index <= s && (d = this.m_tickmarks.indexToTime(h.index), null !== d && l.push({
                coord: this.indexToCoordinate(h.index),
                label: this.formatLabel(d, h.span),
                span: h.span,
                major: h.label >= TradingView.DAY_SPAN ? 1 : 0
            }));
            return l
        }, s.prototype.state = function(t) {
            var e = {};
            return e.m_barSpacing = this.barSpacing(), e.m_rightOffset = this.m_rightOffset, t && (this.m_points.size() > 0 && (e.m_lastVisibleBar = this.m_points.valueAt(this.m_points.lastTimePointIndex())), e.points = this.m_points.state(), e.tickmarks = this.m_tickmarks.state(), e.width = this.m_width), e
        }, s.prototype.restoreState = function(t, e, i) {
            var n, o, r;
            return this._visibleBarsCache = null, void 0 === t.m_barSpacing ? void TradingView.logDebugChart("TimeScale.restoreState: invalid state") : void 0 === t.m_rightOffset ? void TradingView.logDebugChart("TimeScale.restoreState: invalid state") : (this.m_barSpacing = t.m_barSpacing, this.m_rightOffset = t.m_rightOffset, this.m_restoredLastTimePoint = t.m_lastVisibleBar, i && this.m_restoredLastTimePoint && (n = this.m_points.indexOf(this.m_restoredLastTimePoint), o = this.m_points.lastTimePointIndex(), r = o - n, this.m_rightOffset = -r + t.m_rightOffset), e && (this.m_points.restoreState(t.points), this.m_tickmarks.restoreState(t.tickmarks), t.width && (this._locked = !0, this.m_width > 0 && (this.m_barSpacing *= this.m_width / t.width))), void this._correctOffset())
        }, s.prototype.setOffset = function(t) {
            return this._visibleBarsCache = null, void 0 === t ? void TradingView.logDebugChart("TimeScale.setOffset: invalid state") : (this.m_rightOffset = t, void this._correctOffset())
        }, s.prototype.setBarSpacing = function(t) {
            return this._visibleBarsCache = null, void 0 === t ? void TradingView.logDebugChart("TimeScale.setBarSpacing: invalid state") : void(this.m_barSpacing = t)
        }, s.prototype._correctOffset = function() {
            if (!this.isEmpty()) {
                var t = this.m_width / this.m_barSpacing - 10;
                t > 0 && this.m_rightOffset > t && (this.m_rightOffset = t, this._visibleBarsCache = null), t = this.m_points.size() - 10, this.m_rightOffset < -t && (this.m_rightOffset = -t, this._visibleBarsCache = null)
            }
        }, s.prototype.maxOffset = function() {
            return this.m_width / this.m_barSpacing - 10
        }, s.prototype.startScale = function(t) {
            this.m_scrollStartPoint && this.endScroll(), null === this.m_scaleStartPoint && null === this.m_stateSnapshot && (this.isEmpty() || (this.m_scaleStartPoint = t, this.m_stateSnapshot = this.state()))
        }, s.prototype.scaleTo = function(t) {
            var i, n;
            this._visibleBarsCache = null, delete this.m_restoredLastTimePoint, null !== this.m_stateSnapshot && (i = e.clamp(this.m_width - t, 0, this.m_width), n = e.clamp(this.m_width - this.m_scaleStartPoint, 0, this.m_width), 0 !== i && 0 !== n && (this.m_barSpacing = this.m_stateSnapshot.m_barSpacing * i / n, this.m_barSpacing < TradingView.MIN_BAR_SPACING ? this.m_barSpacing = TradingView.MIN_BAR_SPACING : this.m_barSpacing > TradingView.MAX_BAR_SPACING && (this.m_barSpacing = TradingView.MAX_BAR_SPACING), this._correctOffset(), this.recalcLockedScale()))
        }, s.prototype.endScale = function() {
            null !== this.m_scaleStartPoint && (this.m_scaleStartPoint = null, this.m_stateSnapshot = null, this.saveDefault("barSpacing"))
        }, s.prototype.saveDefault = function(t) {
            d(!0), this._properties[t].setValue(this["m_" + t]), d(!1)
        }, s.prototype.startScroll = function(t) {
            null === this.m_scrollStartPoint && null === this.m_stateSnapshot && (this.isEmpty() || (this.m_scrollStartPoint = t, this.m_stateSnapshot = this.state()))
        }, s.prototype.scrollTo = function(t) {
            if (this._visibleBarsCache = null, delete this.m_restoredLastTimePoint, null !== this.m_scrollStartPoint) {
                var e = (this.m_scrollStartPoint - t) / this.barSpacing();
                this.m_rightOffset = this.m_stateSnapshot.m_rightOffset + e, this._correctOffset(), this._model.mainSeries().priceScale().properties().percentage.value() && this.recalcLockedScale()
            }
        }, s.prototype.scrollToOffsetAnimated = function(t, e) {
            var i, n, o, r;
            if (!isFinite(t)) throw new RangeError("offset is required and must be finite number");
            if (void 0 === e && (e = 400), !isFinite(e) || 0 >= e) throw new RangeError("animationDuration (optional) must be finite positive number");
            i = this, n = this.m_rightOffset, o = +new Date, r = this._model,
                function s() {
                    i._visibleBarsCache = null;
                    var a = (new Date - o) / e;
                    return a >= 1 ? (i.m_rightOffset = t, i._visibleBarsCache = null, r.recalculateAllPanes(), void r.invalidate(new h(h.LIGHT_UPDATE))) : (i.m_rightOffset = n + (t - n) * a, r.recalculateAllPanes(), void setTimeout(s, 20))
                }()
        }, s.prototype.endScroll = function() {
            null !== this.m_scrollStartPoint && (this.m_scrollStartPoint = null, this.m_stateSnapshot = null)
        }, s.prototype._currentSavedPosition = function() {
            var t, e, i;
            this.isEmpty() || (t = this.m_points.indexOf(this.m_restoredLastTimePoint, !0), TradingView.isInteger(t) && (e = this.m_points.lastTimePointIndex(), i = e - t, this.m_rightOffset -= i), delete this.m_restoredLastTimePoint)
        }, s.prototype.update = function(t, e, i, n) {
            this._visibleBarsCache = null, this.m_tickmarks.merge(n), this.m_points.merge(t, e, i), this.m_restoredLastTimePoint && this._currentSavedPosition()
        }, s.prototype.addTail = function(t, e, i) {
            var n, o, r;
            for (this.m_tickmarks.removeTail(e), n = t.params, o = this.m_tickmarks.maxIndex + (i ? 0 : 1), r = 0; r < n.marks.length; r++) n.marks[r].index = o + r;
            this.m_tickmarks.addTail(n.marks), this.m_points.addTail(n.changes, i), this.m_rightOffset -= n.changes.length
        }, s.prototype.formatLabel = function(t, e) {
            if (this._formattedBySpan[e]) return this._formattedBySpan[e].format(t.valueOf());
            var i = this;
            return this._formattedBySpan[e] = new l(function(t) {
                return i.formatLabelImpl(new Date(t), e)
            }), this._formattedBySpan[e].format(t)
        }, s.prototype.formatLabelImpl = function(t, e) {
            if (!(t && t instanceof Date)) return "incorrect time";
            var i = this._model.mainSeries().isDWM();
            return e < TradingView.MINUTE_SPAN && !i ? u(t.getUTCHours(), 2) + ":" + u(t.getUTCMinutes(), 2) + ":" + u(t.getUTCSeconds(), 2) : e < TradingView.DAY_SPAN && !i ? u(t.getUTCHours(), 2) + ":" + u(t.getUTCMinutes(), 2) : e < TradingView.WEEK_SPAN ? t.getUTCDate() : e < TradingView.MONTH_SPAN ? t.getUTCDate() : e < TradingView.YEAR_SPAN ? (TradingView.MONTH_NAMES || (TradingView.MONTH_NAMES = r()), TradingView.MONTH_NAMES[t.getUTCMonth()]) : t.getUTCFullYear()
        }, s.prototype.normalizeBarIndex = function(t) {
            var e = 0,
                i = 0;
            return t < this.m_points.firstTimePointIndex() ? (e = this.m_points.valueAt(this.m_points.firstTimePointIndex()), i = t - this.m_points.firstTimePointIndex()) : t > this.m_points.lastTimePointIndex() ? (e = this.m_points.valueAt(this.m_points.lastTimePointIndex()), i = t - this.m_points.lastTimePointIndex()) : (e = this.m_points.valueAt(t), i = 0), {
                time_t: e,
                offset: i
            }
        }, s.prototype.denormalizeTimePoint = function(t) {
            var e = n.enabled("charting_library_base") ? this.m_points.closestIndexLeft(t.time_t) : this.m_points.indexOf(t.time_t);
            if (void 0 !== e) return e + t.offset
        }, s.prototype.zoomToBarsRange = function(t, e) {
            if (!(t >= e)) {
                var i = this.m_points.lastTimePointIndex();
                i && (this.m_rightOffset = e - i), this.m_barSpacing = this.width() / (e - t + 1), this._visibleBarsCache = null
            }
        }, s.prototype.recalcLockedScale = function() {
            var t, e, i, n, r, s, a, l;
            this._model.m_mainSeries.properties().lockScale.value() && !this.isEmpty() && (t = this._model.m_mainSeries.priceScale(), e = this._model.m_mainSeries, i = e.data().boxSize, i || (e.fixBoxSize(), i = e.data().boxSize), i && (t.properties().percentage.value() && (n = e.data().search(e.getRealVisibleRange().m_firstBar).value[TradingView.CLOSE_PLOT], i = o.prototype.convertToPercent.call(null, n + i, n) - o.prototype.convertToPercent.call(null, n, n)), r = t.internalHeight() / (this.barSpacing() / i), s = e.priceScale().priceRange(), s && r === s.length() || (!s || s.isEmpty() ? (a = this.visibleBars(), s = e.priceRange(a.firstBar(), a.lastBar())) : (l = (r - s.length()) / 2, s.m_minValue -= l, s.m_maxValue += l), e.priceScale().setPriceRange(s))))
        }, s.prototype.correctBarSpacing = function() {
            this.isEmpty() || this.points().size() < this.width() / this.barSpacing() && (this.setOffset(TradingView.DEFAULT_RIGHT_OFFSET), this.setBarSpacing(Math.min(this.width() / (this.points().size() + this.rightOffset()), TradingView.MAX_BAR_SPACING)))
        }, s.prototype.canZoomIn = function() {
            return this.m_barSpacing < TradingView.MAX_BAR_SPACING
        }, s.prototype.canZoomOut = function() {
            return this.m_barSpacing > TradingView.MIN_BAR_SPACING
        }, t.exports = s
    }).call(e, i(40), i(3), i(54))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function i() {
            this._marksByIndex = {}, this._marksBySpan = [], this.changed = new e
        }
        i.prototype.reset = function() {
            this._marksByIndex = {}, this._marksBySpan = [], delete this.minIndex, delete this.maxIndex, delete this._cache, this.changed.fire()
        }, i.prototype.minIndex = void 0, i.prototype.maxIndex = void 0, i.prototype.merge = function(t) {
            var e, i, n, o, r, s = this._marksBySpan,
                a = {};
            for (e = 0; e < t.length; e++) {
                if (i = t[e], n = i.index, o = i.span, r = this._marksByIndex[i.index]) {
                    if (r.index === i.index && r.span === i.span) {
                        r.time = i.time;
                        continue
                    }
                    this._removeTickmark(r)
                }
                this._marksByIndex[n] = i, this.minIndex <= n || (this.minIndex = n), this.maxIndex >= n || (this.maxIndex = n), s[o] || (s[o] = []), s[o].push(i), a[o] = !0
            }
            for (o = s.length; o--;) s[o] && (s[o].length || delete s[o], a[o] && s[o].sort(this._sortByIndexAsc));
            delete this._cache, this.changed.fire()
        }, i.prototype._removeTickmark = function(t) {
            var e, i, n = t.index;
            this._marksByIndex[n] === t && (delete this._marksByIndex[n], n <= this.minIndex && this.minIndex++, n >= this.maxIndex && this.maxIndex--, this.maxIndex < this.minIndex && (delete this.minIndex, delete this.maxIndex), e = this._marksBySpan[t.span], i = e.indexOf(t), -1 !== i && e.splice(i, 1))
        }, i.prototype._sortByIndexAsc = function(t, e) {
            return t.index - e.index
        }, i.prototype.removeTail = function(t) {
            var e, i = {};
            this.maxIndex = 0;
            for (e in this._marksByIndex) this._marksByIndex[e].time < t && (i[e] = this._marksByIndex[e], this.maxIndex = Math.max(this.maxIndex, e));
            this._marksByIndex = i
        }, i.prototype.addTail = function(t) {
            for (var e = 0; e < t.length; e++) t[e].index = this.maxIndex + e + 1;
            this.merge(t)
        }, i.prototype.indexToTime = function(t) {
            var e = this._marksByIndex[t];
            return e ? new Date(1e3 * e.time) : null
        }, i.prototype.density = function() {
            var t, e, i = this.maxIndex - this.minIndex;
            if (0 !== i) return t = this._marksByIndex[this.maxIndex].time - this._marksByIndex[this.minIndex].time, e = 1e3 * t / i
        }, i.prototype.estimateLeft = function(t) {
            var e, i, n = this.density();
            if (n) return e = 1e3 * this._marksByIndex[this.minIndex].time - t, i = e / n
        }, i.prototype.nearestIndex = function(t) {
            for (var e, i = this.minIndex, n = this.maxIndex; n - i > 2;) {
                if (1e3 * this._marksByIndex[i].time === t) return i;
                if (1e3 * this._marksByIndex[n].time === t) return n;
                e = Math.round((i + n) / 2), 1e3 * this._marksByIndex[e].time > t ? n = e : i = e
            }
            return i
        }, i.prototype.build = function(t, e) {
            var i, n, o, r, s, a, l, c, h, d, u, p, f, _, g = Math.ceil(e / t);
            if (this._maxbar === g && this._cache) return this._cache;
            for (this._maxbar = g, i = [], n = this._marksBySpan.length; n--;)
                if (this._marksBySpan[n]) {
                    for (o = i, i = [], r = o.length, s = 0, a = this._marksBySpan[n], l = a.length, c = 1 / 0, h = -(1 / 0), d = 0; l > d; d++) {
                        for (u = a[d], p = u.index; r > s;) {
                            if (f = o[s], _ = f.index, !(p > _)) {
                                c = _;
                                break
                            }
                            s++, i.push(f), h = _, c = 1 / 0
                        }
                        c - p >= g && p - h >= g && (i.push(u), h = p)
                    }
                    for (; r > s; s++) i.push(o[s])
                }
            return this._cache = i, this._cache
        }, i.prototype.state = function() {
            var t, e = [];
            for (t = this._marksBySpan.length; t--;) this._marksBySpan[t] && (e = e.concat(this._marksBySpan[t]));
            return e = e.map(function(t) {
                return [t.span, t.time, t.index]
            }), {
                marks: e,
                version: 2
            }
        }, i.prototype.restoreState = function(t) {
            if (this._marksByIndex = {}, this._marksBySpan = [], delete this.maxIndex, delete this.minIndex, t && t.marks && t.marks.length)
                if (2 === t.version) {
                    var e = t.marks.map(function(t) {
                        return {
                            span: t[0],
                            time: t[1],
                            index: t[2]
                        }
                    });
                    this.merge(e)
                } else this.merge(t.marks)
        }, t.exports = i
    }).call(e, i(50))
}, function(t, e) {
    "use strict";

    function i() {
        this._zoffset = 0, this._items = [], this._lastTimePointIndex = null
    }
    i.prototype.clear = function() {
        this._zoffset = 0, this._items = [], this._lastTimePointIndex = null
    }, i.prototype.items = function() {
        return this._items
    }, i.prototype.size = function() {
        return this._items.length
    }, i.prototype.firstTimePointIndex = function() {
        return this.offsetToIndex(0)
    }, i.prototype.lastTimePointIndex = function() {
        return null !== this._lastTimePointIndex && void 0 !== this._lastTimePointIndex ? this._lastTimePointIndex : (this._lastTimePointIndex = this.offsetToIndex(this.size() - 1), this._lastTimePointIndex)
    }, i.prototype.merge = function(t, e, i) {
        var n, o, r, s, a, l, c;
        if (0 === this._items.length) return this._items = i, this._zoffset = e, [{
            change: "rebuild",
            index: 0
        }];
        if (n = t + this._zoffset, 0 > n) {
            for (o = Math.abs(n), this._items = Array(o).concat(this._items), this._zoffset = e, r = 0; r < i.length; ++r) this._items[t + r + e] = i[r];
            return [{
                change: "rebuild",
                index: 0
            }]
        }
        for (s = [], r = n; r < this._items.length && r - n < i.length; ++r) this._items[r] = i[r - n], s.push({
            change: "update",
            index: r - this._zoffset,
            value: i[r - n]
        });
        if (a = n + i.length, a > this._items.length)
            for (o = a - this._items.length, l = r; r + o > l; ++l) c = this._items.length, this._items.push(i[l - n]), s.push({
                change: "append",
                index: c - this._zoffset,
                value: i[l - n]
            });
        return this._zoffset = e, this._lastTimePointIndex = null, s
    }, i.prototype.addTail = function(t, e) {
        for (var i = e ? 1 : 0; i < t.length; i++) this._items.push(t[i]), this._lastTimePointIndex++
    }, i.prototype.valueAt = function(t) {
        var e = this.indexToOffset(t);
        return void 0 !== e ? this._items[e] : void 0
    }, i.prototype.indexOf = function(t, e) {
        if (e && t > this._items[this._items.length - 1]) return this.offsetToIndex(this._items.length - 1);
        for (var i = 0; i < this._items.length && !(t < this._items[i]); ++i)
            if (!(t > this._items[i])) return this.offsetToIndex(i);
        return e ? this.offsetToIndex(i) : void 0
    }, i.prototype.offsetToIndex = function(t) {
        return t >= 0 && t < this.size() ? t - this._zoffset : void 0
    }, i.prototype.indexToOffset = function(t) {
        var e = t + this._zoffset;
        return e >= 0 && e < this.size() ? e : void 0
    }, i.prototype.state = function() {
        var t = {};
        return t.zoffset = this._zoffset, t.items = this._items, t
    }, i.prototype.restoreState = function(t) {
        t && (this._zoffset = t.zoffset, this._items = t.items, this._lastTimePointIndex = null)
    }, i.prototype.roughTime = function(t, e) {
        var i, n, o, r, s, a, l, c, h, d = this.valueAt(t);
        if (void 0 === d) {
            if (i = this._items, !i.length || i.length < 2) return;
            if (n = this.firstTimePointIndex(), o = this.lastTimePointIndex(), r = this.valueAt(n), s = this.valueAt(o), a = (s - r) / (o - n), n > t) return l = n - t, c = l * a, d = r - c;
            if (h = 500, t > o) return l = t - o, h > l && e ? e(s, l) : (c = l * a, d = s + c)
        }
        return d
    }, i.prototype.roughIndex = function(t, e) {
        var i, n, o, r, s, a, l, c, h, d, u = this._items;
        if (u.length && !(u.length < 2)) return i = this.firstTimePointIndex(), n = this.lastTimePointIndex(), o = this.valueAt(i), r = this.valueAt(n), t >= o && r >= t ? this.closestIndexLeft(t) : (s = (r - o) / (n - i), o > t ? (a = o - t, l = Math.round(a / s), c = i - l) : (h = 500, t > r ? (a = t - r, l = Math.trunc(a / s), h > l && e && (d = e(r, t), d.success && (l = d.result)), c = n + l) : void 0))
    }, i.prototype.closestIndexLeft = function(t) {
        var e, i, n, o, r, s, a = this._items;
        if (a.length && t === t) {
            if (e = a.length - 1, i = a[e], t >= i) return e - this._zoffset;
            if (n = 0, o = a[n], !(o > t)) {
                if (t === o) return n - this._zoffset;
                for (; e > n + 1;)
                    if (r = n + e >> 1, s = a[r], s > t) e = r;
                    else {
                        if (!(t > s)) return s === t ? r - this._zoffset : void 0;
                        n = r
                    }
                return n - this._zoffset
            }
        }
    }, t.exports = i
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t) {
            s.call(this, t);
            var e = this;
            a.hideMarksOnBars().subscribe(this, function() {
                e._properties.visible.setValue(!a.hideMarksOnBars().value())
            }), this._paneView = new o(this)
        }

        function o(t, e) {
            this.source = t, this._rendererFactory = e, this.stylesCache = {}, this.templatesCache = {}, this._createLollipops()
        }
        var r = i(136).ESDPaneView,
            s = i(310).BarsMarksContainer,
            a = i(82),
            l = i(311);
        inherit(n, s), n.prototype._initialize = function(t) {
            this._properties.visible.setValue(!0)
        }, n.prototype.userEditEnabled = function() {
            return !1
        }, n.prototype._constructor = "UserDefinedTimescaleMarks", n.prototype._plateViewData = function(t) {
            return {
                text: t.text
            }
        }, n.prototype.onClicked = function() {
            var t = this._model.lastHittestData().id;
            l.emit("onTimescaleMarkClick", t)
        }, n.prototype.clearMarks = function() {
            s.prototype.clearMarks.call(this), this.onNeedRepaint.fire()
        }, n.prototype._getData = function(t) {
            var e, i, n, o = this._model.mainSeries().symbolInfo();
            o && (e = this.roundRange(this._rangeDifference(t)), i = this, n = this._model.mainSeries().properties().interval.value(), ChartApiInstance.getTimescaleMarks(o, e.start, e.end, function(e) {
                e.forEach(function(t) {
                    i._marks[t.id] = t
                }, i), i._loadedRange = i._rangeUnion(t, i._loadedRange), i.onNeedRepaint.fire()
            }, n))
        }, n.prototype.updatePlateData = function(t, e) {
            return e.barWidth = this.barWidth(), e.text = t.text, e.tooltipMargin = -1 * Math.max(t.minSize / 2, .4 * this.barWidth()), e
        }, n.prototype.hasContextMenu = function() {
            return !1
        }, n.prototype.paneViews = function(t) {
            return this._properties.visible.value() ? [this._paneView] : []
        }, inherit(o, r), o.prototype._createLollipops = function() {
            var t, i, n, o;
            this.lollipops = [], t = this.source._model.timeScale(), i = r.prototype._getY.call(this.source), n = this.source._model.lastHittestData(), o = this, $.each(this.source._marks, function(r, s) {
                var a = {
                    id: s.id,
                    basePoint: new e.Point(t.indexToCoordinate(t.timePointToIndex(s.tickmark)) + 1, i),
                    hovered: n && n.id === s.id,
                    barY: null,
                    label: s.label,
                    color: s.color,
                    tooltip: s.tooltip
                };
                o.lollipops.push(a)
            })
        }, o.prototype.update = function() {
            this._createLollipops()
        }, o.prototype.renderer = function() {
            return this.update(), r.prototype.renderer.call(this)
        }, o.prototype._generateTemplateStyle = function(t, e, i) {
            var n, o, r = t + e + i;
            return r in this.stylesCache || (n = {
                strokeStyle: e,
                lineWidth: 1,
                fillStyle: "white",
                barLine: {
                    lineStyle: CanvasEx.LINESTYLE_DASHED
                },
                lollipop: {
                    width: 32,
                    height: 64,
                    circleHeight: 35,
                    radius: 11,
                    lineWidth: 2,
                    fillStyle: "white",
                    strokeStyle: "#E2745B",
                    text: {
                        label: i,
                        strokeStyle: e,
                        font: "normal 12px Verdana, Arial, sans-serif"
                    }
                }
            }, o = {
                lollipop: {
                    fillStyle: e,
                    text: {
                        strokeStyle: "white"
                    }
                }
            }, this.stylesCache[r] = "default" === t ? n : $.extend(!0, {}, n, o)), this.stylesCache[r]
        }, o.prototype.getTemplate = function(t, e) {
            var i = t + e.color + e.label;
            return i in this.templatesCache || (this.templatesCache[i] = this.createTemplate(this._generateTemplateStyle(t, e.color, e.label))), this.templatesCache[i]
        }, o.prototype.getStyle = function(t, e) {
            return this._generateTemplateStyle(t, e.color, e.label)
        }, o.prototype.createText = function(t, e) {
            t.tooltip.forEach(function(t) {
                e.addTextLine(t)
            })
        }, o.prototype.hasTooltip = function(t) {
            return !!t.tooltip && t.tooltip.length
        }, t.exports = n
    }).call(e, i(40))
}, function(t, e, i) {
    (function(t, n, o) {
        "use strict";

        function r(e, i) {
            var o, r = e._undoModel._chartWidget,
                s = r.onWidget(),
                a = !1;
            a = s ? r._options && !r._options.hideIdeas : TVSettings.getBool("BarsMarksContainer.visibile", !1), i ? i.merge({
                visible: a,
                frozen: !1
            }) : i = new t({
                visible: a,
                frozen: !1
            }), o = this, i.visible.listeners().subscribe(null, function(t) {
                s || r._containsData || TVSettings.setValue("BarsMarksContainer.visibile", !!t.value()), o._tooltip && o._tooltip.removeAll()
            }), d.call(this, e, null, i), this.onNeedRepaint = new n, this._requests = [], this._marks = {}, this._loadedRange = null, this._getDataTimeout = null, this._collectedRange = null, this._model.mainSeries().onSymbolIntervalChanged().subscribe(this, this.clearMarks), this._model.mainSeries().onSymbolResolved().subscribe(this, this.clearMarks), this._model.mainSeries().onTickmarksRangeChanged().subscribe(this, this.getData), this._initialize(), this.pinnedTooltips = {}, this._tooltip = new c(this._createTooltip.bind(this), this)
        }

        function s(t, e, i) {
            this.source = t, this.pane = e, this._rendererFactory = i
        }

        function a(t, e) {
            this._barWidth = t.barWidth, this._plates = t.plates, this._tooltip = t.tooltip, this._model = e
        }

        function l() {
            this._layout = [], this._currentId = void 0, this.tooltipHovered = !1
        }

        function c(t, e) {
            this.tooltips = {}, this.tooltipFactory = t, this.source = e
        }

        function h(t, e) {
            this.renderer = t, this._tooltip = e, this.visible = !1
        }
        var d = i(77).LineDataSource,
            u = i(67);
        inherit(r, d), r.prototype._constructor = "Child class must override this member", r.prototype._initialize = function(t) {
            throw Error("Child class must override this member")
        }, r.prototype.onClicked = function() {
            throw Error("Child class must override this member")
        }, r.prototype._getData = function(t) {
            throw Error("Child class must override this member")
        }, r.prototype._createTooltip = function() {
            throw Error("Child class must override this member")
        }, r.prototype.updateDotData = function(t, e) {
            return e
        }, r.prototype.updatePlateData = function(t, e) {}, r.prototype._plateViewData = function(t) {
            return {}
        }, r.prototype.pinTooltip = function(t, e) {
            this.pinnedTooltips[t] = e
        }, r.prototype.timeScale = function() {
            return this._model.timeScale()
        }, r.prototype.getIntervalInTicks = function() {
            function t(t) {
                if (t = parseInt(t), t != t) throw new TypeError("Unexpected interval");
                return 60 * t
            }
            var e = t(1440),
                i = 7 * e,
                n = 31 * e,
                o = this._model.mainSeries().properties().interval.value();
            switch (o) {
                case "M":
                    return n;
                case "W":
                    return i;
                case "D":
                    return e;
                default:
                    return t(o)
            }
        }, r.prototype._maxDate = new Date(2037, 0, 1), r.prototype.getVisibleTickmarksRange = function() {
            var t, e;
            return this.timeScale().isEmpty() ? {
                start: 0,
                end: 0
            } : (t = this.timeScale().visibleBars(), t.lastBar() > this.timeScale().points().firstTimePointIndex() && t.firstBar() < this.timeScale().points().lastTimePointIndex() ? (e = t.lastBar() < this.timeScale().points().lastTimePointIndex() ? this.timeScale().indexToTimePoint(t.lastBar()) : this._maxDate, t = {
                start: this.timeScale().indexToTimePoint(Math.max(t.firstBar(), this.timeScale().points().firstTimePointIndex())),
                end: e
            }, {
                start: t.start ? t.start.getTime() / 1e3 : void 0,
                end: t.end ? t.end.getTime() / 1e3 : void 0
            }) : {
                start: 0,
                end: 0
            })
        }, r.prototype.getVisibleRangePlates = function() {
            var t = [],
                e = this.getVisibleTickmarksRange(),
                i = this.getIntervalInTicks();
            return $.each(this._marks, function(n, o) {
                var r = o.tickmark;
                r >= e.start && r <= e.end + i && t.push(o)
            }), t
        }, r.prototype.getPublishedPlates = function() {
            var t = {},
                e = this;
            return is_authenticated ? ($.each(this.getVisibleRangePlates(), function(i, n) {
                n.is_public && (e.pinnedTooltips[n.id] || n.user__id === user.id) && (t[n.id] = n)
            }), t) : t
        }, r.prototype._maxPlatesPerBar = 10, r.prototype.filterDisplayedPlates = function(t) {
            return t = t.reduce(function(t, e) {
                var i = this._getIndex(e.tickmark);
                return t[i] = t[i] || [], t[i].push(e), t
            }.bind(this), {}), t = Object.keys(t).reduce(function(e, i) {
                var n = t[i];
                return n = n.sort(function(t, e) {
                    return e.views_count - t.views_count
                }), n = n.slice(0, this._maxPlatesPerBar), e.concat(n)
            }.bind(this), [])
        }, r.prototype._layout = function(t) {
            switch (t) {
                default:
                case 0:
                    return "up";
                case 1:
                    return "down";
                case 2:
                    return "up";
                case 3:
                case 4:
                case 5:
                case 6:
                    return "up"
            }
        }, r.prototype._theme = function(t) {
            switch (t) {
                default:
                case 0:
                    return "neutral";
                case 1:
                    return "green";
                case 2:
                    return "red";
                case 3:
                    return "yellow";
                case 4:
                    return "blue";
                case 5:
                    return "green";
                case 6:
                    return "red"
            }
        }, r.prototype._offset = function(t, e) {
            var i;
            switch (t) {
                default:
                case "up":
                    i = e[TradingView.HIGH_PLOT];
                    break;
                case "down":
                    i = e[TradingView.LOW_PLOT]
            }
            return this.priceScale().isPercent() && (i = this.priceScale().priceRange().convertToPercent(i, this.ownerSource().firstValue())), this.priceScale().priceToCoordinate(i)
        }, r.prototype._getIndex = function(t) {
            return this.timeScale().timePointToIndex(t)
        }, r.prototype.getViewData = function() {
            return {
                barWidth: this.barWidth(),
                plates: this.getPlatesViewData(),
                tooltip: this._tooltip
            }
        }, r.prototype.barWidth = function() {
            return this.timeScale().barSpacing()
        }, r.prototype.getPlatesViewData = function() {
            var t, e, i, n, o, r;
            if (this._model.mainSeries().data().isEmpty()) return [];
            t = this.filterDisplayedPlates(this.getVisibleRangePlates()), e = this, i = {}, n = this._model.lastHittestData(), t = t.map(function(t) {
                var o, r, s, a, l, c, h = this._getIndex(t.tickmark),
                    d = this._getBar(h);
                return d ? (o = this._layout(t.direction), r = this._theme(t.direction), s = n && n.id === t.id, a = this.timeScale().indexToCoordinate(h), l = this._offset(o, d), c = 0, h in i || (i[h] = {
                    up: 0,
                    down: 0
                }), c = i[h][o]++, TradingView.merge({
                    id: t.id,
                    x: a,
                    y: l,
                    order: c,
                    direction: o,
                    theme: r,
                    hovered: s,
                    pinned: e.pinnedTooltips[t.id] === !0,
                    user__id: t.user__id,
                    label: t.label,
                    labelFontColor: t.labelFontColor || "#444",
                    minSize: t.minSize || 0
                }, this._plateViewData(t))) : !1
            }.bind(this)), t = t.filter(function(t) {
                return !!t
            }), o = t.filter(function(t) {
                return t.hovered === !0
            });
            for (r = 0; r < t.length; r++) null != o[0] && t[r].user__id === o[0].user__id && (t[r].highlightByAuthor = !0);
            return t.sort(function(t, e) {
                return t.hovered && !e.hovered ? 1 : 0
            }), t
        }, r.prototype._getBar = function(t) {
            return this._model.mainSeries().data().valueAt(t)
        }, r.prototype.paneViews = function(t) {
            var e = this;
            return this._properties.visible.value() ? [new s(this, t, function(t) {
                return new a(t.getViewData(), e)
            })] : []
        }, r.prototype.dataWindowView = function() {
            return null
        }, r.prototype.priceAxisViews = function() {
            return null
        }, r.prototype.statusView = function() {
            return null
        }, r.prototype.updateAllViews = function() {}, r.prototype.pointsCount = function() {
            return 0
        }, r.prototype.properties = function() {
            return this._properties
        }, r.prototype._rangeDifference = function(t) {
            return t = $.extend({}, t), this._loadedRange && (t.start < this._loadedRange.start ? t.end = this._loadedRange.start : t.end > this._loadedRange.end && (t.start = this._loadedRange.end)), t
        }, r.prototype._rangeUnion = function(t, e) {
            return t = $.extend({}, t), e && (t.start = Math.min(e.start, t.start), t.end = Math.max(e.end, t.end)), t
        }, r.prototype._pushGetDataStack = function(t) {
            if (!t.end || !t.start) throw new TypeError("Wrong tickmark range");
            this._getDataTimeout && clearTimeout(this._getDataTimeout), this._collectedRange = this._rangeUnion(t, this._collectedRange), this._getDataTimeout = setTimeout(function() {
                this._getData(this._collectedRange), this._getDataTimeout = this._collectedRange = null
            }.bind(this), 300)
        }, r.prototype.roundRange = function(t) {
            return {
                start: Math.round(t.start),
                end: Math.round(t.end)
            }
        }, r.prototype.refreshData = function() {
            this.getData(this._lastRange)
        }, r.prototype.getData = function(t) {
            if (!t.start || !t.end) throw new TypeError("Wrong range");
            this._lastRange = t;
            var t = $.extend({}, t);
            t.end = this._maxDate / 1e3, this._pushGetDataStack(t)
        }, r.prototype._abortAllRequests = function() {
            this._requests.forEach(function(t) {
                t.abort()
            }), this._requests = [], this._getDataTimeout && clearTimeout(this._getDataTimeout), this._getDataTimeout = this._collectedRange = null
        }, r.prototype.clearMarks = function() {
            this._abortAllRequests(), this._marks = {}, this._loadedRange = null
        }, s.prototype.update = function() {}, s.prototype.renderer = function() {
            return this._rendererFactory(this.source)
        }, a.prototype.draw = function(t) {
            t.save();
            for (var e = 0; e < this._plates.length; e++)
                if (this._plates[e].highlightByAuthor) {
                    this._highlightByAuthor = !0;
                    break
                }
            this._plates.forEach(this._drawItem.bind(this, t)), this._tooltip.draw(this._plates.map(function(t) {
                return this._plateTransform(t)
            }.bind(this)), t), this._tooltip.endDraw(), t.restore()
        }, a.prototype._drawItem = function(t, e) {
            t.save(), this._highlightByAuthor && !e.highlightByAuthor && (t.globalAlpha = .4);
            var i = this._dotTransform(e);
            i.mine ? this._drawTriangle(t, i) : this._drawDot(t, i), t.restore()
        }, a.prototype._commonTransform = function(t) {
            var e = Math.max(1.4 * t.minSize, this._barWidth + 4),
                i = t.y + {
                        up: -1,
                        down: 1
                    }[t.direction] * (e * (t.order + .6) + .25 * e),
                n = TradingView.clone(t.overridedTheme || this.themes[t.theme]);
            return n.dotBorderWidth = t.hovered || t.highlightByAuthor ? 4 : 2, {
                id: t.id,
                theme: n,
                themeName: t.theme,
                x: Math.round(t.x + 1),
                y: Math.round(i),
                pinned: t.pinned,
                hovered: t.hovered
            }
        }, a.prototype._dotTransform = function(t) {
            var e = this._commonTransform(t);
            return e.radius = Math.max(t.minSize / 2, .4 * this._barWidth), e.label = t.label, e.labelFontColor = t.labelFontColor, e.labelFontSize = Math.ceil(Math.max(10, Math.min(e.radius, 20))), this._model.updateDotData(t, e)
        }, a.prototype._plateTransform = function(t) {
            var e = this._commonTransform(t);
            return this._model.updatePlateData(t, e)
        }, a.THEMES = ["green", "red", "neutral", "yellow", "blue"], a.prototype.themes = {
            green: {
                border: "#78C143",
                background: "#8DDD54"
            },
            red: {
                border: "#CC4545",
                background: "#ED5A5A"
            },
            neutral: {
                border: "#EAC300",
                background: "#FFD400"
            },
            yellow: {
                border: "#EAC300",
                background: "#FFD400"
            },
            blue: {
                border: "#047ACE",
                background: "#0496FF"
            }
        }, a.prototype._drawTriangle = function(t, e) {
            var i, n, o, r;
            t.strokeStyle = e.theme.border, t.fillStyle = e.theme.background, t.lineWidth = e.theme.dotBorderWidth, i = e, n = e.radius, o = Math.cos(Math.PI / 6) * n, r = Math.sin(Math.PI / 6) * n, t.translate(i.x, i.y), "up" === e.direction && t.rotate(Math.PI), e["public"] || (t.lineWidth /= 2), t.beginPath(), t.moveTo(0, -n), t.lineTo(o, r), t.lineTo(-o, r), t.lineTo(0, -n), t.closePath(), t.stroke(), e["public"] && t.fill()
        }, a.prototype._drawDot = function(t, e) {
            t.strokeStyle = e.theme.border, t.fillStyle = e.theme.background, t.lineWidth = e.theme.dotBorderWidth, t.beginPath(), t.arc(e.x, e.y, e.radius, 0, 2 * Math.PI, !0), t.closePath(), t.stroke(), t.fill(), e.label && e.radius > 6 && (t.textAlign = "center", t.textBaseline = "middle", t.font = "bold " + e.labelFontSize + "px Arial", t.fillStyle = e.labelFontColor, t.fillText(e.label, e.x, e.y))
        }, a.prototype.hitTest = function(t) {
            var e, i;
            for (i = this._plates.length - 1; i >= 0; --i)
                if (e = this._hitTestDot(this._plates[i], t)) return e;
            return null
        }, a.prototype._hitTestDot = function(t, e) {
            var i = this._dotTransform(t),
                n = new o.Point(i.x, i.y);
            return o.isInCircle(n, Math.max(i.radius, 8), e) ? new u(u.REGULAR, t) : null
        }, l.prototype._createLayout = function() {
            throw Error("Child class must override this member")
        }, l.prototype._updatePlate = function(t) {
            throw Error("Child class must override this member")
        }, l.prototype._getContainer = function(t) {
            return this._container && this._context === t || (this._context = t, this._container = $(t.canvas).parent()), this._container
        }, l.prototype._plateArrowSize = 14, l.prototype.showPlate = function(t, e) {
            var i, n, o, r, s, a, l;
            this._currentId === t.id && this._layout && 0 !== this._layout.length && null != this._layout[0].parentNode || (this._currentId = t.id, this._createLayout(), this._getContainer(e).append(this._layout), i = this, this._layout.hover(function() {
                i.tooltipHovered = !0, $(this).stop(!0).fadeTo(0, 1)
            }, function() {
                i.tooltipHovered = !1
            })), n = Math.round(t.barWidth / 2), n > 15 && (n = 15), 10 > n && (n = 10), this._updatePlate(t), o = t.x - this._layout.outerWidth() < this._plateArrowSize, r = e.canvas.width - t.x + Math.round(t.barWidth / 2 + n), o && (r -= this._layout.outerWidth() + 2 * this._plateArrowSize), s = e.canvas.height, a = 20, l = 10, this._layout.toggleClass("right", o), this._layout.css({
                top: Math.min(Math.max(t.y, a), s - this._layout.outerHeight() - l),
                right: r,
                fontSize: n + "px",
                display: "block"
            })
        }, l.prototype._removeLayout = function() {
            this.tooltipHovered || (this._layout.stop(!0), this._layout.remove())
        }, l.prototype._toggleLayout = function(t) {
            this._layout.toggle(t)
        }, l.prototype.hide = function(t) {
            this.tooltipHovered ? this._layout.stop(!0).fadeTo(0, 1) : this._layout.fadeOut(400, function() {
                $(this).remove(), t()
            })
        }, l.prototype.setSource = function(t) {
            this.source = t
        }, c.prototype.findOrCreateTooltip = function(t) {
            var e = this.tooltips[t.id];
            return null == e && (t.hovered || t.pinned) && (e = this._createTooltip(), this.tooltips[t.id] = e), e
        }, c.prototype.showPlate = function(t, e) {
            var i = this.findOrCreateTooltip(t);
            null != i && (i._drawPlate(t, e), i.plateData = t)
        }, c.prototype.draw = function(t, e) {
            this.hoveredId = null;
            for (var i = 0; i < t.length; i++) t[i].hovered && (this.hoveredId = t[i].id);
            t.forEach(function(t) {
                this.showPlate(t, e)
            }.bind(this))
        }, c.prototype.endDraw = function() {
            var t, e, i = this;
            for (t in this.tooltips) this.tooltips.hasOwnProperty(t) && (e = this.tooltips[t], e.toggleVisibility(), i.hoveredId && e.plateData.id !== i.hoveredId && !e.plateData.pinned && (e.remove(), delete this.tooltips[t]))
        }, c.prototype.removeAll = function() {
            var t, e;
            for (t in this.tooltips) this.tooltips.hasOwnProperty(t) && (e = this.tooltips[t], e.remove());
            this.tooltips = {}
        }, c.prototype.removeTooltip = function(t) {
            delete this.tooltips[t]
        }, c.prototype._createTooltip = function() {
            return new h(this, this.tooltipFactory())
        }, h.prototype._drawPlate = function(t, e) {
            var i = this;
            this.visible = !0, this._tooltip.setSource(this.renderer.source), this._tooltip.showPlate(t, e), t.hovered || t.pinned || this._tooltip.hide(function() {
                i.renderer.removeTooltip(t.id)
            })
        }, h.prototype.remove = function() {
            this._tooltip._removeLayout()
        }, h.prototype.toggleVisibility = function() {
            this._tooltip._toggleLayout(this.visible), this.visible = !1
        }, e.BarsMarksContainer = r, e.BarsMarksContainerRenderer = a, e.BarMarkTooltip = l
    }).call(e, i(55), i(50), i(40))
}, function(t, e, i) {
    (function(e) {
        "use strict";
        var i = function() {
            var t = {},
                i = {},
                n = [];
            return t.unsubscribe = function(t, e, n) {
                i[t].unsubscribe(n, e)
            }, t.on = function(e, i, n) {
                return t.subscribe(e, i, n)
            }, t.subscribe = function(t, n, o) {
                i.hasOwnProperty(t) || (i[t] = new e), i[t].subscribe(o, n)
            }, t.subscribeToAll = function(t) {
                n.push(t)
            }, t.emit = function(t) {
                var o = Array.prototype.slice.call(arguments);
                n.forEach(function(t) {
                    t.apply(null, o)
                }), i.hasOwnProperty(t) && (o = o.slice(1), e.prototype.fire.apply(i[t], o))
            }, t
        }();
        TradingView.GlobalEventsStorage = i, t.exports = i
    }).call(e, i(50))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t) {
            var i, o, r = TVSettings.getValue("PublishedChartsTimeline.filter", "all");
            is_authenticated || (r = n.FILTER_NONE), i = new e({
                filter: r
            }), s.call(this, t, i), this._currentRange = null, this._properties.visible.listeners().subscribe(this, function(t) {
                this._getData(this._currentRange)
            }), this._properties.filter.listeners().subscribe(this, function(t) {
                TVSettings.setValue("PublishedChartsTimeline.filter", t.value()), this.clearMarks(), this._getData(this._currentRange)
            }), o = t._undoModel._chartWidget, this._containsData = o._containsData, this._containsData && this._properties.visible.setValue(!0), this.setUserEditEnabled(!1)
        }

        function o(t) {
            l.call(this)
        }
        var r = i(310),
            s = r.BarsMarksContainer,
            a = r.BarsMarksContainerRenderer,
            l = r.BarMarkTooltip,
            c = i(313),
            h = i(51),
            d = i(314);
        n.FILTER_NONE = "all", n.FILTER_FOLLOWING = "following", n.FILTER_PRIVATE = "private", inherit(n, s), n.prototype._initialize = function(t) {
            c && (c.on("ideas", $.proxy(this, "_onMessage")), c.on("ideas.post", $.proxy(this, "_onMessage")))
        }, n.prototype._constructor = "PublishedChartsTimeline", n.prototype._plateViewData = function(t) {
            return {
                img: t.avatar,
                title: t.title,
                username: t.username,
                suggested: t.is_hot,
                mine: null != window.user ? t.user__id === window.user.id : !1,
                "public": t.is_public
            }
        }, n.prototype.showIdea = function(t, e) {
            var i, n, o, r, s = this._marks[t],
                a = this;
            return s ? (TradingView.trackEvent("GUI", "View published idea"), e && TradingView.trackEvent("GUI", "Ideas navigation arrow"), TradingView.onWidget() || this._containsData ? (i = s.published_chart_url || "/v/" + s.image_url + "/", "battle" === h() && (i = "https://www.tradingview.com" + i), void window.open(i)) : (n = this.filterDisplayedPlates($.extend([], this._marks)).sort(TradingView.sortMultipleFunction({
                name: "tickmark",
                fn: this._getIndex.bind(this)
            }, {
                name: "direction",
                fn: function(t) {
                    switch (this._layout(t)) {
                        default:
                        case "up":
                            return 0;
                        case "down":
                            return 1
                    }
                }.bind(this)
            }, "views_count")), o = n.indexOf(s), r = new d.ChartPage(s.image_url, s.name, s.published_chart_url, s.short_name), r.onOpen().subscribe(this, function() {
                var t = $(".fancybox-wrap");
                n[o - 1] && $('<a href="#" class="fancy-box-arrow left"><span>&lt;</span></a>').click(function(t) {
                    a.showIdea(n[o - 1].id, !0), t.preventDefault()
                }).prependTo(t), n[o + 1] && $('<a href="#" class="fancy-box-arrow right"><span>&gt;</span></a>').click(function(t) {
                    a.showIdea(n[o + 1].id, !0), t.preventDefault()
                }).appendTo(t)
            }), void TradingView.historyManager.push(r))) : void TradingView.logDebugChart("PublishedChartsTimeline.showIdea: unexpected published chart id")
        }, n.prototype.onClicked = function() {
            this.showIdea(this._model.lastHittestData().id)
        }, n.prototype.state = function(t) {
            var e = {
                type: "BarsMarksContainer",
                id: this.id(),
                zorder: this._zOrder,
                pinnedTooltips: this.pinnedTooltips
            };
            return t && (e.marks = this.getPublishedPlates()), e
        }, n.prototype.asyncState = function(t) {
            var e = $.Deferred(),
                i = this;
            return !this._properties.visible.value() && t ? this._getData(this._currentRange, !0).then(function() {
                e.resolve(i.state(t))
            }) : e.resolve(i.state(t)), e.promise()
        }, n.prototype.restoreData = function(t, e) {
            null != this.pinnedTooltips && (this.pinnedTooltips = t.pinnedTooltips), e && null != t.marks && (this._marks = t.marks)
        }, n.prototype._getData = function(t, e) {
            var i, n, o, r, s = this._model.mainSeries().properties(),
                a = this._model.mainSeries().symbolInfo();
            return this._currentRange = t, a && (this._properties.visible.value() || e) ? (i = a.base_name.length > 1 ? a.base_name : [a.pro_name], n = this.roundRange(this._rangeDifference(t)), i = TradingView.uniq(i), i = i.sort(function(t, e) {
                return t - e
            }), o = {
                interval: s.interval.value(),
                legs: JSON.stringify(i),
                startTickmark: n.start,
                endTickmark: n.end,
                filter: this._properties.filter.value()
            }, r = $.ajax("/charttimeline/", {
                type: "POST",
                data: o,
                dataType: "json"
            }).done(function(e) {
                e.forEach(function(t) {
                    this._marks[t.id] = t
                }, this), this._loadedRange = this._rangeUnion(t, this._loadedRange);
                var i = this._requests.indexOf(r);
                ~i && this._requests.splice(i, 1), this.onNeedRepaint.fire()
            }.bind(this)), this._requests.push(r), r) : void 0
        }, n.prototype._onMessage = function(t) {
            var e, i, n, o;
            this._containsData || (e = this._model.mainSeries(), i = e.symbolInfo(), n = i && i.base_name, n && (o = e.properties(), t.interval === o.interval.value() && ~n.indexOf(t.pro_symbol) && (this._marks[t.id] = t, this.onNeedRepaint.fire())))
        }, n.prototype._createTooltip = function() {
            return new o
        }, n.prototype.updateDotData = function(t, e) {
            return e.mine = t.mine, e["public"] = t["public"], e.direction = t.direction, e
        }, n.prototype.updatePlateData = function(t, e) {
            return e.img = t.img, e.title = t.title, e.username = t.username, e.barWidth = this.barWidth(), e
        }, inherit(o, l), o.prototype._createLayout = function() {
            this._layout = $('<div class="published-charts-tooltip"></div>'), this._layout_avatar = $('<div class="avatar"><img></div>').appendTo(this._layout), this._layout_text = $('<div class="text"></div>').appendTo(this._layout), this._layout_username = $('<div class="username">' + $.t("by username", {
                    username: "<b></b>"
                }) + "</div>").appendTo(this._layout), this._layout_pin = $('<div class="pin"></div>').appendTo(this._layout);
            var t = this;
            this._layout_pin.click(function() {
                t.plateData.pinned = !t.plateData.pinned, t.source.pinTooltip(t.plateData.id, t.plateData.pinned), t._layout_pin.toggleClass("pinned", t.plateData.pinned)
            }), this._layout_text.click(function() {
                t.source.showIdea(t.plateData.id)
            })
        }, o.prototype._updatePlate = function(t) {
            this.plateData = t, this._layout.removeClass(a.THEMES.join(" ")).addClass(t.themeName), this._layout_avatar.find("img").attr("src", t.img), this._layout_avatar.find("img").attr("alt", t.username), this._layout_text.text(t.title), this._layout_username.find("b").text(t.username), this._layout_pin.toggleClass("pinned", t.pinned)
        }, t.exports = n
    }).call(e, i(55))
}, function(t, e, i) {
    "use strict";
    var n = i(51),
        o = function() {
            var t = null,
                e = {},
                i = {},
                o = [],
                r = null,
                s = "multiplexer-",
                a = "pushStreamMultiplexer.",
                l = PushStream.CLOSED,
                c = function() {},
                h = {
                    _codeParams: function(t) {
                        return t = Array.prototype.slice.call(t), t.push((new Date).getTime()), JSON.stringify(t)
                    },
                    _decodeParams: function(t) {
                        var e = JSON.parse(t);
                        return e.pop(), e
                    },
                    guid: TradingView.guid(),
                    _init: function() {
                        c("init on: ", this.guid), this._needInstantiating() ? (c("_instantiatePushStream from init"), this._instantiatePushStream()) : l = parseInt(TVXWindowEvents.current(h._xEventConnectionStatus), 10)
                    },
                    _requestURL: "/message-pipe",
                    _instantiatePushStream: function(e) {
                        var i, o, r;
                        this._setMark(), i = "", o = window.navigator.userAgent.match(/(iPad|iPhone|iPod touch);.*CPU.*AppleWebKit/i), n.isLocal() && (i = "192.168.2.163"), n.isProd() && (i = "www.tradingview.com"), r = "eventsource|websocket|stream", o ? r = "websocket|eventsource|stream" : window.EventSource || (r = window.WebSocket && "__addTask" in window.WebSocket ? "stream" : "websocket|stream"), t = new PushStream({
                            host: i,
                            port: n.isLocal() ? 80 : document.location.port,
                            useSSL: n.isLocal() ? !1 : "https:" === document.location.protocol,
                            urlPrefixLongpolling: this._requestURL,
                            urlPrefixEventsource: this._requestURL + "-es",
                            urlPrefixWebsocket: this._requestURL + "-ws",
                            urlPrefixStream: this._requestURL + "-stream",
                            modes: r,
                            longPollingByHeaders: !1,
                            longPollingTagArgument: "tag",
                            longPollingTimeArgument: "time"
                        }), t.onmessage = $.proxy(this, "_dispatchMessage"), t.onstatuschange = $.proxy(this, "_dispatchStatusChange"), this.on("pushstream_set_user_channel", function(t) {
                            this._setUserChannel(t)
                        }.bind(this)), this._connectChannels(), c("instantiate on: ", this.guid)
                    },
                    _destructPushStream: function() {
                        var e = t;
                        t = null, e.disconnect(), e.onmessage = null, l = parseInt(TVXWindowEvents.current(h._xEventConnectionStatus), 10), this._dispatchStatusChangeFromOther(l)
                    },
                    _activityTimeout: 5e3,
                    _delayTimeout: 2e4,
                    _pulseActivity: function() {
                        this.ownPushStream() ? this._lostOwn() ? (c("lost own: ", this.guid), TradingView.trackEvent("PushstreamReconnect", window.user && window.user.username || "Guest", navigator.userAgent), this._destructPushStream()) : this._setMark() : this._needInstantiating() && (c("_instantiatePushStream from _pulseActivity"), this._instantiatePushStream())
                    },
                    _markName: a + "mark",
                    _lostOwn: function() {
                        var t, e = TVLocalStorage.getItem(this._markName);
                        return e ? (e = this._decodeParams(e), t = e[0], t !== this.guid) : !1
                    },
                    _getMark: function() {
                        return this._decodeParams(TVLocalStorage.getItem(this._markName))
                    },
                    _setMark: function() {
                        TVLocalStorage.setItem(this._markName, this._codeParams([this.guid, (new Date).getTime()]))
                    },
                    _unsetMark: function() {
                        TVLocalStorage.setItem(this._markName, "")
                    },
                    _needInstantiating: function() {
                        var t, e = TVLocalStorage.getItem(this._markName);
                        return e ? (e = this._decodeParams(e), t = e[1], (new Date).getTime() - t > this._delayTimeout) : !0
                    },
                    _onRequestRecreate: function(t) {
                        if (!this.ownPushStream() && (c("recreate received on: ", this.guid), this._needInstantiating())) {
                            var e = this._decodeParams(t)[0];
                            this._instantiatePushStream(e)
                        }
                    },
                    _onUnload: function() {
                        this.ownPushStream() && (this._unsetMark(), this._sendRecreateRequest())
                    },
                    _getChannels: function() {
                        var t, e = this.pushStream(),
                            i = [];
                        for (t in e.channels) i.push(t);
                        return i
                    },
                    _channelsName: a + "channels",
                    _getChannelsFromStorage: function() {
                        var t = TVLocalStorage.getItem(this._channelsName);
                        return t ? JSON.parse(t) : []
                    },
                    getChannels: function() {
                        return this.ownPushStream() ? this._getChannels() : this._getChannelsFromStorage()
                    },
                    _storeChannels: function() {
                        TVLocalStorage.setItem(this._channelsName, JSON.stringify(this._getChannels()))
                    },
                    _sendRecreateRequest: function() {
                        var t = this._getChannels();
                        TVXWindowEvents.emit(this._xEventRecreate, this._codeParams([t]))
                    },
                    ownPushStream: function() {
                        return !!t
                    },
                    pushStream: function() {
                        if (!this.ownPushStream()) throw Error("Not own PushStream");
                        return t
                    },
                    isConnected: function() {
                        return l > 0
                    },
                    status: function() {
                        return l || PushStream.CLOSED
                    },
                    _userChannel: function(t) {
                        return "private_" + t
                    },
                    userChannel: function() {
                        if (!r) throw Error("No user channel");
                        return this._userChannel(r)
                    },
                    _xEventRecreate: s + "recreate",
                    _xEventSend: s + "send",
                    _xEventChannel: s + "channel",
                    _xEventRequiredChannels: s + "requirech",
                    _xEventConnectionStatus: s + "connectionStatus",
                    _xEventReconnectCommand: s + "reconnectCommand",
                    _addChannel: function(e) {
                        if (!(e in t.channels)) {
                            var i = this.isConnected();
                            i && (c("was connected when adding channel"), t.disconnect()), t.addChannel(e), i && t.connect(), this._storeChannels()
                        }
                    },
                    addChannel: function(t) {
                        this.ownPushStream() ? this._addChannel(t) : TVXWindowEvents.emit(this._xEventChannel, t)
                    },
                    _addChannelFromOther: function(t) {
                        this.ownPushStream() && this._addChannel(t)
                    },
                    _removeChannel: function(e) {
                        if (e in t.channels) {
                            var i = this.isConnected();
                            i && (c("was connected when removing channel"), t.disconnect()), t.removeChannel(e), i && t.connect(), this._storeChannels()
                        }
                    },
                    _connectChannels: function() {
                        t.addChannel("public"), "is_authenticated" in window ? this._connectUserChannelInitial(!0) : loginStateChange.subscribe(this, this._connectUserChannelInitial), t.connect()
                    },
                    _connectUserChannelInitial: function(e) {
                        e && (is_authenticated ? (r = user.private_channel, t.addChannel("private_" + user.private_channel)) : r = null)
                    },
                    _changeLoginState: function(t) {
                        t || (is_authenticated ? (r = user.private_channel, this.ownPushStream() && this._addChannel(this.userChannel())) : (this.ownPushStream() && this._removeChannel(this.userChannel()), r = null))
                    },
                    _setUserChannel: function(t) {
                        t !== r && (this.ownPushStream() && r && this._removeChannel(this.userChannel()), r = t, this.ownPushStream() && r && this._addChannel(this.userChannel()))
                    },
                    _dispatchStatusChange: function(t) {
                        c("_dispatchStatusChange:" + t), this._dispatchStatusChangeToOthers(t), this._dispatchStatusChangeToSelf(t)
                    },
                    _dispatchStatusChangeToSelf: function(t) {
                        l = parseInt(t, 10), c("_dispatchStatusChangeToSelf:" + t), o.forEach(function(t) {
                            t(l)
                        })
                    },
                    _dispatchStatusChangeFromOther: function(t) {
                        c("_dispatchStatusChangeFromOther:" + t + ", ownPushStream:" + this.ownPushStream()), this.ownPushStream() || this._dispatchStatusChangeToSelf(t)
                    },
                    _dispatchStatusChangeToOthers: function(t) {
                        this.ownPushStream() && TVXWindowEvents.emit(this._xEventConnectionStatus, t)
                    },
                    _dispatchMessage: function(t, e, i) {
                        this._dispatchMessageToOthers(t, e, i), this._dispatchMessageToSelf(t, e, i, !1)
                    },
                    _dispatchMessageToSelf: function(t, e, i, n) {
                        i = t.channel, t = t.content, this._emit(t, e, i, n), c("Dispatch message to self:", i, t)
                    },
                    _dispatchMessageToOthers: function(t, e, i) {
                        var n = [t, e, i, (new Date).getTime()];
                        TVXWindowEvents.emit(this._xEventSend, this._codeParams(n))
                    },
                    _dispatchMessageFromOther: function(t) {
                        var e, i, n, o;
                        this.ownPushStream() || (e = this._decodeParams(t), i = e[0], n = e[1], o = e[2], this._dispatchMessageToSelf(i, n, o, !0))
                    },
                    _isSpecialChannel: function(t) {
                        return /\*/.test(t)
                    },
                    _emit: function(t, n, o, r) {
                        function s(e) {
                            e.call(this, t, n, o, r)
                        }
                        var a, l;
                        e[o] && e[o].forEach(s, this);
                        for (a in i) l = "^" + a.replace(/\*/g, ".*?") + "$", RegExp(l).test(o) && i[a].forEach(s, this)
                    },
                    on: function(t, n) {
                        var o = this._isSpecialChannel(t) ? i : e;
                        o[t] || (o[t] = []), o[t].push(n)
                    },
                    off: function(t, n) {
                        var o, r = this._isSpecialChannel(t) ? i : e;
                        switch (arguments.length) {
                            case 0:
                                e = {}, i = {};
                                break;
                            case 1:
                                r[t] && delete r[t];
                                break;
                            default:
                                r[t] && (o = r[t].indexOf(n), ~o && r[t].splice(o, 1))
                        }
                    },
                    onStatus: function(t) {
                        o.push(t), setTimeout(function() {
                            t(l)
                        }, 0)
                    },
                    offStatus: function(t) {
                        var e = o.indexOf(t); - 1 !== e && o.slice(e, 1)
                    },
                    forceConnect: function() {
                        this.ownPushStream() ? (delete this._pushStream, this._instantiatePushStream()) : TVXWindowEvents.emit(this._xEventReconnectCommand, {})
                    },
                    _dispatchReconnectCommandFromOther: function() {
                        this.ownPushStream() && this.forceConnect()
                    }
                };
            return h._init(), $(window).on("unload", $.proxy(h, "_onUnload")), TVXWindowEvents.on(h._xEventRecreate, $.proxy(h, "_onRequestRecreate")), TVXWindowEvents.on(h._xEventSend, $.proxy(h, "_dispatchMessageFromOther")), TVXWindowEvents.on(h._xEventChannel, $.proxy(h, "_addChannelFromOther")), TVXWindowEvents.on(h._xEventConnectionStatus, $.proxy(h, "_dispatchStatusChangeFromOther")), TVXWindowEvents.on(h._xEventReconnectCommand, $.proxy(h, "_dispatchReconnectCommandFromOther")), loginStateChange.subscribe(h, h._changeLoginState), setInterval($.proxy(h, "_pulseActivity"), h._activityTimeout), h._pulseActivity(), h
        }();
    TradingView.pushStreamMultiplexer = o, t.exports = o
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n() {
            History.options.disableSuid = !0, this.history = window.History, this._activePage = null, this.history.Adapter.bind(window, "statechange", function() {
                var t = this.history.getState(),
                    e = this.pageList[t.data.pageIndex];
                e !== this._activePage && (this._activePage && this.closePage(this._activePage, !0), e && this.openPage(e))
            }.bind(this));
            var t = new n.BasePage;
            this.push(t, !0), $(window).on("hashchange", function() {
                var t = this._activePage || this.pageList[0];
                t instanceof n.BasePage && t.replaceUrl(location.href)
            }.bind(this))
        }
        var o = i(315).ideaDialogs;
        n.prototype.pageList = [], n.prototype.pushBasePage = function() {
            this.pushHistoryState(this.pageList[0])
        }, n.prototype.push = function(t, e) {
            this.pageList.push(t), t.index = this.pageList.length - 1, e ? this.replaceHistoryState(t) : this.pushHistoryState(t)
        }, n.prototype.closePage = function(t, e) {
            this._activePage = null, t.pageVisible && t.close(!!e), e || this.pushBasePage()
        }, n.prototype.openPage = function(t) {
            this._activePage = t, t.onHistoryData().subscribe(this, this.replaceHistoryState.bind(this)), t.show(), t.onClose().subscribe(this, function() {
                this._activePage === t && this.closePage(t)
            }.bind(this))
        }, n.prototype.pushHistoryState = function(t) {
            var e = t.getHistoryData();
            try {
                this.history.pushState($.extend({}, e.data, {
                    pageIndex: t.index
                }), e.title, e.url)
            } catch (i) {
                console.info("History.pushState failed")
            }
        }, n.prototype.replaceHistoryState = function(t) {
            var e = t.getHistoryData();
            try {
                this.history.replaceState($.extend({}, e.data, {
                    pageIndex: t.index
                }), e.title, e.url)
            } catch (i) {
                console.info("History.replaceState failed")
            }
        }, n.Page = function() {
            this._onClose = new e, this._onOpen = new e, this._onHistoryData = new e
        }, n.Page.prototype.show = function(t) {
            var e = window.navigator.userAgent.match(/(iPad|iPhone|iPod touch);.*CPU.*AppleWebKit/i);
            this.pageVisible = !0, $.fancybox.open($.extend({
                width: "90%",
                minWidth: 720,
                padding: 10,
                margin: 20,
                autoSize: !1,
                autoWidth: !1,
                autoHeight: !0,
                fitToView: !1,
                live: !1,
                closeBtn: !0,
                forceHeightAuto: !0,
                tpl: {
                    closeBtn: '<div class="fancybox-close-outer"><a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a></div>'
                },
                afterClose: function() {
                    this.pageVisible = !1, this._onClose.fire()
                }.bind(this),
                beforeShow: function() {
                    this._onOpen.fire(), e && $(".fancybox-overlay").addClass("mobile-safari")
                }.bind(this),
                afterShow: function() {
                    var t = TVDialogs.dialogs.length + 110;
                    $(".fancybox-overlay").css("z-index", t)
                },
                openEffect: "none",
                closeEffect: "none",
                helpers: {
                    overlay: {
                        showEarly: !1,
                        locked: !0
                    }
                }
            }, t))
        }, n.Page.prototype.close = function(t) {
            $.fancybox.close(t)
        }, n.Page.prototype.onClose = function(t) {
            return this._onClose
        }, n.Page.prototype.onOpen = function(t) {
            return this._onOpen
        }, n.Page.prototype.getHistoryData = function(t) {
            if (!this.historyData) throw Error("History data not implemented");
            return this.historyData
        }, n.Page.prototype.onHistoryData = function() {
            return this._onHistoryData
        }, n.Page.prototype.callSuper = function(t) {
            this.superclass.prototype[t].apply(this, Array.prototype.slice.call(arguments, 1))
        }, n.Page.prototype.replaceUrl = function(t) {
            this.historyData.url = t
        }, n.BasePage = function() {
            this.superclass.call(this), this.historyData = {
                title: document.title,
                url: window.location.href + "",
                data: {}
            }
        }, inherit(n.BasePage, n.Page), n.BasePage.prototype.show = function() {
            this.pageVisible = !0
        }, n.BasePage.prototype.close = function() {
            this.pageVisible = !1
        }, n.ChartPage = function(t, e, i, n) {
            this.superclass.call(this), this.data = {
                chart: t,
                published_chart_url: i
            };
            var o = n || TradingView.parsePublishedChartUrl(i).symbol;
            this.historyData = {
                data: {},
                url: i || "/v/" + t + "/",
                title: e + " - " + (o ? o + " " : "") + "TradingView"
            }
        }, inherit(n.ChartPage, n.Page), n.ChartPage.prototype.show = function() {
            function t(t) {
                var n = $(window).height(),
                    o = Math.max(Math.round(n) - 98 - 250, Math.round(.65 * n));
                (e !== o || t) && (e = o, $(".chart-place").last().css("height", o), i && setTimeout(function() {
                    i.updateLayout()
                }, 0))
            }
            var e, i;
            this.callSuper("show", {
                href: (this.data.published_chart_url || "/v/" + this.data.chart + "/") + "?popup=true",
                type: "ajax",
                ajax: {
                    type: "get"
                },
                wrapCSS: " modal-page-chart",
                padding: 0
            }), t(), window.chartWidgetCollectionWaiter = function(t) {
                i = t
            }, this._onOpen.subscribe(this, function() {
                t(!0), $(window).on("resize.popupChartHeight", t)
            }), this._onClose.subscribe(this, function() {
                i && i.destroy(), i = void 0, o.clear(), $(window).off("resize.popupChartHeight", t)
            })
        }, TradingView.historyManager = new n, t.exports = n
    }).call(e, i(50))
}, function(t, e, i) {
    (function(t) {
        "use strict";
        e.updateIdeaDialog = function(e, n) {
            function o() {
                c.show(), TVDialogs.positionDialog(c, {
                    considerScroll: !0
                }), d.find("textarea").focus()
            }

            function r() {
                TVDialogs.destroy(l)
            }

            function s() {
                var t, i, o, s;
                if (!_) {
                    if (t = u.val(), i = d.find(".update-description textarea").val().trim(), o = f.filter(function(e) {
                            return e.id === t
                        })[0], "comment" === o.type && i.length < 1) return void TVDialogs.showError($.t('Please fill the "Description" field and then click "Update idea".'), c);
                    if ("en" === window.language && !TradingView.isLatin(i)) return void TVDialogs.showError($.t("Only English language is allowed. You can change language settings and try again."), c);
                    s = {
                        chart_id: e,
                        type: o.type,
                        value: o.value,
                        description: i
                    }, n.onSubmit && n.onSubmit(), _ = !0, $.post("/idea-update/", s, function(t) {
                        t.error ? TVDialogs.showError(TradingView.strip_tags(t.error), c) : (n.callback && n.callback(t.update_html), r())
                    }).always(function() {
                        _ = !1, n.postSubmit && n.postSubmit()
                    })
                }
            }

            function a() {
                return t.render('<div class="main"><form><div class="caption"><span>' + $.t("Select update type") + '</span></div><select class="js-update-selection">{{#updates}}<option value="{{id}}">{{name}}</option>{{/updates}}</select><div class="caption"><span>' + $.t("Description") + '</span></div><div class="update-description"><textarea rows="7" name="description" placeholder="' + $.t("Describe your update...") + '"></textarea></div><div class="buttons"><input class="_tv-button cancel" type="button" value="' + $.t("Cancel") + '"/><input class="_tv-button ok" type="submit" value="' + $.t("Update idea") + '"/></div></form></div>', {
                    updates: f
                })
            }
            var l, c, h, d, u, p, f = [{
                    type: "comment",
                    name: $.t("Comment"),
                    id: "comment"
                }, {
                    type: "close_position",
                    name: $.t("Trade closed: target reached"),
                    value: "target_reached",
                    id: "target"
                }, {
                    type: "close_position",
                    name: $.t("Trade closed: stop reached"),
                    value: "stop_reached",
                    id: "stop"
                }, {
                    type: "trading",
                    name: $.t("Trade closed manually"),
                    value: "closed_manually",
                    id: "trading_closed"
                }, {
                    type: "trading",
                    name: $.t("Trade active"),
                    value: "active",
                    id: "trading_active"
                }, {
                    type: "trading",
                    name: $.t("Order cancelled"),
                    value: "cancelled",
                    id: "trading_cancelled"
                }],
                _ = !1;
            return n = n || {}, l = "update-idea-status", c = TVDialogs.createDialog(l, {
                addClass: "update-idea-dialog",
                hideTitle: !0
            }), c.css({
                width: "600px"
            }), i.add(l), h = c.find("._tv-dialog-title"), i.getDraggableEmptyTitle().prependTo(h), c.draggable(TVDialogs._constrainDraggableOptionsIfNeeded({
                handle: h
            })), d = c.find("._tv-dialog-content"), d.html(a()), u = d.find(".js-update-selection"), p = d.find("textarea"), u.selectbox({
                speed: 100,
                classHolder: "tv-select-container dialog",
                onChange: function() {
                    setTimeout(function() {
                        p.focus()
                    }, 0)
                }
            }), p.on("keyup", function(t) {
                t.ctrlKey && 13 === t.keyCode && s()
            }), d.find("._tv-button.cancel").on("click", function(t) {
                t.preventDefault(), r()
            }), d.find("form").submit(function(t) {
                t.preventDefault(), s()
            }), TVDialogs.applyHandlers(c, {
                doNotCloseOnBgClickIfShadowbox: !0,
                doNotCloseOnBgClick: !0,
                beforeDestroy: function() {
                    i.remove(l), n.beforeDestroy && n.beforeDestroy()
                }
            }), o(), c
        };
        var i = {
            dialogs: [],
            add: function(t) {
                i.dialogs.push(t)
            },
            remove: function(t) {
                i.dialogs = $.grep(i.dialogs, function(e) {
                    return e !== t
                })
            },
            clear: function() {
                i.dialogs.forEach(function(t) {
                    TVDialogs.destroy(t)
                })
            },
            getDraggableEmptyTitle: function() {
                return $(document.createElement("div")).css({
                    height: "30px",
                    "margin-bottom": "-10px",
                    position: "relative"
                })
            }
        };
        e.ideaDialogs = i
    }).call(e, i(86))
}, function(t, e, i) {
    "use strict";

    function n(t) {
        s.call(this, t);
        var e = this;
        l.hideMarksOnBars().subscribe(this, function() {
            e._properties.visible.setValue(!l.hideMarksOnBars().value())
        })
    }

    function o(t) {
        a.call(this)
    }
    var r = i(310),
        s = r.BarsMarksContainer,
        a = r.BarMarkTooltip,
        l = i(82);
    inherit(n, s), n.prototype._initialize = function(t) {
        this._properties.visible.setValue(!0)
    }, n.prototype.userEditEnabled = function() {
        return !1
    }, n.prototype._constructor = "UserDefinedBarsMarks", n.prototype._plateViewData = function(t) {
        var e = {
            text: t.text
        };
        return "object" == typeof t.color && (e.theme = "user_defined_theme", e.overridedTheme = {}, e.overridedTheme.border = t.color.border, e.overridedTheme.background = t.color.background), e
    }, n.prototype.onClicked = function() {
        var t = this._model.lastHittestData().id;
        this._marks[t].onClicked()
    }, n.prototype.clearMarks = function() {
        s.prototype.clearMarks.call(this), this.onNeedRepaint.fire()
    }, n.prototype._getData = function(t) {
        var e, i, n, o = this._model.mainSeries().symbolInfo();
        o && (e = this.roundRange(this._rangeDifference(t)), i = this, n = this._model.mainSeries().properties().interval.value(), ChartApiInstance.getMarks(o, e.start, e.end, function(e) {
            e.forEach(function(t) {
                i._marks[t.id] = t
            }, i), i._loadedRange = i._rangeUnion(t, i._loadedRange), i.onNeedRepaint.fire()
        }, n))
    }, n.prototype._createTooltip = function() {
        return new o
    }, n.prototype.updatePlateData = function(t, e) {
        return e.barWidth = this.barWidth(), e.text = t.text, e.tooltipMargin = -1 * Math.max(t.minSize / 2, .4 * this.barWidth()), e
    }, n.prototype.hasContextMenu = function() {
        return !1
    }, inherit(o, a), o.prototype._createLayout = function() {
        this._layout = $('<div class="bar-mark-tooltip"></div>'), this._layout_text = $('<div class="text"></div>').appendTo(this._layout)
    }, o.prototype._updatePlate = function(t) {
        this._currentId = t.id, this._layout.css("border-color", t.theme.border), this._layout.css("margin-top", t.tooltipMargin + "px"), this._layout_text.html(t.text), this._layout.append(this._layout_text)
    }, t.exports = n
}, function(t, e, i) {
    (function(e, i) {
        "use strict";
        var n = e.Collection.extend({
            initialize: function(t) {
                if (this._observableCollection = t.observableCollection, this._validator = t.validator, this._syncEvents = i.isArray(t.syncEvents) ? t.syncEvents : [], this._syncEvents.push("reset"), this._syncEvents = i.uniq(this._syncEvents), !this._observableCollection) return void TradingView.logError("[CollectionObserver] requers 'observableCollection' option");
                if (!(this._observableCollection instanceof e.Collection)) return void TradingView.logError("[CollectionObserver] 'observableCollection' need to be Backbone.Collection");
                this.comparator || "function" != typeof this._observableCollection.comparator || (this.comparator = this._observableCollection.comparator), this._observableCollection.on("add", this.onAdd, this), this._observableCollection.on("remove", this.remove, this);
                for (var n = this._syncEvents.length - 1; n >= 0; n--) this._observableCollection.on(this._syncEvents[n], this.syncCollections, this)
            },
            syncCollections: function() {
                var t = this._validator;
                t && this.reset(i.filter(this._observableCollection.models, t))
            },
            onAdd: function(t, e) {
                var i = this._validator;
                i && !i(t) || this.add.apply(this, arguments)
            },
            destroy: function() {
                this._observableCollection.off("add", this.onAdd, this), this._observableCollection.off("remove", this.remove, this);
                for (var t = this._syncEvents.length - 1; t >= 0; t--) this._observableCollection.off(this._syncEvents[t], this.syncCollections, this)
            }
        });
        t.exports = n
    }).call(e, i(7), i(8))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, i, n) {
            r.call(this, t), this._origState = i, this._title = n;
            var s = {
                visible: !0
            };
            this._properties = new e(s), this._statusView = new o(this, t.properties()), this._status = $.t("compiling..."), this._statusView.setText(this._title + " " + this._status), this._formatter = new a(Math.pow(10, 2)), this._failed = !1
        }
        var o = i(135),
            r = i(80).PriceDataSource,
            s = i(83),
            a = s.PriceFormatter;
        inherit(n, r), n.prototype.properties = function() {
            return this._properties
        }, n.prototype.statusView = function() {
            return this._statusView
        }, n.prototype.state = function(t) {
            return this._origState
        }, n.prototype.setStatus = function(t) {
            this._status = t, this._statusView.setText(this._title + " " + this._status)
        }, n.prototype.formatter = function() {
            return this._formatter
        }, n.prototype.title = function() {
            return this._title
        }, n.prototype.setFailed = function(t) {
            this._failed = t
        }, t.exports = n
    }).call(e, i(55))
}, function(t, e) {
    "use strict";
    $(function() {
        var t = TradingView.isFeatureEnabled("adPackActive");
        t && $(document.documentElement).addClass("sp-active")
    }), TradingView.initChartPopup = function(t) {
        var e, i = "fxcm-mar2-2016",
            n = TradingView.Environment.isProd() ? 6e5 : 1e4,
            o = "chart-ads-popup-disabled-" + i,
            r = "chart-ads-popup-counter-" + i,
            s = +TVLocalStorage.getItem(r),
            a = 2,
            l = {
                forex: {
                    text: "Get Ready for Fed Rates Decision and NFP. Join FXCM's Monthly Trading Contest. Open a Mini Account. Trade Now. Losses can exceed deposited funds.",
                    link: "https://www.fxcm.com/advantages/mini-account/forex-trading-contest/?CMP=SFS-70132000001D6gRAAS&display=forexUS&dclid=CNnBv4yu6ssCFSQfcgodnkQNEg"
                },
                other: !1
            };
        t.model().mainSeries().onSymbolResolved().subscribe(null, function() {
            setTimeout(function() {
                var n, c; + TVLocalStorage.getItem(o) || t.model().mainSeries().quoteData && (n = t.model().mainSeries().quoteData.type, c = n in l ? l[n] : l.other, c && (e = TVDialogs.createDialog(i, {
                    addClass: "popup-fxcm_adv",
                    content: '<div class="message">' + c.text + '</div><div class="actions-block"><IMG SRC="https://ad.doubleclick.net/ddm/trackimp/N39908.2006304TRADINGVIEW/B8161551.121823736;dc_trk_aid=289109913;dc_trk_cid=61882159;salesforce=SFS-701320000011IswAAE;ord=' + Date.now() / 1e3 + ';dc_lat=;dc_rdid=;tag_for_child_directed_treatment=?" BORDER="0" HEIGHT="1" WIDTH="1" ALT=""><a class="no-button">' + $.t("No, thank you") + '</a><a href="' + c.link + '" class="yes-button" rel="nofollow" target="_blank">' + $.t("Read more") + "</a></div>",
                    hideTitle: !0
                }), e.on("click", ".no-button, .yes-button, ._tv-dialog-title-close", function(t) {
                    var n = $(t.target);
                    n.hasClass("yes-button") ? (TradingView.trackEvent("AdPack", "FXCM-Popup-Accept", i), $(document).append('<IMG SRC="https://ad.doubleclick.net/ddm/trackclk/N39908.2006304TRADINGVIEW/B8161551.127898640;dc_trk_aid=300374833;dc_trk_cid=68196767;salesforce=SFS-70132000001D6gRAAS;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=" BORDER="0" HEIGHT="1" WIDTH="1" ALT="">'), TVLocalStorage.setItem(o, 1)) : (TradingView.trackEvent("AdPack", "FXCM-Popup-Decline", i), s++, TVLocalStorage.setItem(r, s), s >= a && TVLocalStorage.setItem(o, 1)), TVDialogs.destroy(i), e = null
                }), TVDialogs.positionDialog(e), TradingView.trackEvent("AdPack", "FXCM-Popup-Show", i)))
            }, n)
        }, !0)
    }
}, function(t, e, i) {
    "use strict";

    function n(t, e, i) {
        this._symbol = t, this.enabled = !0, this._$last = this.findElement(e, "last", ".symbol-last"), this._$change = this.findElement(e, "change", ".symbol-change"), this._$changePercent = this.findElement(e, "changePercent", ".symbol-change-pt"), this._$changeDirection = this.findElement(e, "changeDirection", ".symbol-change-direction"), this._$description = this.findElement(e, "description", ".symbol-description-name"), this._$shortName = this.findElement(e, "short_name", ".symbol-short-name"), this._$industry = this.findElement(e, "industry", ".symbol-industry"), this._$sector = this.findElement(e, "sector", ".symbol-sector"), this._$root = e instanceof $ ? e : $(), this._lastPrice = null, this.options = $.extend({}, this.optionsDefaults, i || {}), setTimeout(this.connect.bind(this), 0)
    }
    var o = i(83),
        r = o.PriceFormatter,
        s = o.PercentageFormatter,
        a = o.PriceColorer;
    n.prototype.optionsDefaults = {
        setStateHook: null,
        noSuchSymbolHook: null,
        downgradeHook: null,
        symbolResolvedHook: null,
        clientName: "quote-ticker",
        dontDyePrice: !1,
        changePercentInBrackets: !1,
        fallingBg: null,
        growingBg: null,
        changeUpFontColor: null,
        changeDownFontColor: null
    }, n.prototype.findElement = function(t, e, i) {
        var n, o = $();
        return t instanceof $ ? (n = t.find(i), n.length && (o = n.eq(0))) : t && t[e] && (o = t[e]), o
    }, n.prototype.quoteSession = null, n.assignQuoteSession = function(t) {
        this.prototype.quoteSession || (this.prototype.quoteSession = t)
    }, n.prototype.connect = function() {
        this.quoteSession.subscribe(this.options.clientName, this._symbol, this.onData.bind(this))
    }, n.prototype.onData = function(t) {
        if (this.enabled) switch (t.status) {
            case "ok":
                this.successData(t);
                break;
            case "permission_denied":
                this.downgradeData(t);
                break;
            case "error":
                this.errorData(t)
        }
    }, n.prototype.successData = function(t) {
        switch (t.values.symbol_status) {
            case "resolved":
                this.options.symbolResolvedHook && this.options.symbolResolvedHook.call(this, t);
            case "realtime":
            case "realtime_data":
            case "realtime_fundamental":
                t.values.last_price && this.setState(t.values, t)
        }
    }, n.prototype.errorData = function(t) {
        this.options.noSuchSymbolHook ? this.options.noSuchSymbolHook.call(this, t) : console.warn("No data for QuoteTicker: ", this._symbol)
    }, n.prototype.downgradeData = function(t) {
        var e = t && t.values && t.values.alternative;
        e ? (this._symbol = e, this.connect(), this.options.downgradeHook && this.options.downgradeHook.call(this, t)) : this.errorData(t)
    }, n.prototype.setState = function(t, e) {
        var i, n, o, l, c, h = new r(t.pricescale || 100, t.minmov || 1, t.fractional, t.minmove2),
            d = new s;
        null != t.last_price && this._$last.text(h.format(t.last_price)), null != t.change && this._$change.text(h.format(t.change, this.options.signPositive)), null != t.change_percent && (i = d.format(t.change_percent, this.options.signPositive), this.options.changePercentInBrackets && (i = "(" + i + ")"), this._$changePercent.text(i)), null != t.change && (this.options.dontDyePrice || (n = {
            up: this.options.changeUpFontColor,
            down: this.options.changeDownFontColor
        }, this._$change.css("color", a.formatSign(t.change, n)), this._$changePercent.css("color", a.formatSign(t.change, n))), this._$changeDirection.removeClass("up").removeClass("down").addClass(t.change > 0 ? "up" : "down")), null != t.short_name && (o = "#" + t.short_name + "-symbol-description", l = $.t(o), c = l === o ? t.description : l, this._$description.text(c).attr("title", c), "QUANDL" === t.exchange && void 0 !== t.short_name.split("/")[1] && (t.short_name = t.short_name.split("/")[1] + ", " + t.short_name.split("/")[0]), this._$shortName.text(t.short_name)), this._lastPrice ? this.highlightChange(t) : null === this._lastPrice && this._$root.addClass("quote-ticker-inited"), this._lastPrice = t.last_price, t.industry && this._$industry.length && this._$industry.text(t.industry + ": "), t.sector && this._$sector.length && this._$sector.text(t.sector), this.options.setStateHook && this.options.setStateHook.call(this, t, e)
    }, n.prototype.highlightChange = function(t) {
        function e() {
            r || s ? o.css("background", "") : r && s || o.removeClass("falling growing")
        }
        var i = this._lastPrice,
            n = t.last_price - i,
            o = this._$last,
            r = this.options.fallingBg,
            s = this.options.growingBg;
        t.last_price !== i && (e(), setTimeout(e, 750), n > 0 ? s ? o.css("background", s) : o.addClass("growing") : 0 > n && (r ? o.css("background", r) : o.addClass("falling")))
    }, n.prototype.disable = function() {
        this.enabled = !1
    }, n.prototype.enable = function() {
        this.enabled = !0
    }, t.exports = n
}, function(t, e, i) {
    (function(e) {
        "use strict";
        var i = TradingView.postMessageWrapper = function() {
            var t, i = {},
                n = {},
                o = {},
                r = 0,
                s = 0,
                a = "TradingView";
            return window.addEventListener && window.addEventListener("message", function(o) {
                var r;
                try {
                    r = JSON.parse(o.data), e.enabled("charting_library_debug_mode") && console.log("PostMessage: incoming message: " + JSON.stringify(r))
                } catch (s) {
                    return
                }
                if (r.provider && r.provider === a)
                    if ("get" === r.type) {
                        if (!n[r.name]) return;
                        n[r.name].forEach(function(e) {
                            "function" == typeof e && e.call(r, r.data, function(e) {
                                var i = {
                                    id: r.id,
                                    type: "on",
                                    name: r.name,
                                    client_id: r.client_id,
                                    data: e,
                                    provider: a
                                };
                                t.postMessage(JSON.stringify(i), "*")
                            })
                        })
                    } else if ("on" === r.type) i[r.client_id] && i[r.client_id][r.id] && (i[r.client_id][r.id].call(r, r.data), delete i[r.client_id][r.id]);
                    else if ("post" === r.type) {
                        if (!n[r.name]) return;
                        n[r.name].forEach(function(t) {
                            "function" == typeof t && t.call(r, r.data, function() {})
                        })
                    }
            }),
                function(e, l) {
                    i[l] = {}, o[l] = e, t = e;
                    var c = "";
                    return {
                        on: function(t, e, i) {
                            n[t] && i || (n[t] = []), n[t].push(e)
                        },
                        get: function(t, e, n) {
                            var s = {
                                id: r++,
                                type: "get",
                                name: t,
                                client_id: l,
                                data: e,
                                provider: a
                            };
                            i[l][s.id] = n, o[l].postMessage(JSON.stringify(s), "*")
                        },
                        post: function(t, e, i) {
                            var n = {
                                id: s++,
                                type: "post",
                                name: e,
                                client_id: c,
                                data: i,
                                provider: a
                            };
                            t && "function" == typeof t.postMessage && t.postMessage(JSON.stringify(n), "*")
                        },
                        setClientId: function(t) {
                            c = t
                        }
                    }
                }
        }();
        t.exports = i
    }).call(e, i(3))
}, function(t, e) {
    "use strict";
    var i = function() {
        if (window.localStorage && "setItem" in window.localStorage) try {
            this.isAvailable = !0, this.localStorage = window.localStorage, this.localStorage.setItem("tvlocalstorage.available", "true")
        } catch (t) {
            delete this.isAvailable, delete this.localStorage
        }
        this._updateLength()
    };
    i.prototype.length = 0, i.prototype.isAvailable = !1, i.prototype.localStorage = {
        "tvlocalstorage.available": "false"
    }, i.prototype._updateLength = function() {
        var t, e;
        if (this.isAvailable) this.length = this.localStorage.length;
        else {
            t = 0;
            for (e in this.localStorage) this.localStorage.hasOwnProperty(e) && t++;
            this.length = t
        }
    }, i.prototype.key = function(t) {
        return this.isAvailable ? this.localStorage.key(t) : this[Object.keys(this.localStorage)[t]]
    }, i.prototype.getItem = function(t) {
        return this.isAvailable ? this.localStorage.getItem(t) : this.localStorage[t]
    }, i.prototype.setItem = function(t, e) {
        this.isAvailable ? this.localStorage.setItem(t, e) : this.localStorage[t] = e, this._updateLength()
    }, i.prototype.removeItem = function(t) {
        this.isAvailable ? this.localStorage.removeItem(t) : delete this.localStorage[t], this._updateLength()
    }, i.prototype.clear = function() {
        this.isAvailable ? this.localStorage.clear() : this.localStorage = {}, this._updateLength()
    }, window.TVLocalStorage = new i, t.exports = window.TVLocalStorage
}, function(t, e, i) {
    (function(t) {
        t.register({
            LineTool5PointsPattern: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M25.3 19L22.5 8H24V4h-4v4h1.3l-4 4h-2.4L12 7.6V4H8v4h1.5L5.7 23H4v4h4v-3.4l6.8-7.6h2.798L23 19.9V23h4v-4zM9 7V5h2v2zM7.003 26H5v-2h2v2zM14 15.4L7.2 23h-.397L10.5 8.102l-.498-.098h1.1l2.898 4.4zm3-.4h-2v-2h2zm4-8V5h2v2zm-3.002 8.102v-2.4l3.698-3.697L24.2 19h-.8zM26 22h-2v-2h2z"/></svg>',
            LineToolABCD: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M21 3v1.975l-9 4.91V9H8v4h1.34L7.648 24H6v4h4v-1.975l9-4.91V22h4v-4h-1.34l1.692-11H25V3zm1 1h2v2h-2zm-1 2.115V7h1.34l-1.692 11h-1.12L12 12.145v-1.12zM9 10h2v2H9zm1.352 3h1.12L19 18.855v1.12l-9 4.91V24H8.66zM20 19h2v2h-2zM7 25h2v2H7z"/></svg>',
            LineToolArc: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M455.1 285.4C310.8 141.1 110.9 106.7 4.2 206l23.2 23.3c.2-.2.5-.4.8-.6l483.7 483.7c-.2.3-.4.5-.6.8l23.2 23.2c99.3-106.8 64.9-306.7-79.4-451zm76.2 400.1L55 209.2c98.3-58.6 256.8-19.5 376.3 100s158.7 278.1 100 376.3z"/></svg>',
            LineToolArrow: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M21 5v3.302l-5.598 2.3 1.7 1.702L9.298 20H6v4h4v-3.298l7.7-7.7 1.5 1.5 2.3-5.4.102-.1L25 9V5zM9 23H7v-2h2zM24 8l-1.9-.002.1-.2-.202.1L22 6h2z"/></svg>',
            LineToolArrowMarkDown: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9" class="text"><path d="M16 27l10-13h-6V6h-8v8H6l10 13zm0-1.5L8 15h5V7h6v8h5l-8 10.5z"/><path d="M16 25.5L8 15h5V7h6v8h5z" opacity=".3"/></svg>',
            LineToolArrowMarkLeft: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9" class="text"><path d="M5 16l13 10v-6h8v-8h-8V6L5 16zm1.5 0L17 8v5h8v6h-8v5L6.5 16z"/><path d="M6.5 16L17 8v5h8v6h-8v5z" opacity=".3"/></svg>',
            LineToolArrowMarkRight: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9" class="text"><path d="M26 16L13 6v6H5v8h8v6l13-10zm-1.5 0L14 24v-5H6v-6h8V8l10.5 8z"/><path d="M24.5 16L14 24v-5H6v-6h8V8z" opacity=".3"/></svg>',
            LineToolArrowMarkUp: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9" class="text"><path d="M15 5L5 18h6v8h8v-8h6L15 5zm0 1.5L23 17h-5v8h-6v-8H7l8-10.5z"/><path d="M15 6.5L23 17h-5v8h-6v-8H7z" opacity=".3"/></svg>',
            LineToolBalloon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9" class="text"><path fill-opacity=".2" d="M139.9 488.7H134c-64.3-2.9-113.9-55.5-113.9-116.9 0-64.3 55.5-116.9 122.7-116.9h309.7c67.2 0 122.7 52.6 122.7 116.9s-55.5 116.9-122.7 116.9H224.6v93.5l-84.7-93.5z"/><path d="M452.5 269.5c58.4 0 108.1 46.7 108.1 102.3s-49.7 102.3-108.1 102.3H210v70.1l-55.5-61.4-8.8-8.8H134c-55.5-2.9-99.3-49.7-99.3-102.3 0-55.5 49.7-102.3 108.1-102.3h309.7m0-29.1H142.8c-76 0-137.3 58.4-137.3 131.5 0 70.1 58.4 125.6 128.6 131.5l105.2 116.9V503.3h213.3c76 0 137.3-58.4 137.3-131.5s-61.4-131.5-137.4-131.5z"/></svg>',
            LineToolBarsPattern: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M17 4v2h-1v11h1v6h1v-6h1V6h-1V4zm8 0v2h-1v11h1v6h1v-6h1V6h-1V4zM4 5v2H3v11h1v6h1v-6h1V7H5V5zm9 0v2h-1v11h1v6h1v-6h1V7h-1V5zM8 7v6H7v11h1v2h1v-2h1V13H9V7zm9 0h1v9h-1zm8 0h1v9h-1zM4 8h1v9H4zm9 0h1v9h-1zm8 0v3h-1v11h1v2h1v-2h1V11h-1V8zm0 4h1v9h-1zM8 14h1v9H8z"/></svg>',
            LineToolBezierCubic: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M23 3v4h1.447c-.458.96-3.4 6.5-10.447 6.5-4.187 0-6.633 2.41-7.938 4.758-1.304 2.35-1.558 4.687-1.558 4.687L5 23H3v4h4v-4H5.504c.018-.15.282-2.186 1.434-4.258C8.133 16.592 10.188 14.5 14 14.5c8.292 0 11.46-7.303 11.46-7.303L25 7h2V3h-4zm1 1h2v2h-2V4zM4 24h2v2H4v-2z"/></svg>',
            LineToolBezierQuadro: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M23 3v1.5c-9.658 0-14.39 4.657-16.576 9.287C4.256 18.377 4.496 22.922 4.5 23H3v4h4v-4H5l.5-.027s-.237-4.39 1.826-8.76C9.39 9.843 13.658 5.5 23 5.5V7h4V3zm1 1h2v2h-2zM4 24h2v2H4z"/></svg>',
            LineToolBrush: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M377.6 283.1s-136.2-10.2-183.8 170.2c-30.6 115.7-177 251.9-177 251.9l10.2 17s224.7-54.5 360.8-139.6c177-112.3 64.7-255.3 64.7-255.3l-74.9-44.2zm44.3-143L374.2 249l122.5 68.1 78.3-88.5-153.1-88.5z"/></svg>',
            LineToolCallout: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9" class="text"><path fill-opacity=".2" d="M179.9 462.6h-42.1c-25.9 0-48.6-22.7-48.6-48.6V284.6c0-25.9 22.7-48.6 48.6-48.6h388.5c25.9 0 48.6 22.7 48.6 48.6v129.5c0 25.9-22.7 48.6-48.6 48.6H264L56.9 605.1l123-142.5z"/><path d="M526.3 252.2c19.4 0 32.4 12.9 32.4 32.4v129.5c0 19.4-12.9 32.4-32.4 32.4H257.6l-9.7 6.5-97.1 64.7 16.2-16.2 45.3-55h-74.5c-19.4 0-32.4-12.9-32.4-32.4V284.6c0-19.4 12.9-32.4 32.4-32.4h388.5m0-32.4H137.8c-35.6 0-64.7 29.1-64.7 64.7V414c0 35.6 29.1 64.7 64.7 64.7h6.5L1.8 640.7H31l233-161.9h259c35.6 0 64.7-29.1 64.7-64.7V284.6c3.3-35.6-25.8-64.8-61.4-64.8z"/></svg>',
            LineToolCircleLines: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M7 4v22h1V4H7zm5 0v22h1V4h-1zm5 0v22h1V4h-1zm5 0v22h1V4h-1z"/></svg>',
            LineToolCypherPattern: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M25.3 19L22.5 8H24V4h-4v4h1.3l-4 4h-2.4L12 7.6V4H8v4h1.5L5.7 23H4v4h4v-3.4l6.8-7.6h2.798L23 19.9V23h4v-4zM9 7V5h2v2zM7.003 26H5v-2h2v2zM14 15.4L7.2 23h-.397L10.5 8.102l-.498-.098h1.1l2.898 4.4zm3-.4h-2v-2h2zm4-8V5h2v2zm-3.002 8.102v-2.4l3.698-3.697L24.2 19h-.8zM26 22h-2v-2h2z"/></svg>',
            LineToolDateAndPriceRange: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M10 4v1h9V4zm4.5 1l-3.387 5H14v5H5v-4H4v9h1v-4h9v9h-4v1h9v-1h-4v-9h4.5v3l5.5-3.5-5.5-3.5v3H15v-5h3.113zM25 15.5V20h1v-9h-1z"/></svg>',
            LineToolDateRange: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M4 10v11h1v-5h15v3l5-3.5-5-3.5v3H5v-5H4zm21 5.5V21h1V10h-1v5.5z"/></svg>',
            LineToolDisjointAngle: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M22 3v2.047L9 10.352V10H5v4h4v-2.566l13-5.307V7h4V3zm1 1h2v2h-2zM6 11h2v2H6zm-1 6v4h4v-.783l13 5.2V28h4v-4h-4v.34l-13-5.2V17zm1 1h2v2H6zm17 7h2v2h-2z"/></svg>',
            LineToolElliottCircle: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M566.9 338.7v-24h24v-24h-72v24h24v119.9h-24v24h72v-24h-24v-95.9zm-407.5 71.9c-26.4 0-47.9 21.6-47.9 47.9s21.6 47.9 47.9 47.9 47.9-21.6 47.9-47.9-21.5-47.9-47.9-47.9zm57.5 86.3l-16.8 16.8 47.9 47.9 16.8-16.8-47.9-47.9zm124.7 47.9l16.8 16.8 119.9-119.9-16.9-16.7-119.8 119.8zm-38.4 9.6c-26.4 0-47.9 21.6-47.9 47.9 0 26.4 21.6 47.9 47.9 47.9s47.9-21.6 47.9-47.9c.1-26.3-21.5-47.9-47.9-47.9zM6 592.8l16.8 16.8 95.9-95.9-16.8-16.8L6 592.8z"/></svg>',
            LineToolElliottCorrection: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M10.943 9.127c-1.294 0-2.347 1.06-2.347 2.35s1.058 2.347 2.347 2.347c1.29 0 2.348-1.058 2.348-2.347 0-1.29-1.052-2.35-2.346-2.35zm14.805.707l-5.873 5.87.824.825 5.875-5.88-.828-.817zM8.125 13.357l-4.7 4.702.823.822 4.7-4.7-.823-.826zm5.637 0l-.823.825 2.346 2.347.822-.826-2.348-2.348zm4.23 2.82c-1.294 0-2.347 1.057-2.347 2.346 0 1.295 1.058 2.35 2.347 2.35 1.29 0 2.348-1.06 2.348-2.35.005-1.29-1.054-2.347-2.348-2.347z"/><path d="M6.593 11.064l-1-2.554h-3.22l-.988 2.554H.44L3.615 3H4.4l3.16 8.064h-.967zM5.303 7.67l-.935-2.49q-.18-.472-.373-1.158-.12.527-.347 1.16l-.944 2.487h2.598z"/><path d="M24.818 20.835q-1.323 0-2.092.884-.764.878-.764 2.41 0 1.577.736 2.44.742.857 2.11.857.84 0 1.917-.302v.818q-.835.313-2.06.313-1.775 0-2.74-1.076-.963-1.077-.963-3.06 0-1.242.462-2.175.467-.934 1.34-1.44.88-.505 2.065-.505 1.263 0 2.208.46l-.396.803q-.912-.428-1.824-.428z"/></svg>',
            LineToolElliottDoubleCombo: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M10.943 9.127c-1.294 0-2.347 1.06-2.347 2.35s1.058 2.347 2.347 2.347c1.29 0 2.348-1.058 2.348-2.347 0-1.29-1.052-2.35-2.346-2.35zm14.805.707l-5.873 5.87.824.825 5.875-5.88-.828-.817zM8.125 13.357l-4.7 4.702.823.822 4.7-4.7-.823-.826zm5.637 0l-.823.825 2.346 2.347.822-.826-2.348-2.348zm4.23 2.82c-1.294 0-2.347 1.057-2.347 2.346 0 1.295 1.058 2.35 2.347 2.35 1.29 0 2.348-1.06 2.348-2.35.005-1.29-1.054-2.347-2.348-2.347z"/><path d="M7.91 10.03h-.924l-1.62-5.377q-.116-.357-.26-.9-.142-.545-.147-.654-.122.724-.386 1.586l-1.57 5.345H2.08L-.056 2h.988l1.27 4.96q.263 1.044.384 1.89.148-1.005.44-1.967L4.463 2h.99l1.51 4.927q.263.852.445 1.923.103-.78.394-1.9L9.068 2h.988L7.91 10.03z"/><path d="M24.997 24l2.143-4.016h1.01L25.47 24.9v3.116h-.945v-3.07l-2.675-4.962h1.02L24.998 24z"/></svg>',
            LineToolElliottImpulse: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M10.943 9.127c-1.294 0-2.347 1.06-2.347 2.35s1.058 2.347 2.347 2.347c1.29 0 2.348-1.058 2.348-2.347 0-1.29-1.052-2.35-2.346-2.35zm14.805.707l-5.873 5.87.824.825 5.875-5.88-.828-.817zM8.125 13.357l-4.7 4.702.823.822 4.7-4.7-.823-.826zm5.637 0l-.823.825 2.346 2.347.822-.826-2.348-2.348zm4.23 2.82c-1.294 0-2.347 1.057-2.347 2.346 0 1.295 1.058 2.35 2.347 2.35 1.29 0 2.348-1.06 2.348-2.35.005-1.29-1.054-2.347-2.348-2.347z"/><path d="M6 11.03h-.89V5.308q0-.714.044-1.35-.115.114-.258.24-.143.127-1.307 1.072l-.485-.628L5.23 3H6v8.03z"/><path d="M23.802 23.126q1.27 0 1.994.63.73.628.73 1.72 0 1.248-.796 1.956-.79.71-2.186.71-1.357 0-2.07-.435v-.88q.384.248.955.39.57.138 1.125.138.967 0 1.5-.456.538-.457.538-1.32 0-1.68-2.06-1.68-.522 0-1.395.16l-.473-.303.303-3.757h3.993v.84H22.75l-.204 2.412q.632-.126 1.258-.126z"/></svg>',
            LineToolElliottMajorRetr2: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M162.5 446.7c-27 0-49 22.1-49 49 0 27 22.1 49 49 49s49-22.1 49-49-22-49-49-49zm58.9 88.3l-17.2 17.2 49 49 17.2-17.2-49-49zm127.5 49.1l17.2 17.2 122.6-122.6-17.2-17.2-122.6 122.6zm-39.3 9.8c-27 0-49 22.1-49 49 0 27 22.1 49 49 49 27 0 49-22.1 49-49 .1-27-22-49-49-49zm-304 39.2l17.2 17.2 98.1-98.1-17.2-17.2-98.1 98.1zm505.1-370.3h-27l-73.6 193.7h27l22.1-58.9h80.9l22.1 58.9h29.4l-80.9-193.7zm-46.6 112.8l22.1-56.4c4.9-12.3 7.4-24.5 9.8-36.8 2.5 9.8 7.4 24.5 14.7 39.2l19.6 53.9h-66.2z"/></svg>',
            LineToolElliottMinor2: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M227.1 479.2l-17.5 17.5 49.9 49.9 17.5-17.5-49.9-49.9zm-59.9-89.9c-27.5 0-49.9 22.5-49.9 49.9 0 27.5 22.5 49.9 49.9 49.9s49.9-22.5 49.9-49.9-22.5-49.9-49.9-49.9zm407-124.9h-7.5v7.5l-17.5 17.5h-32.5v25h50v124.9h25V264.4h-17.5zM317 539.1c-27.5 0-49.9 22.5-49.9 49.9s22.4 50 49.9 50 49.9-22.5 49.9-49.9-22.4-50-49.9-50zm39.9-10l17.5 17.5 124.9-124.9-17.5-17.5-124.9 124.9zm-349.5 50l17.5 17.5 99.9-99.9-17.5-17.5-99.9 99.9z"/></svg>',
            LineToolElliottMinorRetr: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M168.6 391.9c-28.1 0-51.1 23-51.1 51.1s23 51.1 51.1 51.1 51.1-23 51.1-51.1-23-51.1-51.1-51.1zm61.3 92L212 501.8l51.1 51.1L281 535l-51.1-51.1zM362.8 535l17.9 17.9 127.7-127.7-17.9-17.9L362.8 535zm-40.9 10.2c-28.1 0-51.1 23-51.1 51.1s23 51.1 51.1 51.1 51.1-23 51.1-51.1-23-51.1-51.1-51.1zM5.2 586.1L23 603.9l102.2-102.2-17.9-17.9L5.2 586.1zm577.3-227.4c0-7.7-2.6-23-2.6-48.5v-35.8c0-12.8 0-20.4-2.6-25.5-2.6-7.7-5.1-12.8-7.7-17.9-5.1-5.1-10.2-7.7-17.9-12.8-7.7-2.6-20.4-5.1-33.2-5.1-12.8 0-25.5 2.6-35.8 5.1-10.2 2.6-17.9 10.2-23 15.3-5.1 10.2-10.2 17.9-12.8 30.7l25.5 2.6c2.6-10.2 7.7-17.9 12.8-23 5.1-5.1 15.3-7.7 28.1-7.7s23 2.6 30.7 10.2c5.1 5.1 7.7 12.8 7.7 23v7.7c-10.2 2.6-25.5 7.7-48.5 10.2-10.2 2.6-17.9 2.6-23 5.1-7.7 2.6-12.8 5.1-20.4 7.7-5.1 5.1-10.2 10.2-12.8 15.3-2.6 7.7-5.1 12.8-5.1 20.4 0 12.8 5.1 23 15.3 33.2 10.2 7.7 23 12.8 40.9 12.8 10.2 0 20.4-2.6 30.7-5.1 10.2-2.6 17.9-10.2 28.1-17.9 0 7.7 2.6 12.8 5.1 20.4h28.1c-2.5-7.6-5.1-15.3-7.6-20.4zm-28.1-51.1c0 12.8-2.6 20.4-5.1 28.1s-10.2 15.3-17.9 17.9c-7.7 5.1-17.9 7.7-28.1 7.7s-17.9-2.6-23-7.7c-5.1-5.1-7.7-10.2-7.7-17.9 0-5.1 0-10.2 2.6-12.8 2.6-5.1 5.1-7.7 10.2-7.7 5.1-2.6 12.8-2.6 23-5.1 20.4-2.6 33.2-5.1 43.4-10.2v7.7h2.6z"/></svg>',
            LineToolElliottMinorRetr2: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M168.6 391.9c-28.1 0-51.1 23-51.1 51.1s23 51.1 51.1 51.1 51.1-23 51.1-51.1-23-51.1-51.1-51.1zm61.3 92L212 501.8l51.1 51.1L281 535l-51.1-51.1zM362.8 535l17.9 17.9 127.7-127.7-17.9-17.9L362.8 535zm-40.9 10.2c-28.1 0-51.1 23-51.1 51.1s23 51.1 51.1 51.1 51.1-23 51.1-51.1-23-51.1-51.1-51.1zM5.2 586.1L23 603.9l102.2-102.2-17.9-17.9L5.2 586.1zm577.3-227.4c0-7.7-2.6-23-2.6-48.5v-35.8c0-12.8 0-20.4-2.6-25.5-2.6-7.7-5.1-12.8-7.7-17.9-5.1-5.1-10.2-7.7-17.9-12.8-7.7-2.6-20.4-5.1-33.2-5.1-12.8 0-25.5 2.6-35.8 5.1-10.2 2.6-17.9 10.2-23 15.3-5.1 10.2-10.2 17.9-12.8 30.7l25.5 2.6c2.6-10.2 7.7-17.9 12.8-23 5.1-5.1 15.3-7.7 28.1-7.7s23 2.6 30.7 10.2c5.1 5.1 7.7 12.8 7.7 23v7.7c-10.2 2.6-25.5 7.7-48.5 10.2-10.2 2.6-17.9 2.6-23 5.1-7.7 2.6-12.8 5.1-20.4 7.7-5.1 5.1-10.2 10.2-12.8 15.3-2.6 7.7-5.1 12.8-5.1 20.4 0 12.8 5.1 23 15.3 33.2 10.2 7.7 23 12.8 40.9 12.8 10.2 0 20.4-2.6 30.7-5.1 10.2-2.6 17.9-10.2 28.1-17.9 0 7.7 2.6 12.8 5.1 20.4h28.1c-2.5-7.6-5.1-15.3-7.6-20.4zm-28.1-51.1c0 12.8-2.6 20.4-5.1 28.1s-10.2 15.3-17.9 17.9c-7.7 5.1-17.9 7.7-28.1 7.7s-17.9-2.6-23-7.7c-5.1-5.1-7.7-10.2-7.7-17.9 0-5.1 0-10.2 2.6-12.8 2.6-5.1 5.1-7.7 10.2-7.7 5.1-2.6 12.8-2.6 23-5.1 20.4-2.6 33.2-5.1 43.4-10.2v7.7h2.6z"/></svg>',
            LineToolElliottSubminuette: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M564.1 417.7h25.2v-126h-25.2v126zm0-176.3v25.2h25.2v-25.2h-25.2zM161.2 367.3c-27.7 0-50.4 22.7-50.4 50.4s22.7 50.4 50.4 50.4 50.4-22.7 50.4-50.4c-.1-27.7-22.7-50.4-50.4-50.4zm60.4 90.6L204 475.6l50.4 50.4 17.6-17.6-50.4-50.5zm131 50.4l17.6 17.6L496.1 400l-17.6-17.6-125.9 125.9zm-40.3 10.1c-27.7 0-50.4 22.7-50.4 50.4s22.7 50.4 50.4 50.4 50.4-22.7 50.4-50.4-22.7-50.4-50.4-50.4zM0 558.7l17.6 17.6 100.7-100.7-17.6-17.6L0 558.7z"/></svg>',
            LineToolElliottSubminuette2: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M564.1 417.7h25.2v-126h-25.2v126zm0-176.3v25.2h25.2v-25.2h-25.2zM161.2 367.3c-27.7 0-50.4 22.7-50.4 50.4s22.7 50.4 50.4 50.4 50.4-22.7 50.4-50.4c-.1-27.7-22.7-50.4-50.4-50.4zm60.4 90.6L204 475.6l50.4 50.4 17.6-17.6-50.4-50.5zm131 50.4l17.6 17.6L496.1 400l-17.6-17.6-125.9 125.9zm-40.3 10.1c-27.7 0-50.4 22.7-50.4 50.4s22.7 50.4 50.4 50.4 50.4-22.7 50.4-50.4-22.7-50.4-50.4-50.4zM0 558.7l17.6 17.6 100.7-100.7-17.6-17.6L0 558.7z"/></svg>',
            LineToolElliottTriangle: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M10.943 9.127c-1.294 0-2.347 1.06-2.347 2.35s1.058 2.347 2.347 2.347c1.29 0 2.348-1.058 2.348-2.347 0-1.29-1.052-2.35-2.346-2.35zm14.805.707l-5.873 5.87.824.825 5.875-5.88-.828-.817zM8.125 13.357l-4.7 4.702.823.822 4.7-4.7-.823-.826zm5.637 0l-.823.825 2.346 2.347.822-.826-2.348-2.348zm4.23 2.82c-1.294 0-2.347 1.057-2.347 2.346 0 1.295 1.058 2.35 2.347 2.35 1.29 0 2.348-1.06 2.348-2.35.005-1.29-1.054-2.347-2.348-2.347z"/><path d="M7.593 10.064l-1-2.554h-3.22l-.988 2.554H1.44L4.615 2H5.4l3.16 8.064h-.967zM6.303 6.67l-.935-2.49q-.18-.472-.373-1.158-.12.527-.347 1.16l-.944 2.487h2.598z"/><path d="M25.477 28.03H21V20h4.477v.83h-3.543v2.587h3.33v.824h-3.33v2.956h3.543v.835z"/></svg>',
            LineToolElliottTripleCombo: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M10.943 9.127c-1.294 0-2.347 1.06-2.347 2.35s1.058 2.347 2.347 2.347c1.29 0 2.348-1.058 2.348-2.347 0-1.29-1.052-2.35-2.346-2.35zm14.805.707l-5.873 5.87.824.825 5.875-5.88-.828-.817zM8.125 13.357l-4.7 4.702.823.822 4.7-4.7-.823-.826zm5.637 0l-.823.825 2.346 2.347.822-.826-2.348-2.348zm4.23 2.82c-1.294 0-2.347 1.057-2.347 2.346 0 1.295 1.058 2.35 2.347 2.35 1.29 0 2.348-1.06 2.348-2.35.005-1.29-1.054-2.347-2.348-2.347z"/><path d="M8.91 9.03h-.924l-1.62-5.377q-.116-.357-.26-.9-.142-.545-.147-.654-.122.724-.386 1.586L4.004 9.03H3.08L.944 1h.988l1.27 4.96q.263 1.044.384 1.89.148-1.005.44-1.967L5.463 1h.99l1.51 4.927q.263.852.445 1.923.103-.78.394-1.9L10.068 1h.988L8.91 9.03z"/><path d="M27.52 28.03H22v-.73l4.263-6.46h-4.13V20H27.4v.73l-4.263 6.455h4.384v.846z"/></svg>',
            LineToolEllipse: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M13 5v1.557C10.26 6.84 7.792 7.69 5.887 8.95c-2.36 1.564-3.885 3.78-3.885 6.27 0 2.49 1.525 4.708 3.885 6.27 2.36 1.563 5.574 2.508 9.115 2.508 3.54 0 6.755-.945 9.115-2.508 2.36-1.562 3.885-3.78 3.885-6.27 0-2.49-1.525-4.706-3.885-6.27C22.21 7.69 19.743 6.84 17 6.558V5zm1 1h2v2h-2zm3 1.562c2.555.282 4.838 1.08 6.563 2.223C25.727 11.218 27 13.14 27 15.22c0 2.082-1.273 4-3.438 5.434-2.164 1.433-5.198 2.342-8.56 2.342s-6.398-.91-8.563-2.342C4.27 19.22 3 17.302 3 15.22c0-2.08 1.27-4 3.435-5.433 1.723-1.14 4.006-1.94 6.56-2.22V9h4z"/></svg>',
            LineToolExtended: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M23.605 6.646l-4.34 4.34L16 11l-.014 3.307L13.293 17H10v3.293l-3.354 3.353.708.708L10.707 21H14v-3.293l2.67-2.67L20 15v-3.334l4.313-4.312zM17 12h2v2h-2zm-6 6h2v2h-2z"/></svg>',
            LineToolFibChannel: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M387.382 160.99L19.62 528.75 5.193 514.327l367.763-367.762zM399.6 195.6v67.3l-259 259H73.2v81.6h81.6v-67.3l259-259h67.3v-81.6h-81.5zM134.4 583.1H93.6v-40.8h40.8v40.8zm326.3-326.3h-40.8V216h40.8v40.8zm114.2 73.4L426.1 481.1h-53l175.4-175.4-14.3-14.3-367.1 367.2 14.3 14.3 175.4-175.4v53l-151 150.9 14.3 14.3L371 564.8h69.3v-67.3l150.9-150.9-16.3-16.4zm-155 212.1h-40.8v-40.8h40.8v40.8zm88.53-257.64L162.304 630.787 147.88 616.36l346.125-346.124z"/></svg>',
            LineToolFibCircles: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M297.6 362.3c-32.2 0-58.6 26.4-58.6 58.6s26.4 58.6 58.6 58.6 58.6-26.4 58.6-58.6-26.3-58.6-58.6-58.6zm0 87.9c-17.6 0-29.3-14.7-29.3-29.3 0-17.6 14.7-29.3 29.3-29.3 17.6 0 29.3 14.7 29.3 29.3 0 17.6-11.7 29.3-29.3 29.3zm0-175.8c-79.1 0-146.5 64.5-146.5 146.5s64.5 146.5 146.5 146.5S444.2 503 444.2 420.9s-67.4-146.5-146.6-146.5zm0 263.8c-64.5 0-117.2-52.7-117.2-117.2s52.7-117.2 117.2-117.2S414.8 356.5 414.8 421s-52.7 117.2-117.2 117.2zm0-322.4c-114.3 0-205.1 90.8-205.1 205.1S183.3 626 297.6 626s205.1-90.8 205.1-205.1-90.8-205.1-205.1-205.1zm0 381c-96.7 0-175.8-79.1-175.8-175.8s79.1-175.8 175.8-175.8S473.4 324.3 473.4 421s-79.1 175.8-175.8 175.8zm0-468.9c-161.2 0-293 131.9-293 293s131.9 293 293 293 293-131.9 293-293-131.8-293-293-293zm0 556.8C151.1 684.7 33.9 567.5 33.9 421s117.2-263.7 263.7-263.7S561.3 274.5 561.3 421 444.2 684.7 297.6 684.7z"/></svg>',
            LineToolFibRetracement: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M4.3 642.1H591v-32.6H4.3v32.6zm0-195.6H591v-32.6H4.3v32.6zm0-228.1V251H591v-32.6H4.3z"/></svg>',
            LineToolFibSpeedResistanceArcs: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M297.6 439.5c79 0 146.3-64.4 146.3-146.3h-29.3c0 64.4-52.7 117.1-117.1 117.1s-117.1-52.7-117.1-117.1h-29.3c.2 82 64.6 146.3 146.5 146.3zm0-87.7c32.2 0 58.5-26.3 58.5-58.5h-29.3c0 17.6-14.6 29.3-29.3 29.3s-29.3-14.6-29.3-29.3h-29.3c.2 32.1 26.5 58.5 58.7 58.5zm0 146.3c114.1 0 204.8-90.7 204.8-204.8h-29.3c0 96.6-79 175.6-175.6 175.6s-175.6-79-175.6-175.6H92.8c0 114.1 90.7 204.8 204.8 204.8zM561 293.2c0 146.3-117.1 263.4-263.4 263.4S34.3 439.5 34.3 293.2H5c0 161 131.7 292.6 292.6 292.6s292.6-131.7 292.6-292.6H561z"/></svg>',
            LineToolFibSpeedResistanceFan: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M14.04 3.303l-.788 1.838.92.4.787-1.84-.92-.39zM5 4.5V25h20.5v-1H21v-6.102l.182.424 1.838-.787-.393-.92-1.627.7v-7.61l2.854-2.852-.708-.708L20.293 9h-7.607l.7-1.627-.92-.393-.788 1.838.424.182H6V4.5H5zM6 10h13.293l-5 5h-4.178l.117-.273-.92-.395-.285.668H6v-5zm4.89.656l-.788 1.838.918.395.79-1.84-.92-.4zm9.11.05V24h-5v-3.027l.668-.286-.395-.92-.273.118v-4.178l5-5zm6.303 4.335l-1.838.79.394.92 1.83-.79-.4-.91zM6 16h2.6l-.075.172.92.392.242-.564h3.606l-6.31 6.31.1-.23-.92-.394-.163.378V16zm8 .707v3.605l-.564.243.392.92L14 21.4V24H7.936l.378-.162-.394-.92-.23.098 6.31-6.31zM7.738 18.01l-.79 1.838.92.394.788-1.84-.918-.392zm11.21.18l-1.837.79.4.918 1.84-.787-.39-.92zm-7.35 3.154l-1.84.787.394.92 1.838-.78-.392-.92z"/></svg>',
            LineToolFibSpiral: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M411.2 234c-83.058 0-152.1 69.043-152.1 152.1 0 17.915 3.948 35.028 11.01 50.504l-150.4 30.076c-12.193-30.528-18.91-63.825-18.91-98.68h-20c0 36.155 6.758 70.764 19.046 102.652l-95.88 19.174 5.06 25.3L110.48 494.84C157.367 589.342 254.892 654.5 367.3 654.5c126.89 0 232.2-102.785 232.2-232.2 0-103.637-84.663-188.3-188.3-188.3zm0 20c92.76 0 168.3 75.54 168.3 168.3 0 118.587-96.087 212.2-212.2 212.2-102.81 0-192.092-58.358-236.532-143.72l153.378-30.673c22.716 30.04 58.685 49.694 98.655 49.694 54.71 0 100.4-45.69 100.4-100.4 0-46.72-38.25-82.4-82.4-82.4v20c33.46 0 62.4 26.53 62.4 62.4 0 43.5-36.9 80.4-80.4 80.4-29.91 0-57.24-13.27-76.33-34.15l90.29-18.05-5.06-25.3-101.3 20.26c-7.21-14.045-11.3-29.85-11.3-46.45 0-71.94 60.16-132.1 132.1-132.1z"/></svg>',
            LineToolFibTimeZone: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M7 4v22h1V4zm5 0v22h1V4zm10 0v22h1V4z"/></svg>',
            LineToolFibWedge: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M566.4 639.5C530.1 399.6 337.6 207.1 97.7 170.8v-33.5H14V221h27.9v418.5H14v83.7h83.7v-27.9h418.5v27.9h83.7v-83.7h-33.5zM41.9 165.2h27.9v27.9H41.9v-27.9zm27.9 530.1H41.9v-27.9h27.9v27.9zm27.9-27.9v-27.9H69.8v-106c67 16.7 117.2 67 133.9 133.9h-106zm133.9 0c-16.7-80.9-80.9-145.1-161.8-161.8v-83.7c125.5 22.3 223.2 120 245.5 245.5h-83.7zm111.6 0C320.9 527.9 209.3 416.3 69.8 394v-83.7c186.9 22.3 334.8 170.2 359.9 357.1h-86.5zm173 0h-58.6C432.5 466.5 270.7 304.7 69.8 279.6V221h27.9v-19.5c226 36.3 404.5 214.8 438 438h-19.5v27.9zm55.8 27.9h-27.9v-27.9H572v27.9z"/></svg>',
            LineToolFlagMark: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9" class="text"><path d="M303.306 426.633v-241.3h189.7l-93.1 120.7 96.5 120.6zM276.9 399.2c-3.4-3.4-6.9-3.4-13.8-3.4H111.4V154.4h148.3c3.4 0 13.8 10.3 17.2 17.2zm-17.2-262.1H94.2V413h169c13.8 0 31 31 31 31V164.7s-13.8-27.6-34.5-27.6zm-172.4 0H52.8v586.2h34.5zm443.606 30.933h-241.4v275.9h241.4l-110.4-138z"/><path d="M107.02 155.182v244.363h172.126V155.182H107.02zm194.423 26.754v251.5h206.91l-108.81-127.534L508.35 181.936H301.44z" opacity=".2"/></svg>',
            LineToolFlatBottom: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M22 4v2.87L7 13.048V13H3v4h4v-2.87l15-6.177V8h4V4h-4zm1 1h2v2h-2V5zM4 14h2v2H4v-2zm-1 8v4h4v-1.5h15V26h4v-4h-4v1.5H7V22H3zm1 1h2v2H4v-2zm19 0h2v2h-2v-2z"/></svg>',
            LineToolGannComplex: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M4 4v22h22V4zm2.12 1H11v.285l-.303.832c-.85-.32-1.644-.564-2.36-.74C7.474 5.167 6.76 5.065 6.12 5zm6.048 0H18v5.38c-2.16-1.71-4.19-2.907-6-3.72V5.465zM19 5h5.293L19 10.293zm6 .707V11h-5.293zM5 5.91c.69.014 1.72.102 3.098.44.68.167 1.44.4 2.257.71L8.922 11H5zm7 1.856c1.574.743 3.314 1.785 5.172 3.234H12zm-1 .45V11H9.986zM5 12h3.56l-2.183 6H5zm4.623 0H11v6H7.44zM12 12h5.293L12 17.293zm7.848 0H25v5.832l-.465.168h-.97c-.76-2.048-1.93-4.177-3.717-6zm-.848.574c1.636 1.63 2.735 3.547 3.473 5.426H19zm-1 .133V18h-5.293zM5 19h1.014L5 21.785zm2.078 0h3.215L5.24 24.053zM12 19h6v1.377l-6 2.182zm7 0h2.785L19 20.014zm5.715 0H25v6h-.04c-.048-1.186-.233-3.292-.97-5.736zm-1.68.61c.682 2.29.868 4.265.92 5.39H19v-3.922zM11 19.708v3.215L5.947 24.76zm7 1.734V25h-6v-1.377zm-7 2.546V25H8.215z"/></svg>',
            LineToolGannFan: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M14.04 3.303l-.788 1.838.92.4.787-1.84-.92-.39zM5 4.5V25h20.5v-1H7.936l.378-.162-.394-.92-.23.098L23.855 6.854l-.708-.708L6.984 22.31l.098-.23-.92-.394-.162.378V4.5H5zm7.465 2.48l-.787 1.838.918.393.79-1.83-.92-.39zm-1.576 3.676l-.79 1.838.92.395.79-1.84-.92-.4zm-1.58 3.676l-.79 1.84.92.392.78-1.837-.92-.395zm16.99.71l-1.84.786.39.92 1.83-.79-.397-.917zm-3.68 1.573l-1.84.79.39.917 1.84-.787-.4-.92zM7.73 18.01l-.787 1.838.92.394.78-1.84-.918-.392zm11.213.18l-1.84.79.39.918 1.84-.787-.396-.92zm-3.68 1.578l-1.84.787.392.92 1.84-.788-.396-.92zm-3.678 1.576l-1.84.787.393.92 1.84-.78-.393-.92z"/></svg>',
            LineToolGannSquare: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" enable-background="new 0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 5v20h20V5H5zm14 1h5v3h-5V6zm0 4h5v4h-5v-4zm-6-4h5v3h-5V6zm0 4h5v4h-5v-4zm5 5v5h-5v-5h5zM9 6h3v3H9V6zm0 4h3v4H9v-4zm3 5v5H9v-5h3zM6 6h2v3H6V6zm0 4h2v4H6v-4zm0 5h2v5H6v-5zm0 9v-3h2v3H6zm3 0v-3h3v3H9zm4 0v-3h5v3h-5zm11 0h-5v-3h5v3zm-5-4v-5h5v5h-5z"/></svg>',
            LineToolGannSquare2: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M4 4v22h22V4zm2.12 1H11v.285l-.303.832c-.85-.32-1.644-.564-2.36-.74C7.474 5.167 6.76 5.065 6.12 5zm6.048 0H18v5.38c-2.16-1.71-4.19-2.907-6-3.72V5.465zM19 5h5.293L19 10.293zm6 .707V11h-5.293zM5 5.91c.69.014 1.72.102 3.098.44.68.167 1.44.4 2.257.71L8.922 11H5zm7 1.856c1.574.743 3.314 1.785 5.172 3.234H12zm-1 .45V11H9.986zM5 12h3.56l-2.183 6H5zm4.623 0H11v6H7.44zM12 12h5.293L12 17.293zm7.848 0H25v5.832l-.465.168h-.97c-.76-2.048-1.93-4.177-3.717-6zm-.848.574c1.636 1.63 2.735 3.547 3.473 5.426H19zm-1 .133V18h-5.293zM5 19h1.014L5 21.785zm2.078 0h3.215L5.24 24.053zM12 19h6v1.377l-6 2.182zm7 0h2.785L19 20.014zm5.715 0H25v6h-.04c-.048-1.186-.233-3.292-.97-5.736zm-1.68.61c.682 2.29.868 4.265.92 5.39H19v-3.922zM11 19.708v3.215L5.947 24.76zm7 1.734V25h-6v-1.377zm-7 2.546V25H8.215z"/></svg>',
            LineToolGhostFeed: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M17 5v2h-1v11h1v4h1v-4h1V7h-1V5zm8 3v2h-1v11h1v4h1v-4h1V10h-1V8zM4 11v2H3v11h1v2h1v-2h1V13H5v-2zm9-7v2h-1v11h1v3h1v-3h1V6h-1V4zM8 4v2H7v11h1v6h1v-6h1V6H9V4zm9 4h1v9h-1zm8 3h1v9h-1zm-4-3v3h-1v11h1v2h1v-2h1V11h-1V8zM8 7h1v9H8z"/></svg>',
            LineToolHeadAndShoulders: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M13 0v4h1.06l-5.2 13h-.247l-3-6H7V7H3v4h.8l-1.958 8.242-1.91.262.136.992 1.526-.21L.236 26H0v4h4v-4H1.264l1.392-5.86L7 19.546V21h4v-2.002l7-.96V19h4v-1.512l4.043-.554L28.33 24H26v4h4v-4h-.617l-2.332-7.203 3.02-.414-.13-.992-3.19.44-1.9-5.83H26V6h-4v4h.99l-2.898 4.867L15.844 4H17V0zm1 1h2v2h-2zm.95 3.46L19.073 15H18v2.027l-7 .96V17H9.94zM23 7h2v2h-2zM4 8h2v2H4zm19.924 2.39l1.805 5.577-3.73.512V15h-.83zM4.72 11.452L7.495 17H7v1.535l-4.096.56zM21 16v2h-2v-2zm-11 2v2H8v-2zm17 7h2.18v2H27zM1.025 27H3v2H1v-1.893z"/></svg>',
            LineToolHorzLine: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.999999 30.000001" width="30" height="30" enable-background="new 0 0 841.9 595.3"><path d="M3 17h4v-2h16v2h4v-4h-4v1H7v-1H3zm1-1v-2h2v2zm20 0v-2h2v2z"/></svg>',
            LineToolHorzRay: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.999999 30.000001" width="30" height="30" enable-background="new 0 0 841.9 595.3"><path d="M3 13v4h4v-2h21v-1H7v-1zm1 1h2v2H4z"/></svg>',
            LineToolInsidePitchfork: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M15.646 3.646L8.29 11.002l-.35.352.015 1.308L8.06 22v.006L18.294 22l8.06-7.646-.707-.708L18.293 21h-.586L15 18.293v-2.586l6.354-6.353-.708-.708L14.293 15h-2.586L8.89 12.184l-.003-.364 7.467-7.466zm-6.74 9.967L11 15.707v2.586l-2.02 2.02zM12 16h2v2h-2zm-.293 3h2.586l3 3H9z"/></svg>',
            LineToolNote: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9" class="text"><path fill-opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M297.7 127.9c-127.1 0-230.1 101.6-230.1 227 0 118.4 104.2 240.4 173.8 314.7 26 27.8 56.3 44.2 56.3 44.2s32.5-16.7 60.4-45.3c69.5-71.3 169.6-183.5 169.6-313.7 0-125.2-103-226.9-230-226.9zm0 335c-57.8 0-104.6-46.8-104.6-104.6S240 253.7 297.7 253.7s104.6 46.8 104.6 104.6-46.8 104.6-104.6 104.6z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M297.7 232.8c-69.3 0-125.5 56.2-125.5 125.5s56.2 125.5 125.5 125.5 125.5-56.2 125.5-125.5-56.1-125.5-125.5-125.5zm0 230.1c-57.8 0-104.6-46.8-104.6-104.6S240 253.7 297.7 253.7s104.6 46.8 104.6 104.6-46.8 104.6-104.6 104.6zm0-335c-127.1 0-230.1 101.6-230.1 227 0 118.4 104.2 240.4 173.8 314.7 26 27.8 56.3 44.2 56.3 44.2s32.5-16.7 60.4-45.3c69.5-71.3 169.6-183.5 169.6-313.7 0-125.2-103-226.9-230-226.9zM352.6 651c-25.4 26.5-54.9 42-54.9 42s-27.5-15.3-51.2-41.1c-63.3-69.1-158-182.3-158-292.3 0-116.4 93.6-210.8 209.1-210.8s209.1 94.4 209.1 210.8c.1 121-90.9 225.2-154.1 291.4z"/></svg>',
            LineToolNoteAbsolute: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9" class="text"><path fill-opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M184.1 270C86.7 270 7.7 349.2 7.7 447c0 92.3 79.9 187.4 133.2 245.4 19.9 21.6 43.1 34.5 43.1 34.5s24.9-13 46.3-35.3C283.7 636 360.5 548.5 360.5 447c0-97.8-79-177-176.4-177zm.1 277.5c-53.2 0-96.3-43.8-96.3-97.9 0-54.1 43.1-97.9 96.3-97.9s96.3 43.8 96.3 97.9c-.1 54-43.1 97.9-96.3 97.9z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M184.2 351.7c-53.2 0-96.3 43.8-96.3 97.9 0 54.1 43.1 97.9 96.3 97.9s96.3-43.8 96.3-97.9c-.1-54.1-43.1-97.9-96.3-97.9zm0 167.6c-40.1 0-72.7-32.5-72.7-72.7s32.5-72.7 72.7-72.7 72.7 32.5 72.7 72.7-32.6 72.7-72.7 72.7zm-.1-249.3C86.7 270 7.7 349.2 7.7 447c0 92.3 79.9 187.4 133.2 245.4 19.9 21.6 43.1 34.5 43.1 34.5s24.9-13 46.3-35.3C283.7 636 360.5 548.5 360.5 447c0-97.8-79-177-176.4-177zM225 674c-18.9 20.3-40.9 32.1-40.9 32.1s-20.5-11.7-38.1-31.4C99 622 28.5 535.6 28.5 451.7c0-88.9 69.7-160.9 155.7-160.9 85.9 0 155.6 72 155.6 160.9 0 92.2-67.8 171.8-114.8 222.3zm343.4-363.4h19.8c-7.1 47.4-54.7 84.1-113.1 84.1s-105.8-36.7-113-84.1h18.7c8.5 31.8 42.3 56.1 83.9 59.5V248.5h-60.4V228h60.4v-21.5c-12.4-4.2-21.5-15.5-21.5-29.2 0-17.2 14.2-31.2 31.7-31.2s31.7 14 31.7 31.2c0 13.9-9.4 25.3-22.2 29.3V228h59.7v20.5h-59.7v121.6c41.7-3.4 75.5-27.6 84-59.5zm-81.5-133.2c0-6.6-5.4-11.9-12.1-11.9s-12.1 5.3-12.1 11.9 5.4 11.9 12.1 11.9 12.1-5.4 12.1-11.9z"/></svg>',
            LineToolParallelChannel: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M17 4v3.293L7.293 17H4v4h4v-3.293L17.707 8H21V4zm1 1h2v2h-2zm7.646 4.646L19.293 16H16v3.293l-6.354 6.353.708.708 6.376-6.377L20 20l.014-3.307 6.34-6.34zM17 17h2v2h-2zM5 18h2v2H5z"/></svg>',
            LineToolPitchfan: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M5 4v2H4v4h1v12H4v4h4v-1h12v1h4v-1h2v-1h-2v-2h-3.293l-2.816-2.816 9.3-3.72-.37-.93-9.69 3.878L14.71 16l9.646-9.646-.708-.708L14 15.293l-2.414-2.414 3.88-9.7-.93-.37-3.72 9.29L8 9.29V6H6V4zm0 3h2v2H5zm1 3h1.39l3.12 3.12L6.86 22H6zm5.184 3.89l2.11 2.11-4.925 4.924zM14 16.708l2.11 2.11-7.034 2.814zm2.88 2.88l3.12 3.12V24H8v-.86zM5 23h2v2H5zm16 0h2v2h-2z"/></svg>',
            LineToolPitchfork: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M15.646 3.646L7.293 12 11 15.707v2.586l-7.354 7.353.708.708L11.707 19h2.586L18 22.707l8.354-8.353-.708-.708L18 21.293l-3-3v-2.586l6.354-6.353-.708-.708L14.293 15h-2.586l-3-3 7.647-7.646zM12 16h2v2h-2z"/></svg>',
            LineToolPolyline: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M22 4v1H11.793L5 11.793V22H4v4h4v-1h8.207L20 20.707V17h5V8h1V4zm1 1h2v2h-2zM12.207 6H22v2h2v8h-5v4.293L15.793 24H8v-2H6v-9.793zM5 23h2v2H5z"/></svg>',
            LineToolPrediction: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M18 2v4h-2l3.44 4L23 6h-2V2h-3zm-6 7v2h-1v9h1v4h1v-4h1v-9h-1V9h-1zm-4 2v4H7v10h1v2h1v-2h1V15H9v-4H8zm4 1h1v7h-1v-7zm7.5 0a1.5 1.5 0 0 0-1.5 1.5 1.5 1.5 0 0 0 1.5 1.5 1.5 1.5 0 0 0 1.5-1.5 1.5 1.5 0 0 0-1.5-1.5zm-.006.996a.498.498 0 0 1 .498.498.498.498 0 0 1-.498.498.498.498 0 0 1-.498-.498.498.498 0 0 1 .498-.498zM8 15.72h1.19V24H8v-8.28z"/></svg>',
            LineToolPriceLabel: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9" class="text"><path d="M10.17 6.45c-1.145 0-2.077.928-2.077 2.078v6.225c0 .9.575 1.668 1.373 1.953L6.596 20H3v4h4l.057-2.825 6.635-4.35h12.23c1.146 0 2.078-.927 2.078-2.077v-6.22c0-1.15-.927-2.077-2.077-2.077zm.715 1.037h14.163c1.056 0 1.916.87 1.916 1.942v4.39c0 1.07-.86 1.94-1.916 1.94H13.66l-4.013 2.71-.383.02 1.238-2.775c-.83-.18-1.337-.964-1.337-1.9V9.43c0-1.073.663-1.943 1.72-1.943zM4 21h2v2H4z"/><path fill-opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M25.06 7.523H10.894c-1.056 0-1.72.87-1.72 1.943v4.397c0 .937.51 1.72 1.337 1.9L9.28 18.54l.384-.026 4.014-2.71H25.06c1.055 0 1.915-.87 1.915-1.94v-4.4c0-1.072-.86-1.942-1.916-1.942z"/></svg>',
            LineToolPriceRange: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M9 4v1h11V4H9zm5.5 1l-3.387 5H14v15H9v1h11v-1h-5V10h3.113L14.5 5z"/></svg>',
            LineToolProjection: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M3 3v4h1v16H3v4h4v-1h16v1h4v-4h-2l.5-.008c-.155-9.757-4.81-14.485-9.402-16.646C11.553 4.206 7.095 4.496 7 4.502V3zm1 1h2v2H4zm3 1l.033.498s4.31-.285 8.64 1.752C20 9.286 24.346 13.556 24.5 23H23v2H7v-2H5V7h2zM4 24h2v2H4zm20 0h2v2h-2z"/></svg>',
            LineToolRay: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M23.646 5.646L18.293 11H15v3.293L8.293 21H5v4h4v-3.293L15.707 15H19v-3.293l5.354-5.353zM16 12h2v2h-2zM6 22h2v2H6z"/></svg>',
            LineToolRectangle: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30"><path d="M4 4v4h2v16h16v2h4v-4h-2V6H8V4zm1 1h2v2H5zm3 2h15v15h-1v1H7V8h1zm15 16h2v2h-2z"/></svg>',
            LineToolRegressionTrend: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M537.9 163.6l-14.7-26.4L54.4 400.9l14.7 26.4 468.8-263.7zM57.4 550.4L72 576.8 540.9 313l-14.7-26.4L57.4 550.4zm0 146.5L72 723.3l468.8-263.7-14.7-26.4L57.4 696.9z"/></svg>',
            LineToolRiskRewardLong: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60" width="30" height="30"><path d="M10 10v2h38v-2H10zm19 2l-6 6h5v14H10v2h18v6h-5l6 6 6-6h-5v-6h18v-2H30V18h5l-6-6zm0 34H10v2h38v-2H29z"/></svg>',
            LineToolRiskRewardShort: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60" width="30" height="30"><path d="M10 48v-2h38v2H10zm19-2l-6-6h5V26H10v-2h18v-6h-5l6-6 6 6h-5v6h18v2H30v14h5l-6 6zm0-34H10v-2h38v2H29z"/></svg>',
            LineToolRotatedRectangle: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30"><path d="M10 2v3.293L5.293 10H2v4h3.293L16 24.707V28h4v-3.293L24.707 20H28v-4h-3.293L14 5.293V2h-4zm1 1h2v2h-2V3zm-.293 3h2.586L24 16.707v2.586L19.293 24h-2.586L6 13.293v-2.586L10.707 6zM3 11h2v2H3v-2zm22 6h2v2h-2v-2zm-8 8h2v2h-2v-2z"/></svg>',
            LineToolSchiffPitchfork: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M17 2v10.994h2V7.2l2 5.794h2l2.004-5.8.002 4.89V13l2-.002v-.916L27 2h-2l-3 7.398L19 2h-2zm-1.354 1.646L7.293 12 11 15.707v2.586L8.293 21H4v1h14.707l7.647-7.646-.708-.708L18.293 21h-.586L15 18.293v-2.586l1-1-.707-.707-1 1h-2.586l-3-3 7.647-7.646-.708-.708zM12 16h2v2h-2v-2zm-.293 3h2.586l2 2H9.707l2-2z"/></svg>',
            LineToolSchiffPitchfork2: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M15.646 3.646L7.293 12 11 15.707v2.586L8.293 21H4v1h14.707l7.647-7.646-.708-.708L18.293 21h-.586L15 18.293v-2.586l6.354-6.353-.708-.708L14.293 15h-2.586l-3-3 7.647-7.646zM12 16h2v2h-2zm-.293 3h2.586l2 2H9.707z"/></svg>',
            LineToolSineLine: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M10 2.5c-1.208 0-2.17.765-2.88 1.775-.706 1.01-1.215 2.3-1.6 3.58-.766 2.56-1.018 5.096-1.018 5.096L5 13H3v4h4v-4H5.504c.008-.076.254-2.453.975-4.855.36-1.22.85-2.43 1.46-3.295.6-.865 1.27-1.35 2.06-1.35.25 0 .59.218 1 .812.4.595.81 1.503 1.21 2.608.793 2.21 1.55 5.2 2.3 8.2.75 3 1.493 6.01 2.32 8.3.414 1.145.844 2.112 1.33 2.83.488.718 1.08 1.25 1.83 1.25 1.207 0 2.17-.765 2.88-1.775.705-1.01 1.214-2.3 1.6-3.58.765-2.56 1.017-5.096 1.017-5.096L25 17h2v-4h-4v4h1.496c-.008.076-.254 2.453-.975 4.855-.36 1.22-.85 2.43-1.46 3.295-.6.865-1.26 1.35-2.06 1.35-.25 0-.59-.218-1-.813-.4-.594-.81-1.502-1.21-2.607-.79-2.21-1.55-5.2-2.3-8.2-.75-3-1.49-6.01-2.32-8.3-.41-1.145-.84-2.112-1.33-2.83-.49-.718-1.08-1.25-1.83-1.25zM4 14h2v2H4v-2zm20 0h2v2h-2v-2z"/></svg>',
            LineToolText: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M129.8 244.3L5 609.7h54.8l42.6-121.8h121.8l39.6 121.8h57.8L190.7 244.3h-60.9zm-18.2 213.1l51.8-155.3 51.8 155.3H111.6zm456.6 115.7c-3 0-9.1 0-9.1-3-3-6.1-3-9.1-3-18.3v-134c0-82.2-91.3-82.2-103.5-82.2-30.4 0-109.6 3-109.6 91.3h39.6c3-39.6 42.6-60.9 70-60.9 30.4 0 54.8 15.2 54.8 45.7 0 18.3-18.3 30.4-36.5 33.5 0 0-67 9.1-82.2 18.3-15.2 3-45.7 21.3-45.7 70 0 42.6 27.4 76.1 76.1 76.1 33.5 0 67-18.3 91.3-42.6 0 12.2 3 24.4 12.2 30.4 6.1 6.1 18.3 9.1 33.5 9.1 6.1 0 21.3-3 33.5-6.1V567c-9.2 3.1-18.3 6.1-21.4 6.1zm-60.9-63.9c0 42.6-36.5 70-76.1 70-30.4 0-48.7-9.1-48.7-51.8 0-21.3 33.5-39.6 42.6-39.6 24.4-3 54.8-6.1 85.2-15.2v36.5h-3z"/></svg>',
            LineToolTextAbsolute: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path fill-rule="evenodd" clip-rule="evenodd" d="M567.7 358.1h20c-7.2 47.7-55.1 84.7-113.9 84.7s-106.7-37-113.9-84.7h18.9c8.6 32.1 42.6 56.5 84.5 59.9V295.6h-60.8v-20.7h60.8v-21.6c-12.5-4.2-21.7-15.6-21.7-29.4 0-17.3 14.3-31.4 31.9-31.4 17.6 0 31.9 14.1 31.9 31.4 0 14-9.5 25.5-22.4 29.5v21.5h60.1v20.7H483V418c42-3.4 76.1-27.8 84.7-59.9zm-82.1-134.2c0-6.6-5.4-12-12.1-12-6.7 0-12.1 5.3-12.1 12s5.4 12 12.1 12c6.6 0 12.1-5.4 12.1-12zm-85.5 295.4v92.6c0 5.5 4.2 13.1 6 15.2 1.8 2 4.3 3.1 7.6 3.1 2.4 0 2.2-.5 6.8-1.4v20.9c-7 1.6-10.9 2.4-16 2.4-10.8 0-18-3.4-23-7.7-4.9-4.2-9.2-5.9-10.1-15.5-19.1 20.2-37.9 22.5-65.6 22.5-36.5 0-59.5-22.7-59.5-54.8 0-60.9 75.4-59.9 56.1-57.7 0 0 68.5-5.2 68.5-22.8 0-20.7-11.9-32.3-42.5-32.3-14.3 0-24.9 3-31.8 8.9-6.9 5.9-11 6.7-12.1 18.8h-30c3.6-55.3 70.9-52.6 75.3-52 3.2-.2 23 .1 41.2 9.3 17 8.7 29.1 26.4 29.1 50.5zm-31.5 29.3c-21.8 11.8-38.4 11.5-61.2 17.4-6 1.5-30.9 5.3-30.9 28.2 0 30.4 14.7 37.1 37 37.1 30.5 0 55.1-18.3 55.1-50.5v-32.2zm-204.2 19.2H67.6l-29.1 84.3H1.7l96.4-272.2h41.2l92.9 272.2h-38.8l-29-84.3zM115.9 421L80.5 526.6h71L115.9 421z"/></svg>',
            LineToolTextAbsolute2: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M130.6 233.5L2.6 600h54.1l43.7-122.7h121.7L262.9 600h58l-130-366.5h-60.3zm-20.9 212.9l51-156.1 51.2 156.1H109.7zm460.9 116.4c-4.5 0-7.9-1.4-10.4-4.2-2.4-2.8-1.8-7.9-1.8-15.4V407.6c0-82-91.1-83.3-103.5-83.3-30.4 0-110.7 1.9-110.7 92.4h39.1c3.7-38.9 42.8-61.2 69.6-61.2 29.5 0 55.3 16.8 55.3 45.1 0 18.8-18.6 30.9-36.1 33.1 0 0-67.9 10.2-83.2 17-15.3 6.7-44.4 25.5-44.4 71.7 0 43.9 27.6 77.7 77.4 77.7 34.2 0 67.9-17.4 91.5-42.4 1.2 13 4.3 25.9 11.1 31.7 6.7 5.8 17.5 10.6 32.3 10.6 7 0 22.8-3 32.3-5.3v-34c-6 1.4-15.2 2.1-18.5 2.1zM510 500.5c0 44.1-35.6 70.3-77.2 70.3-30.5 0-49.8-10.3-49.8-51.9 0-22.7 33-39.2 41.5-40.3 24.5-3.3 54.8-6.5 85.6-16l-.1 37.9z"/></svg>',
            LineToolThreeDrivers: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M25 2v4h1.387l-2.602 7.145L21 12.005V10h-4v.37l-3-1.23V7h-4v.506L6 5.87V3H2v4h1.072l1.76 11H4v1.664l-2.416-.89-.346.94L4 20.73V22h3.45l2.55.937v1.995h3.828v-.584L18 25.88V28h4v-.646l2.002.736.346-.938L22 26.29V24h-1.102l3.473-9.535 2.44.998.38-.926-2.47-1.014L27.46 6H29V2zm1 1h2v2h-2zM3 4h2v2H3zm3 2.95l4 1.636V11h.287l-4.264 7h-.18L4.083 7H6zM11 8h2v2h-2zm3 2.223l3 1.226V14h.652l-5.502 7h-.318l-.11-10H14zM18 11h2v2h-2zm-7.266 1.19l.098 8.81H10v.873l-2-.736V18h-.805zM21 13.085l2.44.998-3.13 8.602L19.583 14H21zm-2.385 1.307l.8 9.607H18v.81l-4.172-1.54V21h-.406zM7 19v2H5v-2zm6 3v2h-2v-1.996zm6 3h2v2h-2z"/></svg>',
            LineToolTimeCycles: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M1 15.5v1s1.647.007 3.277.822C5.907 18.138 7.5 19.667 7.5 23H6v4h4v-4H8.508c.03-.186.287-1.697 1.176-3.252.946-1.656 2.51-3.248 5.316-3.248 2.267 0 3.876 1.59 4.955 3.27 1.01 1.57 1.456 3.032 1.516 3.23H20v4h4v-4h-1.5c0-3.333 1.592-4.862 3.223-5.678C27.353 16.507 29 16.5 29 16.5v-1s-1.853-.007-3.723.928c-1.488.744-2.984 2.162-3.54 4.552-.25-.544-.545-1.132-.942-1.75-1.17-1.82-3.062-3.73-5.795-3.73-3.194 0-5.13 1.908-6.184 3.752-.26.453-.468.905-.638 1.33-.62-2.158-2.05-3.45-3.455-4.154C2.853 15.493 1 15.5 1 15.5zM7 24h2v2H7zm14 0h2v2h-2z"/></svg>',
            LineToolTrendAngle: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30"><path d="M21 5v3.3L8.3 21H5v4h4v-1h16v-1h-7c0-3.5-1.5-5.5-3.3-7l7-7H25V5zm1 1h2v2h-2zm-8 10.7c1.75 1.3 3 3.55 3 6.3H9v-1.3zM6 22h2v2H6z"/></svg>',
            LineToolTrendBasedFibExtension: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M25 17H6.05l-.03-3.68 16.187-7.386-.414-.91L5.016 12.68 5.05 17H5v1h.057v.004l.5-.004H25v-1zm0 3H5v1h20v-1zm0 3H5v1h20v-1z"/></svg>',
            LineToolTrendBasedFibTime: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M17 5v18.95l-3.68.03L5.934 7.792l-.91.414 7.656 16.777L17 24.95V25h1v-.057h.004l-.004-.5V5h-1zm3 0v20h1V5h-1zm3 0v20h1V5h-1z"/></svg>',
            LineToolTrendLine: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30"><path d="M21 5v3.3L8.3 21H5v4h4v-3.3L21.7 9H25V5zm1 1h2v2h-2zM6 22h2v2H6z"/></svg>',
            LineToolTriangle: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M4 3v4h1.012L5 23H4v4h4v-3.373L22.78 7H26V3h-4v1H8V3zm1 1h2v2H5zm18 0h2v2h-2zM8 5h14v1.373L7.22 23H6l.012-16H8zM5 24h2v2H5z"/></svg>',
            LineToolTrianglePattern: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M4.5 3.238V22H3v4h4v-2.05l5-2.24V22h4v-2.08l13.238-5.926L22 10.848V9h-4v.107L14 7.37V5h-4v.63zm1 1.526L10 6.72V9h1.44L5.5 20.883zM11 6h2v2h-2zm3 2.46l4 1.737V13h1.064l-4.755 4.078L12.51 9H14zM19 10h2v2h-2zm-7.184.482L13.488 18H12v2.615l-5 2.24V22h-.94zM22 11.937l4.76 2.07L16 18.823V18h-1.232l5.834-5H22zM13 19h2v2h-2zm-9 4h2v2H4z"/></svg>',
            LineToolVertLine: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.999999 30.000001" width="30" height="30" enable-background="new 0 0 841.9 595.3"><path d="M17 27v-4h-2V7h2V3h-4v4h1v16h-1v4zm-1-1h-2v-2h2zm0-20h-2V4h2z"/></svg>',
            SyncDrawing: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30"><path d="M11.527 5.975c-1.345 0-2.692.508-3.713 1.53l-.283.282c-2.04 2.04-2.04 5.385 0 7.426l2.18 2.178c-.3-1.1-.26-2.29.17-3.36l-.58-.58c-1.09-1.09-1.09-2.8 0-3.89l.29-.28c1.1-1.09 2.8-1.09 3.89 0l2.76 2.76c1.09 1.1 1.09 2.8 0 3.89l-.28.28c-.313.32-.69.54-1.08.67l1.86 1.86c.353-.21.69-.45.994-.75l.28-.285c2.04-2.042 2.04-5.383 0-7.424l-2.76-2.76c-1.02-1.02-2.367-1.53-3.71-1.53zm1.733 5.285c-.337.208-.655.453-.946.744l-.283.283c-2.04 2.04-2.04 5.385 0 7.426l2.76 2.758c2.04 2.05 5.39 2.05 7.43 0l.29-.28c2.04-2.04 2.04-5.38 0-7.42l-2.18-2.18c.31 1.11.26 2.29-.17 3.37l.58.58c1.09 1.1 1.09 2.8 0 3.89l-.28.29c-1.09 1.093-2.793 1.093-3.89 0l-2.76-2.76c-1.09-1.092-1.09-2.796 0-3.89l.28-.284c.31-.304.67-.513 1.04-.65l-1.86-1.86zM18 13.492v.31l.03.028c-.007-.113-.01-.226-.03-.338z"/></svg>',
            "add-note": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path fill="#ffffff" d="M18 10V0h-8v10H0v8h10v10h8V18h10v-8"/></svg>',
            "alarm-clock-plus": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17.5 16"><path d="M2.766.016C1.25.016.016 1.25.016 2.766c0 .518.155.992.406 1.406.98-1.57 2.54-2.737 4.375-3.22C4.293.39 3.58.016 2.767.016zm7.78 0c-.812 0-1.526.374-2.03.938 1.84.48 3.39 1.648 4.375 3.22.26-.416.41-.89.41-1.407 0-1.515-1.23-2.75-2.75-2.75zm-3.874 1.72C3.182 1.736.36 4.588.36 8.078c0 1.362.422 2.624 1.155 3.655L.61 12.89a.857.857 0 1 0 1.343 1.064l.75-.97c1.083.876 2.466 1.407 3.97 1.407.667 0 1.297-.12 1.905-.31v-1.72c-.58.26-1.226.41-1.906.41-2.596 0-4.688-2.09-4.688-4.69 0-2.59 2.092-4.72 4.688-4.72 2.26 0 4.147 1.62 4.594 3.75h1.625c-.46-3.03-3.05-5.37-6.21-5.37zM6.61 4.172a.65.65 0 0 0-.095.03.65.65 0 0 0-.5.657v2.93l-1.25 1.32a.652.652 0 1 0 .938.9l1.438-1.5.19-.19V4.86a.65.65 0 0 0-.72-.688zm6.374 4.625v2.687h-2.72v1.813h2.72v2.688h1.78v-2.688h2.72v-1.813h-2.72V8.798h-1.78z"/></svg>',
            area: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M453.8 360.2l-92.1 6L234 517.7l-86.2-86.1L5.2 514.7v118.9h585.3V268.1z" opacity=".3"/><path d="M234 508.8c-156 222.067-78 111.033 0 0zm309-276.3l-71.3 95.1h-101L236.9 488l-92.1-112.9-38.6 41.6-101 98.1 41.6 41.6 95.1-95.1L234 574.2 397.4 387h104l89.1-118.9z"/></svg>',
            arrow: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="-200 -70 1000 1000"><path d="M486.2 398L109.1 120v468.6L246.3 520l106.6 201.9 99.1-49.6-103-205.7z"/></svg>',
            badge: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 14" width="25" height="14" style="position:relative;top:3px"><path d="M10.43 8.683L9.345 8.68c-.943-.005-1.712-.774-1.716-1.717-.003-.452.172-.877.49-1.195.32-.32.744-.493 1.196-.492l4.002.016c.83.004 2.22.18 2.225 1.316.002.522.427.943.95.942.52-.002.942-.427.94-.95-.007-1.932-1.62-3.188-4.107-3.198l-4.003-.016c-.96-.003-1.862.368-2.54 1.045-.677.68-1.048 1.58-1.044 2.54.003.99.41 1.887 1.06 2.54.652.65 1.55 1.056 2.54 1.06l1.086.004c.522.002.947-.42.948-.942.002-.52-.42-.946-.942-.947zm13.832-1.655c-.008-2.076-1.41-3.59-3.33-3.597l-1.357-.003c-.522-.002-.947.42-.948.942-.002.52.42.946.94.947l1.356.006c.996.003 1.445.863 1.448 1.714.004.453-.17.878-.49 1.196-.317.32-.742.493-1.195.492l-4.27-.017c-1.952-.008-1.955-.924-1.957-1.315-.002-.522-.426-.943-.948-.942-.523.003-.945.428-.943.95.004.896.296 1.63.834 2.17.66.66 1.69 1.023 3.01 1.028l4.27.017c.96.003 1.86-.368 2.54-1.046.675-.678 1.046-1.58 1.043-2.54z"/></svg>',
            bars: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26" height="26"><path d="M16 4v7h-3v2h3v7h2v-2h3v-2h-3V4h-2zM7 6v12H4v2h3v2h2V10h3V8H9V6H7z"/></svg>',
            brackets: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 11"><path d="M5 0c-.942 0-1.69.178-2.25.53-.56.354-.844.834-.844 1.47v1.906c0 .394-.137.686-.437.875-.3.19-.8.277-1.47.285v.875c.62 0 1.08.1 1.403.28.326.18.5.48.5.906V9c0 .632.274 1.12.813 1.47.537.348 1.297.522 2.28.53v-.875c-.585-.008-1.04-.092-1.344-.28-.303-.19-.437-.49-.437-.908V7.095c0-.883-.597-1.403-1.75-1.563v-.06c1.153-.16 1.75-.68 1.75-1.564V2.094C3.22 1.3 3.81.868 5 .844V0zm3 0v.844c1.19.024 1.78.457 1.78 1.25v1.812c0 .883.597 1.403 1.75 1.563v.06c-1.153.16-1.75.68-1.75 1.56v1.844c0 .42-.133.718-.436.907-.303.19-.76.274-1.344.28V11c.983-.008 1.743-.182 2.28-.53.54-.35.814-.838.814-1.47V7.125c0-.427.174-.724.5-.906.326-.187.785-.285 1.406-.285V5.06c-.673-.01-1.17-.092-1.47-.28-.3-.19-.436-.48-.436-.875V2c0-.636-.285-1.116-.844-1.47C9.69.18 8.942 0 8 0z" font-family="Open Sans" font-size="40" letter-spacing="0" word-spacing="0" style="line-height:125%;-inkscape-font-specification:Open Sans"/></svg>',
            bucket: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path fill-rule="evenodd" clip-rule="evenodd" d="M88.3 714H507V295.4H88.3V714zm293.1-544.2v-41.9H213.9v41.9H46.5v83.7h502.4v-83.7H381.4z"/></svg>',
            bucket2: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40.000001 33.999999" width="40" height="34" enable-background="new 0 0 595.3 841.9"><g class="bg"><path stroke-miterlimit="10" stroke-width="20" d="M0 0v34h40V0H0zm1 29h38v4H1v-4z"/></g><g class="icon"><path d="M18.08 12.542c.822.82 1.916-.274 1.095-1.094l-4.923-4.923c-.82-.82-1.914.273-1.094 1.094zm.822-5.744l-6.564 6.564c-.766.766-.766 2.516 0 3.282l4.376 4.376c.766.766 2.516.766 3.282 0l6.564-6.564zm0 2.188l4.923 4.923H13.98z"/><path fill-opacity=".5" d="M27.107 15.55c2.735 2.735 3.282 6.017 0 6.017s-2.735-3.282 0-6.017z"/></g></svg>',
            candles: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26" height="26"><path d="M16 3v3h-2v12h2v5h1v-5h2V6h-2V3h-1zM9 4v5H7v11h2v3h1v-3h2V9h-2V4H9zm-1 6h3v9H8v-9z"/></svg>',
            "chat-search": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 973.125"><path d="M960 832L710.875 582.875C746.438 524.812 768 457.155 768 384 768 171.97 596 0 384 0 171.97 0 0 171.97 0 384c0 212 171.97 384 384 384 73.156 0 140.812-21.562 198.875-57L832 960c17.5 17.5 46.5 17.375 64 0l64-64c17.5-17.5 17.5-46.5 0-64zM384 640c-141.375 0-256-114.625-256-256s114.625-256 256-256 256 114.625 256 256-114.625 256-256 256z"/></svg>',
            compare: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17" width="17" height="17"><path d="M8.5.36L6.45 2H1v1h2l-3 8a3.54 3.5 0 0 0 3.055 2.97 3.5 3.5 0 0 0 .004 0 3.54 3.5 0 0 0 .44.03 3.5 3.5 0 0 0 .35-.018A3.54 3.5 0 0 0 7 11L4 3h9l-3 8a3.54 3.5 0 0 0 3.502 3A3.54 3.5 0 0 0 17 11l-3-8h2V2h-5.45L8.5.36zm0 1.28l.45.36h-.9l.45-.36zm-5 2.694L6 11H1l2.5-6.666zm10 0L16 11h-5l2.5-6.666z"/></svg>',
            config: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="-2.4 120.9 600 600" enable-background="new -2.4 120.9 600 600"><path d="M594 473.5V368.8h-76c-5.7-23.8-15.2-46.4-27.5-66.4l53.8-53.8-73.9-73.9-53.8 53.4c-20.6-12.8-42.7-21.8-66.4-27.5v-75.9H245.5v75.9c-23.8 5.7-46.4 15.2-66.4 27.5l-53.8-53.8-73.9 73.9 53.4 53.8C92 322.6 83 344.7 77.3 368.4h-76V473h75.9c5.7 23.8 15.2 46.4 27.5 66.4L51 593.3l73.9 73.9 53.8-53.4c20.6 12.8 42.7 21.8 66.4 27.5v75.9h104.6v-75.9c23.8-5.7 46.4-15.2 66.4-27.5l53.8 53.8 73.9-73.9-53.4-53.8c12.8-20.6 21.8-42.7 27.5-66.4H594zm-296.4 69.7c-67.3 0-122.3-54.6-122.3-122.3 0-67.3 54.6-122.3 122.3-122.3 67.3 0 122.3 54.6 122.3 122.3-.4 67.4-54.9 122.3-122.3 122.3z"/></svg>',
            cursor: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" enable-background="new 0 0 32 32"><path d="M16 15h1V8h-1v7zm2 1v1h7v-1h-7zm-2 9h1v-7h-1v7zm-8-8h7v-1H8v1z"/></svg>',
            datawindow: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="5 7 23 21" width="23" height="21"><path d="M6 7v18h20V7H6zm18 16H8V9h16v14zm-2-8H10v2h12v-2zm0-4H10v2h12v-2zm0 8H10v2h12v-2z"/></svg>',
            detach: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 586.09999 586.09996" width="586.1" height="586.1" enable-background="new 0 0 595.3 841.9"><path d="M0 586.1h117.2l351.7-351.7 117.2 117.3V0H234.4l117.3 117.2L0 468.9z"/></svg>',
            dot: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="-750 -750 2095.3 2341.9" enable-background="new 0 0 595.3 841.9"><circle cx="297.6" cy="420.9" r="294.8"/></svg>',
            download: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 18" width="26" height="18"><path d="M12 0C8.4 0 5.4 2.8 5.1 6.3 2 6.1.1 9 0 11.1 0 13.9 2.2 16 4.7 16h4.9l-1-1H4.7C2.8 15 1 13.3 1 11.2 1 9 3 6.7 6 7.4 6 3 9 1 12 1s3.7 1.2 5.1 2.9c1.5.1 3.3.6 4.2 1.7 1 1.5 1.2 2.6 1.2 4.2 1.4.4 2.5 1.5 2.5 2.7-.2 1.6-1.3 2.5-2.6 2.5h-5l-1 1h5.9c2.8 0 3.7-1.9 3.7-3.5s-1-3-2.5-3.4c0-1.6-.5-2.9-1.4-4.1-.9-1.2-2.7-2-4.5-2.1C16.3 1.2 14.3 0 12 0zm-2 7v5H7l6 6 6-6h-3V7h-6zm1 1h4v5h1.6L13 16.6 9.4 13H11V8z"/></svg>',
            drawginmode: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" enable-background="new 0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M19.2 6.6c-.4-.4-1-.4-1.4 0l-1.2 1.2 1.8 1.8 1.9-1.9-1.1-1.1zM6 22l2.8-2.7L7.5 18 6 22zm3.3-6.9c-.4.4-1.6 1.7-1.2 2.1l1.3 1.3 8.3-8.3-1.8-1.8-6.6 6.7z" opacity=".4"/><path fill-rule="evenodd" clip-rule="evenodd" d="M9 25l2.8-2.7-1.3-1.3L9 25zM22.2 9.6c-.4-.4-1-.4-1.4 0l-1.2 1.2 1.8 1.8 1.9-1.9-1.1-1.1zm-9.9 8.5c-.4.4-1.6 1.7-1.2 2.1l1.3 1.3 8.3-8.3-1.8-1.8-6.6 6.7z" opacity=".75"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15.3 21.1c-.4.4-1.6 1.7-1.2 2.1l2.6 2.6c.4.4 1.7-.8 2.1-1.2l6.6-6.6-3.6-3.5-6.5 6.6zM12 28l4-1.5-2.5-2.5-1.5 4zm15.4-13.2l-2.1-2.1c-.4-.4-1-.4-1.4 0l-1.2 1.2 3.5 3.5 1.2-1.2c.3-.4.3-1 0-1.4z"/></svg>',
            "earnings-calendar": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 21" width="21" height="21"><path d="M6 1.5A4.5 1.5 0 0 0 1.5 3 4.5 1.5 0 0 0 6 4.5 4.5 1.5 0 0 0 10.5 3 4.5 1.5 0 0 0 6 1.5zm8.8 2.7a4.5 1.5 0 0 0-4.5 1.5 4.5 1.5 0 0 0 4.5 1.5 4.5 1.5 0 0 0 4.5-1.5 4.5 1.5 0 0 0-4.5-1.5zm-12.6.7a4.5 1.5 0 0 0-.7.8A4.5 1.5 0 0 0 6 7.2a4.5 1.5 0 0 0 3.8-.7v-.8c0-.2.1-.5.2-.7a4.5 1.5 0 0 0-.2-.1 4.5 1.5 0 0 1-3.8.7 4.5 1.5 0 0 1-3.8-.7zm0 2.7a4.5 1.5 0 0 0-.7.8 4.5 1.5 0 0 0 3 1.4v-.3c0-.4.2-.7.5-1 .2-.1.3-.1.4-.2a4.5 1.5 0 0 1-3.2-.7zm16.4 0a4.5 1.5 0 0 1-3.8.7 4.5 1.5 0 0 1-1.3-.1c.2.1.3.2.5.3.3.3.5.6.5 1v.4a4.5 1.5 0 0 0 .3 0 4.5 1.5 0 0 0 4.5-1.5 4.5 1.5 0 0 0-.7-.8zM9.5 8A4.5 1.5 0 0 0 5 9.5 4.5 1.5 0 0 0 9.5 11 4.5 1.5 0 0 0 14 9.5 4.5 1.5 0 0 0 9.5 8zm-7.3 2.3a4.5 1.5 0 0 0-.7.8 4.5 1.5 0 0 0 3 1.4v-1.6a4.5 1.5 0 0 1-2.3-.6zm16.4 0a4.5 1.5 0 0 1-3.8.7 4.5 1.5 0 0 1-.3 0v1.6a4.5 1.5 0 0 0 .3 0 4.5 1.5 0 0 0 4.5-1.5 4.5 1.5 0 0 0-.7-.8zM5.7 11.4a4.5 1.5 0 0 0-.7.8 4.5 1.5 0 0 0 4.5 1.5 4.5 1.5 0 0 0 4.5-1.5 4.5 1.5 0 0 0-.7-.8 4.5 1.5 0 0 1-3.8.7 4.5 1.5 0 0 1-3.8-.7zM18.6 13a4.5 1.5 0 0 1-3.8.7 4.5 1.5 0 0 1-.3 0v1.6a4.5 1.5 0 0 0 .3 0 4.5 1.5 0 0 0 4.5-1.5 4.5 1.5 0 0 0-.7-.8zM5.7 14.1a4.5 1.5 0 0 0-.7.8 4.5 1.5 0 0 0 4.5 1.5 4.5 1.5 0 0 0 4.5-1.5 4.5 1.5 0 0 0-.7-.8 4.5 1.5 0 0 1-3.8.7 4.5 1.5 0 0 1-3.8-.7zm0 2.7a4.5 1.5 0 0 0-.7.8 4.5 1.5 0 0 0 4.5 1.5 4.5 1.5 0 0 0 4.5-1.5 4.5 1.5 0 0 0-.7-.8 4.5 1.5 0 0 1-3.8.7 4.5 1.5 0 0 1-3.8-.7z"/></svg>',
            "economic-calendar": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" width="22" height="22"><path d="M6.5 1C5.67 1 5 1.67 5 2.5v1C5 4.33 5.67 5 6.5 5S8 4.33 8 3.5v-1C8 1.67 7.33 1 6.5 1zm8 0c-.83 0-1.5.67-1.5 1.5v1c0 .83.67 1.5 1.5 1.5S16 4.33 16 3.5v-1c0-.83-.67-1.5-1.5-1.5zM1 4v16h19V4h-3.05c-.238 1.164-1.262 2-2.45 2-1.186-.002-2.208-.838-2.445-2H8.95C8.71 5.164 7.687 6 6.5 6c-1.186-.002-2.208-.838-2.445-2H1zm20 2v15H3v1h19V6h-1zM2 8h17v11H2V8zm3 1v3h3V9H5zm4 0v3h3V9H9zm4 0v3h3V9h-3zm-8 4v3h3v-3H5zm4 0v3h3v-3H9zm4 0v3h3v-3h-3z"/></svg>',
            eraser: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M17.948 5.54L7.705 15.468s-.942 1.36-1.67 3.24c-1.255 3.03.314 4.6 1.15 5.226.626.418 4.705 1.045 6.376-.524l10.77-10.767.11-3.866-6.49-3.237zm5.333 7.004l-9.61 9.616c-1.77 1.777-5.43 1.36-6.16.836-.42-.315-1.462-1.987-.63-3.764.838-1.986 1.57-3.24 1.57-3.24l9.515-9.407 5.435 3.03-.107 2.93zm-.52-2.822l-9.2 9.095-5.22-3.034-.31.627 5.124 2.928c-.105.524-.626 1.986-1.252 3.03-1.043 1.57-2.61 1.672-2.61 1.672l.94.418s1.152.106 2.09-1.36c.94-1.465 1.57-3.345 1.57-3.345l9.824-9.617-.94-.414zm1.46-.942l-5.02 4.91v3.453l5.02-4.497zm-6.27-3.24l-4.81 4.702 6.17 3.45 5.02-4.81z"/></svg>',
            favorite: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.5 13.8"><path d="M7.3 0l2.2 4.5 5 .7-3.6 3.6.8 5-4.4-2.4-4.5 2.4.8-5L0 5.2l5-.7z"/></svg>',
            font: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40.000001 33.999999" width="40" height="34" enable-background="new 0 0 595.3 841.9"><g class="bg"><path stroke-miterlimit="10" stroke-width="20" d="M0 0v34h40V0H0zm1 29h38v4H1v-4z"/></g><g class="icon"><text x="13.526" y="20.771" font-family="sans-serif" font-size="18.94" letter-spacing="0" word-spacing="0" style="line-height:125%"><tspan x="13.526" y="20.771">A</tspan></text></g></svg>',
            format: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="-2.4 120.9 14 14" width="14" height="14" enable-background="new -2.4 120.9 600 600"><path d="M-2.4 120.9v14h14v-14zm6.086 1.803H5.52v1.332c.416.1.805.258 1.166.48l.944-.935 1.297 1.297-.943.943c.215.35.38.748.48 1.164H9.8v1.837H8.463c-.1.417-.257.806-.48 1.167l.935.944-1.296 1.298-.944-.943c-.35.215-.747.38-1.164.48v1.332H3.677v-1.33c-.415-.102-.804-.258-1.165-.482l-.943.936-1.298-1.296.94-.945c-.216-.35-.38-.748-.482-1.165H-.597v-1.835H.737c.1-.416.257-.805.48-1.166l-.935-.944 1.296-1.297.944.943c.35-.215.747-.38 1.164-.48zm.912 3.053c-1.188 0-2.143.963-2.143 2.143 0 1.187.963 2.143 2.143 2.143 1.18 0 2.14-.963 2.145-2.145 0-1.188-.966-2.144-2.145-2.144z"/></svg>',
            fullscreen: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 586.09999 586.09996" width="586.1" height="586.1" enable-background="new 0 0 595.3 841.9"><path d="M172.6 367.9l-97.7 97.7L0 390.7v195.4h195.4l-74.9-74.9 97.7-97.7-45.6-45.6zM195.4 0H0v195.4l74.9-74.9 97.7 97.7 45.6-45.6-97.7-97.7L195.4 0zm195.3 0l74.9 74.9-97.7 97.7 45.6 45.6 97.7-97.7 74.9 74.9V0H390.7zm22.8 367.9l-45.6 45.6 97.7 97.7-74.9 74.9h195.4V390.7l-74.9 74.9-97.7-97.7z"/></svg>',
            gear: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13"><path d="M12.888 5.894s-.236-.088-.92-.152c-.834-.077-1.086-.39-1.363-.778H10.6c-.035-.093-.072-.184-.113-.274h.003c-.08-.47-.122-.87.414-1.515.438-.527.542-.756.542-.756-.103-.265-.35-.51-.35-.51s-.247-.248-.508-.35c0 0-.23.103-.757.54-.64.536-1.04.493-1.512.414h-.003c-.09-.04-.18-.077-.274-.112V2.39c-.39-.277-.703-.53-.78-1.363-.063-.683-.152-.92-.152-.92C6.85 0 6.5 0 6.5 0s-.35 0-.607.11c0 0-.088.238-.15.92-.08.834-.392 1.085-.78 1.363v.012c-.094.035-.185.07-.275.112h-.003c-.472.08-.87.122-1.516-.413-.53-.438-.76-.542-.76-.542-.26.103-.51.35-.51.35s-.246.247-.35.507c0 0 .105.23.543.752.536.645.493 1.044.414 1.515h.002c-.04.09-.078.18-.113.272h-.005c-.277.39-.53.7-1.364.78-.68.06-.918.15-.918.15C0 6.15 0 6.5 0 6.5s0 .35.112.606c0 0 .236.09.92.15.834.078 1.085.392 1.363.78H2.4c.036.093.072.184.113.274H2.51c.08.47.122.87-.414 1.515-.438.526-.542.756-.542.756.103.265.35.51.35.51s.247.248.508.35c0 0 .23-.103.757-.54.64-.536 1.04-.493 1.512-.414h.003c.09.04.18.077.274.112v.012c.39.276.702.53.78 1.362.063.683.152.92.152.92.257.11.606.11.606.11s.35 0 .604-.11c0 0 .09-.236.152-.92.077-.832.39-1.084.78-1.362v-.012c.093-.035.184-.072.274-.112h.004c.472-.08.87-.122 1.516.413.528.436.76.54.76.54.26-.103.506-.35.506-.35s.247-.247.35-.508c0 0-.104-.228-.542-.755-.536-.644-.493-1.044-.414-1.515h-.003c.04-.09.078-.18.112-.273h.003c.277-.39.53-.704 1.364-.78.682-.064.918-.15.918-.15C13 6.846 13 6.5 13 6.5s0-.35-.112-.606zM6.5 9.537c-1.68 0-3.04-1.36-3.04-3.037 0-1.677 1.36-3.037 3.04-3.037S9.54 4.823 9.54 6.5c0 1.677-1.36 3.037-3.04 3.037z"/></svg>',
            group: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M5.5 13A2.5 2.5 0 0 0 3 15.5 2.5 2.5 0 0 0 5.5 18 2.5 2.5 0 0 0 8 15.5 2.5 2.5 0 0 0 5.5 13zm9.5 0a2.5 2.5 0 0 0-2.5 2.5A2.5 2.5 0 0 0 15 18a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 15 13zm9.5 0a2.5 2.5 0 0 0-2.5 2.5 2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5z"/></svg>',
            heikenAshi: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26" height="26"><path d="M16 3v3h-2v12h2v5h1v-5h2V6h-2V3h-1zM9 4v5H7v11h2v3h1v-3h2V9h-2V4H9z"/></svg>',
            help: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M297 127.5c-161.8 0-293 131.2-293 293s131.2 293 293 293 293-131.2 293-293-131.2-293-293-293zm0 537.2c-134.8 0-244.2-109.3-244.2-244.2S162.2 176.3 297 176.3s244.2 109.3 244.2 244.2S431.8 664.7 297 664.7zm-24.4-122.1h48.8v-48.8h-48.8v48.8zM368 319c-17.7-13.9-41.6-20.9-71.5-20.9-28.5 0-51.5 6.9-69 20.6-17.5 13.7-26.8 33.2-28.2 52.9h48.8c3.3-13.7 8.4-21.5 17.3-28.2 8.9-6.7 20-10.1 33.3-10.1 13.7 0 24.7 3.2 32.8 9.6 8.1 6.4 12.2 14.2 12.2 23.2 0 6.5-2.3 12.4-6.9 17.8-3 3.4-12.1 10.6-27.3 21.6-15.2 11-25.4 20.9-30.5 29.7-5.1 8.8-7.6 20-7.6 33.6 0 1.3 1-5.7 1.2.4h48.8c-.2-12.7-1.5-10.9 1.2-15.9 2.7-4.9 9.5-11.5 20.5-19.6 21.3-15.7 35.2-28.1 41.7-37.3 6.5-9.1 9.8-18.8 9.8-29 0-18.3-8.9-34.5-26.6-48.4z"/></svg>',
            hide: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M0 0v14h14V0zm7 2.69c3.018 0 5.172 3.232 5.172 4.31 0 1.077-2.154 4.31-5.172 4.31S1.828 8.08 1.828 7c0-1.077 2.154-4.31 5.172-4.31zm0 1.508C5.49 4.198 4.198 5.49 4.198 7S5.49 9.802 7 9.802 9.802 8.51 9.802 7 8.51 4.198 7 4.198zm0 1.68c.646 0 1.12.476 1.12 1.122 0 .646-.473 1.12-1.12 1.12-.646 0-1.12-.473-1.12-1.12 0-.646.473-1.12 1.12-1.12z"/></svg>',
            hideAllDrawings: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" enable-background="new 0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 14c.1 0 .3 0 .4.1l.7-.7c-.4-.2-.7-.3-1.1-.3-1.6 0-2.9 1.3-2.9 2.9 0 .4.1.8.2 1.1l.8-.8v-.4c0-1 .8-1.9 1.9-1.9zm-4.7 5.2C10.2 18 8.9 16.7 8.3 16c1.1-1.2 4.7-5 8.2-5 .9 0 1.9.3 2.8.7l.7-.7c-1.1-.6-2.3-.9-3.5-.9-4.6 0-9 5.4-9.2 5.6L7 16l.3.4c.1.1 1.6 2 3.8 3.6l.7-.8zm13.9-3.5c-.1-.1-1.5-1.8-3.4-3.2l2.8-2.8-.7-.7L9 24.3l.7.7 3.7-3.7c1 .4 2 .7 3 .7 4.9 0 9-5.4 9.2-5.6l.4-.4-.3-.3zm-7.2.5c-.1.9-.9 1.6-1.7 1.7l1.7-1.7zm-2 4.8c-.7 0-1.5-.2-2.2-.5l1.7-1.7c.2 0 .4.1.6.1 1.5 0 2.9-1.3 2.9-2.9 0-.2 0-.4-.1-.5l2.3-2.3c1.4 1.1 2.6 2.3 3.1 2.9-1.2 1.2-4.6 4.9-8.3 4.9z"/></svg>',
            hollowCandles: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26" height="26"><path d="M16 3v3h-2v12h2v5h1v-5h2V6h-2V3h-1zM9 4v5H7v11h2v3h1v-3h2V9h-2V4H9zm6 3h3v10h-3V7zm-7 3h3v9H8v-9z"/></svg>',
            "i-in-circle": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" width="22px" height="22px"><g fill-rule="evenodd"><path d="M12 16h-2v-6h2v6zm0-8h-2V6h2v2z"/><path d="M11.016.25C5.09.25.282 5.06.282 10.984c0 5.925 4.81 10.734 10.734 10.734 5.925 0 10.734-4.81 10.734-10.734S16.94.25 11.016.25zm0 1.5c5.096 0 9.234 4.138 9.234 9.234s-4.138 9.234-9.234 9.234-9.234-4.138-9.234-9.234S5.92 1.75 11.016 1.75z"/></g></svg>',
            indicators: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17" width="17" height="17"><path d="M16 0a1 1 0 0 0-1 1 1 1 0 0 0 .127.484L13.017 5A1 1 0 0 0 13 5a1 1 0 0 0-.258.035L10.965 3.26A1 1 0 0 0 11 3a1 1 0 0 0-1-1 1 1 0 0 0-1 1 1 1 0 0 0 .082.393L7.12 6.008a1 1 0 0 0-.12-.01 1 1 0 0 0-.44.104l-1.564-1.04A1 1 0 0 0 5 4.998a1 1 0 0 0-1-1 1 1 0 0 0-1 1 1 1 0 0 0 .002.066l-1.56 1.04A1 1 0 0 0 1 5.998a1 1 0 0 0-1 1 1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-.002-.064l1.56-1.04A1 1 0 0 0 4 6a1 1 0 0 0 .44-.103l1.564 1.04A1 1 0 0 0 6 7a1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-.082-.39l1.965-2.62A1 1 0 0 0 10 4a1 1 0 0 0 .258-.035l1.777 1.777A1 1 0 0 0 12 6a1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-.127-.482L15.983 2A1 1 0 0 0 16 2a1 1 0 0 0 1-1 1 1 0 0 0-1-1zm-1 5v10h2V5h-2zM9 7v8h2V7H9zM3 9v6h2V9H3zm9 1v5h2v-5h-2zM0 11v4h2v-4H0zm6 0v4h2v-4H6z"/></svg>',
            kagi: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26" height="26"><path d="M7 4v17H5v-4H4v5h4V6h2v11h8l-.076-7H20v10h3V7h-8v7h-2V4z"/></svg>',
            "l-in-circle": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11" width="11" height="11"><g fill-rule="evenodd"><path d="M3.905 8.25V2.63H4.9v4.734h2.54v.886H3.906z"/><path d="M5.5 0A5.502 5.502 0 0 0 0 5.5C0 8.536 2.465 11 5.5 11 8.536 11 11 8.535 11 5.5S8.535 0 5.5 0zm0 1C7.983 1 10 3.018 10 5.5 10 7.983 7.982 10 5.5 10A4.502 4.502 0 0 1 1 5.5C1 3.017 3.018 1 5.5 1z"/></g></svg>',
            "large-slider-handle": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><g transform="translate(0 -1032.362)"><circle fill="#fff" cx="10" cy="1042.362" r="8"/><path fill="#aaafb9" d="M10 1033.362c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9-4.03-9-9-9zm0 1.125c4.35 0 7.875 3.526 7.875 7.875 0 4.35-3.526 7.875-7.875 7.875-4.35 0-7.875-3.526-7.875-7.875 0-4.35 3.526-7.875 7.875-7.875zm0 5.875a2 2 0 0 0-2 2 2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2z"/></g></svg>',
            "layout-1": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.000121 23.00011" width="29" height="23"><path d="M6 3v17h17V3H6zm1 1h15v15H7V4z"/><path d="M7 4h15v15H7z" opacity=".2"/></svg>',
            "layout-10": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.000121 23.00011" width="29" height="23"><path d="M7 19h15v-6H7v6zm0-9h6V4H7v6zm9 0h6V4h-6v6z" opacity=".2"/><path d="M6 20h17v-8H6v8zm0-9h8V3H6v8zm1 8v-6h15v6H7zm0-9V4h6v6H7zm8 1h8V3h-8v8zm1-1V4h6v6h-6z"/></svg>',
            "layout-2": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.000121 23.00011" width="29" height="23"><path d="M6 4h7v15H6zm10 0h7v15h-7z" opacity=".2"/><path d="M5 3v17h9V3H5zm1 1h7v15H6V4zm9-1v17h9V3h-9zm1 1h7v15h-7V4z"/></svg>',
            "layout-3": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.000121 23.00011" width="29" height="23"><path d="M7 20v-7h15v7zm0-10V3h15v7z" opacity=".2"/><path d="M6 21h17v-9H6v9zm1-1v-7h15v7H7zm-1-9h17V2H6v9zm1-1V3h15v7H7z"/></svg>',
            "layout-4": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.000121 23.00011" width="29" height="23"><path d="M7 4h15v3H7zm0 6h15v3H7zm0 6h15v3H7z" opacity=".2"/><path d="M6 3v5h17V3H6zm1 1h15v3H7V4zM6 9v5h17V9H6zm1 1h15v3H7v-3zm-1 5v5h17v-5H6zm1 1h15v3H7v-3z"/></svg>',
            "layout-5": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.000121 23.00011" width="29" height="23"><path d="M7 4v15h3V4H7zm6 0v15h3V4h-3zm6 0v15h3V4h-3z" opacity=".2"/><path d="M6 3v17h5V3H6zm6 0v17h5V3h-5zm6 0v17h5V3h-5zM7 4h3v15H7V4zm6 0h3v15h-3V4zm6 0h3v15h-3V4z"/></svg>',
            "layout-6": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.000121 23.00011" width="29" height="23"><path d="M7 4v15h6V4H7zm9 0v6h6V4h-6zm0 9v6h6v-6h-6z" opacity=".2"/><path d="M6 3v17h8V3H6zm9 0v8h8V3h-8zM7 4h6v15H7V4zm9 0h6v6h-6V4zm-1 8v8h8v-8h-8zm1 1h6v6h-6v-6z"/></svg>',
            "layout-7": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.000121 23.00011" width="29" height="23"><path d="M7 4v6h6V4H7zm9 0v6h6V4h-6zm-9 9v6h6v-6H7zm9 0v6h6v-6h-6z" opacity=".2"/><path d="M6 3v8h8V3H6zm9 0v8h8V3h-8zM7 4h6v6H7V4zm9 0h6v6h-6V4zM6 12v8h8v-8H6zm9 0v8h8v-8h-8zm-8 1h6v6H7v-6zm9 0h6v6h-6v-6z"/></svg>',
            "layout-8": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.000121 23.00011" width="29" height="23"><path d="M7 4v6h3V4H7zm6 0v6h3V4h-3zm6 0v6h3V4h-3zM7 13v6h3v-6H7zm6 0v6h3v-6h-3zm6 0v6h3v-6h-3z" opacity=".2"/><path d="M6 3v8h5V3H6zm6 0v8h5V3h-5zm6 0v8h5V3h-5zM7 4h3v6H7V4zm6 0h3v6h-3V4zm6 0h3v6h-3V4zM6 12v8h5v-8H6zm6 0v8h5v-8h-5zm6 0v8h5v-8h-5zM7 13h3v6H7v-6zm6 0h3v6h-3v-6zm6 0h3v6h-3v-6z"/></svg>',
            "layout-9": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.000121 23.00011" width="29" height="23"><path d="M7 4v6h3V4H7zm4 0v6h3V4h-3zm4 0v6h3V4h-3zm4 0v6h3V4h-3zM7 13v6h3v-6H7zm4 0v6h3v-6h-3zm4 0v6h3v-6h-3zm4 0v6h3v-6h-3z" opacity=".2"/><path d="M6 3v8h17V3H6zm1 1h3v6H7V4zm4 0h3v6h-3V4zm4 0h3v6h-3V4zm4 0h3v6h-3V4zM6 12v8h17v-8H6zm1 1h3v6H7v-6zm4 0h3v6h-3v-6zm4 0h3v6h-3v-6zm4 0h3v6h-3v-6z"/></svg>',
            left: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="-80 -25 140 140"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 12L-.7.7-41 43.2l.1.1-.1.1L-.7 85.9l10-10.6-29.7-31.2z"/></svg>',
            "legend-delete": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="-2.4 120.9 14 14" width="14" height="14" enable-background="new -2.4 120.9 600 600"><path d="M-2.4 120.9v14h14v-14zm3.34 2.123l3.66 3.66 3.66-3.66 1.217 1.22-3.66 3.658 3.66 3.66-1.22 1.22-3.658-3.66-3.66 3.66-1.22-1.22 3.66-3.66-3.66-3.66z"/></svg>',
            "legend-down": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M14 14V0H0v14zm-7-2L4.2 9H6V3h2v6h1.8z"/></svg>',
            "legend-maximize": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M0 0v14h14V0zm7 1l2.8 3H8v2.5H6V4H4.2zM6 7.5h2V10h1.8L7 13l-2.8-3H6z"/></svg>',
            "legend-restore": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M0 0v14h14V0H0zm6 1.5h2V4h1.8L7 7l2.8 3H8v2.5H6V10H4.2L7 7 4.2 4H6V1.5z"/></svg>',
            "legend-sourcecode": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="-2.4 120.9 14 14" width="14" height="14" enable-background="new -2.4 120.9 600 600"><path d="M-2.4 120.9v14h14v-14zm4.833 2.042h1.084v1.083H2.433c-.143 0-.18.027-.24.09-.063.062-.135.19-.187.365-.103.353-.114-.147-.114.17 0 .84.01 1.425-.157 2-.127.44-.4.836-.76 1.25.36.413.633.81.76 1.248.167.575.157 1.16.157 2.002 0 .317.01-.185.114.168.052.176.124.305.186.368s.098.09.24.09h1.085v1.082H2.433c-.398 0-.768-.166-1.01-.41-.244-.245-.372-.54-.456-.826-.167-.57-.16-.155-.16-.472 0-.84-.01-1.34-.113-1.7-.09-.31-.328-.612-.7-1.008h-.81v-1.084h.81c.372-.397.61-.7.7-1.01.104-.358.114-.857.114-1.698 0-.317-.008.1.16-.472.083-.286.21-.583.454-.828.242-.244.613-.408 1.01-.408zm3.25 0h1.084c.398 0 .768.164 1.01.408.244.245.374.542.458.828.168.57.157.155.157.472 0 .84.01 1.34.114 1.7.09.31.328.61.7 1.008h.81v1.084h-.81c-.372.397-.61.7-.7 1.01-.104.358-.114.857-.114 1.698 0 .317.01-.1-.157.472-.084.286-.214.58-.457.826-.243.244-.613.41-1.01.41H5.682v-1.083h1.084c.143 0 .18-.026.24-.09.063-.062.138-.19.19-.367.103-.353.11.15.11-.168 0-.84-.01-1.427.158-2.002.127-.44.4-.835.76-1.248-.36-.414-.633-.81-.76-1.25-.167-.575-.157-1.16-.157-2 0-.317-.008.183-.112-.17-.05-.176-.126-.303-.188-.366s-.098-.09-.24-.09H5.682v-1.082z"/></svg>',
            "legend-up": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M0 0v14h14V0zm7 2l2.8 3H8v6H6V5H4.2z"/></svg>',
            "line-dashed": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path d="M5 12v1h3v-1H5zm4 0v1h3v-1H9zm4 0v1h3v-1h-3zm4 0v1h3v-1h-3zm4 0v1h3v-1h-3zm4 0v1h3v-1h-3z"/></svg>',
            "line-dotted": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path d="M5 12v1h1v-1H5zm2 0v1h1v-1H7zm2 0v1h1v-1H9zm2 0v1h1v-1h-1zm2 0v1h1v-1h-1zm2 0v1h1v-1h-1zm2 0v1h1v-1h-1zm2 0v1h1v-1h-1zm2 0v1h1v-1h-1zm2 0v1h1v-1h-1zm2 0v1h1v-1h-1z"/></svg>',
            "line-left-arrow": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path d="M6.867 10.36L5 12.48l1.867 2.122V13H27v-1H6.867v-1.64z"/></svg>',
            "line-left-extend": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path d="M16 11v1H5v1h11v1h3v-1h5v1h3v-3h-3v1h-5v-1h-3zm1 1h1v1h-1v-1zm8 0h1v1h-1v-1z"/></svg>',
            "line-left-normal": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path d="M5 11v3h3v-1h19v-1H8v-1H5zm1 1h1v1H6v-1z"/></svg>',
            "line-right-arrow": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path d="M25.133 10.36L27 12.48l-1.867 2.122V13H5v-1h20.133v-1.64z"/></svg>',
            "line-right-extend": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path d="M16 11v1h11v1H16v1h-3v-1H8v1H5v-3h3v1h5v-1h3zm-1 1h-1v1h1v-1zm-8 0H6v1h1v-1z"/></svg>',
            "line-right-normal": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path d="M27 11v3h-3v-1H5v-1h19v-1h3zm-1 1h-1v1h1v-1z"/></svg>',
            "line-width-1": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 13h22v-1H5v1z"/></svg>',
            "line-width-2": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 14h22v-2H5v2z"/></svg>',
            "line-width-3": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 14h22v-3H5v3z"/></svg>',
            "line-width-4": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 15h22v-4H5v4z"/></svg>',
            line: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M142.5 447.4c-102.74 102.74-83.44 83.44 0 0m399-186.2l-70.9 94.6H370.1l-136 159.6-91.6-112.3-38.5 41.4L6.5 542l41.4 41.4 94.6-94.6 91.6 112.3 162.6-186.2h103.5l88.7-118.2z"/></svg>',
            lineBreak: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26" height="26"><path d="M12 2v9h3V2h-3zm3 9v12h3V11h-3zm-3 0H9v9h3v-9zm1-8h1.05v6.95H13V3zm-3 9h1v7h-1v-7z"/></svg>',
            "linetool-bukkit": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 14" width="16" height="16"><path d="M5.75 5.75c.75.75 1.75-.25 1-1L2.25.25c-.75-.75-1.75.25-1 1zM6.5.5l-6 6c-.7.7-.7 2.3 0 3l4 4c.7.7 2.3.7 3 0l6-6zm0 2L11 7H2z"/><path fill-opacity=".5" d="M14 8.5c2.5 2.5 3 5.5 0 5.5s-2.5-3 0-5.5z"/></svg>',
            "linetool-clone": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path d="M0 0v11h6v5h11V5h-6V0H0zm2 2h7v3H6v4H2V2zm6 5h1v2H8V7zm3 0h4v7H8v-3h3V7z"/></svg>',
            "linetool-layers": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path d="M0 0v11h6v5h11V5h-6V0zm11 7h4v7H8v-3h3z"/></svg>',
            "linetool-visibility": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 10" width="12" height="10"><path d="M6 0C2.5 0 0 3.75 0 5s2.5 5 6 5 6-3.75 6-5-2.5-5-6-5zm0 1.75c1.75 0 3.25 1.5 3.25 3.25S7.75 8.25 6 8.25 2.75 6.75 2.75 5 4.25 1.75 6 1.75zM6 3.7c-.75 0-1.3.55-1.3 1.3S5.25 6.3 6 6.3 7.3 5.75 7.3 5 6.75 3.7 6 3.7z"/></svg>',
            link: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 14" width="30" height="14"><path d="M10.43 8.683L9.345 8.68c-.943-.005-1.712-.774-1.716-1.717-.005-.452.17-.877.49-1.195.32-.32.742-.493 1.194-.492l4.002.016c.83.004 2.22.18 2.225 1.316.003.522.428.943.95.942.52-.002.943-.427.94-.95-.006-1.932-1.62-3.188-4.106-3.198L9.32 3.386c-.96-.003-1.86.368-2.54 1.045-.676.68-1.047 1.58-1.043 2.54.003.99.41 1.89 1.06 2.54.652.65 1.55 1.058 2.54 1.06l1.086.006c.522.002.947-.42.948-.942.003-.52-.42-.946-.94-.947zm13.832-1.655c-.008-2.076-1.41-3.59-3.33-3.597h-1.357c-.522-.003-.947.42-.948.94-.002.52.42.947.94.948l1.356.006c.996.003 1.445.863 1.448 1.714.006.453-.17.878-.49 1.196-.315.32-.74.493-1.193.492l-4.27-.017c-1.952-.01-1.955-.925-1.957-1.316-.003-.522-.427-.943-.95-.942-.522.004-.944.43-.942.95.004.897.296 1.63.834 2.17.66.66 1.69 1.024 3.01 1.03l4.27.016c.96.003 1.86-.368 2.54-1.046.675-.678 1.046-1.58 1.043-2.54z"/></svg>',
            list: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17"><g stroke="#cdbd28" stroke-linecap="round" stroke-width="0"><path d="M0 13h2v2H0zM3 13h13v2H3zM0 9h2v2H0zM3 5h13v2H3zM0 4.998h2v2H0zM3 9h13v2H3zM0 1h2v2H0zM3 1h13v2H3z"/></g></svg>',
            lock: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 12"><path d="M4 0C2.347 0 1 1.347 1 3v2H.3c-.165 0-.3.135-.3.3v6.4c0 .165.135.3.3.3h8.4c.165 0 .3-.135.3-.3V5.3c0-.165-.135-.3-.3-.3H8V3c0-1.653-1.347-3-3-3H4zm0 1h1c1.117 0 2 .883 2 2v2H2V3c0-1.117.883-2 2-2z"/></svg>',
            lockAllDrawings: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" enable-background="new 0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M20 13h-1v-1.5C19 9 17 7 14.5 7S10 9 10 11.5V13H9c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h11c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1zm-8-.9c0-1.7 1.1-3.1 2.5-3.1s2.5 1.4 2.5 3.1v.9h-5v-.9z"/></svg>',
            magnet: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" enable-background="new 0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M22 14c-.3-3.9-3.5-7-7.5-7S7.3 10.1 7 14v9h5v-9h.1c.2-1.1 1.2-2 2.4-2s2.2.9 2.4 2h.1v9h5v-9zm-11 8H8v-4h3v4zm10 0h-3v-4h3v4z"/></svg>',
            maximize: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 260.9 586.29997" width="260.9" height="586.3" enable-background="new 0 0 595.3 841.9"><path fill-rule="evenodd" clip-rule="evenodd" d="M163 325.7H97.9v130.2H.2v32.6h32.6v32.6h32.6v32.6H98v32.6h65.1v-32.6h32.6v-32.6h32.6v-32.6h32.6v-32.6h-97.7V325.7zm65.1-227.9V65.2h-32.6V32.6h-32.6V0H97.8v32.6H65.2v32.6H32.6v32.6H0v32.6h97.7v130.2h65.1V130.3h97.7V97.7h-32.4z"/></svg>',
            measure: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30"><path d="M15 6v2h-1v6h1v2h1v-2h1V8h-1V6zm5 1v2h-1v6h1v2h1v-2h1V9h-1V7zM4 8v16h23v-5H9V8zm1 1h3v2H6v1h2v2H6v1h2v2H6v1h2v1.293l-3 3zm3.707 11H11v2h1v-2h2v2h1v-2h2v2h1v-2h2v2h1v-2h2v2h1v-2h2v3H5.707z"/></svg>',
            mentios: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.888672 15.336914" width="14.889" height="15.337" enable-background="new 0 0 32 32"><path d="M14.062 7.54q0 1.085-.32 2.1-.313 1.017-.9 1.853H9.406l-.21-.907q-.58.47-1.11.72-.53.25-1.22.25-1.31 0-2.1-.993-.782-.992-.782-2.773 0-1.774.96-2.83.962-1.053 2.298-1.053.572 0 1.01.133.437.125.944.382v-.375h1.243v6.578h1.89q.33-.585.49-1.46.17-.883.17-1.58 0-1.28-.36-2.327-.35-1.047-1.04-1.797-.686-.75-1.7-1.14-1.014-.41-2.3-.41-1.25 0-2.29.457-1.03.454-1.775 1.22-.75.765-1.18 1.836-.42 1.06-.42 2.265 0 1.29.402 2.36.404 1.063 1.146 1.82.775.79 1.814 1.188 1.04.41 2.267.41.67 0 1.383-.085.72-.086 1.376-.274v1.11q-.76.163-1.416.217-.656.06-1.35.06-1.454 0-2.697-.5-1.242-.49-2.132-1.38-.9-.898-1.4-2.156-.5-1.26-.5-2.78 0-1.448.526-2.69.525-1.25 1.43-2.164.908-.914 2.15-1.438 1.244-.53 2.66-.53 1.53 0 2.733.484 1.2.484 2.03 1.36.83.874 1.26 2.11.445 1.225.445 2.733zM9.18 9.532V5.485q-.493-.227-.884-.32-.39-.102-.836-.102-1.008 0-1.578.703-.57.703-.57 2 0 1.274.453 1.93.453.648 1.414.648.52 0 1.04-.242t.95-.57z" font-family="Arial-BoldMT" font-size="16"/></svg>',
            minus: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><path fill-rule="evenodd" clip-rule="evenodd" d="M28 50h65v17H28z"/></svg>',
            pencil: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path fill="#B8BCC2" fill-rule="evenodd" clip-rule="evenodd" d="M465.5 453.5L220.2 209.1 89.6 340.3 62 313.9l131.7-131.2-45.8-45.6c-14.6-14.6-38.3-14.6-52.9 0l-79.4 79.1C1 230.8 1 254.4 15.6 269l317.6 316.3c14.6 14.6 64.8 59.6 79.4 45l98.1-97.7c14.6-14.6-30.6-64.6-45.2-79.1zm68.6 107l-93.6 93.2 149.7 57.1-56.1-150.3z"/></svg>',
            pencil2: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40.000001 33.999999" width="40" height="34" enable-background="new 0 0 595.3 841.9"><g class="bg"><path stroke-miterlimit="10" stroke-width="20" d="M0 0v34h40V0H0zm1 29h38v4H1v-4z"/></g><g class="icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M24.335 15.167l-6.327-6.312-3.367 3.39-.71-.683 3.4-3.39-1.18-1.177c-.38-.378-.99-.378-1.36 0l-2.05 2.043c-.38.377-.38.986 0 1.364l8.19 8.17c.38.378 1.67 1.54 2.05 1.163l2.53-2.524c.38-.37-.79-1.66-1.16-2.04zm1.77 2.764l-2.415 2.41 3.86 1.48-1.446-3.88z"/></g></svg>',
            "plus-bolder": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17"><path d="M7 2h3v13H7M2 7h13v3H2z"/></svg>',
            "plus-note": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="32" height="32"><path stroke-width="13" d="M13 4v9H4v6h9v9h6v-9h9v-6h-9V4h-6z"/></svg>',
            plus: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 140 140"><path fill-rule="evenodd" clip-rule="evenodd" d="M112 60H78V26H61v34H27v17h34v34h17V77h34z"/></svg>',
            pointFigure: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26" height="26"><path d="M4 4v1h1v1h1v1H5v1H4v1h2V8h1v1h2V8H8V7H7V6h1V5h1V4H7v1H6V4H4zm12 0v1h1v1h1v1h-1v1h-1v1h2V8h1v1h2V8h-1V7h-1V6h1V5h1V4h-2v1h-1V4h-2zM4 10v1h1v1h1v1H5v1H4v1h2v-1h1v1h2v-1H8v-1H7v-1h1v-1h1v-1H7v1H6v-1H4zm7 0v1h-1v3h1v1h3v-1h1v-3h-1v-1h-3zm5 0v1h1v1h1v1h-1v1h-1v1h2v-1h1v1h2v-1h-1v-1h-1v-1h1v-1h1v-1h-2v1h-1v-1h-2zm-4 1h1v1h1v1h-1v1h-1v-1h-1v-1h1v-1zm-8 5v1h1v1h1v1H5v1H4v1h2v-1h1v1h2v-1H8v-1H7v-1h1v-1h1v-1H7v1H6v-1H4zm7 0v1h-1v3h1v1h3v-1h1v-3h-1v-1h-3zm1 1h1v1h1v1h-1v1h-1v-1h-1v-1h1v-1z"/></svg>',
            properties: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="-2.4 120.9 600 600" enable-background="new -2.4 120.9 600 600"><path d="M594 473.5V368.8h-76c-5.7-23.8-15.2-46.4-27.5-66.4l53.8-53.8-73.9-73.9-53.8 53.4c-20.6-12.8-42.7-21.8-66.4-27.5v-75.9H245.5v75.9c-23.8 5.7-46.4 15.2-66.4 27.5l-53.8-53.8-73.9 73.9 53.4 53.8C92 322.6 83 344.7 77.3 368.4h-76V473h75.9c5.7 23.8 15.2 46.4 27.5 66.4L51 593.3l73.9 73.9 53.8-53.4c20.6 12.8 42.7 21.8 66.4 27.5v75.9h104.6v-75.9c23.8-5.7 46.4-15.2 66.4-27.5l53.8 53.8 73.9-73.9-53.4-53.8c12.8-20.6 21.8-42.7 27.5-66.4H594zm-296.4 69.7c-67.3 0-122.3-54.6-122.3-122.3 0-67.3 54.6-122.3 122.3-122.3 67.3 0 122.3 54.6 122.3 122.3-.4 67.4-54.9 122.3-122.3 122.3z"/></svg>',
            "published-timeline": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 553.40004 587.49998" width="553.4" height="587.5" enable-background="new 0 0 595.3 841.9"><path d="M476.1 83.5l-21.6-21.6-40.2 46.4 21.6 21.6 40.2-46.4zM293.7 0h-30.9v61.8h30.9V0zm259.7 278.3l-3.1-30.9-61.8 3.1 3.1 30.9 61.8-3.1zM142.2 108.2L98.9 61.8 77.3 83.5l43.3 46.4 21.6-21.7zM64.9 454.5l21.6 21.6 46.4-43.3-21.6-21.6-46.4 43.3zM278.2 92.8c-92.8 0-170.1 83.5-170.1 185.5 0 71.1 37.1 132.9 92.8 163.9v83.5c0 34 27.8 61.8 61.8 61.8h30.9c34 0 61.8-27.8 61.8-61.8v-83.5c55.7-30.9 92.8-92.8 92.8-163.9.1-102-77.2-185.5-170-185.5zm0 327.7c-71.1 0-129.9-64.9-129.9-142.2 0-80.4 58.7-142.2 129.9-142.2S408.1 201 408.1 278.3c0 80.4-58.7 142.2-129.9 142.2zM0 281.4l61.8 3.1 3.1-30.9-61.8-3.1L0 281.4zm429.7 151.5l46.4 40.2 21.6-24.7-49.5-40.2-18.5 24.7z"/></svg>',
            redo: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M7.5 8.2v3.2L15 6.5 7.5 1.7V5S0 4.1 0 13.4c0-.1 1.7-5.2 7.5-5.2z"/></svg>',
            removeAllDrawingTools: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M12 7v1H9v2h13V8h-3V7h-7zm-2 4v12h11V11H10z"/></svg>',
            removenote: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 18" width="14" height="18"><path fill-rule="evenodd" d="M1 16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V4H1v12zM14 1h-3.5l-1-1h-5l-1 1H0v2h14V1z"/></svg>',
            renko: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26" height="26"><path d="M12 4v6h3V4h-3zm3 6v6h3v-6h-3zm3 6v6h3v-6h-3zm-6-6H9v6h3v-6zm-3 6H6v6h3v-6zm4-11h1v4h-1V5zm-3 6h1v4h-1v-4zm-3 6h1v4H7v-4z"/></svg>',
            restore: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="-58 -18 120 120"><path fill-rule="evenodd" clip-rule="evenodd" d="M31 13C23.4 5.3 12.8.5 1.1.5c-23.3 0-42.3 19-42.3 42.5s18.9 42.5 42.3 42.5c13.8 0 26-6.6 33.7-16.9l-16.5-1.8C13.5 70.4 7.5 72.5 1 72.5c-16.2 0-29.3-13.2-29.3-29.4S-15.2 13.7 1 13.7c8.1 0 15.4 3.3 20.7 8.6l-10.9 11h32.5V.5L31 13z"/></svg>',
            "right-stop": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.8 13.4" enable-background="new 0 0 14.8 13.4"><path d="M8 6.7L1.7 0 .1 1.7l4.7 4.9-4.8 5 1.7 1.8L8 6.7zm6.8 0L8.4 0 6.8 1.7l4.7 4.9-4.8 5 1.7 1.8 6.4-6.7z"/></svg>',
            right: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="-90 -55 140 140"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 12l-40.3-42.5-10 10.6 29.7 31.2L-41 43.4l10.7 11.3L10 12.2l-.1-.1z"/></svg>',
            "s-in-circle": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11" width="11" height="11"><g fill-rule="evenodd"><path d="M3.798 7.94l.37-.895c.392.276.78.415 1.162.415.585 0 .878-.205.878-.613a.872.872 0 0 0-.206-.55c-.138-.173-.423-.37-.853-.585-.432-.216-.722-.393-.872-.534a1.425 1.425 0 0 1-.345-.495 1.63 1.63 0 0 1-.12-.638c0-.435.16-.795.477-1.082.318-.284.727-.428 1.226-.428.65 0 1.126.12 1.43.364l-.302.858a1.87 1.87 0 0 0-1.108-.376c-.23 0-.41.06-.536.183a.627.627 0 0 0-.19.474c0 .32.358.655 1.07 1.003.377.184.65.353.814.508.167.156.293.336.38.542.087.206.132.436.132.69 0 .454-.18.828-.54 1.122-.36.295-.84.442-1.446.442A2.57 2.57 0 0 1 3.8 7.94H3.8z"/><path d="M5.5 0A5.502 5.502 0 0 0 0 5.5C0 8.536 2.465 11 5.5 11 8.536 11 11 8.535 11 5.5S8.535 0 5.5 0zm0 1C7.983 1 10 3.018 10 5.5 10 7.983 7.982 10 5.5 10A4.502 4.502 0 0 1 1 5.5C1 3.017 3.018 1 5.5 1z"/></g></svg>',
            "script-editor": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.000134 17.000158" width="21" height="17" enable-background="new 0 0 595.3 841.9"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.482 2.042L2.4 2.002c-.764 0-1.385.677-1.385 1.51v7.444c0 .03-.02.05-.05.05l-.88-.01c-.03 0-.05.02-.05.052l-.012.513c-.01.09-.155 1.6.414 2.31.196.25.454.36.764.36l3.53-.02h3.44c.38 0 .72-.16.99-.45.26-.29.41-.68.41-1.08V4.2c0-.556.02-.833.35-1.172.145-.154.228-.226.476-.226l.163-.76h-.063zM6.545 13.41c-.372 0-.724.01-1.83.02H1.398l.02-.01c-.124-.03-.403-.103-.496-.216-.3-.37-.196-.657-.196-1.12 0-.112 0-.215.01-.286 0-.03.02-.04.052-.04.496 0 4.785.04 5.27.04.022 0 .042.02.053.04 0 0 .07 1.11.47 1.5.03.02.01.072-.03.072zM9.16 2.874c-.33.41-.33.75-.33 1.314v8.472c0 .113-.27.76-.62.77 0 0-.91.154-1.262-.842l-.03-.8c0-.175-.012-.75-.177-.75l-4.94-.04c-.03 0-.05-.022-.05-.053V3.5c0-.503.34-.75.62-.75 0 0 5.45.03 6.75.042.04 0 .06.05.04.082zm2.335 8.944l1.344-1.335c.1-.103.1-.277 0-.39l-.23-.226c-.11-.103-.28-.103-.39 0l-1.76 1.746c-.06.06-.09.144-.09.226 0 .06.02.13.07.18l1.79 1.77c.1.1.26.1.36 0l.26-.26c.1-.11.1-.26 0-.36l-1.36-1.37zm5.054-2.896l-3.03 5.67.77.41 3.03-5.67-.78-.41zm1.96 1.2l.26-.256c.1-.102.26-.102.36 0l1.79 1.777c.1.102.1.256 0 .36l-.26.256c-.11.1-.26.1-.36 0l-1.79-1.78c-.11-.1-.11-.27 0-.36zm.26 3.678l-.23-.227c-.11-.103-.11-.277 0-.39l1.75-1.746c.1-.102.28-.102.39 0l.226.226c.105.103.105.277 0 .39L19.16 13.8c-.113.102-.29.102-.392 0z"/></svg>',
            "scroll-to-upcoming": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path d="M10 1a8 8 0 0 0-7.844 6.47A1 1 0 0 1 3.02 7a1 1 0 0 1 .638.246l.494.432A6 6 0 0 1 10 3a6 6 0 0 1 6 6 6 6 0 0 1-6 6 6 6 0 0 1-3.867-1.412L4.62 14.91A8 8 0 0 0 10 17a8 8 0 0 0 8-8 8 8 0 0 0-8-8zm-.016 2.486A1 1 0 0 0 9 4.5V9a1 1 0 0 0 .293.707l2.5 2.5a1 1 0 1 0 1.414-1.414L11 8.586V4.5a1 1 0 0 0-1.016-1.014zM3.982 10.19A1 1 0 0 1 3 11h-.734a8 8 0 0 0 .324 1H3a1 1 0 0 1 .982.813l.864-.756a6 6 0 0 1-.686-1.71l-.178-.158z"/><path d="M0 13h3v2l4-3.5L3 8v2H0z"/></svg>',
            showObjectsTree: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30"><path d="M18.827 8.17c-1.227.817-.993 1.49-.993 2.318 0 .703-.29 1.49-.62 1.778-.33.29-.8.965-.8.965l1.168 1.25s.823-.52 1.038-.72c.414-.37 1.407-.66 2.193-.66 1.737 0 2.387-.54 2.454-2.49.017-.5-.07-1.63-.07-1.63l-.795.02c-.458 2.406-1.457 2.53-2.28 1.79-.823-.74-1.13-1.193.386-2.774l-.48-.626-1.2.79zM6.46 7.716c-.29.455 1.2 3.847 1.984 4.468.91.785 1.903.496 2.896-.828.827-1.117.827-1.158.083-1.985-.414-.45-1.158-.82-1.696-.82s-1.034-.17-1.157-.38c-.332-.49-1.863-.86-2.11-.45zm3.983 5.846c0 .372 4.95 4.826 8.467 7.68 2.192 1.78 3.268 2.027 2.77.62-.454-1.24-7.983-10.328-8.81-10.576-.618 1.114-1.67 1.914-2.427 2.276zm-.468 5.778C7.74 21.367 7.74 21.367 8.57 22.194c.826.827.826.827 3.018-1.406 1.383-1.414 2.168-2.514 2.168-2.514l-1.272-1.21s-1.268 1.118-2.51 2.276z"/></svg>',
            small_arrow_right: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 3.0000003 6" width="3" height="6"><path d="M0 0c-.04 1.99 0 4.61 0 6l3-3z"/></svg>',
            smile: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 586.70002 595.19999" width="586.7" height="595.2" enable-background="new 0 0 595.3 841.9"><path d="M293.4 0C131.8 0 0 131.8 0 297.6s131.8 297.6 293.4 297.6 293.3-131.8 293.3-297.6S454.9 0 293.4 0zm68 182.8h85v93.5h-85v-93.5zm-212.6 0h85v93.5h-85v-93.5zm148.8 306.1c-136 0-187.1-106.3-187.1-106.3h378.4s-55.2 106.3-191.3 106.3z"/></svg>',
            snapshot: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 11.5"><path d="M7.5 4.8c-1.1 0-1.9.9-1.9 1.9s.9 1.9 1.9 1.9c1.1 0 1.9-.9 1.9-1.9s-.9-1.9-1.9-1.9zM13 1.9h-2.2c0-1-.9-1.9-2-1.9H6.1C5 0 4.2.9 4.2 1.9H1.9c-1 0-1.9.9-1.9 2v5.7c0 1.1.9 1.9 1.9 1.9H13c1.1 0 1.9-.9 1.9-1.9V3.9c.1-1.1-.8-2-1.9-2zm-5.5 8.3C5.6 10.2 4 8.6 4 6.7s1.5-3.4 3.4-3.4 3.4 1.5 3.4 3.4c.1 1.9-1.4 3.5-3.3 3.5z"/></svg>',
            star: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 582.90004 554.7" width="582.9" height="554.7" enable-background="new 0 0 595.3 841.9"><path d="M438.2 353.7l32.1 201-176.9-96.5-180.8 96.5 32.1-201L0 209l201-28.1L293.4 0l88.5 180.9 201 28.1z"/></svg>',
            stocktwits: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.8 9.4"><path d="M3.9 4c-.7-.3-1.1-.5-1.3-.6L2.2 3c-.1-.1-.1-.3-.1-.5 0-.3.1-.5.3-.7.2-.2.5-.3.9-.3.3 0 .7 0 1 .1.3.2.7.4 1.2.5L6.2.6C5.7.4 5.2.2 4.8.1L3.4 0C2.3 0 1.5.2 1 .7S.1 1.8.1 2.6c0 .4.1.8.3 1.1s.4.6.7.8c.3.2.7.5 1.3.8l1.2.6c.2.2.4.3.5.4.1.1.2.3.2.5 0 .3-.1.6-.4.7-.2.2-.6.2-1 .2s-.8-.1-1.2-.2C1.2 7.5.6 7.3 0 7v1.8c.8.4 1.7.6 2.7.6 1.1 0 2-.2 2.6-.7.7-.5 1-1.2 1-2 0-.6-.2-1.1-.5-1.5-.4-.4-1-.8-1.9-1.2zM7 0v1.6h3.1v7.8h1.6V1.6h3.1V0H7z"/></svg>',
            strategy: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 8"><path fill="#595959" fill-rule="evenodd" d="M2.5 2L0 5h2v3h1V5h2zm5 4L5 3h2V0h1v3h2z"/></svg>',
            textnote: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M11.976.506v.002c-.102.01-.195.048-.27.123l-.716.722 2.174 1.984.716-.716c.523-.523-1.19-2.184-1.904-2.114zM.254 3.22C0 3.436 0 4 0 4v9s.006.577.25.773C.532 14 1 14 1 14h9s.577.025.813-.21c.234-.235.187-.784.187-.784V6.13L10 7v6H1V4h6.514L8.66 3H1s-.455-.024-.746.22zm10.304-1.485l-7.59 7.233 2.078 2.125L12.75 3.75zM2.328 9.59l-.237.24L2 12l2.233-.09.238-.24z"/></svg>',
            "trading-connect": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 14"><circle cx="5" cy="7" r="3"/></svg>',
            "trading-options": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M540.7 372.3h-38.9c-4.9-24.3-14.6-43.7-24.3-63.2l24.3-24.3c19.4-19.4 19.4-48.6 0-68s-48.6-19.4-68 0l-24.3 24.3c-19.4-9.7-38.9-19.4-63.2-24.3v-38.9c0-29.2-19.4-48.6-48.6-48.6S249 148.8 249 177.9v38.9c-24.3 4.9-43.7 14.6-63.2 24.3l-24.3-24.3c-19.4-19.4-48.6-19.4-68 0s-19.4 48.6 0 68l24.3 24.3c-9.7 19.4-19.4 38.9-24.3 63.2H54.6C25.5 372.3 6 391.8 6 420.9s19.4 48.6 48.6 48.6h38.9c4.9 24.3 14.6 43.7 24.3 63.2L93.5 557c-19.4 19.4-19.4 48.6 0 68s48.6 19.4 68 0l24.3-24.3c19.4 9.7 38.9 19.4 63.2 24.3v39c0 29.2 19.4 48.6 48.6 48.6s48.6-19.4 48.6-48.6v-38.9c24.3-4.9 43.7-14.6 63.2-24.3l24.3 24.3c19.4 19.4 48.6 19.4 68 0s19.4-48.6 0-68l-24.3-24.3c9.7-19.4 19.4-38.9 24.3-63.2h38.9c29.2 0 48.6-19.4 48.6-48.6.1-29.2-19.4-48.7-48.5-48.7zM297.6 566.8c-82.6 0-145.8-63.2-145.8-145.8S215 275.1 297.6 275.1s145.8 63.2 145.8 145.8-63.1 145.9-145.8 145.9zm0-194.5c-29.2 0-48.6 19.4-48.6 48.6s19.4 48.6 48.6 48.6 48.6-19.4 48.6-48.6-19.4-48.6-48.6-48.6z"/></svg>',
            twitter: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 11.6"><path d="M15 1.4c-.3.1-1 .4-1.7.5.4-.2 1.1-1 1.3-1.6-.4.3-1.4.7-1.9.7-.6-.7-1.4-1-2.3-1-1.7 0-3.1 1.3-3.1 3 0 .2 0 .4.1.7C5.1 3.6 2.4 2.5.9.6 0 2.1.8 3.9 1.8 4.5c-.4 0-1 0-1.3-.3 0 1 .5 2.4 2.4 2.9-.4.2-1 .1-1.3.1.1.9 1.4 2 2.8 2-.6.5-2.3 1.4-4.4 1.1 1.4.8 3.1 1.3 4.8 1.3 5 0 8.8-3.9 8.6-8.6.5-.4 1.1-.9 1.6-1.6z"/></svg>',
            undo: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M15 13.4C15 4.1 7.5 5 7.5 5V1.7L0 6.5l7.5 4.9V8.2c5.8 0 7.5 5.1 7.5 5.2z"/></svg>',
            upload: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 18" width="26" height="18"><path d="M12 0C8.4 0 5.4 2.8 5.1 6.3 2 6.1.1 9 0 11.1 0 13.9 2.2 16 4.7 16H9v-1H4.7C2.8 15 1 13.3 1 11.2 1 9 3 6.7 6 7.4 6 3 9 1 12 1s3.7 1.2 5.1 2.9c1.5.1 3.3.6 4.2 1.7 1 1.5 1.2 2.6 1.2 4.2 1.4.4 2.5 1.5 2.5 2.7-.2 1.6-1.3 2.5-2.6 2.5H17v1h5.3c2.8 0 3.7-1.9 3.7-3.5s-1-3-2.5-3.4c0-1.6-.5-2.9-1.4-4.1-.9-1.2-2.7-2-4.5-2.1C16.3 1.2 14.3 0 12 0zm1 6l-6 6h3v5h6v-5h3l-6-6z"/></svg>',
            "zoom-out": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" enable-background="new 0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M20.8 18.5c.7-1.2 1.2-2.5 1.2-4 0-4.1-3.4-7.5-7.5-7.5S7 10.4 7 14.5s3.4 7.5 7.5 7.5c1.5 0 2.9-.5 4.1-1.2l4.3 4.3 2.2-2.2-4.3-4.4zM14.5 20c-3 0-5.5-2.5-5.5-5.5S11.5 9 14.5 9s5.5 2.5 5.5 5.5-2.5 5.5-5.5 5.5zM11 15h7v-1h-7v1z"/></svg>',
            zoom: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" enable-background="new 0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.95 9.95h-1v3h-3v1h3v3h1v-3h3v-1h-3v-3zm5.8 7.5c.7-1.2 1.2-2.5 1.2-4 0-4.1-3.4-7.5-7.5-7.5s-7.5 3.4-7.5 7.5 3.4 7.5 7.5 7.5c1.5 0 2.9-.5 4.1-1.2l4.3 4.3 2.2-2.2-4.3-4.4zm-6.3 1.5c-3 0-5.5-2.5-5.5-5.5s2.5-5.5 5.5-5.5 5.5 2.5 5.5 5.5-2.5 5.5-5.5 5.5z"/></svg>'
        })
    }).call(e, i(5))
}, function(t, e, i) {
    (function(t) {
        t.register({
            "FXCMLogo-source": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2083 1043" preserveAspectRatio="xMidYMid"><path d="M1605.536 591.944V471.92c0-11.572-10.316-21.268-23.262-22.368-.676 0-1.506-.147-2.32-.147h-13.907c-2.345 0-4.673.42-6.88.952v141.587h-51.45v-37.848h-.13V450.1c-2.215-.548-4.552-.825-6.888-.825h-14.17c-14.304 0-25.996 10.08-25.996 22.366v82.456h-.13v37.848h-52.566V457.577c0-27.915 17.058-50.707 37.983-50.707H1619.02c20.9 0 37.966 22.792 37.966 50.707v134.367h-51.45zm-259.374-1.398h-118.468c-19.67 0-35.898-16.286-35.898-36.03v-111.32c0-19.888 16.227-36.048 35.898-36.048h118.468c19.8 0 35.882 16.16 35.882 36.047v24.168h-44.423c-1.367-9.107-8.947-16.287-18.026-16.287h-60.25c-10.05 0-18.297 8.703-18.297 19.188v59.246c0 10.5 8.248 19.205 18.296 19.205h60.25c10.056 0 18.15-8.704 18.15-19.205v-1.805h44.3v26.812c0 19.743-16.08 36.03-35.88 36.03zm-215.623-.277l-44.168-65.72-45.262 65.72-53.37.702 62.986-93.638-62.987-90.607h55.304l43.882 63.83 43.478-63.41h52.68l-62.04 90.334 63.424 92.79h-53.93zM895.484 450.1c-17.457 0-35.475-1.67-44.973 3.326-7.304 3.857-6.88 13.386-6.47 23.89l122.03-.678v44.733l-120.787-.146-.558 70.72-53.933-.13v-139.49c0-14.527 4.266-24.166 10.332-31.64 6.037-7.46 13.756-12.563 27.92-13.388 34.257-1.672 103.45-.148 137.576-.148l-.138 42.952c-20.64 0-47.607.147-71 0zM580.992 686.003h-1.372c-56.404 0-106.62-28.316-137.027-71.415l129.183-148.896v119.894H733.01c-25.864 58.568-84.332 99.845-152.018 100.417zm8.256-232.172h-8.256l-156.98.42c25.046-61.607 85.448-105.24 155.608-105.24h1.372c57.65.404 108.412 30.37 138.265 75.402L589.247 568.05V453.83z" class="cls-1"/></svg>',
            FXCMLogo: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1432 536" preserveAspectRatio="xMidYMid" style="fill: #154B94;"><path d="M1281.524 341.94V221.918c0-11.572-10.316-21.268-23.262-22.368-.676 0-1.506-.148-2.32-.148h-13.907c-2.345 0-4.673.42-6.88.952V341.94h-51.45v-37.847h-.13V200.097c-2.215-.548-4.552-.825-6.888-.825h-14.17c-14.304 0-25.996 10.08-25.996 22.366v82.456h-.13v37.848h-52.565V207.574c0-27.915 17.058-50.707 37.983-50.707h173.2c20.9 0 37.966 22.792 37.966 50.707V341.94h-51.45zm-259.374-1.397H903.682c-19.67 0-35.898-16.286-35.898-36.03v-111.32c0-19.888 16.227-36.048 35.898-36.048h118.468c19.8 0 35.882 16.16 35.882 36.047v24.168h-44.423c-1.368-9.107-8.948-16.287-18.027-16.287h-60.25c-10.05 0-18.297 8.703-18.297 19.188v59.247c0 10.5 8.248 19.205 18.296 19.205h60.25c10.056 0 18.15-8.704 18.15-19.205v-1.805h44.3v26.812c0 19.743-16.08 36.03-35.88 36.03zm-215.623-.277l-44.168-65.72-45.263 65.72-53.37.702 62.986-93.638-62.987-90.607h55.304l43.882 63.83 43.478-63.41h52.68l-62.04 90.334 63.424 92.79h-53.93zm-235.055-140.17c-17.457 0-35.475-1.67-44.973 3.327-7.305 3.857-6.88 13.386-6.47 23.89l122.03-.678v44.733l-120.788-.146-.558 70.72-53.933-.13v-139.49c0-14.527 4.267-24.166 10.333-31.64 6.037-7.46 13.756-12.563 27.92-13.388 34.257-1.672 103.45-.148 137.576-.148l-.14 42.952c-20.64 0-47.606.147-71 0zM256.98 436h-1.372c-56.404 0-106.62-28.316-137.027-71.415L247.765 215.69v119.893h161.234C383.134 394.15 324.666 435.428 256.98 436zm8.256-232.172h-8.256l-156.98.42c25.046-61.607 85.448-105.24 155.608-105.24h1.372c57.65.404 108.412 30.37 138.265 75.402l-130.01 143.637v-114.22z" class="cls-1"/></svg>',
            MOEXLogo1: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 272.14624 99.683876" width="272.146" height="99.684"><defs><clipPath id="a"><path d="M0 79.747h217.717V0H0v79.747z"/></clipPath></defs><g><g><g clip-path="url(#a)" transform="matrix(1.25 0 0 -1.25 0 99.684)"><g><path fill="#e31f25" fill-rule="evenodd" d="M77.25 61.86c-2.15-2.597-3.01-6.323-2.954-10.732 1.593-.5 2.75-1.988 2.75-3.746 0-1.47-.81-2.753-2.01-3.425l.004-.016c1.338-9.528-.616-14.418-2.63-16.46-4.918-.134-7.5 1.917-7.745 6.156 3.116.852 4.455 2.167 5.673 4.064.98 1.526 1.306 3.61 1.428 5.997-1.5.552-2.57 1.994-2.57 3.685 0 1.76 1.157 3.247 2.75 3.747.205 3.987.885 8.102 3.437 11.546l-1.33.58c-.53.23-.77.846-.54 1.374.11.25.306.436.54.538l33.214 14.493c.276.12.576.112.833 0l33.215-14.49c.527-.23.77-.846.54-1.374-.11-.25-.307-.437-.54-.538L108.17 48.715c-.278-.12-.578-.112-.834 0L77.25 61.86zm55.4-4.254V45.288c0-4.278-10.652-10.523-23.79-10.523-13.14 0-23.793 6.245-23.793 10.523v11.37l22.27-10.12c.255-.11.555-.12.832 0l24.48 11.068z"/></g><g><path fill="#fff" d="M94.764 65.912l12.987 5.32c.693.284 1.485-.047 1.77-.74.09-.218.117-.447.092-.667h.002l-.27-4.165 11.71-.295c.54.014 1.06-.298 1.283-.825.293-.69-.028-1.485-.717-1.778l-14.146-6.043c-.223-.107-.666-.12-.93-.09-.744.085-1.28.76-1.194 1.503l.754 4.9-10.857.272c-.747.017-1.34.638-1.322 1.386.012.555.357 1.023.84 1.222zm11.962 2.36l-6.417-2.63 6.104.09.312 2.54zm2.448-4.947l-.456-3.127 7.708 3.18-7.252-.053z"/></g><g><path fill="#2b2b2a" fill-rule="evenodd" d="M4.855 6.075H1.22v15.187c0 .2-.062.353-.187.46-.124.108-.27.162-.436.162-.165 0-.307-.058-.423-.174-.116-.116-.174-.266-.174-.448V5.452c0-.398.2-.597.597-.597h9.735c.398 0 .597.2.597.598v15.81c0 .198-.06.352-.175.46-.116.107-.257.16-.423.16-.166 0-.312-.057-.436-.173-.124-.116-.187-.266-.187-.448V6.075H6.05v15.187c0 .2-.058.353-.175.46-.116.108-.257.162-.423.162-.166 0-.307-.058-.423-.174-.117-.116-.175-.266-.175-.448V6.075zm11.9 5.75l3.76 4.11c.116.115.174.256.174.422 0 .166-.063.31-.188.436-.124.124-.27.187-.435.187-.133 0-.283-.067-.45-.2l-5.028-5.552v5.18c0 .198-.063.347-.188.447-.124.1-.26.15-.41.15-.415 0-.623-.2-.623-.598V5.453c0-.183.062-.328.186-.436.125-.108.27-.162.436-.162.166 0 .307.05.423.15.116.1.174.248.174.448V9.41l1.32 1.47 3.634-5.75c.116-.184.282-.275.498-.275.166 0 .31.058.435.174.124.115.187.257.187.423 0 .115-.033.232-.1.348l-3.81 6.026zm13.643-4.53v7.294c0 .33-.062.643-.186.933-.125.29-.3.548-.523.772-.225.224-.482.398-.773.523-.29.124-.61.186-.958.186h-2.44c-.35 0-.67-.062-.96-.186-.29-.125-.544-.3-.76-.523-.215-.224-.385-.48-.51-.772-.124-.29-.186-.602-.186-.934V7.294c0-.697.228-1.278.684-1.743.457-.465 1.034-.697 1.73-.697h2.44c.697 0 1.278.232 1.743.697.466.465.698 1.046.698 1.743m-1.22 0c0-.35-.115-.64-.348-.872-.233-.232-.523-.348-.87-.348h-2.44c-.333 0-.615.116-.848.348-.232.233-.348.523-.348.872v7.294c0 .33.116.613.348.846.233.233.515.348.847.348h2.44c.347 0 .637-.115.87-.348.233-.233.348-.515.348-.847V7.294zm10.955-1.842v10.954c0 .398-.208.597-.622.597h-3.634c-.333 0-.532-.157-.598-.473l-2.44-10.928v-.15c0-.182.063-.327.187-.435.124-.108.27-.162.435-.162.316 0 .507.158.573.473l2.315 10.456h2.565V5.454c0-.184.062-.33.187-.437.124-.108.26-.162.41-.162.415 0 .623.2.623.598m8.514 1.842c0-.35-.116-.64-.348-.872-.234-.232-.524-.348-.872-.348h-2.44c-.332 0-.614.116-.847.348-.23.233-.347.523-.347.872v7.294c0 .33.116.613.348.846.234.233.516.348.848.348h3.66v-8.49zm2.042-1.27c-.25.083-.45.245-.6.486-.148.24-.223.503-.223.785v9.112c0 .398-.207.597-.622.597h-4.257c-.35 0-.668-.062-.96-.186-.29-.125-.543-.3-.758-.523-.216-.224-.386-.48-.51-.772-.125-.29-.187-.602-.187-.934V7.294c0-.697.228-1.278.684-1.743.457-.465 1.034-.697 1.73-.697h2.44c.73 0 1.337.274 1.818.82.183-.215.348-.372.498-.472.25-.2.44-.315.573-.348.05-.017.124-.025.223-.025.165 0 .307.062.422.187.117.124.175.27.175.436 0 .282-.15.473-.448.572m19.84-.572v15.81c0 .214-.053.39-.16.52-.11.134-.237.2-.387.2-.232 0-.423-.132-.572-.398l-4.356-7.045-4.332 7.045c-.166.266-.357.4-.573.4-.15 0-.28-.068-.387-.2-.107-.133-.16-.308-.16-.523V5.452c0-.182.057-.327.173-.435.116-.108.257-.162.423-.162.414 0 .622.2.622.598v13.642l3.71-6.05c.148-.248.323-.373.522-.373.2 0 .373.125.522.374l3.735 6.075V5.454c0-.183.063-.328.188-.436.124-.108.27-.162.436-.162.398 0 .597.2.597.598m9.736 1.842v7.294c0 .33-.063.643-.187.933-.126.29-.3.548-.524.772-.224.224-.48.398-.772.523-.29.124-.61.186-.958.186h-2.44c-.35 0-.668-.062-.96-.186-.29-.125-.542-.3-.758-.523-.215-.224-.386-.48-.51-.772-.125-.29-.187-.602-.187-.934V7.294c0-.697.23-1.278.686-1.743.456-.465 1.033-.697 1.73-.697h2.44c.697 0 1.278.232 1.742.697.465.465.698 1.046.698 1.743m-1.22 0c0-.35-.116-.64-.35-.872-.232-.232-.522-.348-.87-.348h-2.44c-.332 0-.614.116-.847.348-.233.233-.35.523-.35.872v7.294c0 .33.117.613.35.846.232.233.514.348.846.348h2.44c.348 0 .638-.115.87-.348.234-.233.35-.515.35-.847V7.294zm10.332-2.44c.2 0 .352.062.46.187.108.124.162.26.162.41 0 .415-.207.623-.622.623H85.12c-.332 0-.614.116-.846.348-.233.233-.35.523-.35.872v7.294c0 .33.117.613.35.846.232.233.514.348.846.348h4.258c.2 0 .352.063.46.187.108.125.162.27.162.437 0 .398-.207.597-.622.597H85.12c-.348 0-.668-.062-.958-.186-.29-.125-.544-.3-.76-.523-.215-.224-.385-.48-.51-.772-.124-.29-.187-.602-.187-.934V7.294c0-.697.228-1.278.685-1.743.456-.465 1.033-.697 1.73-.697h4.258zm6.448 6.97l3.76 4.11c.115.115.173.256.173.422 0 .166-.063.31-.188.436-.124.124-.27.187-.435.187-.133 0-.282-.067-.448-.2l-5.03-5.552v5.18c0 .198-.063.347-.187.447-.124.1-.262.15-.41.15-.416 0-.623-.2-.623-.598V5.453c0-.183.062-.328.186-.436.125-.108.27-.162.436-.162.166 0 .307.05.423.15.117.1.175.248.175.448V9.41l1.32 1.47 3.634-5.75c.116-.184.282-.275.498-.275.166 0 .31.058.436.174.124.115.186.257.186.423 0 .115-.033.232-.1.348l-3.808 6.026zm13.643-4.53v7.294c0 .33-.063.643-.188.933-.124.29-.3.548-.523.772-.225.224-.482.398-.773.523-.29.124-.61.186-.958.186h-2.44c-.35 0-.67-.062-.96-.186-.29-.125-.543-.3-.758-.523-.216-.224-.387-.48-.51-.772-.125-.29-.188-.602-.188-.934V7.294c0-.697.228-1.278.685-1.743.455-.465 1.032-.697 1.73-.697h2.44c.696 0 1.277.232 1.742.697.465.465.697 1.046.697 1.743m-1.22 0c0-.35-.117-.64-.35-.872-.232-.232-.522-.348-.87-.348h-2.44c-.333 0-.615.116-.847.348-.233.233-.35.523-.35.872v7.294c0 .33.117.613.35.846.232.233.514.348.846.348h2.44c.348 0 .638-.115.87-.348.233-.233.35-.515.35-.847V7.294zm4.88 9.71v2.44c0 .398.115.7.347.908.233.208.515.31.847.31.348 0 .64-.107.87-.322.233-.215.35-.514.35-.896 0-.332-.15-.63-.45-.896-.28-.282-.63-.58-1.044-.896-.133-.117-.274-.225-.423-.324-.15-.1-.316-.208-.498-.324m4.853-9.71c0-.33-.12-.617-.36-.858-.24-.24-.528-.36-.86-.36h-2.415c-.348 0-.638.115-.87.347-.233.233-.35.523-.35.872v7.294c0 .33.117.613.35.846.232.233.522.348.87.348h2.416c.348 0 .638-.115.87-.348.233-.233.35-.515.35-.847V7.294zm-2.888 9.71c.083.084.175.158.274.224.1.067.198.14.298.225.3.25.48.406.548.473.216.265.365.53.448.796.066.15.1.39.1.722 0 .764-.258 1.37-.773 1.818-.446.398-1.003.597-1.666.597-.648 0-1.203-.2-1.668-.598-.498-.448-.747-1.054-.747-1.818V7.294c0-.33.06-.642.185-.933.125-.29.3-.546.523-.77.224-.225.482-.403.772-.536.29-.132.61-.2.958-.2h2.416c.348 0 .667.068.958.2.29.133.548.31.772.535.224.224.398.48.523.77.124.292.186.603.186.935v7.294c0 .33-.062.643-.186.933-.125.29-.3.548-.523.772-.224.224-.48.398-.772.523-.29.124-.61.186-.958.186h-1.67zm13.22-12.15c.2 0 .353.063.46.188.11.124.163.26.163.41 0 .415-.208.623-.623.623h-4.257c-.332 0-.614.116-.846.348-.233.233-.35.523-.35.872v7.294c0 .33.117.613.35.846.232.233.514.348.846.348h4.257c.2 0 .353.063.46.187.11.125.163.27.163.437 0 .398-.208.597-.623.597h-4.257c-.348 0-.668-.062-.958-.186-.29-.125-.544-.3-.76-.523-.216-.224-.386-.48-.51-.772-.124-.29-.187-.602-.187-.934V7.294c0-.697.228-1.278.685-1.743.456-.465 1.033-.697 1.73-.697h4.257zm6.448 6.972l3.76 4.108c.116.116.174.257.174.423 0 .166-.062.31-.187.436-.124.124-.27.187-.435.187-.133 0-.282-.067-.448-.2l-5.03-5.552v5.18c0 .198-.062.347-.186.447-.124.1-.26.15-.41.15-.415 0-.622-.2-.622-.598V5.453c0-.183.062-.328.186-.436.125-.108.27-.162.436-.162.166 0 .307.05.423.15.117.1.175.248.175.448V9.41l1.32 1.47 3.634-5.75c.116-.184.282-.275.498-.275.166 0 .31.058.435.174.125.115.187.257.187.423 0 .115-.033.232-.1.348l-3.81 6.026zm13.643-4.53v7.293c0 .33-.062.643-.186.933-.124.29-.3.548-.523.772-.224.224-.48.398-.772.523-.29.124-.61.186-.958.186h-2.44c-.348 0-.668-.062-.958-.186-.292-.125-.545-.3-.76-.523-.217-.224-.387-.48-.51-.772-.126-.29-.188-.602-.188-.934V7.294c0-.697.228-1.278.685-1.743.456-.465 1.033-.697 1.73-.697h2.44c.697 0 1.278.232 1.742.697.464.465.696 1.046.696 1.743m-1.22 0c0-.35-.115-.64-.348-.872-.232-.232-.523-.348-.87-.348h-2.44c-.333 0-.615.116-.848.348-.232.233-.348.523-.348.872v7.294c0 .33.116.613.348.846.233.233.515.348.847.348h2.44c.348 0 .64-.115.87-.348.234-.233.35-.515.35-.847V7.294zm8.515 13.37c.184 0 .33.057.437.173.108.117.162.258.162.424 0 .414-.2.622-.6.622h-2.414c-.2 0-.348-.062-.448-.187-.1-.125-.15-.27-.15-.435 0-.166.055-.307.163-.424.11-.116.254-.174.436-.174h2.415zm2.44-15.212v10.954c0 .2-.06.348-.186.448-.124.1-.27.15-.435.15-.167 0-.308-.055-.424-.163-.117-.108-.175-.253-.175-.435V6.075h-3.634c-.348 0-.64.116-.87.348-.233.233-.35.523-.35.872v9.112c0 .2-.062.348-.187.448-.125.1-.27.15-.436.15-.166 0-.307-.055-.423-.163-.115-.108-.173-.253-.173-.435V7.295c0-.332.062-.643.186-.934.125-.29.3-.546.523-.77.224-.225.48-.403.772-.536.29-.132.61-.2.958-.2h4.233c.414 0 .62.2.62.6m10.955.62v7.27h3.635c.697 0 1.278-.228 1.743-.684.465-.456.697-1.033.697-1.73V8.49c0-.698-.232-1.274-.697-1.73-.465-.457-1.046-.685-1.743-.685h-3.635zm0 8.49v6.1h6.075c.2 0 .35.058.448.174.1.117.15.258.15.424 0 .414-.2.622-.598.622h-6.697c-.398 0-.598-.208-.598-.622V5.452c0-.398.2-.597.598-.597h4.257c1.013 0 1.876.357 2.59 1.07.713.714 1.07 1.57 1.07 2.565v2.44c0 1.012-.357 1.867-1.07 2.564-.714.714-1.577 1.07-2.59 1.07h-3.635zm17.004-9.11v10.953c0 .2-.063.348-.187.448-.125.1-.27.15-.436.15-.166 0-.307-.055-.423-.163-.117-.108-.175-.253-.175-.435V6.075h-3.66c-.332 0-.614.116-.847.348-.232.233-.348.523-.348.872v9.112c0 .2-.062.348-.187.448-.124.1-.27.15-.436.15-.166 0-.307-.055-.423-.163-.117-.108-.175-.253-.175-.435V7.295c0-.697.228-1.278.684-1.743.456-.465 1.032-.697 1.73-.697h4.257c.415 0 .622.2.622.598m3.66.597v9.734h3.66c.33 0 .613-.115.845-.348.233-.233.35-.515.35-.847V7.294c0-.332-.117-.623-.35-.872-.232-.248-.514-.373-.846-.373h-3.66zm0-1.195h3.66c.33 0 .642.062.932.187.29.124.548.3.772.523.224.223.4.48.523.77.124.292.187.61.187.96v7.294c0 .33-.063.643-.187.933-.124.29-.3.548-.523.772-.224.224-.48.398-.772.523-.29.124-.6.186-.933.186h-4.283c-.4 0-.598-.2-.598-.597V.597c0-.198.057-.348.174-.448.116-.1.257-.15.423-.15.415 0 .622.2.622.598v4.257zM203.7 12v4.407c0 .2-.06.348-.186.448-.124.1-.26.15-.41.15-.415 0-.623-.2-.623-.598V12.05l-3.06 4.705c-.134.183-.3.274-.5.274-.165 0-.314-.063-.447-.188-.133-.124-.2-.27-.2-.435 0-.133.042-.25.125-.35l3.336-5.127-3.336-5.13c-.083-.13-.124-.248-.124-.347 0-.166.066-.308.2-.424.132-.117.28-.175.447-.175.216 0 .383.09.5.274l3.06 4.704v-4.38c0-.184.063-.33.188-.437.124-.108.27-.162.436-.162.166 0 .307.05.423.15.116.1.174.248.174.448V9.86l3.188-4.73c.133-.184.29-.275.473-.275.167 0 .312.058.437.174.124.115.186.257.186.423 0 .05-.004.108-.012.173-.007.067-.037.125-.086.175l-3.46 5.13 3.46 5.128c.066.117.1.233.1.35 0 .164-.063.306-.187.422-.125.116-.262.174-.41.174-.217 0-.383-.083-.5-.25L203.702 12zm14.018-6.547v10.954c0 .2-.063.348-.187.448-.124.1-.27.15-.435.15-.166 0-.307-.055-.423-.163-.116-.108-.175-.253-.175-.435V6.075h-3.66c-.33 0-.613.116-.845.348-.233.233-.35.523-.35.872v9.112c0 .2-.06.348-.186.448-.124.1-.27.15-.436.15-.165 0-.307-.055-.423-.163-.116-.108-.174-.253-.174-.435V7.295c0-.697.228-1.278.685-1.743.456-.465 1.033-.697 1.73-.697h4.257c.415 0 .623.2.623.598"/></g></g></g></g></svg>',
            MOEXLogo2: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 714.5831 123.43025" width="714.583" height="123.43"><defs><clipPath id="a"><path d="M0 595.28h841.89V0H0v595.28z"/></clipPath></defs><g><g><g clip-path="url(#a)" transform="matrix(1.25 0 0 -1.25 -163.576 273.356)"><g><path fill="#494090" d="M209.902 158.69l-4.843-.62-5.052-17.01-3.665-2.23 5.053 1.585 6.525 16.418 1.982 1.858z"/></g><g><path fill="#726aae" d="M211.197 160.142l-5.738-.722-.457-1.592 4.656.59 1.537 1.724z"/></g><g><path fill="#8d3472" d="M174.18 157.547l7.17 4.562 7.495-3.062-8.58-9.883-10.526-4.406 4.44 12.787z"/></g><g><path fill="#6e326a" d="M144.102 128.463l3.353-7.857h3.73v3.075l-7.083 4.783z"/></g><g><path fill="#8c316d" d="M142.86 173.407l-11.184-12.238 1.822-4.307 4.86 2.92 4.502 13.624z"/></g><g><path fill="#68336a" d="M226.98 202.556l3.25-3.88-1.257-.92-3.356.42-4.596 2.89 5.96 1.49z"/></g><g><path fill="#3f3576" d="M312.898 180.39l4.73 2.04 22.82-10.01 11.033-9.262 6.95-10.74-4.834.845-9.603 6.003 1.005 5.486-6.136 5.273-21.107 9.27-3.038-1.358-1.82 2.453z"/></g><g><path fill="#8c316d" d="M208.014 217.33l-.62-7.325 1.367-7.31 4.86-3.934 13.567 3.43 4.838.54 1.985 4.285-7.692 4.306-1.738 2.25-.846.93-6.452 4.185s-.36-1.012-.88-2.45l-8.388 1.096z"/></g><g><path fill="#6e326a" d="M208.014 217.33l.825-14.6 4.857-3.93-2.697-.784-5.137 2.688.512 3.393-16.444 5.547-6.35-5.183-.585 5.607 1.846 2.988 23.174 4.276z"/></g><g><path fill="#7d3773" d="M211 198.016l-1.093-6.884 14.81-15.526-23.345 4.228 4.53 21.263 5.098-3.08z"/></g><g><path fill="#68336a" d="M231.685 208.333l.64-2.863-.85-2.775.63.034 1.982 4.285-2.402 1.318z"/></g><g><path fill="#933f7a" d="M224.43 213.76l-2.694-4.554 10.185-1.916-.236 1.047-5.29 2.985-1.965 2.44z"/></g><g><path fill="#68336a" d="M224.435 213.7l-4.24-5.367h6.163l-1.923 5.366z"/></g><g><path fill="#462846" d="M221.988 209.23l2.577 2.426-.21-2.624-2.367.197z"/></g><g><path fill="#6e326a" d="M210.43 194.894l35.916-2.28-9.218-8.555-12.662-2.674-6.43 1.11-8.31 8.567.703 3.83z"/></g><g><path fill="#7d3773" d="M216.427 182.66l3.756-3.54 3.785-.477 11.466 3.852 2.068 1.844-12.972-2.45-8.103.77z"/></g><g><path fill="#a92f72" d="M201.816 179.95l-.485-2.39 11.683-10.483 16.49-7.06.7.427 2.575-1.994 6.835 1.35-2.7 5.812-12.416 10.217-22.68 4.12z"/></g><g><path fill="#8d3472" d="M201.816 179.95l11.197-12.873 16.49-7.06-2.26-1.404-19.095 5.732-7.345 10.086-8.264-11.905-3.926-3.706-7.444 3.332 20.646 17.798z"/></g><g><path fill="#a92f72" d="M150.203 177.882l17.315 1.33 24.957.746-22.728-18.066.584-6.798-27.406 19.696 7.28 3.092z"/></g><g><path fill="#8d3472" d="M142.924 174.79l-5.13-15.33 11.307-21.035-1.458 9.672-4.718 26.693z"/></g><g><path fill="#7d3773" d="M191.004 179.895l-21.257-18.004-.004-6.353 4.5 1.513 7.108 5.06 20.466 17.84-10.812-.054z"/></g><g><path fill="#a92f72" d="M170.052 155.653l-.312-10.895-5.27-7.613 2.32-6.887 2.212-3.68 4.33-2.898v-3.075h-7.65l-7.835 11.903-8.77 5.922-1.84 10.53 22.815 6.693z"/></g><g><path fill="#6e326a" d="M137.794 159.46l-6.934-19.117 1.94-13.712 2.887-6.024 9.842 6.118-1.36 2.992 1.497 4.943 3.433 3.765-11.306 21.035z"/></g><g><path fill="#6e326a" d="M149.1 138.425l5.287-11.942 5.602-5.877h5.69l-7.832 11.903-8.747 5.915z"/></g><g><path fill="#8d3472" d="M135.688 120.606h12.63l-3.307 7.22-9.323-7.22z"/></g><g><path fill="#3f3576" d="M239.452 159.98l-9.616-14.848-1.334-.215.396-2.153 1.304-1.474-3.067-4.26-11.61 15.52-5.623-.45-1.42-.183-6.402-12.923-5.354-1.22-.383 1.056 5.122 1.8 6.332 16.234 5.7 5.88 14.073-3.893 2.632 1.595 2.576-1.994 6.463 1.456.212.074z"/></g><g><path fill="#3f3576" d="M215.153 142.96l8.316-9.057 5.7.275-3.804 5.335-10.213 3.446z"/></g><g><path fill="#494090" d="M209.902 152.1l2.42-8.378 14.256-5.955-10.856 15.074-5.82-.74z"/></g><g><path fill="#3b316c" d="M226.58 137.767l2.59-3.59 3.05 4.828-2.017 2.285-3.624-3.523z"/></g><g><path fill="#948fc4" d="M249.792 195.84l-23.34-21.626 6.746-5.727 34.168 12.088.68 17.494-18.254-2.23z"/></g><g><path fill="#494090" d="M267.366 180.575l34.992-7.65 11.297 7.782-12.166 1.114-34.124-1.245z"/></g><g><path fill="#726aae" d="M301.623 173.753l5.55-13.827h17.443l-10.96 20.78-12.033-6.953z"/></g><g><path fill="#8e89bb" d="M244.644 164.923l-2.425-4.943 8.046-.054-5.622 4.997z"/></g><g><path fill="#3f3576" d="M302.398 146.683l8.194.375 14.023 12.868-9.515-15.628-4.446-5.276 6.177-3.603-3.682-9.16-6.464 1.92 2.555 5.39 1.843 1.058-9.574 4.637.888 7.418z"/></g><g><path fill="#726aae" d="M306.714 128.27l6.465-1.923-2.268-5.74H299.76l2.928 5.84 4.026 1.822z"/></g><g><path fill="#3f3576" d="M315.025 178.068l24.084-25.783 2.59-15.32 7.713-5.615 2.07-10.745h-8.194l.634 7.345-29.876 16.87 10.567 15.105-9.59 18.143z"/></g><g><path fill="#726aae" d="M343.924 127.95l7.435-7.345h-10.93l3.494 7.345z"/></g><g><path fill="#494090" d="M305.512 159.533l-3.104-13.472h8.065l14.142 13.866H307.17l-1.658-.393z"/></g><g><path fill="#494090" d="M279.15 146.06h14.814l.528 14.724-54.592.042-11.398-15.908 17.04-5.93 10.29-.565 10.28-10.79-3.406-7.027h9.385l-3.112 5.155-.973 7.185-1.847 4.937.025-.002 12.967 8.182z"/></g><g><path fill="#3f3576" d="M266.158 137.882l7.928-10.96-1.994-6.316-5.98 7.027.046 10.25z"/></g><g><path fill="#726aae" d="M242.22 160l-4.53-8.79-.143-16.55 15.384-5.953 6.733 1.485-2.667 7.023-3.99-2.984-7.998 3.133 3.373 9.93 9.33 13.047-15.49-.34z"/></g><g><path fill="#3b316c" d="M219.353 143.25l.415 3.972 2.68-3.72-3.095-.253z"/></g><g><path fill="#8d3472" d="M169.743 155.536l-.004-10.777 4.75 12.476-4.747-1.7z"/></g><g><path fill="#d27cb2" d="M184.84 213.055l-7.274-11.776-25.508-22.636-9.134-3.854 1.726 4.82 13.805 12.354 13.197 8.315 4.765 2.122 8.424 10.653z"/></g><g><path fill="#933f7a" d="M183.42 202.99l-16.855-24.315 24.02.826 8.277.073 2.953.377 4.49 23.04H183.42z"/></g><g><path fill="#b64282" d="M183.367 210.69l.212-6.23 6.35 5.183 16.564-5.287-.217-1.46-22.816-.218-16.544-23.994-17.165-1.023 2.308.983 25.508 22.635 5.8 9.41z"/></g><g><path fill="#b4568e" d="M142.924 174.79l26.82-19.254-22.383-7.457-4.436 26.71z"/></g><g><path fill="#726aae" d="M293.87 159.926V137.21l15.416-3.605 2.155.943-9.817 4.733 5.55 20.646H293.87z"/></g><g><path fill="#726aae" d="M244.644 164.923l-2.453-4.997-2.95-.02-2.514 5.867-3.528 2.714 5.23 1.954 6.217-5.517z"/></g><g><path fill="#948fc4" d="M244.644 164.923l5.622-4.997h-8.074l2.453 4.997z"/></g><g><path fill="#726aae" d="M268.045 198.07l-.68-17.495 46.29.132-22.326 6.797-23.285 10.565z"/></g><g><path fill="#b9b5da" d="M238.428 170.44l11.84-10.515h56.904l-5.55 13.828-34.256 6.822-28.938-10.135z"/></g><g><path fill="#726aae" d="M343.924 127.95l-2.25-1.63-2.856-5.715h5.09l.016 7.345z"/></g><g><path fill="#494090" d="M266.113 127.633l-1.728-1.374-2.33-5.654h4.192l-.134 7.027z"/></g><g><path fill="#726aae" d="M385.99 137.444c3.542 0 5.617 2.263 5.617 5.76 0 3.442-2.075 5.662-5.523 5.662h-5.806v-11.422h5.712zm-11.802 16.66h12.935c6.278 0 10.67-4.385 10.67-10.9 0-6.517-4.392-11.048-10.67-11.048h-6.845v-11.564h-6.09v33.512z"/></g><g><path fill="#726aae" d="M415.267 138.39c3.255 0 5.283 2.024 5.283 5.332 0 2.124-.8 3.82-2.643 4.58-.848.377-1.84.565-3.68.565h-4.44V138.39h5.48zM403.7 154.104h11.046c3.304 0 4.91-.28 6.324-.896 3.447-1.42 5.667-4.627 5.667-9.158 0-3.967-2.078-7.74-5.62-9.16v-.092s.425-.518 1.087-1.746l6.892-12.46h-6.845l-6.607 12.505h-5.855v-12.507h-6.09v33.512z"/></g><g><path fill="#726aae" d="M449.92 125.596c6.422 0 11.048 5.19 11.048 11.988 0 6.514-4.626 11.52-11.048 11.52-6.42 0-11.045-5.006-11.045-11.52 0-6.798 4.626-11.988 11.045-11.988m0 29.078c10.15 0 17.326-7.507 17.326-17.09 0-9.865-7.175-17.558-17.326-17.558-10.15 0-17.323 7.693-17.323 17.558 0 9.583 7.174 17.09 17.323 17.09"/></g><g><path fill="#373535" d="M476.764 122.6c0 11.52 16.842 13.017 16.842 21.878 0 3.595-2.705 6.298-6.81 6.298-3.08 0-5.786-1.913-7.374-4.476l-2.377 1.632c1.82 3.313 5.504 5.925 9.936 5.925 6.205 0 9.985-4.058 9.985-9.192 0-11.008-16.562-12.548-16.655-21.273h17.17v-2.89H476.95c-.093.744-.188 1.444-.188 2.097"/></g><g><path fill="#373535" d="M521.913 136.92c0 7.793-1.724 13.855-7.977 13.855-6.204 0-7.932-6.062-7.932-13.856 0-7.885 1.728-13.947 7.932-13.947 6.253 0 7.977 6.063 7.977 13.946m-19.268 0c0 9.425 2.8 16.936 11.29 16.936 8.538 0 11.337-7.51 11.337-16.937 0-9.47-2.8-16.98-11.336-16.98-8.49 0-11.29 7.51-11.29 16.98"/></g><g><path fill="#373535" d="M531.01 123.392h7.367v24.072c0 .937.048 1.822.048 1.822h-.095s-.327-.654-1.633-1.96l-3.5-3.453-2.05 2.055 7.418 7.367h2.984v-29.903h7.23v-2.89h-17.77v2.89z"/></g><g><path fill="#373535" d="M555.306 126.844c1.26-1.817 3.685-3.778 7.368-3.778 4.528 0 8.166 3.172 8.166 7.65 0 4.48-3.594 7.745-8.304 7.745-2.006 0-4.34-.697-5.97-1.817l-2.055.745 1.775 15.907h15.86v-2.892H559.13l-.977-8.397c-.14-1.164-.28-1.865-.28-1.865h.093c.886.56 3.03 1.262 4.944 1.262 6.578 0 11.288-4.81 11.288-10.685 0-6.067-4.99-10.775-11.38-10.775-3.78 0-7.42 1.677-9.612 4.618l2.1 2.284z"/></g><path fill="#373535" d="M374.168 194.43h3.214v-32.77h-3.214v32.77z"/><g><path fill="#373535" d="M389.13 194.43h3.123l16.732-23.586c1.12-1.63 2.704-4.427 2.704-4.427h.094s-.282 2.702-.282 4.427v23.586h3.217v-32.77h-3.125l-16.733 23.587c-1.118 1.632-2.705 4.428-2.705 4.428h-.09s.278-2.702.278-4.428V161.66h-3.215v32.77z"/></g><g><path fill="#373535" d="M422.01 194.43h3.45l9.087-24.89c.56-1.678 1.26-4.196 1.26-4.196h.092s.652 2.518 1.26 4.196l9.087 24.89h3.45l-12.12-32.77h-3.45l-12.118 32.77z"/></g><g><path fill="#373535" d="M457.408 194.43h18.412v-2.893h-15.196v-11.93h12.446v-2.89h-12.446v-12.165h16.08v-2.89H457.41v32.768z"/></g><g><path fill="#373535" d="M483.755 167.767c2.052-2.003 5.22-3.587 8.483-3.587 3.868 0 6.62 2.19 6.62 5.59 0 8.254-16.316 6.297-16.316 16.455 0 5.36 4.522 8.765 10.3 8.765 3.08 0 6.434-1.073 8.672-3.17l-1.586-2.704c-1.77 1.678-4.613 2.796-7.225 2.796-3.728 0-6.85-2.052-6.85-5.5 0-7.876 16.312-5.78 16.312-16.312 0-5.035-3.68-8.996-10.02-8.996-3.776 0-7.598 1.49-10.3 4.193l1.91 2.47z"/></g><g><path fill="#373535" d="M516.892 191.537h-11.747v2.893h26.757v-2.893h-11.795V161.66h-3.215v29.877z"/></g><g><path fill="#373535" d="M558.4 164.555c3.965 0 6.436 2.474 6.436 6.393 0 3.92-2.658 6.484-6.482 6.484h-8.35v-12.877h8.395zm-.42 15.676c3.312 0 5.553 2.337 5.553 5.74 0 3.358-2.148 5.6-5.648 5.6h-7.882v-11.34h7.977zm-11.196 14.23h11.196c5.133 0 8.863-3.125 8.863-8.258 0-3.402-1.63-5.876-4.15-7.136v-.093c3.357-.934 5.505-4.198 5.505-8.118 0-5.83-4.34-9.19-9.844-9.19h-11.57v32.796z"/></g><g><path fill="#373535" d="M593.068 174.914l-4.29 11.897c-.562 1.54-1.26 4.29-1.26 4.29h-.095s-.7-2.75-1.26-4.29l-4.338-11.896h11.243zm-7.326 19.547h3.453l12.037-32.796h-3.406l-3.78 10.45h-13.2l-3.735-10.45h-3.404l12.036 32.797z"/></g><g><path fill="#373535" d="M602.498 194.46v-2.89h11.756v-29.906h3.22v29.905l22.412-.002v-29.904h3.217v29.904h11.805v2.893h-52.41z"/></g><g><path fill="#373535" d="M661.15 194.46h3.22v-29.905h15.207v-2.89H661.15v32.796z"/></g><g><path fill="#373535" d="M683.212 194.46h18.428v-2.892h-15.208v-11.94h12.455v-2.894h-12.455v-12.18h16.095v-2.89h-19.315v32.797z"/></g></g></g></g></svg>',
            MOEXLogo3: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 528 133" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Slice 1</title><defs><path d="M19.162 10.954l-7.943 7.94L.365 8.044 8.31.1l10.852 10.854" id="a"/><path d="M.22 8.895L8.16.955l10.853 10.85-7.942 7.943L.22 8.895" id="c"/></defs><g fill="none" fill-rule="evenodd"><path fill="#1A1918" d="M190.877 40.828L180.585 55.66l-10.23-14.832v19.857h-6.357V28.6h4.964l11.623 16.406L192.33 28.6h4.904v32.085h-6.357V40.828m28.755-6.72c-1.412 0-2.735.263-3.965.787-1.232.525-2.3 1.252-3.21 2.18-.907.93-1.614 2.038-2.118 3.33-.506 1.292-.758 2.724-.758 4.298 0 1.574.252 3.007.756 4.298.503 1.294 1.21 2.414 2.118 3.36.908.95 1.977 1.678 3.21 2.18 1.23.507 2.552.758 3.964.758 1.453 0 2.795-.26 4.025-.787 1.23-.523 2.3-1.25 3.21-2.18.907-.926 1.612-2.036 2.118-3.33.504-1.29.758-2.722.758-4.296 0-1.574-.253-3.006-.757-4.298-.506-1.292-1.21-2.4-2.12-3.33-.907-.928-1.977-1.655-3.208-2.18-1.23-.524-2.572-.787-4.025-.787zm0 27.365c-2.38 0-4.58-.424-6.598-1.272-2.02-.846-3.775-2.005-5.27-3.48-1.493-1.472-2.655-3.24-3.482-5.296-.827-2.058-1.24-4.3-1.24-6.72 0-2.422.413-4.662 1.24-6.72s1.99-3.823 3.483-5.298c1.494-1.472 3.25-2.633 5.27-3.48 2.017-.848 4.216-1.272 6.597-1.272 2.38 0 4.592.424 6.63 1.27 2.036.85 3.792 2.01 5.266 3.482 1.473 1.475 2.633 3.24 3.48 5.298.848 2.058 1.272 4.298 1.272 6.72 0 2.42-.424 4.662-1.27 6.72-.85 2.058-2.01 3.824-3.482 5.297-1.474 1.475-3.23 2.634-5.267 3.48-2.035.85-4.246 1.274-6.627 1.274zm52.548-8.9c-.726 1.413-1.595 2.664-2.603 3.754-1.01 1.09-2.058 1.998-3.148 2.724-1.334.89-2.707 1.515-4.12 1.88-1.412.362-2.986.544-4.72.544-2.22 0-4.37-.333-6.447-1-2.08-.666-3.987-1.886-5.723-3.662-1.29-1.29-2.38-2.955-3.267-4.994-.888-2.037-1.332-4.348-1.332-6.93 0-2.22.385-4.42 1.153-6.6.765-2.18 1.935-4.077 3.51-5.69.525-.525 1.16-1.06 1.908-1.605.747-.544 1.614-1.05 2.604-1.513.988-.463 2.117-.837 3.39-1.12 1.27-.282 2.694-.424 4.268-.424 1.736 0 3.33.192 4.783.575 1.453.385 2.744.92 3.875 1.606 1.007.565 1.998 1.3 2.966 2.21.97.907 1.836 1.927 2.604 3.057l-5.39 3.814c-.444-.727-.977-1.432-1.602-2.12-.627-.685-1.303-1.25-2.03-1.694-.644-.364-1.402-.666-2.27-.908-.868-.243-1.866-.364-2.995-.364-1.534 0-2.886.223-4.056.667-1.172.445-2.24 1.15-3.21 2.12-.766.766-1.462 1.795-2.087 3.087-.627 1.293-.94 2.907-.94 4.844 0 1.695.294 3.21.88 4.54.584 1.332 1.32 2.443 2.21 3.33.805.808 1.784 1.444 2.934 1.907 1.152.466 2.493.697 4.03.697 1.21 0 2.297-.16 3.266-.484.97-.322 1.897-.807 2.785-1.453.687-.524 1.365-1.16 2.03-1.907.667-.746 1.22-1.644 1.665-2.694l5.086 3.813m18.154-7.753l-5.507 4.662v11.2h-6.357V28.598h6.357v13.257L300.27 28.6h8.415l-13.622 11.986 14.47 20.1h-7.75L290.34 44.824m37.294-10.716c-1.412 0-2.735.263-3.965.787-1.234.525-2.303 1.252-3.21 2.18-.91.93-1.616 2.038-2.12 3.33-.504 1.292-.756 2.724-.756 4.298 0 1.574.252 3.007.756 4.298.505 1.294 1.212 2.414 2.12 3.36.908.95 1.977 1.678 3.21 2.18 1.23.507 2.552.758 3.964.758 1.453 0 2.795-.26 4.025-.787 1.23-.523 2.3-1.25 3.207-2.18.908-.926 1.613-2.036 2.12-3.33.503-1.29.757-2.722.757-4.296 0-1.574-.254-3.006-.758-4.298-.506-1.292-1.21-2.4-2.12-3.33-.907-.928-1.977-1.655-3.208-2.18-1.23-.524-2.573-.787-4.026-.787zm0 27.365c-2.38 0-4.58-.424-6.598-1.272-2.02-.846-3.775-2.005-5.267-3.48-1.497-1.472-2.657-3.24-3.483-5.296-.828-2.058-1.242-4.3-1.242-6.72 0-2.422.414-4.662 1.242-6.72.826-2.058 1.986-3.823 3.48-5.298 1.493-1.472 3.25-2.633 5.268-3.48 2.018-.848 4.217-1.272 6.598-1.272 2.38 0 4.592.424 6.63 1.27 2.036.85 3.792 2.01 5.266 3.482 1.472 1.475 2.632 3.24 3.48 5.298.847 2.058 1.27 4.298 1.27 6.72 0 2.42-.423 4.662-1.27 6.72-.85 2.058-2.01 3.824-3.48 5.297-1.475 1.475-3.23 2.634-5.268 3.48-2.037.85-4.248 1.274-6.63 1.274zm44.1-6.78c.77-.08 1.415-.344 1.943-.788.445-.363.79-.868 1.033-1.514.242-.643.365-1.27.365-1.874 0-.928-.164-1.624-.486-2.09-.326-.463-.55-.735-.67-.816-.445-.404-1.043-.687-1.793-.85-.748-.16-1.447-.24-2.096-.24h-13.057v8.293h12.572c.69 0 1.418-.04 2.187-.12zm-1.3-14.167c.587-.08 1.06-.242 1.426-.485.244-.16.506-.44.79-.845.285-.403.427-1.01.427-1.817 0-.322-.062-.715-.183-1.18-.122-.464-.465-.857-1.034-1.18-.242-.122-.515-.222-.82-.303-.305-.08-.607-.14-.912-.182-.303-.04-.576-.06-.818-.06h-12.337v6.174h11.85c.487 0 1.022-.04 1.61-.12zm.09-11.836c.823.06 1.64.18 2.444.363.806.182 1.592.454 2.357.817.766.364 1.45.848 2.055 1.454.885.888 1.45 1.816 1.69 2.784.242.97.363 1.817.363 2.543 0 .97-.102 1.798-.303 2.484-.2.687-.443 1.272-.727 1.756-.283.483-.574.867-.877 1.15-.302.282-.554.504-.757.665.57.242 1.17.596 1.806 1.06.633.464 1.236 1.16 1.81 2.088.448.808.766 1.604.95 2.392.184.787.275 1.604.275 2.45 0 1.737-.282 3.17-.846 4.3-.565 1.13-1.192 2.038-1.877 2.724-1.29 1.33-2.694 2.157-4.207 2.48-1.513.324-2.976.484-4.388.484h-19.676V28.6h17.58c.725 0 1.5.03 2.326.09zm47.716 23.883c-.727 1.413-1.596 2.664-2.604 3.754-1.01 1.09-2.06 1.998-3.15 2.724-1.33.89-2.704 1.515-4.116 1.88-1.412.362-2.986.544-4.72.544-2.22 0-4.37-.333-6.448-1-2.08-.666-3.986-1.886-5.723-3.662-1.293-1.29-2.38-2.955-3.27-4.994-.89-2.037-1.33-4.348-1.33-6.93 0-2.22.382-4.42 1.15-6.6.765-2.18 1.935-4.077 3.51-5.69.524-.525 1.16-1.06 1.907-1.605.746-.544 1.614-1.05 2.604-1.513.99-.463 2.118-.837 3.39-1.12 1.27-.282 2.695-.424 4.27-.424 1.733 0 3.327.192 4.78.575 1.453.385 2.744.92 3.875 1.606 1.008.565 1.998 1.3 2.967 2.21.97.907 1.836 1.927 2.604 3.057l-5.39 3.814c-.444-.727-.978-1.432-1.603-2.12-.627-.685-1.302-1.25-2.03-1.694-.643-.364-1.4-.666-2.268-.908-.87-.243-1.868-.364-2.997-.364-1.536 0-2.887.223-4.057.667-1.17.445-2.24 1.15-3.21 2.12-.766.766-1.46 1.795-2.086 3.087-.627 1.293-.94 2.907-.94 4.844 0 1.695.293 3.21.88 4.54.583 1.332 1.32 2.443 2.208 3.33.807.808 1.785 1.444 2.936 1.907 1.15.466 2.492.697 4.027.697 1.21 0 2.3-.16 3.268-.484.97-.322 1.896-.807 2.785-1.453.686-.524 1.363-1.16 2.03-1.907.665-.746 1.218-1.644 1.663-2.694l5.087 3.813m18.163-7.753l-5.508 4.662v11.2h-6.358V28.598h6.358v13.257L446.33 28.6h8.413l-13.62 11.986 14.468 20.1h-7.746L436.4 44.823m35.658 1.817h8.535l-4.297-8.597-4.238 8.597zm11.562 6.054h-14.59l-3.814 7.99h-7.022l15.74-32.085h4.784l15.86 32.084h-7.022l-3.936-7.99zm25.244-18.04c-.525 0-1.058.04-1.603.12-.543.08-1.06.3-1.543.66-.322.2-.615.53-.877.99-.265.46-.396 1.03-.396 1.71 0 1.2.383 2.123 1.15 2.763.768.64 1.977.96 3.634.96h11.683v-7.204h-12.045zm-4.177 26.03h-7.506l8.476-13.317c-.968-.203-1.937-.546-2.906-1.033-.97-.485-1.796-1.073-2.48-1.762-.93-.93-1.546-1.952-1.85-3.066-.302-1.114-.452-2.197-.452-3.25 0-1.052.15-2.176.453-3.37.305-1.195.98-2.32 2.03-3.37.726-.73 1.484-1.287 2.27-1.672.788-.384 1.575-.668 2.36-.85.79-.182 1.555-.294 2.303-.334.746-.04 1.44-.06 2.088-.06h17.8v32.085h-6.36V47.912h-8.23l-7.992 12.773zM183.007 98.97c.444 0 1.038-.052 1.786-.153.746-.1 1.402-.393 1.967-.878.404-.365.727-.83.97-1.394.24-.565.362-1.17.362-1.817 0-.645-.12-1.25-.363-1.817-.244-.565-.567-1.008-.97-1.33-.485-.404-1.05-.657-1.696-.758-.646-.1-1.25-.15-1.816-.15h-12.896v8.293h12.653zm8.354-26.034v6.054h-21.005v5.63h9.202c1.25 0 2.462.02 3.632.06 1.17.042 2.27.152 3.3.334 1.03.18 1.997.484 2.905.908.908.424 1.745 1 2.512 1.725 1.01.97 1.715 2.038 2.12 3.21.402 1.17.605 2.46.605 3.873 0 1.898-.323 3.442-.968 4.632-.646 1.19-1.332 2.13-2.058 2.815-.727.687-1.767 1.332-3.118 1.937-1.353.606-3.057.908-5.116.908H164V72.936h27.363zm14.123 32.086h-4.36V72.936h6.358v20.826l16.29-20.826h4.418v32.086h-6.356V84.196l-16.347 20.826m48.37-18.465c.447 0 1.003-.05 1.673-.152.666-.1 1.244-.356 1.73-.764.122-.12.356-.423.7-.912.344-.488.518-1.2.518-2.136 0-.813-.133-1.423-.397-1.83-.264-.407-.498-.71-.7-.915-.446-.408-.952-.652-1.52-.733-.567-.08-1.133-.122-1.7-.122h-11.607v7.567h11.302zm.564-13.62c2.137 0 3.842.302 5.113.907 1.272.605 2.23 1.232 2.875 1.877.646.607 1.24 1.465 1.786 2.575.545 1.11.817 2.573.817 4.388 0 1.817-.283 3.31-.85 4.48-.565 1.172-1.173 2.1-1.82 2.786-.607.645-1.255 1.15-1.943 1.513-.688.362-1.356.635-2.004.816-.647.18-1.274.302-1.88.362-.61.062-1.136.092-1.58.092H242.55v12.29h-6.357V72.936h18.223zm27.626 17.253l-8.78 14.832h-7.87l12.11-19.252-11.26-12.894h7.747l11.2 13.137V72.876h6.236v13.137l11.197-13.137h7.75l-11.26 12.894 12.108 19.252h-7.872l-8.777-14.832-3.148 3.39v11.442h-6.236V93.398l-3.148-3.208m44.738.787h8.535l-4.296-8.596-4.237 8.598zm11.563 6.054h-14.59l-3.815 7.993h-7.02l15.74-32.086h4.782l15.862 32.086h-7.024l-3.935-7.99z"/><path fill="#D12138" d="M0 .622h132.378V132.94H0V.622z"/><path fill="#FFF" d="M43.935 81.245v-28.62l14.32 14.297-14.32 14.323zM74.13 66.922l14.315-14.32v28.65L74.13 66.92zM32.71 42.98v46.924l11.225 7.236v-.02l22.25-22.25 22.26 22.264v.006l11.22-7.236V42.98l-11.22-6.257v.005l-22.26 22.265-22.25-22.246v-.024L32.71 42.98z"/><g transform="translate(51 52)"><mask id="b"><use xlink:href="#a"/></mask><path d="M19.162 10.954l-7.943 7.94L.365 8.044 8.31.1l10.852 10.854" mask="url(#b)"/></g><g transform="translate(62 62)"><mask id="d"><use xlink:href="#c"/></mask><path d="M.22 8.895L8.16.955l10.853 10.85-7.942 7.943L.22 8.895" mask="url(#d)"/></g><path fill="#FFF" d="M71.665 53.508l7.908 7.968L60.69 80.363l-7.933-7.944 18.908-18.913"/></g></svg>',
            "alarm-clock": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 21" width="21" height="21"><path stroke="null" d="M4.81.048C2.598.048.8 1.848.8 4.058c0 .754.225 1.445.59 2.05C2.82 3.82 5.095 2.113 7.77 1.413 7.033.593 5.992.046 4.81.046v.002zM16.152.046c-1.185 0-2.226.546-2.96 1.368 2.683.7 4.943 2.406 6.377 4.694.36-.605.59-1.294.59-2.05 0-2.208-1.8-4.01-4.01-4.01V.045zm-5.65 2.508c-5.087 0-9.203 4.16-9.203 9.248 0 1.987.61 3.827 1.68 5.33l-1.32 1.685a1.25 1.25 0 1 0 1.96 1.55l1.09-1.41c1.58 1.274 3.59 2.048 5.79 2.048 2.18 0 4.21-.74 5.78-2.004l1.05 1.37a1.25 1.25 0 1 0 1.954-1.55l-1.276-1.64c1.082-1.51 1.686-3.37 1.686-5.37 0-5.09-4.114-9.25-9.202-9.25zm0 2.368c3.785 0 6.835 3.095 6.835 6.88 0 1.8-.694 3.427-1.822 4.646a1.24 1.24 0 0 0-.092.092c-1.242 1.29-2.98 2.096-4.92 2.096-3.785 0-6.835-3.05-6.835-6.833 0-3.785 3.05-6.88 6.835-6.88zm-.09 1.185a.948.948 0 0 0-.138.044.948.948 0 0 0-.73.96v4.29l-1.822 1.91a.95.95 0 1 0 1.368 1.32l2.096-2.18.275-.274V7.11a.948.948 0 0 0-1.05-1z"/></svg>',
            "baloon-with-chart": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 15" width="16px" height="15px"><path fill-rule="evenodd" d="M1.6 0C.72 0 .008.675.008 1.5L0 15l3.2-3h11.2c.88 0 1.6-.675 1.6-1.5v-9c0-.825-.72-1.5-1.6-1.5H1.6zm4.823 6.36L8.73 8.37c.38.332 1.004.265 1.286-.138l2.856-4.082c.245-.35.128-.814-.26-1.035-.39-.22-.905-.115-1.15.235L9.15 6.648 6.907 4.693c-.362-.315-.95-.272-1.25.09l-2.492 3.02c-.275.332-.198.802.17 1.05.37.246.892.177 1.167-.156l1.92-2.338z"/></svg>',
            baloon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 14" width="15px" height="14px"><path d="M1.25 0C.562 0 .006.573.006 1.273L0 14l2.5-3h11.25c.688 0 1.25-.573 1.25-1.273V1.273C15 .573 14.437 0 13.75 0H1.25zM12 8H3V6h9v2zm0-3H3V3h9v2z"/></svg>',
            base: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="2 6 27.1 22" width="27.1" height="22"><path d="M12.1 24h-2v-1h.4c-.5-.3-.9-.7-1.4-1.2v.2H4v-1h4.3c-.3-.3-.5-.7-.7-1H4v-1h3c-.2-.3-.3-.7-.4-1H4v-1h2.3c-.2-.8-.3-1.6-.3-2.5 0-1.6.4-3.1 1-4.5H2v18h15v-3h-.5c-1.6 0-3.1-.4-4.4-1zM9 26H4v-1h5v1zm0-2H4v-1h5v1zm6 2h-5v-1h5v1zm8.5-6.6c1-1.4 1.5-3 1.5-4.9C25 9.8 21.2 6 16.5 6S8 9.8 8 14.5s3.8 8.5 8.5 8.5c1.8 0 3.5-.6 4.9-1.5l5.6 5.6 2.1-2.1-5.6-5.6zM22 18.1L20.1 20c-1 .7-2.3 1.1-3.6 1.1-3.6 0-6.5-2.9-6.5-6.5S12.9 8 16.5 8s6.5 2.9 6.5 6.5c0 1.3-.4 2.5-1 3.6z"/></svg>',
            "bug-report": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M23 11h-2.8c-.5-.8-1.1-1.5-1.8-2L20 7.4 18.6 6l-2.2 2.2C16 8.1 15.5 8 15 8c-.5 0-1 .1-1.4.2L11.4 6 10 7.4 11.6 9c-.7.5-1.3 1.2-1.8 2H7v2h2.1c-.1.3-.1.7-.1 1v1H7v2h2v1c0 .3 0 .7.1 1H7v2h2.8c1 1.8 3 3 5.2 3s4.2-1.2 5.2-3H23v-2h-2.1c.1-.3.1-.7.1-1v-1h2v-2h-2v-1c0-.3 0-.7-.1-1H23v-2zm-6 8h-4v-2h4v2zm0-4h-4v-2h4v2z"/></svg>',
            calendar: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" width="22" height="22"><path d="M6.5 1C5.67 1 5 1.67 5 2.5v1C5 4.33 5.67 5 6.5 5S8 4.33 8 3.5v-1C8 1.67 7.33 1 6.5 1zm8 0c-.83 0-1.5.67-1.5 1.5v1c0 .83.67 1.5 1.5 1.5S16 4.33 16 3.5v-1c0-.83-.67-1.5-1.5-1.5zM1 4v16h19V4h-3.05c-.238 1.164-1.262 2-2.45 2-1.186-.002-2.208-.838-2.445-2H8.95C8.71 5.164 7.687 6 6.5 6c-1.186-.002-2.208-.838-2.445-2H1zm20 2v15H3v1h19V6h-1zM2 8h17v11H2V8zm3 1v3h3V9H5zm4 0v3h3V9H9zm4 0v3h3V9h-3zm-8 4v3h3v-3H5zm4 0v3h3v-3H9zm4 0v3h3v-3h-3z"/></svg>',
            "chart-smooth-arrow-up": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 17" width="24" height="17"><g fill-rule="evenodd"><path d="M1.826 16.913l4.088-6c.85-1.244 2.036-1.25 2.896-.018l2.718 3.897c1.698 2.436 4.46 2.235 5.79-.425l6.457-12.92-1.79-.894-6.456 12.92c-.65 1.302-1.53 1.366-2.365.175L10.45 9.75c-1.66-2.38-4.55-2.365-6.188.037l-4.088 6 1.652 1.126zM7 .7v6.1h1V.2H7v.5z"/><path d="M7.146.346l-2.8 2.8-.353.354.707.707.354-.353 2.8-2.8L8.207.7 7.5-.007l-.354.353z"/><path d="M7.146 1.054l2.8 2.8.354.353.707-.707-.353-.354-2.8-2.8L7.5-.007 6.793.7l.353.354z"/></g></svg>',
            "chart-smooth": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 17" width="24px" height="17px"><path fill-rule="evenodd" d="M1.826 16.913l4.088-6c.85-1.244 2.036-1.25 2.896-.018l2.718 3.897c1.698 2.436 4.46 2.235 5.79-.425l6.457-12.92-1.79-.894-6.456 12.92c-.65 1.302-1.53 1.366-2.363.175L10.45 9.75c-1.66-2.38-4.55-2.365-6.188.037l-4.088 6 1.652 1.126z"/></svg>',
            "chat-add-people": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17"><circle cx="10" cy="6" r="3"/><path d="M10 10c-4.575 0-6 3.333-6 3.333V15h12v-1.667S14.575 10 10 10zM2 5v6h2V5zM6 7v2H0V7z"/></svg>',
            "chat-new-chat": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34 34"><path d="M21.197 2.06c-7.07 0-12.8 5.83-12.8 13.027 0 7.14 5.644 12.934 12.638 13.024v5.544l8.747-8.902C32.372 22.355 34 18.89 34 15.03 34 7.832 28.267 2 21.197 2zM10.463 27.674v-1.58l-1.275-.017c-3.642-.046-6.606-3.1-6.606-6.806 0-3.053 1.986-5.644 4.71-6.505.16-.984.417-1.935.764-2.844C3.518 10.52 0 14.45 0 19.246c0 4.7 3.433 8.64 7.88 9.33V34l6.377-6.49c-.762-.445-1.48-.957-2.146-1.533l-1.644 1.674z"/></svg>',
            "chat-quote": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 24"><path d="M32 24V0L20 12v12zm-20 0V0L0 12v12z"/></svg>',
            chat: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="4 6 23 21" width="23" height="21"><path d="M22 6H5v12h1v4l4-4h3v-6h9V6zm-8 7v10h8l4 3v-3h1V13H14z"/></svg>',
            "close-cross": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 9"><path d="M2 1L1 2l2.5 2.5L1 7l1 1 2.5-2.5L7 8l1-1-2.5-2.5L8 2 7 1 4.5 3.5z"/></svg>',
            close: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="15" height="15" enable-background="new 0 0 24 24" version="1"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm4.9 13.5l-1.4 1.4-3.5-3.5-3.5 3.5-1.4-1.4 3.5-3.5-3.5-3.5 1.4-1.4 3.5 3.5 3.5-3.5 1.4 1.4-3.5 3.5 3.5 3.5z"/></svg>',
            comment: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M50.008 0C29.768 0 9.526.342 7.144 1.03.544 2.93.4 3.64.066 35.444-.097 50.977.04 65.6.374 67.94c.808 5.67 3.695 8.535 9.47 9.398 6.977 1.044 7.848 2.302 7.848 11.355 0 4.23.436 8.537.97 9.57 1.826 3.543 4.7 2.06 15.778-8.146 5.987-5.515 11.518-10.438 12.29-10.938.772-.5 11.54-1.13 23.93-1.397 25.646-.554 26.73-.85 28.54-7.83.665-2.57.923-14.208.738-33.35-.32-33.097-.434-33.663-7.068-35.575C90.488.34 70.248 0 50.008 0zM15.002 20.608h69.94v10.37h-69.94V20.61zm0 25.927h69.94v10.37h-69.94v-10.37z"/><path fill-opacity="0" d="M64.358-.26h52.402v6.945H64.358z"/></svg>',
            document: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="50" height="50"><title/><desc/><g fill="none" fill-rule="evenodd"><g fill="#929292"><path d="M19.5 3H9.003C7.897 3 7 3.898 7 5.007v22.986C7 29.1 7.89 30 8.997 30h15.006C25.106 30 26 29.102 26 28.01V10l-6-7h-.5zM19 4H8.996C8.446 4 8 4.455 8 4.995v23.01c0 .55.455.995 1 .995h15c.552 0 1-.445 1-.993V11h-4.002C19.894 11 19 10.113 19 8.994V4zm1 .5v4.49c0 .558.45 1.01.997 1.01H24.7L20 4.5zM10 10zm0-3zm0 6zm0 3zm0 3zm0 3zm0 3z"/></g></g></svg>',
            edit: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><path d="M0 46l35-35 14 14-35 35H0zM39 7l6-6c5-5 19 9 14 14l-6 6z"/></svg>',
            facebook: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 7 12"><path d="M4.09 12V6.526h1.857l.278-2.133H4.09V3.03c0-.617.173-1.037 1.068-1.037H6.3V.083C6.102.06 5.425 0 4.636 0 2.99 0 1.862.994 1.862 2.82v1.573H0v2.133h1.862V12H4.09z"/></svg>',
            "flag-ar": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#74acdf" d="M0 8h16v3H0zM0 0h16v3H0z"/><circle fill="#f6b40e" fill-opacity=".5" cx="8" cy="5.5" r="2"/><circle fill="#f6b40e" cx="8" cy="5.5" r="1"/></svg>',
            "flag-at": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#df0000" d="M0 0h16v11H0z"/><path fill="#fff" d="M0 4h16v3H0z"/></svg>',
            "flag-au": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#00008b" d="M0 0h16v11H0z"/><path fill="#fff" d="M0 0v1.043l.5.357H0v2.2h.498L0 3.955V5h1.46l.94-.672V5h2.2v-.67l.94.67H7V3.957L6.5 3.6H7V1.4h-.5l.5-.357V0H5.537L4.6.67V0H2.4v.672L1.46 0H0zm12 5h1v1h-1z"/><path fill="red" d="M0 0v.307L1.67 1.5h.86L.43 0H0zm3 0v2H0v1h3v2h1V3h3V2H4V0H3zm3.57 0l-2.1 1.5h.86L7 .307V0h-.43zm-4.9 3.5L0 4.693V5h.43l2.1-1.5h-.86zm2.8 0L6.57 5H7v-.307L5.33 3.5h-.86z"/><circle fill="#fff" cx="12.5" cy="1.5" r="1"/><circle fill="#fff" cx="14.5" cy="3.5" r="1"/><circle fill="#fff" cx="9.5" cy="4.5" r="1"/><circle fill="#fff" cx="11.5" cy="9.5" r="1"/><path fill="#fff" d="M3 6.5l-1 1v1l1 1h1l1-1v-1l-1-1H3z"/></svg>',
            "flag-br": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#009b3a" d="M0 0h16v11H0z"/><path fill="#fedf00" d="M8 1l7 4.5L8 10 1 5.5z"/><circle fill="#002776" cx="8" cy="5.5" r="3"/><path fill="#fff" d="M5.424 3.97c-.114.19-.207.394-.276.606 2.325-.12 4.046.182 5.635 2.037.086-.218.147-.445.18-.677C9.39 4.156 7.72 3.89 5.423 3.97z"/></svg>',
            "flag-btc": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill="#f68f2d" d="M10.67 7.597c.617-.314 1.003-.868.913-1.79C11.463 4.547 10.375 4.12 9 4V2.258H8V4H7V2.258H6V4c-.23.005-.438.014-.66.014V4.01L3.873 4v1.144s.787-.015.774 0c.43 0 .572.25.612.466v4.787c-.02.135-.1.352-.4.352.013.01-.776 0-.776 0L3.874 12H6v1.793h1V12h1v1.793h1V12c1.79-.103 3.042-.524 3.197-2.204.126-1.352-.51-1.955-1.527-2.2zM7.013 5.22c.6 0 2.585-.19 2.585 1.063 0 1.202-1.984 1.06-2.585 1.06zm0 5.538V8.416c.722 0 3.08-.207 3.08 1.17 0 1.322-2.358 1.17-3.08 1.172z"/><path fill="#f68f2d" d="M8 0a8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8 8 8 0 0 0-8-8zm0 1.234A6.766 6.766 0 0 1 14.766 8 6.766 6.766 0 0 1 8 14.766 6.766 6.766 0 0 1 1.234 8 6.766 6.766 0 0 1 8 1.234z"/></svg>',
            "flag-ca": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="red" d="M0 0h4v11H0zm12 0h4v11h-4zM6.75 2.5l.25 2L5.5 4l-1 .75L5 6l1 .5V7h1.5v1.877h1V7H10v-.5l1-.5.5-1.25-1-.75-1.5.5.2-2L8 1.75z"/></svg>',
            "flag-ch": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#d52b1e" d="M0 0h16v11H0z"/><path fill="#fff" d="M7 2v2H5v3h2v2h3V7h2V4h-2V2H7z"/></svg>',
            "flag-cn": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#de2910" d="M0 0h16v11H0z"/><circle fill="#ffde00" cx="5.5" cy="1.5" r=".5"/><circle fill="#ffde00" cx="5.5" cy="4.5" r=".5"/><circle fill="#ffde00" cx="6.5" cy="2.5" r=".5"/><circle fill="#ffde00" cx="6.5" cy="3.5" r=".5"/><path fill="#ffde00" d="M2.97 1.047l.587 1.19 1.314.192-.95.925.225 1.31-1.175-.62-1.177.62.225-1.31-.95-.927 1.313-.192z"/></svg>',
            "flag-cz": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#d7141a" d="M0 5.5h16V11H0z"/><path fill="#11457e" d="M8 5.5L0 11V0z"/><path fill="â„–000" fill-opacity=".15" d="M0 0l6 .5h9.5l.5 5V0z" class="flag-shade"/></svg>',
            "flag-de": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#ffce00" d="M0 0h16v11H0z"/><path fill="#d00" d="M0 4h16v3H0z"/><path d="M0 0h16v4H0z"/></svg>',
            "flag-es": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#ffc400" d="M0 0h16v11H0z"/><path fill="#c60b1e" d="M0 8h16v3H0zm0-8h16v3H0zm7 5v2c0 .278-.446.5-1 .5S5 7.28 5 7V5z"/><path fill="#ffc400" fill-opacity=".5" d="M5 6h2v2H5z"/><path fill="#ccc" d="M6 5h1v1H6zM7.5 4.5H8v3h-.5zM4 4.5h.5v3H4z"/><path fill="#c60b1e" d="M6 4s-.9 0-1 .268c-.1.268.3.532 1 .632.7-.1 1.1-.364 1-.632C6.9 4 6 4 6 4z"/></svg>',
            "flag-eu": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#039" d="M0 0h16v11H0z"/><path fill="#fc0" d="M8 2h1v1H8zM6 3h1v1H6zM5 5h1v1H5zm1 2h1v1H6zm2 1h1v1H8zm2-1h1v1h-1zm1-2h1v1h-1zm-1-2h1v1h-1z"/></svg>',
            "flag-fa": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#239f40" d="M0 0h16v3H0z"/><path fill="#da0000" d="M0 8h16v3H0zm7.7-1V4h.6v3zM8 7c-.7-.7-1.3-1.6-.8-3-.7 1-.8 2.7.8 3zM7 4c-.6.7-.6 1.8-.4 2.6-.7-1-.4-2 .4-2.6zm1 3c.7-.7 1.3-1.6.8-3 .7 1 .8 2.7-.8 3zm1-3c.6.7.6 1.8.4 2.6.7-1 .4-2-.4-2.6z"/></svg>',
            "flag-fr": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#002395" d="M0 0h5v11H0z"/><path fill="#ed2939" d="M11 0h5v11h-5z"/></svg>',
            "flag-fx": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#333" d="M0 0v10h2.5V6H6V4H2.5V2H6V0zm15.5 0H13L6.5 10H9z"/><path fill="#333" d="M7 0h3l6 10h-3z"/></svg>',
            "flag-gr": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#0d5eaf" d="M0 0v2h2V0H0zm4 0v2h2V1h10V0H4zm2 2.5v1h10v-1H6zM0 4v2h2V4H0zm4 0v2h12V5H6V4H4zM0 7.5v1h16v-1H0zM0 10v1h16v-1H0z"/></svg>',
            "flag-ie": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#009A49" d="M0 0h5v11H0z"/><path fill="#FF7900" d="M11 0h5v11h-5z"/></svg>',
            "flag-il": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#0038b8" d="M0 1h16v2H0zM0 8h16v2H0z"/><path fill="#0038b8" color="#000" d="M5.834 4.25L8 8l.217-.375 1.95-3.375H5.833zm.867.5h2.6L8 7 6.7 4.75z"/><path fill="#0038b8" d="M8 3l-.217.375-1.95 3.375h4.333L8 3zm0 1l1.3 2.25H6.7L8 4z"/></svg>',
            "flag-in": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#f93" d="M0 0h16v3H0z"/><path fill="#128807" d="M0 8h16v3H0z"/><circle fill="#008" cx="8" cy="5.5" r="1.5"/><circle fill="#fff" cx="8" cy="5.5" opacity=".7" r="1.25"/><circle fill="#008" cx="8" cy="5.5" r=".4"/></svg>',
            "flag-it": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#009246" d="M0 0h5v11H0z"/><path fill="#ce2b37" d="M11 0h5v11h-5z"/></svg>',
            "flag-jp": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><circle fill="#bc002d" cx="8" cy="5.5" r="3.25"/><path fill="#000" fill-opacity=".15" d="M0 0v11h16V0zm.5.5h15v10H.5z" class="flag-shade"/></svg>',
            "flag-ko": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#c60c30" d="M9.27 2.782c-1.502-.7-3.287-.05-3.987 1.45-.35.752-.15 2.19.6 2.54l4.88-.1c.63-1.487-.03-3.207-1.493-3.89z"/><path fill="#003478" d="M6.73 8.218a3 3 0 0 0 3.987-1.45 1.5 1.5 0 0 0-.725-1.994 1.5 1.5 0 0 0-1.994.725 1.5 1.5 0 0 1-1.993.725 1.5 1.5 0 0 1-.767-1.896A3 3 0 0 0 6.73 8.217z"/><path fill-opacity=".5" d="M3.1 7.2l2 2-.8.8-2-2zM11.7 1l2 2-.8.8-2-2zM12.9 7.2l-2 2 .8.8 2-2zM4.3 1l-2 2 .8.8 2-2z"/><path fill-opacity=".15" d="M0 0v11h16V0zm.5.5l15 .1v9.9H.5z" class="flag-shade"/></svg>',
            "flag-nl": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#ae1c28" d="M0 0h16v4H0z"/><path fill="#21468b" d="M0 7h16v4H0z"/></svg>',
            "flag-no": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#ef2b2d" d="M0 0h16v11H0z"/><path fill="#fff" d="M4.1 0h3.4v11H4.1z"/><path fill="#fff" d="M0 4.1h16v3.4H0z"/><path fill="#002868" d="M5 0h1.6v11h-1.6z"/><path fill="#002868" d="M0 5h16v1.6H0z"/></svg>',
            "flag-nz": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#00008b" d="M0 0h16v11H0z"/><path fill="#fff" d="M0 0v1.043l.5.357H0v2.2h.498L0 3.955V5h1.46l.94-.672V5h2.2v-.67l.94.67H7V3.957L6.5 3.6H7V1.4h-.5l.5-.357V0H5.537L4.6.67V0H2.4v.672L1.46 0H0z"/><path fill="red" d="M0 0v.307L1.67 1.5h.86L.43 0zm3 0v2H0v1h3v2h1V3h3V2H4V0zm3.57 0l-2.1 1.5h.86L7 .307V0zm-4.9 3.5L0 4.693V5h.43l2.1-1.5zm2.8 0L6.57 5H7v-.307L5.33 3.5z"/><circle fill="red" cx="12.5" cy="1.5" r="1"/><circle fill="red" cx="14.5" cy="3.5" r="1"/><circle fill="red" cx="9.5" cy="4.5" r="1"/><circle fill="red" cx="11.5" cy="9.5" r="1"/></svg>',
            "flag-pl": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#dc143c" d="M0 6h16v5H0z"/><path fill-opacity=".15" d="M0 0v6L.5.5h15L16 6V0z" class="flag-shade"/></svg>',
            "flag-ro": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fcd116" d="M0 0h16v11H0z"/><path fill="#002b7f" d="M0 0h5v11H0z"/><path fill="#ce1126" d="M11 0h5v11h-5z"/></svg>',
            "flag-rounded-ar": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Argentina</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#8CBAE2" d="M0 0h16v4.44H0V0zM0 11.56h16V16H0v-4.44z" mask="url(#b)"/><path fill="#F6BB42" d="M9.964 8.678a.72.72 0 0 1 .08-.303l.138-.24a.313.313 0 0 0 0-.283l-.142-.248a.724.724 0 0 1-.084-.303v-.287a.305.305 0 0 0-.143-.242l-.24-.138a.687.687 0 0 1-.222-.222l-.14-.24a.306.306 0 0 0-.24-.142h-.29a.71.71 0 0 1-.302-.08l-.254-.143a.31.31 0 0 0-.28 0l-.24.14a.7.7 0 0 1-.302.082h-.28a.314.314 0 0 0-.244.14l-.142.25a.748.748 0 0 1-.223.222l-.25.143a.315.315 0 0 0-.136.244v.28a.718.718 0 0 1-.08.3l-.143.243a.313.313 0 0 0 0 .28l.147.25a.72.72 0 0 1 .08.303v.287a.33.33 0 0 0 .143.243l.245.138c.09.058.165.134.222.223l.138.242a.314.314 0 0 0 .244.14h.29a.71.71 0 0 1 .3.08l.25.143a.31.31 0 0 0 .28 0l.245-.14a.707.707 0 0 1 .302-.082h.28a.306.306 0 0 0 .24-.14l.146-.25a.694.694 0 0 1 .222-.222l.25-.144a.316.316 0 0 0 .136-.244v-.28.002z" mask="url(#b)"/></g></svg>',
            "flag-rounded-at": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Austria</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#ED5565" d="M0 0h16v5.333H0zM0 10.667h16V16H0z" mask="url(#b)"/></g></svg>',
            "flag-rounded-au": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>Australia</title><circle fill="#4758a9" cx="8" cy="8" r="8"/><path fill="#fff" d="M8 0a8 8 0 0 0-1.56.162L4.16 2.47V.99a8 8 0 0 0-1.348.93v.375l-.2-.2a8 8 0 0 0-.936 1.018l.164.166h-.29A8 8 0 0 0 .748 4.64h1.266L.14 6.537A8 8 0 0 0 0 8h.63l2.183-2.207V8H4.16V5.63L6.504 8H8v-.457l-2.87-2.9H8V3.28H5.293L8 .544V0zm3.393 1.914c-.028 0-.055.033-.075.098l-.15.535a.36.36 0 0 1-.31.24l-.49.016c-.132.003-.16.076-.056.166l.35.304a.452.452 0 0 1 .125.4l-.117.49c-.03.13.032.173.14.1l.407-.3a.388.388 0 0 1 .398-.014l.41.257c.11.07.173.023.137-.107l-.123-.43a.422.422 0 0 1 .113-.397l.383-.34c.098-.088.072-.163-.058-.163l-.503-.004a.368.368 0 0 1-.32-.235l-.188-.52c-.023-.064-.05-.095-.077-.095zm3.404 1.875l-.037.12a.35.35 0 0 1-.307.24l-.492.017c-.126.004-.155.076-.057.166l.35.307a.444.444 0 0 1 .13.397l-.12.49c-.03.13.036.176.142.098l.41-.293a.388.388 0 0 1 .4-.014l.4.252a8 8 0 0 0-.817-1.78zm-4.98 1.87c-.028 0-.053.034-.07.1l-.157.532a.35.35 0 0 1-.307.242l-.488.016c-.134.005-.16.077-.06.167l.355.308a.45.45 0 0 1 .123.4l-.115.485c-.032.13.03.173.136.098h.002l.407-.295a.388.388 0 0 1 .4-.016l.406.256c.113.07.177.023.137-.105l-.12-.43a.42.42 0 0 1 .114-.397l.38-.337c.1-.088.075-.162-.06-.162l-.5-.003a.374.374 0 0 1-.32-.235l-.185-.524c-.024-.065-.052-.097-.08-.096zm3.826 2.384c-.02 0-.04.024-.053.07l-.11.38c-.032.095-.118.165-.218.173l-.356.012c-.094 0-.11.054-.04.116l.253.223a.32.32 0 0 1 .09.284l-.088.347c-.022.094.024.126.104.07l.002-.002.29-.212a.274.274 0 0 1 .285-.01l.295.182c.08.05.123.016.097-.076L14.11 9.3a.3.3 0 0 1 .08-.284l.277-.243c.07-.063.05-.117-.045-.117l-.36-.004c-.1-.007-.192-.07-.232-.166l-.133-.375c-.015-.043-.035-.065-.054-.064zM3.51 10.43c-.036 0-.07.042-.096.125l-.2.685a.448.448 0 0 1-.396.31l-.63.018c-.175.004-.205.102-.077.215l.454.4a.572.572 0 0 1 .16.508l-.15.63c-.04.17.045.224.183.124v.002l.523-.38a.5.5 0 0 1 .515-.016l.527.33c.143.09.225.025.18-.142l-.16-.55a.55.55 0 0 1 .146-.51l.494-.436c.13-.114.094-.21-.074-.21l-.65-.007c-.184-.013-.344-.128-.414-.298l-.235-.676c-.03-.08-.066-.12-.1-.12z"/><path fill="#ed5565" d="M8 0a8 8 0 0 0-.977.07L4.16 2.967v.314h.64L8 .047V0zM3.822 1.186a8 8 0 0 0-.67.457V3.62h-1.84a8 8 0 0 0-.4.683h2.24V8h.67V4.303H8V3.62H3.822V1.187zM2.357 2.334a8 8 0 0 0-.466.502l.443.445h.48v-.484l-.455-.46zm.15 2.31L.05 7.126A8 8 0 0 0 0 8h.14l2.67-2.705v-.652h-.306zm1.653 0v.485L6.998 8h.96L4.642 4.643h-.48z"/></svg>',
            "flag-rounded-br": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Brazil</title><defs><ellipse cx="8.039" cy="8" rx="7.784" ry="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#52C162" xlink:href="#a"/><path fill="#F6D660" d="M-1.734 8.01L7.823.34l9.556 7.67-9.557 7.668-9.557-7.67z" mask="url(#b)"/><path fill="#4758A9" d="M7.823 2.724c2.014-.024 3.843 1.205 4.63 3.112.787 1.906.376 4.112-1.04 5.584-1.418 1.473-3.56 1.92-5.423 1.133C4.127 11.766 2.91 9.9 2.91 7.83c-.014-2.804 2.185-5.09 4.913-5.106z" mask="url(#b)"/><path fill="#F5F7FA" d="M12.078 10.212c.14-.305.25-.625.328-.953a6.703 6.703 0 0 0-3.89-3.763 6.463 6.463 0 0 0-5.325.41c-.112.25-.206.508-.28.773a6.465 6.465 0 0 1 5.343-.313 6.716 6.716 0 0 1 3.825 3.845z" mask="url(#b)"/></g></svg>',
            "flag-rounded-btc": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><title>Bitcoin</title><g fill="none" fill-rule="evenodd" transform="translate(1 1)"><circle stroke="#F88F17" cx="8" cy="8" r="8"/><path fill="#F88F17" d="M8 12v2h.827v-2h.695c.543 0 1.012-.04 1.408-.12.396-.082.722-.215.98-.403.256-.187.444-.436.566-.748.12-.312.18-.7.18-1.16 0-.602-.184-1.064-.555-1.387-.37-.323-.888-.513-1.555-.572.22-.043.425-.11.616-.197a1.72 1.72 0 0 0 .502-.347 1.53 1.53 0 0 0 .335-.51c.08-.2.12-.426.12-.683 0-.447-.07-.805-.208-1.072a1.48 1.48 0 0 0-.584-.615 2.47 2.47 0 0 0-.908-.286 8.854 8.854 0 0 0-1.17-.073h-.42V2H8v1.827H6.827V2H6v1.827H4.407v.98c.653 0 .98.168.98.505v5.28c0 .337-.327.506-.98.506V12H6v2h.827v-2H8zm-.38-3.817v2.64h1.418c.25 0 .456-.033.62-.1a.96.96 0 0 0 .398-.28c.1-.12.168-.263.21-.428.04-.166.06-.347.06-.545 0-.425-.1-.746-.298-.963-.198-.216-.528-.324-.99-.324h-1.42zm0-3.102V7.25H8.75c.403 0 .684-.1.84-.297.16-.197.238-.505.238-.923 0-.63-.36-.946-1.078-.946H7.62z"/></g></svg>',
            "flag-rounded-ca": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>Canada</title><path fill="#f5f7fa" d="M8 0a8 8 0 0 0-4.1 1.14v13.72A8 8 0 0 0 8 16a8 8 0 0 0 4.1-1.14V1.14A8 8 0 0 0 8 0z"/><path fill="#ed5565" fill-rule="evenodd" d="M11.996 1.076v13.842A8 8 0 0 0 16 8a8 8 0 0 0-4.004-6.924zM4 1.084A8 8 0 0 0 0 8a8 8 0 0 0 4 6.92V1.084zM8.004 4.89c-.072 0-.143.053-.2.16l-.163.323c-.072.16-.17.31-.29.445a.89.89 0 0 1-.41-.125c-.11-.06-.167.085-.12.323l.146.834c.046.193.05.394.01.588-.04.086-.304-.13-.46-.315l-.142-.17c-.155-.183-.31-.237-.342-.12a1.7 1.7 0 0 1-.09.27 1.48 1.48 0 0 1-.55-.05l-.05-.01a.246.246 0 0 0-.317.328l.014.06c.06.233.13.487.153.567a.46.46 0 0 1-.25.275c-.09.046-.014.21.173.367l.88.755c.136.11.265.23.384.355a.88.88 0 0 1-.045.387c-.037.13.127.21.367.18l.675-.08a2.8 2.8 0 0 1 .498-.034c.05.17.067.348.047.523l-.037.836a.235.235 0 1 0 .23 0l-.017-.835a1.907 1.907 0 0 1 .027-.493 1.4 1.4 0 0 1 .516 0l.68.084c.234.03.405-.052.365-.18a1.444 1.444 0 0 1-.063-.322c.11-.16.246-.3.4-.42l.884-.755c.182-.157.262-.322.174-.366a.728.728 0 0 1-.213-.146c.008-.236.045-.47.11-.697l.015-.052a.246.246 0 0 0-.316-.33l-.043.01a2.213 2.213 0 0 1-.5.072.635.635 0 0 1-.144-.294c-.036-.117-.186-.063-.34.12l-.15.173c-.124.154-.27.286-.435.4-.085.035-.057-.44-.013-.677l.15-.834c.04-.24-.018-.387-.13-.326-.102.058-.21.11-.32.15-.17-.116-.3-.28-.377-.472l-.166-.318-.005-.004c-.055-.107-.127-.16-.2-.16z"/></svg>',
            "flag-rounded-ch": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>Switzerland</title><g fill="none" fill-rule="evenodd"><circle fill="#ED5565" cx="8" cy="8" r="8"/><path fill="#FFF" d="M7.333 4h1.334c.368 0 .666.298.666.667v6.67a.667.667 0 0 1-.666.666H7.333a.667.667 0 0 1-.666-.667V4.67A.667.667 0 0 1 7.333 4z"/><path fill="#FFF" d="M4.004 8.67V7.337c0-.368.3-.667.667-.667h6.66c.367 0 .666.3.666.667V8.67a.667.667 0 0 1-.667.667H4.67a.667.667 0 0 1-.666-.667z"/></g></svg>',
            "flag-rounded-cn": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>China</title><circle fill="#ed5565" cx="8" cy="8" r="8"/><path fill="#f6bb42" d="M7.52 1.36c-.023.002-.044.03-.06.087l-.13.477a.31.31 0 0 1-.26.215l-.418.01c-.114.003-.135.07-.05.15l.3.275a.42.42 0 0 1 .104.356l-.1.434c-.027.12.03.16.12.09l.347-.266a.31.31 0 0 1 .338-.01l.348.228c.095.064.147.02.117-.095l-.105-.38a.4.4 0 0 1 .096-.356l.326-.303c.085-.076.06-.144-.05-.144l-.428-.004c-.123-.01-.228-.09-.274-.206l-.154-.47c-.02-.057-.044-.083-.066-.083zM2.88 2.726c-.07 0-.135.086-.183.252l-.385 1.37a.896.896 0 0 1-.773.622l-.95.028a8 8 0 0 0-.226.62l.678.61a1.166 1.166 0 0 1 .314 1.02l-.293 1.254c-.077.337.08.448.348.25h.003l1.024-.756a.954.954 0 0 1 1.003-.033l1.027.656c.28.18.436.055.342-.277L4.504 7.24a1.1 1.1 0 0 1 .283-1.017l.956-.875c.25-.228.184-.416-.146-.42L4.34 4.916a.937.937 0 0 1-.807-.6l-.46-1.35c-.057-.163-.128-.243-.196-.24zm6.91.763c-.022 0-.045.03-.06.087l-.128.477a.31.31 0 0 1-.264.215l-.416.01c-.112.004-.136.07-.05.15l.3.274a.42.42 0 0 1 .105.358l-.1.434c-.026.12.03.16.12.09H9.3l.346-.264a.31.31 0 0 1 .336-.01l.346.225c.097.064.147.02.117-.096l-.103-.382a.4.4 0 0 1 .095-.356l.327-.302c.08-.08.06-.144-.05-.144l-.43-.006c-.122-.01-.227-.088-.272-.205l-.157-.47c-.02-.057-.04-.085-.064-.085zm0 2.43c-.022 0-.045.03-.06.09l-.128.473a.31.31 0 0 1-.264.217l-.416.013c-.112.003-.136.07-.05.148l.3.278a.42.42 0 0 1 .105.353l-.1.437c-.026.12.03.16.12.09l.346-.264a.312.312 0 0 1 .337-.012l.348.23c.097.065.147.02.117-.096l-.103-.383a.4.4 0 0 1 .095-.354l.327-.305c.08-.08.06-.143-.05-.143l-.43-.006c-.122-.007-.227-.09-.272-.206l-.157-.47c-.02-.056-.04-.084-.064-.083zM7.52 7.747c-.023 0-.044.03-.06.086l-.13.477a.31.31 0 0 1-.26.214l-.418.01c-.114.005-.135.073-.05.15l.3.276a.42.42 0 0 1 .104.356l-.1.436c-.027.117.03.156.12.086v.002l.347-.264a.312.312 0 0 1 .338-.012l.348.227c.095.066.147.02.117-.094l-.104-.383a.4.4 0 0 1 .097-.35l.326-.306c.085-.08.06-.144-.05-.144l-.428-.006c-.123-.01-.228-.09-.274-.207l-.153-.472c-.02-.056-.044-.083-.066-.082z"/></svg>',
            "flag-rounded-cz": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Czech Republic</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#ED5565" d="M0 8.004h16V16H0V8.004z" mask="url(#b)"/><path fill="#4758A9" d="M0 0l8.413 8.17L0 16V0z" mask="url(#b)"/></g></svg>',
            "flag-rounded-de": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Germany</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#ED5565" xlink:href="#a"/><path fill="#434A54" d="M0-.003h16v4.89H0v-4.89z" mask="url(#b)"/><path fill="#F6BB42" d="M0 11.11h16V16H0v-4.89z" mask="url(#b)"/></g></svg>',
            "flag-rounded-es": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Spain</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#FFCE54" xlink:href="#a"/><path fill="#ED5565" d="M-.444 0h16v3.556h-16zM0 12.444h16V16H0zM4.773 5.836a1.25 1.25 0 0 0-2 0 1.52 1.52 0 0 1-1-.416v2.72c.018 1.79 2 2.53 2 2.53s2-.74 2-2.53V5.422c-.27.258-.626.405-1 .414z" mask="url(#b)"/></g></svg>',
            "flag-rounded-eu": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>Euro</title><g fill="none" fill-rule="evenodd"><circle fill="#4758A9" cx="8" cy="8" r="8"/><path fill="#FFC84A" d="M8 4.915l-1.113.6.212-1.272-.9-.9 1.243-.186L8 2l.557 1.157 1.244.186-.9.9.213 1.272L8 4.915zM10.577 6.2L9.41 5.713l1.122-.635.133-1.267.927.852 1.25-.296-.55 1.16.64 1.085-1.267-.132-.854.965-.233-1.243zm.63 2.87l-.334-1.22 1.192.493 1.08-.675-.1 1.254 1.003.803-1.253.282-.46 1.17-.676-1.08-1.287-.078.835-.95zm-1.784 2.31l.737-1.027.367 1.236 1.204.414-1.036.712L10.7 14l-1.007-.796-1.2.38.415-1.205-.75-1.05 1.265.05zm-2.846 0l1.264-.05-.748 1.05.415 1.203-1.2-.38L5.3 14l.006-1.284-1.037-.712 1.203-.415.367-1.237.737 1.027zM4.792 9.07l.835.95-1.286.078-.674 1.08-.46-1.17-1.254-.283 1.002-.803-.1-1.254 1.08.675 1.193-.494-.335 1.22zm.63-2.87L5.19 7.443l-.855-.965-1.267.133.64-1.083-.55-1.16 1.25.295.927-.85.133 1.266 1.122.635-1.167.487z"/></g></svg>',
            "flag-rounded-forex": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16px" height="16px" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Forex</title><desc>Created with Sketch.</desc><defs/><g fill="none" fill-rule="evenodd" stroke="none" stroke-width="1" sketch:type="MSPage" id="Page-1"><g transform="translate(-187.000000, -249.000000)" sketch:type="MSArtboardGroup" id="Flags"><g transform="translate(187.000000, 249.000000)" sketch:type="MSLayerGroup" id="Forex"><circle fill="#F5F7FA" cx="8" cy="8" r="8" sketch:type="MSShapeGroup" id="Mask"/><path fill="#000000" fill-opacity="0.87" d="M2.22222222,4.44444444 L6.88084357,4.44444444 L6.88084357,6.01474932 L4.11478715,6.01474932 L4.11478715,7.2909336 L6.47737369,7.2909336 L6.47737369,8.76652167 L4.11478715,8.76652167 L4.11478715,11.7525935 L2.22222222,11.7525935 L2.22222222,4.44444444 Z M7.47564969,4.44444444 L9.55123188,4.44444444 L10.6326976,6.69272222 L11.6808874,4.44444444 L13.7356721,4.44444444 L11.8389477,7.98386178 L13.9145299,11.7525935 L11.7973529,11.7525935 L10.5952622,9.40461381 L9.38901203,11.7525935 L7.28431346,11.7525935 L9.38901203,7.94398102 L7.47564969,4.44444444 Z" sketch:type="MSShapeGroup" id="FX-Copy"/></g></g></g></svg>',
            "flag-rounded-fr": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>France</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#4758A9" d="M0 0h4.444v16H0z" mask="url(#b)"/><path fill="#ED5565" d="M11.55 0H16v16h-4.45V0z" mask="url(#b)"/></g></svg>',
            "flag-rounded-gb": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>United Kingdom</title><circle fill="#4758a9" cx="8" cy="8" r="8"/><path fill="#fff" d="M8 0a8 8 0 0 0-1.734.2v5.82L1.71 3.073A8 8 0 0 0 .687 4.768l2.328 1.505H.195A8 8 0 0 0 0 8a8 8 0 0 0 .2 1.734h3.573L.867 11.62a8 8 0 0 0 1.115 1.638l4.284-2.778v5.323A8 8 0 0 0 8 16a8 8 0 0 0 1.732-.2v-5.18l4.21 2.724a8 8 0 0 0 1.134-1.62l-3.074-1.99h3.8A8 8 0 0 0 16 8a8 8 0 0 0-.2-1.727h-3.044l2.5-1.62a8 8 0 0 0-1.04-1.686L9.73 5.87V.198A8 8 0 0 0 8 0z"/><path fill="#ed5565" d="M8 0a8 8 0 0 0-1.297.11v6.597H.115A8 8 0 0 0 0 8a8 8 0 0 0 .11 1.303h6.593v6.582A8 8 0 0 0 8 16a8 8 0 0 0 1.297-.11V9.745l4.97 3.215a8 8 0 0 0 .557-.804L11.08 9.734H9.297v-.43h6.588A8 8 0 0 0 16 8a8 8 0 0 0-.11-1.293H9.298V.115A8 8 0 0 0 8 0zm6.512 3.37l-4.48 2.903h1.802L15.03 4.2a8 8 0 0 0-.518-.83zm-13.108.103a8 8 0 0 0-.498.84l3.028 1.96H5.73l-4.326-2.8zm3.287 6.26l-3.576 2.32a8 8 0 0 0 .547.818l4.837-3.135H4.69z"/></svg>',
            "flag-rounded-gr": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Grecee</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#4A89DC" d="M0 3.556h16v1.777H0V3.556zM0 .004h16V1.77H0V.005zm0 7.108h16V8.89H0V7.112zm0 3.55h16v1.78H0v-1.78zm0 3.564h16v1.767H0v-1.767z" mask="url(#b)"/><path fill="#4A89DC" d="M0 .007h8.893v8.885H0V.007z" mask="url(#b)"/><path fill="#FFF" d="M3.55.007h1.783v8.885H3.55V.007zM0 5.337v-1.78h8.893v1.78H0z" mask="url(#b)"/></g></svg>',
            "flag-rounded-il": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Israel</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#4A89DC" d="M11.107 6.37a.154.154 0 0 0-.147-.253H9.347a.582.582 0 0 1-.45-.252L8.085 4.52a.16.16 0 0 0-.302 0l-.79 1.34a.573.573 0 0 1-.445.255H4.93a.153.153 0 0 0-.143.253L5.6 7.74a.537.537 0 0 1 0 .506l-.818 1.37a.155.155 0 0 0 .147.255h1.617c.18.01.344.105.444.254l.792 1.343a.158.158 0 0 0 .298 0l.79-1.343a.58.58 0 0 1 .45-.253h1.64a.154.154 0 0 0 .147-.253l-.818-1.37a.564.564 0 0 1 0-.507l.817-1.37zm-3.23-.363a.065.065 0 0 1 .123 0c.04.06.013.11-.053.11a.07.07 0 0 1-.07-.11zm-1.65 3.037c-.076 0-.107-.05-.07-.11a.078.078 0 0 1 .14 0c.036.06.005.11-.07.11zm.07-1.988a.078.078 0 0 1-.14 0c-.037-.06-.006-.11.07-.11.075 0 .106.05.07.11zM8 9.983a.065.065 0 0 1-.124 0 .07.07 0 0 1 .07-.11c.067 0 .094.05.054.11zm.698-1.194a.58.58 0 0 1-.45.254h-.604a.59.59 0 0 1-.453-.252l-.332-.546a.548.548 0 0 1-.01-.506l.32-.54c.1-.15.265-.244.445-.254h.636a.58.58 0 0 1 .448.254l.315.54c.08.16.08.35 0 .51l-.315.54zm.97.254c-.08 0-.112-.05-.072-.11a.075.075 0 0 1 .137 0c.04.06.01.11-.066.11zm.065-1.988a.075.075 0 0 1-.137 0c-.04-.06-.01-.11.07-.11s.107.05.067.11zM0 0h16v1.778H0zM0 14.222h16V16H0z" mask="url(#b)"/></g></svg>',
            "flag-rounded-in": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>India</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#FC6E51" d="M0-.003h16v4.89H0v-4.89z" mask="url(#b)"/><path fill="#57A863" d="M0 11.11h16V16H0v-4.89z" mask="url(#b)"/><path fill="#4758A9" d="M10.178 7.853l-.144-.248a.718.718 0 0 1-.082-.302v-.287a.31.31 0 0 0-.14-.242l-.243-.138a.71.71 0 0 1-.223-.222l-.14-.24a.31.31 0 0 0-.243-.14h-.287a.728.728 0 0 1-.303-.08l-.25-.143a.31.31 0 0 0-.28 0l-.24.14a.713.713 0 0 1-.303.082h-.278a.31.31 0 0 0-.243.14l-.145.248a.717.717 0 0 1-.222.223l-.248.144a.31.31 0 0 0-.14.244v.278a.71.71 0 0 1-.08.303l-.14.24a.31.31 0 0 0 0 .282l.144.248a.71.71 0 0 1 .08.302v.286c.007.1.06.19.142.243l.242.14a.71.71 0 0 1 .222.22l.14.242a.31.31 0 0 0 .243.14h.286c.105.004.21.032.303.08l.248.143a.31.31 0 0 0 .28 0l.242-.14a.71.71 0 0 1 .302-.082h.278a.31.31 0 0 0 .244-.14l.144-.25a.732.732 0 0 1 .222-.22l.248-.145a.31.31 0 0 0 .14-.243v-.278a.702.702 0 0 1 .08-.302l.14-.24a.31.31 0 0 0 0-.282zm-.864.226l-.085.144a.43.43 0 0 0-.05.183v.168a.187.187 0 0 1-.083.147l-.15.09a.436.436 0 0 0-.134.132l-.086.15a.19.19 0 0 1-.147.085h-.17a.43.43 0 0 0-.182.048l-.145.085a.19.19 0 0 1-.17 0l-.15-.086a.44.44 0 0 0-.184-.05h-.175a.19.19 0 0 1-.147-.084l-.084-.145a.438.438 0 0 0-.134-.133l-.146-.083a.188.188 0 0 1-.085-.147v-.173a.43.43 0 0 0-.05-.183l-.087-.15a.188.188 0 0 1 0-.17l.084-.146a.43.43 0 0 0 .048-.183v-.167a.188.188 0 0 1 .084-.147l.15-.09c.053-.033.1-.08.133-.132l.087-.15a.19.19 0 0 1 .147-.085h.168a.43.43 0 0 0 .183-.05l.146-.085a.19.19 0 0 1 .17 0l.15.086c.057.03.12.047.184.05h.173a.19.19 0 0 1 .148.085l.084.145c.035.054.08.1.134.133l.146.084a.19.19 0 0 1 .086.146v.173a.44.44 0 0 0 .05.183l.088.15a.19.19 0 0 1 0 .17h-.002z" mask="url(#b)"/></g></svg>',
            "flag-rounded-ir": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Iran</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#57A863" d="M-4-.003h23.556v4.89H-4v-4.89z" mask="url(#b)"/><path fill="#ED5565" d="M-4 11.11h23.556V16H-4v-4.89zM10.178 7.853l-.147-.248a.716.716 0 0 1-.08-.302v-.287a.33.33 0 0 0-.14-.242l-.246-.138a.732.732 0 0 1-.222-.222l-.138-.24a.314.314 0 0 0-.244-.14h-.284a.756.756 0 0 1-.307-.08l-.25-.143a.31.31 0 0 0-.28 0l-.24.14a.706.706 0 0 1-.302.082h-.28a.306.306 0 0 0-.24.14l-.147.248a.692.692 0 0 1-.22.223l-.246.144a.307.307 0 0 0-.142.244v.278a.658.658 0 0 1-.08.303l-.138.24a.31.31 0 0 0 0 .282l.143.248a.72.72 0 0 1 .084.302v.286c.006.1.06.19.143.243l.24.14c.09.055.167.13.223.22l.142.242a.306.306 0 0 0 .24.14h.29c.104.004.207.032.3.08l.25.143a.31.31 0 0 0 .28 0l.244-.14a.707.707 0 0 1 .302-.082h.276c.1-.006.19-.058.244-.14l.143-.25a.744.744 0 0 1 .222-.22l.248-.145a.315.315 0 0 0 .138-.243v-.28a.714.714 0 0 1 .08-.3l.142-.24a.31.31 0 0 0 0-.282zm-.867.226l-.083.144a.437.437 0 0 0-.05.183v.168a.183.183 0 0 1-.084.147l-.146.09a.408.408 0 0 0-.134.132l-.09.15a.188.188 0 0 1-.145.085h-.17a.422.422 0 0 0-.18.048l-.148.085a.187.187 0 0 1-.17 0l-.15-.086a.444.444 0 0 0-.182-.05h-.174a.188.188 0 0 1-.146-.084l-.085-.145a.422.422 0 0 0-.137-.133l-.143-.083a.186.186 0 0 1-.09-.147v-.173a.437.437 0 0 0-.047-.183l-.09-.15a.19.19 0 0 1 0-.17l.085-.146a.437.437 0 0 0 .05-.183v-.167a.195.195 0 0 1 .084-.147l.152-.09c.053-.034.098-.08.133-.132l.088-.15a.188.188 0 0 1 .146-.085h.17a.44.44 0 0 0 .182-.05l.142-.085a.196.196 0 0 1 .173 0l.152.086c.057.03.12.047.182.05h.174c.06.003.114.035.146.085l.085.145c.033.053.08.1.132.133l.147.084a.18.18 0 0 1 .083.146v.173c.002.065.02.128.054.183l.084.15a.19.19 0 0 1 0 .17z" mask="url(#b)"/><path fill="#F5F7FA" d="M.444 3.11h.89V4h-.89v-.89zm1.778 0h.89V4h-.89v-.89zM4 3.11h.89V4H4v-.89zm1.778 0h.89V4h-.89v-.89zm1.778 0h.888V4h-.888v-.89zm1.777 0h.89V4h-.89v-.89zm1.778 0H12V4h-.89v-.89zm1.78 0h.888V4h-.89v-.89zm1.777 0h.89V4h-.89v-.89zM.444 12h.89v.89h-.89V12zm1.778 0h.89v.89h-.89V12zM4 12h.89v.89H4V12zm1.778 0h.89v.89h-.89V12zm1.778 0h.888v.89h-.888V12zm1.777 0h.89v.89h-.89V12zm1.778 0H12v.89h-.89V12zm1.78 0h.888v.89h-.89V12zm1.777 0h.89v.89h-.89V12z" mask="url(#b)"/></g></svg>',
            "flag-rounded-it": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Italy</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#ED5565" d="M11.556 0H16v16h-4.444z" mask="url(#b)"/><path fill="#57A863" d="M0 0h4.444v16H0z" mask="url(#b)"/></g></svg>',
            "flag-rounded-jp": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>Japan</title><g fill="none" fill-rule="evenodd"><circle fill="#F5F7FA" cx="8" cy="8" r="8"/><circle fill="#ED5565" cx="8" cy="8" r="3.556"/></g></svg>',
            "flag-rounded-kr": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>Korea</title><g fill="none" fill-rule="evenodd"><circle fill="#F5F7FA" cx="8" cy="8" r="8"/><path fill="#ED5565" d="M11.103 7.356c.052.318-.272-.66-1.195-.826a1.7 1.7 0 0 0-1.996 1.242 1.524 1.524 0 0 1-1.788 1.11 1.416 1.416 0 0 1-1.207-1.647 3.136 3.136 0 0 1 3.68-2.29 3.012 3.012 0 0 1 2.506 2.41z"/><path fill="#4758A9" d="M7.4 11.053a3.01 3.01 0 0 1-2.505-2.41c-.052-.317.272.66 1.195.826a1.7 1.7 0 0 0 1.996-1.242c.203-.79.99-1.278 1.788-1.11a1.416 1.416 0 0 1 1.206 1.647 3.136 3.136 0 0 1-3.68 2.29v-.002z"/><path fill="#434A54" d="M11.342 3.726l1.69 2.948-.522.267-1.69-2.948.522-.266zM12.384 3.194l1.69 2.95-.522.265-1.688-2.95.52-.266zM4.51 3.63L2.82 6.482l.522.257 1.69-2.853-.523-.257zM3.467 3.116l-1.69 2.852.522.257 1.688-2.852-.52-.257zM11.46 12.262l1.71-3.01-.527-.27-1.71 3.01.527.27zM12.514 12.804l1.71-3.01-.528-.27-1.71 3.01.528.27zM4.54 12.36L2.83 9.45l.527-.264 1.71 2.91-.527.264zM3.486 12.884l-1.708-2.91.526-.263 1.71 2.912-.528.262z"/></g></svg>',
            "flag-rounded-nl": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Netherlands</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#ED5565" d="M0 0h16v5.333H0z" mask="url(#b)"/><path fill="#4A89DC" d="M0 10.667h16V16H0z" mask="url(#b)"/></g></svg>',
            "flag-rounded-nz": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>New Zealand</title><circle fill="#4758a9" cx="8" cy="8" r="8"/><path fill="#fff" d="M8 0a8 8 0 0 0-1.56.162L4.16 2.47V.99a8 8 0 0 0-1.348.93v.375l-.2-.2a8 8 0 0 0-.936 1.018l.164.166h-.29a8 8 0 0 0-.802 1.36h1.266L.14 6.536A8 8 0 0 0 0 8h.63l2.183-2.207V8H4.16V5.63L6.504 8H8v-.457l-2.87-2.9H8V3.28H5.293L8 .544V0z"/><path fill="#ed5565" d="M8 0a8 8 0 0 0-.977.07L4.16 2.967v.314h.64L8 .05V0zM3.822 1.186a8 8 0 0 0-.67.457V3.62h-1.84a8 8 0 0 0-.4.683h2.24V8h.67V4.303H8V3.62H3.822V1.187zM2.357 2.334a8 8 0 0 0-.466.502l.445.445h.48V2.8l-.455-.46zm.15 2.31L.05 7.126A8 8 0 0 0 0 8h.14l2.67-2.705v-.652h-.306zm1.653 0v.485L6.998 8h.96L4.642 4.643h-.48zM9.476 7.375c-.107.077-.17.033-.14-.098l.117-.49a.444.444 0 0 0-.125-.4l-.35-.307c-.1-.09-.075-.163.057-.166l.49-.014a.356.356 0 0 0 .31-.242l.153-.534c.037-.128.104-.13.15-.004l.184.525a.372.372 0 0 0 .32.234l.502.002c.134 0 .16.074.06.163l-.383.34a.425.425 0 0 0-.11.395l.12.43c.038.13-.024.178-.136.108l-.407-.257a.388.388 0 0 0-.4.015l-.41.3zm4.038 1.36c-.107.08-.17.035-.138-.096l.116-.49a.444.444 0 0 0-.126-.4l-.35-.308c-.1-.09-.075-.163.057-.167l.49-.013a.356.356 0 0 0 .31-.242l.153-.533c.037-.13.104-.13.15-.004l.184.525a.372.372 0 0 0 .32.232l.503.006c.133 0 .157.074.058.163l-.38.34a.424.424 0 0 0-.112.394l.122.43c.035.128-.026.177-.14.106l-.406-.254a.388.388 0 0 0-.4.013l-.41.294zM7.457 11.12c-.107.077-.17.033-.14-.098l.117-.49a.444.444 0 0 0-.125-.396l-.354-.31c-.1-.088-.074-.162.058-.166l.49-.014a.356.356 0 0 0 .31-.242l.152-.533c.038-.126.105-.13.15 0l.185.524a.372.372 0 0 0 .32.233l.503.005c.134 0 .16.076.06.164l-.383.34a.424.424 0 0 0-.113.396l.122.428c.035.13-.027.178-.14.107l-.406-.256a.388.388 0 0 0-.4.013l-.41.296zm4.88 1.712c-.077.056-.122.024-.1-.07l.083-.347a.318.318 0 0 0-.088-.284l-.252-.22c-.072-.062-.054-.116.04-.12l.353-.01a.255.255 0 0 0 .223-.17l.11-.38c.027-.094.075-.096.107-.005l.133.375c.038.094.128.16.23.166l.36.003c.095 0 .114.052.042.115l-.274.243a.303.303 0 0 0-.08.28l.088.308c.026.092-.018.127-.1.076l-.29-.182a.28.28 0 0 0-.288.01l-.297.212z"/></svg>',
            "flag-rounded-pl": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Poland</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#ED5565" d="M0 8h16v8H0z" mask="url(#b)"/></g></svg>',
            "flag-rounded-ro": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Romania</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#FFCE54" xlink:href="#a"/><path fill="#ED5565" d="M11.552 0H16v16h-4.448V0z" mask="url(#b)"/><path fill="#4A89DC" d="M0 0h4.444v16H0z" mask="url(#b)"/></g></svg>',
            "flag-rounded-ru": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Russia</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#4A89DC" xlink:href="#a"/><path fill="#F5F7FA" d="M-8-2.667h31.11v7.11H-8z" mask="url(#b)"/><path fill="#ED5565" d="M-8 11.11h31.11v7.112H-8z" mask="url(#b)"/></g></svg>',
            "flag-rounded-sa": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Saudi Arabia</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#57A863" xlink:href="#a"/><path fill="#FFF" d="M2.67 10.67h11.108a.756.756 0 0 1-.436.444H3.105a.756.756 0 0 1-.436-.444z" mask="url(#b)"/><path fill="#FFF" d="M11.552 9.778H12V12h-.448V9.778zM2.125 6.35c.4.04.178-.67.324-.8.027-.062.082.618.082.618.313.262.492 1.428.492 1.428s.244.068.255-.584a6.08 6.08 0 0 1-.026-.78c.87-.474.83-.654.763-.824-.697-.466-.725-.48-.754-.48a.69.69 0 0 0-.058.652c-.108-.567-.154-.755-.244-.922-.112.69-.07.92-.048 1.153-.14-.225-.14-.438-.188-.642-.443.463-.462.556-.475.65-.254-.222-.29-.715-.392-.6-.03.386-.063 1.063.267 1.133zm.82.448c-.354.17-.694.33-1.04.495.136-.352.45-.604.824-.66.213.005.16.08.216.167v-.002zm-1.005.99c-.178.27-.216.607-.105.908a.23.23 0 0 0 .222.073.4.4 0 0 0 .147-.39c-.04-.064-.073-.074-.114-.02-.09.174-.122.055-.13-.044a2.196 2.196 0 0 1 .024-.49c.02-.134 0-.093-.044-.037zm8.373-.492c-.19-.404-.452-.8-.533-.955a16.877 16.877 0 0 0-.807-1.157c-.204-.24.333.1-.068-.378-.152-.13-.16-.137-.288-.242-.064-.045-.222-.127-.247.01a.78.78 0 0 0 .014.283c.042.088.096.17.16.242A18.016 18.016 0 0 1 10.3 7.883a.858.858 0 0 0 .013-.587h.003zM9.48 8.644a.25.25 0 0 0 .26.218.986.986 0 0 0 .757-.6c.092-.136.15-.294.172-.458a9.946 9.946 0 0 0-.19-2.33.386.386 0 0 1 .008-.16.228.228 0 0 0 .113-.054 1.344 1.344 0 0 0-.227-.604c-.035-.07-.047-.115-.106.008a.86.86 0 0 0-.1.438c.135.917.177 1.72.264 2.636a.36.36 0 0 1-.065.27c-.246.27-.548.488-.884.636zm3.796-.005c-.202.114-.202.247-.04.252a1.01 1.01 0 0 0 .843-.397c.08-.16.126-.335.136-.514.04-.77-.013-1.54-.154-2.298a1.258 1.258 0 0 1-.027-.236c.018-.045.11.005.143-.048a1.93 1.93 0 0 0-.338-.565c-.035-.07-.048-.115-.106.008a.71.71 0 0 0-.06.44 20.5 20.5 0 0 1 .284 2.625.92.92 0 0 1-.056.235 1.88 1.88 0 0 1-.277.318c-.09.067-.286.13-.35.18zm.15-.893c0-.233.004-.435-.004-.608a1.076 1.076 0 0 0-.1-.44 1.57 1.57 0 0 1-.048-.38c-.027-.14-.02-.35-.06-.517a1.768 1.768 0 0 1-.036-.294c.017-.048.08 0 .11-.054a1.86 1.86 0 0 0-.266-.73c-.038-.07-.106-.045-.19.065a.476.476 0 0 0-.02.396c.22.975.326 1.97.32 2.97a.602.602 0 0 0 .295-.41zm-1.488-1.29a.905.905 0 0 1-.47-.385.257.257 0 0 1 .015-.206.178.178 0 0 1 .173-.032c.022.026.037.057.045.09.07.032.1.013.107-.015.004-.05-.02-.08-.02-.132a.148.148 0 0 1 .26-.076.54.54 0 0 1 .07.258c0 .042-.07-.007-.107.003a.092.092 0 0 0-.05.094c-.008.103-.02.272-.022.4zM9.6 8.005c.015-.355.01-.71-.016-1.066-.013-.442-.086-1.293-.12-1.435-.04-.267.11.03.088-.127a1.707 1.707 0 0 0-.376-.695c-.056-.08-.055-.095-.143.02a.8.8 0 0 0 .012.54c.12.514.2 1.04.237 1.567.038.525.042 1.053.014 1.58a.458.458 0 0 0 .304-.383zm4.26-.506c-.222-.37-.56-.772-.65-.922-.09-.15-.853-1.12-.95-1.218-.28-.29.128-.047-.054-.27a2.12 2.12 0 0 0-.33-.32c-.064-.044-.104-.122-.126.015-.01.12-.014.24-.01.36a.48.48 0 0 0 .11.222 18.54 18.54 0 0 1 2.007 2.71.844.844 0 0 0 0-.577h.003zM5.488 6.43l-.023.15a.058.058 0 0 1-.11-.012c-.044-.19-.22-.216-.325.08-.072.058-.202.07-.215-.016.017-.2-.064-.226-.227-.134l-.156-1.164a.18.18 0 0 0 .192-.03 2.12 2.12 0 0 0-.29-.666c-.04-.044-.072-.017-.122-.006a.196.196 0 0 0-.14.24c.1.606.166 1.068.267 1.67a.128.128 0 0 1-.124.156.578.578 0 0 0-.388-.258.435.435 0 0 0-.372.344.834.834 0 0 0 0 .396.33.33 0 0 0 .372.092.725.725 0 0 1 .215-.115c.023.028.006.35-.464.596-.286.127-.512.155-.634-.074-.075-.144.006-.69-.178-.563-.55 1.4 1.287 1.595 1.492.057.02-.063.097-.126.11-.023-.044 1.393-1.42 1.49-1.654 1.05a1.327 1.327 0 0 1-.08-.47c-.036-.273-.18-.168-.204.104a1.686 1.686 0 0 0-.018.338c.074 1.1 1.848.628 2.136-.28.153-.504-.025-.875.058-.873a.335.335 0 0 0 .476-.04.08.08 0 0 1 .122-.012.288.288 0 0 0 .43-.12 3.8 3.8 0 0 0 .058-.523.288.288 0 0 0-.207.108V6.43zm-1.625.513a.133.133 0 0 1-.098.013.094.094 0 0 1-.09-.045.14.14 0 0 1 .04-.1.096.096 0 0 1 .165.025.105.105 0 0 1-.02.11l.003-.002zM5.87 4.9c-.204.573.116 1.202.338 1.14.16.067.262-.234.328-.564.044-.093.078-.103.1-.055a.82.82 0 0 0 .148.668.37.37 0 0 0 .48.008l.2-.196a.12.12 0 0 1 .164-.008c.042.085.105.16.182.213a.403.403 0 0 0 .396-.082c.073-.123.09-.166.124-.213a.09.09 0 0 1 .14-.016.155.155 0 0 0-.024.145c.03.028.078.03.112.005a.727.727 0 0 0 .226-.34c.006-.102-.052-.093-.088-.072-.05.03-.053.04-.103.07a.225.225 0 0 1-.246-.043 3.656 3.656 0 0 1-.11-.38c0-.007-.082-.176-.005-.187.038.007.12.03.133-.04a.512.512 0 0 0-.173-.35.19.19 0 0 0-.28-.008.298.298 0 0 0-.076.204c-.023.096.002.2.067.276a.844.844 0 0 1 .157.563.23.23 0 0 1-.207.1c-.054-.01-.143-.033-.19-.378a2.49 2.49 0 0 0-.103-.8c-.04-.103-.07-.203-.17-.026a.405.405 0 0 0-.057.39c.076.195.098.406.064.61a1.196 1.196 0 0 1-.118.167.197.197 0 0 1-.253.034.267.267 0 0 1-.15-.21c.02-.224.012-.45-.023-.673a.124.124 0 0 0-.206-.04 1.53 1.53 0 0 0-.375.758c-.057.184-.12.133-.162.057-.11-.092-.115-.854-.243-.73h.002zm-2.508.005c.137.064.395.037.384-.18 0-.02-.005-.086-.007-.104a.063.063 0 0 0-.123.02.103.103 0 0 1-.01.067c-.01.012-.055.005-.054-.055A.105.105 0 0 0 3.53 4.6a.048.048 0 0 0-.03-.008.03.03 0 0 0-.03.022.183.183 0 0 0-.01.05.03.03 0 0 1-.026.032c-.01.003-.02 0-.028-.007a.04.04 0 0 1-.02-.03.173.173 0 0 0-.008-.053.057.057 0 0 0-.034-.02.092.092 0 0 0-.076.118.2.2 0 0 0 .092.203l.002-.003zm4.02 1.682c.138.065.465.028.386-.18 0-.02-.006-.086-.008-.104a.063.063 0 0 0-.12.018.1.1 0 0 1-.012.07c-.01.01-.055.004-.053-.056a.104.104 0 0 0-.023-.052.044.044 0 0 0-.03-.007.028.028 0 0 0-.03.02.187.187 0 0 0-.01.05.03.03 0 0 1-.026.034c-.01 0-.02-.002-.03-.008a.04.04 0 0 1-.018-.03.172.172 0 0 0-.01-.053.06.06 0 0 0-.033-.02.092.092 0 0 0-.075.118.2.2 0 0 0 .09.202l.003-.003zM9.73 5.89c.137.066.395.038.384-.18 0-.02-.004-.086-.007-.103a.063.063 0 0 0-.12.018.1.1 0 0 1-.012.068c-.01.01-.055.005-.053-.056a.1.1 0 0 0-.023-.052.044.044 0 0 0-.03-.007.03.03 0 0 0-.03.022.187.187 0 0 0-.01.05.033.033 0 0 1-.055.025.04.04 0 0 1-.02-.028.165.165 0 0 0-.008-.055.058.058 0 0 0-.033-.017.092.092 0 0 0-.075.117.2.2 0 0 0 .09.2h.003zm1.215 1.75a.815.815 0 0 0-.08.8c.055.143.16.26.296.332a.208.208 0 0 0 .307-.033c.092-.187.162-.383.21-.585a.124.124 0 0 1 .218-.052c.05.073.12.132.2.17a.34.34 0 0 0 .442.032.51.51 0 0 0 .236-.284c.05-.503.055-1.01.016-1.514-.006-.04-.137-.683-.137-.69 0-.007-.017-.328-.032-.405 0-.03-.01-.04.024-.035a.18.18 0 0 0 .06.04c.037.007.068-.053.046-.107l-.328-.597c-.026-.024-.06-.053-.102.008a.234.234 0 0 0-.08.178c.01.14.035.285.044.427.044.24.088.483.13.725.042.518.053.942.094 1.46a.595.595 0 0 1-.14.437.15.15 0 0 1-.164-.006 1.96 1.96 0 0 1-.24-.317.146.146 0 0 0-.232 0c-.172.234-.31.492-.41.765a.144.144 0 0 1-.236-.004 1.064 1.064 0 0 1-.145-.74l.003-.004zM9.79 4.62c.132.097.2.257.18.42a.345.345 0 0 1-.135.287c-.05-.02.034-.148-.015-.283a2.208 2.208 0 0 1-.177-.297c-.036-.097.07-.14.145-.125h.002zm1.548 3.165c.012-.216.003-.433-.025-.65-.008-.172-.2-1.498-.237-1.63-.047-.247.185-.032.16-.177-.08-.182-.28-.447-.344-.605-.037-.068-.022-.13-.106-.018-.074.197-.1.41-.076.618.237.947.363 1.917.375 2.893a.55.55 0 0 0 .25-.428l.003-.003zm2.1-2.745a.622.622 0 0 1 .166.452.396.396 0 0 1-.125.31 1.194 1.194 0 0 1-.014-.306 2.533 2.533 0 0 1-.16-.32.105.105 0 0 1 .13-.133l.002-.003zM5.11 7.227c.104.08.163.202.16.332a.27.27 0 0 1-.12.228.676.676 0 0 1-.012-.225.94.94 0 0 0-.155-.236c-.03-.094.06-.11.128-.098v-.003zm-2.864-2.68a.32.32 0 0 1 .156.345.283.283 0 0 1-.117.238.69.69 0 0 1-.023-.234 1.6 1.6 0 0 1-.142-.244c-.03-.08.058-.116.124-.1l.002-.004zM5.37 5.632a.278.278 0 0 0-.094.372c.047.06.125.084.197.062a.294.294 0 0 0 .19-.222c.02-.102.003-.066-.138.06a.058.058 0 0 1-.08-.046.287.287 0 0 1 .017-.183c.02-.054-.026-.08-.094-.04v-.002zm.91-1.17a.436.436 0 0 0-.187.307c-.004.08-.02.08.035.133.04.056.077.05.156.01a.165.165 0 0 0 .075-.11c.017-.09-.1.046-.115-.057a.264.264 0 0 1 .12-.226c0-.06 0-.106-.088-.055l.002-.003zm.732.128c-.028.117-.046.236-.052.356-.02.088.095.127.147.012a1.08 1.08 0 0 0 .084-.39c-.025-.13-.118-.126-.18.025l.002-.002zm4.623 2.325c.016-.016.65-.462.65-.462.066-.022.052.23.022.23a2.52 2.52 0 0 1-.672.46.193.193 0 0 1-.002-.224l.002-.003zm.58-.004c.107.13.16.298.144.466.02.12-.042.236-.152.286a.963.963 0 0 1-.018-.28 1.488 1.488 0 0 1-.104-.326.108.108 0 0 1 .127-.144l.002-.003zm-3.78 1.394a.822.822 0 0 1 .183-.156.124.124 0 0 1 .12.02c-.01.068-.02.136-.024.204a.065.065 0 0 0 .086.057.462.462 0 0 1 .296-.09c.077.004.08.133.03.133a2.24 2.24 0 0 0-.402.14.094.094 0 0 1-.117-.015.12.12 0 0 1-.01-.118c.003-.066-.023-.103-.08-.095-.04.023-.078.037-.1-.01a.056.056 0 0 1 .015-.068l.002-.003zm4.448.175a.08.08 0 0 1 0 .12c-.044.04-.076.064-.12.104-.02.035-.035.088.03.106a.768.768 0 0 0 .393-.146.085.085 0 0 0 .026-.096.205.205 0 0 0-.124-.017c-.018 0-.08-.008-.05-.062.02-.03.037-.06.05-.095.018-.04.002-.067-.065-.09a.54.54 0 0 0-.17 0 .072.072 0 0 0-.063.077c0 .076.044.072.09.1h.003zM9.24 7.27l-.062-.035-1.192-.005c-.062-.024-.045-.045 0-.06.284-.04.79-.12.824-.6a.4.4 0 1 0-.784.016c-.01.065.022.192-.045.207-.436.04-.914.31-.932.504-.027.016-.086-.036-.08-.12a2.304 2.304 0 0 0-.3-1.002c-.14-.137-.096-.092-.19-.027a.29.29 0 0 0-.066.25c0 .004.112.31.206.528.08.228.106.47.08.71-.162.32-.416.582-.73.754a.372.372 0 0 1-.303-.003.18.18 0 0 1-.08-.174c.316-.166.572-.427.73-.747a.756.756 0 0 0 .02-.538.51.51 0 0 0-.124-.25.39.39 0 0 0 .167.01.783.783 0 0 0-.21-.384.178.178 0 0 0-.257-.015.35.35 0 0 0-.065.376c.103.11.192.233.267.365a.428.428 0 0 1-.014.24c-.16.192-.345.363-.55.508-.013.016-.007-.01-.008-.07-.004-.077.03-.258.02-.26a.93.93 0 0 0-.238.502c-.392.217-.764.47-1.11.752-.137.21.936-.24 1.06-.295.028.07.06.136.1.2a.57.57 0 0 0 .578.184c.342-.14.634-.38.838-.688a.092.092 0 0 1 .13-.045c.254.406.71.642 1.188.615.133-.162.07-.24.015-.274a.844.844 0 0 1-.33-.223.226.226 0 0 1 .167-.247 5.92 5.92 0 0 0 1.096-.207.944.944 0 0 1 .12-.37c.028-.023.05-.05.064-.082l.002-.002zm-.982-.735c.04-.03.096-.03.134.004a.1.1 0 0 1 .068.112.104.104 0 0 1-.134-.004.1.1 0 0 1-.07-.108l.002-.003zm-.48 1.19a.267.267 0 0 0-.25.26c.047.255-.066.168-.134.134a.667.667 0 0 1-.332-.48.124.124 0 0 1 .138-.128c.165.03.332.05.5.056.137.01.206.117.078.163V7.73zm-2.127-2.8a.203.203 0 0 0 .02-.31.318.318 0 0 0-.28.003.232.232 0 0 0-.04.31c.07.033.138.103.092.14-.214.227-.8.616-.73.63.127.018.257.018.384 0 .23-.193.44-.404.633-.632l-.08-.063a.044.044 0 0 1 0-.076v-.002zm-.093 0a.098.098 0 0 1-.096-.064.06.06 0 0 1 .025-.094.1.1 0 0 1 .096.065.062.062 0 0 1-.024.094v-.002z" mask="url(#b)"/></g></svg>',
            "flag-rounded-th": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Thailand</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#ED5565" xlink:href="#a"/><path fill="#FFF" d="M-.444 3.11H16v9.783H-.444V3.11z" mask="url(#b)"/><path fill="#4758A9" d="M-.444 4.003H16v8.003H-.444V4.003z" mask="url(#b)"/></g></svg>',
            "flag-rounded-tr": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>Turkey</title><g fill="none" fill-rule="evenodd"><circle fill="#ED5565" cx="8" cy="8" r="8"/><path fill="#FFF" d="M9.964 9.903c-.19.13-.297.05-.235-.178l.234-.845a.783.783 0 0 0-.19-.704l-.596-.563c-.17-.16-.12-.29.11-.288l.863.007c.25-.01.467-.17.552-.405l.307-.923c.07-.222.19-.222.257 0l.293.933a.64.64 0 0 0 .542.43l.88.04c.227.01.27.14.09.29l-.69.57a.76.76 0 0 0-.226.686l.186.76c.058.228-.053.31-.244.177l-.698-.473a.68.68 0 0 0-.702 0l-.734.486zm.338 1.56l-.013.008a3.66 3.66 0 0 1-5.17-2.333 3.86 3.86 0 0 1-.138-1.16 3.79 3.79 0 0 1 4.88-3.6c.2.066.393.15.578.25a.127.127 0 0 0 .178-.076.13.13 0 0 0-.05-.146 4.49 4.49 0 0 0-1.595-.922 4.68 4.68 0 0 0-5.89 3.067 4.8 4.8 0 0 0-.06 2.8 4.595 4.595 0 0 0 7.386 2.344.127.127 0 0 0 .048-.143.124.124 0 0 0-.156-.083v-.003z"/></g></svg>',
            "flag-rounded-tw": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Taiwan</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#ED5565" xlink:href="#a"/><path fill="#4758A9" d="M0 0h8v8.004H0V0z" mask="url(#b)"/><path fill="#F5F7FA" d="M6.41 5.123a.718.718 0 0 1 .08-.302l.14-.24a.31.31 0 0 0 0-.28l-.146-.25a.715.715 0 0 1-.08-.302V3.46a.316.316 0 0 0-.142-.24l-.244-.14a.727.727 0 0 1-.222-.22l-.138-.242a.315.315 0 0 0-.245-.14h-.29a.718.718 0 0 1-.3-.08l-.254-.143a.31.31 0 0 0-.28 0l-.246.14a.707.707 0 0 1-.302.08h-.28a.322.322 0 0 0-.244.14l-.142.25a.694.694 0 0 1-.223.222l-.25.145a.315.315 0 0 0-.136.243v.278a.715.715 0 0 1-.08.303l-.143.24a.31.31 0 0 0 0 .28l.147.25c.05.094.077.197.08.302v.287a.33.33 0 0 0 .143.243l.245.138c.09.057.165.132.222.222l.138.24a.32.32 0 0 0 .244.14h.29a.75.75 0 0 1 .306.082l.25.142a.31.31 0 0 0 .28 0l.243-.14a.707.707 0 0 1 .303-.082h.28c.1-.006.19-.058.245-.14l.142-.25a.74.74 0 0 1 .222-.22l.25-.146a.32.32 0 0 0 .14-.244l-.003-.277z" mask="url(#b)"/></g></svg>',
            "flag-rounded-us": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>United States of America</title><circle fill="#f5f7fa" cx="8" cy="8" r="8"/><path fill="#ed5565" d="M8.1 0a8 8 0 0 1 .79.053V3.11h5.436A8 8 0 0 0 8.1 0zm.79 6.66v3.115H.21a8 8 0 0 0 0 .004h15.58A8 8 0 0 0 16 8a8 8 0 0 0-.115-1.34H8.89zm-7.22 6.225A8 8 0 0 0 8 16a8 8 0 0 0 6.324-3.115H1.67z"/><path fill="#4a89dc" d="M8 0a8 8 0 0 0-4.633 1.484 8 8 0 0 1 .666-.42c.06.098.154.17.27.176l.474.004c.124 0 .15.07.06.152l-.366.317a.392.392 0 0 0-.105.37l.115.4c.036.12-.02.164-.128.1l-.387-.24a.38.38 0 0 0-.383.014l-.385.272h-.002c-.103.073-.158.03-.132-.09l.11-.454a.41.41 0 0 0-.112-.367 8 8 0 0 0-2.103 2.5c.06.07.136.127.232.132l.478.003c.124 0 .15.07.057.153l-.366.314a.392.392 0 0 0-.106.37l.115.402c.033.12-.025.165-.132.1l-.386-.24a.38.38 0 0 0-.38.013l-.066.047A8 8 0 0 0 0 8a8 8 0 0 1 .025-.516l.11-.002c.133-.01.246-.1.29-.224L.57 6.76c.017-.06.043-.09.07-.092.024 0 .05.03.07.088l.18.49c.05.124.166.21.3.217l.478.006c.124 0 .15.067.057.15l-.366.316a.392.392 0 0 0-.106.37l.115.4c.033.12-.025.166-.132.1l-.386-.24a.38.38 0 0 0-.38.012l-.388.274c-.013.01-.018 0-.03.005a8 8 0 0 0 .155.918h8.68V.053A8 8 0 0 0 8 0zM.055 8.857a8 8 0 0 1-.014-.14 8 8 0 0 0 .015.14zM6.86.447c.027 0 .054.027.074.086l.177.49c.05.124.17.21.304.217l.477.004c.124 0 .15.07.057.152l-.365.317a.392.392 0 0 0-.105.37l.115.4c.037.12-.02.164-.13.1l-.386-.24a.38.38 0 0 0-.383.014l-.384.272h-.003c-.103.073-.16.03-.133-.09l.11-.454a.41.41 0 0 0-.114-.37l-.334-.288c-.098-.082-.072-.152.053-.155l.464-.013c.132-.01.247-.1.29-.225l.145-.498c.018-.06.045-.09.07-.09zm-3.11 3.11c.026 0 .052.03.072.088l.178.49c.05.124.17.21.303.217l.474.003c.124 0 .15.07.06.153l-.366.314a.392.392 0 0 0-.105.37l.115.402c.036.12-.02.165-.128.1l-.387-.24a.38.38 0 0 0-.383.013l-.385.27-.002.003c-.103.073-.158.032-.132-.088l.11-.455a.41.41 0 0 0-.114-.37l-.335-.288c-.097-.084-.072-.153.052-.157l.467-.014c.133-.01.246-.098.29-.224l.146-.498c.018-.06.044-.09.07-.09zm3.11 0c.026 0 .052.03.072.088l.177.49c.05.124.17.21.302.217l.477.003c.122 0 .148.07.055.153l-.365.314a.392.392 0 0 0-.105.37l.115.402c.037.12-.02.165-.127.1l-.387-.24a.38.38 0 0 0-.383.013l-.386.27v.003c-.103.073-.16.032-.133-.088l.11-.455a.41.41 0 0 0-.114-.37l-.334-.288c-.098-.084-.072-.153.053-.157l.464-.014c.132-.01.247-.098.29-.224l.145-.498c.018-.06.043-.09.07-.09zm-5.94.728a8 8 0 0 0-.248.527 8 8 0 0 1 .248-.527zm-.318.684a8 8 0 0 0-.168.458 8 8 0 0 1 .168-.46zM3.75 6.667c.026 0 .052.03.072.088l.178.49c.05.124.17.21.303.217l.474.006c.124 0 .15.067.06.15l-.366.316a.392.392 0 0 0-.105.37l.115.4c.036.12-.02.166-.128.1l-.387-.24a.38.38 0 0 0-.383.012l-.385.274h-.002c-.103.072-.158.03-.132-.09l.11-.453a.41.41 0 0 0-.114-.373l-.335-.287c-.097-.082-.072-.15.052-.156l.467-.012c.133-.01.246-.1.29-.224l.146-.498c.018-.06.044-.09.07-.092zm3.11 0c.026 0 .052.03.072.088l.177.49c.05.124.17.21.302.217l.477.006c.122 0 .148.067.055.15l-.365.316a.392.392 0 0 0-.105.37l.115.4c.037.12-.02.166-.127.1l-.387-.24a.38.38 0 0 0-.383.012l-.386.274c-.103.072-.16.03-.133-.09l.11-.453a.41.41 0 0 0-.114-.373l-.334-.287c-.098-.082-.072-.15.053-.156l.464-.012c.132-.01.247-.1.29-.224l.145-.498c.018-.06.043-.09.07-.092zM0 8.002a8 8 0 0 0 .025.457l.037-.15A.41.41 0 0 0 0 8z"/></svg>',
            "flag-rounded-vn": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>Vietnam</title><g fill="none" fill-rule="evenodd"><circle fill="#ED5565" cx="8" cy="8" r="8"/><path fill="#F6D660" d="M6.59 10.54c-.248.166-.386.064-.306-.227l.294-1.083c.066-.324-.03-.66-.258-.898l-.778-.714c-.222-.203-.155-.37.142-.37H6.8a.8.8 0 0 0 .71-.52l.383-1.182c.094-.286.245-.286.338 0l.388 1.188c.114.302.39.512.71.542l1.134.045c.298.012.356.18.125.37l-.885.734a.94.94 0 0 0-.284.88l.25.967c.074.293-.068.397-.32.232l-.908-.6a.89.89 0 0 0-.907.004l-.942.634z"/></g></svg>',
            "flag-ru": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#0039a6" d="M0 0h16v11H0z"/><path fill="#d52b1e" d="M0 8h16v3H0z"/><path fill="#fff" d="M0 0h16v4H0z"/><path fill-opacity=".15" d="M0 0v4L.5.5h15L16 4V0z" class="flag-shade"/></svg>',
            "flag-se": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><rect width="16" height="10" fill="#006aa7"/><rect width="2" height="10" fill="#fecc00" x="5"/><rect width="16" height="2" fill="#fecc00" y="4"/></svg>',
            "flag-th": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#ed1c24" d="M0 0v2h16V0H0zm0 9v2h16V9H0z"/><path fill="#241d4f" d="M0 4h16v3H0z"/></svg>',
            "flag-tr": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#e30a17" d="M0 0h16v11H0z"/><path fill="#fff" d="M5.1 2a3.5 3.5 0 0 0-3.5 3.5A3.5 3.5 0 0 0 5.1 9a3.5 3.5 0 0 0 2.79-1.393A2.9 2.9 0 0 1 5.9 8.4 2.9 2.9 0 0 1 3 5.5a2.9 2.9 0 0 1 2.9-2.9 2.9 2.9 0 0 1 2 .804A3.5 3.5 0 0 0 5.1 2zM7.9 5.5l1.155-.373-.002-1.214.71.984 1.155-.378-.716.98.716.98-1.154-.377-.71.984V5.873z"/></svg>',
            "flag-tw": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fe0000" d="M0 0h16v11H0z"/><path fill="#000095" d="M0 0h8v6H0z"/><circle fill="#fff" cx="4" cy="3" r="1"/><circle fill="#fff" fill-opacity=".3" cx="4" cy="3" r="2"/></svg>',
            "flag-uk": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#00247d" d="M0 0h16v11H0z"/><path fill="#fff" d="M0 0v1.518L3.61 4H0v3h3.61L0 9.482V11h2.207L6 8.393V11h4V8.393L13.793 11H16V9.482L12.39 7H16V4h-3.61L16 1.518V0h-2.207L10 2.607V0H6v2.607L2.207 0H0z"/><path fill="#cf142b" d="M0 0v.91L4.494 4h1.324L0 0zm7 0v5H0v1h7v5h2V6h7V5H9V0H7zm7.676 0L10 3.215V4h.182L16 0h-1.324zM5.818 7L0 11h1.324L6 7.785V7h-.182zm4.364 0L16 11v-.91L11.506 7h-1.324z"/></svg>',
            "flag-us": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#b22234" d="M0 0v1h16V0H0zm0 2v1h16V2H0zm0 2v1h16V4H0zm0 2v1h16V6H0zm0 2v1h16V8H0zm0 2v1h16v-1H0z"/><path fill="#3c3b6e" d="M0 0h9v7H0z"/><path fill="#fff" d="M1 1v1h1V1H1zm2 0v1h1V1H3zm2 0v1h1V1H5zm2 0v1h1V1H7zM2 3v1h1V3H2zm2 0v1h1V3H4zm2 0v1h1V3H6zM1 5v1h1V5H1zm2 0v1h1V5H3zm2 0v1h1V5H5zm2 0v1h1V5H7z"/></svg>',
            "flag-vi": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#da251d" d="M0 0h16v11H0z"/><path fill="#ff0" d="M8 .8L9 4h3.4L9.7 6l1 3.3-2.7-2-2.7 2 1-3.2L3.6 4H7z"/></svg>',
            gift: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 144 133" width="144" height="133"><g fill="none" fill-rule="evenodd"><path fill="#B8C6D5" d="M6 49v72c0 6.6 5.37 12 12 12h108c6.63 0 12-5.4 12-12V49H6"/><path fill="#E9EFF2" d="M6 43v72c0 6.6 5.37 12 12 12h108c6.63 0 12-5.4 12-12V43H6M12 31C5.37 31 0 36.4 0 43v12h144V43c0-6.6-5.37-12-12-12H12"/><path fill="#3BB3E4" d="M54 25h36v107.64H54V25z"/><path fill="#2B90BA" d="M47.31 1C41.316.4 35.466 3.4 32.262 8.2c-4.668 7.2-1.878 16.2 6.204 20.4 2.598 1.8 5.382 2.4 8.184 2.4h50.682c2.802 0 5.652-.6 8.25-2.4 8.082-4.2 10.806-13.2 6.138-20.4-4.662-7.2-14.952-9.6-23.034-5.4-2.598 1.2-4.638 3-6.066 5.4h-.132c-.192.6-.36.6-.528 1.2l-9.966 15-9.966-15c-.168-.6-.336-.6-.528-1.2h-.132C59.934 5.8 57.96 4 55.362 2.8A18.914 18.914 0 0 0 47.31 1zm-.99 7.2c1.62 0 3.3.6 4.818 1.2.504 0 .966.6 1.386.6.294.6.54.6.792 1.2h.198c.132 0 .276.6.396.6h.264c.096.6.246.6.33.6L61.5 23.2H45.396c-.384 0-.744 0-1.122-.6-.54 0-1.074 0-1.584-.6-1.014 0-1.914-1.2-2.574-1.8-1.986-2.4-2.28-5.4-.528-8.4 1.458-1.8 4.026-3.6 6.732-3.6zm51.408 0c2.706 0 5.274 1.8 6.732 3.6 1.752 3 1.392 6-.594 8.4-.66.6-1.494 1.8-2.508 1.8-.504.6-1.044.6-1.584.6-.372.6-.804.6-1.188.6H82.488l6.99-10.8c.084 0 .234 0 .33-.6h.066c.018 0-.012 0 0 0h.198c.12 0 .264-.6.396-.6h.198c.252-.6.564-.6.858-1.2.426 0 .882-.6 1.386-.6 1.518-.6 3.198-1.2 4.818-1.2z"/><path fill="#B8C6D5" d="M6 55h132v6H6v-6z"/><path fill="#2B90BA" d="M54 55h36v6H54v-6zm0 72h36v5.64H54V127z"/></g></svg>',
            googleplus: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M11.358 12.558l-1.04-.8c-.315-.26-.747-.606-.747-1.234 0-.632.44-1.034.81-1.405 1.22-.95 2.42-1.96 2.42-4.08 0-2.18-1.38-3.33-2.04-3.88h1.79L14.42 0h-5.68C7.173 0 4.93.367 3.28 1.714 2.04 2.776 1.44 4.24 1.44 5.56c0 2.236 1.725 4.505 4.783 4.505.287 0 .603-.03.92-.06-.142.35-.288.635-.288 1.122 0 .89.46 1.433.862 1.95-1.296.09-3.72.232-5.507 1.323C.513 15.4 0 16.866 0 17.896 0 20.022 2.013 22 6.196 22c4.96 0 7.583-2.724 7.583-5.42 0-1.983-1.15-2.957-2.42-4.022zM7.58 9.262c-2.48 0-3.603-3.183-3.603-5.107 0-.747.143-1.52.634-2.12.46-.576 1.27-.95 2.03-.95 2.39 0 3.63 3.215 3.63 5.28 0 .515-.052 1.433-.72 2.094-.46.46-1.24.8-1.96.8zM7.61 20.8c-3.087 0-5.075-1.465-5.075-3.503 0-2.04 1.844-2.728 2.48-2.957 1.212-.404 2.768-.46 3.027-.46.29 0 .432 0 .662.03 2.193 1.55 3.145 2.322 3.145 3.788 0 1.776-1.47 3.1-4.24 3.1zM17 7v3h-3v1h3v3h1v-3h3v-1h-3V7h-1z"/></svg>',
            hotlists: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="6 6 21 23" width="21" height="23"><path d="M22 14s-.8 1.8-1 4c0 0-1.6-8.8-8.3-13 0 0 2.8 4.5.9 6.5 0 0-1.2 1.4-1.6 3.5 0 0-.4 1.5 0 3 .3 1-2-.6-2-3 0 0-1.4 1.7 1 6 0 0 1.3 1.7 1 3 0 0-2.7-.6-4-4 0 0 .1 4.2 2 6 2 1.8 4.5 2 6 2 0 0 6.6 0 7-5 .5-5.2-1.6-6.5-1-9z"/></svg>',
            "ideas-stream": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 27" width="35" height="27"><g fill-rule="evenodd"><path d="M17.5 5.167c-4.143 0-7.5 3.232-7.5 7.22 0 2.644 2.515 5.448 3.43 7.91 1.366 3.672 1.215 5.87 4.07 5.87 2.898 0 2.703-2.188 4.07-5.855.918-2.467 3.43-5.3 3.43-7.926 0-3.987-3.36-7.22-7.5-7.22zm1.767 17.835l-3.38.406c-.12-.336-.25-.73-.408-1.243-.003-.006-.006-.013-.007-.02l4.22-.507c-.06.193-.125.397-.18.58-.09.294-.17.55-.246.784zm-3.992-1.49c-.125-.394-.264-.81-.42-1.25h5.295c-.084.235-.167.47-.24.694l-4.635.557zm2.225 3.343c-.69 0-1.008-.077-1.362-.82l2.89-.35c-.42 1.086-.723 1.17-1.528 1.17zm-4.532-12.47c0 .427.353.767.782.767.43 0 .782-.34.782-.766 0-1.565 1.33-2.844 2.968-2.844.43 0 .782-.34.782-.765a.774.774 0 0 0-.782-.766c-2.497 0-4.532 1.96-4.532 4.376zM5.48.646c-6.64 6.64-6.64 17.403 0 24.042l.706-.707c-6.248-6.247-6.248-16.378 0-22.626L5.48.646zm24.04 24.042c6.64-6.64 6.64-17.403 0-24.042l-.706.708c6.248 6.248 6.248 16.38 0 22.627l.707.708z"/><path d="M7.6 2.768c-5.467 5.467-5.467 14.33 0 19.8l.708-.708c-5.077-5.077-5.077-13.308 0-18.385L7.6 2.768zm19.8 19.8c5.467-5.47 5.467-14.333 0-19.8l-.708.707c5.077 5.077 5.077 13.308 0 18.385l.707.707z"/><path d="M9.722 4.89c-4.296 4.295-4.296 11.26 0 15.555l.707-.707c-3.906-3.905-3.906-10.237 0-14.142L9.72 4.89zm15.556 15.555c4.296-4.295 4.296-11.26 0-15.556l-.707.706c3.906 3.905 3.906 10.237 0 14.142l.708.707z"/></g></svg>',
            iphone: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 148 300" xmlns:xlink="http://www.w3.org/1999/xlink"><g fill="none" stroke="#3bb3e4"><rect width="144" height="298" stroke-width="2" rx="22" x="2" y="1"/><path d="M10.5 39.5h127v223h-127z"/><circle stroke-width="2" cx="74" cy="280" r="10.5"/></g><g fill="#fff"><path d="M2 24h2v4H2z" id="a"/><use x="142" xlink:href="#a"/><use y="248" xlink:href="#a"/><use x="142" y="248" xlink:href="#a"/></g><g fill="#3bb3e4"><path d="M0 42h2v12H0z"/><path d="M0 66h2v22H0z" id="b"/><use y="28" xlink:href="#b"/><use x="146" xlink:href="#b"/><circle cx="53" cy="18.5" r="2.5"/><rect width="23" height="3" rx="1.5" x="64" y="17"/></g><g fill="none" stroke="#dadde1"><circle cx="74" cy="222" r="10.5" id="c"/><g id="d"><use y="-28" xlink:href="#c"/><use y="-56" xlink:href="#c"/><use y="-84" xlink:href="#c"/></g><use x="-30" xlink:href="#d"/><use x="30" xlink:href="#d"/></g></svg>',
            "legend-hide": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><g><path d="M1 0v1h11V0H1zm11 1v11h1V1h-1zm0 11H1v1h11v-1zM1 12V1H0v11h1zM6 2v4H2v1h4v4h1V7h4V6H7V2H6z"/></g></svg>',
            "legend-show": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><g><path d="M1 0v1h11V0H1zm11 1v11h1V1h-1zm0 11H1v1h11v-1zM1 12V1H0v11h1zm1-6v1h9V6H2z"/></g></svg>',
            "like-cornered": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 15" width="16px" height="15px"><path fill-rule="evenodd" d="M0 14.66h2.91V5.864H0v8.796zm16-8.063c0-.806-.655-1.466-1.455-1.466h-4.59l.692-3.35.022-.232c0-.3-.126-.58-.32-.777L9.576 0 4.793 4.83c-.27.264-.43.63-.43 1.034v7.33c0 .806.655 1.466 1.455 1.466h6.546c.603 0 1.12-.367 1.338-.895l2.196-5.167c.066-.17.102-.345.102-.535v-1.4l-.007-.008.007-.058z"/></svg>',
            like: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 670 745"><path d="M417.91 738.04c-118.64-22.82-190.57-47.072-218.92-73.807-22.734-21.44-24.27-32.633-24.27-176.81 0-88.1 1.86-140.31 5.373-150.86 11.138-33.44 36.66-57.735 133.93-127.5 67.296-48.267 90.59-69.93 140.55-130.72C509.177 11.903 521.965.078 539.24.046c16.013-.03 25.43 13.07 32.622 45.373 7.83 35.164-3.512 82.774-30.952 129.93-40.764 70.052-39.008 75.19 31.705 92.733 49.08 12.178 81.767 30 91.884 50.097 8.98 17.844 7.335 39.84-7.633 102.04-7.523 31.264-15.156 66.454-16.962 78.203-1.806 11.748-11.588 46.504-21.738 77.236s-18.454 58.25-18.454 61.152c0 8.677-33.212 71.96-44.153 84.13-22.217 24.715-68.287 30.435-137.65 17.093zm-345.68-25.9c-5.722-2.5-22.273-14.2-36.78-26.03-14.506-11.88-28.418-21.59-30.914-21.59-2.82 0-4.538-65.6-4.538-173.26 0-95.29 1.752-173.25 3.893-173.25 2.144 0 17.104-11.498 33.248-25.552 30.614-26.65 49.608-34.114 68.466-26.907 16.703 6.386 18.065 16.296 7.704 56.06-8.34 32-9.423 51.51-9.423 169.55 0 131.23.62 138.49 16.636 194.72 5.75 20.178-24.144 36.41-48.29 26.22z"/></svg>',
            link: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 80"><path d="M29.298 63.47l-4.048 4.02c-3.51 3.48-9.216 3.482-12.723 0-1.686-1.672-2.612-3.894-2.612-6.256s.927-4.585 2.61-6.258l14.9-14.783c3.09-3.062 8.898-7.57 13.132-3.372 1.943 1.93 5.08 1.92 7.01-.02 1.93-1.942 1.918-5.08-.025-7.01-7.197-7.14-17.834-5.82-27.098 3.37l-14.9 14.785C1.967 51.49 0 56.21 0 61.235s1.968 9.743 5.544 13.292C9.224 78.177 14.054 80 18.887 80c4.834 0 9.667-1.824 13.348-5.476l4.05-4.02c1.943-1.93 1.954-5.067.024-7.01-1.93-1.94-5.07-1.952-7.016-.023zM74.454 6.045c-7.73-7.67-18.538-8.086-25.694-.986l-5.046 5.01c-1.943 1.924-1.955 5.06-.025 7.004 1.93 1.943 5.063 1.954 7.01.025l5.04-5.005c3.707-3.68 8.56-2.155 11.727.986 1.69 1.675 2.615 3.898 2.615 6.26 0 2.363-.928 4.586-2.613 6.26L51.575 41.37c-7.27 7.213-10.68 3.828-12.134 2.384-1.943-1.928-5.08-1.916-7.01.026-1.93 1.942-1.918 5.08.025 7.01 3.337 3.31 7.146 4.953 11.14 4.953 4.888 0 10.052-2.463 14.962-7.338l15.892-15.77C78.03 29.082 80 24.362 80 19.338c0-5.022-1.97-9.743-5.546-13.294z"/></svg>',
            linkedin: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 12"><path d="M3.344 11.996V3.898H.664v8.098h2.68zm-1.34-9.204c.935 0 1.516-.62 1.516-1.4C3.503.6 2.94-.005 2.022-.005 1.105-.005.506.6.506 1.395c0 .776.58 1.397 1.48 1.397h.018zm2.823 9.204h2.68V7.474c0-.242.017-.484.088-.657.194-.484.635-.984 1.375-.984.97 0 1.358.742 1.358 1.83v4.333h2.68V7.353c0-2.488-1.323-3.645-3.086-3.645-1.446 0-2.08.812-2.433 1.364h.01V3.898H4.82c.035.76 0 8.098 0 8.098z"/></svg>',
            "logo-sad": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 82"><g fill="none" fill-rule="evenodd"><path fill="#E9EFF2" d="M81.387 15.092c3.366-1.9 7.247-2.983 11.38-2.983 12.882 0 23.326 10.526 23.326 23.513 0 2.217-.304 4.362-.873 6.395 6.777 2.378 11.64 8.874 11.64 16.516 0 9.657-7.766 17.485-17.346 17.485-.2 0-.4-.003-.598-.01v.01h-86.13v-.007c-12.61-.32-22.73-10.72-22.73-23.506 0-12.833 10.196-23.264 22.867-23.51C24.43 12.757 37.983.05 54.486.05c11.346 0 21.3 6.01 26.9 15.042z"/><path fill="#3BB3E4" d="M52.55 37.342c-4.196 7.27-11.227 7.424-13.8 5.938-3.36-1.94-6.016-7.547-1.76-14.922 5.175-8.96 17.15-11.734 17.15-11.734s3.585 11.756-1.59 20.718zM83.873 15.26c-2.48 4.298-6.64 4.39-8.16 3.51-1.986-1.145-3.557-4.46-1.04-8.822 3.06-5.298 10.14-6.938 10.14-6.938s2.12 6.95-.94 12.25zm17.04 7.56c-1.632 2.827-4.368 2.888-5.37 2.31-1.306-.755-2.34-2.937-.683-5.806 2.013-3.486 6.67-4.565 6.67-4.565s1.396 4.572-.617 8.06zM91.13 62.46c-3.503 6.07-9.373 6.198-11.52 4.958-2.805-1.62-5.023-6.3-1.47-12.458 4.32-7.48 14.317-9.796 14.317-9.796S95.45 54.98 91.13 62.46zM60.482 73.702c-4.81 8.332-12.87 8.51-15.82 6.807-3.85-2.225-6.894-8.653-2.014-17.105 5.93-10.27 19.654-13.45 19.654-13.45s4.11 13.475-1.82 23.746z"/></g></svg>',
            messages: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="4 6 23 21" width="23" height="21"><path d="M16 18h3v-3h-3v3zm-2-5v10h9l3 3v-3h1V13H14zm6 2v4h-4v3h-1v-8h5v1zm6 0v7h-1v-6h-1v1h-1v-1h-1v6h-1v-8h1v1h1v1h1v-1h1v-1h1v1zm-4-9H5v12h1v4l4-4h3v-6h9V6z"/></svg>',
            notes: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 21" width="15" height="21"><path fill-rule="evenodd" d="M7.5 0C3.357 0 0 3.23 0 7.22c0 2.644 2.515 5.448 3.43 7.91C4.796 18.802 4.645 21 7.5 21c2.898 0 2.703-2.188 4.07-5.855.918-2.468 3.43-5.3 3.43-7.926C15 3.23 11.64 0 7.5 0zm1.767 17.834l-3.38.406c-.12-.336-.25-.73-.408-1.242-.003-.006-.006-.014-.007-.02l4.22-.507c-.06.194-.125.398-.18.58-.09.295-.17.55-.246.784zm-3.992-1.488c-.125-.395-.264-.81-.42-1.252h5.295c-.084.235-.168.472-.24.695l-4.635.556zM7.5 19.687c-.69 0-1.008-.076-1.362-.82l2.89-.348c-.42 1.084-.723 1.168-1.528 1.168zM2.968 7.22c0 .424.353.764.782.764.43 0 .782-.34.782-.765 0-1.566 1.33-2.845 2.968-2.845.43 0 .782-.34.782-.766a.774.774 0 0 0-.782-.766c-2.497 0-4.532 1.96-4.532 4.375z"/></svg>',
            notifications: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="5 6 21 21" width="21" height="21"><path d="M15.5 27c1.2 0 2.2-.9 2.4-2H13c.3 1.1 1.3 2 2.5 2zm6.5-7v-6c-.2-2.9-2.3-5.3-5.1-5.9 0-.2.1-.4.1-.6 0-.8-.7-1.5-1.5-1.5S14 6.7 14 7.5c0 .2.1.4.2.6-2.8.6-4.9 3-5.1 5.9v5.9C9 22.7 7 23 7 23v1h17v-1s-2-.3-2-3z"/></svg>',
            "publish-idea-intro": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 216 320" width="216" height="320"><g fill="none" fill-rule="evenodd"><g fill="#3BB3E4"><g><path d="M2 2.002v315.996c0 .005-.003.002 0 .002h212V2.002c0-.005.003-.002 0-.002H2v.002zm-2 0C0 .896.893 0 2 0h212c1.104 0 2 .89 2 2.002v315.996c0 1.106-.893 2.002-2 2.002H2c-1.104 0-2-.89-2-2.002V2.002z" id="Shape"/><g><path d="M49 207h124v-2H48v2h1zM49 285h124v-2H48v2h1zM49 188h124v-2H48v2h1zM49 264h124v-2H48v2h1zM49 169h124v-2H48v2h1zM49 245h124v-2H48v2h1zM49 150h124v-2H48v2h1zM49 226h124v-2H48v2h1z" id="Shape"/></g><path d="M111 88c13.807 0 25-11.193 25-25s-11.193-25-25-25-25 11.193-25 25 11.193 25 25 25zm0 2c-14.912 0-27-12.088-27-27s12.088-27 27-27 27 12.088 27 27-12.088 27-27 27z" id="Shape"/><path d="M109.94 61.92l3.01 3.184c.17-.067.356-.104.55-.104h.062l5.49-5.587C118.316 58.55 117.22 58 116 58c-.69 0-1.337.174-1.902.48-.984-1.494-2.676-2.48-4.598-2.48-2.87 0-5.225 2.197-5.478 5H104c-2.21 0-4 1.79-4 4 0 .732.197 1.42.54 2.01l6.46-5.46v-.05c0-.828.672-1.5 1.5-1.5s1.5.672 1.5 1.5c0 .146-.02.287-.06.42zm-1.185 1.058L112 66.454v.046c0 .81.64 1.47 1.443 1.5h.057c.483 0 .912-.228 1.186-.582l.314-.147-.137-.143c.088-.19.137-.403.137-.627 0-.194-.037-.38-.104-.55l5.055-4.58c.033.205.05.415.05.63 0 .39-.055.764-.16 1.12 1.25.363 2.16 1.515 2.16 2.88 0 1.657-1.343 3-3 3h-15c-1.09 0-2.08-.436-2.8-1.143l6.59-5.035c.212.114.454.178.71.178.087 0 .172-.007.255-.022z"/><path d="M89.576 75.892c.198.328.404.652.616.97l-15.875 27.5-1.48.172-.495-.753.745-1.29 10.904-1.276 1.48-.173.59 1.37 4.347 10.08-.745 1.29-.9-.052-.59-1.367 14.822-25.67c.163.056.327.11.492.16l.73 1.72-.284.495c-6.736-1.823-12.497-6.21-16.077-12.154l.597-1.033 1.124.015zm-.564-.985c3.306 6.09 9.068 10.655 15.958 12.36l-15.81 27.384-4.936-11.45-12.384 1.45 17.172-29.743zM118.514 86.85c.165-.05.33-.104.492-.16l14.82 25.67-.59 1.368-.898.053-.745-1.29 4.346-10.08.59-1.37 1.48.174 10.903 1.277.745 1.29-.495.754-1.48-.173-15.875-27.497c.212-.32.418-.643.616-.97l1.124-.016.597 1.034c-3.58 5.946-9.34 10.332-16.077 12.155l-.285-.494.73-1.72zm-1.484.418c6.89-1.706 12.652-6.27 15.958-12.36l17.172 29.743-12.384-1.45-4.936 11.45-15.81-27.382z"/></g></g></g></svg>',
            "report-flag": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12"><path d="M10.37.6c-.43.053-.97.13-1.55.13C7.918.73 7.1.52 6.273.35 5.433.175 4.566 0 3.648 0 1.816 0 1.195.38 1.133.42L1 .51V12h.625V6.626c.234-.094.85-.26 2.027-.26.852.002 1.65.313 2.496.49.86.175 1.75.36 2.715.36.574 0 1.082-.076 1.512-.125.234-.024.44-.05.625-.08V.505c-.184.035-.395.065-.63.095z"/></svg>',
            "settings-gear": '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 42 42"><path d="M38.626 17.554h-2.81c-.354-1.755-1.055-3.157-1.756-4.566l1.756-1.755c1.4-1.4 1.4-3.51 0-4.912s-3.51-1.4-4.912 0l-1.756 1.76c-1.4-.7-2.81-1.4-4.565-1.753V3.51c0-2.11-1.402-3.51-3.51-3.51s-3.52 1.41-3.52 3.51v2.81c-1.754.355-3.156 1.056-4.565 1.756L11.233 6.32c-1.4-1.4-3.51-1.4-4.912 0s-1.4 3.512 0 4.913l1.76 1.755c-.7 1.402-1.4 2.81-1.754 4.566H3.51c-2.1 0-3.51 1.41-3.51 3.51s1.4 3.512 3.51 3.512h2.81c.355 1.755 1.056 3.156 1.756 4.565L6.32 30.9c-1.4 1.402-1.4 3.51 0 4.913s3.512 1.4 4.913 0l1.755-1.756c1.402.7 2.81 1.402 4.566 1.756v2.815c0 2.11 1.4 3.51 3.51 3.51s3.51-1.4 3.51-3.51v-2.81c1.757-.354 3.158-1.055 4.567-1.756l1.76 1.754c1.4 1.4 3.51 1.4 4.914 0s1.4-3.51 0-4.912l-1.756-1.756c.7-1.4 1.402-2.81 1.756-4.565h2.81c2.107 0 3.51-1.4 3.51-3.51.006-2.11-1.403-3.52-3.505-3.52zm-17.56 14.05c-5.968 0-10.534-4.565-10.534-10.532s4.566-10.54 10.533-10.54 10.532 4.566 10.532 10.533-4.558 10.54-10.532 10.54zm0-14.05c-2.11 0-3.512 1.4-3.512 3.51s1.4 3.512 3.51 3.512 3.51-1.402 3.51-3.51-1.4-3.512-3.51-3.512z"/></svg>',
            stocktwits: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.8 9.4"><path d="M3.9 4c-.7-.3-1.1-.5-1.3-.6L2.2 3c-.1-.1-.1-.3-.1-.5 0-.3.1-.5.3-.7.2-.2.5-.3.9-.3.3 0 .7 0 1 .1.3.2.7.4 1.2.5L6.2.6C5.7.4 5.2.2 4.8.1L3.4 0C2.3 0 1.5.2 1 .7S.1 1.8.1 2.6c0 .4.1.8.3 1.1s.4.6.7.8c.3.2.7.5 1.3.8l1.2.6c.2.2.4.3.5.4.1.1.2.3.2.5 0 .3-.1.6-.4.7-.2.2-.6.2-1 .2s-.8-.1-1.2-.2C1.2 7.5.6 7.3 0 7v1.8c.8.4 1.7.6 2.7.6 1.1 0 2-.2 2.6-.7.7-.5 1-1.2 1-2 0-.6-.2-1.1-.5-1.5-.4-.4-1-.8-1.9-1.2zM7 0v1.6h3.1v7.8h1.6V1.6h3.1V0H7z"/></svg>',
            twitter: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 11.6"><path d="M15 1.4c-.3.1-1 .4-1.7.5.4-.2 1.1-1 1.3-1.6-.4.3-1.4.7-1.9.7-.6-.7-1.4-1-2.3-1-1.7 0-3.1 1.3-3.1 3 0 .2 0 .4.1.7C5.1 3.6 2.4 2.5.9.6 0 2.1.8 3.9 1.8 4.5c-.4 0-1 0-1.3-.3 0 1 .5 2.4 2.4 2.9-.4.2-1 .1-1.3.1.1.9 1.4 2 2.8 2-.6.5-2.3 1.4-4.4 1.1 1.4.8 3.1 1.3 4.8 1.3 5 0 8.8-3.9 8.6-8.6.5-.4 1.1-.9 1.6-1.6z"/></svg>',
            user: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 15" width="12px" height="15px"><path fill-rule="evenodd" d="M6.2 0c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zM6 14.3a7.2 7.2 0 0 1-6-3.22C.03 9.09 4 8 6 8c1.99 0 5.97 1.09 6 3.08a7.2 7.2 0 0 1-6 3.22z"/></svg>',
            view: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 16"><path clip-rule="evenodd" d="M12 0C4.07 0 0 8 0 8s3.072 8 12 8c8.087 0 12-7.97 12-7.97S20.057 0 12 0zm.02 13c-2.9 0-4.996-2.188-4.996-5 0-2.813 2.096-5 4.995-5s4.993 2.187 4.993 5c0 2.812-2.096 5-4.995 5zm0-8c-1.658 0-3 1.393-3 3 0 1.606 1.34 3 2.997 3 1.656 0 2.996-1.395 2.996-3 0-1.608-1.34-3.003-2.997-3z"/></svg>',
            yahoo: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 13"><path d="M19.502 12.2l-1.5-.184.16-1.33 1.503.183-.163 1.33zM18.44 3.9l.01 5.95 1.102.136 1.445-5.763L18.44 3.9zm.997-1.39c-.33.035-1.707.34-2.168.438-.5.132-5.03 3.61-5.32 4.465-.07.297-.1.75-.1 1.177l-.03.69c0 .493.13 1.286.2 1.716.29.064 2.45.007 2.84.073l-.05.88c-.39-.03-3.12-.02-4.68-.02-.8 0-3.34.08-4.13.06l.15-.84c.43-.04 2.206.07 2.597-.34.194-.208.133-.425.133-1.608v-.56c0-.264 0-.755-.065-1.214-.167-.49-4.15-5.44-5.175-6.23-.294-.1-2.16-.284-2.62-.38L1 .07c.23-.12 2.3.025 4.31-.05 1.327-.042 4.34 0 4.71.048l-.09.66c-.4.1-2.305.135-2.802.267 1.288 1.9 3.327 4.354 3.985 5.31.363-.528 3.557-2.71 3.657-3.468-.497-.1-2.138-.34-2.4-.34l-.158-.86c.45-.07 2.815 0 3.99 0 1.014 0 3.182 0 3.797.05l-.57.81z"/></svg>'
        })
    }).call(e, i(5))
}, function(t, e, i) {
    (function(t) {
        "use strict";
        var e, i = "tvxwevents.",
            n = {},
            o = $.browser.msie || /\btrident\b/i.test(navigator.userAgent);
        $(window).on("storage", function(t) {
            if (null !== t.originalEvent.newValue) {
                var r = t.originalEvent.key;
                if (r.startsWith(i)) return r = r.substr(i.length), o && e._emitting ? void(e._emitting = !1) : void(n[r] && n[r].forEach(function(e) {
                    e.call(t.originalEvent.newValue, t.originalEvent.newValue)
                }))
            }
        }), e = window.TVXWindowEvents = {
            on: function(t, e) {
                n[t] || (n[t] = []), n[t].push(e)
            },
            off: function(t, e) {
                if (n[t]) {
                    var i = n[t].indexOf(e); - 1 !== i && (1 === n[t].length ? delete n[t] : n[t].splice(i, 1))
                }
            },
            current: function(t) {
                return TVLocalStorage.getItem(i + t)
            },
            emit: function(t, n) {
                void 0 === n && (n = +new Date), n !== TVLocalStorage.getItem(i + t) && (o && (e._emitting = !0), TVLocalStorage.setItem(i + t, n))
            }
        }, void 0 !== t && t && t.exports && (t.exports = e)
    }).call(e, i(4)(t))
}, function(t, e, i) {
    (function(t) {
        TradingView.cleanButAmpersand = function(t, e) {
            var i = e ? ["&amp;"] : ["&"];
            return TradingView.clean(t, e, i)
        }, TradingView.strip_tags = function(t) {
            return t && t.replace ? t.replace(/(<([^>]+)>)/gi, "") : t
        }, TradingView.encodeSpread = function(t) {
            return encodeURIComponent(t)
        }, TradingView.clean = function(t, e, i) {
            var n, o, r, s = [
                    ["&", "&amp;"],
                    ["<", "&lt;"],
                    [">", "&gt;"],
                    ['"', "&quot;"],
                    ["'", "&#039;"]
                ],
                a = t;
            if (!t || !t.replace) return a;
            for (n = 0; n < s.length; n++) o = s[n][0], r = s[n][1], i && i.indexOf && -1 !== i.indexOf(e ? r : o) || (a = e ? a.replace(RegExp(r, "g"), o) : a.replace(RegExp(o, "g"), r));
            return a
        }, void 0 !== t && t && t.exports && (t.exports = {
            clean: TradingView.clean,
            cleanButAmpersand: TradingView.cleanButAmpersand
        })
    }).call(e, i(4)(t))
}, function(module, exports, __webpack_require__) {
    (function(Featuresets, Delegate, moment, Mustache, ZeroClipboard, process, PineJsCalendar, Spinner) {
        "use strict";

        function loginUser(t) {
            function e() {
                "function" == typeof TVDialogs.onSigninSuccess && (TVDialogs.onSigninSuccess(), TVDialogs.onSigninSuccess = void 0)
            }
            window.iframeAuthWidget && t.is_first_login && (window.iframeAuthWidget.preventClose = !0), user = $.extend(!0, {}, t), TradingView.changeLoginState(!0), TVDialogs.modalDialog && "Log in" === TVDialogs.modalDialog.data("title") && TVDialogs.destroy(), t.is_first_login ? setTimeout(function() {
                var t = {
                    user: user,
                    afterLoginFunction: e
                };
                TradingView.phoneVerification.isRequired() && (t.buttonCaption = $.t("Next")), window.iframeAuthWidget && (window.iframeAuthWidget.preventClose = !1, t.onDestroy = window.iframeAuthWidget.postClose), TradingView.trackRegistrationEvent("Social"), TVDialogs.showAfterSocialSign(t)
            }, 0) : e()
        }

        function showDisabledAccountError() {
            TVDialogs.showError($.t("Error: Account is disabled"))
        }

        function followButtonsHandler(t) {
            t.on("click", ".follow-big", function() {
                var t = $(this);
                t.hasClass("unfollow") ? window.relationChange(t, 0, t.data("userid")) : (window.relationChange(t, 1, t.data("userid")), t.hover())
            }).on("mouseenter", ".follow-big", function() {
                $(this).hasClass("unfollow") && $(this).text($.t("Unfollow"))
            }).on("mouseleave", ".follow-big", function() {
                $(this).hasClass("unfollow") && $(this).text($.t("Following"))
            })
        }

        function updateSuggestedView(t, e) {
            var i = $(".chart-" + t + "-suggested-button");
            i.toggleClass("active", !!e)
        }

        function onLoginStateChange(is_initial) {
            $("html").toggleClass("is-authenticated", is_authenticated).toggleClass("is-not-authenticated", !is_authenticated).toggleClass("is-pro", is_authenticated && user && !!user.is_pro).toggleClass("is-not-pro", !(is_authenticated && user && user.is_pro)).toggleClass("is-trial", is_authenticated && user && "pro_realtime_trial" === user.pro_plan).toggleClass("is-not-trial", !(is_authenticated && user && "pro_realtime_trial" === user.pro_plan)).toggleClass("is-mobile", !!TradingView.isMobileView), TVSettings.sync(user.settings), is_initial || TradingView.dropPrerenderCache(), is_authenticated ? (is_initial || ($(".header-item-profile strong.user-badge").remove(), $(".header-item-profile > a").append(TradingView.userBadge(user, !0, "strong"))), $(".user-info-username").html(user.username), $(".following_count").html(user.following), $(".followers_count").html(user.followers), $(".saved_charts_count").html(user.saved_charts), $(".published_charts_count").html(user.published_charts), $(".treated_charts_count").html(user.treated_charts_count), $("img.user-picture, .user-picture img").attr("src", user.userpic), $(".trial-days-left").html(user.trial_days_left || ""), $(".header-item-profile").find("a").each(function(t, e) {
                e = $(e);
                var i = e.attr("rel");
                i && e.attr("href", i.replace("%u", user.username))
            }), user.fastpass_script && eval(user.fastpass_script), user.is_first_login && (TradingView.trackEvent("Conversion", "First login"), user.prort_trial_started && (TVDialogs.showTrialMessageSuccess(), delete user.prort_trial_started), delete user.is_first_login), TradingView.setTrialAvailiable(user.trial_availiable)) : (user = {
                username: "Guest",
                following: "0",
                followers: "0",
                ignore_list: {}
            }, $(".user-info-username").html(user.username), TVLocalStorage.removeItem("trial_availiable")), window.studyTemplates && (window.studyTemplates.refreshStudyTemplateList(), window.studyTemplates.refreshFavoriteDropdownMenu())
        }

        function userlink(t, e) {
            var i = __webpack_require__(18);
            return Mustache.render(i.userlink, {
                username: t,
                is_pro: function() {
                    return !!e
                },
                is_realtime: function() {
                    return "pro_realtime" === e
                },
                is_premium: function() {
                    return "pro_premium" === e
                },
                is_trial: function() {
                    return "pro_realtime_trial" === e
                }
            }, i)
        }

        function proBadge(t, e) {
            var i = __webpack_require__(18);
            return void 0 === t || t ? Mustache.render(i.proBadge, {
                is_realtime: "pro_realtime" === t,
                is_premium: "pro_premium" === t,
                is_trial: "pro_realtime_trial" === t,
                large_badge: !!e
            }) : ""
        }
        var loginStateChange, assert, availableTimezones, i;
        $(document).ajaxSend(function(t, e, i) {
            "POST" === i.type && (e.setRequestHeader("X-CSRFToken", $.cookie("csrftoken")),
                e.setRequestHeader("sessionid", $.cookie("sessionid"))), i.crossDomain && !i.forceLanguageHeader || (window.language ? e.setRequestHeader("X-Language", window.language) : console.warn("window.language is not defined"))
        }), String.prototype.format || (String.prototype.format = function() {
            var t = arguments;
            return this.replace(/{(\d+)}/g, function(e, i) {
                return void 0 !== t[i] ? t[i] : e
            })
        }), "string" == typeof $.cookie("csrftoken") && "" !== $.cookie("csrftoken") ? $("#update-status-li").append('<a href="#" onclick="TradingView.showChangeUserStatusDialog(); return false;">' + $.t("Update Status") + "</a>") : $("#update-status-li").empty(), $(document).ready(function() {
            $(".tv-select").selectbox({
                speed: 100,
                classHolder: "tv-select-container"
            }), Modernizr.canvas && Modernizr.canvastext || "undefined" != typeof FlashCanvas || TVDialogs.showNotice($.t("Oops, your browser can't display our charts!"), {
                html: $.t("It appears that your browser does not support <strong>Canvas</strong> technology, which is needed for TradingView to work.<br/>") + $.t("Please use one of the following browsers:") + '<ul><li><a href="http://www.google.com/chrome/" target="_blank">Chrome</a></li><li><a href="http://www.mozilla.com" target="_blank">Firefox</a></li><li><a href="http://www.apple.com/safari/" target="_blank">Safari</a></li><li><a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home" target="_blank">Internet Explorer 9+</a></li></ul>',
                classSuffix: "slim",
                doNotCloseOnBgClick: !0
            }), !Featuresets.enabled("websocket_connection") || "WebSocket" in window || swfobject.hasFlashPlayerVersion("9.0.0") || TVDialogs.showNotice($.t("TradingView Notice"), {
                html: $.t("It appears that your browser does not support <strong>WebSocket</strong> technology and does not have <strong>Adobe Flash</strong> plugin installed, one of which is essential for our portal.<br/>") + $.t('Please, <a href="http://get.adobe.com/flashplayer/" target="_blank">install Flash plugin</a> or consider updating to one of these modern browsers with WebSocket support:') + '<ul><li><a href="http://www.google.com/chrome/" target="_blank">Chrome</a></li><li><a href="http://www.apple.com/safari/" target="_blank">Safari</a></li></ul>',
                classSuffix: "slim",
                doNotCloseOnBgClick: !0
            }), TradingView.onWidget() || $(".chart-description").TVEmbeds()
        }), loginStateChange = window.loginStateChange = new Delegate, loginStateChange.subscribe(null, onLoginStateChange), TVXWindowEvents.on("loginStateChange", function() {
            var t = JSON.parse(this);
            window.user = t.user, window.is_authenticated = !!t.is_authenticated, loginStateChange.fire()
        }),
            function() {
                var t = "user-obj-changed",
                    e = {};
                window.crossTabSyncUserAttr = function(e) {
                    var i = {};
                    e instanceof Array ? e.forEach(function(t) {
                        i[t] = window.user[t]
                    }) : i[e] = window.user[e], TVXWindowEvents.emit(t, JSON.stringify(i))
                }, window.onChangeUserAttrInAnotherTab = function(t) {
                    var i = new Delegate;
                    return e[t] || (e[t] = []), e[t].push(i), i
                }, TVXWindowEvents.on(t, function(t) {
                    var i, n;
                    t = JSON.parse(t);
                    for (i in t)
                        if (window.user[i] = t[i], e[i])
                            for (n = 0; n < e[i].length; n++) e[i][n].fire(t[i])
                })
            }(), TradingView.trackEvent = function(t, e, i) {
            if (!window._UNIT_TESTS && "undefined" != typeof _gaq) {
                var n = ["_trackEvent", t, e];
                void 0 !== i && n.push(i), _gaq.push(n)
            }
        }, TradingView.trackRegistrationEvent = function(t) {
            var e, i;
            t && TradingView.signupSource && (e = "Registration", i = TradingView.signupSourceParameters, i && (i.additionalCategories && i.additionalCategories.forEach(function(t) {
                TradingView.trackEvent(t + " " + e, TradingView.signupSource)
            }), TradingView.signupSourceParameters = null), TradingView.trackEvent(e, TradingView.signupSource), TradingView.trackEvent("Registration medium", t), TradingView.signupSource = null)
        }, TradingView.eventsTracking = {
            filterNamesMap: {
                script_type: "Indicators and Strategies",
                "script_type-indicators": "Indicators",
                "script_type-strategies": "Strategies",
                stream: "All Markets",
                "stream-stocks": "Stocks",
                "stream-indices": "Indices",
                "stream-commodities": "Commodities",
                "stream-currencies": "Currencies",
                "stream-bitcoin": "Bitcoin",
                "interval-all": "All Intervals",
                "interval-m": "Short Term",
                "interval-h": "Medium Term",
                "interval-dwm": "Long Term",
                "sort-unmoderated": "Unmoderated",
                "sort-trending": "Trending",
                "sort-discussed": "Most Discussed",
                "sort-viewed": "Most Viewed",
                "sort-agreed": "Most Agreed",
                "sort-suggested": "Suggested",
                "sort-recent": "All Ideas",
                "time-day": "Today",
                "time-week": "This Week",
                "time-month": "This Month",
                "time-all": "All Time",
                "by-everyone": "Everyone",
                "by-following": "Following",
                "by-me": "My Ideas"
            },
            goProFeaturesMap: {
                customIntervals: "Add Custom Interval",
                intradaySpread: "Inraday Spread",
                kagiRenko: "Japanese Intraday Chart",
                extendedHours: "Timezones Extended Hours",
                alerts: {
                    prefix: "New Alerts Limit",
                    widget: "Widget",
                    chart: "Chart Header"
                },
                multipleCharts: "Multiple Charts Layout",
                savedChartsLimit: "Save Chart Limit",
                studyLimit: "Studies Limit",
                multipleWatchLists: {
                    prefix: "Watchlists",
                    "new": "Create New List",
                    rename: "Rename List",
                    saveAs: "Save List As"
                },
                importWatchlist: "Watchlists Import Watchlist",
                exportWatchlist: "Watchlists Export Watchlist",
                BATSExchangePopup: "BATS Exchange Popup",
                DataQualityPopup: "Data Quality Popup",
                CHXEURExchangePopup: "CHXEUR Exchange Popup",
                proRTProduct: "Volume Profile"
            },
            trackFeature: {
                savedChartsLimit: !0,
                BATSExchangePopup: !0,
                CHXEURExchangePopup: !0,
                DataQualityPopup: !0,
                intradaySpread: !0
            },
            trackGoPro: function(t, e, i) {
                i && !e && (e = i, i = null);
                var n = TradingView.eventsTracking.goProFeaturesMap[e];
                if (n) {
                    if (i) {
                        if ("string" == typeof n) return;
                        n = "{0} {1}".format(n.prefix, n[i])
                    }
                    TradingView.trackEvent(t, n)
                }
            }
        }, TradingView.trackStreamFilterChangeEvent = function(t, e, i) {
            var n, o, r = t + (e ? "-" + e : "");
            r in TradingView.eventsTracking.filterNamesMap && (n = i ? "Script Filters" : "Idea Filters", o = TradingView.eventsTracking.filterNamesMap[r], "sort-recent" === r && i && (o = "All Scripts"), "by-me" === r && i && (o = "My Scripts"), TradingView.trackEvent(n, o))
        }, TradingView.tryTrackGoProFeature = function(t, e) {
            t in TradingView.eventsTracking.trackFeature && TradingView.trackGoProFeature(t, e)
        }, TradingView.trackGoProFeature = function(t, e) {
            TradingView.eventsTracking.trackGoPro("Gopro Features", t, e)
        }, TradingView.trackGoProPageTransition = function(t, e) {
            TradingView.eventsTracking.trackGoPro("Gopro", t, e)
        }, assert = function(t, e) {
            if (!t) throw Error("Assertion failed" + (e ? ": " + e : ""))
        }, window.assert = assert, TradingView.changeLoginState = function(t) {
            is_authenticated = !!t, TVXWindowEvents.emit("loginStateChange", JSON.stringify({
                is_authenticated: is_authenticated,
                user: user
            })), loginStateChange.fire()
        }, window.loginUser = loginUser, window.showDisabledAccountError = showDisabledAccountError, TradingView.signOut = function() {
            $.ajax({
                type: "POST",
                url: "/accounts/logout/",
                dataType: "html"
            }).done(function() {
                TradingView.changeLoginState(!1)
            })
        }, TradingView.phoneVerification = function() {
            function t() {
                return window.is_authenticated && Featuresets.enabled("phone_verification") && TradingView.isFeatureEnabled("phone_verification") && user && !user.is_pro && !user.reputation && (!user.phone_verified || !user.has_phone)
            }

            function e() {
                var t = $.Deferred();
                return user && user.verifyPhoneExpires instanceof Date ? t.resolve(user.verifyPhoneExpires) : $.post("/accounts/phone-verify-status/").done(function(e) {
                    if (!e) return void t.reject();
                    if (e.verified) return void t.resolve(1 / 0);
                    var i = moment.unix(moment().unix() + ("number" == typeof e.delay && e.delay || 0)).toDate();
                    user && (user.verifyPhoneExpires = i), t.resolve(i)
                }).fail(t.reject), t
            }

            function i(t) {
                var e = TVDialogs.showPhoneDialog(t);
                return e.done(function() {
                    delete user.verifyPhoneExpires, TVSettings.remove("_verifyPhoneMessageInterval"), TVSettings.remove("_verifyPhoneMessageSched"), n.resolve()
                }), e
            }
            var n = $.Deferred();
            return loginStateChange.subscribe(null, function() {
                window.is_authenticated && (n = $.Deferred(), t() || n.resolve())
            }), {
                isRequired: t,
                verifyIfRequired: function(e) {
                    return t() ? (e || (e = {}), e.showDialog = !0, TradingView.phoneVerification.whenVerified(e)) : n.resolve()
                },
                whenVerified: function(o) {
                    var r, s;
                    return t() ? (o || (o = {}), o.showDialog ? (r = {
                        byFeature: o.verifyPhoneByFeature,
                        source: o.source,
                        customMessage: o.verifyPhoneMessage
                    }, o.noVerifyDelay === !0 ? i(r) : (s = $.Deferred(), e().done(function(t) {
                        var e, n, o, a;
                        return t == 1 / 0 ? void s.resolve() : (r.verifyDelayExpires = t, e = Date.now(), void(e >= t ? i(r).done(s.resolve).fail(s.reject) : (n = t - e, o = TVSettings.getInt("_verifyPhoneMessageInterval", 1 / 0), a = TVSettings.getInt("_verifyPhoneMessageSched", 0), isFinite(o) || (o = Math.ceil(n / 3), TVSettings.setValue("_verifyPhoneMessageInterval", o), a = e), e >= a ? (TVSettings.setValue("_verifyPhoneMessageSched", a + o), r.cancelButtonText = $.t("Remind me later"), i(r).always(s.resolve)) : s.resolve())))
                    }).fail(s.reject), s)) : n.promise()) : n.resolve()
                }
            }
        }(), window.runOrSignIn = function(t, e) {
            if (e || (e = {}), e.verifiedPhoneRequired === !0) {
                var i = t;
                t = function() {
                    TradingView.phoneVerification.whenVerified({
                        showDialog: !0,
                        source: e.source,
                        verifyPhoneByFeature: !0,
                        verifyPhoneMessage: e.verifyPhoneMessage,
                        noVerifyDelay: e.noVerifyDelay
                    }).done(i)
                }
            }
            is_authenticated || Featuresets.enabled("charting_library_base") ? t() : TVDialogs.showSignInDialog(t, {
                source: e.source,
                sourceMeta: e.sourceMeta,
                feature: e.feature
            })
        }, TradingView.runOrGoPro = function(t, e) {
            user && user.is_pro ? t() : TVDialogs.showGoProDialog(e)
        }, TradingView.handleIfNotError = function(t, e) {
            t.error ? console.log(t.error) : e(t)
        }, TradingView.handleIfNotErrorFunc = function(t) {
            return function(e) {
                TradingView.handleIfNotError(e, t)
            }
        }, window.relationChange = function(t, e, i) {
            var n = $(t);
            runOrSignIn(function() {
                var t;
                t = void 0 === n.data("type") ? e : n.data("type"), $.post("/social/follow-the-user/", {
                    targetId: i,
                    follow: t
                }, function(e) {
                    t ? (n.addClass("unfollow").removeClass("follow"), user.following++) : (n.removeClass("unfollow").addClass("follow"), user.following--), n.mouseleave(), n.hasClass("follow-big") || window.followButtonTooltip(n), $(".following_count").text(user.following), n.data("type", 1 - t)
                }, "json")
            }, {
                source: "Follow user"
            })
        }, window.followButtonsHandler = followButtonsHandler, TradingView.bindIdeasStreamFilter = function(t, e) {
            e = e || {};
            var i = t.find(".filter").map(function() {
                function t(t, r) {
                    var l, c, h, d, _, m = $(this),
                        v = m.data("name");
                    return a === !0 || a[v] ? void(t && t.preventDefault()) : (f && s.find(".temp").remove(), !is_authenticated && m.hasClass("authorization-required") ? (TVDialogs.showSignInDialog(null, {
                        source: "Ideas stream filter"
                    }), !1) : (l = v ? u.filter("[name=" + v + "]") : u, c = m.data("value"), (l && l.val() !== c || e.forceChange) && (h = o.filter(".active").filter(v ? "[data-name=" + v + "]" : "*").removeClass("active"), h.find(".active-underline").remove(), m.addClass("active"), l.val(c).change(), r || "function" != typeof e.onChange || setTimeout(function() {
                        e.onChange(t, l.attr("name"), c)
                    }, 0)), d = m.data("hook"), d && Object.keys(d).forEach(function(t) {
                        i.forEach(function(e) {
                            e.inputs.indexOf(t) > -1 && e.obj.setValue(d[t], t)
                        })
                    }), f && 0 === s.find("a[data-value=" + c + "]").length && m.clone(!0).addClass("temp item").append('<span class="active-underline"></span>').appendTo(s), !e.notPreventDefault && e.onChange && t && t.preventDefault(), f || (_ = o.filter(".active[data-filter-title]:first").data("filter-title") || g, _ ? o.filter(".active").each(function() {
                        _ = _.replace("%" + $(this).data("name") + "%", $(this).contents(":first").text())
                    }) : _ = m.contents(":first").text(), p.text(_)), void n(!0)))
                }

                function n(t) {
                    "boolean" != typeof t && (t = d), t ? (h.stop(!0, !1).fadeOut(_), c.unbind("clickoutside").removeClass("active"), d = !1) : (h.stop(!0, !1).fadeIn(_), c.one("clickoutside", n).addClass("active"), d = !0)
                }
                var o, r, s, a, l, c = $(this),
                    h = c.find(".dropdown"),
                    d = !1,
                    u = c.find("input"),
                    p = c.find(".selected"),
                    f = !1,
                    _ = void 0 === e.speed ? 50 : e.speed,
                    g = c.data("filter-title");
                return c.find(".selected").on("click", n), h.on("click", "a", t), o = h.find("a"), r = c.parent(".filter-tabbed"), r.length && (f = !0, s = r.find(".tabs"), o = o.add(s.find("a:not(.temp)")), s.on("click", "a", t)), a = {}, c.find(".sub-group.inactive").find("a:first").each(function(t, e) {
                    a[$(e).data("name")] = !0
                }), l = {
                    setValue: function(e, i) {
                        var n = o.filter("a[data-value=" + e + "]" + (u.length > 1 && i ? "[data-name=" + i + "]" : ""));
                        t.apply(n, [void 0, !0])
                    },
                    getActiveTitle: function() {
                        return p.text()
                    },
                    disabled: function(t, e) {
                        e ? $("[data-name=" + e + "]", c).closest(".sub-group").addClass("inactive") : f ? r.addClass("inactive ") : c.addClass("inactive "), t || (e ? ("object" != typeof a && (a = {}), a[e] = !0) : a = !0)
                    },
                    enabled: function(t) {
                        t ? ($("[data-name=" + t + "]", c).closest(".sub-group").removeClass("inactive"), "object" == typeof a && (a[t] = !1)) : (f ? r.removeClass("inactive ") : c.removeClass("inactive "), a = !1)
                    }
                }, c.data("interface", l), {
                    inputs: u.map(function(t, e) {
                        return $(e).attr("name")
                    }).get(),
                    obj: l
                }
            }).get()
        }, TradingView.bindIdeasStreamFilter.noTimePeriodsFilters = ["suggested", "recent", "best", "unmoderated"], TradingView.bindProfileTabsFilter = TradingView.bindIdeasStreamFilter, TradingView.GoToChartField = function(t, e) {
            function i(t, e) {
                var i, o = {};
                (t || n.options && n.options.defaultSymbol) && (o.symbol = ((t || n.options.defaultSymbol) + "").toUpperCase()), e && (o.interval = e), i = "/chart/", Object.keys(o).length && (i += "?" + $.param(o)), location.href = i
            }
            var n, o = __webpack_require__(2);
            this.$element = t, this.$field = this.$element.find("input"), this.$button = this.$element.find("span"), this.options = e, this.$button.on("click", function() {
                if (!this.$field.val()) {
                    var t = (n.options || {}).defaultSymbol || "";
                    t && this.$field.val((t + "").toUpperCase())
                }
                this.symbolSearch.acceptTypeIn()
            }.bind(this)), this.$element.on("keyup", function() {
                this.$element.toggleClass("not-empty", !!this.$field.val().length)
            }.bind(this)), this.symbolSearch = o.bindToInput(this.$field, $.extend((this.options || {}).symbolSearch, {
                callback: i,
                onEmptyApply: i
            })), n = this
        }, TradingView.GoToChartField.prototype.updateOptions = function(t) {
            $.extend(this.options, t)
        }, TradingView.SearchChartField = function(t) {
            function e(t) {
                t && (t = t.toUpperCase(), location.href = "/chart/" + TradingView.encodeSpread(t) + "/")
            }
            var i = __webpack_require__(2);
            this.$element = t, this.$field = this.$element.find("input"), this.$button = this.$element.find(".button"), this.symbolSearch = i.bindToInput(this.$field, {
                callback: e
            }), this.$field.placeholder(), this.$field.on("focus", function() {
                this.$element.addClass("active")
            }.bind(this)).on("blur", function() {
                this.$element.removeClass("active")
            }.bind(this)).on("keyup", function() {
                this.$element.toggleClass("not-empty", !!this.$field.val().length)
            }.bind(this)), this.$button.on("click", function() {
                this.symbolSearch.acceptTypeIn()
            }.bind(this))
        }, TradingView.applyReadMoreToChart = function(t) {
            var e = 111,
                i = !1,
                n = t.find(".desc");
            n.html(n.html().replace(/<br>/g, " ")).ellipsis(e, i, function(e) {
                var i = t.find(".chart-read-more-container");
                i.css("display", "block"), i.is(i.parent().children(":visible").last()) && t.css("padding-bottom", "0px")
            })
        }, window.chartWithCover = function(t) {
            t.find(".date").each(function() {
                var t = $(this),
                    e = new Date(t.text());
                TradingView.agoDateFormatter(t, e)
            }), t.find(".desc").each(function() {
                var t = $(this);
                t.height(t.parent().outerHeight() - t.position().top - 5)
            }).ellipsis()
        }, TradingView.deleteChart = function(t, e) {
            var i = [t];
            TVDialogs.showConfirm($.t("Confirmation"), $.t("Are you sure you want to delete this chart?"), function() {
                return Featuresets.enabled("saveload_storage_customization") ? ChartingLibraryBackend.removeChart(t, e) : (TradingView.dropPrerenderCache(), void $.post("/deletechart/", {
                    uid: i
                }, function(t) {
                    t.error || ("string" == typeof e ? document.location = e : "function" == typeof e ? e() : window.location.reload())
                }))
            }, null, {
                addClass: "delete-chart-dialog"
            })
        }, TradingView.saveChart = function(t, e, i, n, o) {
            var o = o || {};
            return Featuresets.enabled("saveload_storage_customization") ? ChartingLibraryBackend.saveChart(t.name, t.short_name, t.resolution, t, e.id.value(), function(t) {
                e.id.value() || (e.id.setValue(t), e.uid.setValue(t)), "function" == typeof i && i()
            }, n) : void $.post("/savechart/", t, function(t) {
                var r, s;
                if ("ok:" === t.substr(0, 3)) r = t.substr(3), s = JSON.parse(r), e.id.value() || (e.id.setValue(s.id), e.uid.setValue(s.uid)), "function" == typeof i && i({
                    uid: e.uid.value()
                }, s.count || 0);
                else if ("saved_chart_limit_reached" === t || "" === t) {
                    if ("function" == typeof n && n(), o.noDefaultOnFail) return;
                    TVDialogs.showGoProDialog({
                        feature: "savedChartsLimit"
                    })
                } else "function" == typeof n && n(), $("#error").html(t);
                $(window).off("beforeunload.savechart")
            }).fail(function() {
                o.retry ? "function" == typeof n && n() : (o.retry = !0, TradingView.saveChart.call(null, t, e, i, n, o))
            })
        }, TradingView.openSavedChart = function(t) {
            Featuresets.enabled("saveload_storage_customization") ? ChartingLibraryBackend.loadChart(t) : open("/chart/" + t.url + "/" + (TradingView.isMobileView ? "?mobile=1" : ""), "_blank")
        }, TradingView.deletePublishedChart = function(t, e) {
            var i;
            i = e.isScript ? $.t("Are you sure you want to delete this script?") : $.t("Are you sure you want to delete this chart?"), TVDialogs.showConfirm($.t("Confirmation"), i, function() {
                e.onConfirm && e.onConfirm(), $.post("/idea-delete/", {
                    id: t
                }, function(i) {
                    i.error ? (e.onError && e.onError(), TVDialogs.showNotice($.t("Error"), i.error)) : (e.onSuccess && e.onSuccess(), e.trigger && $(window).trigger("delete-private-idea", [t]))
                })
            })
        }, window.recommendChart = function(t, e) {
            var i = e ? $(e) : $("#chart-recommend-button");
            i.hasClass("active") ? i.removeClass("active") : i.addClass("active"), $.post("/recommend/", {
                id: t,
                type: "recommend"
            }, function(e) {
                i.toggleClass("active", !!e.state), $("#chart-" + t).toggleClass("hidden-idea", !e.state)
            })
        }, window.suggestChart = function(t, e) {
            var i = !$(e).hasClass("active");
            updateSuggestedView(t, i), $.post("/recommend/", {
                id: t,
                type: "hot",
                state: "" + !!i
            }, function(e) {
                updateSuggestedView(t, e.state)
            })
        }, window.chartTogglePublic = function(t, e) {
            var i = e ? $(e) : $("#chart-public-button");
            i.toggleClass("active"), $.post("/togglepublic/", {
                id: t
            }, function(t) {
                i.toggleClass("active", !!t.state)
            })
        }, window.chartRepostSTTW = function(t, e) {
            var i = $(e);
            i.addClass("active"), $.post("/repoststtw/", {
                id: t
            }, function(t) {
                i.toggleClass("active", !!t.state)
            })
        }, window.chartToggleIOTD = function(t, e) {
            function i() {
                o.toggleClass("active", n)
            }
            var n, o = e ? $(e) : $("#chart-iotd-button");
            o.is(".disabled") || (n = o.hasClass("active"), o.toggleClass("active", !n), $.post("/toggle-iotd/", {
                id: t
            }, function(e) {
                e.state && updateSuggestedView(t, !0)
            }).done(function(t) {
                return t.error ? (TVDialogs.showNotice($.t("Error"), t.error), i()) : void o.toggleClass("active", !!t.state).toggleClass("disabled", !!t.disabled)
            }).fail(i))
        }, TradingView.highlightChart = function(t, e) {
            function i(t, i) {
                return i && i.length > 300 ? (n.removeClass("process"), TVDialogs.showError($.t("Maximum length of comment is 300 characters")), void r.focus()) : void $.post("/highlight/", {
                    id: t,
                    comment: i || ""
                }, function(t) {
                    "" !== t.error ? (n.removeClass("process"), TVDialogs.showError(t.error)) : ($(".button-set .hl-button").removeClass("active"), $(e).addClass("active"), TVDialogs.destroy())
                })
            }
            var n, o, r, s = __webpack_require__(18),
                a = $.t("Comment:"),
                l = TVDialogs.createModalDialog(a, {
                    addClass: "dialog-highlight"
                });
            l.find("._tv-dialog-content").append(Mustache.render(s.dialogs.highlightCommentDialog)), n = l.find(".dialog-buttons ._tv-button.ok"), o = l.find(".dialog-buttons ._tv-button.cancel"), r = l.find(".message textarea"), o.on("click", function(e) {
                i(t)
            }), n.on("click", function(e) {
                var o = r.val().trim();
                o.length > 0 ? (n.addClass("process"), i(t, o)) : (TVDialogs.showError($.t("Comment required")), r.focus())
            }), TVDialogs.positionDialog(), TVDialogs.applyHandlers(null, {
                doNotCloseOnBgClick: !0
            })
        }, window.trendingPeople = function(t) {
            t.on("click", ".column-trending-people .tabs a", function(e) {
                var i = $(this);
                return i.hasClass("active") ? !1 : (i.addClass("active").siblings("a").removeClass("active"), t.find(".top-user-group").hide().filter("." + i.attr("href").slice(1)).show(), void e.preventDefault())
            })
        }, $.fn.TVTicker = function(t) {
            function e(t) {
                var e, i;
                return t = Math.abs(t), e = 1, !TradingView.isInteger(t) && t > 1 && (t = parseFloat(("" + t).replace(/^.+\./, "0."))), t > 0 && 1 > t && (i = ("" + t).length - 2, e = Math.pow(10, i)), e
            }
            return t = t || {}, this.each(function() {
                function i(t) {
                    var i, n, o, r, s, l;
                    a.trigger("tvticker-beforechange"), i = a.data("TVTicker"), n = i && i.step, o = i.parser ? i.parser(a.val()) : TradingView.isInteger(n) ? parseInt(a.val(), 10) : parseFloat(a.val()), isNaN(o) && (o = 0), r = e(o), s = e(n), r = Math.max(s, r), l = t(o, r), i.formatter && (l = i.formatter(l)), a.val(l), a.change()
                }

                function n() {
                    var t = a.data("TVTicker"),
                        e = t && t.step,
                        n = t && t.max;
                    i(function(t, i) {
                        var o = (Math.round(t * i) + Math.round(e * i)) / i;
                        return void 0 !== n && null !== n && o > n && (o = t), o
                    })
                }

                function o() {
                    var t = a.data("TVTicker"),
                        e = t && t.step,
                        n = t && t.min;
                    i(function(t, i) {
                        var o = (Math.round(t * i) - Math.round(e * i)) / i;
                        return void 0 !== n && null !== n && n > o && (o = t), o
                    })
                }
                var r, s = !1,
                    a = $(this),
                    l = a.data("TVTicker");
                l ? s = !0 : l = {
                    step: +a.data("step") || 1
                }, "step" in t && (l.step = +t.step || l.step), "min" in t && (l.min = t.min), "max" in t && (l.max = t.max), "formatter" in t && (l.formatter = t.formatter), "parser" in t && (l.parser = t.parser), a.data("TVTicker", l), s || (r = $('<div class="tv-ticker">').appendTo(a.parent()), $('<div class="icon up">').appendTo(r), $('<div class="icon down">').appendTo(r), a.next().find(".up, .down").on("mousedown", function(t) {
                    t.preventDefault(), a.focus()
                }), a.next().find(".up").click(function() {
                    a.is(":disabled") || n()
                }), a.next().find(".down").click(function() {
                    a.is(":disabled") || o()
                }), a.keydown(function(t) {
                    a.is(":disabled") || (38 === t.keyCode ? a.next().find(".up").addClass("active") : 40 === t.keyCode && a.next().find(".down").addClass("active"))
                }), a.keyup(function(t) {
                    a.is(":disabled") || (38 === t.keyCode ? (n(), a.next().find(".up").removeClass("active")) : 40 === t.keyCode && (o(), a.next().find(".down").removeClass("active")))
                }), a.mousewheel(function(t, e) {
                    e > 0 ? a.next().find(".up").click() : a.next().find(".down").click()
                }))
            }), this
        },
            function() {
                function t(t) {
                    var e = 0;
                    t === !0 && (ChartApiInstance.disconnect(), e = 500), setTimeout(ChartApiInstance.connect.bind(ChartApiInstance), e)
                }

                function e(e, i) {
                    var n = $('<div class="buttons">').appendTo(e.find("._tv-dialog-content .main"));
                    $('<input type="button" class="_tv-button ok" value="' + $.t("Report a data issue") + '">').css("margin-right", 15).click(function() {
                        TVDialogs.destroy(), runOrSignIn(function() {
                            new TradingView.UserBugReportDialog({
                                modal: !0
                            }).show().on("destroy", function() {
                                t(i)
                            })
                        }, {
                            source: "Report data issue from disconnect dialog"
                        })
                    }).appendTo(n), $('<input type="button" class="_tv-button ok" value="' + $.t("Reconnect") + '">').click(function() {
                        TVDialogs.destroy(), t(i)
                    }).appendTo(n)
                }

                function i() {
                    TradingView.trackEvent("System", "Disconnect");
                    var t = "<p>" + $.t("Connection to server was lost") + "</p><p>" + $.t("How to fix:") + "</p><ol><li>" + $.t("Check firewall settings and make sure access to websocket ({0} port {1}) is open. Then click Reconnect or press F5.").format(window.WEBSOCKET_HOST, window.WEBSOCKET_PORT) + "</li><li>" + $.t('Your browser doesnâ€™t support <strong>WebSocket</strong> technology and does not have <strong>Adobe Flash</strong> plugin installed.<br>Please, <a href="http://get.adobe.com/flashplayer/" target="_blank">install Flash plugin</a> or consider updating to one of these modern browsers with WebSocket support:') + '<ul><li><a href="http://www.google.com/chrome/" target="_blank">Chrome</a></li><li><a href="https://www.mozilla.org/en-US/firefox/new/" target="_blank">Firefox</a></li></ul></li><li>' + $.t("Server broke the connection. Click Reconnect or press F5.") + "</li></ol>";
                    e(TVDialogs.showNotice($.t("Connection is lost"), {
                        html: t,
                        classSuffix: "disconnect",
                        removeOkButton: !0,
                        doNotCloseOnBgClick: !0,
                        width: "500px"
                    }))
                }
                window.showDisconnectedMessage = function() {
                    "MozWebSocket" in window && TradingView.WEB_SOCKET_WAS_CONNECTED ? setTimeout(i, 15e3) : i()
                }, window.showCriticalErrorMessage = function() {
                    TradingView.trackEvent("System", "Critical Error"), e(TVDialogs.showNotice($.t("Oops, something went wrong"), {
                        html: $.t("Please report the issue or click Reconnect."),
                        classSuffix: "critical",
                        removeOkButton: !0,
                        doNotCloseOnBgClick: !0,
                        width: "500px"
                    }), !0)
                }
            }(), window.toggleUserSavedCharts = function t(e) {
            var i = $(e).toggleClass("active");
            $(".my-saved-charts").toggle(), i.is(".active") ? $(document).bind("click.toggleUserSavedCharts", function(i) {
                $(i.target).is(".saved-charts-button") || t(e)
            }) : $(document).unbind("click.toggleUserSavedCharts")
        }, window.makeDirectionName = function() {
            return function(t, e) {
                var i = e(t);
                return "0" === i ? $.t("Neutral") : "1" === i ? $.t("Long") : $.t("Short")
            }
        }, window.gotochart = function(t) {
            location.href = "/v/" + t + "/"
        }, $.fn.ellipsis = function() {
            return this.each(function(t, e, i) {
                var n, o, r, s = $(this),
                    a = s.text(),
                    l = a,
                    c = $(this.cloneNode(!0)).hide().css({
                        position: "absolute",
                        overflow: "visible",
                        height: "auto",
                        width: s.width()
                    });
                for (t = t || s.height(), s.after(c), n = c.height() - t, r = 0; n > 0;)
                    if (l = l.substr(0, l.length - n / 2), c.text(l + "â€¦"), n = c.height() - t, o = !0, r++ > 500) {
                        console.warn($.t("Error: too long text"));
                        break
                    }
                s.text(c.text()), o && "function" == typeof i && i(s), e && a !== c.text() && s.attr("title", a), c.remove()
            }, arguments)
        },
            function(t) {
                var e = t('<div class="blue-tooltip-icon icon" />'),
                    i = t('<div class="blue-tooltip-text" />'),
                    n = t('<div class="blue-tooltip blue-tooltip-hidden" />').append(e).append(i);
                t.fn.blueTooltip = function(o, r, s) {
                    return n.parent().length || n.appendTo(document.body), this.each(function() {
                        var a = t(this);
                        a.data("tooltip", o), a.off("mouseenter.tooltip").on("mouseenter.tooltip", function() {
                            var o, l, c, h, d, u, p, f, _;
                            Modernizr.touch || (o = 5, s = s || "", i.html(a.data("tooltip")), n.attr("class", "blue-tooltip"), n.addClass("blue-tooltip-" + r).addClass(s), l = (a.outerWidth() - n.outerWidth()) / 2, c = 0, h = l + a.offset().left + n.outerWidth(), d = l + a.offset().left, u = t(window).width() - o, o > d ? c = o - d : h > u && (c = u - h), p = a.offset().left + l + c, f = 0, _ = "", "top" === r ? (f = a.offset().top - n.outerHeight() - 10, _ = "-=10") : "bottom" === r && (f = a.offset().top + a.outerHeight() + 10, _ = "+=10"), n.css({
                                left: p,
                                top: f,
                                opacity: 0
                            }), e.css({
                                left: Math.round(n.width() / 2) - c
                            }), n.stop().animate({
                                top: _,
                                opacity: 1
                            }, 200))
                        }).off("mouseleave.tooltip").on("mouseleave.tooltip", function(t) {
                            n.addClass("blue-tooltip-hidden").removeClass(s)
                        })
                    })
                }
            }(jQuery), TradingView.Tooltip = function() {
            function t() {
                clearTimeout(s), clearTimeout(a), jQuery.contains(document.body, h[0]) && (h.css("opacity", "0"), a = setTimeout(h.detach.bind(h), l / 2))
            }

            function e(t, e) {
                var i, n = t.data("commonTooltipText") || "",
                    o = t.attr("title");
                if (n || o || e) return o && (n = o, t.data("commonTooltipText", n), t.removeAttr("title")), i = {
                    y: t.offset().top - $(window).scrollTop(),
                    x: t.offset().left - $(window).scrollLeft(),
                    w: t.outerWidth(),
                    h: t.outerHeight()
                }, {
                    text: n,
                    rect: i,
                    vertical: t.hasClass("common-tooltip-vertical"),
                    otl: t.hasClass("common-tooltip-otl"),
                    otr: t.hasClass("common-tooltip-otr"),
                    below: t.hasClass("common-tooltip-below"),
                    above: t.hasClass("common-tooltip-above")
                }
            }

            function i(t, i) {
                var o, r = $(t);
                return i = i || {}, 0 === r.size() ? !1 : (o = !(!i.text && !i.$inner), i = $.extend({}, e(r, o), i), void($.isEmptyObject(i) || n(i)))
            }

            function n(t) {
                var e = jQuery.contains(document.body, h[0]);
                return clearTimeout(s), clearTimeout(a), e ? (t.$inner ? d.empty().append(t.$inner) : d.text(t.text), r(t), o(t.colorTheme || "default"), h.addClass(t.addClass), void h.css("opacity", "1")) : void(s = setTimeout(function() {
                    h.appendTo(document.body), n(t)
                }, l))
            }

            function o(t) {
                var e = {
                        white: "theme-white",
                        "default": ""
                    },
                    i = Object.keys(e),
                    n = -1 !== i.indexOf(t) ? e[t] : "";
                h.removeClass(i.filter(function(t) {
                    return !!t
                }).map(function(t) {
                    return e[t]
                }).join(" ")), n && !h.hasClass(n) && h.addClass(n)
            }

            function r(t) {
                var e, i, n, o, r = t.rect;
                h.attr("class", "common-tooltip-wrapper").css({
                    top: "auto",
                    right: "auto",
                    bottom: "auto",
                    left: "auto"
                }), Modernizr.pointerevents || h.addClass("no-pointer-events"), d.css({
                    left: "0",
                    width: "auto"
                }), d.width(d.width() + 2), e = $(window).width(), i = $(window).height(), n = t.vertical, (n && r.w < 20 || !n && r.h < 20) && h.addClass("farther"), n ? (h.addClass("vertical").css({
                    left: r.x + r.w,
                    top: r.y - (h.outerHeight() - r.h) / 2
                }), o = t.otr ? "otr" : t.otl || d.offset().left + d.outerWidth() + c > e ? "otl" : "otr", "otl" === o ? h.addClass("otl").css({
                    left: "auto",
                    right: e - r.x
                }) : h.addClass("otr")) : (h.css({
                    bottom: i - r.y,
                    left: r.x - (h.outerWidth() - r.w) / 2
                }), o = t.above ? "above" : t.below || d.offset().top - $(window).scrollTop() < c ? "below" : "above", "below" === o ? h.addClass("below").css({
                    bottom: "auto",
                    top: r.y + r.h
                }) : h.addClass("above"), d.offset().left - c < 0 ? d.css("left", Math.abs(d.offset().left) + c) : d.offset().left + d.outerWidth() + c > e && d.css("left", e - (d.offset().left + d.outerWidth() + c)))
            }
            var s, a, l = 500,
                c = 10,
                h = $("<div />").css("opacity", "0"),
                d = $('<div class="common-tooltip-body" />').appendTo(h);
            return Modernizr.touch || $(document).on("mouseenter", ".apply-common-tooltip", function(e) {
                function n() {
                    o.off("mouseleave mousedown", n), t()
                }
                if ("buttons" in e) {
                    if (1 & e.buttons) return
                } else if (1 === e.which) return;
                var o = $(this);
                i(o), o.on("mouseleave mousedown", n)
            }), {
                show: n,
                showOnElement: i,
                hide: t
            }
        }(), $(function() {
            function t(t) {
                $(t).attr("title") || t.offsetWidth + e >= t.scrollWidth || $(t).attr("title", $(t).text())
            }
            var e = $.browser.msie || /\btrident\b/i.test(navigator.userAgent) ? 1 : 0;
            $(document).on("mouseenter", ".apply-overflow-title", function() {
                t(this)
            }), $(document).on("mouseenter", ".apply-overflow-tooltip", function() {
                function t() {
                    TradingView.Tooltip.hide(), i.off("mouseleave mousedown", t)
                }
                var i = $(this);
                i[0].offsetWidth + e >= i[0].scrollWidth || (TradingView.Tooltip.showOnElement(i[0], {
                    text: i.text()
                }), i.on("mouseleave mousedown", t))
            })
        }), TradingView.GlobalNotification = function(t, e) {
            var i, n, o = __webpack_require__(18);
            return this._options = e || {}, i = this, this.id = t.id, (n = this._lastId()) ? void(this.id <= n || (i = this, this.container = $(Mustache.render(o.globalNotification, t)).prependTo($("body")), i.container.show(), this._options.addClass && this.container.addClass(this._options.addClass), i.container.css("top", 0), this._options.notShiftBody || $("body").addClass("padding-animate").css({
                paddingTop: i.container.outerHeight()
            }), TradingView.trackEvent("Global notification", "Show notification " + t.id), this.container.find(".global-notification-close").on("click", function() {
                i.close()
            }), $.browser.msie || TVXWindowEvents.on(this.KEY + "-close", this._onCloseInAnotherTab.bind(this)))) : void this._setLastId(this.id)
        }, TradingView.GlobalNotification.prototype.KEY = "globalNotification", TradingView.GlobalNotification.prototype._lastId = function() {
            var t = TVSettings.getInt(this.KEY, 0, !0),
                e = TVSettings.getInt(this.KEY, 0),
                i = Math.max(e, t);
            return t !== e && TVSettings.setValue(this.KEY, i), !i && $.cookie("notification_id") && (i = ~~$.cookie("notification_id"), TVSettings.setValue(this.KEY, i), $.cookie("notification_id", 0, {
                expires: -1,
                path: "/"
            })), i
        }, TradingView.GlobalNotification.prototype._setLastId = function(t) {
            TVSettings.setValue(this.KEY, t)
        }, TradingView.GlobalNotification.prototype.close = function(t) {
            var e = this;
            this.container && (t ? (this.container.remove(), this.container = null) : (e.container.css("top", -1 * this.container.outerHeight() + "px"), setTimeout(function() {
                e.container.remove(), e.container = null, $(window).resize(), e._options.notShiftBody || $("body").removeClass("padding-animate")
            }, 1500), TVXWindowEvents.emit(e.KEY + "-close", JSON.stringify([e.id, +new Date])), this._setLastId(e.id)), this._options.notShiftBody || $("body").css({
                paddingTop: 0
            }))
        }, TradingView.GlobalNotification.prototype._onCloseInAnotherTab = function(t) {
            t = JSON.parse(t), this.id <= t[0] && this.close(!0)
        }, window.closeGlobalNotification = function(t) {
            $.cookie("notification_id", t, {
                expires: 365,
                path: "/"
            }), $(".tv-global-notification").slideUp(400, function() {
                $(window).resize()
            })
        }, TradingView.RequestCache = function(t) {
            function e(t) {
                return "function" == typeof t && t([]), t
            }

            function e(e) {
                return n || o || (o = !0, $.getJSON(t, function(t) {
                    o = !1, n = !0, i = t, "function" == typeof e && e(t)
                })), i && "function" == typeof e && e(i), i
            }
            var i, n, o;
            return e.invalidate = function() {}, Featuresets.enabled("charting_library_base") ? e : (n = !1, o = !1, e.invalidate = function() {
                i = null, n = !1
            }, e)
        }, Featuresets.enabled("charting_library_base") ? "undefined" != typeof ChartingLibraryBackend ? (TradingView.getStudyTemplatesList = ChartingLibraryBackend.getStudyTemplatesList, TradingView.getStudyTemplatesList.invalidate = ChartingLibraryBackend.clearStudyTemplatesListCache) : (TradingView.getStudyTemplatesList = function() {}, TradingView.getStudyTemplatesList.invalidate = function() {}) : (TradingView.getStudyTemplatesList = new TradingView.RequestCache("/study-templates-ext/"), TradingView.getThemesList = new TradingView.RequestCache("/themes/")), TradingView.showThemeSaveDialog = function(t) {
            var e = __webpack_require__(91).showChartNameDialog;
            e(function(e) {
                e && $.get("/theme/" + e + "/").success(function(i) {
                    var n, o = !!i.content;
                    i = {
                        name: e,
                        content: JSON.stringify(t.model().theme())
                    }, o ? (n = $.t("Do you realy want to replace") + ' "' + e + '"?', TVDialogs.showConfirm($.t("Confirm replacing"), n, function() {
                        $.post("/save-theme/", i).error(function(t) {
                            console.error(t.responseText)
                        }), t._lastLoadedTheme = e
                    })) : ($.post("/save-theme/", i).error(function(t) {
                        console.error(t.responseText)
                    }), TradingView.getThemesList.invalidate(), t._lastLoadedTheme = e)
                })
            }, {
                title: $.t("Save theme as..."),
                label: $.t("Theme name"),
                error: $.t("Please enter theme name")
            }, 128)
        }, TradingView.applySearchResetHandler = function(t) {
            return t.on("change keyup", function() {
                $(this).val() ? $(this).siblings(".input-reset").show() : $(this).siblings(".input-reset").hide()
            }).change().siblings(".input-reset").on("click", function() {
                t.val("").change()
            })
        }, TradingView.getImageOfChart = function(t, e, i) {
            function n(i) {
                var n, o, r;
                o = Featuresets.enabled("charting_library_base") ? (e.snapshotUrl ? "" : "http://www.tradingview.com/x/") + i : window.location.protocol + "//" + window.location.host + "/x/" + i + "/", l.attr({
                    href: o
                }), c.attr("data-clipboard-text", o), h.val(o), s.stop(), a.css({
                    visibility: "visible"
                }), setTimeout(function() {
                    var t = h.get(0);
                    t.focus && t.focus(), t.select && t.select()
                }, 0), n = TradingView.ShareTwitterSnapshot.getStatus(t.activeChartWidget.value().symbolProperty().value(), o), $('<a class="twitter-share-button _tv-dialog-social _tv-dialog-social-twitter"></a>').attr({
                    href: "https://twitter.com/share?count=none&text=" + encodeURIComponent(n) + "&url=%20",
                    rel: "nofollow"
                }).appendTo(u), $('<script src="//platform.twitter.com/widgets.js"></script>').appendTo(u), r = new ZeroClipboard(c), r.on("ready", function(t) {
                    r.on("aftercopy", function(t) {
                        TVDialogs.showMessage($.t("Copied to clipboard"))
                    })
                })
            }
            var o, r, s, a, l, c, h, d, u, p;
            return e = e || {}, TVDialogs.createModalDialog($.t("Image URL"), {
                addClass: "_tv-dialog-min-width"
            }), o = TVDialogs.modalDialog, r = o.find("._tv-dialog-content"), s = TradingView.unifiedSpinner("mini").spin(r.get(0)), a = $('<div class="main">').css({
                visibility: "hidden"
            }).appendTo(r), l = $("<a>").text($.t("Save image")).attr({
                target: "_blank"
            }).css("text-decoration", "underline"), c = $('<span class="copy-clipboard-button _tv-button">' + $.t("Copy link") + "</span>"), h = $("<input>").attr({
                type: "text",
                readonly: !0
            }).bind("click focus", function() {
                this.select && this.select()
            }), $("<p>").appendTo(a).append(l, " " + $.t("or copy url:")), d = $('<form class="copy-image-url">').append(c, h), $("<p>").css({
                position: "relative"
            }).appendTo(a).append(d), ZeroClipboard.isFlashUnusable() && d.addClass("copy-unavailable"), u = $('<p class="_tv-dialog-socials">').appendTo(a), TVDialogs.positionDialog(), TVDialogs.applyHandlers(), TradingView.trackEvent("GUI", "Get image button"), ZeroClipboard.config({
                swfPath: TradingView.wrapUrl("/static/images/ZeroClipboard.swf")
            }), p = __webpack_require__(331).takeSnapshot, p(t, function(t) {
                i && i(t), n(t)
            }, function() {
                s.stop(), TVDialogs.showError($.t("URL cannot be received"), o)
            }, {
                snapshotUrl: e.snapshotUrl
            }), !1
        }, TradingView.getImageOfChartSilently = function(t, e, i) {
            var n = __webpack_require__(331).takeSnapshot;
            return n(t, function(t) {
                i && i(t)
            }, function() {
                console.warn($.t("Error while trying to create snapshot."))
            }, {
                snapshotUrl: e.snapshotUrl
            }), !1
        }, TradingView.dropPrerenderCache = function() {
            $('link[rel="prerender"]').remove()
        }, window.onLoginStateChange = onLoginStateChange, window.markNewsAsRead = function() {
            $(".user-picture .notifications-counter").hide().addClass("hide"), $(".notifications-counter.counter").removeClass("new").text("0"), TVXWindowEvents.emit("zero-notification-counter")
        }, window.followButtonTooltip = function(t) {
            var e = t.hasClass("unfollow") ? $.t("Unfollow") : $.t("Follow");
            t.attr("title", e)
        }, TradingView.followButtonToolipAll = function() {
            $(".follow-link").each(function(t, e) {
                e = $(e), e.data("tv_tooltip") || window.followButtonTooltip(e)
            })
        }, TradingView.getSavedChartsList = function(t) {
            return Featuresets.enabled("charting_library_base") ? ChartingLibraryBackend.getCharts(t) : $.getJSON("/my-charts/", t)
        }, window.isOnChartEditPage = function() {
            var t = RegExp(TradingView.urlRegExp.publishedChartOld),
                e = RegExp(TradingView.urlRegExp.publishedChart),
                i = RegExp(TradingView.urlRegExp.publishedScript);
            return t.test(location.pathname) || e.test(location.pathname) || i.test(location.pathname)
        }, window.refreshChartMenuState = function() {
            function t() {
                r.hide(), o.show()
            }

            function e() {
                o.hide(), r.show()
            }

            function i() {
                is_authenticated && user.saved_charts ? e() : t()
            }

            function n(e) {
                var i, n = __webpack_require__(18),
                    o = __webpack_require__(333).SidebarCustomScroll;
                return e = {
                    charts: e
                }, e.charts && e.charts.length ? (s.empty(), s.append(Mustache.render(n.lists.savedCharts, e)), i = new o(s, s.find("ul").eq(0), {
                    additionalClass: "gray",
                    alwaysVisible: !0
                }), s.parent().one("hover", function() {
                    i.updateScrollBar()
                }), void s.find("li").each(function(e, i) {
                    i = $(i);
                    var n = i.find(".name").text();
                    n.length > 20 && i.attr("title", n), $("span.icon", i).click(function(e) {
                        var i = $(this).data("id");
                        return s.mouseleave(), TradingView.deleteChart(i, function() {
                            user.saved_charts--;
                            var i = $(e.target).parent().attr("href");
                            $(e.target).parent().parent().remove(), user.saved_charts || t(), !window.isOnChartEditPage() || user.saved_charts && "/chart/" + chartWidget.metaInfo().uid + "/" !== i || (location.href = "/chart/")
                        }), !1
                    })
                })) : void t()
            }
            var o = $(".header-button.header-item-chart"),
                r = $(".header-menu.header-item-chart"),
                s = r.find(".popup-subblock");
            r.length && s.length && (r.on("closeMenu", function() {
                s.empty()
            }), r.on("openMenu", function() {
                TradingView.getSavedChartsList(n)
            }), i())
        }, TradingView.urlizeAndParseQuotesAndClean = function(t, e) {
            var i, n = __webpack_require__(334);
            return e = e || [], i = new n.UrlizeBuffer(TradingView.clean(t)), i = n.obsceneWords(i), i.text = TradingView.parseQuotes(i.text), n.chainedUrlize(i, n.deprecatedUrlizeFunctors.concat(e))
        },
            function(t) {
                jQuery.fn.putCursorAtEnd = function() {
                    return this.each(function() {
                        if (t(this).focus(), this.setSelectionRange) {
                            var e = 2 * t(this).val().length;
                            this.setSelectionRange(e, e)
                        } else t(this).val(t(this).val());
                        this.scrollTop = 999999
                    })
                }, jQuery.fn.putCursorAtPosition = function(e) {
                    return this.each(function() {
                        t(this).focus(), this.setSelectionRange && this.setSelectionRange(e, e)
                    })
                }
            }(jQuery), TradingView.ShareTwitterSnapshot = function(t) {
            function e(t) {
                return window.location.protocol + "//" + window.location.host + "/x/" + t + "/"
            }

            function i(t, i) {
                return "https://twitter.com/intent/tweet?&status=" + encodeURIComponent(TradingView.ShareTwitterSnapshot.getStatus(t, e(i)))
            }
            var n, o, r, s = __webpack_require__(338);
            TradingView.winMobileMode ? (this.onSuccess = function(e) {
                try {
                    s.sendEvent(i(t, e), "sharing_ready")
                } catch (n) {}
            }, this.onFailure = function() {
                try {
                    s.sendEvent("sharing_error")
                } catch (t) {}
            }) : (n = 550, o = 420, r = open("about:blank", "snapshot_tweet", "scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=" + n + ",height=" + o + ",left=" + Math.round(screen.width / 2 - n / 2) + ",top=" + Math.round(screen.height / 2 - o / 2)), this.onSuccess = function(e) {
                r.location.href = i(t, e)
            }, this.onFailure = function() {
                r.close()
            })
        }, TradingView.ShareTwitterSnapshot.getStatus = function(t, e) {
            var i;
            return i = TradingView.isCmeWidget ? e + " from cmegroup.com via @tradingview $" + t : "$" + t + " chart " + e + " via http://www.tradingview.com"
        }, TradingView.ShareStocktwitsSnapshot = function(t) {
            function e(t) {
                return window.location.protocol + "//" + window.location.host + "/x/" + t + "/"
            }

            function i(t, i) {
                return "https://stocktwits.com/widgets/share?body=" + encodeURIComponent(TradingView.ShareStocktwitsSnapshot.getStatus(t, e(i)))
            }
            var n, o, r, s = __webpack_require__(338);
            TradingView.winMobileMode ? (this.onSuccess = function(e) {
                try {
                    s.sendEvent(i(t, e), "sharing_ready")
                } catch (n) {}
            }, this.onFailure = function() {
                try {
                    s.sendEvent("sharing_error")
                } catch (t) {}
            }) : (n = 550, o = 420, r = open("about:blank", "snapshot_tweet", "scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=" + n + ",height=" + o + ",left=" + Math.round(screen.width / 2 - n / 2) + ",top=" + Math.round(screen.height / 2 - o / 2)), this.onSuccess = function(e) {
                r.location.href = i(t, e)
            }, this.onFailure = function() {
                r.close()
            })
        }, TradingView.ShareStocktwitsSnapshot.getStatus = function(t, e) {
            return "$" + t + " chart " + e + " via http://www.tradingview.com"
        }, TradingView.authInStocktwits = function(t) {
            runOrSignIn(function() {
                if (user.has_stocktwits) "function" == typeof t && t();
                else {
                    "function" == typeof t && (user.on_stocktwits_auth_success = function() {
                        var e = this;
                        t.apply(e, Array.prototype.slice.call(arguments)), e.user.on_stocktwits_auth_success && delete e.user.on_stocktwits_auth_success
                    }.bind(window));
                    var e = window.open("https://api.stocktwits.com/api/2/oauth/authorize?client_id=" + window.stocktwits_consumer_key + "&response_type=code&redirect_uri=" + location.protocol + "//" + location.host + "/accounts/return/stocktwits/&scope=publish_messages", "stocktwits_permission_request", "scrollbars=yes,height=400,width=700");
                    e.focus()
                }
            }, {
                source: "StockTwits auth"
            })
        }, TradingView.agoDateFormatter = function(t, e, i) {
            var n, o, r, s, a;
            i ? (r = i(new Date - e), n = r.text, o = r.timeout) : (s = moment(new Date).diff(e), n = moment(e).fromNow(), o = TradingView.agoDateFormatter.getUpdateTimeout(s), t.parent().toggleClass("just-now", 45e3 > s)), t.attr("title", e.toLocaleString()).text(n), a = null, o && (t.attr("data-ago-date-timer") && clearTimeout(+t.attr("data-ago-date-timer")), a = setTimeout(function() {
                TradingView.agoDateFormatter(t, e, i)
            }, o)), t.attr("data-ago-date-timer", a)
        }, TradingView.agoDateFormatter.destroy = function(t) {
            $(t).find("*").andSelf().filter("[data-ago-date-timer]").each(function() {
                clearTimeout(+$(this).attr("data-ago-date-timer"))
            })
        }, TradingView.agoDateFormatter.nextMinuteThrough = function(t) {
            var e = 6e4;
            return e - t % e
        }, TradingView.agoDateFormatter.nextHourThrough = function(t) {
            var e = 36e5;
            return e - t % e
        }, TradingView.agoDateFormatter.nextDayThrough = function(t) {
            var e = 864e5;
            return e - t % e
        }, TradingView.agoDateFormatter.getUpdateTimeout = function(t) {
            var e = 200;
            if (t = Math.floor(t / 6e4), 60 > t) e += TradingView.agoDateFormatter.nextMinuteThrough(t);
            else if (1440 > t) e += TradingView.agoDateFormatter.nextHourThrough(t);
            else {
                if (!(43200 > t)) return !1;
                e += TradingView.agoDateFormatter.nextDayThrough(t)
            }
            return e
        }, TradingView.agoDateFormatter.fullFormat = function(t) {
            var e, i = Math.floor(t / 6e4),
                n = !1;
            return 60 > i ? n = TradingView.agoDateFormatter.nextMinuteThrough(t) : 1440 > i ? n = TradingView.agoDateFormatter.nextHourThrough(t) : 43200 > i && (n = TradingView.agoDateFormatter.nextDayThrough(t)), n && (n += 200), e = new Date - t, {
                text: moment(e).fromNow(),
                timeout: n
            }
        }, TradingView.agoDateFormatter.shortFormat = function(t) {
            var e = Math.floor(t / 6e4),
                i = "",
                n = !1;
            return 60 > e ? (i = (1 > e ? 0 : e) + $.t("m"), n = TradingView.agoDateFormatter.nextMinuteThrough(t)) : 1440 > e ? (e = Math.floor(e / 60), i = e + $.t("h"), n = TradingView.agoDateFormatter.nextHourThrough(t)) : 43200 > e ? (e = Math.floor(e / 1440), i = e + $.t("d"), n = TradingView.agoDateFormatter.nextDayThrough(t)) : 15768e3 > e ? (e = Math.floor(e / 43200), i = e + $.t("mn")) : (e = Math.floor(e / 15768e3), i = e + $.t("y")), n && (n += 200), {
                text: i,
                timeout: n
            }
        }, window.userlink = userlink, window.proBadge = proBadge, TradingView.userBadge = function(t, e, i) {
            var n = "",
                o = "",
                r = __webpack_require__(18);
            if (t.top_user_info) {
                if (n = t.top_user_info.badge ? t.top_user_info.badge.title : "", o = t.top_user_info.badge ? t.top_user_info.badge["class"] : "", t.is_pro) switch (n += " | ", t.pro_plan) {
                    case "pro_realtime_trial":
                        n += $.t("Pro Trial");
                        break;
                    case "pro_premium":
                        n += $.t("Premium");
                        break;
                    default:
                        n += $.t("Pro")
                }
                t.is_moderator && (n += " | " + $.t("Moderator"))
            }
            return Mustache.render(t.userBadgeTmpl || r.userBadge, {
                is_moderator: t.is_moderator,
                is_pro: t.is_pro,
                is_realtime: "pro_realtime" === t.pro_plan,
                is_premium: "pro_premium" === t.pro_plan,
                is_trial: "pro_realtime_trial" === t.pro_plan,
                is_top: !!t.top_user_info,
                badge_class: o,
                badge_title: n,
                large_badge: !!e,
                badge_tag: i
            }, r)
        },
            function() {
                function t() {
                    var t = $(".publish-chart-button");
                    t.size() && (t.addClass("process"), n = setTimeout(e, 3e4))
                }

                function e() {
                    clearTimeout(n), $(".publish-chart-button").removeClass("process")
                }

                function i(i, n) {
                    function o() {
                        n === !0 ? window.saver.publishChart(i) : TVDialogs.showPublishIntroDialog().done(window.saver.publishChart.bind(window.saver, i))
                    }
                    runOrSignIn(function() {
                        var i = function() {
                            var t = TradingView.getUrlParams();
                            return !(!t.publishsource || !~t.publishsource.toLowerCase().indexOf("dailyfx"))
                        }();
                        i ? o() : (t(), TradingView.phoneVerification.whenVerified({
                            showDialog: !0,
                            source: "Publish chart"
                        }).done(o).always(e))
                    }, {
                        source: "Publish chart",
                        sourceMeta: "Chart"
                    })
                }
                var n;
                TradingView.Common = {
                    publishChartWidget: function(t) {
                        i(t, !0)
                    },
                    publishChart: i
                }
            }(), TradingView.symbol2id = function(t) {
            return t.replace(/[^a-z0-9]/gi, "_")
        }, TradingView.isPro = function() {
            return is_authenticated && user.is_pro
        }, TradingView.isProRealtime = function() {
            return this.isPro() && ("pro_realtime" === user.pro_plan || "pro_realtime_trial" === user.pro_plan)
        }, window.updateChartActiveLabel = function(t, e) {
            null == t && (t = $(".chart-activity-label")), t = $(t), t.each(function() {
                var t, i = $(this);
                null == e ? t = i.hasClass("chart-activity-label-active") : (t = e, i.toggleClass("chart-activity-label-active", t)), i.find(".chart-activity-label-plate").text(t ? $.t("Active") : $.t("Closed"))
            })
        }, TradingView.centerBlock = function(t) {
            var e = $(window),
                i = t.width(),
                n = t.height(),
                o = e.width(),
                r = e.height();
            t.css({
                left: Math.round((o - i) / 2) + "px",
                top: Math.round((r - n) / 2) + "px"
            })
        }, TradingView.visitPaymentPageSwreg = function(t, e) {
            if (!t.product_ids.hasOwnProperty(e)) throw new TypeError("Unknown product");
            runOrSignIn(function() {
                var i, n;
                e in {
                    pro: 1,
                    pro_yearly: 1,
                    pro_realtime: 1,
                    pro_realtime_yearly: 1
                } && user.is_pro && user.pro_plan === e || (i = {
                    s: t.shop_id,
                    q: 1,
                    d: 0,
                    v: 0,
                    bb: 1,
                    clr: 1,
                    clro: 1,
                    a: user.id,
                    fn: user.first_name,
                    sn: user.last_name,
                    em: user.email,
                    p: t.product_ids[e]
                }, n = Object.keys(i).map(function(t) {
                    return encodeURIComponent(t) + "=" + encodeURIComponent(i[t])
                }), location.href = t.shop_url.replace(/(\?.*|$)/, "?" + n.join("&")))
            }, {
                source: "Swreg payment"
            })
        }, TradingView.visitPaymentPage = function(t, e, i) {
            e = e || "y", i = i || {};
            var n = "/order/";
            "bitcoin" === i.paymentMethod && (n = "/coinbase/begin/"), runOrSignIn(function() {
                var o = $('<form action="' + n + '" method="post"' + (i.newWindow ? ' target="_blank"' : "") + '><input type="hidden" name="product" value="' + t + '"/><input type="hidden" name="billing_cycle" value="' + e + '"/><input type="hidden" name="fixed_billing_cycle" value="' + (i.fixedCycle ? "true" : "") + '"/><input type="hidden" name="exchanges_only" value="' + (i.exchangesOnly ? "true" : "") + '"/><input type="hidden" name="is_upgrade_from_m" value="' + (i.upgradeFromM ? "true" : "") + '"/></form>').appendTo(document.body);
                o.submit()
            }, {
                source: "Paypal payment"
            })
        }, TradingView.hash = function(t) {
            var e, i, n = 0;
            if (0 === t.length) return n;
            for (i = 0; i < t.length; i++) e = t.charCodeAt(i), n = (n << 5) - n + e, n &= n;
            return n
        }, TradingView.uniq = function(t) {
            return t.reduce(function(t, e, i) {
                return ~t.indexOf(e) ? null : t.push(e), t
            }, [])
        }, window.bindLate = function(t, e) {
            return function() {
                return t[e].apply(t, arguments)
            }
        }, TradingView.memoize = function(t, e) {
            var i = function(n) {
                var o = i.cache,
                    r = "" + (e ? e.apply(this, arguments) : n);
                return o.hasOwnProperty(r) || (o[r] = t.apply(this, arguments)), o[r]
            };
            return i.cache = {}, i
        }, TradingView.debounce = function(t, e) {
            var i;
            return function() {
                clearTimeout(i), i = setTimeout(t.bind.apply(t, [this].concat(Array.prototype.slice.call(arguments))), e)
            }
        }, TradingView.throttle = function(t, e, i) {
            var n, o, r, s, a = null,
                l = 0;
            return i || (i = {}), s = function() {
                l = i.leading === !1 ? 0 : Date.now(), a = null, r = t.apply(n, o), a || (n = o = null)
            },
                function() {
                    var c, h = Date.now();
                    return l || i.leading !== !1 || (l = h), c = e - (h - l), n = this, o = arguments, 0 >= c || c > e ? (a && (clearTimeout(a), a = null), l = h, r = t.apply(n, o), a || (n = o = null)) : a || i.trailing === !1 || (a = setTimeout(s, c)), r
                }
        }, TradingView.isLatin = function(t) {
            return !/[^\u0000-\u00FF\u00A0\u2013-\u2122\u2200-\u23FF]/g.test(t)
        }, TradingView.isASCII = function(t, e) {
            return (e ? /^[\x00-\xFF]*$/ : /^[\x00-\x7F]*$/).test(t)
        }, TradingView.RegExpEscape = function(t) {
            return t.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&")
        }, TradingView.loadMorePeople = function(t, e, i) {
            var n, o, r = e.$loading || $(),
                s = e.$button || $(),
                a = e.$container;
            r.show(), s.hide(), n = i ? 0 : a.children().length, t.data = t.data || {}, t.data = $.extend({}, t.data, {
                offset: n
            }), $.ajax(t).done(function(t) {
                var n = t.total,
                    r = t.items;
                i && (a.data("loaded", !1), a.empty()), r.length > 0 ? r.forEach(function(t) {
                    t.follow_button = !is_authenticated || user.id !== t.id, t.links = t.profile.location || t.profile.twitter_username || t.profile.website, t.badge = TradingView.userBadge(t, !0), t.reputation_delta && (t.reputation_delta = Math.round(t.reputation_delta));
                    var e = $(Mustache.render(o, t));
                    e.appendTo(a)
                }) : i && e.empty && a.append($('<div class="empty"></div>').text(e.empty)), a.children().length < n && s.show(), t.thats_all && a.data("loaded", !0)
            }).always(function() {
                r.hide()
            }), o = "<div class='item follow-list-item'>	<a href='/u/{{ username }}/'><img src='{{ mid_picture_url}}'></a>	<div class='indent'>	<div class='description'>		<div class='user-stats'>			<span class='user-stats-followers' title='" + $.t("Followers") + "'><a href='/u/{{ username }}/#followers'>{{ followers_count }}</a></span>			<span class='user-stats-charts' title='" + $.t("Charts") + "'><a href='/u/{{ username }}/#charts'>{{ charts_count }}</a></span>			<span class='user-stats-reputation' title='" + $.t("Reputation") + "'>{{ reputation }}{{# reputation_delta }} (+{{reputation_delta}}){{/ reputation_delta }}</span>		</div>		<div class='username'><a href='/u/{{ username }}/' class='userlink'>{{ username }}</a>{{& badge }}</div>		{{# links }}		<div class='links'>			{{# profile.location }}<span class='contact location'>{{ profile.location }}</span>{{/ profile.location }}			{{# profile.twitter_username }}<span class='contact twitter'><a href='//twitter.com/{{ profile.twitter_username }}' target='_blank' rel='nofollow'>{{ profile.twitter_username }}</a></span>{{/ profile.twitter_username }}			{{# profile.website }}<span class='contact webpage'><a href='{{ profile.website }}' target='_blank' rel='nofollow'>{{ profile.website }}</a></span>{{/ profile.website }}		</div>		{{/ links }}		{{# profile.about }}		<div class='about'>{{ profile.about }}</div>		{{/ profile.about }}		{{# follow_button }}	</div>		<div class='action-buttons'>			<button class='follow-user follow-user-{{ id }}{{# follow_status }} active{{/ follow_status }}'  title='{{#follow_status}}" + $.t("Unfollow") + "{{/follow_status}}{{^follow_status}}" + $.t("Follow") + "{{/follow_status}}' data-id='{{ id }}'>				<span class='follow'>" + $.t("Follow") + "</span>				<span class='following'>" + $.t("Followed") + "</span>				<span class='unfollow'>" + $.t("Unfollow") + "</span>			</button> 			<button class='message-user message active' title='" + $.t("Send") + " message' data-id='{{ id }}' data-username='{{ username }}'><span class='message'>" + $.t("Message") + "</span></button>		</div>		{{/ follow_button }}	</div></div>"
        }, window.follow = function(t) {
            runOrSignIn(function() {
                var e, i = $(t.currentTarget),
                    n = i.data("id");
                i.is(".self") || (e = i.is(".active") ? 0 : 1, $.ajax({
                    url: "/social/follow-the-user/",
                    type: "POST",
                    data: {
                        targetId: n,
                        follow: e
                    }
                }).done(function(t) {
                    return !t || t.error ? void TVDialogs.showNotice($.t("Oops, something went wrong"), t.error) : void $(".follow-user-" + n).toggleClass("active").attr("title", e ? $.t("Unfollow") : $.t("Follow"))
                }))
            }, {
                source: "Follow user",
                verifiedPhoneRequired: !0,
                verifyPhoneMessage: $.t("Verified phone number required to follow users.")
            })
        }, $("body").on("click", "button.follow-user", window.follow), TradingView.keyboardBinder = function() {
            function t(t) {
                o.forEach(function(e, i) {
                    e.name === t && o.splice(i, 1)
                })
            }

            function e(t) {
                for (var e = 0; e < o.length; e++)
                    if (o[e].name === t) return e
            }

            function i(t) {
                var i = e(t.name);
                i ? o[i] = t : o.push(t)
            }

            function n(t) {
                var i = e(t.name);
                i && o.splice(i, 1), o.unshift(t)
            }
            var o = [];
            return $(window).on("keypress", function(t) {
                for (var e = o.length - 1; e >= 0 && o[e].func(t) !== !0; e--);
            }), {
                registerListener: function(t, e) {
                    i({
                        name: t,
                        func: e
                    })
                },
                removeListener: function(e) {
                    t(e)
                },
                pushBackListener: function(t, e) {
                    n({
                        name: t,
                        func: e
                    })
                }
            }
        }(), window.chartRelationButtons = function(t) {
            var e = t.closest("[data-chart-id]").data("chart-id");
            if (!e) throw Error("chartRelationButtons can`t find data-chart-id attribute");
            t.on("click", ".agree", function(t) {
                function i() {
                    n.toggleClass("active", o)
                }
                var n, o;
                t.preventDefault(), n = $(this), o = n.hasClass("active"), runOrSignIn(function() {
                    n.toggleClass("active", !o), $.post("/vote-for-chart/", {
                        id: e,
                        vote: 1
                    }).done(function(t) {
                        return t.error ? (TVDialogs.showNotice("Error", t.error), i()) : void(void 0 !== t.result_score && n.text(t.result_score || "").toggleClass("with-counter", 0 !== t.result_score))
                    }).fail(i)
                }, {
                    source: "Chart agree"
                })
            }), t.on("click", ".fav", function(t) {
                function i() {
                    n.toggleClass("active", o)
                }
                var n, o;
                t.preventDefault(), n = $(this), o = n.hasClass("active"), runOrSignIn(function() {
                    n.toggleClass("active", !o);
                    var t = o ? "/remove-from-favorites/" : "/add-to-favorites/";
                    $.post(t, {
                        id: e
                    }).done(function(t) {
                        return t.error ? i() : void(void 0 !== t.followers && n.text(t.followers || "").toggleClass("with-counter", 0 !== t.followers))
                    }).fail(i)
                }, {
                    source: "Chart favorite"
                })
            })
        }, TradingView.makeTextContainerEditable = function(t, e, i) {
            function n(e) {
                t.removeClass("tv-editable-active").on("click", function() {
                    a(i)
                }).off("mousedownoutside"), e && t.empty().text(e)
            }

            function o(e) {
                var e = e;
                t.addClass("tv-editable-active").off("click").on("mousedownoutside", function() {
                    n(e)
                })
            }

            function r() {
                l && l.remove()
            }

            function s(e) {
                r(), e && (l = $('<div class="settings"><div class="error"><p></p></div></div>').find("p").text(e).end(), t.before(l))
            }

            function a(i) {
                var a, l, c, h, d, u, p, f, _ = {
                    okButtonText: $.t("OK"),
                    okButtonClass: "_tv-button ok",
                    cancelButtonText: $.t("Cancel"),
                    cancelButtonClass: "_tv-button cancel"
                };
                i = $.extend({}, _, i), a = t.text(), l = Modernizr.touch ? "" : a, c = "textarea" === i.replaceWith ? $("<textarea " + (i.inputClass ? 'class="' + i.inputClass + '" ' : "") + (i.maxLength ? 'maxlength="' + i.maxLength + '" ' : "") + "></textarea>") : $('<input type="text" ' + (i.inputClass ? 'class="' + i.inputClass + '" ' : "") + (i.maxLength ? 'maxlength="' + i.maxLength + '" ' : "") + 'value="">'), c.val(l), h = $('<div class="buttons"></div>'), d = $('<div class="' + i.okButtonClass + '">' + i.okButtonText + "</div>").appendTo(h), u = $('<div class="' + i.cancelButtonClass + '">' + i.cancelButtonText + "</div>").appendTo(h), o(a), p = "function" == typeof i.onCancel ? function() {
                    i.onCancel(), n()
                } : function() {
                    n(a)
                }, f = function(t, i, o) {
                    /^\s+$/.test(i) && (i = ""), c.attr("disabled", "disabled"), d.addClass("process"), e(t, i, o, function() {
                        n()
                    }, r, s)
                }, d.click(function(e) {
                    e.preventDefault(), e.stopPropagation(), f(t, c.val(), a)
                }), u.click(function(t) {
                    t.preventDefault(), t.stopPropagation(), p()
                }), c.keyup(function(e) {
                    e.preventDefault(), e.stopPropagation(), 13 !== e.keyCode || e.shiftKey ? 27 === e.keyCode && p() : f(t, c.val(), a)
                }), t.empty().append(c, h), c.select()
            }
            var l;
            return !t instanceof $ ? void console.error("$container should be jQuery object") : e ? "function" != typeof e ? void console.error("onOk should be function") : (t.addClass("tv-editable"), void n()) : void console.error("onOk required")
        }, TradingView.changeUserProfileField = function(t) {
            function e(t) {
                var e = Array.prototype.slice.call(arguments);
                e.shift(), "function" == typeof t && t.apply(this, e)
            }
            var i, n;
            return t && t.name && void 0 !== t.value ? (i = {}, i[t.name] = t.value, n = "status" !== t.name ? "/accounts/change_data_json/" : "/accounts/change_status/", void $.post(n, i, function(i) {
                if (!i.errors || $.isEmptyObject(i.errors)) {
                    var n = i[t.name];
                    user[t.name] = n, e(t.onSuccess, n)
                } else e(t.onError, i.errors[t.name])
            }).error(function(i) {
                var n = __webpack_require__(51);
                403 === i.status ? e(t.onError, $.t("Please, try to reload page to edit user data")) : e(t.onError, n.isProd() ? $.t("Sorry, an error has occurred") : i.responseText)
            }).always(function() {
                e(t.onComplete)
            })) : void console.warn("Required options.name and options.value")
        }, TradingView.inputOnTyping = function(t, e, i) {
            function n() {
                var t = $(this),
                    n = t.val(),
                    o = e(n);
                t.removeClass("_tv-dialog-text-input-error"), "function" == typeof i && i(n), n !== o && t.val(o)
            }

            function o(t) {
                if (t.ctrlKey) return !1;
                if (t.metaKey) return !1;
                if (!t.charCode) return !1;
                var e = t.keyCode || t.which;
                return 9 === e ? !1 : 13 === e ? !1 : 16 === e ? !1 : 17 === e ? !1 : 18 === e ? !1 : 19 === e ? !1 : 20 === e ? !1 : 27 === e ? !1 : !(e >= 33 && 40 >= e)
            }
            return t instanceof $ ? ("function" != typeof e && (e = function(t) {
                return t
            }), void t.each(function(t, e) {
                var i = $(e);
                i.on("keypress", function(t) {
                    if (o(t)) {
                        var e = function() {
                            n.call(this), $(this).off("keyup", e)
                        }.bind(this);
                        $(this).on("keyup", e)
                    }
                }), i.change(n)
            })) : void console.warn("'$inputs' should be instance of jQuery")
        }, TradingView.makeInputNumberOnly = function(t, e) {
            var i, n;
            e = e || {}, i = e.integerOnly, n = e.positiveOnly, TradingView.inputOnTyping(t, function(t) {
                var o = t.replace(/\,/g, ".").replace(/[^0-9\.-]/g, "").replace(/^-/, n ? "" : "__minus__").replace(/\./, "__point__").replace(/^__point__/, "0__point__").replace(/[\.-]/g, "").replace("__minus__", "-").replace("__point__", ".").replace(/^0+/, "0");
                return i && /\d+/.test(o) && (o = parseInt(o), TradingView.isInteger(e.minValue) && (o = Math.max(e.minValue, o)), TradingView.isInteger(e.maxValue) && (o = Math.min(e.maxValue, o))), !i && /^0\d/.test(o) && (o = "" + o, o = o.substring(0, 1) + "." + o.substring(1, o.length)), o
            }, e.inputOnTypingCallback)
        }, TradingView.makeInputDateOnly = function(t, e) {
            function i(t) {
                return 4 !== t.length && 7 !== t.length || (t += "-"), t = t.substr(0, 10)
            }
            var e = e || {};
            TradingView.inputOnTyping(t, i, e.inputOnTypingCallback)
        }, TradingView.makeInputTimeOnly = function(t, e) {
            function i(t) {
                return 2 === t.length && (t += ":"), t = t.substr(0, 5)
            }
            var e = e || {};
            TradingView.inputOnTyping(t, i, e.inputOnTypingCallback)
        }, TradingView.timezoneIsAvailable = function(t) {
            var e, i = __webpack_require__(13).availableTimezones;
            for (e = 0; e < i.length; e++)
                if (t === i[e].id) return !0;
            return !1
        }, TradingView.parseSessionHours = function(t, e) {
            function i(t, i, o) {
                var r, s, a, l, c, h, d, u, p, f, _, g = [];
                if (o.openEveryDay) g = [0, 1, 2, 3, 4, 5, 6];
                else if (o.openOnDays)
                    for (r = o.openOnDays, s = 0; s < r.length; s++) g.push(parseInt(r[s]) - 1);
                else g = [1, 2, 3, 4, 5];
                for (a = function(t) {
                    return 60 * parseInt(t[0], 10) + parseInt(t[1], 10)
                }, l = a(t), c = a(i), h = l && l >= c, h && 0 !== g[0] && g.unshift(0), d = "", u = [], p = g[0] - 1, f = g.length, s = 0; f > s; s++) p + 1 < g[s] || s + 1 === f ? (d += n + moment.weekdaysMin(g[s]), u.push(d), d = "") : d || (d = moment.weekdaysMin(g[s])), p = g[s];
                return _ = "{0}:{1}{2}{3}:{4}".format(t[0], t[1], n, i[0], i[1]), u.map(function(t) {
                    return t + e + _
                })
            }
            var n, o, r, s, a;
            return e = e || "Â ", n = "-", t ? "24x7" === t ? i(["00", "00"], ["00", "00"], {
                openEveryDay: !0
            }) : (o = /([0-2]\d)([0-5]\d)-([0-2]\d)([0-5]\d)(?:\:(\d+))?/, (r = o.exec(t)) ? (s = [r[1], r[2]], a = [r[3], r[4]], i(s, a, {
                openOnDays: r[5]
            })) : {}) : {}
        }, TradingView.parseTzOffset = function(t) {
            var e = PineJsCalendar.get_timezone(t).offset_utc(Date.now()),
                i = "",
                n = e / 1e3 / 60 / 60;
            return n % 1 && (i = ":" + 60 * (n % 1)), n = n > 0 ? "+" + (n - n % 1) + i : 0 === n ? "" : "" + (n - n % 1) + i, {
                offset: e,
                string: "UTC" + n
            }
        }, TradingView.getTzByObsoleteName = function(t) {
            return {
                    UTC: "Etc/UTC",
                    EST: "America/New_York",
                    CST: "America/Chicago",
                    PST: "America/Los_Angeles"
                }[t] || "exchange"
        }, availableTimezones = __webpack_require__(13).availableTimezones;
        for (i = 0; i < availableTimezones.length; i++) - 1 === ["Etc/UTC", "exchange"].indexOf(availableTimezones[i].id) && (availableTimezones[i].title = "(" + TradingView.parseTzOffset(availableTimezones[i].id).string + ") " + availableTimezones[i].title);
        TradingView.showChangeUserStatusDialog = function() {
            return runOrSignIn(function() {
                TVDialogs.showChangeUserStatusDialog()
            }, {
                source: "Change status"
            }), !1
        }, TradingView.getUrlParams = function() {
            for (var t = /\+/g, e = /([^&=]+)=?([^&]*)/g, i = function(e) {
                return decodeURIComponent(e.replace(t, " "))
            }, n = window.location.search.substring(1), o = {}, r = e.exec(n); r;) o[i(r[1])] = i(r[2]), r = e.exec(n);
            return o
        }, TradingView.createUrlParams = function(t) {
            var e, i = [];
            for (e in t) t.hasOwnProperty(e) && null != t[e] && i.push(encodeURIComponent(e) + "=" + encodeURIComponent(t[e]));
            return i.join("&")
        }, TradingView.setTrialAvailiable = function(t) {
            TVLocalStorage.setItem("trial_availiable", t ? 1 : 0)
        }, TradingView.translatedIntervalString = function(t) {
            var e = ("" + t).match(/(.*)([DWM])/);
            return e ? e[1] + $.t(e[2], {
                context: "dates"
            }) : t
        }, TradingView.capitalizeFirstLetter = function(t) {
            return t.charAt(0).toUpperCase() + t.slice(1)
        }, TradingView.generateColor = function(t, e, i) {
            var n, o, r = __webpack_require__(61).RGBColor;
            if (!TradingView.isHexColor(t)) return i ? (e = e || 0, TradingView.rgbaComp(TradingView.rgbDecomp(t), 1 - e / 100)) : t;
            if (e >= 0 && 100 >= e) return n = new r(t), o = 1 - e / 100, "rgba(" + n.r + ", " + n.g + ", " + n.b + ", " + o.toFixed(2) + ")";
            throw Error("invalid transparency")
        }, TradingView.decompNamedColor = function(t) {
            switch (t) {
                case "white":
                    return [255, 255, 255];
                case "black":
                    return [0, 0, 0];
                case "red":
                    return [255, 0, 0];
                case "blue":
                    return [0, 255, 0];
                case "green":
                    return [0, 0, 255]
            }
        }, TradingView.rgbComp = function(t, e, i) {
            return 2 in arguments || (i = t[2], e = t[1], t = t[0]), "rgb(" + [~~t, ~~e, ~~i].join(", ") + ")"
        }, TradingView.resetTransparency = function(t) {
            return TradingView.isHexColor(t) ? t : TradingView.rgbaComp(TradingView.rgbDecomp(t), 1)
        }, TradingView.rgbDecomp = function(t) {
            return TradingView.decompNamedColor(t) || t.match(/[0-9]+/g).splice(0, 3)
        }, TradingView.isHexColor = function(t) {
            return !!~t.indexOf("#")
        }, TradingView.hexRgbDecomp = function(t) {
            return 7 === t.length ? [parseInt(t.slice(1, 3), 16), parseInt(t.slice(3, 5), 16), parseInt(t.slice(5, 7), 16)] : 4 === t.length ? [parseInt(t.slice(1, 2) + t.slice(1, 2), 16), parseInt(t.slice(2, 3) + t.slice(2, 3), 16), parseInt(t.slice(3, 4) + t.slice(3, 4), 16)] : void 0
        }, TradingView.rgbaComp = function(t, e, i, n) {
            return 2 in arguments || (n = e, i = t[2], e = t[1], t = t[0]), null == n && (n = 1), "rgba(" + [~~t, ~~e, ~~i, n].join(", ") + ")"
        }, TradingView.generateLowBrightnessColor = function(t) {
            var e, i;
            return e = TradingView.isHexColor(t) ? TradingView.hexRgbDecomp(t) : TradingView.rgbDecomp(t), i = e.map(function(t) {
                return t > 50 ? t - 50 : 0
            }), TradingView.rgbComp(i)
        }, TradingView.defaultColorPickersBorder = "#727272", TradingView.pow10Increment = function(t, e, i) {
            var n, o = 1;
            return 0 > t && (o = -1, e = !e), i = Math.abs(i), isFinite(i) || (i = 1), t = Math.abs(t), n = Math.pow(10, Math.floor(Math.log(t) / Math.LN10)) || i || 0, t >= 10 * n && (n *= 10), e && t === n && (n /= 10), i > n && (n = i), e ? Math.ceil(t / n - 1) * n * o : Math.floor(t / n + 1) * n * o
        }, TradingView.abbreviatedNumber = function(t) {
            var e, i = 0,
                n = +t;
            if (isFinite(n))
                for (; n >= 1e3 && n % 100 === 0;) i++, n /= 1e3;
            return e = ["", "K", "M", "G", "T", "Y"][i], null == e && (e = "e" + 3 * i), n + e
        }, TradingView.makeFont = function(t, e, i) {
            return i && (i += " "), i + t + "px " + e
        }, $.fn.appendUtm = function(t, e) {
            return this.each(function() {
                var i = $(this);
                null != t && ($("<input>").attr("type", "hidden").attr("name", "utm_source").val(t).appendTo(i), $("<input>").attr("type", "hidden").attr("name", "utm_medium").val(e).appendTo(i))
            }), this
        }, $.fn.filterByData = function(t, e) {
            return this.filter(function() {
                return $(this).data(t) === e
            })
        }, $.fn.reverse = [].reverse, window.showExtensionPopup = function() {
            $(function() {
                function t(t) {
                    TVDialogs.modalDialog ? TVDialogs.modalDialog.find("._tv-dialog").on("destroy", function() {
                        setTimeout(t, 0)
                    }) : t()
                }
                var e, i, n;
                window.is_authenticated && TradingView.isFeatureEnabled("show_extension_popup") && Featuresets.enabled("show_extension_popup") && !TradingView.isOnFeaturePage && (i = function() {
                    var t = window.chrome,
                        e = window.navigator.vendor;
                    return null !== t && void 0 !== t && "Google Inc." === e
                }(), i && (e = "chrome"), e && (n = "notShowExtensionPopup." + e, TVSettings.getBool(n, !1) || t(function() {
                    var t = TVDialogs.showBrowserExtensionDialog(e);
                    t.find("._tv-dialog").on("destroy", function() {
                        TVSettings.setValue(n, !0)
                    })
                })))
            })
        }, $.fn.TVEmbeds = function() {
            var t = __webpack_require__(314);
            return this.each(function() {
                var e = $(this);
                e.find(".embeded-image a").fancybox({
                    type: "image"
                }), e.on("click", ".embeded-chart-image a", function(e) {
                    var i = $(e.target).attr("title"),
                        n = TradingView.parsePublishedChartUrl(this.href),
                        o = new t.ChartPage(n.image_url, i, this.href, n.symbol);
                    return o && TradingView.historyManager.push(o), !1
                })
            }), this
        }, TradingView.removeBBCodes = function(t) {
            return t.replace(RegExp(TradingView.quotesRe.openingTag, "gi"), $.t("@$1 wrote") + ":\n").replace(RegExp(TradingView.quotesRe.closingTag, "gi"), "")
        }, TradingView.quotesRe = {
            openingTag: '\\[quote=(?:"|&quot;)([a-z0-9\\._\\-\\u00A0]+)(?:"|&quot;)\\]',
            closingTag: "\\[\\/quote\\]"
        }, TradingView.quotesRe.quotedArea = TradingView.quotesRe.openingTag + "([^]*)" + TradingView.quotesRe.closingTag, TradingView.removeQuotes = function(t) {
            return t.replace(RegExp(TradingView.quotesRe.quotedArea, "ig"), "").trim()
        }, TradingView.parseQuotes = function(t) {
            function e(t) {
                var e, i = RegExp(TradingView.quotesRe.openingTag, "ig"),
                    n = RegExp(TradingView.quotesRe.closingTag, "ig"),
                    o = i.exec(t),
                    r = n.exec(t);
                return !o || !r || r.index < o.index ? null : (e = '<div class="ch-item-quote">' + $.t("@__username__ wrote", {
                        username: o[1]
                    }) + ":<br/>" + TradingView.removeQuotes(t.substring(i.lastIndex, r.index)) + "</div>", {
                    start: o.index,
                    end: n.lastIndex,
                    converted: e
                })
            }

            function i(t) {
                var n = e(t);
                return n ? t.substring(0, n.start) + n.converted + i(t.substring(n.end).trim()) : t
            }
            return i(t)
        }, TradingView.getInnerTextContent = function(t) {
            var e = function(t) {
                return t.childElementCount ? $.map(t.childNodes, e).join("") + ("DIV" === t.tagName ? "\n" : "") : "BR" === t.tagName ? "\n" : t.textContent
            };
            return e(t)
        }, TradingView.trimWords = function(t, e) {
            var i, n, o, r;
            if (t.length < e) return t.trim();
            for (t += " ", i = /\s+/g, o = "", r = 0; null != (n = i.exec(t));) {
                if (n.index >= e) {
                    o = t.substring(0, r).trim() + "...";
                    break
                }
                r = n.index
            }
            return o || t.substring(0, e) + "..."
        }, TradingView.urlRegExp = {
            imageUrl: "^[0-9a-zA-Z]{8}$",
            publishedImage: "/(?:i|x)/([0-9a-zA-Z]{8})/?",
            publishedChartOld: "/v/([0-9a-zA-Z]{8})/?",
            publishedChart: "/chart/([0-9a-zA-Z!_:+*()-]+?)/([0-9a-zA-Z]{8})(?:-([^/]+))?/?",
            publishedScript: "/script/([0-9a-zA-Z]{8})(?:-([^/]+))?/?",
            amazonawsLinks: "(?:https://|http://)(s3\\.amazonaws\\.com\\/tradingview?(\\w*?)\\/snapshots)\\/(?:\\S*?)\\.(png|bmp|jpg|jpeg)"
        }, TradingView.createPublishedChartUrl = function(t, e, i) {
            return t && /[0-9a-zA-Z]{8}/.test(t) ? t && e ? "/chart/" + e + "/" + t + (i ? "-" + i : "") + "/" : "/v/" + t + "/" : ""
        }, TradingView.parsePublishedChartUrl = function(t) {
            var e, i = {},
                n = RegExp(TradingView.urlRegExp.publishedChartOld),
                o = RegExp(TradingView.urlRegExp.publishedChart),
                r = RegExp(TradingView.urlRegExp.publishedScript),
                s = RegExp(TradingView.urlRegExp.imageUrl);
            return n.test(t) ? (e = t.match(n) || {}, i = {
                image_url: e[1]
            }) : o.test(t) ? (e = t.match(o) || {}, i = {
                symbol: e[1],
                image_url: e[2],
                title: e[3]
            }) : r.test(t) ? (e = t.match(r) || {}, i = {
                image_url: e[1],
                title: e[2]
            }) : s.test(t) && (i = {
                image_url: t
            }), i
        }, TradingView.createPublishedChartImageUrl = function(t) {
            var e, i;
            return t && /[0-9a-zA-Z]{8}/.test(t) ? TradingView.Environment() in {
                battle: 1,
                staging: 1
            } ? (e = t.charAt(0).toLowerCase(), i = "battle" === TradingView.Environment() ? "tradingview" : "tradingview_staging", "https://s3.amazonaws.com/" + i + "/" + e + "/" + t + ".png") : "/i/" + t + "/" : ""
        }, TradingView.createSnapshotImageUrls = function(t) {
            var e, i, n;
            return t && /[0-9a-zA-Z]{8}/.test(t) ? TradingView.Environment() in {
                battle: 1,
                staging: 1
            } ? (e = t.charAt(0).toLowerCase(), i = "battle" === TradingView.Environment() ? "tradingview" : "tradingview_staging", n = "https://s3.amazonaws.com/" + i + "/snapshots/" + e, {
                url: n + "/" + t + ".png",
                preview: n + "/" + t + "_thumb.png"
            }) : (n = window.location.protocol + "//" + window.location.host, {
                url: n + "/x/" + t + "/",
                preview: n + "/x/" + t + "/s/"
            }) : ""
        }, TradingView.openNewChart = function(t) {
            var e, i, n;
            t = t || {}, is_authenticated ? (e = '<form method="POST" target="_blank" action="/chart/" style="display: none;"><input type="text" name="new" value="1">', Object.keys(t).forEach(function(i) {
                e += '<input type="text" name="' + i + '" value="' + t[i] + '">'
            }), e += '<input type="submit"></form>', i = $(e), $("body").append(i), i.submit()) : (n = $.param(t), window.open("/chart/" + (n ? "?" + n : ""), "_blank"))
        }, TradingView.applySymbolBbcodes = function(t) {
            var e = __webpack_require__(320);
            $(t).each(function() {
                var t = $(this),
                    i = t.data("symbol");
                new e(i, t)
            })
        }, TradingView.checkUserLanguage = function() {
            is_authenticated || $.post("/", {
                check_language: 1
            }, function(t) {
                t && TVDialogs.showLanguagePopup(t)
            })
        }, TradingView.unifiedSpinner = function(t, e) {
            var i, n = {
                    lines: 17,
                    length: 0,
                    width: 3,
                    radius: 20,
                    corners: 1,
                    color: "#00A2E2",
                    opacity: .3,
                    rotate: 0,
                    direction: 1,
                    speed: 1.5,
                    trail: 60,
                    fps: 20,
                    className: "spinner",
                    zIndex: 2e9,
                    top: "50%",
                    left: "50%",
                    shadow: !1,
                    hwaccel: !1
                },
                o = TradingView.unifiedSpinner.presets[t];
            return o && (n = $.extend(n, o)), i = $.extend({}, n, e), new Spinner(i)
        }, TradingView.unifiedSpinner.presets = {
            mini: {
                radius: 8,
                width: 2,
                lines: 14
            },
            micro: {
                radius: 4,
                width: 2,
                lines: 12
            }
        }, TradingView.parseJSONorNot = function(t) {
            return "string" == typeof t ? JSON.parse(t) : t
        }, $(window).load(function() {
            window.loaded = !0
        }), TradingView.overrideGitHubLink = function(t, e) {
            return e.preventDefault(), window.location.href = t, !1
        }, window.setCookie = function(t, e, i, n) {
            var o, r;
            n = n ? "; path=" + n : "", i ? (r = new Date, r.setTime(r.getTime() + 24 * i * 60 * 60 * 1e3), o = "; expires=" + r.toGMTString()) : o = "", document.cookie = t + "=" + e + o + n
        }, window.getCookie = function(t) {
            var e, i, n, o = t + "=",
                r = document.cookie.split(";");
            for (e = 0, i = r.length; i > e; e++) {
                for (n = r[e];
                     " " === n.charAt(0);) n = n.substring(1, n.length);
                if (0 === n.indexOf(o)) return n.substring(o.length, n.length)
            }
            return null
        }, TradingView.goRegistrateAfterThreeClicks = function() {
            var t = window.getCookie("unregistrateClicksOnIdeas");
            null === t && (t = 0), t++, t >= 3 ? (TVDialogs.goRegistrate({
                from: "ideas"
            }), window.setCookie("unregistrateClicksOnIdeas", 0)) : window.setCookie("unregistrateClicksOnIdeas", t)
        }, jQuery.event.special.middleclick = {
            setup: function(t, e) {
                $(this).bind("mousedown mouseup mouseout", jQuery.event.special.middleclick.handler)
            },
            teardown: function(t) {
                $(this).unbind("mousedown mouseup mouseout", jQuery.event.special.middleclick.handler)
            },
            handler: function(t) {
                var e = $(this);
                "mousedown" === t.type && 2 === t.which ? e.data("mouseTrigger", 1) : "mouseout" === t.type ? e.data("mouseTrigger", 0) : "mouseup" === t.type && (2 === t.which && e.data("mouseTrigger") && (t.type = "middleclick", jQuery.event.handle.apply(this, arguments)), e.data("mouseTrigger", 0))
            }
        }, TradingView.handleClickOnLogo = function(t, e) {
            if (TradingView.isFeatureEnabled("advertisement-rotation")) {
                var i = +new Date;
                $(this).data("lastClick") && i - $(this).data("lastClick") < 300 || ($(this).data("lastClick", i), $.post("/advertisement/click-on-logo/", {
                    target: t,
                    sponsor_name: e
                }))
            }
        }, $(function() {
            TradingView.isFeatureEnabled("test_new_design") && ($.cookie("backend", "prod"), "undefined" != typeof _gaq && _gaq.push(["_setCustomVar", 4, "design", "old", 1]), $(".js-try-new-design-link").click(function(t) {
                TradingView.trackEvent("design", "try_new"), $.cookie("backend", "test_backend"), location.reload()
            }))
        })
    }).call(exports, __webpack_require__(3), __webpack_require__(50), __webpack_require__(23), __webpack_require__(86), __webpack_require__(328), __webpack_require__(329), __webpack_require__(130), __webpack_require__(330))
}, , , , function(t, e, i) {
    (function(t, n) {
        "use strict";

        function o(t) {
            this._chartWidgetCollection = t
        }

        function r(t, e, i, o) {
            var r, s;
            o = o || {}, r = {
                wl: o.wl,
                images: JSON.stringify(t.images()),
                previews: o.previews
            }, (o.cme || "cme" === t.activeChartWidget.value().widgetCustomer()) && (r.cme = !0), r.timezone = t.activeChartWidget.value()._properties.timezone.value(), window.urlParams && window.urlParams.locale && (r.language = urlParams.locale), s = n.enabled("charting_library_base") ? o.snapshotUrl || "https://www.tradingview.com/snapshot/" : "/snapshot/", $.post(s, r, function(t) {
                t ? e(t) : i()
            }).fail(function() {
                i()
            })
        }
        var s = i(332);
        o.prototype.whenReadyToSave = function(t) {
            var e, i, n = this._chartWidgetCollection,
                o = n.activeChartWidget.value(),
                r = o.model().mainSeries();
            r.symbolInfo() && !r.hasDelayedSymbolIntervalChange() ? t() : (e = null, i = null, e = function() {
                r.onSymbolError().unsubscribe(null, i, !0), t()
            }, i = function() {
                r.onSymbolResolved().unsubscribe(null, e, !0)
            }, r.onSymbolResolved().subscribe(null, e, !0), r.onSymbolError().subscribe(null, i, !0))
        }, o.prototype.saveToJSON = function() {
            return this._fillSavingInfo(!1, !0)
        }, o.prototype._fillAsyncInfo = function(t, e, i) {
            function n(e) {
                t.content = JSON.stringify($.extend(!0, r, e)), o.resolve(t)
            }
            var o, r = JSON.parse(t.content),
                s = this._chartWidgetCollection;
            return e || (i = !0), o = $.Deferred(), i ? s.asyncState(!!e).then(n) : s.activeChartWidget.value().asyncState(!!e).then(n), o.promise()
        }, o.prototype._fillSavingInfo = function(t, e, i) {
            var n, o, r, s, a, l, c, h, d, u, p, f, _, g;
            if (t || (e = !0), n = {
                    publish_request_id: Math.random().toString(36).substring(2)
                }, o = this._chartWidgetCollection, r = o.activeChartWidget.value(), s = o.metaInfo, a = r.model().mainSeries(), l = a.properties(), c = a.symbolInfo(), !a || !s || !c) throw new ReferenceError("Missed required data");
            for (s.id.value() && (n.id = s.id.value()), n.name = s.name.value() || "", n.description = s.description.value() || "", n.resolution = a.properties().interval.value(), n.symbol_type = c.type || "", n.exchange = c.exchange || "", n.listed_exchange = c.listed_exchange || "", a.isSpread() ? (h = c.legs[0], d = c.base_name[0], d = d.split(":")[1], n.symbol = h, n.short_name = d, n.expression = c.full_name) : (u = c.ticker || l.symbol.value(), p = l.shortName.value(), n.symbol = u, n.short_name = p), f = [], _ = 0, g = c.legs.length; g > _; _++) f.push({
                symbol: c.legs[_],
                pro_symbol: c.base_name[_]
            });
            return n.legs = JSON.stringify(f), e ? n.content = JSON.stringify(o.state(!!t, i)) : n.content = JSON.stringify(r.state(!!t, i)), t && (n.image = JSON.stringify(o.images({
                onlyActiveChart: !e
            }))), n.is_realtime = t ? "0" : "1", n
        }, o.prototype.publishChart = function(t) {
            function e(t) {
                window.footerWidget ? window.footerWidget.onPublishDialogVisibility(t) : t ? $(".publish-chart-button").addClass("inprogress") : $(".publish-chart-button").removeClass("inprogress")
            }

            function i(t, e) {
                var i = {
                    closeForm: function() {
                        n._dialogCtl.close()
                    },
                    showError: function(t, e) {
                        TVDialogs.showError(t, n._dialogCtl.dialog, e)
                    }
                };
                n.onPublish(t, $.extend({}, e, i))
            }
            var n = this;
            TradingView.trackEvent("GUI", "Publish Chart"), n._dialogCtl ? n._dialogCtl.show() : n._dialogCtl = s($.extend({
                chartWidgetCollection: this._chartWidgetCollection,
                onPublish: i,
                onMinimize: function() {
                    e(!0)
                },
                onDestroy: function() {
                    delete n._dialogCtl, e()
                },
                related: n._lastPublishUrl,
                formData: {}
            }, t))
        }, o.prototype.onPublish = function(e, i) {
            function n(n) {
                var o, r, s, l, c, h, d;
                a.publishInProgress = !1, o = n.responseText, "ok:" === o.substr(0, 3) ? (i.savePrivacySetting && (r = !e.is_public, TVSettings.setValue("publishchart.private", r)), s = o.substr(3), l = JSON.parse(s), a._chartWidgetCollection.metaInfo.id.value() || a._chartWidgetCollection.metaInfo.id.setValue(l.id), i.closeForm && i.closeForm(), a._lastPublishUrl = l.publishUrl, a.hWnd && (c = l.publishUrl, i.ideaUrl && (c = t.render(i.ideaUrl, {
                    idea: l.idea
                })), a.hWnd.location = c)) : (i.showError && (o = TradingView.strip_tags(o), (413 === n.status || /^[\d\s]*request.+large/i.test(o.trim())) && (h = "support@tradingview.com", o = $.t("This chart layout has a lot of objects and can't be published! Please report to {0} for further&nbsp;details.").format('<a href="mailto:' + h + '">' + h + "</a>"), d = {
                    html: !0
                }), i.showError(o || $.t("Error occured while publishing"), d)), a.hWnd && (a.hWnd.close(), a.hWnd = null))
            }
            var o, r, s, a = this;
            a.publishInProgress || (o = a._fillSavingInfo(!0, i && i.publishAllLayout, !0), a._fillAsyncInfo(o, !0, i && i.publishAllLayout).then(function(t) {
                $.ajax({
                    url: "/publishchart/",
                    type: "post",
                    dataType: "text",
                    data: $.extend({}, t, e),
                    complete: n
                })
            }), a.publishInProgress = !0, i.onWidget && !i.ideaUrl || "" !== e.name && "" !== e.description && e.description.length <= 4e3 && e.name.length <= 64 && ($.cookie("publish_request_id", o.publish_request_id, {
                path: "/"
            }), r = "/loading/", i.ideaUrl && (s = TradingView.createUrlParams({
                ideaUrl: i.ideaUrl
            }), r = "/loading?" + s), a.hWnd = window.open(r, "_blank")))
        }, o.prototype.saveChartSilently = function(t, e, i, n) {
            var o = this._chartWidgetCollection.metaInfo,
                r = this._fillSavingInfo(e);
            n = n || {}, n.chartName && (r.name = n.chartName), $(window).on("beforeunload.savechart", function() {
                return $.t("Your chart is being saved, please wait a moment before you leave this page.")
            }), TradingView.saveChart(r, o, t, i, n), $(window).off("beforeunload.savechart")
        }, e.ChartSaver = o, e.takeSnapshot = r
    }).call(e, i(86), i(3))
}, function(t, e, i) {
    (function(e) {
        "use strict";
        var n = i(15),
            o = i(18),
            r = i(1),
            s = i(315).ideaDialogs,
            a = i(16),
            l = i(91).bindPopupMenu,
            c = function(t) {
                function i() {
                    var e, i, o, r, s, l;
                    return m.find(".publish-related").tvtags("extractTags"), e = {
                        name: m.find('[name="name"]').val(),
                        description: m.find('[name="description"]').val(),
                        direction: m.find('input[name="direction"]').val(),
                        is_public: "1"
                    }, t.onWidget || (e.auto_tags = m.find('[name="auto-tags"]').val(), e.tags = m.find(".publish-tags").tvtags("extractTags").tvtags("tagsWithPending").join(","), e.twitter = m.find('input[name="twitter"]').is(":checked") ? "1" : "", e.stocktwits = m.find('input[name="stocktwits"]').is(":checked") ? "1" : "", e.is_public = m.find('input[name="public"]').is(":checked") ? "1" : "", e.related_charts = (m.find(".publish-related").tvtags("extractTags").tvtags("tagsWithPending") || []).join(",")), t.publishSource && (e.publish_source = t.publishSource), i = m.find('[name="publish_entire_layout"]').is(":checked"), t.chartWidgetCollection && (o = t.chartWidgetCollection.maximizeCurrentChart.value(), r = t.chartWidgetCollection.layout.value(), i = "s" === r || i && !o), s = {
                        onWidget: t.onWidget,
                        ideaUrl: t.ideaUrl,
                        savePrivacySetting: !t.doNotSavePrivacySetting,
                        publishAllLayout: i
                    }, e.name.trim() ? e.description.trim() ? "en" !== window.language || TradingView.isLatin(e.name) && TradingView.isLatin(e.description) ? "en" !== window.language || TradingView.isLatin(e.tags) ? e.is_public && t.chartWidgetCollection && (l = new n(a.interval.value()), l.kind() === n.MINUTES && l.multiplier() < 15 || l.kind() === n.SECONDS) ? void TVDialogs.showError($.t("You are trying to publish an idea with a timeframe less than 15 minutes. This timeframe is too short term and most people will not be able to adequately react to your idea before it loses its point. Please publish these ideas to chat, where people will be able to react in a timely manner. You can publish a snapshot or publish a private idea and send the link to chat. Now ideas published to chat can get likes that contribute to your rating!")) : void(t.onPublish && t.onPublish(e, s)) : void TVDialogs.showError($.t("Please use only English in tags")) : void TVDialogs.showError(T) : (TVDialogs.showError($.t("Chart description is required"), m), void m.find('[name="description"]').focus()) : (TVDialogs.showError($.t("Chart title is required"), m), void m.find('[name="name"]').focus())
                }

                function c() {
                    u ? TVDialogs.destroy(g) : TVDialogs.showConfirm($.t("Cancel publication"), $.t("Are you sure you want to abandon your post?"), function() {
                        TVDialogs.destroy(g)
                    })
                }

                function h() {
                    p && (m.find('[name="name"]').blur(), m.find(".tvtags-input").first().focus()), m.show();
                    var e = t.onWidget ? {
                        w: E,
                        h: L
                    } : TVSettings.getJSON("publishchart.size", {
                        w: E,
                        h: L
                    });
                    m.height(Math.max(Math.min(e.h, .9 * $(window).height()), L)), m.width(Math.max(Math.min(e.w, .9 * $(window).width()), E)), S(), TVDialogs.positionDialog(m, {
                        considerScroll: !t.onWidget
                    }), t.onShow && t.onShow()
                }

                function d() {
                    m.hide(), t.onMinimize && t.onMinimize()
                }
                var u, p, f, _, g, m, v, y, w, b, S, T, x, C, P, k, I, E, L;
                return t = t || {}, u = t.editMode, p = u && t.strictEditMode, f = !!t.isScript, _ = !u && !f, g = u ? "edit_idea_dialog" : "publish_idea_dialog", m = TVDialogs.createDialog(g, {
                    addClass: "publish-dialog",
                    hideCloseCross: _,
                    hideTitle: !0
                }), u && s.add(g), m.css("width", "700px"), v = m.find("._tv-dialog-content"), y = t.onWidget ? o.dialogs.publishChartWidget : o.dialogs.publishChart, w = TradingView.clone(window.user || {}), w.editMode = u, w.strictEditMode = p, w.isScript = f, v.html(e.render(y, w)), b = m.find("._tv-dialog-title"), s.getDraggableEmptyTitle().prependTo(b), _ && $('<a class="_tv-dialog-title-minimize"></a>').appendTo(b).on("click", function(t) {
                    t.preventDefault(), d()
                }), m.draggable(TVDialogs._constrainDraggableOptionsIfNeeded({
                    handle: b
                })), S = function() {
                    var t = v.find(".jsfluid"),
                        e = v.children(".main, *[class^=main-]").eq(0);
                    return function() {
                        t.css("height", m.height() - e.position().top - e.outerHeight() + t.height())
                    }
                }(), m.on("resize", function(t) {
                    t.stopPropagation(), t.preventDefault(), S()
                }), T = $.t("TradingView is only for English-language content at this time."), x = t.formData || {}, x.name && m.find('[name="name"]').val(x.name), x.description && m.find('[name="description"]').val(x.description), x.direction && m.find('input[name="direction"]').val(x.direction), x.related_charts && ($.isArray(x.related_charts) && (x.related_charts = x.related_charts.join(",")), m.find(".publish-related").val(x.related_charts)), (x.tags || x.autoTags) && (m.find(".publish-tags").val($.grep([x.tags, x.autoTags], function(t) {
                    return t
                }).join(",")), x.autoTags && m.find('[name="auto-tags"]').val(x.autoTags)), $("#publish-chart-form").submit(function(t) {
                    t.preventDefault(), i()
                }), $("#publish-dialog-do-publish").click(function(t) {
                    t.preventDefault(), i()
                }), m.find('input[name="public"]').on("change", function(t) {
                    $(this).is(":checked") || (C.prop("checked", !1).change(), P.prop("checked", !1).change())
                }), C = m.find('input[name="twitter"]'), P = m.find('input[name="stocktwits"]'), C.change(function() {
                    if (C.is(":checked") && !user.has_twitter) {
                        var t = window.open("/accounts/permission/twitter/", "twitter_permission_request", "scrollbars=yes,height=400,width=700");
                        t.focus()
                    }
                }), P.change(function() {
                    P.is(":checked") && TradingView.authInStocktwits()
                }), v.find(".publish-direction-buttons ._tv-button").on("mousedown", function() {
                    var t = $(this);
                    $(".publish-direction-buttons ._tv-button").removeClass("active"), t.addClass("active"), m.find('input[name="direction"]').val(t.data("val"))
                }).each(function() {
                    $(this).toggleClass("active", +$(this).data("val") === (+m.find('input[name="direction"]').val() || 0))
                }), m.find("._tv-dialog-readbefore a").on("click", function(t) {
                    t.preventDefault(), TVDialogs.showPublishIntroDialog(!0)
                }), k = t.isPrivate || TVSettings.getBool("publishchart.private", !1), k && m.find('input[name="public"]').prop("checked", !1).change(),
                    function() {
                        function e(t) {
                            return t = new Date(t), [t.getFullYear(), ("0" + t.getMonth()).substr(-2), ("0" + t.getDate()).substr(-2)].join("-")
                        }

                        function i(t) {
                            return TradingView.parsePublishedChartUrl(t).image_url
                        }
                        var n = {},
                            o = m.find(".publish-related");
                        t.related && o.val([].concat(t.related).join(",")), o.tvtags("init", {
                            suggest: function(t, e) {
                                var o = location.protocol + "//" + location.host + "/v/";
                                t.substr(0, o.length) === o && (t = i(t) || t), $.ajax("/ideas-json/", {
                                    data: {
                                        search: t
                                    },
                                    dataType: "json"
                                }).done(function(t) {
                                    t = t || [], t.forEach(function(t) {
                                        n[t.image_url] = t, t.str = o + t.image_url + "/"
                                    }), e(t)
                                }).error(function() {
                                    e(null)
                                })
                            },
                            formatSuggest: function(t) {
                                var i = $(document.createElement("span")).addClass("date").text(e(1e3 * t.created) + " "),
                                    n = $(document.createElement("strong")).text(t.name),
                                    o = $(document.createTextNode(" " + [t.short_name || t.pro_symbol, t.resolution].join(", ")));
                                return {
                                    content: $().add(i).add(n).add(o)
                                }
                            },
                            validate: function(t, e) {
                                var o = i(t);
                                return o ? n[o] ? void e(!0) : void $.ajax("/ideas-json/" + o + "/", {
                                    dataType: "json"
                                }).done(function(t) {
                                    return t && t.length ? (n[t[0].image_url] = t[0], void e(!0)) : void e(!1)
                                }).error(function() {
                                    e(!1)
                                }) : void e(!1)
                            },
                            transform: i,
                            format: function(t) {
                                var e = t.str,
                                    i = n[e];
                                return i && e ? i.name : "Idea"
                            },
                            keys: ["\n", ",", /\s/, ";"],
                            separator: ","
                        }).on("change", S)
                    }(), m.find(".publish-tags").tvtags("init", {
                    keys: ["\n", ",", /\s/, ";"],
                    separator: ",",
                    addClass: "no-arrow with-ears",
                    format: function(t) {
                        return {
                            str: t.str,
                            addClass: "tag"
                        }
                    },
                    transform: function(t) {
                        return t.toLowerCase()
                    },
                    suggest: function(t, e) {
                        t || e(null), $.ajax("/tags-json/", {
                            data: {
                                search: t.toLowerCase()
                            },
                            dataType: "json"
                        }).done(function(t) {
                            e(t)
                        }).error(function() {
                            e(null)
                        })
                    },
                    maxLength: 64,
                    caseInsensitive: !0
                }).on("change", S), I = [], t.chartWidgetCollection && ! function() {
                    function e() {
                        var t, e = d.value().model();
                        return e ? (t = e.mainSeries(), (t.properties().shortName.value() || t.symbol()) + " (" + t.interval() + ")") : "Active Chart"
                    }

                    function i() {
                        c.toggleClass("hidden", !("s" !== h.value() && !u.value())), o.is(":checked") ? (r.text("All Charts"), n.attr({
                            "class": "_tv-dialog-layout-button _tv-dialog-layout-" + h.value()
                        })) : (r.text(e()), n.attr({
                            "class": "_tv-dialog-layout-button _tv-dialog-layout-s"
                        }))
                    }
                    var n, o, r, s, c = v.find("._tv-dialog-layoutpicker"),
                        h = t.chartWidgetCollection.layout.spawn(),
                        d = t.chartWidgetCollection.activeChartWidget.spawn(),
                        u = t.chartWidgetCollection.maximizeCurrentChart.spawn(),
                        p = a.symbol.spawn();
                    I = [h, d, u, p], n = $('<span class="_tv-dialog-layout-button">'), o = $('<input type="checkbox" name="publish_entire_layout" checked>').hide().appendTo(n), $('<i class="icon"></i>').appendTo(n), r = $("<span></span>").appendTo(n), $('<span class="arrow-icon"></span>').appendTo(n), h.subscribe(i), d.subscribe(i), u.subscribe(i), p.subscribe(i), i(), s = function() {
                        var t = o.is(":checked");
                        return [{
                            addClass: "_tv-dialog-layout-popup _tv-dialog-layout-s",
                            title: $.t("Publish Only") + " " + e(),
                            action: function() {
                                o.attr("checked", !1), i()
                            },
                            active: !t,
                            icon: !0
                        }, {
                            addClass: "_tv-dialog-layout-popup _tv-dialog-layout-" + h.value(),
                            title: $.t("Publish All Charts"),
                            action: function() {
                                o.attr("checked", !0), i()
                            },
                            active: t,
                            icon: !0
                        }]
                    }, l(n, s, {
                        direction: "up"
                    }), n.appendTo(c), m.on("destroy", function() {
                        for (var t = 0; t < I.length; t++) I[t].destroy()
                    })
                }(), m.find("._tv-dialog-cancel-button").on("click", function(t) {
                    t.preventDefault(), c()
                }), t.onWidget || p || new r({
                    codes: ["bold", "italic", "list", "link", "embed", "symbol"],
                    $textarea: m.find('[name="description"]'),
                    $buttons: m.find(".bbcode-buttons"),
                    $forms: m.find(".bbcode-block"),
                    showError: function(t) {
                        TVDialogs.showError(t, m)
                    }
                }), t.onDestroy && m.on("destroy", t.onDestroy), E = m.width(), L = m.height(), m.resizable({
                    handles: "se",
                    minHeight: L,
                    minWidth: E,
                    stop: function() {
                        TVSettings.setJSON("publishchart.size", {
                            w: m.width(),
                            h: m.height()
                        })
                    }
                }), TVDialogs.applyHandlers(m, {
                    doNotCloseOnBgClickIfShadowbox: !0,
                    doNotCloseOnEsc: !0,
                    doNotCloseOnBgClick: !0,
                    beforeDestroy: function() {
                        u && s.remove(g), t.beforeDestroy && t.beforeDestroy()
                    }
                }), u || ($(window).bind("keyup.hidePublishDialog", function(t) {
                    27 === t.keyCode && 1 === TVDialogs.dialogs.length && m.is(":visible") && c()
                }), m.on("destroy", function() {
                    $(window).unbind("keyup.hidePublishDialog")
                })), h(), {
                    dialog: m,
                    show: h,
                    hide: d,
                    close: function() {
                        TVDialogs.destroy(g)
                    }
                }
            };
        t.exports = c
    }).call(e, i(86))
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function i(t, e, i, n) {
            var o = this;
            this._options = n || {}, this._readonly = !!this._options.readonly, this._container = t, this._chart = e, this._panes = i, this._pane_header_height = 34, this._hidden_panes_count = 0, this.prepareLayout(), setInterval(function() {
                o.paint()
            }, 66)
        }

        function n(e, i, n) {
            var o, r, s, a, l, c, h = this;
            return this._options = $.extend({}, this._defaultOptions, n || {}), this._$wrapper = e, this._$content = i, this._scroll_speed = 40, this._shadow_offset = 10, this._header_height = this._options.headerHeight, this._scroll_margin_top = this._options.scrollMarginTop, this.scrolled = new t, this.scrolltoend = new t, this.scrolltostart = new t, this.visibilityCallbacks = [], o = navigator.platform.toLowerCase(), r = navigator.userAgent.toLowerCase(), s = r.indexOf("firefox") > -1, a = o.indexOf("android") > -1 || r.indexOf("android") > -1, this._touch = Modernizr.touch || navigator.msMaxTouchPoints || s && a, this._touch ? (this._$content.css("position", "relative"), void this._$wrapper.css({
                "overflow-y": "scroll",
                "-webkit-overflow-scrolling": "touch",
                "-ms-overflow-style": "-ms-autohiding-scrollbar"
            }).scroll(this._onScroll.bind(this))) : (this._$wrapper.css("overflow", "hidden"), this._$wrapper.mouseenter(function() {
                h._bottomFixed || h._dragging || (h._options.alwaysVisible || h._$scrollBar.addClass("active"), h._onScroll())
            }).mouseleave(function() {
                h._bottomFixed || h._dragging || (h._options.alwaysVisible || h._$scrollBar.removeClass("active"), h._onScroll())
            }).mousewheel(function(t, e) {
                return t.isDefaultPrevented() ? void 0 : h.scroll(e)
            }), this._options.showTopShadow !== !1 && (this._$shadowTop = $('<div class="sb-inner-shadow top">').appendTo(this._$wrapper), this._$shadowTop.addClass("js-hidden")), this._options.showBottomShadow !== !1 && (this._$shadowBottom = $('<div class="sb-inner-shadow">').appendTo(this._$wrapper)), this._$shadowTop && this._header_height && this._$shadowTop.css("top", this._header_height - this._shadow_offset), l = this._options.additionalClass ? " " + this._options.additionalClass : "", c = this._options.alwaysVisible ? " active-always" : "", this._$scrollBarWrapper = $('<div class="sb-scrollbar-wrap">').appendTo(this._$wrapper), this._$scrollBar = $('<div class="sb-scrollbar sb-scrollbar-body' + l + c + '"></div>').appendTo(this._$scrollBarWrapper), void this._onScroll())
        }
        i.prototype.prepareLayout = function() {
            var t = this;
            this._widget = $('<div class="chart-sidebar">').appendTo(this._container), this._widget.toggleClass("js-hidden", void 0 !== this._options.hidden ? this._options.hidden : TVSettings.getBool("sidebar.hidden", !1)), this._separator = $('<div class="separator"><div class="separator-bar"><div class="separator-icon"></div></div></div>').appendTo(this._widget), this._separator.click(function() {
                t._widget.toggleClass("js-hidden"), t._readonly || TVSettings.setValue("sidebar.hidden", t._widget.is(".hidden")), $(window).resize()
            }), this._panes.forEach(function(e, i) {
                void 0 === e.ratio && (e.ratio = TVSettings.getFloat("sidebar.pane." + e.id + ".ratio", 1)), void 0 === e.state && (e.state = TVSettings.getBool("sidebar.pane." + e.id + ".state", !0), this._hidden_panes_count += e.state ? 0 : 1), e.$pane = $('<div class="chart-sidebar-pane">').addClass("tv-" + e.id).appendTo(this._widget), e.$header = $('<div class="header"><span class="icon"></span><span class="title">' + e.title + "</span></div>").click(function() {
                    e.state = !e.state, t._readonly || TVSettings.setValue("sidebar.pane." + e.id + ".state", e.state), t._hidden_panes_count += e.state ? -1 : 1, t.resize()
                }).appendTo(e.$pane), e.index = i, e.$container = $('<div class="container">').appendTo(e.$pane), e.widgetObject = new e.widget(e.$container, this._chart, e.options), i < this._panes.length - 1 && $('<div class="chart-sidebar-vseparator"><div class="handle"></div></div>').on("mousedown touchstart", function(e) {
                    var i = $(this),
                        n = i.prevAll(".chart-sidebar-pane:not(.minimized)").first(),
                        o = i.nextAll(".chart-sidebar-pane:not(.minimized)").first();
                    return n.length && o.length ? (t._drag_start = e.pageY || e.originalEvent.pageY || e.originalEvent.touches && e.originalEvent.touches[0].pageY || 0, t._drag_prev_h = n.height(), t._drag_next_h = o.height(), $(window).on("mousemove.sidebarDrag touchmove.sidebarDrag", function(e) {
                        var i = (e.pageY || e.originalEvent.pageY || e.originalEvent.touches && e.originalEvent.touches[0].pageY || 0) - t._drag_start;
                        n.height(t._drag_prev_h + i).data("paneObj").widgetObject.resize(), o.height(t._drag_next_h - i).data("paneObj").widgetObject.resize()
                    }), $(window).one("mouseup touchend", function(e) {
                        var n, o, r, s, a, l, c;
                        $(window).unbind("mousemove.sidebarDrag touchmove.sidebarDrag"), n = i.prevAll(".chart-sidebar-pane:not(.minimized)").first(), o = i.nextAll(".chart-sidebar-pane:not(.minimized)").first(), r = t._widget.height() - t._hidden_panes_count * t._pane_header_height - (t._panes.length - 1), s = r / (t._panes.length - t._hidden_panes_count), a = (n.height() + t._pane_header_height) / s, l = n.data("paneObj"), l.ratio = a, c = (o.height() + t._pane_header_height) / s, l = o.data("paneObj"), l.ratio = c, t.resize()
                    }), void e.preventDefault()) : !1
                }).appendTo(this._widget), e.$pane.data("paneObj", e)
            }, this), $(window).resize(function() {
                t.resize()
            }), this.resize()
        }, i.prototype.normalizeRatios = function() {
            var t = this,
                e = this._panes.length - this._hidden_panes_count,
                i = 0,
                n = 0;
            this._panes.forEach(function(t) {
                t.state && (i += t.ratio)
            }), n = (i - e) / e, this._panes.forEach(function(e) {
                e.state && (e.ratio -= n, t._readonly || TVSettings.setValue("sidebar.pane." + e.id + ".ratio", e.ratio.toFixed(2)))
            })
        }, i.prototype.resize = function() {
            var t, e;
            this.normalizeRatios(), t = this._widget.height() - this._hidden_panes_count * this._pane_header_height - (this._panes.length - 1), e = t / (this._panes.length - this._hidden_panes_count), this._panes.forEach(function(t, i) {
                t.state ? t.$pane.height(e * t.ratio - this._pane_header_height) : t.$pane.height(0), t.widgetObject.resize(!0), t.$pane.toggleClass("minimized", !t.state), t.$container.trigger("paneStateChange", [t.state])
            }, this)
        }, i.prototype.getPaneIndexById = function(t) {
            for (var e = 0; e < this._panes.length; e++)
                if (this._panes[e].id === t) return e;
            return null
        }, i.prototype.getPaneById = function(t) {
            var e = this.getPaneIndexById(t);
            return null === e ? null : this._panes[e]
        }, i.prototype.highlightPane = function(t, e, i) {
            this._panes[t].$header.highlight(e, i)
        }, i.prototype.highlightWidget = function(t, e, i) {
            this.highlightPane(this.getPaneIndexById(t), e, i)
        }, i.prototype.paint = function() {
            this._panes.forEach(function(t, e) {
                t.widgetObject.paint && t.widgetObject.paint()
            }, this)
        }, i.prototype.setPaneState = function(t, e, i) {
            if (t) {
                t.state = !!e;
                var n = i && i.doNotSave;
                this._readonly || n || TVSettings.setValue("sidebar.pane." + t.id + ".state", t.state), this._hidden_panes_count = this._panes.filter(function(t) {
                    return !t.state
                }).length, this.resize()
            }
        }, n.prototype._defaultOptions = {
            headerHeight: 0,
            additionalClass: "",
            alwaysVisible: !1,
            showBottomShadow: !0,
            scrollMarginTop: 1
        }, n.prototype.initDraggable = function() {
            if (this._dragInitialized) return this;
            var t = this;
            return this._$scrollBar.draggable({
                axis: "y",
                containment: this._$scrollBarWrapper,
                start: function() {
                    t._dragging = !0
                },
                stop: function() {
                    t._dragging = !1
                },
                drag: function(e, i) {
                    t.updateScroll()
                }
            }), this._dragInitialized = !0, this
        }, n.prototype.updateScroll = function() {
            var t, e, i, n, o;
            return this._touch ? this : (t = 1, e = Math.ceil(this._$scrollBar.position().top - this._scroll_margin_top - this._header_height), i = this._$wrapper.height() - this._header_height, n = this._$content.height(), o = n - i - t, 0 >= i ? this : (0 >= o ? this._scroll_target_top = this._header_height : this._scroll_target_top = Math.min(-e * n / i + this._header_height, this._header_height), e + this._$scrollBar.height() + 2 >= i ? this.scrollToEnd() : (this._$content.css("top", this._scroll_target_top + "px"), this._onScroll()), this))
        }, n.prototype.updateScrollBar = function() {
            var t, e, i, n, o, r, s, a, l;
            return this._touch ? this : (t = 1, e = this._$content.position().top, i = this._$content.height(), n = this._$wrapper.height(), o = n - this._header_height, r = t + this._header_height, s = o - 2 * t, a = (Math.abs(e) - this._header_height) * s / i, l = n * n / i, o > i ? (this._$scrollBar.addClass("js-hidden"), this._$wrapper.removeClass("sb-scroll-active")) : (this._$scrollBar.removeClass("js-hidden").height(l).css("top", r + a), this._$wrapper.addClass("sb-scroll-active"), this.initDraggable()), this)
        }, n.prototype.scroll = function(t, e) {
            var i, n, o, r, s;
            return this._touch ? this : (i = this._$content.position().top, n = this._$content.height(), o = this._$wrapper.height() - this._header_height, r = n - o - 1, s = e || this._scroll_speed, 0 >= r ? !0 : (this._scroll_target_top = Math.max(-r + this._header_height, Math.min(this._header_height, i + t * s)), this.setContentTop(this._scroll_target_top), this._onScroll(), !1))
        }, n.prototype.animateTo = function(t) {
            var e, i, n;
            return this._touch ? this : (e = this._$content.height(), i = this._$wrapper.height() - this._header_height, n = e - i - 1, 0 >= n ? !0 : (this._scroll_target_top = Math.max(-n + this._header_height, Math.min(this._header_height, -t)), void this._$content.animate({
                top: this._scroll_target_top
            }, 500, function() {
                this._onScroll()
            }.bind(this))))
        }, n.prototype.resize = function() {
            var t, e;
            if (!this._bottomFixed) return t = this._$content.height(), e = this._$wrapper.height(), !this._options.vAlignBottom && e > t ? void(this.atStart() || this.scrollToStart()) : void(this.atEnd() ? this.scrollToEnd() : "number" == typeof this._stickyBottom && this.setContentTop(Math.min(0, this._stickyBottom + this._$wrapper.height() - this._$content.height())))
        }, n.prototype.resizeHeader = function(t) {
            var e = t - this._header_height;
            this._header_height = t, this._scroll_target_top += e, this._$shadowTop && this._$shadowTop.css("top", this._header_height - this._shadow_offset), this.resize()
        }, n.prototype.scrollTo = function(t, e) {
            var i, n, o, r, s, a, l;
            if (e = $.extend({
                    position: "visible",
                    areaHeight: t instanceof $ ? t.height() : 0
                }, e), t instanceof $ && (t = t.position().top), i = this._$content.position().top, n = this._$content.height(), o = this._$wrapper.height() - this._header_height, r = n - o - 1, 0 >= r) return !0;
            if (s = -1 * (i - this._header_height), a = s + o, l = 0, "visible" === e.position) {
                if (t > s && t + e.areaHeight < a) return !1;
                l = t + e.areaHeight > a ? a - t - e.areaHeight : s - t
            } else "top" === e.position && (l = s - t);
            return this.scroll(l, 1), this._onScroll(), !1
        }, n.prototype.scrollToEnd = function() {
            var t = 1,
                e = this._$content.position().top,
                i = this._$content.height(),
                n = this._$wrapper.height(),
                o = i + e;
            return this.setContentTop(e + (n - o) + t), this._onScroll(), this
        }, n.prototype.scrollToStart = function() {
            return this.setContentTop(this._header_height), this._onScroll(), this
        }, n.prototype.currentPosition = function() {
            return Math.round(this._$content.position().top)
        }, n.prototype.atStart = function() {
            return Math.round(this._$content.position().top) >= this._header_height
        }, n.prototype.atEnd = function(t) {
            var e, i, n, o, r;
            return "number" == typeof t && isFinite(t) || (t = 0), e = 1, i = this._$content.position().top, n = this._$content.height(), o = this._$wrapper.height(), r = n - Math.abs(i) - e, o + t >= r
        }, n.prototype._onScroll = function(t) {
            var e, i;
            this._touch || this._$content.css("bottom", "auto"), this.scrolled.fire(), this._dragging && t !== !0 || this.updateScrollBar(), e = this.atStart(), i = this.atEnd(), this._$shadowTop && this._$shadowTop.toggleClass("js-hidden", !!e), this._$shadowBottom && this._$shadowBottom.toggleClass("js-hidden", !!i), this._onContentVisible(), !this._atStart && e ? (this._atStart = !0, this.scrolltostart.fire()) : this._atStart && !e && delete this._atStart, !this._atEnd && i ? (this._atEnd = !0, this.scrolltoend.fire()) : this._atEnd && !i && delete this._atEnd, this._options.vAlignBottom && (this._stickyBottom = this._$content.height() - Math.abs(this._$content.position().top) - this._$wrapper.height())
        }, n.prototype.checkContentVisibility = function() {
            this._onContentVisible()
        }, n.prototype.subscribeToContentVisible = function(t, e, i) {
            this.visibilityCallbacks.push({
                id: t,
                $el: e,
                callback: i
            })
        }, n.prototype.triggerVisibilityCallbacks = function(t) {
            this._onContentVisible(t)
        }, n.prototype._contentIsVisible = function(t) {
            return t.$el.position().top > -1 * this.currentPosition()
        }, n.prototype._onContentVisible = function(t) {
            var e, i, n;
            this.visibilityCallbacks.length && (e = t || this._contentIsVisible.bind(this), i = [], n = this.visibilityCallbacks.filter(function(t, n) {
                if (!$.contains(this._$content, t.$el[0])) return !1;
                var o = e(t);
                return o && i.push(n), !o
            }, this), i.forEach(function(e) {
                this.visibilityCallbacks[e].callback(!!t)
            }, this), delete this.visibilityCallbacks, this.visibilityCallbacks = n)
        }, n.prototype.save = function() {
            return this._saved = {
                top: this._$content.position().top,
                height: this._$content.height()
            }, this
        }, n.prototype.restore = function() {
            if (this._saved) {
                if (this._saved.top === this._$content.position().top && this._saved.height === this._$content.height()) return delete this._saved, this;
                this._options.vAlignBottom && (this._saved.top -= this._$content.height() - this._saved.height, this._saved.top > this._header_height && (this._saved.top = this._header_height)), this.setContentTop(this._saved.top), delete this._saved, this._onScroll(!0)
            }
            return this
        }, n.prototype.fixBottom = function() {
            var t, e;
            return this._bottomFixed ? this : (this._touch ? (t = this._$content.height(), e = this._$wrapper.scrollTop(), this._tempIntervalID = setInterval(function() {
                this._$wrapper.scrollTop(e + (this._$content.height() - t))
            }.bind(this), 0)) : this._$content.css({
                top: "auto",
                bottom: this._$wrapper.height() - this._$content.position().top - this._$content.height()
            }), this._bottomFixed = !0, this)
        }, n.prototype.releaseBottom = function() {
            return this._bottomFixed ? (this._touch ? clearInterval(this._tempIntervalID) : this._$content.css({
                top: this._$content.position().top,
                bottom: "auto"
            }), delete this._bottomFixed, this._onScroll(), this) : this
        }, n.prototype.setContentTop = function(t) {
            return this._touch ? this._options.vAlignBottom && this._$content.height() < this._$wrapper.height() ? (this._$wrapper.css("overflow-y", "visible"), this._$content.css({
                position: "absolute",
                bottom: 0
            })) : (this._$content.css({
                position: "relative",
                bottom: "auto"
            }), this._$wrapper.css("overflow-y", "scroll"), this._$wrapper.scrollTop(-t)) : this._$content.css("top", t), this
        }, e.SidebarCustomScroll = n, e.SidebarWidget = i
    }).call(e, i(50))
}, function(t, e, i) {
    (function(e) {
        "use strict";
        var n = i(335),
            o = {
                snapshots: function(t) {
                    var i, n, r = t.text.match(o.re.snapshots);
                    if (r)
                        for (i = 0; i < r.length; i++) t.text = t.text.replace(r[i], "<" + t.count++ + ">"), -1 !== r[i].indexOf("amazonaws") && -1 === r[i].indexOf("_thumb") && (n = r[i].split("."), n[n.length - 2] += "_thumb", n = n.join(".")), t.values.push(e.render('<div class="ch-item-snapshot-link"><i class="icon icon-snapshot-small" title="{{title}}"></i> <a href="{{url}}" target="_blank">{{title}}</a></div><div class="ch-item-snapshot-preview"><a target="_blank" href="{{url}}"><img src="{{thumbUrl}}" alt="" class="snapshot-preview"/></a></div>', {
                            title: $.t("Chart Snapshot"),
                            url: r[i],
                            thumbUrl: n || r[i]
                        }));
                    return t
                },
                comments: function(t) {
                    var e, i = t.text.match(o.re.comments);
                    if (i)
                        for (e = 0; e < i.length; e++) t.text = t.text.replace(i[e], "<" + t.count++ + ">"), t.values.push('<a target="_blank" href="' + i[e] + '">' + o.decodeURI(i[e]) + "</a>");
                    return t
                },
                links: function(t) {
                    var e, i, n, r = t.text.match(/((https?:\/\/)|(www\.))(-\.)?([^\s\/?\.#-]+\.)+([^\s<>]*)?/g);
                    if (r)
                        for (e = 0; e < r.length; e++) i = 0 === r[e].indexOf("http://") || 0 === r[e].indexOf("https://") ? "" : "http://", n = r[e].indexOf("https://tradingview.com") >= 0 ? "" : " rel='nofollow' ", t.text = t.text.replace(r[e], "<" + t.count++ + ">"), t.values.push("<a target='_blank'" + n + "href='" + i + r[e] + "'>" + o.decodeURI(r[e]) + "</a>");
                    return t
                },
                symbols: function(t) {
                    var e, i = t.text.match(/(\$)[a-z](?:[._-]?[a-z0-9]){0,19}/gi);
                    if (i)
                        for (e = 0; e < i.length; e++) t.text = t.text.replace(i[e], "<" + t.count++ + ">"), t.values.push("<a target='_blank' href='/chart/" + i[e].substr(1) + "/'>" + i[e] + "</a>");
                    return t
                },
                emails: function(t) {
                    var e, i = t.text.match(/[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+/gi);
                    if (i)
                        for (e = 0; e < i.length; e++) t.text = t.text.replace(i[e], "<" + t.count++ + ">"), t.values.push('<a class="email" href="mailto:' + i[e] + '">' + i[e] + "</a>");
                    return t
                },
                replies: function(t) {
                    for (var e, i = /(\s|^|>|\n)\@([a-z0-9\._\-\u00A0]{2,50})(\s|$|<|\n|,|!|\?|\:|;)/gi; null != (e = i.exec(t.text));) t.text = t.text.replace(e[0], e[1] + "<" + t.count++ + ">" + e[3]), t.values.push("<a target='_blank' href='/u/" + e[2].replace("Â ", " ") + "/'>@" + e[2] + "</a>"), i.lastIndex = 0;
                    return t
                },
                deprecatedCharts: function(t) {
                    var i, n, r = t.text.match(o.re.deprecatedCharts);
                    if (r)
                        for (i = 0; i < r.length; i++) t.text = t.text.replace(r[i], "<" + t.count++ + ">"), n = TradingView.parsePublishedChartUrl(r[i]), t.values.push(e.render('<div class="ch-item-chart-link"><i class="icon icon-snapshot-small" title="' + $.t("Published Idea") + '"></i> <a href="{{chartHref}}" target="_blank" data-id="{{chartId}}"{{#symbol}} data-symbol="{{symbol}}"{{/symbol}}{{#title}} data-title="{{title}}"{{/title}}>' + $.t("Published Idea") + '</a></div><div class="ch-item-chart-preview"><a  href="{{chartHref}}" target="_blank" data-id="{{chartId}}"{{#symbol}} data-symbol="{{symbol}}"{{/symbol}}{{#title}} data-title="{{title}}"{{/title}}><img src="{{imageHref}}" alt="" class="idea-preview"/></a></div>', {
                            chartHref: TradingView.createPublishedChartUrl(n.image_url, n.symbol, n.title),
                            imageHref: TradingView.createPublishedChartImageUrl(n.image_url),
                            chartId: n.image_url,
                            symbol: n.symbol,
                            title: n.title
                        }));
                    return t
                },
                obsceneWords: function(t) {
                    var e = /fuck/gi;
                    return t.text.search(e) >= 0 && (t.text = t.text.replace(e, "<" + t.count++ + ">"), t.values.push(n.getElementHTML(n.heart()))), t
                },
                internalSmilies: function(t) {
                    return n.each(function(e) {
                        t.text.search(e.re) >= 0 && (t.text = t.text.replace(e.re, "<" + t.count++ + ">"), t.values.push(n.getElementHTML(e)))
                    }), t
                }
            };
        o.decodeURI = function(t) {
            if (t.indexOf("%%30%30") >= 0) return "";
            var e;
            try {
                e = decodeURI(t)
            } catch (i) {
                e = t
            }
            return e
        }, o.re = function() {
            function t(t, e, i) {
                return "(?:(?:" + t + ")|(?:" + e + ")|(?:" + i + "))"
            }
            var e = "(?:https://|http://)(?:(?:www|\\w\\w)?(?:\\w+\\.)?\\.tradingview\\.com|webcharts\\d?|localhost\\:6285)",
                i = "#tc[1-9][0-9]*",
                n = TradingView.urlRegExp.publishedImage,
                o = TradingView.urlRegExp.publishedChartOld,
                r = TradingView.urlRegExp.publishedChart,
                s = TradingView.urlRegExp.publishedScript,
                a = TradingView.urlRegExp.amazonawsLinks,
                l = RegExp(e + n + "|" + a, "g"),
                c = RegExp(e + t(o + i, r + i, s + i), "g"),
                h = RegExp(e + t(o, r, s), "g");
            return {
                snapshots: l,
                comments: c,
                deprecatedCharts: h
            }
        }(), o.commonFunctors = [o.snapshots, o.comments, o.links, o.symbols, o.emails, o.replies, o.internalSmilies], o.deprecatedUrlizeFunctors = [o.snapshots, o.comments, o.deprecatedCharts, o.links, o.symbols, o.emails, o.replies, o.internalSmilies], o.chainedUrlize = function(t, e) {
            var i;
            for (t = e[0](t), i = 1; i < e.length; i++) t = e[i](t);
            return t.values && (t.text = t.text.replace(/<(\d+)>/g, function(e, i) {
                return t.values[i] ? t.values[i] : ""
            })), t.text
        }, o.UrlizeBuffer = function(t, e, i) {
            this.text = t, this.count = e || 0, this.values = i || []
        }, t.exports = o
    }).call(e, i(86))
}, function(t, e, i) {
    (function(n) {
        "use strict";

        function o(t) {
            return t && t.__esModule ? t : {
                "default": t
            }
        }

        function r(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var s, a, l, c, h, d, u, p;
        Object.defineProperty(e, "__esModule", {
            value: !0
        }), s = function() {
            function t(t, e) {
                var i, n;
                for (i = 0; i < e.length; i++) n = e[i], n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
            }
            return function(e, i, n) {
                return i && t(e.prototype, i), n && t(e, n), e
            }
        }(), a = i(336), l = o(a), i(337), c = {
            ":agree:": "c_agree",
            ":disagree:": "c_disagree",
            ":okay:": "1f44c",
            ":peace:": "270c",
            ":wait:": "261d",
            ":wave:": "1f44b",
            ":raised_hands:": "1f64c",
            ":pray:": "1f64f",
            ":\\)": "1f603",
            ":D": "1f604",
            ":joy:": "1f602",
            ";\\)": "1f609",
            ":love:": "1f60d",
            ":P": "1f61c",
            ":flushed:": "1f633",
            ":\\|": "1f610",
            ":\\(": "1f641",
            ":weary:": "1f629",
            ":'\\(": "1f622",
            ":cry:": "1f62d",
            ":panic:": "1f631",
            ":rage:": "1f621",
            ":triumph:": "1f624",
            ":mask:": "1f637",
            ":shades:": "1f60e",
            ":sleepy:": "1f634",
            o_O: "1f62e",
            ":halo:": "1f607",
            ":sarcasm:": "1f60f",
            "\\]:-\\)": "1f608",
            ":money_mouth:": "1f911",
            ":zzz:": "1f4a4",
            ":buy:": "c_buy",
            ":sell:": "c_sell",
            ":profit:": "c_profit",
            ":loss:": "c_loss",
            ":uptrend:": "1f4c8",
            ":downtrend:": "1f4c9",
            ":bear:": "c_bear",
            ":bull:": "c_bull",
            ":tip:": "c_tip",
            ":dollar:": "c_dollar",
            ":euro:": "c_euro",
            ":pound:": "c_pound",
            ":yen:": "c_yen",
            ":bitcoin:": "c_bitcoin",
            ":moneybag:": "1f4b0",
            ":credit_card:": "1f4b3",
            ":cookie:": "1f36a",
            ":coffee:": "2615",
            ":popcorn:": "1f37f",
            ":cocktail:": "1f378",
            ":hot:": "1f525",
            ":poop:": "1f4a9",
            ":heart:": "2764",
            ":heartbroken:": "1f494",
            ":sun:": "1f31e",
            ":moon:": "1f31a",
            ":sunflower:": "1f33b",
            ":star:": "1f31f",
            ":sunny:": "2600",
            ":partly_sunny:": "26c5",
            ":cloud:": "2601",
            ":zap:": "26a1",
            ":idea:": "1f4a1",
            ":slot_machine:": "1f3b0",
            ":bullseye:": "1f3af",
            ":rocket:": "1f680",
            ":checkered_flag:": "1f3c1",
            ":alarm_clock:": "23f0",
            ":rip:": "c_rip",
            ":ghost:": "1f47b",
            ":ok:": "1f197",
            ":up:": "1f199",
            ":cool:": "1f192",
            ":new:": "1f195",
            ":free:": "1f193",
            ":sos:": "1f198",
            ":100:": "1f4af",
            ":stop:": "26d4"
        }, h = /\\/g,
            function() {
                for (var t in c) c[t] = {
                    re: RegExp(t, "g"),
                    assetName: "emoji_" + c[t],
                    code: t.replace(h, "")
                };
                c[":'\\("].re = RegExp(":(?:'|&#039;)\\(", "g")
            }(), d = "tv-emoji-wrapper", u = function() {
            function t() {
                r(this, t)
            }
            return s(t, [{
                key: "parseNativeEmoji",
                value: function(t) {
                    return l["default"].parse(t, {
                        folder: "svg",
                        ext: ".svg"
                    })
                }
            }, {
                key: "each",
                value: function(t) {
                    for (var e in c) t(c[e])
                }
            }, {
                key: "get",
                value: function(t) {
                    return c[t]
                }
            }, {
                key: "heart",
                value: function() {
                    return c[":heart:"]
                }
            }, {
                key: "getElement",
                value: function(t) {
                    return n(t.assetName)
                }
            }, {
                key: "getElementHTML",
                value: function(t) {
                    return '<div class="' + d + '" title="' + t.code + '">' + n.code(t.assetName) + "</div>"
                }
            }]), t
        }(), p = new u, e["default"] = p, t.exports = e["default"]
    }).call(e, i(5))
}, function(t, e) {
    var i = function() {
        "use strict";

        function t(t) {
            return document.createTextNode(t)
        }

        function e(t) {
            return t.replace(v, a)
        }

        function i(t, e) {
            return "".concat(e.base, e.size, "/", t, e.ext)
        }

        function n(t, e) {
            for (var i, o, r = t.childNodes, s = r.length; s--;) i = r[s], o = i.nodeType, 3 === o ? e.push(i) : 1 !== o || y.test(i.nodeName) || n(i, e);
            return e
        }

        function o(t, e) {
            return f("ï¸" === e ? t.slice(0, -1) : 3 === t.length && "ï¸" === t.charAt(1) ? t.charAt(0) + t.charAt(2) : t)
        }

        function r(e, i) {
            for (var r, s, a, l, c, h, d, u, p, f, _, g, v, y, w = n(e, []), b = w.length; b--;) {
                for (a = !1, l = document.createDocumentFragment(), c = w[b], h = c.nodeValue, u = 0; d = m.exec(h);) {
                    if (p = d.index, p !== u && l.appendChild(t(h.slice(u, p))), _ = d[0], g = d[1], v = d[2], u = p + _.length, "ï¸Ž" !== v && (y = i.callback(o(g, v), i, v))) {
                        f = new Image, f.onerror = i.onerror, f.setAttribute("draggable", "false"), r = i.attributes(g, v);
                        for (s in r) r.hasOwnProperty(s) && 0 !== s.indexOf("on") && !f.hasAttribute(s) && f.setAttribute(s, r[s]);
                        f.className = i.className, f.alt = _, f.src = y, a = !0, l.appendChild(f)
                    }
                    f || l.appendChild(t(_)), f = null
                }
                a && (u < h.length && l.appendChild(t(h.slice(u))), c.parentNode.replaceChild(l, c))
            }
            return e
        }

        function s(t, i) {
            return u(t, function(t, n, r) {
                var s, a, l, c = t;
                if ("ï¸Ž" !== r && (l = i.callback(o(n, r), i, r))) {
                    c = "<img ".concat('class="', i.className, '" ', 'draggable="false" ', 'alt="', t, '"', ' src="', l, '"'), s = i.attributes(n, r);
                    for (a in s) s.hasOwnProperty(a) && 0 !== a.indexOf("on") && -1 === c.indexOf(" " + a + "=") && (c = c.concat(" ", a, '="', e(s[a]), '"'));
                    c = c.concat(">")
                }
                return c
            })
        }

        function a(t) {
            return g[t]
        }

        function l() {
            return null
        }

        function c(t) {
            return "number" == typeof t ? t + "x" + t : t
        }

        function h(t) {
            var e = "string" == typeof t ? parseInt(t, 16) : t;
            return 65536 > e ? w(e) : (e -= 65536, w(55296 + (e >> 10), 56320 + (1023 & e)))
        }

        function d(t, e) {
            return e && "function" != typeof e || (e = {
                callback: e
            }), ("string" == typeof t ? s : r)(t, {
                callback: e.callback || i,
                attributes: "function" == typeof e.attributes ? e.attributes : l,
                base: "string" == typeof e.base ? e.base : _.base,
                ext: e.ext || _.ext,
                size: e.folder || c(e.size || _.size),
                className: e.className || _.className,
                onerror: e.onerror || _.onerror
            })
        }

        function u(t, e) {
            return (t + "").replace(m, e)
        }

        function p(t) {
            m.lastIndex = 0;
            var e = m.test(t);
            return m.lastIndex = 0, e
        }

        function f(t, e) {
            for (var i = [], n = 0, o = 0, r = 0; r < t.length;) n = t.charCodeAt(r++), o ? (i.push((65536 + (o - 55296 << 10) + (n - 56320)).toString(16)), o = 0) : n >= 55296 && 56319 >= n ? o = n : i.push(n.toString(16));
            return i.join(e || "-")
        }
        var _ = {
                base: ("https:" === location.protocol ? "https:" : "http:") + "//twemoji.maxcdn.com/",
                ext: ".png",
                size: "36x36",
                className: "emoji",
                convert: {
                    fromCodePoint: h,
                    toCodePoint: f
                },
                onerror: function() {
                    this.parentNode && this.parentNode.replaceChild(t(this.alt), this)
                },
                parse: d,
                replace: u,
                test: p
            },
            g = {
                "&": "&amp;",
                "<": "&lt;",
                ">": "&gt;",
                "'": "&#39;",
                '"': "&quot;"
            },
            m = /((?:\ud83c\udde8\ud83c\uddf3|\ud83c\uddfa\ud83c\uddf8|\ud83c\uddf7\ud83c\uddfa|\ud83c\uddf0\ud83c\uddf7|\ud83c\uddef\ud83c\uddf5|\ud83c\uddee\ud83c\uddf9|\ud83c\uddec\ud83c\udde7|\ud83c\uddeb\ud83c\uddf7|\ud83c\uddea\ud83c\uddf8|\ud83c\udde9\ud83c\uddea|\u0039\ufe0f?\u20e3|\u0038\ufe0f?\u20e3|\u0037\ufe0f?\u20e3|\u0036\ufe0f?\u20e3|\u0035\ufe0f?\u20e3|\u0034\ufe0f?\u20e3|\u0033\ufe0f?\u20e3|\u0032\ufe0f?\u20e3|\u0031\ufe0f?\u20e3|\u0030\ufe0f?\u20e3|\u0023\ufe0f?\u20e3|\ud83d\udeb3|\ud83d\udeb1|\ud83d\udeb0|\ud83d\udeaf|\ud83d\udeae|\ud83d\udea6|\ud83d\udea3|\ud83d\udea1|\ud83d\udea0|\ud83d\ude9f|\ud83d\ude9e|\ud83d\ude9d|\ud83d\ude9c|\ud83d\ude9b|\ud83d\ude98|\ud83d\ude96|\ud83d\ude94|\ud83d\ude90|\ud83d\ude8e|\ud83d\ude8d|\ud83d\ude8b|\ud83d\ude8a|\ud83d\ude88|\ud83d\ude86|\ud83d\ude82|\ud83d\ude81|\ud83d\ude36|\ud83d\ude34|\ud83d\ude2f|\ud83d\ude2e|\ud83d\ude2c|\ud83d\ude27|\ud83d\ude26|\ud83d\ude1f|\ud83d\ude1b|\ud83d\ude19|\ud83d\ude17|\ud83d\ude15|\ud83d\ude11|\ud83d\ude10|\ud83d\ude0e|\ud83d\ude08|\ud83d\ude07|\ud83d\ude00|\ud83d\udd67|\ud83d\udd66|\ud83d\udd65|\ud83d\udd64|\ud83d\udd63|\ud83d\udd62|\ud83d\udd61|\ud83d\udd60|\ud83d\udd5f|\ud83d\udd5e|\ud83d\udd5d|\ud83d\udd5c|\ud83d\udd2d|\ud83d\udd2c|\ud83d\udd15|\ud83d\udd09|\ud83d\udd08|\ud83d\udd07|\ud83d\udd06|\ud83d\udd05|\ud83d\udd04|\ud83d\udd02|\ud83d\udd01|\ud83d\udd00|\ud83d\udcf5|\ud83d\udcef|\ud83d\udced|\ud83d\udcec|\ud83d\udcb7|\ud83d\udcb6|\ud83d\udcad|\ud83d\udc6d|\ud83d\udc6c|\ud83d\udc65|\ud83d\udc2a|\ud83d\udc16|\ud83d\udc15|\ud83d\udc13|\ud83d\udc10|\ud83d\udc0f|\ud83d\udc0b|\ud83d\udc0a|\ud83d\udc09|\ud83d\udc08|\ud83d\udc07|\ud83d\udc06|\ud83d\udc05|\ud83d\udc04|\ud83d\udc03|\ud83d\udc02|\ud83d\udc01|\ud83d\udc00|\ud83c\udfe4|\ud83c\udfc9|\ud83c\udfc7|\ud83c\udf7c|\ud83c\udf50|\ud83c\udf4b|\ud83c\udf33|\ud83c\udf32|\ud83c\udf1e|\ud83c\udf1d|\ud83c\udf1c|\ud83c\udf1a|\ud83c\udf18|\ud83c\udccf|\ud83c\udd8e|\ud83c\udd91|\ud83c\udd92|\ud83c\udd93|\ud83c\udd94|\ud83c\udd95|\ud83c\udd96|\ud83c\udd97|\ud83c\udd98|\ud83c\udd99|\ud83c\udd9a|\ud83d\udc77|\ud83d\udec5|\ud83d\udec4|\ud83d\udec3|\ud83d\udec2|\ud83d\udec1|\ud83d\udebf|\ud83d\udeb8|\ud83d\udeb7|\ud83d\udeb5|\ud83c\ude01|\ud83c\ude32|\ud83c\ude33|\ud83c\ude34|\ud83c\ude35|\ud83c\ude36|\ud83c\ude38|\ud83c\ude39|\ud83c\ude3a|\ud83c\ude50|\ud83c\ude51|\ud83c\udf00|\ud83c\udf01|\ud83c\udf02|\ud83c\udf03|\ud83c\udf04|\ud83c\udf05|\ud83c\udf06|\ud83c\udf07|\ud83c\udf08|\ud83c\udf09|\ud83c\udf0a|\ud83c\udf0b|\ud83c\udf0c|\ud83c\udf0f|\ud83c\udf11|\ud83c\udf13|\ud83c\udf14|\ud83c\udf15|\ud83c\udf19|\ud83c\udf1b|\ud83c\udf1f|\ud83c\udf20|\ud83c\udf30|\ud83c\udf31|\ud83c\udf34|\ud83c\udf35|\ud83c\udf37|\ud83c\udf38|\ud83c\udf39|\ud83c\udf3a|\ud83c\udf3b|\ud83c\udf3c|\ud83c\udf3d|\ud83c\udf3e|\ud83c\udf3f|\ud83c\udf40|\ud83c\udf41|\ud83c\udf42|\ud83c\udf43|\ud83c\udf44|\ud83c\udf45|\ud83c\udf46|\ud83c\udf47|\ud83c\udf48|\ud83c\udf49|\ud83c\udf4a|\ud83c\udf4c|\ud83c\udf4d|\ud83c\udf4e|\ud83c\udf4f|\ud83c\udf51|\ud83c\udf52|\ud83c\udf53|\ud83c\udf54|\ud83c\udf55|\ud83c\udf56|\ud83c\udf57|\ud83c\udf58|\ud83c\udf59|\ud83c\udf5a|\ud83c\udf5b|\ud83c\udf5c|\ud83c\udf5d|\ud83c\udf5e|\ud83c\udf5f|\ud83c\udf60|\ud83c\udf61|\ud83c\udf62|\ud83c\udf63|\ud83c\udf64|\ud83c\udf65|\ud83c\udf66|\ud83c\udf67|\ud83c\udf68|\ud83c\udf69|\ud83c\udf6a|\ud83c\udf6b|\ud83c\udf6c|\ud83c\udf6d|\ud83c\udf6e|\ud83c\udf6f|\ud83c\udf70|\ud83c\udf71|\ud83c\udf72|\ud83c\udf73|\ud83c\udf74|\ud83c\udf75|\ud83c\udf76|\ud83c\udf77|\ud83c\udf78|\ud83c\udf79|\ud83c\udf7a|\ud83c\udf7b|\ud83c\udf80|\ud83c\udf81|\ud83c\udf82|\ud83c\udf83|\ud83c\udf84|\ud83c\udf85|\ud83c\udf86|\ud83c\udf87|\ud83c\udf88|\ud83c\udf89|\ud83c\udf8a|\ud83c\udf8b|\ud83c\udf8c|\ud83c\udf8d|\ud83c\udf8e|\ud83c\udf8f|\ud83c\udf90|\ud83c\udf91|\ud83c\udf92|\ud83c\udf93|\ud83c\udfa0|\ud83c\udfa1|\ud83c\udfa2|\ud83c\udfa3|\ud83c\udfa4|\ud83c\udfa5|\ud83c\udfa6|\ud83c\udfa7|\ud83c\udfa8|\ud83c\udfa9|\ud83c\udfaa|\ud83c\udfab|\ud83c\udfac|\ud83c\udfad|\ud83c\udfae|\ud83c\udfaf|\ud83c\udfb0|\ud83c\udfb1|\ud83c\udfb2|\ud83c\udfb3|\ud83c\udfb4|\ud83c\udfb5|\ud83c\udfb6|\ud83c\udfb7|\ud83c\udfb8|\ud83c\udfb9|\ud83c\udfba|\ud83c\udfbb|\ud83c\udfbc|\ud83c\udfbd|\ud83c\udfbe|\ud83c\udfbf|\ud83c\udfc0|\ud83c\udfc1|\ud83c\udfc2|\ud83c\udfc3|\ud83c\udfc4|\ud83c\udfc6|\ud83c\udfc8|\ud83c\udfca|\ud83c\udfe0|\ud83c\udfe1|\ud83c\udfe2|\ud83c\udfe3|\ud83c\udfe5|\ud83c\udfe6|\ud83c\udfe7|\ud83c\udfe8|\ud83c\udfe9|\ud83c\udfea|\ud83c\udfeb|\ud83c\udfec|\ud83c\udfed|\ud83c\udfee|\ud83c\udfef|\ud83c\udff0|\ud83d\udc0c|\ud83d\udc0d|\ud83d\udc0e|\ud83d\udc11|\ud83d\udc12|\ud83d\udc14|\ud83d\udc17|\ud83d\udc18|\ud83d\udc19|\ud83d\udc1a|\ud83d\udc1b|\ud83d\udc1c|\ud83d\udc1d|\ud83d\udc1e|\ud83d\udc1f|\ud83d\udc20|\ud83d\udc21|\ud83d\udc22|\ud83d\udc23|\ud83d\udc24|\ud83d\udc25|\ud83d\udc26|\ud83d\udc27|\ud83d\udc28|\ud83d\udc29|\ud83d\udc2b|\ud83d\udc2c|\ud83d\udc2d|\ud83d\udc2e|\ud83d\udc2f|\ud83d\udc30|\ud83d\udc31|\ud83d\udc32|\ud83d\udc33|\ud83d\udc34|\ud83d\udc35|\ud83d\udc36|\ud83d\udc37|\ud83d\udc38|\ud83d\udc39|\ud83d\udc3a|\ud83d\udc3b|\ud83d\udc3c|\ud83d\udc3d|\ud83d\udc3e|\ud83d\udc40|\ud83d\udc42|\ud83d\udc43|\ud83d\udc44|\ud83d\udc45|\ud83d\udc46|\ud83d\udc47|\ud83d\udc48|\ud83d\udc49|\ud83d\udc4a|\ud83d\udc4b|\ud83d\udc4c|\ud83d\udc4d|\ud83d\udc4e|\ud83d\udc4f|\ud83d\udc50|\ud83d\udc51|\ud83d\udc52|\ud83d\udc53|\ud83d\udc54|\ud83d\udc55|\ud83d\udc56|\ud83d\udc57|\ud83d\udc58|\ud83d\udc59|\ud83d\udc5a|\ud83d\udc5b|\ud83d\udc5c|\ud83d\udc5d|\ud83d\udc5e|\ud83d\udc5f|\ud83d\udc60|\ud83d\udc61|\ud83d\udc62|\ud83d\udc63|\ud83d\udc64|\ud83d\udc66|\ud83d\udc67|\ud83d\udc68|\ud83d\udc69|\ud83d\udc6a|\ud83d\udc6b|\ud83d\udc6e|\ud83d\udc6f|\ud83d\udc70|\ud83d\udc71|\ud83d\udc72|\ud83d\udc73|\ud83d\udc74|\ud83d\udc75|\ud83d\udc76|\ud83d\udeb4|\ud83d\udc78|\ud83d\udc79|\ud83d\udc7a|\ud83d\udc7b|\ud83d\udc7c|\ud83d\udc7d|\ud83d\udc7e|\ud83d\udc7f|\ud83d\udc80|\ud83d\udc81|\ud83d\udc82|\ud83d\udc83|\ud83d\udc84|\ud83d\udc85|\ud83d\udc86|\ud83d\udc87|\ud83d\udc88|\ud83d\udc89|\ud83d\udc8a|\ud83d\udc8b|\ud83d\udc8c|\ud83d\udc8d|\ud83d\udc8e|\ud83d\udc8f|\ud83d\udc90|\ud83d\udc91|\ud83d\udc92|\ud83d\udc93|\ud83d\udc94|\ud83d\udc95|\ud83d\udc96|\ud83d\udc97|\ud83d\udc98|\ud83d\udc99|\ud83d\udc9a|\ud83d\udc9b|\ud83d\udc9c|\ud83d\udc9d|\ud83d\udc9e|\ud83d\udc9f|\ud83d\udca0|\ud83d\udca1|\ud83d\udca2|\ud83d\udca3|\ud83d\udca4|\ud83d\udca5|\ud83d\udca6|\ud83d\udca7|\ud83d\udca8|\ud83d\udca9|\ud83d\udcaa|\ud83d\udcab|\ud83d\udcac|\ud83d\udcae|\ud83d\udcaf|\ud83d\udcb0|\ud83d\udcb1|\ud83d\udcb2|\ud83d\udcb3|\ud83d\udcb4|\ud83d\udcb5|\ud83d\udcb8|\ud83d\udcb9|\ud83d\udcba|\ud83d\udcbb|\ud83d\udcbc|\ud83d\udcbd|\ud83d\udcbe|\ud83d\udcbf|\ud83d\udcc0|\ud83d\udcc1|\ud83d\udcc2|\ud83d\udcc3|\ud83d\udcc4|\ud83d\udcc5|\ud83d\udcc6|\ud83d\udcc7|\ud83d\udcc8|\ud83d\udcc9|\ud83d\udcca|\ud83d\udccb|\ud83d\udccc|\ud83d\udccd|\ud83d\udcce|\ud83d\udccf|\ud83d\udcd0|\ud83d\udcd1|\ud83d\udcd2|\ud83d\udcd3|\ud83d\udcd4|\ud83d\udcd5|\ud83d\udcd6|\ud83d\udcd7|\ud83d\udcd8|\ud83d\udcd9|\ud83d\udcda|\ud83d\udcdb|\ud83d\udcdc|\ud83d\udcdd|\ud83d\udcde|\ud83d\udcdf|\ud83d\udce0|\ud83d\udce1|\ud83d\udce2|\ud83d\udce3|\ud83d\udce4|\ud83d\udce5|\ud83d\udce6|\ud83d\udce7|\ud83d\udce8|\ud83d\udce9|\ud83d\udcea|\ud83d\udceb|\ud83d\udcee|\ud83d\udcf0|\ud83d\udcf1|\ud83d\udcf2|\ud83d\udcf3|\ud83d\udcf4|\ud83d\udcf6|\ud83d\udcf7|\ud83d\udcf9|\ud83d\udcfa|\ud83d\udcfb|\ud83d\udcfc|\ud83d\udd03|\ud83d\udd0a|\ud83d\udd0b|\ud83d\udd0c|\ud83d\udd0d|\ud83d\udd0e|\ud83d\udd0f|\ud83d\udd10|\ud83d\udd11|\ud83d\udd12|\ud83d\udd13|\ud83d\udd14|\ud83d\udd16|\ud83d\udd17|\ud83d\udd18|\ud83d\udd19|\ud83d\udd1a|\ud83d\udd1b|\ud83d\udd1c|\ud83d\udd1d|\ud83d\udd1e|\ud83d\udd1f|\ud83d\udd20|\ud83d\udd21|\ud83d\udd22|\ud83d\udd23|\ud83d\udd24|\ud83d\udd25|\ud83d\udd26|\ud83d\udd27|\ud83d\udd28|\ud83d\udd29|\ud83d\udd2a|\ud83d\udd2b|\ud83d\udd2e|\ud83d\udd2f|\ud83d\udd30|\ud83d\udd31|\ud83d\udd32|\ud83d\udd33|\ud83d\udd34|\ud83d\udd35|\ud83d\udd36|\ud83d\udd37|\ud83d\udd38|\ud83d\udd39|\ud83d\udd3a|\ud83d\udd3b|\ud83d\udd3c|\ud83d\udd3d|\ud83d\udd50|\ud83d\udd51|\ud83d\udd52|\ud83d\udd53|\ud83d\udd54|\ud83d\udd55|\ud83d\udd56|\ud83d\udd57|\ud83d\udd58|\ud83d\udd59|\ud83d\udd5a|\ud83d\udd5b|\ud83d\uddfb|\ud83d\uddfc|\ud83d\uddfd|\ud83d\uddfe|\ud83d\uddff|\ud83d\ude01|\ud83d\ude02|\ud83d\ude03|\ud83d\ude04|\ud83d\ude05|\ud83d\ude06|\ud83d\ude09|\ud83d\ude0a|\ud83d\ude0b|\ud83d\ude0c|\ud83d\ude0d|\ud83d\ude0f|\ud83d\ude12|\ud83d\ude13|\ud83d\ude14|\ud83d\ude16|\ud83d\ude18|\ud83d\ude1a|\ud83d\ude1c|\ud83d\ude1d|\ud83d\ude1e|\ud83d\ude20|\ud83d\ude21|\ud83d\ude22|\ud83d\ude23|\ud83d\ude24|\ud83d\ude25|\ud83d\ude28|\ud83d\ude29|\ud83d\ude2a|\ud83d\ude2b|\ud83d\ude2d|\ud83d\ude30|\ud83d\ude31|\ud83d\ude32|\ud83d\ude33|\ud83d\ude35|\ud83d\ude37|\ud83d\ude38|\ud83d\ude39|\ud83d\ude3a|\ud83d\ude3b|\ud83d\ude3c|\ud83d\ude3d|\ud83d\ude3e|\ud83d\ude3f|\ud83d\ude40|\ud83d\ude45|\ud83d\ude46|\ud83d\ude47|\ud83d\ude48|\ud83d\ude49|\ud83d\ude4a|\ud83d\ude4b|\ud83d\ude4c|\ud83d\ude4d|\ud83d\ude4e|\ud83d\ude4f|\ud83d\ude80|\ud83d\ude83|\ud83d\ude84|\ud83d\ude85|\ud83d\ude87|\ud83d\ude89|\ud83d\ude8c|\ud83d\ude8f|\ud83d\ude91|\ud83d\ude92|\ud83d\ude93|\ud83d\ude95|\ud83d\ude97|\ud83d\ude99|\ud83d\ude9a|\ud83d\udea2|\ud83d\udea4|\ud83d\udea5|\ud83d\udea7|\ud83d\udea8|\ud83d\udea9|\ud83d\udeaa|\ud83d\udeab|\ud83d\udeac|\ud83d\udead|\ud83d\udeb2|\ud83d\udeb6|\ud83d\udeb9|\ud83d\udeba|\ud83d\udebb|\ud83d\udebc|\ud83d\udebd|\ud83d\udebe|\ud83d\udec0|\ud83c\udde6|\ud83c\udde7|\ud83c\udde8|\ud83c\udde9|\ud83c\uddea|\ud83c\uddeb|\ud83c\uddec|\ud83c\udded|\ud83c\uddee|\ud83c\uddef|\ud83c\uddf0|\ud83c\uddf1|\ud83c\uddf2|\ud83c\uddf3|\ud83c\uddf4|\ud83c\uddf5|\ud83c\uddf6|\ud83c\uddf7|\ud83c\uddf8|\ud83c\uddf9|\ud83c\uddfa|\ud83c\uddfb|\ud83c\uddfc|\ud83c\uddfd|\ud83c\uddfe|\ud83c\uddff|\ud83c\udf0d|\ud83c\udf0e|\ud83c\udf10|\ud83c\udf12|\ud83c\udf16|\ud83c\udf17|\ue50a|\u27b0|\u2797|\u2796|\u2795|\u2755|\u2754|\u2753|\u274e|\u274c|\u2728|\u270b|\u270a|\u2705|\u26ce|\u23f3|\u23f0|\u23ec|\u23eb|\u23ea|\u23e9|\u27bf|\u00a9|\u00ae)|(?:(?:\ud83c\udc04|\ud83c\udd70|\ud83c\udd71|\ud83c\udd7e|\ud83c\udd7f|\ud83c\ude02|\ud83c\ude1a|\ud83c\ude2f|\ud83c\ude37|\u3299|\u303d|\u3030|\u2b55|\u2b50|\u2b1c|\u2b1b|\u2b07|\u2b06|\u2b05|\u2935|\u2934|\u27a1|\u2764|\u2757|\u2747|\u2744|\u2734|\u2733|\u2716|\u2714|\u2712|\u270f|\u270c|\u2709|\u2708|\u2702|\u26fd|\u26fa|\u26f5|\u26f3|\u26f2|\u26ea|\u26d4|\u26c5|\u26c4|\u26be|\u26bd|\u26ab|\u26aa|\u26a1|\u26a0|\u2693|\u267f|\u267b|\u3297|\u2666|\u2665|\u2663|\u2660|\u2653|\u2652|\u2651|\u2650|\u264f|\u264e|\u264d|\u264c|\u264b|\u264a|\u2649|\u2648|\u263a|\u261d|\u2615|\u2614|\u2611|\u260e|\u2601|\u2600|\u25fe|\u25fd|\u25fc|\u25fb|\u25c0|\u25b6|\u25ab|\u25aa|\u24c2|\u231b|\u231a|\u21aa|\u21a9|\u2199|\u2198|\u2197|\u2196|\u2195|\u2194|\u2139|\u2122|\u2049|\u203c|\u2668)([\uFE0E\uFE0F]?)))/g,
            v = /[&<>'"]/g,
            y = /IFRAME|NOFRAMES|NOSCRIPT|SCRIPT|SELECT|STYLE|TEXTAREA|[a-z]/,
            w = String.fromCharCode;
        return _
    }();
    t.exports = i
}, function(t, e, i) {
    (function(t) {
        t.register({
            emoji_1f192: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#yrhZKNLT-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#3b88c3" d="M37 5a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v28a4 4 0 0 0 4 4h28a4 4 0 0 0 4-4V5z"/><path fill="#fff" d="M6.97 24.142c1.022 0 3.012-.336 3.012-1.57 0-.503-.35-.938-.87-.938-.573 0-.965.49-2.142.49-1.737 0-2.633-1.47-2.633-3.18 0-1.666.91-3.095 2.633-3.095 1.177 0 1.653.58 2.227.58.63 0 .925-.63.925-.96 0-1.35-2.115-1.66-3.152-1.66-2.843 0-4.818 2.25-4.818 5.15 0 2.912 1.96 5.153 4.818 5.153"/><path fill="#fff" d="M17.317 18.986c0 1.695-.882 3.222-2.633 3.222-1.75 0-2.634-1.527-2.634-3.222 0-1.71.855-3.222 2.634-3.222 1.78 0 2.633 1.513 2.633 3.222m-7.452 0c0 2.914 1.96 5.155 4.82 5.155 2.814 0 4.818-2.31 4.818-5.15 0-2.9-1.948-5.15-4.82-5.15-2.843 0-4.818 2.26-4.818 5.16m17.56 0c0 1.7-.882 3.22-2.634 3.22-1.75 0-2.63-1.52-2.63-3.22 0-1.71.86-3.22 2.64-3.22 1.78 0 2.64 1.52 2.64 3.22m-7.45 0c0 2.92 1.96 5.16 4.82 5.16 2.82 0 4.82-2.31 4.82-5.15 0-2.9-1.94-5.15-4.82-5.15-2.84 0-4.81 2.255-4.81 5.154m10.218 3.97c0 .7.448 1.09 1.05 1.09.603 0 1.053-.392 1.053-1.092v-7.04h2.49c.714 0 1.02-.532 1.01-1.01A.983.983 0 0 0 34.8 14h-3.51c-.686 0-1.092.45-1.092 1.15v7.816z"/></g></svg>',
            emoji_1f193: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#kLtw4NTy-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#3b88c3" d="M37 5a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v28a4 4 0 0 0 4 4h28a4 4 0 0 0 4-4V5z"/><path fill="#fff" d="M2.836 24.416c0 .738.504 1.404 1.405 1.404h4.61c.8 0 1.21-.612 1.21-1.242 0-.612-.39-1.243-1.2-1.243H5.54v-2.628h2.79c.865 0 1.297-.613 1.297-1.224 0-.63-.432-1.26-1.296-1.26H5.54v-3.926c0-.9-.578-1.405-1.35-1.405-.777 0-1.353.505-1.353 1.405v10.12zm10.694-4.268h1.853c.99 0 1.675.594 1.675 1.603 0 1.03-.684 1.59-1.675 1.59H13.53v-3.19zm-2.702 4.267c0 .864.486 1.404 1.387 1.404h3.168c2.773 0 4.484-1.25 4.484-4.07 0-1.98-1.495-3.12-3.33-3.41l3.06-3.28c.252-.27.36-.54.36-.8 0-.7-.558-1.39-1.35-1.39-.325 0-.757.126-1.045.47l-3.997 4.85h-.036v-3.9c0-.9-.58-1.406-1.36-1.406-.78 0-1.35.5-1.35 1.4v10.12zm9.65-.162c0 .9.45 1.566 1.403 1.566h4.47c.87 0 1.28-.62 1.28-1.25 0-.61-.43-1.24-1.28-1.24h-3.17V20.7h2.95c.89 0 1.32-.61 1.32-1.24 0-.61-.45-1.24-1.31-1.24h-2.95v-2.74h3.33c.87 0 1.28-.61 1.28-1.242 0-.61-.43-1.24-1.28-1.24h-4.65c-.79 0-1.38.54-1.38 1.35v9.903zm7.972 0c0 .9.45 1.566 1.405 1.566h4.465c.863 0 1.277-.62 1.277-1.25 0-.61-.43-1.24-1.277-1.24h-3.17V20.7h2.953c.883 0 1.315-.61 1.315-1.24 0-.61-.45-1.24-1.315-1.24H31.15v-2.74h3.332c.864 0 1.278-.61 1.278-1.242 0-.61-.432-1.24-1.278-1.24h-4.646c-.79 0-1.385.54-1.385 1.35v9.903z"/></g></svg>',
            emoji_1f195: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#gO11KV3v-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#3b88c3" d="M37 5a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v28a4 4 0 0 0 4 4h28a4 4 0 0 0 4-4V5z"/><path fill="#fff" d="M2.527 23.88c0 .85.544 1.325 1.275 1.325.323 0 .85-.255 1.07-.56l5.39-7.192h.033v6.426c0 .85.544 1.32 1.275 1.32.73 0 1.275-.48 1.275-1.33v-9.65c0-.85-.544-1.33-1.275-1.33-.323 0-.833.25-1.07.56l-5.39 7.11h-.033v-6.34c0-.85-.544-1.33-1.275-1.33-.73 0-1.275.47-1.275 1.32v9.65zm11.067-.256c0 .85.425 1.48 1.326 1.48h4.215c.816 0 1.207-.58 1.207-1.174 0-.578-.408-1.173-1.207-1.173h-2.992v-2.482h2.788c.84 0 1.25-.578 1.25-1.172 0-.58-.42-1.173-1.24-1.173h-2.79v-2.584h3.15c.82 0 1.21-.578 1.21-1.173 0-.578-.41-1.173-1.21-1.173h-4.39c-.75 0-1.31.51-1.31 1.274v9.35zm7.31-.12c-.05.22-.068.34-.068.58 0 .543.46 1.12 1.207 1.12.816 0 1.207-.475 1.36-1.223l1.444-7.22h.035l2.21 7.45c.187.61.697 1.01 1.326 1.01.63 0 1.138-.39 1.326-1l2.21-7.44h.032L33.43 24c.16.75.55 1.222 1.36 1.222.75 0 1.21-.58 1.21-1.122a2.04 2.04 0 0 0-.07-.58l-2.15-9.28c-.17-.715-.73-1.326-1.68-1.326a1.73 1.73 0 0 0-1.68 1.24l-1.97 6.56h-.04l-1.97-6.56a1.733 1.733 0 0 0-1.682-1.24c-.952 0-1.514.61-1.684 1.325l-2.16 9.28z"/></g></svg>',
            emoji_1f197: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#3IzCEahj-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#3b88c3" d="M37 5a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v28a4 4 0 0 0 4 4h28a4 4 0 0 0 4-4V5z"/><path fill="#fff" d="M15.702 19.545c0 2.904-1.512 5.52-4.513 5.52-3 0-4.52-2.616-4.52-5.52 0-2.93 1.46-5.52 4.51-5.52s4.51 2.59 4.51 5.52m-12.77 0c0 4.992 3.36 8.833 8.25 8.833 4.825 0 8.257-3.96 8.257-8.833 0-4.97-3.337-8.833-8.258-8.833-4.876 0-8.26 3.864-8.26 8.833m18.002 6.912c0 .984.72 1.776 1.8 1.776 1.032 0 1.8-.672 1.8-1.776v-5.185l5.906 6.29c.264.288.72.672 1.39.672.913 0 1.78-.696 1.78-1.728 0-.624-.386-1.128-1.177-1.92l-4.53-4.466 5.546-5.783c.576-.576 1.01-1.103 1.01-1.824 0-1.126-.89-1.653-1.875-1.653-.69 0-1.15.406-1.82 1.127l-6.212 6.72v-6.12c0-.937-.72-1.73-1.8-1.73-1.03.002-1.8.674-1.8 1.73V26.46z"/></g></svg>',
            emoji_1f198: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#qHOa1ehF-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#dd2e44" d="M37 5a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v28a4 4 0 0 0 4 4h28a4 4 0 0 0 4-4V5z"/><path fill="#fff" d="M10.762 24.482c0-.78-.52-1.48-1.34-1.48-.82 0-1.46.6-2.66.6-.86 0-1.64-.46-1.64-1.3 0-2.06 6.68-.74 6.68-5.9 0-2.862-2.36-4.643-5.12-4.643-1.54 0-4.862.36-4.862 2.24 0 .78.52 1.42 1.34 1.42.94 0 2.06-.78 3.36-.78 1.322 0 2.042.74 2.042 1.72 0 2.36-6.682.94-6.682 5.58 0 2.8 2.3 4.54 4.962 4.54 1.12 0 3.92-.42 3.92-2m12-5.36c0 2.42-1.26 4.6-3.76 4.6s-3.76-2.18-3.76-4.6c0-2.44 1.22-4.6 3.76-4.6s3.76 2.16 3.76 4.6m-10.642 0c0 4.16 2.8 7.36 6.882 7.36 4.02 0 6.88-3.3 6.88-7.36 0-4.14-2.78-7.36-6.88-7.36-4.06 0-6.882 3.22-6.882 7.36m23.023 5.36c0-.78-.52-1.48-1.342-1.48-.82 0-1.45.6-2.66.6-.85 0-1.64-.46-1.64-1.3 0-2.06 6.69-.74 6.69-5.9 0-2.86-2.36-4.65-5.12-4.65-1.54 0-4.86.36-4.86 2.24 0 .78.52 1.42 1.34 1.42.94 0 2.067-.78 3.36-.78 1.32 0 2.047.74 2.047 1.72 0 2.36-6.682.94-6.682 5.58 0 2.8 2.3 4.54 4.96 4.54 1.124 0 3.925-.42 3.925-2"/></g></svg>',
            emoji_1f199: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#IMmJKrgi-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#3b88c3" d="M37 5a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v28a4 4 0 0 0 4 4h28a4 4 0 0 0 4-4V5z"/><path fill="#fff" d="M3.28 25.438c0 1.05.673 1.638 1.576 1.638s1.574-.59 1.574-1.64V18.11c0-1.932 1.24-3.464 3.234-3.464 1.91 0 3.212 1.615 3.212 3.463v7.32c0 1.05.672 1.64 1.575 1.64.91 0 1.58-.59 1.58-1.64v-7.49c0-3.53-2.9-6.2-6.36-6.2-3.5 0-6.38 2.62-6.38 6.19v7.5zm17.66-5.71h2.143c1.323 0 2.163.965 2.163 2.225s-.84 2.225-2.163 2.225H20.94v-4.45zm-3.148 5.584c0 .987.587 1.638 1.637 1.638h3.71c3.08 0 5.37-2.016 5.37-5.018 0-3.066-2.38-4.976-5.25-4.976h-2.33v-3.444c0-1.05-.67-1.638-1.58-1.638-.905 0-1.576.588-1.576 1.638v11.8zm12.726.46c0 .883.65 1.43 1.512 1.43.84 0 1.51-.567 1.51-1.428V17.69c0-.86-.67-1.43-1.51-1.43-.862 0-1.512.548-1.512 1.43v8.083zm-.127-12.387a1.638 1.638 0 1 0 1.64-1.637 1.64 1.64 0 0 0-1.64 1.637"/></g></svg>',
            emoji_1f31a: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#jbed5Jzl-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#66757f" d="M37 19c0-9.94-8.06-18-18-18S1 9.06 1 19s8.06 18 18 18 18-8.06 18-18"/><path fill="#5b6876" d="M14 29.5a3.5 3.5 0 0 0-7 0 3.5 3.5 0 0 0 7 0m15-21A3.5 3.5 0 0 0 25.5 5 3.5 3.5 0 0 0 22 8.5a3.5 3.5 0 0 0 3.5 3.5A3.5 3.5 0 0 0 29 8.5M25 32a2 2 0 1 0-4 0 2 2 0 0 0 4 0M3 19a1 1 0 1 1 2 0 1 1 0 0 1-2 0m27 9a1 1 0 1 1 1.998-.002A1 1 0 0 1 30 28M16 6a1 1 0 0 1 2 0 1 1 0 0 1-2 0m19 12a2 2 0 1 0-4 0 2 2 0 0 0 4 0M9 11a2 2 0 1 0-4 0 2 2 0 0 0 4 0"/><path fill="#4f585d" d="M19 12.096c-7 0-9 2.618-9 1.38C10 12.24 14 9 19 9s9 3.24 9 4.477-2-1.38-9-1.38M28 22a3 3 0 1 0-6 0 3 3 0 0 0 6 0m-12 0a3 3 0 1 0-6 0 3 3 0 0 0 6 0"/></g></svg>',
            emoji_1f31e: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#eg3u6ll1-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#f4900c" d="M19 1.2c-.39 0-.745.218-.92.565l-1.8 3.554-3.025-2.6a1.044 1.044 0 0 0-1.066-.17 1.03 1.03 0 0 0-.64.87l-.3 3.97-3.79-1.24a1.035 1.035 0 0 0-1.3 1.3l1.24 3.79-3.98.3a1.04 1.04 0 0 0-.88.63 1.04 1.04 0 0 0 .17 1.07l2.6 3.024-3.56 1.8a1.032 1.032 0 0 0 0 1.84l3.554 1.8-2.6 3.02a1.032 1.032 0 0 0 .706 1.7l3.97.307-1.24 3.786c-.12.37-.022.775.25 1.05a1.037 1.037 0 0 0 1.05.25l3.79-1.24.305 3.97a1.03 1.03 0 0 0 1.7.705l3.03-2.594 1.8 3.555a1.032 1.032 0 0 0 1.84 0l1.8-3.555 3.025 2.593a1.036 1.036 0 0 0 1.068.17c.36-.15.606-.49.637-.88l.304-3.973 3.782 1.24a1.03 1.03 0 0 0 1.3-1.3l-1.24-3.79 3.975-.31a1.032 1.032 0 0 0 .704-1.7l-2.59-3.02 3.555-1.8a1.033 1.033 0 0 0 0-1.84l-3.55-1.8 2.6-3.025a1.033 1.033 0 0 0-.71-1.7l-3.974-.3 1.24-3.79a1.03 1.03 0 0 0-.25-1.05 1.028 1.028 0 0 0-1.05-.253l-3.78 1.26-.3-3.97a1.037 1.037 0 0 0-1.03-.957c-.24 0-.48.087-.67.248l-3.033 2.6-1.8-3.555A1.03 1.03 0 0 0 19 1.2"/><path fill="#ffcc4d" d="M32 19c0-7.18-5.82-13-13-13S6 11.82 6 19s5.82 13 13 13 13-5.82 13-13"/><path fill="#f4900c" d="M19 13.53c-6.222 0-8 2.327-8 1.228 0-1.102 3.556-3.98 8-3.98s8 2.878 8 3.98c0 1.1-1.777-1.23-8-1.23m8 8.806a2.667 2.667 0 1 0-5.334 0 2.667 2.667 0 0 0 5.334 0m-10.666 0a2.668 2.668 0 1 0-5.336 0 2.668 2.668 0 0 0 5.336 0"/></g></svg>',
            emoji_1f31f: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#J69XL0XT-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M29.84 19.362c-.987-1.044-1.633-3.067-1.437-4.493l.89-6.45c.2-1.43-.7-2.09-1.993-1.47l-5.85 2.8c-1.296.62-3.41.61-4.7-.02l-5.826-2.84c-1.29-.63-2.194.02-2.008 1.45l.843 6.45c.18 1.42-.48 3.44-1.47 4.48l-4.5 4.69c-.99 1.03-.65 2.1.76 2.36l6.37 1.19c1.41.26 3.11 1.52 3.79 2.79l3.05 5.73c.67 1.27 1.79 1.272 2.47.01l3.09-5.715c.69-1.265 2.4-2.506 3.82-2.758l6.37-1.14c1.41-.255 1.76-1.316.77-2.36l-4.46-4.72z"/><path fill="#ffd983" d="M10.783 34.82c1.023-1.414 2.446-4.918 1.717-5.448-.728-.53-3.607 1.91-4.63 3.323-1.022 1.413-.935 2.668-.13 3.254.803.58 2.02.28 3.043-1.13m19.347-2.13c-1.02-1.42-3.9-3.86-4.63-3.33-.728.53.695 4.03 1.72 5.44 1.022 1.41 2.237 1.72 3.042 1.13.804-.59.89-1.84-.13-3.26M17.625 3.71c0 1.745.898 5.42 1.8 5.42.898 0 1.798-3.675 1.797-5.42 0-1.747-.804-2.712-1.8-2.71-.994-.002-1.798.962-1.798 2.71m16.18 9.26c-1.655.54-4.858 2.534-4.58 3.396.278.857 4.038.58 5.69.04 1.656-.54 2.322-1.605 2.013-2.555-.307-.94-1.468-1.42-3.123-.88m-30.72 3.44c1.654.54 5.413.82 5.693-.04.276-.85-2.928-2.85-4.58-3.39-1.655-.54-2.82-.07-3.124.88-.308.95.354 2.02 2.01 2.56"/></g></svg>',
            emoji_1f33b: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#qqD6EASe-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#3e721d" d="M29 10c-8 0-8-6-8-6v11h-4V4s0 6-8 6c-4 0-7 2-7 2s0-9 9-9h6s0-2 2-2 2 2 2 2h6c9 0 9 9 9 9s-3-2-7-2"/><path fill="#ffac33" d="M22.125 9.338c-.328 0-.65.097-.927.283l-2.323 1.58-2.322-1.57a1.667 1.667 0 0 0-1.358-.22 1.65 1.65 0 0 0-1.06.876L12.91 12.8l-2.795-.205a1.656 1.656 0 0 0-1.77 1.768l.2 2.8-2.522 1.226a1.654 1.654 0 0 0-.646 2.41l1.573 2.33-1.574 2.32a1.657 1.657 0 0 0 .647 2.42l2.523 1.22-.2 2.793c-.035.48.14.95.48 1.287.31.313.733.486 1.17.486.04 0 .08 0 .12-.004l2.797-.2 1.225 2.52a1.66 1.66 0 0 0 1.49.93c.327 0 .65-.096.928-.283l2.322-1.575L21.2 36.62a1.652 1.652 0 0 0 2.42-.648l1.23-2.525 2.8.2a1.662 1.662 0 0 0 1.29-.48 1.64 1.64 0 0 0 .48-1.288l-.202-2.8 2.527-1.23a1.66 1.66 0 0 0 .648-2.42l-1.573-2.32 1.576-2.32c.268-.4.35-.896.225-1.36a1.647 1.647 0 0 0-.87-1.06l-2.523-1.225.206-2.8a1.666 1.666 0 0 0-.48-1.286 1.67 1.67 0 0 0-1.287-.48l-2.8.2-1.225-2.527a1.644 1.644 0 0 0-1.06-.875 1.588 1.588 0 0 0-.43-.056"/><path fill="#732700" d="M26 23a7 7 0 1 1-14 0 7 7 0 0 1 14 0"/></g></svg>',
            emoji_1f36a: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#kEOF8kzu-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#d99e82" d="M36 19c0-9.39-7.61-17-17-17S2 9.61 2 19s7.61 17 17 17 17-7.61 17-17"/><path fill="#8a4b38" d="M23.638 20.053a2.245 2.245 0 1 0 1.386-4.27c-1.18-.385-3.87-.202-4.255.977-.39 1.18 1.68 2.91 2.86 3.293m8.57.672a1.07 1.07 0 0 0-1.64 1.377c.38.45 1.51 1.057 1.96.677.45-.38.05-1.61-.33-2.06m-22 7a1.07 1.07 0 0 0-1.63 1.38c.38.45 1.51 1.05 1.962.67.453-.38.053-1.607-.328-2.06m12.093 1.9a1.607 1.607 0 1 0 1.732 2.71c.75-.48 1.87-2.05 1.39-2.8-.48-.75-2.375-.39-3.124.09m-7.92-6.22a2.145 2.145 0 1 0 3.87 1.857c.513-1.07.68-3.643-.387-4.154-1.07-.514-2.97 1.227-3.48 2.3M15.4 9.3a1.92 1.92 0 0 0 2.67.492 1.923 1.923 0 0 0 .49-2.675c-.6-.875-2.526-2.148-3.4-1.545-.873.604-.364 2.854.24 3.727m10.013.4A1.472 1.472 0 1 0 27 12.19c.684-.438 1.714-1.877 1.275-2.562-.438-.688-2.176-.36-2.862.08M6.536 18.58a2.07 2.07 0 1 0 3.083-2.76c-.77-.854-3-1.954-3.85-1.19-.86.763-.01 3.1.76 3.95"/></g></svg>',
            emoji_1f378: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#TWUXz8v3-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#8899a6" d="M20 16.745s11.458 11.04 12.583 12.005c1.125.964-.708 2.25-2.957 2.25H7.13c-1.126 0-4.484-.73-2.797-2.417C5.537 27.38 17 16.745 17 16.745V6.622s-4.584-2.34-5.498-2.883c-.984-.57-.33-1.47.063-1.62.657-.26 2.254-1.1 6.78-1.1 4.64 0 6.203.91 6.765 1.1.217.07 1.347.93.01 1.72C22.744 5.25 20 6.62 20 6.62v10.123z"/><path fill="#ccd6dd" d="M33 29.558c0-1.62-6.547-2.935-14.623-2.935S3.754 27.937 3.754 29.558c0 1.622 6.547 2.935 14.623 2.935S33 31.18 33 29.558"/><path fill="#ccd6dd" d="M5.458 29.416c1.265-1.232 8.538-7.235 11.7-9.835.9-.74 2.133-.62 2.8-.12.668.5 11.168 9.58 11.168 9.58l-25.668.38z"/></g><g clip-path="url(#TWUXz8v3-b)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#662113" d="M17.868 20.468c-.237.125-.05.8.25 1.328l7.447 14.518a1.1 1.1 0 0 0 1.914-1.082l-8.67-13.885c-.15-.264-.68-1.02-.95-.88"/><path fill="#5c913b" d="M22.745 29.145c1.133-.64 1.996-2.636 1.2-4.046-.797-1.42-2.954-1.7-4.087-1.06-1.132.64-2.065 2.51-1.2 4.04.866 1.53 2.954 1.7 4.087 1.06"/><path fill="#fff" d="M17.797 26.24c-3.775 0-7.36.49-10.737 1.47l-.13.037a1.002 1.002 0 0 0 .556 1.922l.132-.04c6.533-1.9 13.943-1.86 22.018.13a.998.998 0 0 0 1.21-.73 1 1 0 0 0-.732-1.21c-4.288-1.06-8.403-1.58-12.317-1.58"/></g></svg>',
            emoji_1f37f: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45"><g clip-path="url(#mO5XIuZF-a)" transform="matrix(1.25 0 0 -1.25 0 45)"><path fill="#e1e8ed" d="M7 22.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0M34 22.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0"/><path fill="#e1e8ed" d="M31.594 19H4.45v4h27.144v-4z"/><path fill="#e1e8ed" d="M31 21H4.855v4h26.77L31 21z"/><path fill="#ffd983" d="M12 26.5a3.5 3.5 0 1 0-7 0 3.5 3.5 0 0 0 7 0"/><path fill="#ffd983" d="M14 29.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0"/><path fill="#ffd983" d="M16 27.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0"/><path fill="#ffd983" d="M20 29.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0"/><path fill="#ffd983" d="M20 27.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0M26 32.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0"/><path fill="#ffd983" d="M26 27.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0"/><path fill="#ffd983" d="M27 24.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0"/><path fill="#ffd983" d="M23 24.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0"/><path fill="#ffd983" d="M20 23.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0"/><path fill="#ffd983" d="M18 24.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0"/><path fill="#ffd983" d="M16 24.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0"/><path fill="#ffd983" d="M14 23.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0"/><path fill="#ffd983" d="M11 23.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0M30 22.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0M28 28.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0"/><path fill="#ffd983" d="M31 25.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0M24 29.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0"/><path fill="#ffd983" d="M23 27.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0M28 31.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0M31 28.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0M32 23.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0M7 23.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0"/><path fill="#ffd983" d="M29 29.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0"/><path fill="#ffac33" d="M26 30.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0M12 25.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0"/><path fill="#ffac33" d="M14 24.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0"/><path fill="#ffac33" d="M12 23.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0"/><path fill="#ffac33" d="M11 23.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0"/><path fill="#ffac33" d="M9 23.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0M16 22.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0M20 26.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0M31 23.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0"/><path fill="#ffac33" d="M19 24.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0"/><path fill="#ffac33" d="M18 22.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0M29 28a1 1 0 1 0-2 0 1 1 0 0 0 2 0M29 23a1 1 0 1 0-2 0 1 1 0 0 0 2 0M13 29a1 1 0 1 0-2 0 1 1 0 0 0 2 0M26 25a2 2 0 1 0-4 0 2 2 0 0 0 4 0"/><path fill="#ffac33" d="M23 24a2 2 0 1 0-4 0 2 2 0 0 0 4 0"/><path fill="#ffac33" d="M26 22a2 2 0 1 0-4 0 2 2 0 0 0 4 0M23 27a2 2 0 1 0-4 0 2 2 0 0 0 4 0"/><path fill="#ffd983" d="M22 25.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0M13 23.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0"/><path fill="#ffd983" d="M11 22.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0M20 23.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0M23 23.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0"/><path fill="#ffd983" d="M22 23.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0"/><path fill="#e1e8ed" d="M30.182 4.996C30.082 2.798 28.202 1 26 1H10C7.8 1 5.92 2.798 5.82 4.996L5.18 19.004A3.797 3.797 0 0 0 9 23h18c2.2 0 3.918-1.798 3.82-3.996L30.18 4.996z"/></g><g clip-path="url(#mO5XIuZF-b)" transform="matrix(1.25 0 0 -1.25 0 45)"><path fill="#da2f47" d="M17.668 20h1c-.5 0-2 .657-2-1V1h3v18c0 1.657-1.5 1-2 1M23.668 20h1c-.5 0-2 .657-2-1V1h3v18c0 1.657-1.5 1-2 1M29.668 20h1c-.5 0-2 .657-2-1V1h3v18c0 1.657-1.5 1-2 1M11.668 20h1c-.5 0-2 .657-2-1V1h3v18c0 1.657-1.5 1-2 1M5.668 20h1c-.5 0-2 .657-2-1V1h3v18c0 1.657-1.5 1-2 1"/><g clip-path="url(#mO5XIuZF-c)" opacity=".6"><path fill="#99aab5" d="M31 17H5v2h26v-2z"/></g></g><g clip-path="url(#mO5XIuZF-d)" transform="matrix(1.25 0 0 -1.25 0 45)"><path fill="#e1e8ed" d="M34 21c0-1.104-1.12-2-2.5-2s-2.5.896-2.5 2c0 1.105 1.12 2 2.5 2s2.5-.895 2.5-2M7 21c0-1.104-1.12-2-2.5-2S2 19.896 2 21c0 1.105 1.12 2 2.5 2S7 22.105 7 21"/><path fill="#e1e8ed" d="M31.594 19H4.45v4h27.144v-4z"/><path fill="#fff" d="M32 22a1 1 0 0 0-1-1H5a1 1 0 0 0 0 2h26a1 1 0 0 0 1-1"/><path fill="#e1e8ed" d="M33.28 24.25c.282-.297 2.142-2.422.032-4.594-.36.11-.75 3.875-.562 4.14.187.267.53.454.53.454M2.737 24.25c-.28-.297-2.22-2.39-.112-4.562.36.11.83 3.843.643 4.11-.187.265-.53.452-.53.452"/></g></svg>',
            emoji_1f3af: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#pPTRz2xz-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ccd6dd" d="M37 19c0-9.94-8.06-18-18-18S1 9.06 1 19s8.06 18 18 18 18-8.06 18-18"/><path fill="#3b88c3" d="M33 19c0-7.732-6.268-14-14-14S5 11.268 5 19s6.268 14 14 14 14-6.268 14-14"/><path fill="#dd2e44" d="M29 19c0-5.522-4.478-10-10-10-5.523 0-10 4.478-10 10 0 5.523 4.477 10 10 10 5.522 0 10-4.477 10-10"/><path fill="#ffac33" d="M25 19a6 6 0 1 0-12.002.002A6 6 0 0 0 25 19"/><path d="M35.864 7.8c-.42-.305-1.257-.59-1.934-.59-1.964 0-4.654.716-6.334 2.385l-2.954 3.872c-.274.275-.357.575-.21.932.148.35-.73.6-.342.6h5.057c1.867 0 4.308-1.26 5.925-3.02l.37-.35c.774-.85 1.184-1.63 1.183-2.39 0-.62-.27-1.09-.76-1.45"/><path d="M29.305 1.796c-.77 0-1.632.417-2.49 1.204l-.49.378C24.535 5.024 23 7.508 23 9.41v5.164c0 .396.5-.513.866-.363.363.15.915.07 1.195-.21l3.17-3.12c1.7-1.71 3.06-4.62 3.06-6.62 0-.69-.14-1.25-.45-1.68a1.838 1.838 0 0 0-1.53-.77"/><path fill="#c1694f" d="M32.345 5.036c-.256 0-.487.122-.683.317l-14 14a1 1 0 0 0 1.414 1.414l14-14c.39-.39.378-1.036-.012-1.426a1.036 1.036 0 0 0-.72-.3"/></g></svg>',
            emoji_1f3b0: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#HdCD09yJ-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#292f33" d="M37 10a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v18a4 4 0 0 0 4 4h28a4 4 0 0 0 4-4V10z"/><path fill="#ccd6dd" d="M12 13c0-2.21-.79-3-3-3H5c-2.21 0-3 .79-3 3v12c0 2.21.79 3 3 3h4c2.21 0 3-.79 3-3V13zm12 0c0-2.21-.79-3-3-3h-4c-2.21 0-3 .79-3 3v12c0 2.21.79 3 3 3h4c2.21 0 3-.79 3-3V13zm12 0c0-2.21-.79-3-3-3h-4c-2.21 0-3 .79-3 3v12c0 2.21.79 3 3 3h4c2.21 0 3-.79 3-3V13z"/><path fill="#e1e8ed" d="M12 14H2v10h10V14zm12 0H14v10h10V14zm12 0H26v10h10V14z"/><path fill="#be1931" d="M31.795 21.315H28.98c-.595 0-.815.385-.815.76 0 .384.21.758.814.758h3.98c.56 0 .79-.506.79-.792 0-.22-.12-.45-.26-.72l-2.73-5.54c-.31-.61-.43-.83-.93-.83-.61 0-.91.47-.91.78 0 .14.03.23.11.39l2.75 5.22zm-12 0H16.98c-.595 0-.815.385-.815.76 0 .384.21.758.814.758h3.98c.56 0 .79-.506.79-.792 0-.22-.12-.45-.25-.72l-2.73-5.54c-.31-.61-.43-.83-.93-.83-.61 0-.92.47-.92.78 0 .14.03.23.11.39l2.75 5.22zm-12 0H4.98c-.595 0-.815.385-.815.76 0 .384.21.758.814.758h3.98c.56 0 .79-.506.79-.792 0-.22-.12-.45-.25-.72l-2.73-5.55c-.31-.61-.43-.83-.93-.83-.61 0-.92.47-.92.78 0 .14.03.23.11.39l2.75 5.22z"/><path fill="#9266cc" d="M4.06 28a2.08 2.08 0 0 1-.06-.5C4 26.12 5.344 25 7 25c1.657 0 3 1.12 3 2.5 0 .17-.02.338-.06.5H4.06zm12 0a2.08 2.08 0 0 1-.06-.5c0-1.38 1.344-2.5 3-2.5 1.657 0 3 1.12 3 2.5 0 .17-.02.338-.06.5h-5.88zm12 0a2.193 2.193 0 0 1-.06-.5c0-1.38 1.344-2.5 3-2.5 1.657 0 3 1.12 3 2.5 0 .17-.022.338-.06.5h-5.88z"/><path fill="#f4900c" d="M9.816 10c.11.157.184.324.184.5 0 .828-1.344 1.5-3 1.5-1.657 0-3-.672-3-1.5 0-.176.072-.343.183-.5h5.633zm12 0c.11.157.184.324.184.5 0 .828-1.344 1.5-3 1.5-1.657 0-3-.672-3-1.5 0-.176.072-.343.183-.5h5.633zm12 0c.11.157.184.324.184.5 0 .828-1.344 1.5-3 1.5-1.657 0-3-.672-3-1.5 0-.176.072-.343.183-.5h5.633z"/></g></svg>',
            emoji_1f3c1: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#qmQPDGRi-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#292f33" d="M37 14a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h30a2 2 0 0 0 2-2V14z"/><path fill="#e1e8ed" d="M13 28H4v8h9v-8zm8-8h-8v8h8v-8zm8 8h-8v8h8v-8zM13 12H5v8h8v-8zm16 0h-8v8h8v-8zm8 8h-8v8h8v-8z"/><path fill="#553788" d="M5 3a2 2 0 0 0-4 0v32a2 2 0 0 0 4 0V3z"/></g></svg>',
            emoji_1f44b: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#2G9Cf0sp-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#d99e82" d="M34.305 19.664s1.132 1.65-.52 2.78c-1.648 1.132-2.78-.518-2.78-.518l-5.25-7.658c-.18.302-.38.6-.6.894l7.29 10.63s1.13 1.648-.52 2.78c-1.65 1.13-2.78-.52-2.78-.52l-6.856-9.996c-.26.21-.52.417-.79.622l7.94 11.59s1.13 1.65-.52 2.78c-1.65 1.132-2.78-.518-2.78-.518L18.2 20.94c-.29.18-.58.336-.87.5l7.428 10.83s1.13 1.65-.52 2.78c-1.648 1.133-2.78-.517-2.78-.517L13.61 23.08l-.63-.918-.565-.825c4.948-3.393 5.42-9.78 2.592-13.902-.566-.825-1.39-.26-1.39-.26 3.393 4.95 2.356 10.51-2.593 13.903l1.462 7.302s.545 1.925-1.38 2.47c-1.923.545-2.468-1.38-2.468-1.38l-1.685-5.003c-.668-1.984-1.38-3.96-2.32-5.83-2.657-5.28-1.07-11.843 3.94-15.28C14.04-.388 21.51 1.004 25.258 6.467a11 11 0 0 1 .522.858l.043-.03 8.482 12.37z"/><path fill="#77b255" d="M3.042 30h-2A6.966 6.966 0 0 0 8 36.958v-2A4.964 4.964 0 0 1 3.042 30"/><path fill="#77b255" d="M5 25H3c0 5.514 4.486 10 10 10v-2c-4.41 0-8-3.59-8-8M30 1v2c3 0 5 2 5 5h2c0-4-3-7-7-7"/><path fill="#77b255" d="M25 2.958v2c4 0 8.042 4.042 8.042 8.042h2C35.042 7 31 2.958 25 2.958"/></g></svg>',
            emoji_1f44c: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#T6QBIYYH-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#c1694f" d="M25.997 8.5a2.5 2.5 0 0 0-2.457 2.053l-4 22a2.5 2.5 0 0 0 2.013 2.906 2.496 2.496 0 0 0 2.907-2.02l4-22a2.5 2.5 0 0 0-2.463-2.94"/><path fill="#d99e82" d="M29.375 12.235c.24.745.13 1.59-.375 2.265-.06.078-.44.585-1.017 1.34.005.05.017.112.017.16 0 .458-1.913 2.623-3.74 4.586-1.587 1.964-3.26 3.95-4.492 5.18l-1.274 1.276-1.612-.807c-5.718-2.858-8.647-3.855-8.673-3.864a2.5 2.5 0 0 1 1.58-4.74c.11.04 2.66.9 7.65 3.31 1.09-1.23 2.37-2.79 3.57-4.29l.7-1.17a.784.784 0 0 0-.06-.89l-3.52-4.39a.787.787 0 0 0-.37-.25l-2.53-.842a.786.786 0 0 0-.5 0l-4.726 1.57c-.676 2.08-.533 4.1-.53 4.125a2.5 2.5 0 0 1-2.27 2.703A2.496 2.496 0 0 1 4.5 15.23c-.013-.268-.5-6.43 3.32-10.6C10.03 2.22 13.118 1 17 1c.66 0 1.283-.01 1.87-.02a81.94 81.94 0 0 1 1.54-.02c2.764 0 5.004.23 6.738 1.94 1.65 1.628 2.354 4.197 2.354 8.594 0 .26-.05.506-.125.742"/><path fill="#c1694f" d="M28 16a1 1 0 0 0-.914.594l-4 9a1 1 0 0 0 1.828.812l4-9A1 1 0 0 0 28 16"/><path fill="#d99e82" d="M25.766 2.62l-1.53 4.76s-.068-.01-.176-.067c.018.01 1.82.995 2.46 6.003.776 6.075-.774 9.6-.79 9.635l-.092.24-3.5 10.11a2.5 2.5 0 0 0 4.725 1.64l3.467-10.02c.378-.882 2.037-5.28 1.15-12.222-1.042-8.17-4.943-9.82-5.714-10.07"/></g></svg>',
            emoji_1f47b: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#m4ZhRc2F-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#e1e8ed" d="M37 26a2 2 0 0 1-4 0s-.01-3.285-3-3.894V25c0 6.075-4.925 11-11 11S8 31.075 8 25v-3.237C2.778 20.193 1 13.77 1 10a2 2 0 0 1 4 0s.002 3.54 3.336 3.958C8.838 9.118 9.954 4 12 4h1c4 0 3-2 7-2s3 2 6 2 2.395-2 6-2a3 3 0 0 1 3 3c0 .675-2.274 4.994-3.755 9.268C36.98 15.652 37 22.42 37 26"/><path fill="#292f33" d="M16 25a2 2 0 1 0-4 0 2 2 0 0 0 4 0m12 0a4 4 0 1 0-8 0 4 4 0 0 0 8 0"/><path fill="#9aaab4" d="M26 24a2 2 0 1 0-4 0 2 2 0 0 0 4 0"/><path fill="#292f33" d="M23.192 17.51c2.65-1.988 3.59-5.212 2.1-7.2-1.492-1.99-4.85-1.99-7.5 0-2.65 1.987-3.59 5.21-2.1 7.2 1.49 1.988 4.85 1.987 7.5 0"/></g></svg>',
            emoji_1f494: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g fill="#e75a70" clip-path="url(#lWxsDG8y-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path d="M14.59 10.48a1.5 1.5 0 0 0 .034 1.596l4.395 6.646-6 5.14a1.5 1.5 0 0 0-.31 1.908l4.3 7.175a9.778 9.778 0 0 1-6.04 2.09c-5.45 0-9.868-4.42-9.868-9.87 0-.77.097-1.52.265-2.24C2.75 14.413 12.215 5.43 19 2.965c.026.01.052.023.077.033l-4.488 7.48z"/><path d="M27.018 35.034c-2.765 0-5.248-1.15-7.037-2.983l-4.04-6.73 6.04-5.17a1.5 1.5 0 0 0 .28-1.964l-4.603-6.97 4.16-6.933c6.34 3.53 13.623 11.263 14.81 18.65.17.72.268 1.468.268 2.24 0 5.45-4.417 9.868-9.866 9.868"/></g></svg>',
            emoji_1f4a1: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#F549ruZz-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffd983" d="M30 25.94c0-6.44-5-7.44-5-13.44 0-3.098-3.123-3.36-5.5-3.36-2.053 0-6.586.78-6.586 3.362 0 6-4.914 7-4.914 13.438 0 6.03 5.285 10.92 11.083 10.92 5.8 0 10.917-4.89 10.917-10.92"/><path fill="#ccd6dd" d="M23.167 4.5c0-.828-2.234-2.5-4.167-2.5-1.933 0-4.166 1.672-4.166 2.5 0 .828 2.233.5 4.166.5 1.933 0 4.167.328 4.167-.5"/><path fill="#ffcc4d" d="M23.707 26.707a1 1 0 0 1-1.414 0L19 23.414l-3.293 3.293a1 1 0 0 1-1.414-1.414L18 21.586V11a1 1 0 0 1 2 0v10.586l3.707 3.707a1 1 0 0 1 0 1.414"/><path fill="#99aab5" d="M25 6a2 2 0 0 0-2-2h-8a2 2 0 0 0-2 2v6h12V6z"/><path fill="#ccd6dd" d="M13 5a1 1 0 0 0-.165 1.986l12 2a.994.994 0 0 0 1.15-.822 1 1 0 0 0-.82-1.15l-12-2A.946.946 0 0 0 13 5m0 4a1 1 0 0 0-.165 1.986l12 2a.995.995 0 0 0 1.15-.822 1 1 0 0 0-.82-1.15l-12-2A.946.946 0 0 0 13 9"/></g></svg>',
            emoji_1f4a4: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#kX8NgRQi-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#4289c1" d="M34 18c1.187 0 2-.786 2-2 0-1.073-.983-2-2-2H23c-1.496 0-2 .813-2 2 0 .565.632 1.492 1 2l8 12h-7c-1.128 0-2 .843-2 2 0 1.073.93 2 2 2h11c1.64 0 2-1.012 2-2 0-.62-.635-1.52-1-2l-8-12h7zm-16-5c.633 0 1-.353 1-1 0-.573-.458-1-1-1h-6c-.798 0-1 .367-1 1 0 .3.337.73.533 1L16 19h-4c-.602 0-1 .384-1 1 0 .573.428 1 1 1h6c.874 0 1-.473 1-1 0-.33-.338-.877-.533-1.133L14 13h4zM9 6c.633 0 1-.353 1-1 0-.573-.458-1-1-1H3c-.798 0-1 .367-1 1 0 .3.337.73.533 1L7 12H3c-.602 0-1 .384-1 1 0 .572.428 1 1 1h6c.874 0 1-.473 1-1 0-.33-.338-.877-.533-1.133L5 6h4z"/></g></svg>',
            emoji_1f4a9: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#6mi48mev-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#bf6952" d="M34.54 13.802c.365 1.578.244 3.266-.457 4.946a8.018 8.018 0 0 1-3.27 3.773c.318 1.2.234 2.48-.325 3.76-.84 1.92-2.66 3.2-4.712 3.56.25.57.33 1.29.036 2.17-1 3-5 1-8 5-2.44-1.46-2.97-3.64-2.877-5.48-2.422-.412-3.8-.936-3.8-.936v-.002a3.715 3.715 0 0 1-2.323-3.44c0-.88.318-1.676.83-2.312l-.693-.26c-2.33-.87-3.98-2.976-3.98-5.44 0-1.045.3-2.026.82-2.877C2.97 14.973 1 12.22 1 9c0-4.418 3.69-8 8.244-8 3.27 0 6.56.703 9.53 1.665C21.02 1.625 24.47 1 29.668 1A7.333 7.333 0 0 1 37 8.333a7.31 7.31 0 0 1-2.46 5.47"/><path fill="#f5f8fa" d="M18 21.5c0-2.485-1.567-4.5-3.5-4.5S11 19.015 11 21.5s1.567 4.5 3.5 4.5 3.5-2.015 3.5-4.5m10 0c0-2.485-1.566-4.5-3.5-4.5S21 19.015 21 21.5s1.566 4.5 3.5 4.5 3.5-2.015 3.5-4.5"/><path fill="#292f33" d="M17 21.5c0-1.38-.896-2.5-2-2.5s-2 1.12-2 2.5.896 2.5 2 2.5 2-1.12 2-2.5m9 0c0-1.38-.896-2.5-2-2.5s-2 1.12-2 2.5.896 2.5 2 2.5 2-1.12 2-2.5m-15.553-9.395c-.246.492.003.895.553.895h18c.55 0 .8-.403.552-.895C29.552 12.105 27 7 20 7s-9.553 5.105-9.553 5.105"/><path fill="#f2abba" d="M20 11c-2.77 0-5.157-.922-6.292-2.256C15.2 7.79 17.253 7 20 7s4.8.79 6.292 1.744C25.157 10.078 22.772 11 20 11"/></g></svg>',
            emoji_1f4af: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#5UPNVIv0-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#bb1a34" d="M2.728 16c-.618 0-.954.256-1.128.47-.17.212-.348.586-.225 1.166l2.73 12.706-1.716-.097h-.02c-.52 0-.9.167-1.13.458-.22.272-.3.62-.22.98.15.702.88 1.286 1.66 1.33l4.01.227a3.3 3.3 0 0 0 .21.008c.15 0 .53 0 .78-.307.25-.31.16-.7.14-.83L4.71 17.55c-.19-.88-.92-1.49-1.867-1.54l-.12-.01zm14.157 15.746l-.137-.004c-1.94-.11-3.555-2.304-4.32-5.866-.477-2.228-.38-3.9.273-4.707.3-.37.72-.56 1.25-.56h.14c1.94.11 3.56 2.3 4.32 5.86.48 2.23.39 3.9-.27 4.7-.29.37-.72.55-1.25.55M13.47 18c-1.438 0-2.634.54-3.458 1.56-1.163 1.437-1.467 3.65-.878 6.395 1.032 4.812 4.208 8.187 7.902 8.395 1.59.09 2.906-.452 3.793-1.55 1.16-1.438 1.46-3.65.87-6.396-1.03-4.81-4.21-8.184-7.91-8.394a5.326 5.326 0 0 0-.33-.01m18.42 15.386l-.14-.004c-1.94-.11-3.56-2.304-4.32-5.865-.48-2.228-.38-3.9.27-4.708.29-.37.72-.56 1.25-.56h.14c1.94.11 3.55 2.3 4.32 5.86.48 2.22.38 3.9-.27 4.7-.3.37-.72.55-1.26.55m-3.41-13.74c-1.44 0-2.64.54-3.46 1.56-1.16 1.44-1.47 3.65-.88 6.39 1.04 4.81 4.21 8.185 7.91 8.393 1.6.09 2.9-.45 3.79-1.55 1.16-1.44 1.46-3.65.87-6.39-1.03-4.81-4.206-8.18-7.9-8.394a4.57 4.57 0 0 0-.33-.01M12 2a2 2 0 0 0-.702 3.873c.338.126 8.4 3.108 20.536 4.12a2 2 0 1 0 .333-3.986c-11.59-.966-19.388-3.85-19.465-3.88A2.013 2.013 0 0 0 12 2M3.002 8a1.998 1.998 0 0 0-.72 3.866c.542.21 13.515 5.126 32.613 6.13a1.987 1.987 0 0 0 2.102-1.89 2 2 0 0 0-1.892-2.103c-18.422-.97-31.26-5.82-31.388-5.87A1.997 1.997 0 0 0 3 8"/></g></svg>',
            emoji_1f4b0: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#axvgFEak-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#fdd888" d="M32.898 13.062C32.298 19.68 29 23 29 23l-6 8h-8l-6-8s-1.42-1.432-2.568-4.275C4.444 18.065 3 16.21 3 13.998a4.97 4.97 0 0 1 1.61-3.656A4.943 4.943 0 0 1 4 8c0-1.96 1.136-3.636 2.775-4.457C8.058 1.623 9.772 1 11 1h16c1.378 0 3.373.78 4.677 3.31C33.61 5 35 6.83 35 9a4.986 4.986 0 0 1-2.102 4.06M19 31c.55 0 1.058.158 1.5.416.443-.258.95-.416 1.5-.416 1.657 0 4 2.344 4 4 0 0 0 2-2 2-.788 0-1-1-2-1s-1 1-3 1-2-1-3-1-1.21 1-2 1c-2 0-2-2-2-2 0-1.656 2.344-4 4-4 .55 0 1.057.158 1.5.416.443-.258.95-.416 1.5-.416"/><path fill="#bf6952" d="M25 31a1 1 0 0 0-1-1H14a1 1 0 0 0 0 2h10a1 1 0 0 0 1-1"/><path fill="#67757f" d="M24.9 12.458c0 4.477-8.58 4.185-8.58 6.886 0 1.308 1.302 1.947 2.812 1.947 2.538 0 2.99-1.56 4.14-1.56.813 0 1.204.5 1.204 1.05 0 1.29-2.024 2.26-3.965 2.59v1.24c0 .78-.65 1.4-1.45 1.4-.8 0-1.45-.62-1.45-1.4v-1.29c-2.11-.46-3.93-1.87-3.93-4.17 0-4.3 8.58-4.12 8.58-7.14 0-1.05-1.18-2.1-3.11-2.1-2.9 0-3.86 1.89-5.04 1.89-.573 0-1.086-.464-1.086-1.164 0-1.113 1.937-2.45 4.6-2.824V6.39c0-.77.65-1.4 1.457-1.4.8 0 1.45.63 1.45 1.4v1.4c0 .017-.007.03-.01.045 2.4.43 4.4 1.935 4.4 4.62"/></g></svg>',
            emoji_1f4b3: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#7OWTuz3p-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ccd6dd" d="M5 33a4 4 0 0 1-4-4V11a4 4 0 0 1 4-4h28a4 4 0 0 1 4 4v18s0 4-4 4H5z"/><path fill="#67757f" d="M37 21.937H1V28h36v-6.063z"/><path fill="#f5f8fa" d="M33 12H5v8h28v-8z"/><path fill="#9aaab4" d="M7 13a1 1 0 0 0-.894 1.447C6.198 14.633 8.422 19 12 19c.815 0 1.256-.356 1.482-.655.586-.772.3-1.795.046-2.7-.048-.17-.114-.406-.16-.61.816.13 1.672.633 2.44 1.083.842.492 1.506.882 2.192.882 1.456 0 1.81-1.204 1.96-1.72a5.2 5.2 0 0 1 .087-.276c.756.033 1.614.507 2.522 1.008 2.19 1.207 5.18 2.86 9.05-.23a1 1 0 0 0-1.25-1.563c-2.82 2.26-4.69 1.23-6.84.04C22.41 13.64 21.25 13 20 13c-1.456 0-1.81 1.204-1.96 1.72-.023.078-.053.18-.082.26-.262-.074-.762-.368-1.14-.588C15.76 13.772 14.444 13 13 13c-.74 0-1.15.333-1.36.612-.555.73-.292 1.668-.038 2.575.063.223.154.547.2.792-2.256-.25-3.89-3.4-3.907-3.43A1 1 0 0 0 7 13"/></g></svg>',
            emoji_1f4c8: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#UsjP8wsg-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ccd6dd" d="M36 5a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v28a4 4 0 0 0 4 4h26a4 4 0 0 0 4-4V5z"/><path fill="#e1e8ed" d="M27 11h5V6h-5v5zm-7 0h5V6h-5v5zm-7 0h5V6h-5v5zm-7 0h5V6H6v5zm5 16H6v5h5v-5zm7 0h-5v5h5v-5zm7 0h-5v5h5v-5zm2 5h5v-5h-5v5zm0-7h5v-5h-5v5zm0-7h5v-5h-5v5zm-7 0h5v-5h-5v5zm-7 0h5v-5h-5v5zm-2-5H6v5h5v-5zm0 7H6v5h5v-5zm9 5h5v-5h-5v5zm-2-5h-5v5h5v-5zm15 14H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h28a1 1 0 0 1 1 1v28a1 1 0 0 1-1 1"/><path fill="#3e721d" d="M5.998 4a2 2 0 0 0-1.76 2.948l7 13a2 2 0 0 0 3.176.466l6.076-6.076 9.738 18.59a2 2 0 1 0 3.543-1.856l-11-21a2 2 0 0 0-1.46-1.05 2.02 2.02 0 0 0-1.712.564l-6.1 6.1L7.76 5.05A2 2 0 0 0 6 4"/></g></svg>',
            emoji_1f4c9: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#6yq71jRX-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ccd6dd" d="M36 5a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v28a4 4 0 0 0 4 4h26a4 4 0 0 0 4-4V5z"/><path fill="#e1e8ed" d="M27 11h5V6h-5v5zm-7 0h5V6h-5v5zm-7 0h5V6h-5v5zm-7 0h5V6H6v5zm5 16H6v5h5v-5zm7 0h-5v5h5v-5zm7 0h-5v5h5v-5zm2 5h5v-5h-5v5zm0-7h5v-5h-5v5zm0-7h5v-5h-5v5zm-7 0h5v-5h-5v5zm-7 0h5v-5h-5v5zm-2-5H6v5h5v-5zm0 7H6v5h5v-5zm9 5h5v-5h-5v5zm-2-5h-5v5h5v-5zm15 14H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h28a1 1 0 0 1 1 1v28a1 1 0 0 1-1 1"/><path fill="#dd2e44" d="M32.002 4a2 2 0 0 0-1.773 1.072l-9.74 18.59-6.08-6.076a2 2 0 0 0-3.18.466l-7 13a2 2 0 0 0 3.52 1.898l5.722-10.633 6.1 6.1a2.002 2.002 0 0 0 3.186-.487l11-21A2 2 0 0 0 32 4"/></g></svg>',
            emoji_1f525: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#bR9aLf5h-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#f4900c" d="M36 18c0 2.063-.367 4.04-1.04 5.868-.46-5.39-3.333-8.157-6.335-6.868-2.813 1.208-.917 5.917-.777 8.164.236 3.81-.012 8.17-6.93 11.794 2.874-5.5.332-8.916-2.335-9.125-2.958-.23-5.666 2.542-4.666 7.042-3.238-2.386-3.333-6.402-2.334-9 1.042-2.708-.04-4.958-2.583-5.208-2.84-.28-4.417 3.04-2.962 8.333A16.936 16.936 0 0 1 2 18C2 8.61 9.61 1 19 1s17 7.61 17 17"/></g><g clip-path="url(#bR9aLf5h-b)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M31 7c0 2.187-.584 4.236-1.605 6 .147-3.083-2.562-4.292-4.02-3.708-2.105.843-1.54 2.29-2.083 5.29-.542 3-2.625 5.085-5.71 6 2.25-6.332-1.246-8.666-3.08-9.083-1.87-.43-3.752 0-3.967 4A11.967 11.967 0 0 1 7 7C7 .373 12.373-5 19-5S31 .373 31 7"/></g></svg>',
            emoji_1f52b: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#DD7j4yL6-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#9aaab4" d="M20 15c-6 0-5.127 6.45-5 7l10-2c-.183-2.39-2.562-5-5-5m6 18H15a2 2 0 0 1-2-2H7a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2H1v-5a2 2 0 0 1 2-2h10v-4a7 7 0 0 1 7-7c3.58 0 6.585 2.53 7 6h1a2 2 0 0 1 2 2v8a4 4 0 0 0-4 4"/><path fill="#bf6952" d="M27 19l3 5s5 0 6-9l1-6s0-4-4-4h-2c-4 0-4 4-4 4v10z"/><path fill="#9aaab4" d="M28 23a2 2 0 0 0-2 2c0 2.814 1.864 7 7 7a2 2 0 0 0 0-4c-2.855 0-3-2.5-3-3a2 2 0 0 0-2-2m-8-1c0-1 0-3-1-4s2-1 3 1 1 2 1 3-3 0-3 0"/><path fill="#67757f" d="M26 27a4 4 0 0 0-4-4h-5.995c-2.21 0-2 1.79-2 4H14c0 2.21-.204 4 2.005 4H22a4 4 0 0 0 4-4"/><path fill="#ccd6dd" d="M21 28h-5a1 1 0 0 0 0 2h5a1 1 0 0 0 0-2m0-4h-5a1 1 0 0 0 0 2h5a1 1 0 0 0 0-2"/></g></svg>',
            emoji_1f602: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#Xji2FTO6-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M36 19c0-9.39-7.61-17-17-17C9.612 2 2 9.61 2 19c0 9.388 7.612 17 17 17 9.39 0 17-7.612 17-17"/><path fill="#664500" d="M29.457 19.203c-.06.135-1.5 3.297-4.457 3.297s-4.397-3.162-4.457-3.297a.5.5 0 0 1 .144-.59.504.504 0 0 1 .61-.015c.013.01 1.263.902 3.703.902 2.426 0 3.674-.88 3.702-.9a.498.498 0 0 1 .755.603m-12 0c-.06.135-1.5 3.297-4.457 3.297s-4.397-3.162-4.457-3.297a.5.5 0 0 1 .754-.605c.013.01 1.262.902 3.703.902 2.426 0 3.674-.88 3.702-.9a.498.498 0 0 1 .755.603M32 21c-.396 0-.772.238-.93.63-1.777 4.444-6.22 5.38-6.266 5.39a1 1 0 1 0 .392 1.96c.226-.044 5.556-1.168 7.733-6.608A1 1 0 0 0 32 21M6 21a1 1 0 0 0-.928 1.372c2.176 5.44 7.506 6.564 7.732 6.608a1 1 0 0 0 .396-1.96c-.185-.038-4.507-.98-6.27-5.39A1.003 1.003 0 0 0 6 21m13-6c-3.623 0-6.027.422-9 1-.68.13-2 0-2-2 0-4 4.595-9 11-9 6.404 0 11 5 11 9 0 2-1.32 2.132-2 2-2.973-.578-5.377-1-9-1"/><path fill="#fff" d="M10 14s3-1 9-1 9 1 9 1-2-4-9-4-9 4-9 4"/><path fill="#5dadec" d="M11.847 8.77A5 5 0 0 0 5.77 5.157a4.998 4.998 0 0 0-3.615 6.075c.68 2.68 6.337 8.71 7.307 8.463.968-.245 3.064-8.245 2.385-10.922m14.286-.003a5 5 0 0 1 6.077-3.614 4.998 4.998 0 0 1 3.616 6.075c-.68 2.68-6.338 8.71-7.307 8.47-.97-.24-3.07-8.24-2.39-10.92"/></g></svg>',
            emoji_1f603: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#SIkObE6A-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M36 19c0-9.39-7.61-17-17-17C9.612 2 2 9.61 2 19c0 9.388 7.612 17 17 17 9.39 0 17-7.612 17-17"/><path fill="#664500" d="M15 24.5c0-2.486-1.12-5.5-2.5-5.5S10 22.014 10 24.5c0 2.485 1.12 5.5 2.5 5.5s2.5-3.015 2.5-5.5m13 0c0-2.486-1.12-5.5-2.5-5.5S23 22.014 23 24.5c0 2.485 1.12 5.5 2.5 5.5s2.5-3.015 2.5-5.5M19 15c-3.623 0-6.027.422-9 1-.68.13-2 0-2-2 0-4 4.595-9 11-9 6.404 0 11 5 11 9 0 2-1.32 2.132-2 2-2.973-.578-5.377-1-9-1"/><path fill="#fff" d="M10 14s3-1 9-1 9 1 9 1-2-4-9-4-9 4-9 4"/></g></svg>',
            emoji_1f604: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#ayCJ1mBT-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M36 19c0-9.39-7.61-17-17-17C9.612 2 2 9.61 2 19c0 9.388 7.612 17 17 17 9.39 0 17-7.612 17-17"/><path fill="#664500" d="M29.457 19.203c-.06.135-1.5 3.297-4.457 3.297s-4.397-3.162-4.457-3.297a.5.5 0 0 1 .144-.59.504.504 0 0 1 .61-.015c.013.01 1.263.902 3.703.902 2.426 0 3.674-.88 3.702-.9a.498.498 0 0 1 .755.603m-12 0c-.06.135-1.5 3.297-4.457 3.297s-4.397-3.162-4.457-3.297a.5.5 0 0 1 .754-.605c.013.01 1.262.902 3.703.902 2.426 0 3.674-.88 3.702-.9a.498.498 0 0 1 .755.603M19 15c-3.623 0-6.027.422-9 1-.68.13-2 0-2-2 0-4 4.595-9 11-9 6.404 0 11 5 11 9 0 2-1.32 2.132-2 2-2.973-.578-5.377-1-9-1"/><path fill="#fff" d="M10 14s3-1 9-1 9 1 9 1-2-4-9-4-9 4-9 4"/></g></svg>',
            emoji_1f607: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#KdHW7KrS-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M36 19c0-9.39-7.61-17-17-17C9.612 2 2 9.61 2 19c0 9.388 7.612 17 17 17 9.39 0 17-7.612 17-17"/><path fill="#664500" d="M28.335 14.37a.5.5 0 0 1-.635.03c-.04-.03-3.922-2.9-8.7-2.9-4.766 0-8.662 2.87-8.7 2.9a.5.5 0 0 1-.73-.657C9.7 13.528 12.79 8.5 19 8.5s9.3 5.028 9.43 5.243a.5.5 0 0 1-.095.628"/><path fill="#5dadec" d="M19 30c-6.627 0-12 .567-12 2.5S12.373 35 19 35s12-.567 12-2.5S25.627 30 19 30m0 7c-8.836 0-16-1.686-16-5 0-3.313 7.164-5 16-5s16 1.687 16 5c0 3.314-7.164 5-16 5"/><path fill="#ffcc4d" d="M11.375 30.938c-3.397 1.324-2.5 1.99-.062 3.23A16.93 16.93 0 0 0 19 35.998c2.893 0 5.616-.72 8-1.997.696-.37 1.433-.88 2.125-1.34"/><path fill="#664500" d="M27 18a1 1 0 0 0-.948.684C25.85 19.284 25.032 21 24 21c-1.062 0-1.89-1.827-2.052-2.316a.996.996 0 0 0-1.264-.632.998.998 0 0 0-.632 1.264C20.177 19.693 21.355 23 24 23s3.823-3.307 3.948-3.684A.998.998 0 0 0 27 18m-10 0a1 1 0 0 0-.95.684c-.2.6-1.015 2.316-2.05 2.316-1.062 0-1.888-1.827-2.05-2.316a.998.998 0 0 0-1.266-.632 1 1 0 0 0-.633 1.264C10.18 19.693 11.36 23 14 23c2.645 0 3.823-3.307 3.95-3.684A1 1 0 0 0 17 18"/></g></svg>',
            emoji_1f608: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#oU5wr41G-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#aa8ed6" d="M37 35a2 2 0 0 1-3.414 1.414C32.7 35.528 29.59 33 27 33h-.004A16.923 16.923 0 0 1 19 35c-2.892 0-5.612-.727-7.996-2H11c-2.58 0-5.63 2.466-6.586 3.414A2 2 0 0 1 1 35c0-2.384.795-6.23 3.36-8.39A16.9 16.9 0 0 1 2 18C2 8.61 9.612 1 19 1c9.39 0 17 7.61 17 17a16.9 16.9 0 0 1-2.36 8.61C36.206 28.77 37 32.615 37 35"/><path fill="#553986" d="M28.335 11.37a.5.5 0 0 1-.635.03c-.04-.03-3.922-2.9-8.7-2.9-4.766 0-8.662 2.87-8.7 2.9a.5.5 0 0 1-.73-.657C9.7 10.528 12.79 5.5 19 5.5s9.3 5.028 9.43 5.243a.5.5 0 0 1-.095.628m-11.628 7.34C13.452 21.97 8.22 22 8 22a1 1 0 1 1 0-2c.028 0 1.924-.022 3.982-.737C11.39 18.623 11 17.63 11 16.5c0-1.934 1.12-3.5 2.5-3.5s2.5 1.566 2.5 3.5c0 .174-.02.34-.037.507.013 0 .025-.007.037-.007a1 1 0 0 1 .707 1.707M30 22c-.22 0-5.45-.038-8.707-3.293A1 1 0 0 1 22 17c.013 0 .024.007.036.007-.016-.167-.036-.333-.036-.507 0-1.934 1.12-3.5 2.5-3.5s2.5 1.566 2.5 3.5c0 1.13-.39 2.123-.982 2.763 2.058.715 3.954.737 3.984.737A1 1 0 0 1 30 22"/></g></svg>',
            emoji_1f609: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#2ZiP5N0K-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M36 19c0-9.39-7.61-17-17-17C9.612 2 2 9.61 2 19c0 9.388 7.612 17 17 17 9.39 0 17-7.612 17-17"/><path fill="#664500" d="M15 20.5c0-1.934-1.12-3.5-2.5-3.5S10 18.566 10 20.5c0 1.933 1.12 3.5 2.5 3.5s2.5-1.567 2.5-3.5m14.457-1.297c-.06.135-1.5 3.297-4.457 3.297s-4.397-3.162-4.457-3.297a.5.5 0 0 1 .144-.59.504.504 0 0 1 .61-.015c.013.01 1.263.902 3.703.902 2.426 0 3.674-.88 3.702-.9a.498.498 0 0 1 .755.603M7 24.543a1 1 0 0 0-.8 1.6c3.262 4.35 7.616 4.4 7.8 4.4a1 1 0 0 0 .004-2c-.155-.003-3.57-.087-6.204-3.6a1 1 0 0 0-.8-.4m23-2.127a.997.997 0 0 0-.8.4c-2.592 3.456-6.96 2.627-7.004 2.62a.998.998 0 0 0-.392 1.96c.23.047 5.657 1.072 8.996-3.38a1 1 0 0 0-.8-1.6m-5.746-8.993a.514.514 0 0 1-.597-.06c-.01-.007-1.013-.863-4.657-.863-3.64 0-4.645.854-4.646.854a.5.5 0 0 1-.84-.475C13.527 12.83 14.66 8.5 19 8.5s5.474 4.335 5.485 4.38a.497.497 0 0 1-.23.543"/></g></svg>',
            emoji_1f60d: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#6xah3DcF-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M36 19c0-9.39-7.61-17-17-17S2 9.61 2 19s7.61 17 17 17 17-7.61 17-17"/><path fill="#664500" d="M19 15.15c-2.966 0-4.935.347-7.37.82-.556.107-1.637 0-1.637-1.637 0-3.276 3.763-7.37 9.007-7.37s9.007 4.094 9.007 7.37c0 1.637-1.082 1.745-1.638 1.637-2.44-.473-4.41-.82-7.37-.82"/><path fill="#e75a70" d="M17.65 33.72a4.67 4.67 0 0 1-5.956 2.85 4.667 4.667 0 0 1-2.928-3.106 4.66 4.66 0 0 1-4.224.58 4.67 4.67 0 0 1-2.85-5.955 4.69 4.69 0 0 1 .472-.96c1.95-3.58 7.588-6.1 11.002-6.13 2.636 2.16 5.446 7.66 4.717 11.67a4.712 4.712 0 0 1-.233 1.04m2.7 0a4.67 4.67 0 0 0 5.956 2.85 4.67 4.67 0 0 0 2.93-3.11 4.66 4.66 0 0 0 4.223.58 4.67 4.67 0 0 0 2.85-5.96 4.694 4.694 0 0 0-.48-.96c-1.95-3.58-7.59-6.1-11-6.13-2.64 2.167-5.45 7.664-4.72 11.677.04.35.11.7.23 1.042"/></g></svg>',
            emoji_1f60e: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#Cwgv2YJw-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M36 19c0-9.39-7.61-17-17-17S2 9.61 2 19s7.61 17 17 17 17-7.61 17-17"/><path fill="#292f33" fill-rule="evenodd" d="M2.24 25.982c.24-.24 1.437-.958 1.677-1.675.24-.717.72-4.784 2.158-5.98 1.484-1.234 7.077-.775 8.15-.24 2.396 1.194 2.69 4.53 3.114 6.22.23.957 1.67.957 1.67.957s1.44 0 1.68-.956c.42-1.69.72-5.027 3.11-6.22 1.07-.536 6.66-.995 8.15.238 1.432 1.197 1.912 5.264 2.152 5.982.24.717 1.437 1.435 1.677 1.674.24.24.24 1.196 0 1.436-.48.478-6.135.904-12.224.24-1.215-.134-1.677-.48-4.554-.48-2.876 0-3.34.346-4.554.478-6.088.666-11.745.24-12.22-.238-.24-.24-.24-1.197 0-1.436"/><path fill="#664500" d="M28.335 13.37a.5.5 0 0 1-.635.03c-.04-.03-3.922-2.9-8.7-2.9-4.766 0-8.662 2.87-8.7 2.9a.5.5 0 0 1-.73-.657C9.7 12.528 12.79 7.5 19 7.5s9.3 5.028 9.43 5.243a.5.5 0 0 1-.095.628"/></g></svg>',
            emoji_1f60f: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#jNf4RQjC-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M36 19c0-9.39-7.61-17-17-17S2 9.61 2 19s7.61 17 17 17 17-7.61 17-17"/><path fill="#664500" d="M25.327 13.378a.5.5 0 0 1-.55.07l-4-2c-1.873-.938-6.73-.948-6.777-.948a.5.5 0 0 1-.25-.933h.002a.5.5 0 0 1 .24-.067H21c2.658 0 4.09 2.186 4.474 3.342a.5.5 0 0 1-.147.536M32 21a.997.997 0 0 0-.8.4c-2.64 3.52-6.06 3.6-6.206 3.6A1 1 0 0 0 25 27c.184 0 4.537-.05 7.8-4.4A1 1 0 0 0 32 21M6 21a1 1 0 0 0-.8 1.6C8.462 26.95 12.816 27 13 27a1 1 0 0 0 .004-2c-.155-.002-3.568-.086-6.204-3.6A1 1 0 0 0 6 21m10.897-1.396c.023.052.06.096.073.154a1 1 0 0 1-.727 1.213c-.18.05-4.468 1.08-7.798-1.13a1 1 0 0 1 1.11-1.66c1.092.73 2.362.997 3.468 1.06-.01-.073-.023-.15-.023-.23a2 2 0 0 1 4 0c0 .216-.042.417-.103.608m12 0c.022.05.06.095.072.15a.998.998 0 0 1-.73 1.215c-.18.046-4.47 1.08-7.8-1.137a1 1 0 0 1 1.11-1.663c1.09.73 2.36.99 3.47 1.06-.01-.08-.03-.15-.03-.23a2 2 0 0 1 4 0c0 .21-.04.412-.106.604"/></g></svg>',
            emoji_1f610: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#HCjIIGCw-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M36 19c0-9.39-7.61-17-17-17C9.612 2 2 9.61 2 19c0 9.388 7.612 17 17 17 9.39 0 17-7.612 17-17"/><path fill="#664500" d="M15 20.5c0-1.934-1.12-3.5-2.5-3.5S10 18.566 10 20.5c0 1.933 1.12 3.5 2.5 3.5s2.5-1.567 2.5-3.5m13 0c0-1.934-1.12-3.5-2.5-3.5S23 18.566 23 20.5c0 1.933 1.12 3.5 2.5 3.5s2.5-1.567 2.5-3.5M26 11H12a1 1 0 0 0 0 2h14a1 1 0 0 0 0-2"/></g></svg>',
            emoji_1f61c: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#NWWt1Qze-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M36 19c0-9.39-7.61-17-17-17C9.612 2 2 9.61 2 19c0 9.388 7.612 17 17 17 9.39 0 17-7.612 17-17"/><path fill="#664500" d="M16.457 20.185c-.06.135-1.5 3.297-4.457 3.297s-4.397-3.162-4.457-3.297a.5.5 0 0 1 .754-.605c.013.01 1.262.902 3.703.902 2.426 0 3.674-.88 3.702-.9a.498.498 0 0 1 .755.603"/><path fill="#f5f8fa" d="M32 22.482a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0"/><path fill="#292f33" d="M28 22.482a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0"/><path fill="#664500" d="M8 13.982c0-3.964 4.596-9 11-9s11 5 11 9c0 0-10.333-2.756-22 0"/><path fill="#e75a70" d="M13 12.1V6.02c0-3 2-6 6-6s6 3 6 6v6.042c-6.292-1.292-12 .04-12 .04"/></g></svg>',
            emoji_1f621: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#S7o33N9M-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#da2f47" d="M36 19c0-9.39-7.61-17-17-17C9.612 2 2 9.61 2 19c0 9.388 7.612 17 17 17 9.39 0 17-7.612 17-17"/><path fill="#292f33" d="M26.485 7.12C26.44 7.3 25.317 11.5 19 11.5c-6.318 0-7.44-4.2-7.485-4.38a.5.5 0 0 1 .836-.476c.02.02 1.96 1.856 6.65 1.856 4.7 0 6.63-1.837 6.65-1.856a.505.505 0 0 1 .6-.08.5.5 0 0 1 .24.557m-9.78 12.59C13.45 22.96 8.22 23 8 23a1 1 0 1 1 0-2c.028 0 1.924-.022 3.982-.737C11.39 19.623 11 18.63 11 17.5c0-1.934 1.12-3.5 2.5-3.5s2.5 1.566 2.5 3.5c0 .174-.02.34-.037.507.013 0 .025-.007.037-.007a1 1 0 0 1 .707 1.707M30 23c-.22 0-5.45-.038-8.707-3.293A1 1 0 0 1 22 18c.013 0 .024.007.036.007-.016-.167-.036-.333-.036-.507 0-1.934 1.12-3.5 2.5-3.5s2.5 1.566 2.5 3.5c0 1.13-.39 2.123-.982 2.763 2.058.715 3.954.737 3.984.737A1 1 0 0 1 30 23"/></g></svg>',
            emoji_1f622: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#4MWIHBVm-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M36 19c0-9.39-7.61-17-17-17C9.612 2 2 9.61 2 19c0 9.388 7.612 17 17 17 9.39 0 17-7.612 17-17"/><path fill="#664500" d="M15 20.5c0-1.934-1.12-3.5-2.5-3.5S10 18.566 10 20.5c0 1.933 1.12 3.5 2.5 3.5s2.5-1.567 2.5-3.5m13 0c0-1.934-1.12-3.5-2.5-3.5S23 18.566 23 20.5c0 1.933 1.12 3.5 2.5 3.5s2.5-1.567 2.5-3.5M7 24a1 1 0 0 0-.8 1.6C9.462 29.95 13.816 30 14 30a1 1 0 0 0 .004-2c-.155-.002-3.57-.086-6.204-3.6A1 1 0 0 0 7 24m24 0a.997.997 0 0 0-.8.4c-2.64 3.52-6.06 3.6-6.206 3.6A1 1 0 0 0 24 30c.184 0 4.537-.05 7.8-4.4A1 1 0 0 0 31 24M24.485 9.12c-.012.045-1.146 4.38-5.485 4.38-4.34 0-5.475-4.335-5.485-4.38a.495.495 0 0 1 .23-.543.51.51 0 0 1 .597.06c.01.007 1.014.863 4.658.863 3.59 0 4.617-.83 4.656-.863a.5.5 0 0 1 .83.484"/><path fill="#5dadec" d="M17 5a5 5 0 0 0-5-5 5 5 0 0 0-5 5c0 2.762 4 10 5 10s5-7.238 5-10"/></g></svg>',
            emoji_1f624: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#fkgWr7oH-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M36 19c0-9.39-7.61-17-17-17S2 9.61 2 19s7.61 17 17 17 17-7.61 17-17"/><path fill="#664500" d="M21 24a1 1 0 0 0-.987 1.165C20.408 27.53 22.583 32 28 32a1 1 0 0 0 0-2c-5.095 0-5.98-4.954-6.014-5.165A1 1 0 0 0 21 24m-4 0a1 1 0 0 0-.986.833C15.977 25.043 15.06 30 10 30a1 1 0 0 0 0 2c5.416 0 7.592-4.47 7.986-6.835A1 1 0 0 0 17 24m-4.59-4.892c-2.335 0-3.87.997-3.964 1.06a1 1 0 1 0 1.11 1.664c.098-.064 2.6-1.636 5.997.063a1 1 0 0 0 .895-1.79c-1.494-.746-2.867-.997-4.038-.997m13.18 0c-1.17 0-2.544.25-4.037.998a1 1 0 0 0 .894 1.79c3.4-1.7 5.9-.127 6.004-.06a1.01 1.01 0 0 0 1.39-.29.997.997 0 0 0-.28-1.378c-.09-.063-1.63-1.06-3.96-1.06M27 10a.997.997 0 0 0-.8.4c-.025.034-2.782 3.6-7.2 3.6s-7.174-3.566-7.202-3.602a1.004 1.004 0 0 0-1.4-.195.998.998 0 0 0-.198 1.397c.135.18 3.362 4.4 8.8 4.4 5.437 0 8.665-4.22 8.8-4.4A1 1 0 0 0 27 10"/><path fill="#f5f8fa" d="M16.39 16.92a.997.997 0 0 1-1.238-.39l-5-8A.998.998 0 0 1 11 7h3a1 1 0 0 1 .97.758l2 8a1 1 0 0 1-.58 1.162m11.458-8.39l-5 8a1 1 0 0 1-1.817-.772l2-8A.998.998 0 0 1 24 7h3a1 1 0 0 1 .848 1.53"/><path fill="#e1e8ed" d="M32.982 6.822c.003.06.018.117.018.178a3 3 0 0 1-3 3 2.995 2.995 0 0 1-2.473-1.305A4 4 0 1 1 26 1c1.365 0 2.568.686 3.29 1.73A2.993 2.993 0 0 1 32 1a3 3 0 0 1 3 3 2.99 2.99 0 0 1-2.018 2.822M12 9c-.542 0-1.056-.11-1.527-.305A2.996 2.996 0 0 1 8 10a3 3 0 0 1-3-3c0-.06.014-.118.018-.178A2.99 2.99 0 0 1 3 4a3 3 0 0 1 3-3c1.202 0 2.23.71 2.71 1.73A3.996 3.996 0 0 1 12 1a4 4 0 0 1 0 8"/></g></svg>',
            emoji_1f629: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#e2wejYoO-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M36 19c0-9.39-7.61-17-17-17C9.612 2 2 9.61 2 19c0 9.388 7.612 17 17 17 9.39 0 17-7.612 17-17"/><path fill="#664500" d="M17.664 26.457a.5.5 0 0 1-.592-.148c-.01-.02-.98-1.21-3.335-1.85a8.543 8.543 0 0 0-2.244-.32c-.993 0-1.56.21-1.562.21a.5.5 0 0 1-.57-.78c.07-.09 1.78-2.15 4.13-2.15.35 0 .7.05 1.05.14 2.86.78 3.41 4.21 3.43 4.35a.5.5 0 0 1-.29.53m10.97-2.15a.502.502 0 0 1-.59.16c-.004-.005-.63-.258-1.735-.258a8.7 8.7 0 0 0-2.073.266c-2.37.583-3.37 1.75-3.38 1.76a.5.5 0 0 1-.88-.406c.03-.143.67-3.56 3.54-4.265.31-.076.63-.115.948-.115 2.398 0 4.1 2.16 4.17 2.25a.498.498 0 0 1 0 .61M11 27a1 1 0 0 0-.244 1.97c.036.01 3.593.96 5.352 4.477a1 1 0 1 0 1.788-.894c-2.18-4.362-6.47-5.478-6.652-5.523A.976.976 0 0 0 11 27m16 0c-.08 0-.16.01-.242.03-.182.045-4.472 1.16-6.653 5.523a1 1 0 0 0 1.79.894c1.757-3.517 5.315-4.468 5.35-4.478A1 1 0 0 0 27 27M19 8.035c-3.623 0-6.027-.422-9-1-.68-.13-2 0-2 2 0 4 4.595 9 11 9 6.404 0 11-5 11-9 0-2-1.32-2.132-2-2-2.973.578-5.377 1-9 1"/><path fill="#fff" d="M11 12s3 1 8 1 8-1 8-1-2 4-8 4-8-4-8-4"/></g></svg>',
            emoji_1f62d: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#sx5jWp9Q-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M36 19c0-9.39-7.61-17-17-17S2 9.61 2 19s7.61 17 17 17 17-7.61 17-17"/><path fill="#664500" d="M23 10c0-2.763-1.79-3-4-3s-4 .237-4 3c0 2.76 1.79 6 4 6s4-3.24 4-6m8 12a.987.987 0 0 0-.37.072c-5.23 2.09-7.373 5.24-7.462 5.374a1 1 0 0 0 1.662 1.112c.02-.028 1.93-2.786 6.54-4.63a1 1 0 0 0-.37-1.93M7 22a1 1 0 0 0-.372 1.93c4.612 1.843 6.523 4.6 6.542 4.63a1 1 0 0 0 1.662-1.113c-.09-.135-2.233-3.284-7.46-5.375A.99.99 0 0 0 7 22"/><path fill="#5dadec" d="M9 2l4 .046V21H9V2zm16 19h4V2l-4 .046V21z"/><path fill="#664500" d="M16 19c-.15 0-.304.034-.447.105-3.512 1.757-7.07.02-7.106 0a1 1 0 0 0-.894 1.79c.182.09 4.498 2.196 8.894 0A1 1 0 0 0 16 19m14 0c-.15 0-.304.034-.447.105-3.513 1.756-7.07.02-7.106 0a1 1 0 0 0-.894 1.79c.18.09 4.5 2.196 8.894 0A1 1 0 0 0 30 19"/><path fill="#5dadec" d="M37 3c0-1.104-8.06-2-18-2S1 1.896 1 3s8.06 2 18 2 18-.896 18-2"/><path fill="#e75a70" d="M22 10c0-1.657-1.343-2-3-2s-3 .343-3 2 1.343 2 3 2 3-.343 3-2"/></g></svg>',
            emoji_1f62e: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#wKhPDbH7-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M36 19c0-9.39-7.61-17-17-17S2 9.61 2 19s7.61 17 17 17 17-7.61 17-17"/><path fill="#664500" d="M15 23c0-1.657-.96-3-2.143-3-1.184 0-2.143 1.343-2.143 3s.96 3 2.143 3C14.04 26 15 24.657 15 23m12 .2c0-1.547-.895-2.8-2-2.8-1.104 0-2 1.253-2 2.8 0 1.546.896 2.8 2 2.8 1.105 0 2-1.254 2-2.8M23 12c0-2.763-1.792-5-4-5-2.21 0-4 2.237-4 5 0 2.76 1.79 5 4 5 2.208 0 4-2.24 4-5"/></g></svg>',
            emoji_1f631: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#BYmzg6lr-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M19 36C9.612 36 2 28.388 2 19 2 13.285 4.83 8.24 9.153 5.16c.098 6.08-2.112 12.896-5.827 12.896a3.1 3.1 0 0 1-1.09-.173c.287.714.908 1.117 2.07 1.117 4.03 0 6.294-8.034 5.753-14.44a16.89 16.89 0 0 1 17.88.002C27.4 10.992 29.66 19 33.69 19c1.165 0 1.787-.402 2.07-1.117a3.11 3.11 0 0 1-1.092.173c-3.72 0-5.93-6.8-5.826-12.897C33.17 8.24 36 13.28 36 19c0 9.388-7.61 17-17 17"/><path fill="#bdddf4" d="M19 36C9.612 36 2 28.388 2 19c0-1.126.116-2.225.325-3.29a9.84 9.84 0 0 0 1 2.346 3.09 3.09 0 0 1-1.088-.173c.25.623.777.99 1.67 1.078 2.826 3.95 8.516 6.65 15.093 6.65s12.267-2.7 15.093-6.64c.897-.09 1.426-.45 1.674-1.08a3.09 3.09 0 0 1-1.09.18 9.84 9.84 0 0 0 .998-2.348A16.97 16.97 0 0 1 36 19c0 9.387-7.61 17-17 17"/><path fill="#f5f8fa" d="M8.347 25.09c-.946-3.176.107-6.293 2.353-6.962 2.246-.67 4.834 1.362 5.78 4.538.945 3.175-.108 6.293-2.352 6.962-2.246.67-4.834-1.363-5.78-4.538m21.304 0c.946-3.176-.107-6.293-2.352-6.962-2.247-.67-4.834 1.362-5.78 4.538-.946 3.175.107 6.293 2.35 6.962 2.247.67 4.835-1.363 5.782-4.538"/><path fill="#664500" d="M19 19c-2.757 0-5-2.243-5-5V8c0-2.757 2.243-5 5-5s5 2.243 5 5v6c0 2.757-2.243 5-5 5"/><path fill="#fcab40" d="M3.326 18.056a3.12 3.12 0 0 1-1.09-.172c.07.168.158.317.266.45C.744 16.17 4.69 9.046 2.772 2h6.102c1.123 6.574-1.167 16.056-5.548 16.056m32.44-.173c-.295.11-.65.172-1.092.172C30.29 18.055 28 8.61 29.127 2h6.1c-1.798 6.653 1.566 13.306.54 15.883"/></g></svg>',
            emoji_1f633: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#HezQS4oH-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M36 19c0-9.39-7.61-17-17-17C9.612 2 2 9.61 2 19c0 9.388 7.612 17 17 17 9.39 0 17-7.612 17-17"/><path fill="#ff7892" d="M34 15a5 5 0 0 0-5-5 5 5 0 0 0-5 5 5 5 0 0 0 5 5 5 5 0 0 0 5-5m-20 0a5 5 0 0 0-5-5 5 5 0 0 0-5 5 5 5 0 0 0 5 5 5 5 0 0 0 5-5"/><path fill="#f5f8fa" d="M31 20.5a5.5 5.5 0 1 0-11 0 5.5 5.5 0 0 0 11 0m-13 0a5.5 5.5 0 1 0-11 0 5.5 5.5 0 0 0 11 0"/><path fill="#664500" d="M15 20.5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0m13 0a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0M23 7h-8a1 1 0 0 0 0 2h8a1 1 0 0 0 0-2m8 19a.997.997 0 0 0-.8.4c-2.64 3.52-6.06 3.6-6.206 3.6A1 1 0 0 0 24 32c.184 0 4.537-.05 7.8-4.4A1 1 0 0 0 31 26M7 26a1 1 0 0 0-.8 1.6C9.462 31.95 13.816 32 14 32a1 1 0 0 0 .004-2c-.155-.002-3.57-.086-6.204-3.6A1 1 0 0 0 7 26"/></g></svg>',
            emoji_1f634: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#tlvM7r7X-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M36 19c0-9.39-7.61-17-17-17C9.612 2 2 9.61 2 19c0 9.388 7.612 17 17 17 9.39 0 17-7.612 17-17"/><path fill="#664500" d="M22 11a3 3 0 1 0-6 0 3 3 0 0 0 6 0m-3.687 9.388a.5.5 0 0 1-.61.014c-.013-.01-1.26-.902-3.702-.902-2.44 0-3.69.892-3.7.9a.5.5 0 0 1-.75-.603c.06-.135 1.5-3.297 4.46-3.297s4.4 3.162 4.46 3.297a.5.5 0 0 1-.14.59m10 0a.5.5 0 0 1-.61.015c-.01-.01-1.26-.902-3.7-.902-2.44 0-3.69.892-3.7.9a.5.5 0 0 1-.753-.603c.06-.135 1.5-3.297 4.456-3.297 2.96 0 4.4 3.162 4.46 3.297a.5.5 0 0 1-.146.59"/><path fill="#2a6797" d="M16.998 31.87h-2.003c-.43 0-.78.275-.78.755s.35.755.78.755h3.923c.156 0 .563-.07.563-.54 0-.227-.04-.335-.18-.515l-2.72-3.814h2.28c.43 0 .78-.27.78-.75s-.35-.75-.78-.75h-4.02c-.38 0-.7.2-.7.59 0 .19.1.37.16.47l2.7 3.8zm7.504 2.817h-2.34c-.504 0-.91.322-.91.882s.406.88.91.88h4.58c.184 0 .66-.09.66-.63 0-.27-.056-.39-.21-.61l-3.18-4.46h2.662c.504 0 .91-.32.91-.89 0-.56-.406-.884-.91-.884H21.98c-.448 0-.826.224-.826.687 0 .224.112.434.182.545l3.166 4.452zm8-3.377h-3.008c-.648 0-1.17.414-1.17 1.134s.522 1.135 1.17 1.135h5.89c.233 0 .845-.11.845-.82 0-.34-.08-.51-.27-.78l-4.09-5.73h3.42c.64 0 1.17-.418 1.17-1.138S35.94 24 35.29 24h-6.03c-.576 0-1.062.288-1.062.882 0 .288.144.558.234.702l4.07 5.726z"/></g></svg>',
            emoji_1f637: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#cTDIbCa5-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M36 19c0-9.39-7.61-17-17-17C9.612 2 2 9.61 2 19c0 9.388 7.612 17 17 17 9.39 0 17-7.612 17-17"/><path fill="#664500" d="M8 22a1 1 0 0 0-.555 1.832C7.578 23.92 10.745 26 15 26a1 1 0 0 0 0-2c-3.655 0-6.418-1.814-6.445-1.832A.996.996 0 0 0 8 22m22 0a.996.996 0 0 0-.553.167C29.42 22.185 26.627 24 23 24a1 1 0 0 0 0 2c4.254 0 7.422-2.08 7.555-2.168A1 1 0 0 0 30 22"/><path fill="#f5f8fa" d="M2.023 18.535L10 14.91v-4.55l-6.236 1.135a17.04 17.04 0 0 1 1.318-2.24L10 8.363V7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v1.363l4.92.895a16.82 16.82 0 0 1 1.317 2.24L28 10.363v4.546l7.977 3.62c.004.15.024.31.024.46 0 .51-.03 1.01-.07 1.51L28 16.91V18a2 2 0 0 1-2 2H12a2 2 0 0 1-2-2v-1.09l-7.923 3.6C2.032 20.013 2 19.51 2 19c0-.157.02-.31.023-.465"/></g></svg>',
            emoji_1f641: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#X2pUk7Aw-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M36 19c0-9.39-7.61-17-17-17C9.612 2 2 9.61 2 19c0 9.388 7.612 17 17 17 9.39 0 17-7.612 17-17"/><path fill="#664500" d="M11 24s0 2 2 2 2-2 2-2v-2s0-2-2-2-2 2-2 2v2zm12 0s0 2 2 2 2-2 2-2v-2s0-2-2-2-2 2-2 2v2zM9.665 8.63a.5.5 0 0 1 .635-.03c.04.03 3.922 2.9 8.7 2.9 4.766 0 8.662-2.87 8.7-2.9a.5.5 0 0 1 .73.657C28.3 9.472 25.21 14.5 19 14.5S9.7 9.472 9.57 9.257a.5.5 0 0 1 .095-.628"/></g></svg>',
            emoji_1f64c: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><path fill="#edbb9f" d="M15 46.25H5v-12.5h10v12.5zm27.5 0h-10v-12.5h10v12.5z"/><g clip-path="url(#4giApjL2-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#d79e84" d="M34 7s-3-2-8-1v5h8V7zM4 7s3-2 8-1v5H4V7zm9 4H5v8h8v-8zm20 0h-8v8h8v-8z"/><path fill="#edbb9f" d="M1.373 25.165s.003 1.225 1.227 1.222c1.226-.004 1.222-1.23 1.222-1.23l-.018-5.683c.194.09.4.17.612.24l.025 7.89s.01 1.225 1.23 1.22c1.23-.002 1.22-1.228 1.22-1.228l-.02-7.42c.2.017.41.032.61.04l.03 8.603s.01 1.22 1.23 1.22c1.23-.01 1.22-1.23 1.22-1.23l-.03-8.6c.21-.01.41-.04.62-.05l.03 8.03s.008 1.22 1.23 1.22c1.225-.01 1.22-1.23 1.22-1.23l-.03-8.5v-1.29c-3.675.01-6.134-3.047-6.145-6.11 0-.612.61-.616.61-.616.01 3.68 2.47 6.112 6.144 6.102l1.8 4.19s.39 1.155 1.552.76c1.16-.39.77-1.554.77-1.554l-.893-3.105c-.355-1.235-.685-2.477-.86-3.744A7.354 7.354 0 0 0 8.666 8c-4.057.017-7.337 3.315-7.324 7.37 0 .214.015.42.035.61l-.032.005.03 9.18zm35.244 0s-.003 1.225-1.227 1.222c-1.226-.004-1.222-1.23-1.222-1.23l.018-5.683c-.194.09-.4.17-.612.24l-.025 7.89s-.01 1.225-1.23 1.22c-1.23-.002-1.22-1.228-1.22-1.228l.02-7.42a12.84 12.84 0 0 1-.61.04l-.03 8.603s-.01 1.22-1.23 1.22c-1.23-.01-1.22-1.23-1.22-1.23l.03-8.6c-.21-.01-.41-.04-.62-.05l-.03 8.03s-.008 1.22-1.23 1.22c-1.225-.01-1.22-1.23-1.22-1.23l.025-8.5v-1.29c3.675.01 6.133-3.05 6.145-6.11 0-.617-.612-.62-.612-.62-.01 3.68-2.47 6.11-6.145 6.1l-1.8 4.19s-.39 1.156-1.554.76c-1.158-.39-.766-1.553-.766-1.553l.894-3.105c.352-1.235.683-2.477.86-3.744A7.354 7.354 0 0 1 29.324 8c4.055.017 7.336 3.315 7.322 7.37 0 .214-.013.42-.034.61l.032.005-.03 9.18z"/><path fill="#ffac33" d="M24.54 30.54a1 1 0 0 0-.79 1.61l2.98 3.858a1 1 0 1 0 1.582-1.222l-2.98-3.855a.996.996 0 0 0-.79-.39m-11.022 0a1 1 0 0 0-.79.39l-2.98 3.86a1 1 0 0 0 1.583 1.23l2.98-3.85a1 1 0 0 0-.792-1.61M19 31a1 1 0 0 0-1 1v4a1 1 0 0 0 2 0v-4a1 1 0 0 0-1-1"/></g></svg>',
            emoji_1f64f: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#1wiBuPRz-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#2a6797" d="M31 15c-3 0-7-8-7-10 0-3 2-4 2-4h11v10s-4 4-6 4M7 15c3 0 7-8 7-10 0-3-2-4-2-4H1v10s4 4 6 4"/><path fill="#c1694f" d="M26 26a2 2 0 0 1-4 0v7.277c.596.347 1 .985 1 1.723a2 2 0 0 1-4 0 2 2 0 0 1-4 0c0-.738.405-1.376 1-1.723V26a2 2 0 0 1-4 0l-1-11.526V10h5V9h6v1h5v4.474L26 26z"/><path fill="#d79e84" d="M25 21l-1 12a2 2 0 0 1-4 0V13c0-6 6-9 6-9s6 4 6 9l-7 8zm-9 14a2 2 0 0 1-2-2l-1-12-7-8c0-5 6-9 6-9s6 3 6 9v20a2 2 0 0 1-2 2"/><path fill="#fdcb58" d="M12 30l-6 3-1-2 6-2 1 1zm14 0l6 3 1-2-6-2-1 1zm-16-4l-6 1-1-2h7v1zm18 0l6 1 1-2h-7v1z"/></g></svg>',
            emoji_1f680: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#s4zskZS3-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#a0041e" d="M2 20l8 7 16-1 1-16-7-8s0 6-6 12-12 6-12 6"/><path fill="#ffac33" d="M1.973 2s-.036 7.98 2.985 11C7.978 16.02 16 15.813 16 15.813S16 8 13 5C10 2 1.972 2 1.972 2"/><path fill="#ffcc4d" d="M6 10a4 4 0 1 0 8 0 4 4 0 0 0-8 0"/><path fill="#55acee" d="M37 37s-10 0-22-10c-6-5-6-14-4-16s11-2 16 4c10 12 10 22 10 22"/><path d="M28 32a3.996 3.996 0 0 1-3.642-2.36 3.97 3.97 0 0 0 1.64.36 4 4 0 0 0 4-4c0-.585-.132-1.138-.358-1.64A3.995 3.995 0 0 1 28 32"/><path fill="#a0041e" d="M9 9s0 4 1 5 13 11 14 10-9-13-10-14-5-1-5-1"/></g></svg>',
            emoji_1f911: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45"><g clip-path="url(#yHxhMkWF-a)" transform="matrix(1.25 0 0 -1.25 0 45)"><path fill="#ffcc4d" d="M36 18c0-9.94-8.06-18-18-18S0 8.06 0 18s8.06 18 18 18 18-8.06 18-18"/><path fill="#664500" d="M7 14.737c0-3.964 4.596-9 11-9s11 5 11 9c0 0-10.333-2.756-22 0"/><path fill="#5d9040" d="M12 12.997v-6.96c0-3 2-6 6-6s6 3 6 6v6.92c-6.29-1.293-12 .04-12 .04"/><path fill="#664500" d="M12.284 23.67c-.756.292-1.47.568-1.47.968 0 .66.884.693 1.06.693.626 0 .936-.234 1.21-.44.21-.16.43-.324.73-.324.566 0 .823.397.823.766 0 .736-.902 1.256-1.86 1.473v.395a.94.94 0 0 1-.938.94.94.94 0 0 1-.94-.94v-.426C9.756 26.44 9.055 25.6 9.055 24.54c0-1.312 1.293-1.85 2.433-2.324.817-.34 1.59-.66 1.59-1.162 0-.366-.46-.76-1.203-.76-.75 0-1.18.298-1.56.563-.262.183-.51.356-.805.356-.43 0-.767-.362-.767-.824 0-.68.93-1.357 2.157-1.595v-.47a.94.94 0 0 1 1.88 0l-.006.497c1.296.316 2.062 1.222 2.062 2.46 0 1.403-1.415 1.95-2.552 2.388M26.694 21.264c0 1.404-1.415 1.95-2.552 2.39-.756.29-1.47.566-1.47.966 0 .66.884.693 1.06.693.626 0 .937-.234 1.21-.44.212-.16.43-.324.73-.324.566 0 .824.396.824.764 0 .737-.903 1.257-1.86 1.474v.394a.94.94 0 0 1-1.88 0v-.426c-1.142-.332-1.843-1.174-1.843-2.235 0-1.31 1.293-1.847 2.433-2.322.818-.34 1.59-.66 1.59-1.16 0-.367-.46-.763-1.203-.763-.75 0-1.18.3-1.56.565-.26.183-.51.356-.804.356-.432 0-.77-.362-.77-.825 0-.678.932-1.354 2.157-1.592v-.47a.94.94 0 0 1 1.88 0l-.004.497c1.294.316 2.06 1.223 2.06 2.46"/><path fill="#fff" d="M20.97 4.93c0 1.37-1.38 1.902-2.487 2.33-.738.284-1.434.554-1.434.943 0 .643.86.675 1.033.675.61 0 .912-.228 1.18-.43.205-.155.418-.315.713-.315.55 0 .8.388.8.747 0 .717-.878 1.224-1.81 1.437v.384c0 .505-.412.917-.917.917a.918.918 0 0 1-.917-.916v-.414c-1.115-.325-1.8-1.145-1.8-2.18 0-1.278 1.262-1.802 2.374-2.264.797-.33 1.55-.643 1.55-1.132 0-.357-.45-.743-1.174-.743-.73 0-1.15.292-1.52.55-.255.18-.496.348-.784.348-.42 0-.75-.354-.75-.804 0-.662.908-1.32 2.103-1.553v-.46a.916.916 0 0 1 1.832 0l-.003.488c1.262.307 2.008 1.19 2.008 2.396"/></g></svg>',
            emoji_23f0: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffcc4d" d="M21 30.959a2.012 2.012 0 0 0-2-2.015c-1.097 0-2 .902-2 2.014v4.026c0 1.113.903 2.015 2 2.015s2-.9 2-2.013v-4.03z"/><path fill="#ffac33" d="M10.18 1c-.224 0-.452.052-.666.16a1.522 1.522 0 0 0-.666 2.027l8.94 18.126c.253.512.768.835 1.333.835.566 0 1.08-.323 1.333-.835l8.942-18.126a1.522 1.522 0 0 0-.666-2.028 1.482 1.482 0 0 0-2 .675L19.12 17.26 11.514 1.835A1.486 1.486 0 0 0 10.18 1"/><path fill="#58595b" d="M19.12 16.608a.985.985 0 0 0-.7.295L4.51 31.003a1.017 1.017 0 0 0 0 1.423.983.983 0 0 0 1.404 0L19.12 19.04l13.204 13.386a.985.985 0 0 0 1.405 0 1.017 1.017 0 0 0 0-1.424l-13.906-14.1a.988.988 0 0 0-.703-.294"/><path fill="#dd2e44" d="M35.015 17.615c0-8.898-7.115-16.11-15.894-16.11-8.776 0-15.892 7.212-15.892 16.11 0 8.9 7.116 16.113 15.893 16.113 8.78 0 15.895-7.213 15.895-16.113"/><path fill="#e6e7e8" d="M31.04 17.615c0-6.674-5.334-12.084-11.92-12.084-6.582 0-11.918 5.41-11.918 12.085 0 6.675 5.336 12.085 11.92 12.085s11.92-5.41 11.92-12.085"/><path fill="#ffcc4d" d="M31.04 35.743a5.9 5.9 0 0 1-4.214-1.77l8.43-8.544A6.066 6.066 0 0 1 37 29.7c0 3.337-2.67 6.043-5.96 6.043M6.96 35.743a5.9 5.9 0 0 0 4.214-1.77l-8.43-8.544A6.07 6.07 0 0 0 1 29.7c0 3.337 2.668 6.043 5.96 6.043"/><path fill="#414042" d="M24 17h-5a1 1 0 0 0-1 1v9a1 1 0 0 0 2 0v-8h4a1 1 0 0 0 0-2"/></g></svg>',
            emoji_2600: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#97yJhltt-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffac33" d="M17 35s0 2 2 2 2-2 2-2v-2s0-2-2-2-2 2-2 2v2zm18-14s2 0 2-2-2-2-2-2h-2s-2 0-2 2 2 2 2 2h2zM5 21s2 0 2-2-2-2-2-2H3s-2 0-2 2 2 2 2 2h2zm5.12 8.706s1.415-1.414 0-2.828c-1.413-1.414-2.827 0-2.827 0l-1.415 1.414s-1.414 1.414 0 2.83c1.415 1.414 2.83 0 2.83 0l1.413-1.415zm21-21s1.415-1.413 0-2.827c-1.413-1.42-2.827 0-2.827 0L26.88 7.29s-1.415 1.414 0 2.828c1.413 1.415 2.827 0 2.827 0l1.414-1.413zm-.412 18.174s-1.414-1.415-2.828 0c-1.414 1.413 0 2.827 0 2.827l1.414 1.414s1.414 1.42 2.828 0c1.414-1.41 0-2.82 0-2.82l-1.414-1.41zm-21-21s-1.414-1.415-2.828 0c-1.414 1.413 0 2.827 0 2.827l1.414 1.414s1.414 1.42 2.828 0c1.414-1.41 0-2.82 0-2.82L9.708 5.88zM17 5s0 2 2 2 2-2 2-2V3s0-2-2-2-2 2-2 2v2zm12 14c0 5.523-4.478 10-10 10-5.523 0-10-4.477-10-10 0-5.522 4.477-10 10-10 5.522 0 10 4.478 10 10"/></g></svg>',
            emoji_2601: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#os3KOGgl-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#b4c3cc" d="M28 29a6.98 6.98 0 0 1-2.015-.298c.005.1.015.197.015.298a5.998 5.998 0 0 1-11.785 1.573A5.974 5.974 0 0 1 12 31a6 6 0 0 1 0-12 5.998 5.998 0 0 1 5.785 4.428A5.975 5.975 0 0 1 20 23c.375 0 .74.04 1.096.104A6.92 6.92 0 0 1 21 22a7 7 0 0 1 7-7 7 7 0 0 1 0 14"/><path fill="#8899a6" d="M32 15a4.98 4.98 0 0 1-1.34-.204c.217.526.34 1.1.34 1.704a4.5 4.5 0 0 1-4.5 4.5 4.46 4.46 0 0 1-2.7-.92A6.497 6.497 0 0 1 17.5 25a6.497 6.497 0 0 1-6.13-4.357A8 8 0 1 1 9 5h23a5 5 0 0 1 5 5 5 5 0 0 1-5 5"/></g></svg>',
            emoji_2615: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#Buz3ZJPA-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#99aab5" d="M37 11c0-5.522-8.06-10-18-10S1 5.478 1 11s8.06 10 18 10 18-4.478 18-10"/><path fill="#ccd6dd" d="M37 13c0-5.522-8.06-10-18-10S1 7.478 1 13s8.06 10 18 10 18-4.478 18-10"/><path fill="#f5f8fa" d="M19 6C4.042 6 2 21 2 25h34c0-2-1.958-19-17-19"/><path fill="#ccd6dd" d="M32.882 30.048c-1.357.938-3.103 1.694-5.12 2.25 1.874.576 4.55.31 5.12-2.25m2.503-2.692c2.442 10.122-9.78 7.706-12.204 5.798a37.53 37.53 0 0 1-4.18.234c-9.39 0-17-3.228-17-8.444C2 19.728 9.61 15.5 19 15.5s17 4.228 17 9.444c0 .862-.225 1.664-.615 2.412"/></g><g clip-path="url(#Buz3ZJPA-b)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#8a4b38" d="M34 24c0-3.866-6.716-7-15-7-8.284 0-15 3.134-15 7s6.716 7 15 7c8.284 0 15-3.134 15-7"/><path fill="#d99e82" d="M21 20a.997.997 0 0 0-.707.293c-2.337 2.337-2.376 4.885-.125 8.262.74 1.11.9 2.245.478 3.377-.46 1.235-1.438 1.996-1.73 2.076-.554 0-.96.444-.96.996 0 .553.492.996 1.044.996.997 0 2.395-1.153 3.183-2.625 1.034-1.933.91-4.04-.35-5.93-1.962-2.942-1.532-4.332-.126-5.738A1 1 0 0 0 21 20m-6 2a.997.997 0 0 0-.707.293c-2.337 2.337-2.376 4.885-.125 8.262.727 1.09.894 2.082.494 2.947-.444.96-1.43 1.47-1.684 1.5a.99.99 0 0 0-.99.998c0 .553.46 1 1.012 1 .997 0 2.584-.974 3.36-2.423.48-.9 1.053-2.76-.528-5.132-1.96-2.942-1.53-4.332-.125-5.738A1 1 0 0 0 15 22"/></g></svg>',
            emoji_261d: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g fill="#d99e82" clip-path="url(#NKV4q8si-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path d="M14.578 31.35s-.188 1.99-2.18 1.803c-1.99-.188-1.802-2.18-1.802-2.18L11.77 19h4.013l-1.205 12.35zM31 14.917c0-1.06-.857-1.917-1.916-1.917h-.168c-1.06 0-1.916.858-1.916 1.917v4.166c0 1.06.857 1.917 1.916 1.917h.168c1.06 0 1.916-.858 1.916-1.917v-4.166zM24 23a2 2 0 0 1-2-2v-2.778c.61-.55 1-1.336 1-2.222 0-.753-.287-1.433-.745-1.96.34-.616.99-1.04 1.745-1.04a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2"/><path d="M29.063 12h-.125a2.93 2.93 0 0 0-2.45 1.322 3.04 3.04 0 0 0-.43-.497c-.05-.046-.104-.085-.157-.128a3.057 3.057 0 0 0-.57-.377 2.993 2.993 0 0 0-.43-.172c-.065-.02-.13-.045-.2-.06A2.945 2.945 0 0 0 24 12c-.237 0-.46.036-.68.09a2.97 2.97 0 0 0-.618.227c-.083.04-.164.076-.242.123a3.077 3.077 0 0 0-.99.96l.003.002C21.273 13.287 21 13 20 13h-2.54c1.81-1.365 3.037-3.99 3.037-7a.5.5 0 0 0-1 0c0 3.86-2.188 7-4.876 7h-.12a.5.5 0 0 0 0 1H20a2 2 0 0 1 0 4h-8c-.033 0-.063-.008-.095-.01a1.973 1.973 0 0 1-.764-.19 2.38 2.38 0 0 1-.32-.197 2.243 2.243 0 0 1-.28-.254 1.9 1.9 0 0 1-.23-.31 2.17 2.17 0 0 1-.17-.37c-.01-.03-.027-.06-.04-.1L9 13c-.103-.335-.48-1.87-.41-2.19C8.59 6 13.284 1 19 1c6.537 0 11.843 5.23 11.986 11.734A2.917 2.917 0 0 0 29.063 12M21 19v2a2 2 0 0 1-4 0v-2h4z"/></g></svg>',
            emoji_26a1: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#6UePMxUM-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#f4900c" d="M11 1a1 1 0 0 0-.89 1.457L17.077 16H5a1 1 0 0 0-.654 1.757l22 19a1 1 0 0 0 1.544-1.215L20.925 22H33a1 1 0 0 0 .653-1.757l-22-19A1 1 0 0 0 11 1"/></g></svg>',
            emoji_26c5: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#dFbSflUq-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#ffac33" d="M15 35s0 2 2 2 2-2 2-2v-2s0-2-2-2-2 2-2 2v2zm16-12s2 0 2-2-2-2-2-2h-2s-2 0-2 2 2 2 2 2h2zM5 23s2 0 2-2-2-2-2-2H3s-2 0-2 2 2 2 2 2h2zm3.872 7.956s1.414-1.414 0-2.828-2.828 0-2.828 0L4.63 29.543s-1.415 1.414 0 2.83c1.414 1.413 2.828 0 2.828 0l1.414-1.416zm19.085-2.826s-1.414-1.415-2.828 0c-1.42 1.413 0 2.827 0 2.827l1.41 1.414s1.41 1.42 2.83 0c1.41-1.41 0-2.82 0-2.82l-1.42-1.41zM26 21a9 9 0 0 1-9 9 9 9 0 1 1 9-9"/><path fill="#b4c3cc" d="M29 17a7.99 7.99 0 0 1-2.37-.357A6.498 6.498 0 0 1 20.5 21c-3.044 0-5.592-2.096-6.3-4.92a4.46 4.46 0 0 1-2.7.92A4.5 4.5 0 0 1 7 12.5c0-.604.123-1.178.34-1.704A4.98 4.98 0 0 1 6 11a5 5 0 0 1-5-5 5 5 0 0 1 5-5h23a8 8 0 0 1 0 16"/></g></svg>',
            emoji_26d4: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#PNr7Pr5E-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#be1931" d="M37 19c0-9.94-8.06-18-18-18S1 9.06 1 19s8.06 18 18 18 18-8.06 18-18"/><path fill="#fff" d="M33 17a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2v-4z"/></g></svg>',
            emoji_270c: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g fill="#d99e82" clip-path="url(#r2crxhvs-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path d="M22.413 34.053c-1.956.416-2.372-1.54-2.372-1.54l-3.09-11.57a26.6 26.6 0 0 1-1.3-.106L13.58 31.35s-.188 1.99-2.18 1.803c-1.99-.188-1.803-2.18-1.803-2.18L11.77 19H20c.208 0 .41-.022.607-.062l3.346 12.743s.416 1.96-1.54 2.38M31 14.92c0-1.06-.857-1.918-1.916-1.918h-.168c-1.06 0-1.916.857-1.916 1.916v4.166c0 1.06.857 1.917 1.916 1.917h.168c1.06 0 1.916-.86 1.916-1.92v-4.16zM24 23a2 2 0 0 1-2-2v-2.778c.61-.55 1-1.336 1-2.222 0-.753-.287-1.433-.745-1.96.34-.616.99-1.04 1.745-1.04a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2"/><path d="M29.063 12h-.125a2.93 2.93 0 0 0-2.45 1.322 3.04 3.04 0 0 0-.43-.497c-.05-.046-.104-.085-.157-.128a3.057 3.057 0 0 0-.57-.377 2.993 2.993 0 0 0-.43-.172c-.065-.02-.13-.045-.2-.06A2.945 2.945 0 0 0 24 12c-.237 0-.46.036-.68.09a2.97 2.97 0 0 0-.618.227c-.083.04-.164.076-.242.123a3.077 3.077 0 0 0-.99.96l.003.002C21.273 13.287 21 13 20 13h-2.54c1.81-1.365 3.037-3.99 3.037-7a.5.5 0 0 0-1 0c0 3.86-2.188 7-4.876 7h-.12a.5.5 0 0 0 0 1H20a2 2 0 0 1 0 4h-8c-.033 0-.063-.008-.095-.01a1.973 1.973 0 0 1-.764-.19 2.38 2.38 0 0 1-.32-.197 2.243 2.243 0 0 1-.28-.254 1.9 1.9 0 0 1-.23-.31 2.17 2.17 0 0 1-.17-.37c-.01-.03-.027-.06-.04-.1L9 13c-.103-.335-.48-1.87-.41-2.19C8.59 6 13.284 1 19 1c6.537 0 11.843 5.23 11.986 11.734A2.917 2.917 0 0 0 29.063 12"/></g></svg>',
            emoji_2764: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5"><g clip-path="url(#KSwQoupJ-a)" transform="matrix(1.25 0 0 -1.25 0 47.5)"><path fill="#be1931" d="M36.885 25.166c0 5.45-4.418 9.868-9.867 9.868-3.308 0-6.227-1.632-8.018-4.128-1.79 2.496-4.71 4.13-8.017 4.13-5.45-.002-9.868-4.42-9.868-9.87 0-.772.098-1.52.266-2.24C2.76 14.413 12.22 5.43 19 2.966c6.783 2.464 16.25 11.446 17.617 19.96.17.72.268 1.47.268 2.24"/></g></svg>',
            emoji_c_agree: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17"><path fill="#37BC9B" fill-rule="evenodd" d="M15.62 9.336c0-.188.165-.18.322-.254.624-.278 1.058-.878 1.058-1.59 0-.973-.808-1.748-1.805-1.748H9.34c-.11 0-.202-.103-.202-.212 0-.11.09-.195.203-.205.493-.045 1.495-.045 1.824-.445.77-1.29.96-2.51.98-2.687.074-.633-.053-1.426-.632-1.818-.82-.553-1.766-.572-2.44.446-.402.607-1.565 1.97-2.917 3.097-1.765 1.47-2.66 2.212-2.662 2.213-.193.16-.446.35-.446.557-.116.204-1.023 1.933-1.023 4.597 0 1.584.307 2.73.59 3.46-1.007-.446-1.603-1.687-1.603-3.46 0-2.526.828-4.525.828-4.525l-.066-.03c-.338-.136-.8-.12-.978.266C.752 7.088 0 8.566 0 11.288c0 1.385.327 2.532.946 3.32.51.648 1.326 1.044 2.158 1.14.324.528.92.77 1.552.872.386.062.804.114 1.236.158.987.112 2.43.222 4.304.222.605 0 1.697 0 3.282-.038.795-.02 1.398-.71 1.352-1.487a1.36 1.36 0 0 0-.095-.426 1.77 1.77 0 0 0 1.253-1.605c.02-.45-.14-.868-.41-1.19.563-.28.96-.84.987-1.503a1.71 1.71 0 0 0-.206-.888c-.268-.415-.74-.232-.74-.528z"/></svg>',
            emoji_c_bear: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 19"><path fill="#FF4A68" fill-rule="evenodd" d="M8.997 8.792c.934 0 1.69-1.377 1.69-3.075 0-1.168-.358-2.184-.886-2.704a.55.55 0 0 1-.14-.273A18.84 18.84 0 0 1 9.29.167c-.015-.184-.24-.22-.3-.046-.255.77-.62 1.94-.703 2.63a.582.582 0 0 1-.148.33c-.5.54-.83 1.52-.83 2.65 0 1.7.75 3.08 1.69 3.08m4.325-7.24c-.06.55-.2 1.646-.427 2.464a.54.54 0 0 1-.18.28c-.506.403-.905 1.157-1.03 2.068-.2 1.468.386 2.788 1.31 2.948.92.16 1.832-.9 2.032-2.367.118-.86-.035-1.667-.367-2.222a.6.6 0 0 1-.085-.276c-.08-1.642-.65-2.576-.98-2.983-.09-.11-.25-.052-.26.096m4.294 6.47a4.953 4.953 0 0 0-.422-1.854c-.07-.154-.275-.11-.29.06-.03.32-.08.735-.162 1.103a.513.513 0 0 1-.3.37c-.576.22-1.103.97-1.303 1.96-.264 1.3.14 2.51.9 2.71.763.19 1.593-.7 1.857-2 .164-.81.07-1.59-.21-2.11a.58.58 0 0 1-.07-.255M5.046 9.355c.922-.16 1.508-1.48 1.308-2.947C6.22 5.422 5.764 4.62 5.2 4.25a.54.54 0 0 1-.228-.34c-.135-.63-.22-1.666-.26-2.283-.01-.167-.205-.22-.284-.078-.326.59-.868 1.74-1.026 3.07a.6.6 0 0 1-.068.21c-.3.55-.434 1.32-.322 2.14.2 1.467 1.11 2.527 2.034 2.367m-2.21.35c-.194-.964-.7-1.706-1.26-1.945a.523.523 0 0 1-.292-.344 10.48 10.48 0 0 1-.24-1.2c-.024-.16-.22-.2-.288-.05a5.496 5.496 0 0 0-.52 2.15.58.58 0 0 1-.04.21c-.204.506-.26 1.19-.116 1.9.264 1.3 1.094 2.196 1.856 2 .76-.196 1.165-1.41.9-2.71m-.28 6.833c0 4.038 5 1.9 6.228 1.9 1.23 0 6.228 2.138 6.228-1.9 0-2.87-2.642-6.222-6.228-6.222-3.587 0-6.228 3.36-6.228 6.23z"/></svg>',
            emoji_c_bitcoin: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 18"><g fill="none" fill-rule="evenodd"><ellipse fill="#F6A623" cx="9" cy="9" rx="9" ry="9"/><text fill="#FFF" font-family="Trebuchet MS" font-size="11"><tspan x="6" y="13">B</tspan></text><path fill="#FFF" stroke="#FFF" d="M7.75 4.25h.75v1.5h-.75zm0 8h.75v1.5h-.75zm1.5 0H10v1.5h-.75zm0-8H10v1.5h-.75z"/></g></svg>',
            emoji_c_bull: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 19"><g fill="none" fill-rule="evenodd"><path fill="#3BB3E4" d="M14.816 5.474c3.04.02 4.596-2.46 5.184-5.474-.227.78 0 1.658 0 2.714 0 3.006-1.576 6.872-4.5 6.786l-2.75 6.786 1.375 1.357L12.75 19h-5.5l-1.375-1.357 1.375-1.357L4.5 9.5C1.627 9.66 0 5.75 0 2.714 0 1.658.227.78 0 0c.588 3.013 2.143 5.494 5.184 5.474C6.12 4.638 7.926 4.07 10 4.07s3.88.568 4.816 1.404z"/><path fill="#FFF" d="M7.552 11.008a1.04 1.04 0 0 0 1.458 0c.403-.397-1.055-1.837-1.458-1.44a1.01 1.01 0 0 0 0 1.44zm5.156 0a1.01 1.01 0 0 0 0-1.44c-.402-.397-1.86 1.043-1.458 1.44a1.04 1.04 0 0 0 1.458 0z"/></g></svg>',
            emoji_c_buy: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 15"><g fill="none" fill-rule="evenodd"><path fill="#3BB3E4" d="M9.5 4L13 0H6zM0 15h19V6H0v9z"/><path fill="#FFF" d="M6.172 11.828A.172.172 0 0 1 6 12H5v-1h1c.095 0 .172.077.172.17v.658zM5 9h1c.095 0 .172.077.172.17v.658A.172.172 0 0 1 6 10H5V9zm2 .17C7 8.525 6.647 8 6 8H4v5h2c.647 0 1-.525 1-1.172v-.657c0-.254-.098-.478-.237-.67.14-.193.237-.417.237-.672V9.17zM9 8v4c0 .002 1 0 1 0 .003 0 0-4 0-4H9zm2 0v4c0 .552-.443 1-1 1H9c-.553 0-1-.444-1-1V8h3z"/><path stroke="#FFF" d="M12 8l1.5 3L15 8"/><path stroke="#FFF" stroke-linecap="square" d="M13.5 10.5v2"/></g></svg>',
            emoji_c_disagree: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17"><path fill="#FF4A68" fill-rule="evenodd" d="M15.942 7.918c-.157-.075-.32-.066-.32-.255 0-.295.47-.112.737-.527a1.71 1.71 0 0 0 .205-.89 1.758 1.758 0 0 0-.988-1.5c.272-.324.43-.74.41-1.192a1.768 1.768 0 0 0-1.252-1.603 1.38 1.38 0 0 0 .095-.425C14.876.75 14.273.057 13.477.038 11.892 0 10.8 0 10.197 0 8.32 0 6.876.11 5.89.222c-.432.044-.852.095-1.24.157-.66.106-1.29.364-1.603.945-.105.197-1.044 1.64-1.044 4.387 0 1.303.205 2.382.432 3.17-.9-.508-1.425-1.706-1.425-3.372 0-2.526.827-4.525.827-4.525L1.77.955C1.435.818.974.834.794 1.22.753 1.313 0 2.79 0 5.51c0 1.385.327 2.533.946 3.32.45.57 1.1.947 1.825 1.095.093.205.473.782.665.94.002.002.937.744 2.7 2.214 1.353 1.126 2.525 2.49 2.928 3.097.674 1.017 1.625 1 2.445.446.58-.39.708-1.18.635-1.814-.02-.18-.21-1.393-.98-2.683-.33-.4-1.33-.39-1.822-.434-.11-.01-.202-.055-.202-.164 0-.11.09-.15.204-.15h5.853c.997 0 1.805-.838 1.805-1.81a1.83 1.83 0 0 0-1.058-1.652z"/></svg>',
            emoji_c_dollar: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 18"><g fill="none" fill-rule="evenodd"><ellipse fill="#37BC9B" cx="9" cy="9" rx="9" ry="9"/><text fill="#FFF" font-family="Trebuchet MS" font-size="11"><tspan x="6" y="13">$</tspan></text></g></svg>',
            emoji_c_euro: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 18"><g fill="none" fill-rule="evenodd"><ellipse fill="#FF4A68" cx="9" cy="9" rx="9" ry="9"/><text fill="#FFF" font-family="Trebuchet MS" font-size="11"><tspan x="6" y="13">â‚¬</tspan></text></g></svg>',
            emoji_c_loss: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17"><path fill="#FF4A68" fill-rule="evenodd" d="M9.79 4.435H4.56C2 7.03-1.19 11.105.45 14.08c1.295 2.35 4.22 2.96 7.06 2.918 2.84-.04 5.592-.73 6.537-2.918 1.208-2.798-1.874-6.987-4.255-9.645zm-1.833 9.33v1.018h-.874v-.947c-.597-.03-1.177-.21-1.516-.43l.268-1.164c.374.23.9.438 1.48.438.508 0 .856-.22.856-.618 0-.378-.28-.617-.94-.867-.95-.358-1.6-.857-1.6-1.823 0-.877.56-1.564 1.51-1.773v-.95H8v.87c.6.03 1 .17 1.294.33l-.258 1.13c-.232-.11-.642-.34-1.284-.34-.58 0-.767.28-.767.56 0 .33.312.53 1.07.85 1.06.42 1.49.964 1.49 1.86 0 .887-.563 1.644-1.588 1.843zM11.335.422c-.717-.417-1.6 1.092-2.23 1.068C8.475 1.465 7.977-.024 7.257 0c-.72.025-1.004 1.38-1.582 1.507-.577.127-2.017-1.6-2.594-.993-.46.49.97 2.454 1.53 3.182h5.16c.59-.77 2.16-2.932 1.57-3.275zM14.763 5.1L17 2.55h-4.474z"/></svg>',
            emoji_c_pound: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 18"><g fill="none" fill-rule="evenodd"><ellipse fill="#3BB3E4" cx="9" cy="9" rx="9" ry="9"/><text fill="#FFF" font-family="Trebuchet MS" font-size="11"><tspan x="6" y="13">Â£</tspan></text></g></svg>',
            emoji_c_profit: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17"><path fill="#37BC9B" fill-rule="evenodd" d="M9.574 4.435H4.46C1.954 7.03-1.163 11.105.44 14.08c1.264 2.35 4.126 2.96 6.903 2.918 2.776-.04 5.468-.73 6.392-2.918 1.18-2.798-1.833-6.987-4.16-9.645zm-1.793 9.33v1.018h-.85v-.947c-.58-.03-1.15-.21-1.48-.43l.26-1.164c.37.23.88.438 1.45.438.5 0 .84-.22.84-.618 0-.378-.28-.617-.92-.867-.93-.358-1.57-.857-1.57-1.823 0-.877.54-1.564 1.48-1.773v-.95h.86v.87c.586.03.98.17 1.266.33l-.26 1.13c-.23-.11-.63-.34-1.26-.34-.565 0-.75.28-.75.56 0 .33.307.53 1.048.85 1.038.42 1.456.96 1.456 1.86 0 .88-.55 1.64-1.55 1.84zM11.09.422c-.7-.417-1.565 1.092-2.18 1.068C8.288 1.465 7.8-.024 7.098 0c-.706.025-.984 1.38-1.55 1.507S3.576-.093 3.01.514c-.458.49.942 2.454 1.49 3.182h5.05c.573-.77 2.107-2.932 1.532-3.275zM14.5 3L17 6h-5z"/></svg>',
            emoji_c_rip: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 18"><g fill="none" fill-rule="evenodd"><g fill="#9D9E9E" transform="translate(1)"><circle cx="7.5" cy="7.5" r="7.5"/><path d="M0 8h15v7H0z"/></g><path fill="#D5AD42" d="M1 15h15v3H1z"/><g stroke="#FFB701" stroke-width=".75"><path d="M1.022 18c-.35-4 3.67-3.89 2.873-.326M4.022 18c-.35-4 3.67-3.89 2.873-.326M7.022 18c-.35-4 3.67-3.89 2.873-.326M10.022 18c-.35-4 3.67-3.89 2.873-.326M13.022 18c-.35-4 3.67-3.89 2.873-.326"/></g><path fill="#000" d="M3.04 12V5.558h2.246c.574 0 .985.057 1.23.173.247.117.45.318.607.603.158.286.237.628.237 1.026 0 .503-.12.91-.362 1.217-.242.307-.585.5-1.03.58.228.164.417.343.566.538.15.195.353.544.61 1.048L7.788 12h-1.27l-.774-1.402c-.278-.507-.467-.824-.567-.95a.836.836 0 0 0-.316-.265c-.11-.048-.29-.072-.536-.072h-.22V12H3.04zm1.064-3.718h.79c.484 0 .792-.02.924-.063a.59.59 0 0 0 .32-.26c.083-.127.124-.3.124-.513 0-.205-.04-.37-.123-.494a.627.627 0 0 0-.335-.257c-.1-.032-.388-.05-.866-.05h-.836v1.636zM8.332 12V5.558h1.063V12H8.332zm2.083 0V5.558h1.713c.64 0 1.057.03 1.253.092.314.1.573.312.776.637.204.325.306.744.306 1.257 0 .466-.088.856-.264 1.17-.176.316-.395.537-.66.665-.263.126-.717.19-1.36.19h-.7V12h-1.063zm1.063-5.353v1.83h.59c.394 0 .663-.03.805-.085a.72.72 0 0 0 .35-.3.987.987 0 0 0 .136-.535.983.983 0 0 0-.142-.54.694.694 0 0 0-.347-.295c-.137-.05-.428-.075-.873-.075h-.52z"/></g></svg>',
            emoji_c_sell: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 15"><g fill="none" fill-rule="evenodd"><path fill="#FF4A68" d="M9.5 0L13 4H6zM0 15h19V6H0v9z"/><path fill="#FFF" d="M15 12V8h-1v5h3v-1h-2zM11 8h-1v5h3v-1h-2V8zM6 8v5h3v-1H7v-1h2v-1H7V9h2V8H6zM2 13v-1h1.98l.02-.98-.98-.02C2.458 11 2 10.542 2 9.98v-.96C2 8.46 2.46 8 3.02 8H5v1H3.02L3 9.98l.98.02c.562 0 1.02.458 1.02 1.02v.96C5 12.54 4.542 13 3.98 13H2z"/></g></svg>',
            emoji_c_tip: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 18"><g fill="none" fill-rule="evenodd"><ellipse fill="#FFC84A" cx="9" cy="9" rx="9" ry="9"/><text fill="#FFF" font-family="Trebuchet MS" font-size="11"><tspan x="6" y="13">1</tspan></text></g></svg>',
            emoji_c_yen: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 18"><g fill="none" fill-rule="evenodd"><ellipse fill="#B162D1" cx="9" cy="9" rx="9" ry="9"/><text fill="#FFF" font-family="Trebuchet MS" font-size="11"><tspan x="6" y="13">Â¥</tspan></text></g></svg>'
        })
    }).call(e, i(5))
}, function(t, e, i) {
    (function(t) {
        "use strict";
        var e = function() {
                this.type = "test_call", this.content = ""
            },
            i = {
                wrapValue: function(t) {
                    return "" + t
                },
                sendEvent: function(t, i) {
                    var n = new e;
                    n.type = i || "event", n.content = t, window.external.notify(JSON.stringify(n))
                }
            };
        void 0 !== t && t && t.exports && (t.exports = i)
    }).call(e, i(4)(t))
}, function(t, e, i) {
    "use strict";

    function n() {}

    function o(t, e, i, n) {
        var o, r;
        y[i] || (y[i] = {
            persistent: [],
            truncated: []
        }), o = y[i][n === !0 ? "truncated" : "persistent"], r = {
            timestamp: +t,
            message: e
        }, o.unshift(r), n === !0 && o.length > m && (o.length = m)
    }

    function r(t, e) {
        for (var i = 0; i < t.length; i++) t[i].subsystem = e;
        return t
    }

    function s(t) {
        function e(e, i, n, o) {
            P(t, e, i, n, o)
        }

        function i(t) {
            return function(i, n, o) {
                e(i, t, n, o)
            }
        }
        return e.withinSubsystem = i, e
    }
    var a, l, c, h, d, u, p, f, _, g, m, v, y, w, b, S, T, x, C, P, k;
    a = i(51), l = window, c = "undefined" != typeof TradingView && TradingView || {}, h = "undefined" != typeof TVSettings && TVSettings || {
            getInt: function(t, e) {
                return e
            },
            setValue: function() {}
        }, d = l.console || {}, ["debug", "log", "warn", "error"].forEach(function(t) {
        if (void 0 === d[t]) try {
            d[t] = n
        } catch (e) {}
    }), u = c.LOGLEVEL_ERROR = 1, p = c.LOGLEVEL_WARNING = 2, f = c.LOGLEVEL_NORMAL = 3, _ = c.LOGLEVEL_DEBUG = 4, g = p, m = 300, v = "loglevel", y = {}, w = "general", b = {
        general: "color: #099",
        chart: "color: #606",
        quote: "color: #660"
    }, setInterval(function() {
        S = null, T = null
    }, 1e3), x = c.getLogLevel = function() {
        return h.getInt(v)
    }, C = l.llev = c.setLogLevel = function(t) {
        t = "number" == typeof t ? Math.max(u, Math.min(_, t)) : g, h.setValue(v, t)
    }, l.lon = c.loggingOn = function() {
        C(_), P(f, "Debug logging enabled")
    }, l.lno = c.loggingNormal = function() {
        C(f), P(f, "Logging set to normal level")
    }, l.loff = c.loggingOff = function() {
        C(p), P(f, "Debug logging disabled", null, !0)
    }, c.getLogHistory = function(t, e, i, n) {
        var o = [];
        return Object.keys(y).forEach(function(e) {
            e === w && i === !0 || t && e !== t || n && ~n.indexOf(e) || (o = o.concat(r(y[e].persistent.concat(y[e].truncated), e)))
        }), o.sort(function(t, e) {
            return t.timestamp - e.timestamp
        }), "number" == typeof e && (o = o.slice(-e)), o.map(function(t) {
            return new Date(t.timestamp).toISOString() + ":" + t.subsystem + ":" + t.message
        })
    }, P = c.log = function(t, e, i, n, r) {
        var s, a;
        if ((e !== S || i !== T) && (i = i || w, s = new Date, "\n" !== e && f >= t && o(s, e, i, r), n === !0 || t <= x())) {
            if ("\n" !== e) switch (a = s.toISOString() + ":" + i + ":" + e, t) {
                case _:
                    d.debug(a);
                    break;
                case f:
                    b[i] ? d.log("%c" + a, b[i]) : d.log(a);
                    break;
                case p:
                    d.warn(a);
                    break;
                case u:
                    d.error(a)
            }
            S = e, T = i
        }
    }, c.logError = s(u), c.logWarn = s(p), c.logNormal = s(f), c.logDebug = s(_), c.logNormalChart = s(f).withinSubsystem("chart"), c.logNormalQuote = s(f).withinSubsystem("quote"), c.logDebugChart = s(_).withinSubsystem("chart"), c.logDebugQuote = s(_).withinSubsystem("quote"), k = c.remoteDebug = function() {
        var t = {
            arguments: JSON.stringify(Array.prototype.slice.call(arguments))
        };
        $.ajax("/remote_debug/", {
            data: t
        })
    }, c.remoteDebugTouch = function() {
        Modernizr.touch && k.apply(this, arguments)
    }, a.isProd() && void 0 !== d && (c.remoteDebug = n), c.debugReady && c.debugReady.resolve()
}, function(t, e, i) {
    (function(t, e, n, o, r, s, a, l) {
        "use strict";
        var c = window.TVDialogs = {
            modalDialog: null,
            dialogs: [],
            messageInterval: null,
            messageDelay: 4e3,
            NOTIFICATION_ANIMATION_START_OFFSET: "-33px",
            _constrainDraggableOptionsIfNeeded: function(e) {
                return t.enabled("constraint_dialogs_movement") && (e.containment = ".chart-page"), e
            },
            validateHelpers: {
                isErrorListening: function(t) {
                    t.on("keyup.error-checker", c.validateHelpers.isError(t.val(), t))
                },
                isError: function(t, e) {
                    return function() {
                        e.val() !== t && (e.removeClass("error"), e.off("keyup.error-checker"))
                    }
                },
                makeValidator: function(t, e, i, n, o) {
                    return function(r) {
                        var s, a, l;
                        if (t.removeClass("error"), $("._tv-dialog-field-error").hide(), "" !== r.errors)
                            if ("object" == typeof r.errors) {
                                for (s in r.errors) a = t.filter("input[name^=" + s + "]"), a.addClass("error").data("error", r.errors[s][0]), c.validateHelpers.isErrorListening(a);
                                l = t.filter(".error").first().focus(), c.showError(l.data("error"), o)
                            } else c.showError($.t("Error:") + r.errors, o);
                        else "function" == typeof n && n(r, i);
                        e.removeClass("process")
                    }
                }
            },
            applyMQMatcher: function(t) {
                var e, i;
                t || (t = c.modalDialog), e = function() {
                    c.positionDialog()
                }, window.matchMedia && (i = ["(max-height: 645px)", "(max-width: 460px)"].map(function(t) {
                    var i = matchMedia(t);
                    return i.addListener(e), i
                }), t.on("destroy", function() {
                    i.forEach(function(t) {
                        t.removeListener(e)
                    })
                }))
            },
            showSendMessageDialog: function(t, i) {
                function n() {
                    return l.val().trim()
                }

                function o(e) {
                    var i, n;
                    return h ? (i = t.customValidate(e), i.length && s(i), !i.length) : (n = t.validate(e), n || s(), n)
                }

                function r() {
                    var e = n();
                    o(e) && (t.send(e), c.destroy(f))
                }

                function s(t) {
                    if (t)
                        for (var e = 0; e < t.length; e++) a[t[e]]();
                    else a["default"]()
                }
                var a, l, h = i && i.customTitle,
                    d = i && i.animate,
                    u = {
                        title: t.getTitle(),
                        text: t.getText(),
                        cancelString: $.t("Cancel"),
                        sendString: $.t("Send")
                    },
                    p = '<div class="header">' + (h ? '<div class="custom-title">{{{title}}}</div>' : '<span class="title">{{{title}}}</span>') + '</div><div class="body"><form><div class="message"><textarea rows="10" id="message-text">{{text}}</textarea></div><div class="buttons clearfix"><input class="button-send" type="button" value="{{sendString}}"/><input class="button-cancel" type="button" value="{{cancelString}}"/></div></form></div>',
                    f = "Send Message Dialog",
                    _ = c.createDialog(f, {
                        content: e.render(p, u),
                        addClass: "send-message-dialog",
                        hideTitle: !0
                    });
                d && i.animateFrom && _.css({
                    top: i.animateFrom.top,
                    left: i.animateFrom.left
                }), _.css("position", "fixed"), _.find("._tv-dialog-title ._tv-dialog-title-close").addClass("send-message-close"), a = {
                    "default": function() {
                        l.css("background-color", "#DDAAAA").animate({
                            "background-color": "#fff"
                        }).focus()
                    }
                }, h && (t.applyCustomTitleHandlers(_), a = t.getInvalidInputHandlers(a)), l = _.find("#message-text"), _.find(".button-cancel").on("click", function() {
                    c.destroy(f)
                }), _.find(".button-send").on("click", r), l.on("keydown", function(t) {
                    (t.metaKey || t.ctrlKey) && 13 === t.keyCode && r()
                }), c.applyHandlers(_, {
                    notFocusFirst: !0
                }), d ? c.positionDialog(_, {}, i.animateFrom ? {
                    smooth: !0
                } : {
                    fadeIn: !0
                }) : c.positionDialog(_), i && i.customFocus ? t.customFocus(_) : l.putCursorAtEnd()
            },
            showLineToolsWarning: function(t, e, i) {
                function n() {
                    c.destroy()
                }
                var o, r, s, a;
                e.readOnly() || (o = $.t("Warning"), c.createModalDialog(o, {
                    addClass: "line-tools-warning"
                }), r = c.modalDialog, r.addClass("trading-dialog"), s = r.find("._tv-dialog-content"), $("<div class='message'>").append($.t("This chart layout has more than 1000 drawings, which is a lot! This may negatively affect performance, storage and publishing. We recommend to remove some drawings to avoid potential performance issues.")).appendTo(s), a = $("<div>").addClass("buttons").appendTo(s), $("<button class='select button flat'>").append($.t("Open Manage Drawings")).appendTo(a).click(function() {
                    $(this).addClass("process"), new TradingView.ObjectTreeDialog({
                        chartWidget: e,
                        activeTab: 1
                    }, i).show(function() {
                        n()
                    })
                }), $("<button class='button flat not-now'>").append($.t("Not Now")).appendTo(a).click(function() {
                    n()
                }), c.applyHandlers(r), c.positionDialog())
            },
            showBrowserExtensionDialog: function(t) {
                var n, o;
                if (t) return n = {
                    chrome: {
                        logo: "/static/images/svg/google-chrome-logo.svg",
                        name: "Google Chrome",
                        href: "https://chrome.google.com/webstore/detail/tradingview-free-quotes-a/ommjfbdmijjlbhlhnnnfkmbnkpnjpipj"
                    }
                }, o = i(18), c.createModalDialog("Browser Extension", {
                    noHeader: !0,
                    width: "730px",
                    content: e.render(o.dialogs.browserExtension, {
                        browser: n[t]
                    })
                }), c.modalDialog.find(".install-extension, ._tv-dialog-title-close").click(function(t) {
                    c.destroy()
                }), c.positionDialog(), c.modalDialog
            },
            showIntervalMismatchDialog: function(t) {
                var e, i, n, o, r, s, a = !1;
                a = a || !1, c.createModalDialog($.t("Interval is not applicable"), {
                    addClass: "tv-interval-is-not-applicable-dialog"
                }), e = c.modalDialog, e.css({
                    zIndex: 1e3
                }), e.find("._tv-dialog").css("width", "400px"), i = c.modalDialog.find("._tv-dialog-content"), i.html('<div class="main"><div class="caption-big">' + $.t("<p>Only <b>D, W, M</b> intervals are supported for this symbol/exchange. You will be automatically switched to a D interval. Intraday intervals are not available because of exchange policies.</p>") + '</div><div class="main-properties"></div></div>'), n = i.find(".main-properties"), o = $('<div class="dialog-buttons"></div>').appendTo(n), t && (r = $('<label class="dialog-trail-checkbox"><input type="checkbox" /> ' + $.t("Do not show this message again") + "</label>").appendTo(o), s = r.find("input"), s.attr("checked", t.silentIntervalChange.value()), s.bind("click", function() {
                    t.silentIntervalChange.setValue(this.checked)
                })), $('<a class="_tv-button ok">OK</a>').appendTo(o).bind("click", function() {
                    c.destroy()
                }), c.positionDialog(), c.applyHandlers(!1, {
                    doNotCloseOnBgClickIfShadowbox: a
                })
            },
            showSignInDialog: function(n, o) {
                function r(t) {
                    var e;
                    switch (t) {
                        case "signup":
                        case "signup-trial":
                            e = w.indexOfPage(m);
                            break;
                        case "recover":
                            e = w.indexOfPage(v);
                            break;
                        default:
                            t = "signin", e = w.indexOfPage(g)
                    }
                    d.find('[name="signup_trial"]').val("signup-trial" === t ? 1 : 0), d.find(".show-if-signin, .show-if-signup, .show-if-recover").not(".show-if-" + t).hide(), d.find(".show-if-" + t).show(), w.setActivePage(e)
                }
                var s, a, l, h, d, u, p, f, _, g, m, v, y, w, b, S;
                if (!is_authenticated) {
                    if (t.enabled("widget") && t.enabled("referral_program_for_widget_owners")) return void c.showGoToTradingViewReferralDialog(o);
                    if (o = $.extend({}, o), "function" == typeof n ? c.onSigninSuccess = n : delete c.onSigninSuccess, o.source && (TradingView.signupSource = o.source), o.sourceMeta && (s = {}, Array.isArray(o.sourceMeta) ? s.additionalCategories = o.sourceMeta : "string" == typeof o.sourceMeta && (s.additionalCategories = [o.sourceMeta]), TradingView.signupSourceParameters = s), a = TradingView.getUrlParams().utmsource, l = TradingView.getUrlParams().utmmedium, window.utmSourceOverride && (a = window.utmSourceOverride), h = c.createModalDialog("Log in", {
                            noHeader: !0,
                            addClass: "auth-dialog"
                        }), o.onDestroy && c.modalDialog.on("destroy", o.onDestroy), d = c.modalDialog.find("._tv-dialog-content"), t.enabled("whotrades_auth_only")) return u = Math.min($(window).width() - 20, 430), p = Math.min($(window).height() - 20, 450), $('<iframe src="/accounts/signin/whotrades/" frameborder="0" allowTransparency="true" scrolling="no"/>').width(u).height(p).appendTo(d), c.positionDialog(), void c.applyHandlers(null);
                    f = $('<div class="properties-tabs show-if-signin show-if-signup show-if-signup-trial"></div>').prependTo(d), $('<a href="#" class="properties-tabs-label"></a>').text($.t("Sign In")).appendTo(f), $('<a href="#" class="properties-tabs-label"></a>').text($.t("Sign Up")).appendTo(f), $('<a href="#" class="properties-tabs-label"></a>').appendTo(f), _ = $(document.createElement("div")).appendTo(d), g = $(document.createElement("div")).addClass("page").appendTo(_), m = $(document.createElement("div")).addClass("page").appendTo(_), v = $(document.createElement("div")).addClass("page recover").appendTo(_), y = i(341), w = new y(f, _), b = i(18), g.html(b.dialogs.signin), S = {}, a && a.search("dailyfx") > -1 ? S.dailyfx = !0 : S.defsigup = !0, localStorage._referralSessionId && "undefined" !== localStorage._referralSessionId && (S.referralSessionId = localStorage._referralSessionId), m.html(e.render(b.dialogs.auth, S)), v.html(b.dialogs.recover), r(o.mode), w.tabChanged.subscribe(null, function(t) {
                        w.pageAt(t).find('input:eq(0)[type!="hidden"]').focus(), c.positionDialog()
                    }), d.find(".recover-link").on("click", function(t) {
                        r("recover"), t.preventDefault()
                    }), d.find(".signup-link").on("click", function(t) {
                        r("signup"), t.preventDefault()
                    }), d.find(".signin-link").on("click", function(t) {
                        r("signin"), t.preventDefault()
                    }), 0 === TradingView.BrowserInfo.prototype.browser().indexOf("Internet Explorer") && d.find("input[type=text], input[type=password]").wrap('<label class="auth-dialog-field">').each(function() {
                        function t() {
                            i.toggleClass("empty", !i.val()), e = !1
                        }
                        var e, i = $(this),
                            n = $('<span class="auth-dialog-field-placeholder">').text(i.attr("placeholder")).insertAfter(i);
                        i.removeAttr("placeholder"), e = !1, t(), i.on("blur", function() {
                            n.toggleClass("disabled", !!this.value)
                        }), i.on("keypress keydown keyup input paste", function() {
                            e || (e = !0, setTimeout(function(e) {
                                t()
                            }, 0))
                        })
                    }), ["stocktwits", "google-oauth2", "facebook", "twitter", "linkedin", "yahoo"].forEach(function(t) {
                        var e, i = "/accounts/signin/" + t + "/";
                        a && (e = TradingView.createUrlParams({
                            utm_source: a,
                            utm_medium: l
                        }), i += "?" + e), d.find(".auth-dialog-social-" + t).on("click", function(t) {
                            "signup-trial" === o.mode && $.cookie("will_start_trial", 1, {
                                path: "/"
                            }), t.preventDefault(), window.open(i, "_blank")
                        })
                    }), d.find("#signin-form").on("submit", function(t) {
                        var e, i = this;
                        t.preventDefault(), e = $(i).find('[type="submit"]').addClass("process"), c.submit(function(t) {
                            "" !== t.error ? c.showError("Error: " + t.error) : (user = t.user, c.destroy(), TradingView.changeLoginState(!0), "function" == typeof c.onSigninSuccess && (c.onSigninSuccess(), delete c.onSigninSuccess), window.next && (location.href = window.next), TradingView.isFeatureEnabled("hard-registration") && o.source && "AB" === o.source.split(" ")[0] && TradingView.trackEvent("AB Hard Registration Popup", "SignIn From " + o.from + " Message")), e.removeClass("process")
                        }, i)
                    }), d.find("#signup-form").on("submit", function(t) {
                        var e, i, n, r;
                        t.preventDefault(), e = this, i = $(e), n = i.find("input"), r = i.find('[type="submit"]').addClass("process"), i.appendUtm(a, l), c.submit(c.validateHelpers.makeValidator(n, r, o, function(t, e) {
                            e.onDestroy && c.modalDialog.off("destroy", e.onDestroy), TradingView.trackRegistrationEvent("Email"), c.showNotice($.t("Activate Your Account"), t.message, {
                                onClose: e.onDestroy
                            })
                        }, h), e)
                    }), d.find("#recover-form").on("submit", function(t) {
                        var e, i = this;
                        t.preventDefault(), e = c.modalDialog, c.submit(function(t) {
                            "" !== t.error ? c.showError($.t("Failed:") + " " + t.error) : (c.showMessage($.t("New password is sent to your email.")), setTimeout(function() {
                                c.modalDialog === e && c.destroy()
                            }, c.messageDelay))
                        }, i)
                    }), c.applyMQMatcher(h), c.positionDialog(), c.applyHandlers(null, {
                        doNotCloseOnBgClick: o.doNotCloseOnBgClick ? o.doNotCloseOnBgClick : void 0,
                        doNotCloseOnEsc: o.doNotCloseOnEsc ? o.doNotCloseOnEsc : void 0
                    })
                }
            },
            showAfterSocialSign: function(t) {
                var n, o, r, s, a = TradingView.getUrlParams().utmsource,
                    l = TradingView.getUrlParams().utmmedium;
                return window.utmSourceOverride && (a = window.utmSourceOverride), n = c.createModalDialog($.t("TradingView Sign Up"), {
                    noClose: !0,
                    addClass: "auth-dialog auth-dialog-after-social"
                }), t.onDestroy && c.modalDialog.on("destroy", t.onDestroy), o = c.modalDialog.find("._tv-dialog-content"), r = {
                    email: t.user.email ? t.user.email : void 0,
                    username: t.user.username,
                    buttonCaption: t.buttonCaption || $.t("Sign Up")
                }, localStorage._referralSessionId && "undefined" !== localStorage._referralSessionId && (r.referralSessionId = localStorage._referralSessionId), a && a.search("dailyfx") > -1 && (r.dailyfx = !0, r.firstname = window.user.first_name, r.lastname = window.user.last_name), s = i(18), o.html(e.render(s.dialogs.afterSocialSign, r)), o.find("#save-form").on("submit", function(e) {
                    var i, o, r, s;
                    e.preventDefault(), i = this, o = $(i), r = o.find("input"), s = o.find('[type="submit"]').addClass("process"), o.appendUtm(a, l), c.submit(c.validateHelpers.makeValidator(r, s, t, function(t, e) {
                        window.user.email = t.email, a && a.search("dailyfx") > -1 && (window.user.first_name = t.first_name, window.user.last_name = t.last_name), t.username_updated && (window.user.username = t.username, window.onLoginStateChange()), c.destroy(), e.afterLoginFunction && "function" == typeof e.afterLoginFunction && e.afterLoginFunction()
                    }, n), i)
                }), c.applyMQMatcher(n), c.positionDialog(), c.applyHandlers(!1, {
                    doNotCloseOnBgClick: !0,
                    doNotCloseOnEsc: !0
                }), n
            },
            goRegistrate: function(t) {
                var e, i, n, o, r;
                window.is_authenticated || (e = c.createModalDialog($.t("Please Sign Up To Continue"), {
                    noClose: !0,
                    addClass: "auth-dialog _tv-dialog--hard-registration"
                }), i = c.modalDialog.find("._tv-dialog-content"), n = {
                    chart: "<p>" + $.t("To continue working with TradingView charts please create a free account or sign in. It only takes two clicks and itâ€™s free!") + "</p><p>" + $.t("Free accounts are packed with features:") + "</p><ul><li>" + $.t("Best HTML5 charts on the web") + "</li><li>" + $.t("Save your work and get it anywhere") + "</li><li>" + $.t("Enjoy chatting in real-time and publishing ideas") + "</li></ul>",
                    ideas: "<p>" + $.t("To continue reading ideas please create a free account or sign in. Only takes two clicks and itâ€™s free!") + "</p><p>" + $.t("Free accounts are packed with features:") + "</p><ul><li>" + $.t("Follow authors and get followed back") + "</li><li>" + $.t("Comment ideas and share them on") + "</li><li>" + $.t("Discuss markets in real-time with other members") + "</li></ul>"
                }, i.html('<form class="main" id="go-registrate-form" action="">' + n[t.from] + '<button type="submit">' + $.t("Get Started") + "</button></form>"), o = i.find("form"), r = o.find('[type="submit"]'), r.on("click", function(e) {
                    e.preventDefault(), r.addClass("process"), c.destroy(), c.showSignInDialog(null, {
                        mode: "signup",
                        source: "AB Hard Registration Popup From " + t.from + " Message",
                        from: t.from,
                        doNotCloseOnBgClick: !0,
                        doNotCloseOnEsc: !0
                    })
                }), TradingView.trackEvent("AB Hard Registration Popup", "Show " + t.from + " Message"), c.applyMQMatcher(e), c.positionDialog(), c.applyHandlers(!1, {
                    doNotCloseOnBgClick: !0,
                    doNotCloseOnEsc: !0
                }))
            },
            showPublishIntroDialog: function(t) {
                var n, o, r, s, a, l, h = $.Deferred(),
                    d = TVSettings.getBool("publish.showIntroText", !0);
                return t || d ? (n = "publish_intro", o = c.createDialog(n, {
                    addClass: "idea-publish-intro ",
                    hideTitle: !0
                }), r = !1, s = i(18), o.css({
                    "z-index": 130,
                    "min-width": "650px"
                }), o.find("._tv-dialog-content").html(e.render(s.dialogs.publishIntro, {
                    do_not_show: !d
                })), a = o.find(".left-annotation svg"), l = o.find(".main").height() - 7, a.width(a.width() * l / a.height()), a.height(l), c.positionDialog(o), o.draggable(c._constrainDraggableOptionsIfNeeded({
                    handle: ".fake-handle"
                })), o.find('input[name="donotshow"]').on("change", function(t) {
                    TVSettings.setValue("publish.showIntroText", !$(this).is(":checked"))
                }), $("#publish-intro-continue").click(function() {
                    c.destroy(n), h.resolve()
                }), o.on("destroy", function() {
                    r = !0, setTimeout(h.resolve, 0)
                }), h.always(function() {
                    r || c.destroy(n)
                }), c.positionDialog(o), c.applyHandlers(o)) : h.resolve(), h
            },
            showGoProDialog: function(n) {
                var o, r, s, a, l, h = i(342),
                    d = i(18);
                return n || (n = {}), t.enabled("referral_program_for_widget_owners") ? void c.showGoToTradingViewReferralDialog(n) : (c.createModalDialog("", {
                    noHeader: !0,
                    addClass: "gopro-dialog ",
                    appearance: "flat"
                }), o = c.modalDialog, o.css({
                    zIndex: 1e3
                }), r = o.find("._tv-dialog-content"), s = !is_authenticated || h && h.trialAvailable && h.trialAvailable(), r.html(e.render(d.dialogs.goPro.layout, {
                    trialButton: s,
                    exchangesButton: n.exchangesButton,
                    exchange: n.exchange
                })), a = r.find(".col-main .col-copy"), n.feature ? (TradingView.tryTrackGoProFeature(n.feature, n.featureLocation), l = e.render(d.dialogs.goPro.features[n.feature], {
                    exchangesButton: n.exchangesButton,
                    exchange: n.exchange,
                    options: n.featureOptions || {}
                })) : l = d.dialogs.goPro.defaultCopy, TradingView.onChartPage && window.saver && window.saver.saveChartSilently && window.saver.saveChartSilently(null, !1), a.html(l), r.find(".yes-button").on("click", function(t) {
                    this.href === location.href && t.preventDefault(), TradingView.trackGoProPageTransition(n.feature, n.featureLocation), c.destroy(), s && (c.showTrialStartDialog(), t.preventDefault())
                }), r.find(".no-button").on("click", function(t) {
                    t.preventDefault(), c.destroy()
                }), c.positionDialog(), void c.applyHandlers(null))
            },
            showTrialStartDialog: function(t) {
                var e, r, s, a = {
                    onCancel: void 0,
                    noText: void 0
                };
                t = t || {}, e = "<p>" + $.t("Try extra features from upgraded plans, including access to real-time markets from premium data packages. Special offers may pop up from time to time during the free trial, only on the site. So keep your eyes open and have fun!") + "</p>", user.is_credit_card_verified && TradingView.isFeatureEnabled("need_credit_card_for_trial") && (r = pro.getProduct("pro_realtime") || {}, s = n().add(30, "days").format("LL"), e += "<p>" + $.t("You will not be charged for now, starting on {0} you will be billed ${1} per month.").format(s, r.cost) + "</p>"), e += "<p>" + $.t("After the trial you won't be charged for any premium data packages unless you subscribe to them separately.") + "</p>", o.extend(a, t), c.showTrialConfirmationDialog({
                    title: $.t("START YOUR FREE TRIAL"),
                    text: e,
                    onSubmit: function(t) {
                        $(t.target).addClass("process");
                        var e = i(342);
                        e.startTrial()
                    },
                    onCancel: a.onCancel,
                    noText: a.noText
                })
            },
            showGoToTradingViewReferralDialog: function(t) {
                var e, n, o, r, s, a = "";
                t.feature && (e = i(18), a = e.widgetReferrals.features[t.feature]), n = i(345), o = [a ? a + "<br/><br/>" : "", $.t('You can use this and many other features with the full version of <a href="{0}" target="_blank">TradingView</a>.').format(n.referenceToTradingView())].join("\n"), r = function() {
                    window.open(n.referenceToTradingView(), "_blank")
                }, s = {
                    customButtonCaption: $.t("Letâ€™s go!"),
                    onOkButtonClick: r,
                    html: o,
                    classSuffix: "caption-large-font"
                }, c.showNotice($.t("This feature is available only on TradingView"), "", s)
            },
            showAddSymbolDialog: function(t, n) {
                function o(t) {
                    var e, i = s.find("#_tv-dialog-addsymbol-overlay-checkbox").is(":checked");
                    t && (e = n.callback, e(t, i), $(window).off("keyup.addOverlay"), c.destroy(s.data("title")))
                }
                var r, s, a, l, h, d;
                n = $.extend({}, {
                    title: $.t("Add Symbol"),
                    callback: function(t, e) {},
                    overlayOption: !1,
                    overlayOptionChecked: TVSettings.getBool("showAddSymbolDialog.checkboxState", !0),
                    okButtonTitle: $.t("Add Symbol")
                }, n || {}), r = i(18), s = c.createDialog(n.title), s.css("min-width", 0), s.find("._tv-dialog-content").html(e.render(r.dialogs.addSymbol, n)).css("min-width", 0), c.applyHandlers(s), a = $('<div class="symbol-edit-widget"></div>'), l = $('<input type="text" class="symbol-edit single" placeholder="' + $.t("Symbol") + '" maxlength="30" style="text-transform: none; font-weight: normal;" autocomplete="off">').appendTo(a), h = i(2), d = h.bindToInput(l, {
                    callback: function(t) {
                        o(t)
                    }
                }), s.find("div.symbol-edit-place").replaceWith(a), s.find("._tv-dialog").draggable(c._constrainDraggableOptionsIfNeeded({
                    handle: "._tv-dialog-title"
                })), s.find("input[type=checkbox]").on("change", function(t) {
                    TVSettings.setJSON("showAddSymbolDialog.checkboxState", t.target.checked)
                }), s.find(".ok").on("click", function() {
                    d.acceptTypeIn()
                }), s.show(), c.positionDialog(s), l.focus()
            },
            makeDraggable: function(t) {
                t.draggable({
                    handle: "._tv-dialog-title"
                })
            },
            showConfirmInputsDialog: function(t, e, i) {
                function n(t) {
                    var e = i.callback,
                        n = t.state();
                    e(n), c.destroy(o.data("title"))
                }
                var o, s, a, l, h, d, u, p, f, _;
                for (i = $.extend({}, {
                    title: $.t("Confirm Inputs"),
                    callback: function(t) {},
                    okButtonTitle: $.t("Apply")
                }, i || {}), o = c.createDialog(i.title, {
                    content: "<div class='main'></div>"
                }), o.css("min-width", 0), c.applyHandlers(o, {
                    beforeDestroy: function() {
                        $(window).unbind("keyup.hideInputsConfirmDialog")
                    }
                }), s = TradingView.merge({}, e.defaults.inputs), a = 0; a < e.inputs.length; ++a) l = e.inputs[a], l.confirm || delete s[l.id];
                h = new r({
                    inputs: s
                }), d = {
                    metaInfo: function() {
                        return e
                    }
                }, u = new TradingView.StudyInputsPropertyPage(h, t.model(), d, !0), p = u.widget(), f = o.find(".main"), f.append(p), $(window).bind("keyup.hideInputsConfirmDialog", function(t) {
                    13 === t.keyCode && "textarea" !== t.target.tagName.toLowerCase() && (n(h), $(window).unbind("keyup.hideInputsConfirmDialog"))
                }), $("select", f).each(function() {
                    var t = $(this),
                        e = "tv-select-container dialog";
                    t.hasClass("tv-select-container-fontsize") && (e += " tv-select-container-fontsize"), t.selectbox({
                        speed: 100,
                        classHolder: e
                    })
                }), $('input[type="text"]', f).addClass("tv-text-input inset dialog"), $("input.ticker", f).TVTicker(), _ = "<div class='_tv-dialogs-bottom-button'><span class='_tv-button tv-right tv-uppercase ok'>Apply</span></div>", o.find(".main").append(_),
                    o.find(".ok").on("click", function() {
                        n(h)
                    }), o.show(), c.positionDialog(o), f.find("input,select").first().focus()
            },
            showUpdateAccountDataDialog: function(t) {
                var i = e.render('<form>{{#html}}<p>{{&html}}</p>{{/html}}<input type="text" value="{{value}}"></form>', {
                        value: t.value || "",
                        html: t.html
                    }),
                    n = c.showCustomDialog({
                        title: t.title,
                        html: i,
                        action: function(e) {
                            var i = e.find("._tv-button.ok");
                            return i.addClass("process"), TradingView.changeUserProfileField({
                                name: t.paramName,
                                value: e.find("input[type=text]").val(),
                                onSuccess: t.success,
                                onError: function(i) {
                                    var n = (i || []).join(" ");
                                    "function" == typeof t.error ? t.error(n) : c.showError(n || $.t("Unexpected error: can't change profile data"), e)
                                },
                                onComplete: function() {
                                    i.removeClass("process")
                                }
                            }), {
                                notClose: !0
                            }
                        },
                        onCancel: t.cancel
                    });
                return n
            },
            showProRTTrialOffer: function(t) {
                var n, o, r = i(18);
                c.createModalDialog("", {
                    noHeader: !0,
                    addClass: "prorttrial-dialog ",
                    appearance: "flat"
                }), n = c.modalDialog, n.css({
                    zIndex: 1e3
                }).find("._tv-dialog"), o = n.find("._tv-dialog-content"), o.html(e.render(r.dialogs.proRTTrialOffer)), o.find("a.trial").on("click", function(e) {
                    e.preventDefault(), t && t.callbacks && t.callbacks.onAccept && t.callbacks.onAccept()
                }), o.find("a.nothanks").on("click", function(e) {
                    e.preventDefault(), t && t.callbacks && t.callbacks.onDecline && t.callbacks.onDecline()
                }), o.find("a.ordernow").on("click", function(e) {
                    e.preventDefault(), t && t.callbacks && t.callbacks.onOrder && t.callbacks.onOrder()
                }), o.find("a.later").on("click", function(e) {
                    e.preventDefault(), t && t.callbacks && t.callbacks.onRemindLater && t.callbacks.onRemindLater()
                }), c.positionDialog(), c.applyHandlers(null, {
                    doNotCloseOnBgClickIfShadowbox: !0,
                    doNotCloseOnEsc: !0
                })
            },
            showUpgradeForYearDialog: function(t, n) {
                var o, r, s, a, l = i(18),
                    h = l.dialogs["upgradeForYearOffer" + (n || 1)];
                h && (c.createModalDialog("", {
                    noHeader: !0,
                    addClass: "prorttrial-dialog ",
                    appearance: "flat"
                }), o = c.modalDialog, o.css({
                    zIndex: 1e3
                }), r = o.find("._tv-dialog-content"), r.html(e.render(h, t)), s = r.find(".js-no-btn"), s.on("click", function(e) {
                    return e.preventDefault(), TradingView.trackEvent("UpgradedFromMtoY", "upgrade from months to year dialog " + n, "disagreed"), "function" == typeof t.onCancel && t.onCancel(e) === !1 ? !1 : void c.destroy()
                }), a = r.find(".js-yes-btn"), a.on("click", function(e) {
                    return e.preventDefault(), TradingView.trackEvent("UpgradedFromMtoY", "upgrade from months to year dialog " + n, "agreed"), "function" == typeof t.onSubmit && t.onSubmit(e) === !1 ? !1 : (TradingView.visitPaymentPage(user.pro_plan + "_year_6_months_free", null, {
                        fixedCycle: !0,
                        upgradeFromM: !0
                    }), void c.destroy())
                }), c.positionDialog(), c.applyHandlers(null, {
                    doNotCloseOnBgClick: 1
                }), TradingView.trackEvent("UpgradedFromMtoY", "upgrade from months to year dialog " + n, "shown"))
            },
            showTrialMessage: function(t) {
                var e, i, n, o, r, s;
                c.createModalDialog("", {
                    noHeader: !0,
                    addClass: "prorttrial-dialog ",
                    appearance: "flat"
                }), e = c.modalDialog, e.css({
                    zIndex: 1e3
                }).find("._tv-dialog"), i = e.find("._tv-dialog-content"), i.html('<div class="main"><h3 class="title"></h3><div class="copy"></div><div class="big-buttons"><a href="javascript://" class="big-button ok">' + $.t("OK") + "</a></div></div>"), n = i.find(".title"), o = i.find(".copy"), r = i.find(".big-button.ok"), s = i.find(".big-buttons"), t && t.title ? n.html(t.title) : n.remove(), t && t.copy ? o.html(t.copy) : o.remove(), t && t.closeButtonCopy && r.html(t.closeButtonCopy), t && t.replaseCloseBtn && s.html(t.replaseCloseBtn), i.find("a.ok").on("click", function(e) {
                    t && t.replaseCloseBtnFunc ? t.replaseCloseBtnFunc(e) : (e.preventDefault(), c.destroy())
                }), c.positionDialog(), c.applyHandlers(null)
            },
            showTrialMessageSuccess: function(t) {
                var e = i(344),
                    n = '<div style="padding-top: 20px; line-height: 28px"><div style="display: inline-block">' + s.code("gift") + '</div><div style="display: inline-block; padding: 10px 0 0 30px; width: 420px; vertical-align: top"><h1>' + $.t("Woohoo! Let the fun begin") + "</h1></div></div><p>" + $.t('Your 30 day free trial is live! Youâ€™ve got free access to extra features and real-time data from premium exchanges. <a href="mailto:support@tradingview.com">Drop us a note</a> if you have any questions. Donâ€™t forget to keep your eyes peeled for special offers during the trial!') + "</p>";
                e.isFeatureEnabled("need_credit_card_for_trial") && (n += "<p>" + $.t("Remember, if you donâ€™t cancel your trial before it ends, youâ€™ll automatically continue on a paid monthly upgraded plan after the trial.") + "</p>"), c.showTrialMessage({
                    copy: n,
                    replaseCloseBtn: "<a href='/chart/' style='display: inline-block; float: none; width: auto;' class='big-button ok'>" + $.t("Get Started!") + "</a>",
                    replaseCloseBtnFunc: function(e) {
                        t && (c.destroy(), e.preventDefault())
                    }
                }), c.modalDialog.find(".big-buttons").css({
                    "text-align": "center"
                })
            },
            showTrialConfirmationDialog: function(t) {
                var e, i, n, o;
                t = t || {}, c.createModalDialog("", {
                    noHeader: !0,
                    addClass: "trialconfirm-dialog ",
                    appearance: "flat"
                }), e = c.modalDialog, e.css({
                    zIndex: 1e3
                }), i = e.find("._tv-dialog-content"), i.html('<div class="main"><h3 class="title">' + (t.title || $.t("Trial confirmation dialog")) + '</h3><div class="copy">' + (t.text || $.t("Trial confirmation text")) + '</div><div class="actions-block"><a class="no-button">' + (t.noText || $.t("No, thank you")) + '</a><a class="yes-button">' + $.t("30 Days Free Trial") + "</a></div></div>"), n = i.find(".no-button"), o = i.find(".yes-button"), n.on("click", function(e) {
                    return e.preventDefault(), "function" == typeof t.onCancel ? t.onCancel(e) : void c.destroy()
                }), o.on("click", function(e) {
                    return "function" == typeof t.onSubmit ? t.onSubmit(e) : void e.preventDefault()
                }), c.positionDialog(), c.applyHandlers(null)
            },
            showEarlyAccessDialog: function(t) {
                var n, o, r, s = {};
                switch (t && t.reason || "") {
                    case "after 1 week":
                        s.is_1wk = !0;
                        break;
                    case "after 2 weeks":
                        s.is_2wk = !0;
                        break;
                    case "after 3 weeks":
                        s.is_3wk = !0;
                        break;
                    case "finished":
                        s.is_finished = !0;
                        break;
                    default:
                        return
                }
                c.createModalDialog("", {
                    noHeader: !0,
                    addClass: "prorttrial-dialog ",
                    appearance: "flat"
                }), n = c.modalDialog, n.css({
                    zIndex: 1e3
                }).find("._tv-dialog"), o = n.find("._tv-dialog-content"), r = i(18), o.html(e.render(r.dialogs.earlyAccess, s)), s = null, o.find("a.nothanks").on("click", function(e) {
                    e.preventDefault(), t && t.callbacks && t.callbacks.onDecline && t.callbacks.onDecline()
                }), o.find("a.ordernow").on("click", function(e) {
                    e.preventDefault(), t && t.callbacks && t.callbacks.onOrder && t.callbacks.onOrder()
                }), c.positionDialog(), c.applyHandlers(null, {
                    doNotCloseOnBgClickIfShadowbox: !0,
                    doNotCloseOnEsc: !0
                })
            },
            showLeavingConfirmation: function(t, i) {
                var n = e.render('<div style="padding: 20px 20px 0"><div class="clearfix" style="padding-bottom: 10px"><div style="float: left; padding-right: 20px; height: 82px; width: 128px">' + s.code("logo-sad") + '</div><div style="float: left; width: 200px"><h1 style="margin-top: 0">' + $.t("Oh, no! Maybe stay some more?") + "</h1></div></div>{{#price}}<p><strong>" + $.t("Pro Plus is just {0} per day for you, which is less than a cup of coffee!").format(t ? "$" + t.toFixed(2) : "") + "</strong></p>{{/price}}<p>" + $.t("It has top-notch tools to help you beat the markets:") + "</p><ul><li>" + $.t('<a href="https://www.tradingview.com/stock-charts-support/index.php/Category:Chart_Types" target="_blank">Japanese charts</a> to identify profitable trends') + "</li><li>" + $.t('Unlimited 24/7 <a href="https://www.tradingview.com/stock-charts-support/index.php/Alerts" target="_blank">server-side alerts</a> on market conditions') + "</li><li>" + $.t("Data before markets open and after they close") + "</li></ul><p>" + $.t('If you had issues, please <a href="https://getsatisfaction.com/tradingview/ideas/popular" target="_blank" rel="nofollow">tell us</a> and we\'ll make it right!') + "</p><p>" + $.t("We love you, hope it's mutual!") + "</p></div>", {
                        price: t
                    }),
                    o = $.t("Yes, I'll stay!"),
                    r = $.t("No, not now");
                c.showConfirm("leaving-confirmation", n, function() {}, i, {
                    noHeader: !0,
                    manualCloseOnCancel: !0,
                    customWidth: "450px",
                    okButtonText: o,
                    cancelButtonText: r
                }), c.modalDialog.find(".main").css({
                    "padding-bottom": "0"
                }), c.modalDialog.find("._tv-dialogs-bottom").css({
                    "padding-bottom": "25px"
                })
            },
            showUnsubscribeConfirmationDialog: function(t, e, i, n) {
                var o, r, s, a;
                return n = n || {}, n.showLeavingConfirmation ? void c.showLeavingConfirmation(n.dailyPrice, function() {
                    c.showUnsubscribeConfirmationDialog(t, e, i, {
                        showFirstP: n.showFirstP
                    })
                }) : (o = (n.showFirstP ? "<p>" + $.t("If you cancel, you will no longer be billed after your current subscription period ends. Your subscription service will continue to be active until the end of the period that you paid for.") + "</p>" : "") + "<p>" + $.t("We'd really like to know the reason why you are cancelling so we can make things better. Please add your feedback to the field below.") + '</p><textarea style="width: 398px; height: 100px;"></textarea>', r = $.t("Cancel __text__ and send feedback", {
                    text: e
                }), s = $.t("Do not cancel"), a = function() {
                    var t = c.modalDialog.find("textarea").val();
                    return t ? (i(t), void c.destroy()) : void c.showError($.t("Please enter your feedback"))
                }, void c.showConfirm(t, o, a, function() {}, {
                    customWidth: "450px",
                    okButtonText: r,
                    cancelButtonText: s,
                    manualClose: !0
                }))
            },
            showChangeUserStatusDialog: function() {
                var t, e, i, n = $.t("Update status"),
                    o = c.createDialog(n);
                o.find("._tv-dialog-content").html('<form><div class="main"><input type="text" maxlength="254" name="status" value="' + ("string" == typeof window.user.status ? window.user.status.replace(/"/g, "&quot;") : "") + '"></div><div class="_tv-dialogs-bottom _tv-dialog-center"><input class="_tv-button wide ok" type="submit" value="' + $.t("OK") + '" style="margin-right: 10px;"/><input class="_tv-button wide cancel" type="button" value="' + $.t("Cancel") + '"/></div></form>').css("width", "400px"), t = o.find(".ok"), e = o.find('[name="status"]'), i = $.t("Add status") + "...", o.find("form").submit(function() {
                    var o, r, s;
                    return t.addClass("process"), o = function(t) {
                        var e = $("#change-profile-status"),
                            o = t ? t : i;
                        e.hasClass("tv-editable-active") ? e.find('input[type="text"], textarea').val(o) : e.text(o), $('[name="status"]').val(t), c.destroy(n)
                    }, r = function(t) {
                        t ? c.showError(TradingView.strip_tags(t)) : c.showError($.t("We'are sorry, something went wrong. Try to reload page."))
                    }, s = function() {
                        t.removeClass("process")
                    }, TradingView.changeUserProfileField({
                        name: "status",
                        value: (e.val() + "").replace(/^\s+|\s+$/g, ""),
                        onSuccess: o,
                        onError: r,
                        onComplete: s
                    }), !1
                }), o.find(".cancel").click(function() {
                    c.destroy(n)
                }), Modernizr.touch && e.val(""), c.positionDialog(o, {
                    considerScroll: !0
                }), c.applyHandlers(o), e.focus().select()
            },
            showScriptSearchDialog: function(t) {
                function n() {
                    var t, e, n, a = u.val();
                    a !== r && (r = a, p.toggle(!!a), s && (s.abort && s.abort(), s = null), t = i(346), f.html('<div class="loading"></div>'), e = t.suggest(r), s = e, n = t.list(), n.done(function(t) {
                        e.done(function(i) {
                            e === s && o(i, t)
                        })
                    }))
                }

                function o(t, i) {
                    f.empty(), t && (t.length || $('<p class="nothing">' + $.t("No scripts matched your criteria") + "</p>").appendTo(f), t.forEach(function(t) {
                        var n, o, r, s, c, h;
                        t && (n = $('<div class="item">'), t.author && (o = $('<div class="item-avatar">').appendTo(n), $("<img>").attr({
                            src: "/avatar/" + t.author.id + "/",
                            "class": "avatar userlink",
                            alt: t.author.username,
                            "data-username": t.author.username
                        }).appendTo(o)), r = $('<div class="item-buttons"></div>').appendTo(n), $(e.render(l.publishedScriptButton, {
                            script_id_part: t.scriptIdPart,
                            script_install_count: t.scriptInstallCount,
                            show_script_install_count: !!t.scriptInstallCount,
                            script_in_library: i.some(function(e) {
                                return e.scriptIdPart === t.scriptIdPart
                            })
                        })).appendTo(r), a && (s = $('<a class="pubscript-try-button" title="' + $.t("Add this study to active chart") + '"><span class="label">' + $.t("Try") + "</span></a>"), s.on("click", function(e) {
                            e.preventDefault(), a(t)
                        }), s.appendTo(r)), c = $('<div class="item-main">').appendTo(n), h = $('<div class="item-title">').appendTo(c), $("<a>").attr({
                            href: "/v/" + t.imageUrl + "/",
                            target: "_blank"
                        }).text(t.scriptName || t.scriptTitle || $.t("Study")).appendTo(h), $('<div class="item-desc">').text(t.description || "").appendTo(c), f.append(n))
                    }))
                }
                var r, s, a = t.onTry,
                    l = i(18),
                    h = $.t("Search for scripts published by community"),
                    d = c.createDialog(h, {
                        width: 815,
                        content: l.dialogs.scriptSearch,
                        addClass: "script-search-dialog"
                    }),
                    u = d.find("input[name=q]"),
                    p = d.find(".input-reset"),
                    f = d.find(".script-search-results");
                return p.on("click", function() {
                    u.val(""), n()
                }), s = null, u.on("input keyup change", n), n(), c.positionDialog(d), c.applyHandlers(d), d
            },
            showPrioritySupportDialog: function() {
                var t = i(18);
                c.showCustomDialog({
                    title: $.t("Priority Support"),
                    html: t.dialogs.proiritySupport,
                    noButtons: !0
                })
            },
            showAlertMaintenanceDialog: function() {
                c.showNotice($.t("Alerts maintenance"), $.t("We are doing some brief daily maintenance. Alerts will be back really soon, thanks for your patience!"))
            },
            showAlertTextNotesDialog: function() {
                c.showNotice($.t("Oops!"), {
                    html: $.t('Text Notes are available only on chart page. Please <a href="/chart/">open a chart</a> and then try again.')
                })
            },
            showNotice: function(t, i, n) {
                var o, r, s, a, l, h;
                return "object" == typeof i && (n = i, i = ""), n = n || {}, o = n.doNotCloseOnBgClick || !1, r = n.html || "", s = n.width || "400px", a = {}, a.noClose = n.noClose || null, c.createModalDialog(t, a), l = n.centerCaption ? "caption-big-center" : "caption-big", c.modalDialog.find("._tv-dialog").css("width", s), h = n.customButtonCaption ? n.customButtonCaption : $.t("OK"), c.modalDialog.find("._tv-dialog-content").html(e.render('<div class="main"><div class="{{captionClassName}} {{classSuffix}}">{{text}}' + r + '</div>{{^removeOkButton}}<div class="buttons"><input type="button" class="_tv-button ok" value="' + h + '"/></div>{{/removeOkButton}}</div>', {
                    captionClassName: l,
                    classSuffix: n.classSuffix || "",
                    text: i,
                    removeOkButton: n && n.removeOkButton
                })), c.modalDialog.find("._tv-button.ok").on("click", function() {
                    c.destroy(), n.onOkButtonClick && n.onOkButtonClick()
                }), c.positionDialog(), c.applyHandlers(!1, {
                    doNotCloseOnBgClickIfShadowbox: o,
                    beforeDestroy: n.onClose
                }), c.modalDialog
            },
            showTooManyStudiesNotice: function(t) {
                return "number" != typeof t && (t = TradingView.STUDY_COUNT_LIMIT), c.showNotice($.t("Warning"), {
                    html: $.t("Studies limit exceeded: {0} studies per layout.<br>\nPlease, remove some studies.", {
                        count: t
                    }).format(t)
                })
            },
            showConfirm: function(t, i, n, o, r) {
                if (r = r || {}, r.dontAskSetting && TVSettings.getBool(r.dontAskSetting)) return void n();
                var s = c.createModalDialog(t, r);
                return c.modalDialog.find("._tv-dialog").css("width", r.customWidth ? r.customWidth : "400px"), c.modalDialog.find("._tv-dialog-content").html(e.render('<div class="main"><div class="caption-big">{{{text}}}</div>{{#dontAskSetting}}<input type="checkbox" id="confirm-dialog-checkbox" style="margin: 0; vertical-align: middle;"> <label for="confirm-dialog-checkbox" style="font-size: 11px;">' + $.t("Do not ask again") + '</label>{{/dontAskSetting}}</div><div class="_tv-dialogs-bottom _tv-dialog-center"><input class="_tv-button wide ok" type="button" value="' + $.t("YES") + '" style="margin-right: 10px;"/><input class="_tv-button wide cancel" type="button" value="' + $.t("NO") + '"/></div>', {
                    text: i,
                    dontAskSetting: !!r.dontAskSetting
                })), r.okButtonText && c.modalDialog.find(".ok").val(r.okButtonText), r.cancelButtonText && c.modalDialog.find(".cancel").val(r.cancelButtonText), c.modalDialog.find(".ok").click(function() {
                    r.dontAskSetting && $("#confirm-dialog-checkbox").is(":checked") && TVSettings.setValue(r.dontAskSetting, !0), n(), r.manualClose || c.destroy()
                }), c.modalDialog.find(".cancel").click(function() {
                    o && o(), r.manualCloseOnCancel || c.destroy()
                }), c.positionDialog(), c.applyHandlers(), s
            },
            showPrompt: function(t, i, n, o, r) {
                function s() {
                    var t, e = a.val();
                    return h && (t = h(e)) ? (t === !0 && (t = $.t("Wrong value")), void c.showError(t, c.modalDialog)) : (c.destroy(), void(n && n(e)))
                }
                var a, l = r && r.defaultValue,
                    h = r && r.validate;
                c.createModalDialog(t, r), c.modalDialog.find("._tv-dialog").css("width", "400px"), c.modalDialog.find("._tv-dialog-content").html(e.render('<div class="main"><form><div class="caption-big-center slim">{{text}}: <input type="text" name="prompt-value" class="prompt-value"/></div></form></div><div class="_tv-dialogs-bottom _tv-dialog-{{bottomAlign}}"><input class="_tv-button wide ok" type="button" value="' + $.t("OK") + '" style="margin-right: 10px;"/><input class="_tv-button wide cancel" type="button" value="' + $.t("Cancel") + '"/></div>', {
                    text: i,
                    bottomAlign: r.bottomAlign ? r.bottomAlign : "center"
                })), a = c.modalDialog.find('[name="prompt-value"]'), l && a.val(l), c.modalDialog.find("form").submit(function(t) {
                    s(), t.preventDefault()
                }), c.modalDialog.find(".ok").click(function(t) {
                    s(), t.preventDefault()
                }), c.modalDialog.find(".cancel").click(function() {
                    c.destroy(), o && o()
                }), c.positionDialog(), c.applyHandlers(), setTimeout(function() {
                    a.focus().select()
                }, 0)
            },
            showCustomDialog: function(t) {
                function e(e) {
                    var i = t.action(c.modalDialog),
                        n = i && !i.error,
                        o = void 0 === i,
                        r = i && i.notClose;
                    !n && !o || r ? i.error && c.showError(i.error) : c.destroy(), e.preventDefault()
                }

                function i(e) {
                    "function" == typeof t.onCancel ? t.onCancel() : c.destroy()
                }
                return c.createModalDialog(t.title || $.t("Dialog"), {
                    addClass: t.addClass || ""
                }), c.modalDialog.find("._tv-dialog").css("width", t.width || "400px"), c.modalDialog.find("._tv-dialog-content").html('<div class="main">' + (t.html || $.t("Content")) + "</div>" + (t.noButtons ? "" : '<div class="_tv-dialogs-bottom _tv-dialog-center">' + (t.noButtonOk ? "" : '<input class="_tv-button wide ok" type="button" value="' + $.t("OK") + '" style="margin-right: 10px;"/>') + (t.noButtonCancel ? "" : '<input class="_tv-button wide cancel" type="button" value="' + $.t("Cancel") + '"/>') + "</div>")), t.okButtonText && c.modalDialog.find(".ok").val(t.okButtonText), t.cancelButtonText && c.modalDialog.find(".cancel").val(t.cancelButtonText), c.modalDialog.find(".ok").click(e), c.modalDialog.find("form").submit(e), c.modalDialog.find(".cancel").click(i), c.modalDialog.find("._tv-dialog-title-close").click(i), c.positionDialog(), c.applyHandlers(), c.modalDialog
            },
            createModalDialog: function(t, e) {
                var i, n;
                return e = e || {}, null !== c.modalDialog && c.destroy(), c.modalDialog = $('<div class="_tv-dialog-shadowbox"><div class="_tv-dialog _tv-dialog-modal' + (e.addClass ? " " + e.addClass : "") + '">' + (e.noHeader ? "" : '<div class="_tv-dialog-title">' + (e.noClose ? "" : '<a class="_tv-dialog-title-close"></a>') + '<span class="_tv-dialog-title-text">' + t + "</span></div>") + '<div class="_tv-dialog-error"><span class="message"></span></div><div class="_tv-dialog-message"><span class="message"></span></div><div class="_tv-dialog-content"></div></div></div>').appendTo($("body")).data("title", t), c._addMessageCloseButton(c.modalDialog.find("._tv-dialog-error")), c._addMessageCloseButton(c.modalDialog.find("._tv-dialog-message")), e.noShadowBox && c.modalDialog.addClass("transparent"), e.addClass && c.modalDialog.addClass(e.addClass), e.width && c.modalDialog.find("._tv-dialog").css({
                    width: e.width
                }), e.content && c.modalDialog.find("._tv-dialog-content").html(e.content), i = $(".fancybox-overlay"), i.length && (n = i.css("z-index"), $("._tv-dialog-shadowbox").css("z-index", n + 1)), e.draggable && c.modalDialog.draggable(c._constrainDraggableOptionsIfNeeded({
                    handle: c.modalDialog.find("._tv-dialog-title")
                })), e.zIndex && c.modalDialog.css("z-index", e.zIndex), c.modalDialog
            },
            _addMessageCloseButton: function(t) {
                var e = s("close-cross", {
                    "class": "close",
                    title: $.t("Close message")
                });
                t.append(e), $(e).on("click", function() {
                    t.animate({
                        marginTop: c.NOTIFICATION_ANIMATION_START_OFFSET,
                        opacity: 0
                    }, "fast", function() {
                        t.hide()
                    })
                })
            },
            createDialog: function(t, i) {
                var n, o, r;
                return c.isOpen(t) ? (n = c.get(t), n.find("._tv-dialog-content").html(""), n.data("new", !1), n) : (i = i || {}, n = $(e.render('<div class="_tv-dialog _tv-dialog-nonmodal {{&addClass}}"><div class="_tv-dialog-title{{#hideTitle}} _tv-dialog-title-hidden{{/hideTitle}}{{#hideCloseCross}} _tv-dialog-title-no-close{{/hideCloseCross}}">{{^hideTitle}} {{&title}}{{/hideTitle}}{{^hideCloseCross}}<a class="_tv-dialog-title-close"></a>{{/hideCloseCross}}</div><div class="_tv-dialog-error"><span class="message"></span></div><div class="_tv-dialog-message"><span class="message"></span></div><div class="_tv-dialog-content"></div></div>', {
                    addClass: i.addClass || "",
                    hideTitle: i.hideTitle,
                    hideCloseCross: i.hideCloseCross,
                    title: t
                })).appendTo($("body")), c._addMessageCloseButton(n.find("._tv-dialog-error")), c._addMessageCloseButton(n.find("._tv-dialog-message")), i.width && n.css({
                    width: i.width
                }), i.content && n.find("._tv-dialog-content").html(i.content), o = 0, o = c.dialogs && c.dialogs.length ? a.max($.map(c.dialogs, function(t) {
                    return parseInt((t.dialog || t).css("z-index"), 10)
                })) + 1 : 110, n.css("z-index", o), n.data("new", !0), n.data("title", t), n.data("id", c.dialogs.length + 1), c.dialogs.push({
                    title: t,
                    dialog: n,
                    id: c.dialogs.length + 1
                }), r = {
                    start: function(t, e) {
                        var i, n, o = e.helper.css("z-index"),
                            r = 0,
                            s = null;
                        for (i = 0; i < c.dialogs.length; i++) n = c.dialogs[i].dialog.css("z-index"), n > r && (r = n, s = c.dialogs[i].dialog);
                        e.helper.css("z-index", r), s.css("z-index", o)
                    }
                }, i.dragHandle ? r.handle = i.dragHandle : i.hideTitle || (r.handle = "._tv-dialog-title"), i.dragOptions && $.extend(r, i.dragOptions), n.draggable(c._constrainDraggableOptionsIfNeeded(r)), n)
            },
            positionDialog: function(t, e, i) {
                function n() {
                    o.css("margin-left", -Math.round(o.outerWidth() / 2) + "px"), o.css("margin-top", -Math.round(o.outerHeight() / 2) + "px")
                }
                var o, r, s, a, l, h, d, u;
                i = i || {}, e = e || i.position, t ? (r = t.width(), s = t.height(), a = $(window).width(), l = $(window).height(), e && e.top && e.left ? (d = i.forcePosition ? e.left : Math.max(2, Math.min(a - r - 4, e.left)) + "px", h = i.forcePosition ? e.top : Math.max(2, Math.min(l - s - 4, e.top)) + "px") : e && e.considerScroll ? (u = $(document), d = Math.round((a - r) / 2 + u.scrollLeft()) + "px", h = Math.round((l - s) / 2 + u.scrollTop()) + "px") : (d = Math.round((a - r) / 2) + "px", h = Math.round((l - s) / 2) + "px"), i.fadeIn ? t.css({
                    left: d,
                    top: h
                }).hide().fadeIn("fast") : i.smooth ? t.animate({
                    left: d,
                    top: h
                }) : t.css({
                    left: d,
                    top: h
                })) : (t = c.modalDialog, o = t.find("._tv-dialog"), n(), o.resize(n))
            },
            applyHandlers: function(t, e) {
                var i, n, o = !t || t === this.modalDialog;
                e = e || {}, i = o ? function() {
                    c.destroy()
                } : function() {
                    c.destroy(t.data("title"))
                }, t = t || c.modalDialog.find("._tv-dialog"), e.beforeDestroy && t.on("destroy", e.beforeDestroy), t.find("._tv-dialog-title ._tv-dialog-title-close").on("click", i), e.doNotCloseOnBgClick || setTimeout(function() {
                    t.on("mousedownoutside", function(n) {
                        var o = $(n.target).parents().andSelf();
                        e.doNotCloseOnBgClickIfShadowbox && o.is("._tv-dialog-shadowbox") || o.is(".colorpicker, .charts-popup-list, ._tv-dialog, .tvcolorpicker-popup, .symbol-edit-popup, .ui-datepicker, .clockpicker-popover, .pac-container, #global-zeroclipboard-html-bridge") || (t.unbind("mousedownoutside"), i())
                    })
                }, 0), t.find('input[type="checkbox"]').change(function() {
                    var t = $(this),
                        e = t.next("._tv-dialog-checkbox-mask");
                    e.toggleClass("disabled", t.prop("disabled")).toggleClass("_tv-dialog-checkbox-mask-active", t.is(":checked"))
                }), n = t.find('input[type="text"]').focus(function() {
                    $(this).addClass("_tv-dialog-content-textactive")
                }).blur(function() {
                    $(this).removeClass("_tv-dialog-content-textactive")
                }).first(), Modernizr.touch || e.notFocusFirst || n.focus(), t.find('input[type="password"]').focus(function() {
                    $(this).addClass("_tv-dialog-content-textactive")
                }).blur(function() {
                    $(this).removeClass("_tv-dialog-content-textactive")
                }), t.find("textarea").focus(function() {
                    $(this).addClass("_tv-dialog-content-textareaactive")
                }).blur(function() {
                    $(this).removeClass("_tv-dialog-content-textareaactive")
                }), t.find("._tv-dialog-checkbox-mask").click(function() {
                    var t = $(this).prev();
                    t.prop("disabled") || (t.prop("checked", !t[0].checked), t.change())
                }), e.doNotCloseOnEsc || $(window).bind("keyup.hideDialog", function(e) {
                    return 27 === e.keyCode ? (t ? c.destroy(t.data("title")) : c.destroy(), !1) : void 0
                }), e.processEnterButton && $(window).bind("keyup.confirmAndCloseDialog", function(t) {
                    13 === t.keyCode && "textarea" !== t.target.tagName.toLowerCase() && (e.processEnterButton.click(), $(window).unbind("keyup.confirmAndCloseDialog"))
                })
            },
            showError: function(t, e, i) {
                c.showMessage(t, e, $.extend(i || {}, {
                    isError: !0
                }))
            },
            showMessage: function(t, e, i) {
                var n, o, r;
                e || (e = $("._tv-dialog")), i = i || {}, n = i.isError && "_tv-dialog-error" || "_tv-dialog-message", o = e.find("." + n), r = o.find(".message"), i.html ? r.html("string" == typeof i.html ? i.html : t) : r.text(t), r.css("width", e.width()).toggleClass("selectable", !!i.selectable), o.toggleClass("with-close", !!i.withClose).css({
                    marginTop: c.NOTIFICATION_ANIMATION_START_OFFSET,
                    opacity: "0"
                }).show().animate({
                    marginTop: 0,
                    opacity: 1
                }, "fast"), i.withClose || o.on("touchstartoutside  mousedownoutside keydownoutside", function s() {
                    o.animate({
                        marginTop: c.NOTIFICATION_ANIMATION_START_OFFSET,
                        opacity: 0
                    }, "fast", function() {
                        o.hide()
                    }), o.off("touchstartoutside  mousedownoutside keydownoutside", s)
                })
            },
            showStocktwitsDialog: function(t, i) {
                return c.showCustomDialog({
                    title: $.t("Send Message to stocktwits"),
                    html: e.render('<textarea style="width: 100%" maxLength="120">{{text}}</textarea>', {
                        text: t
                    }),
                    action: i
                })
            },
            showSessionLockDialog: function(t, n) {
                var o, r, s, a, l, h;
                return c.createModalDialog("You are disconnected", {
                    noHeader: !0,
                    addClass: "gopro-dialog session-lock-dialog",
                    noClose: !0
                }), o = c.modalDialog, o.css({
                    zIndex: 1e3
                }), r = c.modalDialog.find("._tv-dialog-content"), s = i(18), r.html(e.render(s.dialogs.goPro.layout, {
                    noButton: !0
                })), a = r.find(".col-main .col-copy"), a.html("<h2>" + $.t("Multiple Connections") + "</h2><p>" + $.t("Someone logged into your account from different device<span class='device_info'></span>") + "</p><p>" + $.t("One account can be accessed from one browser (on one device) at a time - to stay compliant with exchange regulations and prevent unauthorized access.") + "</p><p>" + $.t('PRO members can add optional multi-device access. Click "Buy Multi-Device Access" to access your account from several devices at the same time. Click CONNECT to terminate the other session and connect here.') + "</p>"), t && (l = r.find(".device_info").append(":<br />"), "Other" !== t.device && l.append($.t("Device"), ": ", $("<b/>").text(t.device), ", "), l.append($.t("IP"), ": ", $("<b/>").text(t.ip), ", "), l.append($.t("Browser"), ": ", $("<b/>").text(t.browser)), l.append("<br />")), h = o.find(".actions-block"), $('<a class="reconnect-button">' + $.t("CONNECT") + "</a>").appendTo(h).bind("click", n), $('<a href="/gopro/" target="_blank" class="yes-button">' + $.t("BUY MULTIDEVICE ACCESS") + "</a>").appendTo(h).on("click", function() {
                    return window.user.is_pro && "pro_realtime_trial" !== window.user.pro_plan ? pro.visitExchangesPage({
                        newWindow: !0
                    }) : TradingView.visitPaymentPage("pro", "y", {
                        newWindow: !0
                    }), !1
                }), c.positionDialog(), c.applyHandlers(!1, {
                    doNotCloseOnBgClick: !0,
                    doNotCloseOnEsc: !0
                }), o
            },
            showLanguagePopup: function(t) {
                var n, o, r;
                window.matchMedia && window.matchMedia("(max-width: 700px)").matches || (n = "Language Popup", c.createModalDialog(n, {
                    noHeader: !0,
                    addClass: "language-popup"
                }), o = c.modalDialog.find("._tv-dialog-content"), r = i(18), o.html(e.render(r.dialogs.languagePopup[t], {})), o.find(".yes").click(function(e) {
                    e.preventDefault();
                    var i = $('<form action="/change_language/" method="post"><input type="hidden" name="language" value="' + t + '"/></form>').appendTo(document.body);
                    i.submit()
                }), o.find(".no").click(function(t) {
                    t.preventDefault(), $.post("/change_language/", {
                        language: "en"
                    }, function() {}), c.destroy()
                }), c.positionDialog(), c.applyHandlers(!1, {
                    doNotCloseOnBgClick: !0,
                    doNotCloseOnEsc: !0
                }))
            },
            showPhoneDialog: function(t) {
                function o(e) {
                    TradingView.trackEvent("Phone verification", e + (S ? " initial" : ""), t.source)
                }

                function r() {
                    localStorage.removeItem("_tempPhoneNumber"), localStorage.removeItem("_tempPhoneCountryCode"), localStorage.removeItem("_tempPhoneRegionCode")
                }

                function s() {
                    O.prop("disabled", !0).addClass("process"), R.prop("disabled", !0)
                }

                function a() {
                    O.prop("disabled", !1).removeClass("process"), R.prop("disabled", !1)
                }

                function l(t, e) {
                    h(), W = TradingView.unifiedSpinner("mini", e).spin(t)
                }

                function h() {
                    W && (W.stop(), W = null)
                }

                function d(t, e) {
                    return t ? Object.keys(t).sort(function(e, i) {
                        return t[e][0] > t[i][0] ? 1 : t[e][0] < t[i][0] ? -1 : 0
                    }).map(function(i) {
                        return {
                            value: i,
                            caption: t[i][0] + " (+" + t[i][1] + ")",
                            selected: e ? e === i : t[i][2] === !0
                        }
                    }) : []
                }

                function u(t, e) {
                    t.ctrlKey || t.metaKey || !t.charCode || !t.which || t.which <= 32 || e.test(String.fromCharCode(t.charCode)) || t.preventDefault()
                }

                function p(t, e) {
                    var i = t.trim();
                    return e !== !0 ? i.replace(/\D+/g, "") : i.replace(/(?!^)\+/, "").replace(/[^\d+]+/g, "")
                }

                function f(t, e, i, n) {
                    return "+" + i + (n === !0 ? " " + t : p(t))
                }

                function _(t) {
                    function n() {
                        _.text("+" + t.options[p.val()][1]), g.css("paddingLeft", _.width() + 10)
                    }

                    function o(t) {
                        var e = t.keyCode || t.which;
                        38 !== e && 40 !== e || t.preventDefault()
                    }

                    function r(t, e) {
                        c.showError(t), e && e.addClass("error").focus(), M.one("submit", h)
                    }

                    function l(t, e, i) {
                        B = t, localStorage.setItem("_tempPhoneNumber", t), z = e, localStorage.setItem("_tempPhoneCountryCode", e), N = i, localStorage.setItem("_tempPhoneRegionCode", i), $.post("/accounts/phone-verify-send/").done(function(t) {
                            return a(), !t || t.error ? void r(t && t.error || $.t("Unknown error occurred. Please contact support")) : void v(t.sid, t.exp)
                        }).fail(function() {
                            r($.t("Unknown error occurred. Please contact support"))
                        })
                    }

                    function h(e) {
                        var i, n, o, c, h, d;
                        return e.preventDefault(), i = p.val(), n = t.options[i][1], (o = g.val().trim()) ? !o || ~o.indexOf("+") ? void r($.t("Please type in your phone number without region code")) : (c = f(o, i, n), s(), h = {
                            phone: c,
                            phone_country_code: i
                        }, d = $("input[name=csrfmiddlewaretoken]").val(), d && (h.csrfmiddlewaretoken = d), void $.post("/accounts/change-phone/", h).done(function(t) {
                            var e = t.errors && t.errors.phone_country_code && t.errors.phone_country_code[0],
                                o = t.errors && t.errors.phone && t.errors.phone[0];
                            return e || o ? (a(), void r(e || o, o && g || null)) : void l(t.phone, i, n)
                        })) : void r($.t("Please type in your phone number"))
                    }
                    var p, _, g, m, y, w = i(18);
                    A.html(e.render(w.dialogs.phoneDialog.phoneForm, {
                        options: d(t && t.options, z)
                    })), p = A.find("select[name=phone_country_code]").selectbox({
                        speed: 100,
                        classHolder: "tv-select-container",
                        onOpen: function() {
                            $(window).on("keydown", o).on("keypress", y)
                        },
                        onClose: function(t) {
                            $(window).off("keydown", o).off("keypress", y), setTimeout(g.focus.bind(g), 50)
                        }
                    }), _ = A.find(".country-code"), g = A.find("input[name=phone]").on("keypress", function(t) {
                        u(t, /[0-9\s()\-]/)
                    }).on("input", function() {
                        $(this).removeClass("error")
                    }), setTimeout(g.focus.bind(g), 50), m = t && (t.phone || B), m && N && (m = m.replace(RegExp("^\\+" + N + "\\s*"), "")), m && g.val(m), y = function() {
                        function t() {
                            clearTimeout(o), o = setTimeout(function() {
                                r = ""
                            }, 2e3)
                        }

                        function e(t) {
                            var e = $(t),
                                i = A.find(".tv-select-container .sbOptions"),
                                n = i.size() && i.find("a[rel=" + e.val() + "]").parent();
                            n && n.size() && i.scrollTop(n.get(0).offsetTop), e.prop("selected", !0), p.trigger("change")
                        }

                        function i(t) {
                            var i, n, o, s;
                            if (r.length) {
                                for (i = p.find("option").toArray(), o = 0; o < i.length; ++o)
                                    if (s = i[o], 0 === s.textContent.toLowerCase().indexOf(t)) {
                                        n = i[o];
                                        break
                                    }
                                n && e(n)
                            }
                        }

                        function n(e) {
                            r += e, i(r.toLowerCase()), t()
                        }
                        var o, r = "";
                        return function(t) {
                            n(String.fromCharCode(t.charCode))
                        }
                    }(), p.on("change", n), n(), M.one("submit", h)
                }

                function g(e) {
                    var i, n;
                    return clearInterval(F), h(), V.removeClass("loading"), D.addClass("inactive"), I.removeClass("code"), O.val($.t("Next")), t.verifyDelayExpires instanceof Date && (n = Math.max(0, (t.verifyDelayExpires - Date.now()) / 864e5), Math.floor(n) && (i = $.t("Phone number verification was added to TradingView! Verify your number within __n__ __days__ to keep access to social features (publishing, comments, chat, etc).", {
                        n: Math.round(n),
                        days: $.t("day", {
                            count: n
                        })
                    }))), i || (i = t.customMessage || (user.has_phone || t.byFeature ? $.t("Verify your phone number to activate the free trial and cool social features!") : $.t("Phone number verification required to complete registration."))), E.text(i), L.html($.t("Choose your country code and enter your phone number below. Weâ€™ll send you a text message with a confirmation code.")), H ? (D.removeClass("inactive"), void _($.extend({}, H, e))) : (l(A.get(0), {
                        left: "5%"
                    }), void $.post("/accounts/phone-options/").done(function(t) {
                        h(), D.removeClass("inactive"), H = t, _(t)
                    }))
                }

                function m() {
                    b = !0, I.removeClass("code").addClass("success"), E.text($.t("Verification successful! Now you have access to social features, such as chatting, publishing ideas and following other users.")), A.empty(), O.val($.t("Close")), R.css("display", "none"), M.on("submit", function(t) {
                        t.preventDefault(), c.destroy()
                    }), setTimeout(O.focus.bind(O), 50)
                }

                function v(t, l) {
                    function d(e) {
                        function i(t) {
                            c.showError(t), v.addClass("error").focus(), M.one("submit", d)
                        }
                        e.preventDefault();
                        var n = v.val().trim();
                        return n ? (s(), void $.post("/accounts/phone-verify-check/", {
                            sid: t,
                            code: n
                        }).done(function(t) {
                            return a(), t && !t.error && t.success ? (delete user.phone_verify_info, user.has_phone = !0, user.phone_verified = !0, TradingView.profile && TradingView.profile.updatePhoneStatus(p(B, !0)), r(), clearInterval(F), void m()) : void i(t && t.error || $.t("Unknown error occurred"))
                        })) : void i($.t("You should provide code"))
                    }

                    function f(t) {
                        w.text(t + " " + $.t("second", {
                                count: t
                            }))
                    }
                    var _, v, y, w;
                    h(), V.removeClass("loading"), D.removeClass("inactive"), I.addClass("code"), user.phone_verify_info = {
                        sid: t,
                        exp: n().unix() + l
                    }, L.text($.t("Check your phone! Weâ€™ve texted a code to __phoneNumber__. Once you receive the code, enter it below to confirm your phone number.", {
                        phoneNumber: B
                    })), _ = i(18), A.html(e.render(_.dialogs.phoneDialog.codeForm, {})), v = A.find("input[name=code]").on("keypress", function(t) {
                        u(t, /\w/)
                    }).on("input", function() {
                        $(this).removeClass("error")
                    }), O.val($.t("Verify")), A.find("input[name=code]").focus(), M.one("submit", d), y = A.find(".counter-wrap"), w = y.find(".count"), f(l), F = setInterval(function() {
                        return --l <= 0 ? (M.off("submit", d), A.empty(), o("Verification code expired"), void g({
                            phone: B
                        })) : void f(l)
                    }, 1e3)
                }

                function y() {
                    h(), clearInterval(F), b ? w.resolve() : w.reject()
                }
                var w, b, S, T, x, C, P, k, I, E, L, V, M, A, D, O, R, B, z, N, H, F, W;
                return t || (t = {}), w = $.Deferred(), b = !1, t.forceAuthenticated === !0 || "undefined" != typeof is_authenticated && is_authenticated && "undefined" != typeof user ? (S = TVSettings.getBool("_phone_verif_dlg_initial", !0), TVSettings.setValue("_phone_verif_dlg_initial", !1), o("Show dialog"), w.done(function() {
                    o("Verified")
                }).fail(function() {
                    o("Cancelled")
                }), T = "Phone dialog", x = c.createModalDialog(T, {
                    addClass: "phone-dialog"
                }), C = x.find("._tv-dialog-content"), P = "string" == typeof t.cancelButtonText && t.cancelButtonText || $.t("Cancel"), k = i(18), C.html(e.render(k.dialogs.phoneDialog.base, {
                    cancel_button_text: P
                })), C.find(".form-wrap .title").text($.t("Verify phone number")), I = C.find(".message-wrap"), E = I.find(".message"), L = I.find(".form-message"), V = C.find(".form-wrap"), M = C.find(".phone-add-verify-form"), A = M.find(".inputs"), D = M.find(".buttons"), O = M.find("input[type=submit]"), R = M.find("input[type=button].cancel").on("click", c.destroy), B = localStorage.getItem("_tempPhoneNumber"), z = localStorage.getItem("_tempPhoneCountryCode"), N = +localStorage.getItem("_tempPhoneRegionCode") || null, "undefined" != typeof loginStateChange && loginStateChange.subscribe(null, function() {
                    "undefined" != typeof is_authenticated && is_authenticated || r()
                }), function() {
                    var t = n().unix();
                    user && user.phone_verify_info && t < user.phone_verify_info.exp ? v(user.phone_verify_info.sid, user.phone_verify_info.exp - t) : g()
                }(), c.applyHandlers(null, {
                    doNotCloseOnBgClick: !0
                }), c.positionDialog(), x.on("destroy", y), w.promise()) : w.reject()
            },
            showInvalidFileFormatDialog: function() {
                var t, e, i;
                return c.createModalDialog($.t("Invalid data format"), {
                    addClass: "invalid-file-dialog",
                    noClose: !0
                }), t = c.modalDialog, t.css({
                    zIndex: 1e3
                }), e = c.modalDialog.find("._tv-dialog-content"), e.html('<div class="main"><p>' + $.t('File contains incorrectly formatted data. Please correct the format and try again. Examples: "NYSE:GE,NYSE:F,NASDAQ:MSFT" or "F,GE,MSFT"') + '<div class="_tv-dialog-right"></div></div>'), i = e.find("._tv-dialog-right"), $('<a class="_tv-button wide ok">' + $.t("Close") + "</a>").appendTo(i).bind("click", function() {
                    t.remove()
                }), c.positionDialog(), c.applyHandlers(!1, {
                    doNotCloseOnBgClick: !0,
                    doNotCloseOnEsc: !0
                }), t
            },
            isOpen: function(t) {
                for (var e = 0; e < c.dialogs.length; e++)
                    if (c.dialogs[e].title === t) return !0;
                return !1
            },
            get: function(t) {
                for (var e = 0; e < c.dialogs.length; e++)
                    if (c.dialogs[e].title === t) return c.dialogs[e].dialog
            },
            submit: function(t, e) {
                var i = e ? $(e) : $("._tv-dialog form").first(),
                    n = i.serialize(),
                    o = i.attr("action");
                $.post(o, n, function(e) {
                    void 0 !== t && t(e)
                }, "json")
            },
            destroy: function(t, e) {
                if (void 0 !== c.chart && (c.chart.destroy(), delete c.chart), $(window).unbind("keyup.hideDialog"), $(window).unbind("keyup.confirmAndCloseDialog"), t && "string" == typeof t)
                    for (var i = 0; i < c.dialogs.length; i++) c.dialogs[i].title === t && (c.dialogs[i].dialog.trigger("destroy", e), $(document).unbind("mouseup.hideDialog" + c.dialogs[i].id), $("input", c.dialogs[i].dialog).blur(), c.dialogs[i].dialog.remove(), c.dialogs.splice(i, 1));
                else c.modalDialog && (c.modalDialog.find("._tv-dialog").trigger("destroy"), c.modalDialog.remove(), c.modalDialog = null)
            },
            changeTitle: function(t, e) {
                t && c.dialogs.forEach(function(i) {
                    var n, o;
                    return i.title === t ? (n = i.dialog, o = n.find("._tv-dialog-title"), i.title = e, n.data("title", e), o.html(o.html().replace(t, e)), o.find("a").on("click", function() {
                        c.destroy(e)
                    }), !0) : void 0
                })
            },
            calcHeight: function(t, e, i) {
                null == i && (i = 20), t += i;
                var n = parseInt($("body").height(), 10);
                return t > n && (e -= t - n, e = Math.max(0, e)), e
            },
            resizeContent: function(t, e, i) {
                var n, o;
                null == i && (i = 20), t += i, n = parseInt($("body").height(), 10), o = e.height(), t > n && (o -= t - n, o = Math.max(0, o), e.height(o))
            },
            resizeContentWidth: function(t, e, i) {
                var n, o;
                null == i && (i = 20), t += i, n = parseInt($(window).width(), 10), o = e.width(), t > n && (o -= t - n, o = Math.max(0, o), e.width(o))
            }
        };
        void 0 !== l && l && l.exports && (l.exports = c)
    }).call(e, i(3), i(86), i(23), i(8), i(55), i(5), i(40), i(4)(t))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function i(t, i, n) {
            this._$tabs = t, this._$pages = i, this.options = $.extend({}, this._DEFAULT_OPTIONS, n || {}), this.tabChanged = new e, this.initActivePage(), this.initHandlers()
        }
        i.prototype._DEFAULT_OPTIONS = {
            saveTab: !1
        }, i.prototype.initActivePage = function() {
            var t = 0;
            this.options.saveTab && (t = TVSettings.getInt(this.options.saveTab, 0)), t = this.options.activeTab || t, this.setActivePage(t)
        }, i.prototype.setActivePage = function(t) {
            this._$tabs.children().removeClass("active").eq(t).addClass("active"), this._$pages.children().removeClass("active").eq(t).addClass("active"), this.options.saveTab && TVSettings.setValue(this.options.saveTab, t), this.tabChanged.fire(t)
        }, i.prototype.initHandlers = function() {
            this._$tabs.on("click", "*", this._onTabClick.bind(this))
        }, i.prototype._onTabClick = function(t) {
            t.preventDefault();
            var e = $(t.currentTarget).index();
            this.setActivePage(e)
        }, i.prototype.addPage = function(t, e) {
            var i = this.count();
            return this._$tabs.append(t), this._$pages.append(e), i || this.setActivePage(0), i
        }, i.prototype.removePage = function(t) {
            function e(t) {
                return t - 1 >= 0 ? t - 1 : 0
            }
            this._$tabs.children().eq(t).remove(), this._$pages.children().eq(t).remove();
            var i = this._$tabs.children().filter(".active").length ? this._$tabs.children().filter(".active").index() : e(t);
            this.setActivePage(i)
        }, i.prototype.count = function() {
            return this._$tabs.children().length
        }, i.prototype.index = function() {
            return this._$tabs.children().filter(".active:eq(0)").index()
        }, i.prototype.indexOfPage = function(t) {
            return this._$pages.children().index(t)
        }, i.prototype.pageAt = function(t) {
            return this._$pages.children().eq(t)
        }, t.exports = i
    }).call(e, i(50))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n() {}
        var o, r = "tvconversion",
            s = r + ".first_seen",
            a = i(322),
            l = new n;
        l.initDfd = $.Deferred(), n.prototype.init = function() {
            var t, e, n;
            return a ? (t = +new Date, e = +(a.getItem(s) || NaN), (e > t || isNaN(e)) && a.setItem(s, t), o(), n = i(343), loginStateChange.subscribe(this, function(t) {
                t || window.is_authenticated && (n.fillUpgradeArea(), n.showDialog())
            }), n.fillUpgradeArea(), n.showDialog(), this.initDfd && this.initDfd.resolve(), !0) : !1
        }, o = function() {
            function t() {
                try {
                    k = JSON.parse(a.getItem(L))
                } catch (t) {
                    k = null
                }
                k || (k = {}), k.state !== A && (k.state = M)
            }

            function n() {
                a && a.setItem(L, JSON.stringify(k))
            }

            function o(t) {
                TradingView.trackEvent("ProRT trial", t)
            }

            function c(t) {
                (t === !0 || k.setTrialOnLogin) && is_authenticated && $.getJSON("/accounts/set-trial/").done(function(i) {
                    var o, r, s, a;
                    if (t === !0 || k.setTrialOnLogin) {
                        if (delete k.setTrialOnLogin, n(), i.error) {
                            switch (o = "", i.error) {
                                case "E_NOT_AUTH":
                                    o = $.t("You are not authenticated.");
                                    break;
                                case "E_HAS_TRIAL":
                                    o = $.t("You already have Pro Plus trial.");
                                    break;
                                case "E_HAD_TRIAL":
                                    o = $.t("You already participated in Pro Plus trial.");
                                    break;
                                case "E_ALREADY_PRO":
                                    o = $.t("You are already PRO. PRO Plus trial cannot be activated on PRO accounts.");
                                    break;
                                case "E_NEXT_MONTH_PAYMENT":
                                    o = $.t("Could not create recurring profile for next month");
                                    break;
                                case "E_CREDIT_CARD_NOT_VERIFIED":
                                    return r = pro.getProduct("pro_realtime") || {}, s = e().add(30, "days").format("LL"), a = {
                                        address: !1,
                                        credentials: !1,
                                        email: !1,
                                        startTrial: !0,
                                        title: $.t("Add Your Billing Info"),
                                        message: "<p>" + $.t("Adding your credit card info will let your upgraded plan continue uninterrupted - if you choose not to cancel. Weâ€™ll charge 1 cent for verification, but nothing else will be charged at any point during your free trial. No risks, no obligations - you can cancel anytime!") + "</p><p>" + $.t("You will not be charged for now, starting on {0} you will be billed ${1} per month.").format(s, r.cost) + "</p><p>" + $.t("After the trial you won't be charged for any premium data packages unless you subscribe to them separately.") + "</p>",
                                        okText: $.t("30 Days Free Trial")
                                    }, void pro.updatePaymentInfo(a)
                            }
                            return void TVDialogs.showTrialMessage({
                                title: $.t("PRO Plus Trial"),
                                copy: "<p>" + $.t("Sorry, PRO Plus trial could not be set.") + "</p>" + (o ? "<p>" + o + "</p>" : ""),
                                closeButtonCopy: $.t("Close_as_a_command")
                            })
                        }
                        $.extend(user, i.userDiff), TradingView.changeLoginState(!0), H && TVDialogs.destroy(), TVDialogs.showTrialMessageSuccess()
                    }
                })
            }

            function h(t) {
                o("Trial dialog shown" + (t ? " from email" : "")), TVDialogs.showProRTTrialOffer({
                    callbacks: {
                        onAccept: function() {
                            f(t), P()
                        },
                        onDecline: function() {
                            g(t), TVDialogs.destroy()
                        },
                        onRemindLater: function() {
                            p(t), TVDialogs.destroy()
                        }
                    }
                }), H = TVDialogs.modalDialog, H.on("destroy", function() {
                    H = null
                })
            }

            function d(t) {
                o("Early access dialog shown" + (t ? ": " + t : "")), TradingView.onOrder() || TVDialogs.showEarlyAccessDialog({
                    callbacks: {
                        onDecline: function() {
                            _(t), TVDialogs.destroy()
                        },
                        onOrder: function() {
                            TVDialogs.destroy(), runOrSignIn(function() {
                                "pro_realtime" !== user.pro_plan && (u(), m(t))
                            }, {
                                source: "Early access trial dialog"
                            })
                        }
                    },
                    reason: t
                })
            }

            function u() {
                TradingView.visitPaymentPage("pro_realtime_discount", "y", {
                    fixedCycle: !1
                })
            }

            function p(t) {
                o("Remind later" + (t ? " from email" : "")), k.remindCount = (0 | k.remindCount) + 1, k.startTime = +new Date, S()
            }

            function f(t) {
                o("Trial accepted" + (t ? " from email" : "")), TradingView.setTrialAvailiable(!1), k.offerResolution = D
            }

            function _(t) {
                o("Offer declined after trial: " + t), w()
            }

            function g(t) {
                o("Trial declined" + (t ? " from email" : "")), k.offerResolution = O
            }

            function m(t) {
                o("Order after trial" + (t ? ": " + t : ""))
            }

            function v() {}

            function y() {}

            function w() {
                $.get("/accounts/update-trial-marker/"), window.user && delete user.offer_prort
            }

            function b(t) {
                k.state !== t && (k.state = t, delete k.startTime, S())
            }

            function S() {
                var t = +new Date;
                if (is_authenticated && "pro_realtime_trial" === user.pro_plan && (k.offerResolution = D, TradingView.setTrialAvailiable(!1)), is_authenticated && user.offer_prort) {
                    switch (user.offer_prort) {
                        case R:
                        case B:
                        case z:
                        case N:
                            d(user.offer_prort)
                    }
                    delete user.offer_prort
                }
                switch (k.state) {
                    case M:
                        !window.is_authenticated && +a.getItem(s) + V < t && (v(), b(A));
                        break;
                    case A:
                        window.is_authenticated && (y(), b(M))
                }
                n()
            }

            function T() {
                is_authenticated && user.is_pro || h(!0)
            }

            function x() {
                if (I) return !1;
                I = !0;
                var t = function() {
                    var t = $(document.documentElement);
                    window.is_authenticated && C() ? t.addClass("is-trial-available").removeClass("is-not-trial-available") : t.addClass("is-not-trial-available").removeClass("is-trial-available")
                };
                loginStateChange.subscribe(null, function(e) {
                    "function" != typeof TVDialogs.onSigninSuccess && (TradingView.phoneVerification.whenVerified().done(function() {
                        c(), e || S()
                    }), e || t())
                }), t(), /^#?prort-trial$/.test(location.hash) && (T(), history.replaceState && history.replaceState(null, null, location.href.replace(/#prort-trial$/, "")), location.hash = ""), S()
            }

            function C() {
                var t = a.getItem("trial_availiable");
                return void 0 !== t && null !== t ? "1" === t : is_authenticated && user.pro_plan ? !1 : k.setTrialOnLogin ? !1 : k.offerResolution !== D
            }

            function P() {
                function t() {
                    c(!0)
                }
                is_authenticated || (k.setTrialOnLogin = !0, n());
                var e = {
                    source: "Start trial"
                };
                E.isFeatureEnabled("need_credit_card_for_trial") || (e.verifiedPhoneRequired = !0, e.verifyPhoneMessage = $.t("Verified phone number required to activate your free PRO Plus trial."), e.noVerifyDelay = !0), runOrSignIn(t, e)
            }
            var k, I, E, L = r + ".e_prortdemo",
                V = 2592e6,
                M = "init",
                A = "locked30",
                D = "accepted",
                O = "declined",
                R = "after 1 week",
                B = "after 2 weeks",
                z = "after 3 weeks",
                N = "finished",
                H = null;
            return t(), I = !1, E = i(344), l.isLocked = function() {
                return k.state === A
            }, l.proSettingInProgress = function() {
                return !!k.setTrialOnLogin
            }, l.offerDialogIsOpen = function() {
                return !!H
            }, l.trialDialog = function() {
                window && user.pro_plan || h()
            }, l.earlyAccessDialog = d, l.trialAvailable = C, l.startTrial = P, l.openEarlyAccessPaymentPage = function(t) {
                u(), m(t)
            }, x
        }(), TradingView.Conversion = l, t.exports = l
    }).call(e, i(23))
}, function(t, e, i) {
    (function(t, n) {
        "use strict";

        function o() {
            var e = t(user.pro_plan_activated);
            return e.subtract(10, "days"), Math.abs(t().diff(e, "months"))
        }

        function r(t, e, n) {
            var r, s, l, c;
            if (TradingView.onOrder() || "undefined" == typeof pro) return !1;
            if (r = "upgrade-from-monthly.shown_popup", s = pro.getYearUpgradePriceInfo(), !s) return !1;
            if (l = o(), n && 4 > l) 1 > l && (l = 1);
            else if (0 === l || l > 3 || l !== s.paid_months) return !1;
            r += l, a.getItem(r) && !n || (c = i(340), t = t || function() {}, e = e || function() {}, c.showUpgradeForYearDialog({
                spent: s.spent,
                year_cost: s.year_cost,
                cost: s.cost,
                monthly_cost: s.pro_pack.cost,
                paid_months: s.paid_months,
                unpaid_months: s.unpaid_months,
                onCancel: function() {
                    return a.setItem(r, 1), e()
                },
                onSubmit: function() {
                    return a.setItem(r, 1), t()
                }
            }, l))
        }

        function s() {
            var t, e, o = $(".js-upgrade-for-year-area");
            o.length && (t = pro.getYearUpgradePriceInfo(), t && (e = i(18), o.html(n.render(e.billingUpgradeForYear, {
                spent: t.spent,
                year_cost: t.year_cost,
                cost: t.cost
            })), o.find(".js-upgrade-for-year").on("click", function() {
                return TradingView.trackEvent("UpgradedFromMtoY", "upgrade from months to year (profile)", "agreed"), TradingView.visitPaymentPage(t.pro_pack.text_id + "_year_6_months_free", null, {
                    fixedCycle: !0,
                    upgradeFromM: !0
                }), !1
            })))
        }
        var a = i(322);
        e.showDialog = r, e.fillUpgradeArea = s
    }).call(e, i(23), i(86))
}, function(t, e, i) {
    "use strict";
    TradingView.FeatureToggle = {
        force_prefix: "forcefeaturetoggle.",
        enableFeature: function(t) {
            TVLocalStorage.setItem(this.force_prefix + t, "true")
        },
        disableFeature: function(t) {
            TVLocalStorage.removeItem(this.force_prefix + t)
        }
    }, TradingView.isFeatureEnabled = function(t) {
        function e(e) {
            return TVLocalStorage.setItem(n + e, Math.random() <= t[e]), TVLocalStorage.getItem(n + e)
        }

        function i(t) {
            var e = ["alerts-maintenance", "backtesting", "phone_verification", "widgetbar.old-my-ideas", "japanese_alerts"];
            return -1 === e.indexOf(t)
        }
        var n = "featuretoggle.";
        return TradingView.pushStreamMultiplexer && TradingView.pushStreamMultiplexer.on("featuretoggle", function(i) {
            t[i.name] = i.state, e(i.name)
        }),
            function(o) {
                if ("local" === window.environment && i(o)) return !0;
                if (t[o] && -1 === t[o]) return !1;
                if ("true" === TVLocalStorage.getItem(TradingView.FeatureToggle.force_prefix + o) || window.is_authenticated && "undefined" != typeof user && user && user.settings && user.settings[TradingView.FeatureToggle.force_prefix + o]) return !0;
                if (!t[o]) return !1;
                if (1 === t[o]) return !0;
                var r = TVLocalStorage.getItem(n + o);
                return void 0 === r || null === r ? e(o) : "true" === r
            }
    }(window.featureToggleState || {}), e.FeatureToggle = TradingView.FeatureToggle, e.isFeatureEnabled = TradingView.isFeatureEnabled
}, function(t, e, i) {
    (function(e) {
        "use strict";
        var i = function() {
            var t, i, n, o, r = {};
            return r.POLICY_PASSIVE = 0, r.POLICY_NORMAL = 1, r.POLICY_AGGRESSIVE = 2, t = {
                passive: r.POLICY_PASSIVE,
                normal: r.POLICY_NORMAL,
                aggressive: r.POLICY_AGGRESSIVE
            }, o = 11, r.enable = function(r, s, a) {
                o = a || o, i = r, s = s || "aggressive", n = t[s], e.enable("referral_program_for_widget_owners"), e.enable("referral_program_policy_" + s), TradingView.trackEvent("Referral program enabled", s)
            }, r.referenceToTradingView = function() {
                if (!i) return "https://tradingview.com";
                var t = "http://tradingview.go2cloud.org/aff_c?offer_id=2&url_id=" + o + "&aff_id=" + i + "&utm_source=widget";
                return t
            }, r.policyEnabled = function(t) {
                var i = !!e.enabled("referral_program_for_widget_owners");
                return i && n && n >= t
            }, r
        }();
        t.exports = i
    }).call(e, i(3))
}, function(t, e) {
    "use strict";
    var i = function() {
        function t() {
            u = TVSettings.getJSON(f, [])
        }

        function e() {
            u && TVSettings.setJSON(f, u)
        }

        function n(e) {
            u || t(), ("number" == typeof e || /^\d+$/.test(e)) && (e = "PUB;" + e);
            var i = "Script$" + e + "@tv-scripting";
            return -1 !== u.indexOf(i)
        }

        function o(n) {
            var o, r;
            u || t(), ("number" == typeof n || /^\d+$/.test(n)) && (n = "PUB;" + n), o = "Script$" + n + "@tv-scripting", r = u.indexOf(o), -1 === r && (u.push(o), e(), TVXWindowEvents.emit("StudyFavoritesChanged", JSON.stringify(u)), window.is_authenticated && i.info([n]).done(function(t) {
                var e, i;
                t && t[0] && t[0].imageUrl && (e = t[0].imageUrl, i = !1, $(".agree").each(function() {
                    var t, n = $(this),
                        o = n.data("image_url");
                    o === e && (t = n.data("controller"), t && (t.setAgree(), i = !0))
                }), i || $.ajax({
                    url: "/vote-for-chart/",
                    type: "POST",
                    dataType: "json",
                    data: {
                        image_url: t[0].imageUrl,
                        vote: 1
                    }
                }))
            }))
        }

        function r(i) {
            var n, o;
            u || t(), ("number" == typeof i || /^\d+$/.test(i)) && (i = "PUB;" + i), n = "Script$" + i + "@tv-scripting", o = u.indexOf(n), -1 !== o && (u.splice(o, 1), e(), TVXWindowEvents.emit("StudyFavoritesChanged", JSON.stringify(u)))
        }

        function s() {
            _ || ($(document.body).on("click", ".pubscript-button", function(t) {
                var e, i, s;
                t.preventDefault(), e = $(this), i = e.data("script-id-part"), i && (s = n(i), s ? r(i) : o(i), l())
            }), TVXWindowEvents.on("StudyFavoritesChanged", function(t) {
                u = JSON.parse(t), l()
            }), loginStateChange.subscribe(null, a), _ = !0), u || t(), l()
        }

        function a() {
            t(), l()
        }

        function l() {
            $(".pubscript-button").each(function() {
                var t = this,
                    e = $(t).data("script-id-part");
                e && c(t, !!n(e))
            })
        }

        function c(t, e) {
            var i = $(t),
                n = i.hasClass("active");
            e = 1 in arguments ? !!e : !n, e !== n && i.toggleClass("active", e)
        }

        function h(t) {
            var e = $.ajax({
                url: "/pubscripts-suggest-json/",
                type: "GET",
                data: {
                    search: t
                },
                dataType: "json"
            });
            return e.done(function(t) {
                if (t && t.results)
                    for (var e = 0; e < t.results.length; e++) p[t.results[e].scriptIdPart] = TradingView.clone(t.results[e])
            }), e
        }

        function d(t) {
            var e, i, n, o = $.Deferred(),
                r = [],
                s = [];
            for (e = 0; e < t.length; e++) i = t[e], ("number" == typeof i || /^\d+$/.test(i)) && (i = "PUB;" + i), p[i] ? r.push(TradingView.clone(p[i])) : s.push(i);
            return s.length ? (n = $.ajax({
                url: "/pubscripts-get/",
                type: "POST",
                data: {
                    scriptIdPart: s.join(",")
                },
                dataType: "json"
            }), n.done(function(t) {
                var e, i;
                t = t || [];
                for (e in t) i = t[e], p[i.scriptIdPart] = TradingView.clone(i), r.push(i);
                o.resolve(r)
            }).fail(function() {
                o.reject()
            }), o) : o.resolve(r).promise()
        }
        var u = null,
            p = {},
            f = "studyMarket.favorites",
            _ = !1;
        return {
            initButtons: s,
            suggest: h,
            info: d
        }
    }();
    t.exports = i
}, function(t, e) {
    "use strict";
    ! function(t) {
        if (document.createElement("canvas") && document.createElement("canvas").getContext) {
            var e = function(e) {
                var i = e.backingStorePixelRatio || e.webkitBackingStorePixelRatio || e.mozBackingStorePixelRatio || e.msBackingStorePixelRatio || e.oBackingStorePixelRatio || e.backingStorePixelRatio || 1;
                return (t.devicePixelRatio || 1) / i
            }(document.createElement("canvas").getContext("2d"));
            2 > e || (t.hidpiCanvasRatio = e, function(t) {
                var i = function(t, e) {
                        for (var i in t) t.hasOwnProperty(i) && e(t[i], i)
                    },
                    n = {
                        fillRect: "all",
                        clearRect: "all",
                        strokeRect: "all",
                        moveTo: "all",
                        lineTo: "all",
                        arc: [0, 1, 2],
                        arcTo: "all",
                        bezierCurveTo: "all",
                        isPointinPath: "all",
                        isPointinStroke: "all",
                        quadraticCurveTo: "all",
                        rect: "all",
                        translate: "all",
                        createRadialGradient: "all",
                        createLinearGradient: "all",
                        drawImagePatchedSource: [1, 2, 3, 4],
                        drawImagePatchedSourceAndDest: [1, 2, 3, 4, 5, 6, 7, 8]
                    };
                t.drawImagePatchedSource = t.drawImage, t.drawImagePatchedSourceAndDest = t.drawImage, i(n, function(i, n) {
                    var o = t[n];
                    t[n] = function() {
                        var t, n;
                        if ("all" === i)
                            for (n = [], t = arguments.length; 0 < t--;) n[t] = arguments[t] * e;
                        else
                            for (n = Array.prototype.slice.call(arguments), t = i.length; 0 < t--;) n[i[t]] && (n[i[t]] = n[i[t]] * e);
                        return o.apply(this, n)
                    }
                }), t.drawImage = function(t) {
                    return function() {
                        return arguments[0] instanceof HTMLCanvasElement ? t.drawImagePatchedSourceAndDest.apply(this, arguments) : t.drawImagePatchedSource.apply(this, arguments)
                    }
                }(t), t.fillText = function(t) {
                    return function() {
                        var i = Array.prototype.slice.call(arguments);
                        i[1] *= e, i[2] *= e, this.font = this.font.replace(/(\d+)(px|em|rem|pt)/g, function(t, i, n) {
                            return i * e + n
                        }), t.apply(this, i), this.font = this.font.replace(/(\d+)(px|em|rem|pt)/g, function(t, i, n) {
                            return i / e + n
                        })
                    }
                }(t.fillText), t.strokeText = function(t) {
                    return function() {
                        var i = Array.prototype.slice.call(arguments);
                        i[1] *= e, i[2] *= e, this.font = this.font.replace(/(\d+)(px|em|rem|pt)/g, function(t, i, n) {
                            return i * e + n
                        }), t.apply(this, i), this.font = this.font.replace(/(\d+)(px|em|rem|pt)/g, function(t, i, n) {
                            return i / e + n
                        })
                    }
                }(t.strokeText)
            }(CanvasRenderingContext2D.prototype), function(t) {
                t.getContext = function(t) {
                    return function(i) {
                        var n = t.call(this, i);
                        return "2d" === i && this.width != Math.floor(parseInt(this.style.width) * e) && (this.style.height = this.height + "px", this.style.width = this.width + "px", this.width *= e, this.height *= e), n
                    }
                }(t.getContext)
            }(HTMLCanvasElement.prototype))
        }
    }(window)
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        e ? t.addClass("process") : t.removeClass("process")
    }

    function o(t) {
        var e, i;
        return l ? (e = ChartApiInstance.connect({
            tokenGrabSession: t
        }), l = !1, s && (i = s.find(".reconnect-button"), n(i, !0), e.done(function() {
            TradingView.trackEvent("Auth", "Different Device Active Recovery"), TVDialogs.destroy(), s = void 0
        }).fail(function() {
            n(i, !1), l = !0
        })), e) : void 0
    }

    function r(t) {
        if (!l) {
            var e = !0;
            ChartApiInstance && (e = ChartApiInstance.disconnect(!0)), e && (TradingView.trackEvent("Auth", "Different Device Active Dialog"), l = !0, s = TVDialogs.showSessionLockDialog(t, function(t) {
                var e, i = $(t.target);
                i.hasClass("process") || (e = o(!0), e && e.done(function() {
                    TVXWindowEvents.emit("session_captured")
                }))
            }))
        }
    }
    var s, a = i(313),
        l = !1,
        c = 0;
    TVXWindowEvents.on("session_captured", function() {
        o()
    }), a.on("auth", function(t) {
        var e, i;
        if (is_authenticated && user && user.session_hash && "active_session_changed" === t.type && t.timestamp > c) {
            for (c = t.timestamp, e = !1, i = t.active_sessions.length - 1; i >= 0; i--) user.session_hash === t.active_sessions[i] && (e = !0);
            e ? s && o() : r(t.device_info)
        }
    })
}, function(t, e, i) {
    (function(t, e) {
        "use strict";
        var n = i(350),
            o = n.BanUserDialog,
            r = n.UnbanUserDialog,
            s = i(351).PMSendingAgent,
            a = i(352);
        $(function() {
            var n, l = function() {
                function e() {
                    p && (clearTimeout(p), p = null)
                }

                function n() {
                    return !!d && jQuery.contains(document.body, d[0])
                }

                function s(t) {
                    var e, i;
                    return d ? (e = n(), e || d.css("position", "fixed").appendTo(document.body), i = d[t](), e || d.css("position", "").detach(), i) : 0
                }
                var l, c, h, d, u, p, f, _ = !1;
                return {
                    sendMessage: function() {
                        var t = d.find('[name="message-text"]'),
                            e = (t.val() + "").replace(/^\s+|\s+$/g, "");
                        return e ? (TradingView.messagesWidget.sendMessageToUser(e, c.id), void this.close()) : void t.css("border-color", "#E0735E").focus()
                    },
                    isActiveTarget: function(t) {
                        return d && h && h.is(t)
                    },
                    isSameUser: function(t) {
                        var e = t.data();
                        return e && c && e.id === c.id
                    },
                    update: function(n, s) {
                        var a, p, _, g, m, v, y, w, b;
                        return this.isActiveTarget(n) || this.isSameUser(n) ? (e(), this) : (u && this.close(), c = s || n.data(), c.large_badge = !0, c.is_self = c.username === window.user.username, c.current_user_is_staff = window.user.is_staff, c.show_add_status_btn = !window.user.status && is_authenticated, c.show_buttons = !TradingView.userlinkPopupHideButtons, c.is_realtime = c.is_pro && "pro_realtime" === c.pro_plan, c.is_premium = c.is_pro && "pro_premium" === c.pro_plan, c.is_trial = c.is_pro && "pro_realtime_trial" === c.pro_plan, h = n, a = i(18), p = t.render(a.userlinkPopup, c, a), d = $(p).on("mouseenter", function() {
                            e()
                        }).on("mouseleave", function(t) {
                            l || $(t.target).is(".content") || this.close(f || 500)
                        }.bind(this)), d.find(".userlink").removeClass("userlink"), c.is_self || !h.hasClass("ch-userlink") && !h.hasClass("ch-item-userpic") || (_ = h.closest(".ch-item"), _.length && !_.data("ch-is-standalone") && (g = h, m = $('<div class="ignore-ban-wrapper"></div>').appendTo(d.find(".content .username")), v = !!user.ignore_list[c.id], y = c.is_staff ? null : $('<a href="#" class="ch-ignore-lnk' + (v ? " active" : "") + '">').text(v ? $.t("Unignore") : $.t("Ignore")).click(c, function(t) {
                            t.preventDefault(), v ? $.post("/conversation-ignore/", {
                                user_id: t.data.id,
                                action: "remove"
                            }, function(e) {
                                return e.error ? void TVDialogs.showNotice($.t("Error"), e.error) : (delete user.ignore_list[t.data.id], window.crossTabSyncUserAttr("ignore_list"), d && (d.find(".ch-ignore-lnk").removeClass("active").text($.t("Ignore")), v = !1), void g.trigger("userignorechange", !1))
                            }) : TVDialogs.showConfirm($.t("Confirm"), $.t("Are you sure you want to ignore messages from __username__?", {
                                username: t.data.username
                            }), function() {
                                $.post("/conversation-ignore/", {
                                    user_id: t.data.id,
                                    username: t.data.username
                                }, function(e) {
                                    return e.error ? void TVDialogs.showNotice($.t("Error"), e.error) : (user.ignore_list[t.data.id] = t.data.username, window.crossTabSyncUserAttr("ignore_list"), void g.trigger("userignorechange", !0))
                                })
                            })
                        }), w = !!c.is_banned, b = user.is_staff && !c.is_staff ? $('<a href="#" class="ch-ban-lnk' + (w ? " active" : "") + '">').text(w ? $.t("Unban") : $.t("Ban")).click(c, function(t) {
                            var e, i;
                            t.preventDefault(), w ? (e = new r(c.id, c.username, function() {
                                d && (d.find(".ch-ban-lnk").removeClass("active").text($.t("Ban")), w = !1), g.trigger("userbanchange", !1)
                            }), e.show()) : (c.user_id = c.id, i = new o("", t.data, {
                                modal: !0
                            }, function() {
                                g.trigger("userbanchange", !0)
                            }), i.show())
                        }) : null, y && y.appendTo(m), y && b && $("<span>&thinsp;|&thinsp;</span>").appendTo(m), b && b.appendTo(m))), this)
                    },
                    setForm: function() {
                        return d.on("keyup", function(t) {
                            27 === t.which && this.close()
                        }.bind(this)).addClass("form-layout"), d.find('[name="message-text"]').focus(), d.find("textarea").on("keyup", function(t) {
                            13 === t.which && t.ctrlKey && this.sendMessage()
                        }.bind(this)), d.find(".message-user.send").on("click", this.sendMessage.bind(this)), d.find(".message-user.cancel").on("click", this.close.bind(this)), l = !0, this
                    },
                    open: function() {
                        var t, i, o, r;
                        return e(), u || !d ? (l && d.css({
                            top: .45 * $(window).height() + $(document).scrollTop(),
                            left: ""
                        }), this) : (n() || d.css("position", "fixed").appendTo(document.body), t = 0, i = 0, o = s("width"), r = s("height"), l ? (t = .45 * $(window).height() + $(document).scrollTop(), i = "") : (t = h.offset().top - r, t - $(document).scrollTop() < 0 && (t = h.offset().top + h.height()), i = h.offset().left - 20, i + o > $(window).width() && (i = $(window).width() - o)), d.css({
                            position: "",
                            top: t,
                            left: i
                        }).hide(), _ = !0, d.fadeIn("fast", function() {
                            _ = !1, l && d.find('[name="message-text"]').focus(), c && c.btc_address && new a(c.btc_address, d.find(".btc-tip"), "br")
                        }), u = !0, this)
                    },
                    close: function(t) {
                        return !_ && t && "number" == typeof t ? (p = setTimeout(this.close, t), f = t, this) : (e(), u ? (d.remove(), d = h = c = null, u = l = !1, this) : this)
                    },
                    isForm: function() {
                        return l
                    },
                    getPosition: function() {
                        return d ? {
                            top: d.offset().top - $(window).scrollTop(),
                            left: d.offset().left - $(window).scrollLeft()
                        } : !1
                    }
                }
            }();
            $(document).on("mouseenter", ".userlink, .ch-userlink, .ch-item-userpic, .js-userlink", function() {
                var t, i, o, r;
                if (!e.enabled("disable_userlink_popup") && !l.isForm()) {
                    if (t = $(this), l.isActiveTarget(t)) return void l.open();
                    i = t.data("username") || t.text(), o = "/u/" + i + "/info/", r = {
                        type: "POST",
                        success: function(e) {
                            e && !e.error && l.update(t, e).open()
                        }
                    }, ($.browser.msie || /\btrident\b/i.test(navigator.userAgent)) && (r.cache = !1), n = $.ajax(o, r)
                }
            }).on("mouseleave", ".userlink, .ch-userlink, .ch-item-userpic, .js-userlink", function() {
                l.isForm() || (n && n.abort(), l.close(500))
            }).on("click", "button.message-user.message, button.profile-action.profile-message", function() {
                var t = $(this),
                    e = {
                        animate: !0
                    };
                t.hasClass("profile-message") || (e.animateFrom = l.getPosition()), runOrSignIn(function() {
                    l.close(), TVDialogs.showSendMessageDialog(new s({
                        userID: t.data("id"),
                        username: t.data("username")
                    }), e)
                }, {
                    source: "Private message from userlink popup",
                    verifiedPhoneRequired: !0,
                    verifyPhoneMessage: $.t("Verified phone number required to send private messages.")
                })
            })
        })
    }).call(e, i(86), i(3))
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function i(t, e, n, o) {
            this._message = t, this._data = e, this._options = n, this._banType = n && n.banType, this._callback = o, this._dialogTitle = $.t("Ban __username__", {
                username: this._data.username
            }), this._violations = i.getViolations().map(function(t) {
                return {
                    id: t.id,
                    name: t.name
                }
            }), this._banDurations = [{
                value: 0,
                text: $.t("Warning")
            }, {
                value: 1,
                text: $.t("{0} minute").format(1)
            }, {
                value: 5,
                text: $.t("{0} minutes").format(5)
            }, {
                value: 10,
                text: $.t("{0} minutes").format(10)
            }, {
                value: 30,
                text: $.t("{0} minutes").format(30)
            }, {
                value: 60,
                text: $.t("{0} hour").format(1)
            }, {
                value: 180,
                text: $.t("{0} hours").format(3)
            }, {
                value: 720,
                text: $.t("{0} hours").format(12)
            }, {
                value: 1440,
                text: $.t("{0} day").format(1)
            }, {
                value: 4320,
                text: $.t("{0} days").format(3)
            }, {
                value: 10080,
                text: $.t("1 week")
            }, {
                value: -1,
                text: $.t("Permanently")
            }], this._banTypes = {
                chat: $.t("Public chats"),
                pm: $.t("Private messages"),
                comments: $.t("Idea comments"),
                ideas: $.t("Ideas publishing"),
                status: $.t("Status updates")
            }
        }

        function n(t, e, i) {
            this._id = t, this._username = e, this._callback = i
        }
        i.getViolations = function() {
            return i._violations || (i._violations = [{
                name: $.t("Multiple accounts"),
                text: $.t("Use only one account - registering with multiple accounts is not allowed."),
                id: "multi_acc"
            }, {
                name: $.t("Suspicious links"),
                text: $.t("No posting links or reference to content / sites that contain viruses or malware."),
                id: "links"
            }, {
                name: $.t("Hate speech"),
                text: $.t("No defamatory, threatening or discriminatory remarks, hate speech or personal attacks."),
                id: "hate_speech"
            }, {
                name: $.t("English only"),
                text: $.t("English only for main public chatrooms and public ideas - so that everyone can understand. Any language can be spoken in the custom chat rooms. Later we may introduce main public chatrooms for other languages."),
                id: "language"
            }, {
                name: $.t("Personal information"),
                text: $.t("Do not post offline personal contact information."),
                id: "personal_info"
            }, {
                name: $.t("Illicit content"),
                text: $.t("No links / posts with illegal content, pornography, or nudity."),
                id: "illicit_content"
            }, {
                name: $.t("Rights infringement"),
                text: $.t("Do not publish content that is not your original work, or infringes the copyright of any third party."),
                id: "copyright"
            }, {
                name: $.t("Unsolicited advertising"),
                text: $.t("No advertising, direct marketing, or solicitation! To engage our audience, drop us a line at __email__", {
                    email: "founders@tradingview.com"
                }),
                id: "ads"
            }, {
                name: $.t("Ð¡ontinued violation of chat & comment etiquette"),
                text: $.t("Continued violation of chat etiquette. For more information on this etiquette please go to __link__", {
                    link: "https://www.tradingview.com/house-rules/"
                }),
                id: "recidive"
            }]), i._violations
        }, i.prototype.getDurationText = function(t) {
            var e = $.grep(this._banDurations, function(e) {
                return e.value === t
            });
            return e.length ? e[0].text : $.t("Error")
        }, i.prototype.getBanType = function(t) {
            var e = t.map(function(t) {
                    return "comments" === t ? $.t("commenting") : "ideas" === t ? $.t("ideas and updates publishing") : this._banTypes[t].toLowerCase()
                }.bind(this)),
                i = e.length;
            switch (i) {
                case 1:
                    return e[0];
                case 2:
                    return $.t("__firstEnumerationItem__ and __secondEnumerationItem__", {
                        firstEnumerationItem: e[0],
                        secondEnumerationItem: e[1]
                    });
                case 3:
                    return $.t("__firstEnumerationItem__, __secondEnumerationItem__ and __thirdEnumerationItem__", {
                        firstEnumerationItem: e[0],
                        secondEnumerationItem: e[1],
                        thirdEnumerationItem: e[2]
                    });
                case 4:
                    return $.t("__firstEnumerationItem__, __secondEnumerationItem__, __thirdEnumerationItem__ and __fourthEnumerationItem__", {
                        firstEnumerationItem: e[0],
                        secondEnumerationItem: e[1],
                        thirdEnumerationItem: e[2],
                        fourthEnumerationItem: e[3]
                    })
            }
        }, i.prototype.prepareBanTypeCheckboxes = function(e) {
            var i, n = [],
                o = '<div class="checkbox-wrap"><label for="{{type}}">{{label}}</label><input type="checkbox" id="{{type}}" value="{{type}}" {{#checked}}checked{{/checked}}/></div>';
            for (i in this._banTypes) n.push(t.render(o, {
                type: i,
                label: this._banTypes[i],
                checked: i === e
            }));
            return n
        }, i.prototype.getCheckboxesValue = function() {
            return this._$form.find("input[type=checkbox]").toArray().filter(function(t) {
                return $(t).prop("checked")
            }).map(function(t) {
                return $(t).val()
            })
        }, i.prototype.submitSuccess = function(t, e, i) {
            var n, o;
            return 0 === e ? void TVDialogs.destroy(null) : (n = e >= 0 ? $.t("User __username__ was banned for __duration__.", {
                username: t,
                duration: this.getDurationText(e)
            }) : $.t("User __username__ was banned permanently.", {
                username: t
            }), o = n + " " + $.t("Violation that caused the ban: __violation__.", {
                    violation: i.toLowerCase()
                }), this._$container.html("<p>" + o + '</p><table><tbody><tr><td class="buttons" colspan="2"><input class="_tv-button ok" type="button" value="OK"></td></tr></tbody></table>'), this._$container.find("input[type=button].ok").click(function() {
                TVDialogs.destroy(null)
            }), void(this._callback && this._callback(e, this.getDurationText(e))))
        }, i.prototype.submit = function() {
            var t, e, i, n = this._data.username,
                o = this._$banDurationInput.val(),
                r = this._$descriptionInput.val().trim(),
                s = this._$violationTypeInput.val(),
                a = this.getCheckboxesValue(),
                l = !1;
            "none" === s && (this._$violationTypeInput.parent().find(".tv-select-container").addClass("error"), l = !0), "none" === o && (this._$banDurationInput.parent().find(".tv-select-container").addClass("error"), l = !0), a.length || "0" === o || (this._$form.find(".checkboxes-wrap").animate({
                "background-color": "#f7e4e6"
            }, "fast").animate({
                "background-color": "#fff"
            }), l = !0), l || (t = this._violations.filter(function(t) {
                return t.id === s
            })[0].name, o = parseInt(o),
                e = this, i = {
                user_id: this._data.user_id,
                duration: o,
                "ban[]": a,
                violation: s
            }, $.post("/ban-user/", i, function(i) {
                return i.error ? void TVDialogs.showNotice("Error", i.error) : (e.sendMessage(n, o, r, t, a), void e.submitSuccess(n, o, t))
            }))
        }, i.prototype.sendMessage = function(t, e, i, n, o) {
            var r, s, a = $.t("More info - __link__.", {
                link: "https://www.tradingview.com/house-rules/"
            });
            r = 0 === e ? $.t("You have received a warning for violating our House Rules. You are not banned, you may be if you violate the rules again.") : e > 0 ? $.t("You are banned from __banType__ for __duration__ for violating our House Rules.", {
                duration: this.getDurationText(e),
                banType: this.getBanType(o)
            }) : $.t("You are permanently banned from __banType__ for violating our House Rules.", {
                banType: this.getBanType(o)
            }), s = r + " " + a + "\n" + $.t("Violated house rule: __violation__.", {
                    violation: n.toLowerCase()
                }) + "\n" + (i ? $.t("Content that caused the ban:") + "\n" + i + "\n\n" : "\n") + $.t("If you have questions or suggestions, reply to this message."), TradingView.messagesWidget.sendMessageToUser(s, this._data.user_id)
        }, i.prototype.prepareLayout = function() {
            var t = this,
                e = Date.now().toString(36);
            $('<p class="ban-dialog-description">' + $.t("Read this every time before banning someone! Our goal is to keep a healthy, constructive and useful dialog open in the chatrooms. Sending a private message with a warning is enough to solve 99% of the issues. If that doesnâ€™t help, <strong>start with a one-minute ban</strong>.") + "</p>").appendTo(this._$container), this._$form = $("<form>").appendTo(this._$container), $('<table><tbody><tr class="checkboxes-wrap"><td colspan="4">' + this.prepareBanTypeCheckboxes(this._banType).join("") + '</td></tr><tr><td><label for="violation-type-' + e + '">' + $.t("Violated house rule:") + '</label></td><td class="three-quarters" colspan="3"><select id="violation-type-' + e + '" name="violation-type"><option value="none" selected disabled>' + $.t("Select violation...") + "</option>" + this._violations.map(function(t) {
                    return '<option value="' + t.id + '">' + t.name + "</option>"
                }).join() + '</select></td></tr><tr><td><label for="ban-duration-' + e + '">' + $.t("Ban duration:") + '</label></td><td class="three-quarters" colspan="3"><select id="ban-duration-' + e + '" name="ban-duration">' + this._banDurations.map(function(t) {
                    return '<option value="' + t.value + '">' + t.text + "</option>"
                }).join() + '</select></td></tr><tr><td class="full-row" colspan="4"><label for="description-' + e + '">' + $.t("Quote the message which caused the ban along with additional comments if any (a private message with this information will be sent to the user from your account):") + '</label></td></tr><tr><td colspan="4"><textarea id="description-' + e + '" name="description">' + this._message + '</textarea></td></tr><tr><td class="buttons" colspan="4"><input class="_tv-button ok" type="submit" value="' + $.t("OK") + '"><input class="_tv-button cancel" type="button" value="' + $.t("Cancel") + '"></td></tr></tbody></table>').appendTo(this._$form), t = this, this._$form.find("#ban-duration-" + e + " option").first().attr("selected", "selected"), this._$violationTypeInput = this._$form.find("select[name=violation-type]"), this._$banDurationInput = this._$form.find("select[name=ban-duration]"), this._$descriptionInput = this._$form.find("textarea[name=description]"), this._$banTypesCheckboxes = this._$form.find(".checkboxes-wrap"), this._$violationTypeInput.selectbox({
                speed: 100,
                classHolder: "tv-select-container dialog placeholder"
            }).change(function() {
                t._$violationTypeInput.parent().find(".tv-select-container").toggleClass("placeholder", "none" === t._$violationTypeInput.val())
            }), this._$banDurationInput.selectbox({
                speed: 100,
                classHolder: "tv-select-container dialog"
            }).change(function() {
                t._$banTypesCheckboxes.toggleClass("visible", "0" !== t._$banDurationInput.val())
            }), this._$form.find("input[type=button].cancel").click(function() {
                TVDialogs.destroy(t._options.modal === !0 ? null : t._dialogTitle)
            }), this._$form.on("input change", function() {
                $(this).find(".error").removeClass("error")
            }).submit(function(e) {
                e.preventDefault(), t.submit()
            })
        }, i.prototype.show = function() {
            var t = TVDialogs[this._options.modal === !0 ? "createModalDialog" : "createDialog"](this._dialogTitle, {
                addClass: "ban-user-dialog"
            });
            this._$container = t.find("._tv-dialog-content"), this.prepareLayout(), t.css("min-width", 0), TVDialogs.applyHandlers(t, {
                notFocusFirst: !0
            }), TVDialogs.positionDialog(this._options.modal === !0 ? null : t)
        }, n.prototype.show = function() {
            var t = this;
            $.get("/ban-status/", {
                user_id: t._id
            }, function(e) {
                var i, n, o, r, s;
                return e.error ? void TVDialogs.showNotice($.t("Error"), e.error) : (i = $.t("Unban __username__", {
                    username: t._username
                }), n = TVDialogs.createModalDialog(i, {
                    addClass: "ban-user-dialog"
                }), o = n.find("._tv-dialog-content"), r = !1, s = $("<p>"), e.duration < 0 ? s.html($.t("__username__ is <strong>permanently</strong> banned. Do you want to unban __username__?", {
                    username: t._username
                })) : s.html($.t("__username__'s ban expires in <strong>__duration__</strong>. Do you want to unban __username__?", {
                    username: t._username,
                    duration: e.expires_in.trim()
                })), s.appendTo(o), $('<table><tbody><tr><td colspan="4"><textarea id="unban-reason" name="unban-reason" placeholder="' + $.t("Specify why the ban was lifted") + '"></textarea></td></tr><tr><td class="buttons" colspan="2"><input class="_tv-button ok" type="button" value="' + $.t("OK") + '"><input class="_tv-button cancel" type="button" value="' + $.t("Cancel") + '"></td></tr></tbody></table>').appendTo(o), o.find("input[type=button].cancel").click(function() {
                    TVDialogs.destroy(null)
                }), o.find("input[type=button].ok").click(function() {
                    r ? TVDialogs.destroy(null) : $.post("/ban-user/", {
                        user_id: t._id,
                        action: "unban",
                        reason: o.find("#unban-reason").val().trim()
                    }, function(e) {
                        return e.error ? void TVDialogs.showNotice($.t("Error"), e.error) : (t._callback.call(), r = !0, o.find("p").text($.t("User __username__ was unbanned.", {
                            username: t._username
                        })), o.find("input[type=button].cancel").remove(), o.find("#unban-reason").remove(), void 0)
                    })
                }), n.css("min-width", 0), TVDialogs.applyHandlers(n, {
                    notFocusFirst: !0
                }), TVDialogs.positionDialog(null), void 0)
            })
        }, e.BanUserDialog = i, e.UnbanUserDialog = n
    }).call(e, i(86))
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function i(t, e) {
            this.data = t, this.options = e
        }

        function n(t, e) {
            this.data = t, this.options = e
        }

        function o(t, e) {
            switch (this.data = t, this.options = e || {}, this.fullURL = window.location.protocol + "//" + window.location.host, t.entityType) {
                case "message":
                    this.entityString = $.t("message"), this.fullURL += "/chat/m/" + t.entityURL + "/";
                    break;
                case "comment":
                    this.entityString = $.t("comment"), this.fullURL += t.entityURL + "#tc" + t.entityID
            }
        }

        function r() {
            TVDialogs.showSendMessageDialog(new n, {
                customTitle: !0,
                customFocus: !0
            })
        }

        function s(t, e, n) {
            TVDialogs.showSendMessageDialog(new i({
                userID: t,
                username: e
            }, {
                defaultMessage: !0,
                template: "not_suggested",
                templateParams: {
                    chart: window.location.protocol + "//" + window.location.host + n
                }
            }))
        }

        function a(t, e, n, o) {
            TVDialogs.showSendMessageDialog(new i({
                userID: t,
                username: e
            }))
        }

        function l(e, i, n, r, s, a) {
            var l = new o({
                    username: e,
                    entityType: i,
                    entityURL: n,
                    entityText: r,
                    entityID: s
                }, a),
                c = "<strong>" + e + "</strong>",
                h = l.getTitle(),
                d = '<a href="/house-rules/" target="_blank">' + $.t("House Rules") + "</a>",
                u = l.getText(),
                p = t.render('<div class="report-abuse-warning"><span>{{{warningText}}}</span></div><div class="message"><textarea disabled rows="7" id="message-text">{{text}}</textarea></div>', {
                    warningText: $.t("You can send report to moderators. The message from __user__ will be checked. If the message contains anything that violates our __rulesLink__, the message will be removed and its author will be penalized. Please note that if you send false report to moderators, we may apply similar measures to you. Thank you for your help!", {
                        user: c,
                        rulesLink: d
                    }),
                    text: u
                });
            TVDialogs.showCustomDialog({
                title: h,
                addClass: "report-user-dialog",
                width: 600,
                html: p,
                okButtonText: $.t("Report"),
                action: function(t) {
                    l.send(u)
                }
            })
        }
        i.prototype.send = function(t) {
            TradingView.messagesWidget.sendMessageToUser(t, this.data.userID)
        }, i.prototype.getTitle = function() {
            return $.t("To: <strong>__username__</strong>", {
                username: this.data.username
            })
        }, i.prototype.getText = function() {
            return this.options && this.options.defaultMessage ? this.getDefaultMessage(this.options.template, this.options.templateParams) : ""
        }, i.prototype.validate = function(t) {
            return t.length > 0
        }, i.prototype.getDefaultMessage = function(t, e) {
            switch (t) {
                case "not_suggested":
                    return $.t("Hi,\n\nI'm a moderator for TradingView. I reviewed your idea at __chart__ and had to mark it as \"Not Suggested\" because it doesn't comply with our House Rules https://www.tradingview.com/house-rules/.\n\nPay attention to these rules to get into the Suggested stream more often, or even become a Suggested Author. Please let me know if you have any questions, will be happy to help.", e)
            }
        }, n.prototype.send = function(t) {
            TradingView.messagesWidget.sendMessageToUser(t, this.userID)
        }, n.prototype.getTitle = function() {
            return "<span>" + $.t("To:") + '</span><input type="text" class="custom-title-new-chat-input"></input><span class="custom-title-new-chat-username"></span>'
        }, n.prototype.getText = function() {
            return ""
        }, n.prototype.applyCustomTitleHandlers = function(t) {
            this.$usernameInput = t.find(".custom-title-new-chat-input"), this.$username = t.find(".custom-title-new-chat-username"), this.$textInput = t.find(".message textarea");
            var e = t.find(".custom-title");
            this.usernameHintList = new TradingView.UsernameHintList({
                $container: e,
                simpleMode: !0,
                $input: this.$usernameInput,
                maxItems: 20,
                onItemSelected: this.onUsernameSelected.bind(this),
                style: {
                    left: 0,
                    top: this.$usernameInput.closest(".header").outerHeight() + 1
                }
            })
        }, n.prototype.onUsernameSelected = function(t) {
            this.$usernameInput.hide(), this.userID = t.id, this.$username.html("<strong>" + t.username + "</strong>"), this.$username.show(), this.$textInput.putCursorAtEnd()
        }, n.prototype.getInvalidInputHandlers = function(t) {
            return {
                invalidMessage: t["default"],
                invalidTitle: function() {
                    this.$usernameInput.css("background-color", "#DDAAAA").animate({
                        "background-color": "#fff"
                    })
                }.bind(this)
            }
        }, n.prototype.customValidate = function(t) {
            var e = [];
            return t.length || e.push("invalidMessage"), this.userID || e.push("invalidTitle"), e
        }, n.prototype.customFocus = function(t) {
            this.$usernameInput.focus()
        }, n.prototype.validate = function(t) {
            return this.userID && t.length > 0
        }, o.prototype.send = function(t) {
            var e = {
                is_report: !0,
                meta: JSON.stringify({
                    text: "",
                    report_type: this.data.entityType
                }),
                text: t
            };
            $.post("/conversation-post/", e)
        }, o.prototype.getTitle = function() {
            return $.t("Report {0} from <strong>{1}</strong> to moderators").format(this.entityString, this.data.username)
        }, o.prototype.getText = function() {
            var t = $.t("Reported {0} from @{1}, {2}").format(this.entityString, this.data.username, this.fullURL);
            return this.options.additionalText && (t += "\n" + this.options.additionalText), t + "\n\n" + this.data.entityText
        }, o.prototype.validate = function(t) {
            return t.length > 0
        }, e.PMSendingAgent = i, e.openReportDialog = l, e.openPMDialog = a, TradingView.noteForAuthor = s, e.noteForAuthor = s, e.newPrivateChatDialog = r, e.ReportSendingAgent = o, e.NewPrivateChatAgent = n
    }).call(e, i(86))
}, function(t, e, i) {
    "use strict";

    function n(t, e, i) {
        if (e && e.length) {
            var n = {
                wallet_address: t,
                currency: "bitcoin",
                counter: "hide",
                alignment: i || "bl",
                qrcode: !0,
                auto_show: !1,
                lbl_button: "Tips",
                lbl_address: "My Bitcoin Address:",
                lbl_count: "donations",
                lbl_amount: "BTC"
            };
            s.config[r] = n, s.loader.jquery(), e.html('<span data-coinwidget-instance="' + r + '" class="COINWIDGETCOM_CONTAINER"></span>'), r++, s.build()
        }
    }
    var o = i(353),
        r = o.CoinWidgetComCounter,
        s = o.CoinWidgetCom;
    window.CoinWidgetCom = s, t.exports = n
}, function(t, e) {
    "use strict";
    var i, n;
    "number" != typeof i && (i = 0), "object" != typeof n && (n = {
        source: "/static/js/external/coinwidget/",
        coinwidgetsource: "http://coinwidget.com/widget/",
        config: [],
        go: function(t) {
            var t = n.validate(t);
            n.config[i] = t, n.loader.jquery(), document.write('<span data-coinwidget-instance="' + i + '" class="COINWIDGETCOM_CONTAINER"></span>'), i++
        },
        validate: function(t) {
            var e = [];
            return e.currencies = ["bitcoin", "litecoin"], e.counters = ["count", "amount", "hide"], e.alignment = ["al", "ac", "ar", "bl", "bc", "br"], t.currency && n.in_array(t.currency, e.currencies) || (t.currency = "bitcoin"), t.counter && n.in_array(t.counter, e.counters) || (t.counter = "count"), t.alignment && n.in_array(t.alignment, e.alignment) || (t.alignment = "bl"), "boolean" != typeof t.qrcode && (t.qrcode = !0), "boolean" != typeof t.auto_show && (t.auto_show = !1), t.wallet_address || (t.wallet_address = "My " + t.currency + " wallet_address is missing!"), t.lbl_button || (t.lbl_button = "Donate"), t.lbl_address || (t.lbl_address = "My Bitcoin Address:"), t.lbl_count || (t.lbl_count = "Donation"), t.lbl_amount || (t.lbl_amount = "BTC"), ("number" != typeof t.decimals || t.decimals < 0 || t.decimals > 10) && (t.decimals = 4), t
        },
        init: function() {
            n.loader.stylesheet(), $(window).resize(function() {
                n.window_resize()
            }), setTimeout(function() {
                n.build()
            }, 800)
        },
        build: function() {
            var t = $("span[data-coinwidget-instance]");
            t.each(function(t, e) {
                var i = n.config[$(this).attr("data-coinwidget-instance")],
                    o = "hide" == i.counter ? "" : '<span><img src="' + n.source + 'icon_loading.gif" width="13" height="13" /></span>',
                    r = '<a class="COINWIDGETCOM_BUTTON_' + i.currency.toUpperCase() + '" href="#"><img src="' + n.source + "icon_" + i.currency + '.png" /><span>' + i.lbl_button + "</span></a>" + o;
                $(this).html(r), $(this).find("> a").unbind("click").click(function(t) {
                    t.preventDefault(), n.show(this)
                })
            }), n.counters()
        },
        window_resize: function() {
            $.each(n.config, function(t, e) {
                n.window_position(t)
            })
        },
        window_position: function(t) {
            var e, i, o, r = n.config[t],
                s = "#COINWIDGETCOM_WINDOW_" + t,
                a = "span[data-coinwidget-instance='" + t + "'] > a",
                l = $(a);
            if (l.length) {
                switch (e = l.offset(), r.alignment) {
                    default:
                    case "al":
                        i = e.top - $(s).outerHeight() - 10,
                            o = e.left;
                        break;
                    case "ac":
                        i = e.top - $(s).outerHeight() - 10,
                            o = e.left + l.outerWidth() / 2 - $(s).outerWidth() / 2;
                        break;
                    case "ar":
                        i = e.top - $(s).outerHeight() - 10,
                            o = e.left + l.outerWidth() - $(s).outerWidth();
                        break;
                    case "bl":
                        i = e.top + l.outerHeight() + 10,
                            o = e.left;
                        break;
                    case "bc":
                        i = e.top + l.outerHeight() + 10,
                            o = e.left + l.outerWidth() / 2 - $(s).outerWidth() / 2;
                        break;
                    case "br":
                        i = e.top + l.outerHeight() + 10,
                            o = e.left + l.outerWidth() - $(s).outerWidth()
                }
                $(s).is(":visible") ? $(s).stop().css({
                    top: i,
                    left: o
                }).show() : $(s).stop().css({
                    top: i,
                    left: o
                })
            }
        },
        counter: [],
        counters: function() {
            var t = [];
            $.each(n.config, function(e, i) {
                var n = e,
                    o = i;
                "hide" != o.counter ? t.push(n + "_" + o.currency + "_" + o.wallet_address) : o.auto_show && $("span[data-coinwidget-instance='" + e + "']").find("> a").click()
            }), t.length && n.loader.script({
                id: "COINWIDGETCOM_INFO" + Math.random(),
                source: n.coinwidgetsource + "lookup.php?data=" + t.join("|"),
                callback: function() {
                    "object" == typeof window.COINWIDGETCOM_DATA && (n.counter = window.COINWIDGETCOM_DATA, $.each(n.counter, function(t, e) {
                        var i = n.config[t];
                        e.count && null != e || (e = {
                            count: 0,
                            amount: 0
                        }), $("span[data-coinwidget-instance='" + t + "']").find("> span").html("count" == i.counter ? e.count : e.amount.toFixed(i.decimals) + " " + i.lbl_amount), i.auto_show && $("span[data-coinwidget-instance='" + t + "']").find("> a").click()
                    })), $("span[data-coinwidget-instance] > span img").length > 0 && setTimeout(function() {
                        n.counters()
                    }, 2500)
                }
            })
        },
        show: function(t) {
            var e, i, o, r, s, a = $(t).parent().attr("data-coinwidget-instance"),
                l = n.config[a],
                c = "#COINWIDGETCOM_WINDOW_" + a;
            if ($(".COINWIDGETCOM_WINDOW").css({
                    "z-index": 198
                }), $(c).length) {
                if ($(c).is(":visible")) return void n.hide(a)
            } else e = navigator.userAgent.match(/iPhone/i) ? "onclick=\"prompt('Select all and copy:','" + l.wallet_address + "');\"" : 'onclick="this.select();"', i = "<label>" + l.lbl_address + '</label><input type="text" readonly ' + e + '  value="' + l.wallet_address + '" /><a class="COINWIDGETCOM_CREDITS" href="http://coinwidget.com/" target="_blank">CoinWidget.com</a><a class="COINWIDGETCOM_WALLETURI" href="' + l.currency.toLowerCase() + ":" + l.wallet_address + '" target="_blank" title="Click here to send this address to your wallet\n(if your wallet is not compatible you will get an empty page,\nclose the white screen and copy the address by hand)" ><img src="' + n.source + 'icon_wallet.png" /></a><a class="COINWIDGETCOM_CLOSER" href="javascript:;" onclick="CoinWidgetCom.hide(' + a + ');" title="Close this window">x</a><img class="COINWIDGET_INPUT_ICON" src="' + n.source + "icon_" + l.currency + '.png" title="This is a ' + l.currency + ' wallet address." />', "hide" != l.counter && (i += '<span class="COINWIDGETCOM_COUNT">0<small>' + l.lbl_count + '</small></span><span class="COINWIDGETCOM_AMOUNT end">0.00<small>' + l.lbl_amount + "</small></span>"), l.qrcode && (i += '<img class="COINWIDGETCOM_QRCODE" data-coinwidget-instance="' + a + '" src="' + n.source + 'icon_qrcode.png" width="16" height="16" /><img class="COINWIDGETCOM_QRCODE_LARGE" src="' + n.source + 'icon_qrcode.png" width="111" height="111" />'), o = $("<div></div>"), $("body").append(o), o.attr({
                id: "COINWIDGETCOM_WINDOW_" + a
            }).addClass("COINWIDGETCOM_WINDOW COINWIDGETCOM_WINDOW_" + l.currency.toUpperCase() + " COINWIDGETCOM_WINDOW_" + l.alignment.toUpperCase()).html(i).unbind("click").bind("click", function() {
                $(".COINWIDGETCOM_WINDOW").css({
                    "z-index": 198
                }), $(this).css({
                    "z-index": 199
                })
            }), l.qrcode && $(c).find(".COINWIDGETCOM_QRCODE").bind("mouseenter click", function() {
                var t = n.config[$(this).attr("data-coinwidget-instance")],
                    e = $(this).parent().find(".COINWIDGETCOM_QRCODE_LARGE");
                return e.is(":visible") ? void e.hide() : void e.attr({
                    src: "/qr/?text=" + t.wallet_address
                }).show()
            }).bind("mouseleave", function() {
                var t = $(this).parent().find(".COINWIDGETCOM_QRCODE_LARGE");
                t.hide()
            });
            n.window_position(a), $(c).show(), r = $(c).find("input").position(), $(c).find("img.COINWIDGET_INPUT_ICON").css({
                top: r.top + 9,
                left: r.left + 9
            }), $(c).find(".COINWIDGETCOM_WALLETURI").addClass("apply-common-tooltip").css({
                top: r.top + 0,
                left: r.left + $(c).find("input").outerWidth() + 12
            }), "hide" != l.counter && (s = n.counter[a], null == s && (s = {
                count: 0,
                amount: 0
            }), null == s.count && (s.count = 0), null == s.amount && (s.amount = 0), $(c).find(".COINWIDGETCOM_COUNT").html(s.count + "<small>" + l.lbl_count + "</small>"), $(c).find(".COINWIDGETCOM_AMOUNT").html(s.amount.toFixed(l.decimals) + "<small>" + l.lbl_amount + "</small>")), "function" == typeof l.onShow && l.onShow()
        },
        hide: function(t) {
            var e = n.config[t],
                i = "#COINWIDGETCOM_WINDOW_" + t;
            $(i).fadeOut(), "function" == typeof e.onHide && e.onHide()
        },
        in_array: function(t, e) {
            for (var i = 0; i < e.length; i++)
                if (e[i] == t) return !0;
            return !1
        },
        loader: {
            loading_jquery: !1,
            script: function(t) {
                if (!document.getElementById(t.id)) {
                    var e = document.createElement("script");
                    e.onreadystatechange = function() {
                        switch (this.readyState) {
                            case "complete":
                            case "loaded":
                                t.callback()
                        }
                    }, e.onload = function() {
                        t.callback()
                    }, e.src = t.source, e.id = t.id, document.lastChild.firstChild.appendChild(e)
                }
            },
            stylesheet_loaded: !1,
            stylesheet: function() {
                if (!n.loader.stylesheet_loaded) {
                    n.loader.stylesheet_loaded = !0;
                    var t = $("<link/>");
                    $("head").append(t), t.attr({
                        id: "COINWIDGETCOM_STYLESHEET",
                        rel: "stylesheet",
                        type: "text/css",
                        href: n.source + "coin.css"
                    })
                }
            },
            jquery: function() {
                if (!window.jQuery && !n.loader.loading_jquery) {
                    var t = "file:" == window.location.protocol ? "http:" : "";
                    return void n.loader.script({
                        id: "COINWIDGETCOM_JQUERY",
                        source: t + "//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js",
                        callback: function() {
                            n.init()
                        }
                    })
                }
                n.init()
            }
        }
    }), e.CoinWidgetComCounter = i, e.CoinWidgetCom = n
}, function(t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = {};
    e["default"] = i, t.exports = e["default"]
}, function(t, e, i) {
    (function(e, n, o) {
        "use strict";

        function r(t, e) {
            e = e || s.widgetConfig;
            var i = (e[t] || 0).title;
            return !i && t && (i = ("" + t).match(/[A-Z]{2,}|\d+(?:\.\d+)?|[A-Z]?[a-z]+/g).join(" ").replace(/^.|\s./g, function(t) {
                return t.toUpperCase()
            })), i || void 0
        }

        function s(t, e) {
            if (!(this instanceof s)) return new s(t, e);
            switch (t || (t = {}), this.widgetConfig = $.extend(!0, {}, s.widgetConfig), e && (this.widgetConfig = $.extend(!0, this.widgetConfig, e)), this.layout = new a({
                widgetBar: this
            }), this._customization = t.customization, isFinite(t.overlayThreshold) && (this.layout.OVERLAY_THRESHOLD = +t.overlayThreshold), t.chartWidgetCollection && (this.chartWidgetCollection = t.chartWidgetCollection), t.state ? this.layout.demarshal(t.state) : t.settingsPrefix && (this._settingsPrefix = t.settingsPrefix + "", this.loadFromTVSettings()), t.readonly && (this.readonly = !0), t.fixedMode && (this.fixedMode = !0), t.layoutPosition) {
                case "horizontal":
                    this.layoutPosition = t.layoutPosition;
                    break;
                default:
                    this.layoutPosition = "vertical"
            }
            this.fullscreen = !!t.fullscreen, t.showCloseButton && (this.showCloseButton = !0), this.$container = $(document.body), t.container && (this.$container = $(t.container).eq(0), this.$container.size() < 1 && delete this.$container), this.createHTML(), this.initLayout(), TradingView.onWidget() || TradingView.isMobileView || "vertical" !== this.layoutPosition || (this.createBugReportButton(), this.createHelpButton()), $(window).on("resize", this.onWindowResize.bind(this)), $(window).on("visibilitychange", this.onVisibilityChange.bind(this)), loginStateChange.subscribe(this, this.onLoginStateChange)
        }

        function a(t) {
            this.pages = [], t && t.widgetBar && Object.defineProperty(this, "widgetBar", {
                value: t.widgetBar,
                configurable: !0
            })
        }

        function l(t) {
            this.widgets = [], t && t.widgetBarLayout && Object.defineProperty(this, "widgetBarLayout", {
                value: t.widgetBarLayout,
                configurable: !0
            })
        }

        function c(t) {
            t && t.widgetBarPage && Object.defineProperty(this, "widgetBarPage", {
                value: t.widgetBarPage,
                configurable: !0
            }), this.watchedHeight = new o, this.watchedWidth = new o, this.widgetActive = new o, this.widgetMaximized = new o
        }

        function h(t) {
            t && t.settingsKey && (this._settingsKey = t.settingsKey, this._value = TVSettings.getJSON(this._settingsKey, null)), t && t.widgetBarWidget && Object.defineProperty(this, "widgetBarWidget", {
                value: t.widgetBarWidget,
                configurable: !0
            })
        }
        var d = "widgetbar",
            u = i(356),
            p = i(354),
            f = i(16);
        s.widgetConfig = {
            dfx_calendar: {
                title: $.t("Economic Calendar"),
                ctor: null,
                lazyLoad: !0,
                icon: "economic-calendar"
            },
            earnings_calendar: {
                title: $.t("Earnings Calendar"),
                ctor: null,
                lazyLoad: !0,
                icon: "earnings-calendar"
            },
            watchlist: {
                title: $.t("Watchlist"),
                ctor: null,
                lazyLoad: !0,
                chartWidgetAllowed: !0
            },
            hotlist: {
                title: $.t("Hotlist"),
                ctor: null,
                lazyLoad: !0,
                chartWidgetAllowed: !0
            },
            detail: {
                title: $.t("Details"),
                ctor: null,
                lazyLoad: !0,
                chartWidgetAllowed: !0
            },
            news: {
                title: $.t("News"),
                ctor: null
            },
            chat: {
                title: $.t("Talks"),
                ctor: null,
                chartWidgetAllowed: !0,
                doNotClearNotifications: !0
            },
            messages: {
                title: $.t("Recent Chats"),
                ctor: null,
                chartWidgetAllowed: !0,
                doNotClearNotifications: !0
            },
            messages_with_select: {
                title: $.t("Recent Chats"),
                ctor: null,
                chartWidgetAllowed: !0,
                doNotClearNotifications: !0,
                options: {
                    layoutWithSelect: !0
                },
                emptyHeader: !0
            },
            notifications_user: {
                title: $.t("Notifications"),
                ctor: null,
                options: {
                    type: "user"
                }
            },
            notifications_following: {
                title: $.t("Ideas Stream"),
                ctor: null,
                options: {
                    type: "following"
                }
            },
            datawindow: {
                title: $.t("Data Window"),
                ctor: null,
                chartWidgetAllowed: !0,
                chartWidgetRequired: !0
            },
            publicchats: {
                title: $.t("All Talks"),
                ctor: null,
                doNotClearNotifications: !0
            },
            publicchats_with_select: {
                title: $.t("All Talks"),
                ctor: null,
                doNotClearNotifications: !0,
                options: {
                    layoutWithSelect: !0
                },
                emptyHeader: !0
            },
            notes: {
                title: $.t("My Ideas"),
                ctor: null,
                lazyLoad: !0,
                chartWidgetAllowed: !0
            },
            alerts_manage: {
                title: $.t("Manage Alerts"),
                ctor: null,
                chartWidgetAllowed: !0
            },
            alerts_log: {
                title: $.t("Alerts Log"),
                ctor: null,
                chartWidgetAllowed: !0
            },
            market_summary: {
                title: $.t("Market Summary"),
                ctor: null
            }
        }, s._messageHandlers = [], s.postMessage = function(t, e) {
            s._messageHandlers.forEach(function(i) {
                i.handler(t, e)
            })
        }, s.onMessage = function(t) {
            "function" == typeof t && s._messageHandlers.push({
                handler: t,
                widget: this
            })
        }, s.prototype.layoutKeyName = "layout-settings", s.prototype.initLayout = function() {
            var t, e = this;
            u.load(d, function() {
                var t = $.Deferred();
                return p.loadWidgetBarModules(function(i) {
                    var n = e.widgetConfig;
                    n.dfx_calendar.ctor = i.DfxCalendarWidget, n.earnings_calendar.ctor = i.CalendarWidget && i.CalendarWidget.Earnings, n.watchlist.ctor = i.Watchlist && i.Watchlist.Widget, n.hotlist.ctor = i.HotlistWidget, n.detail.ctor = i.Detail && i.Detail.Widget, n.news.ctor = i.NewsWidget, n.chat.ctor = i.ChatWidget, n.messages.ctor = i.Messages && i.Messages.Widget, n.messages_with_select.ctor = i.Messages && i.Messages.Widget, n.notifications_following.ctor = i.NotificationsWidgets, n.notifications_user.ctor = i.NotificationsWidgets, n.publicchats.ctor = i.PublicChatsWidget, n.publicchats_with_select.ctor = i.PublicChatsWidget, n.notes.ctor = i.NotesWidget, n.alerts_manage.ctor = i.AlertsManageWidget, n.alerts_log.ctor = i.AlertsLogWidget, n.market_summary.ctor = i.MarketSummaryWidget, t.resolve(i)
                }), t.promise()
            }), u.onReady(d, function() {
                e.layout.startWidgets()
            }), e.layout.syncSize(), t = e.layout.getActivePage(), t ? (u.load(d, null, !0), t.onActiveStateChange(!0)) : e.$container.on("click", ".widgetbar-tab", function() {
                e.$container.off("click"), u.load(d, null, !0)
            }), $.tabvisible || e.layout.onVisibilityChange(!1)
        }, s.prototype.onLoginStateChange = function(t) {
            t || window.is_authenticated && (this.dropWidgetData(), this.refreshFromTVSettings(), TradingView.onWidget() || TradingView.isMobileView || "vertical" !== this.layoutPosition || (this.createBugReportButton(), this.createHelpButton()))
        }, s.prototype.dropWidgetData = function() {
            for (var t in this.widgetConfig) delete this.widgetConfig[t].data
        }, s.prototype.refreshFromTVSettings = function() {
            this._settingsPrefix && (this.layout && this.layout.destroy(), this.layout = new a({
                widgetBar: this
            }), this.loadFromTVSettings(), this.layout.createHTML(), this.layout.$pages.appendTo(this.$wrap), this.layout.$tabs.appendTo(this.$wrap), this.initLayout())
        }, s.prototype.loadFromTVSettings = function() {
            var t, e, i, n, o;
            if (this._settingsPrefix) {
                try {
                    this.migrateFromOld()
                } catch (r) {
                    console.error && console.error(r)
                }
                if (t = this.getLayoutState(), t = this.mergeProperties(t), this.layout.demarshal(t, {
                        settingsPrefix: this._settingsPrefix
                    }), this.saveToTVSettings(), e = TVSettings.getJSON(this._settingsPrefix + "." + this.layoutKeyName, null)) {
                    i = [];
                    for (n in e.widgets) i = i.concat(e.widgets[n].map(function(t) {
                        return t.id
                    }));
                    o = TVSettings.keysMask(this._settingsPrefix + ".widget.*.*"), o && o.forEach(function(t) {
                        var e = t.replace(this._settingsPrefix + ".widget.", ""); - 1 === i.indexOf(e) && 0 === t.indexOf(this._settingsPrefix + ".widget.") && (TradingView.trackEvent("Settings debug", "loadFromTVSettings: " + t, user.username), TVSettings.remove(t))
                    }.bind(this))
                }
            }
        }, s.prototype.mergeProperties = function(t) {
            var i, n, o, r, s, a, l = TVSettings.getJSON(this._settingsPrefix + "." + this.layoutKeyName, null);
            if (!l) return t;
            for (e.enabled("browser_extension") && (i = TVSettings.getJSON(this._settingsPrefix + ".extension." + this.layoutKeyName, {}).settings, i ? l.settings = i : delete l.settings), l.settings && $.extend(t, l.settings), n = {}, o = 0; o < t.pages.length; o++)
                for (r = 0; r < t.pages[o].widgets.length; r++) s = t.pages[o].widgets[r], a = n[s.type] || 0, l.widgets[s.type] && l.widgets[s.type][a] && $.extend(s, l.widgets[s.type][a]), n[s.type] = ++a;
            return t
        }, s.prototype.migrateFromOld = function(t) {
            var e, i, n, o, r, s, a, l = TVSettings.getJSON(this._settingsPrefix + ".layout-fixed", null);
            if (l) {
                e = {
                    settings: {}
                }, "minimized" in l && (e.settings.minimized = l.minimized), "width" in l && (e.settings.width = l.width), "activeIndex" in l && (e.settings.activeIndex = l.activeIndex), e.widgets = {};
                for (i = 0; i < l.pages.length; i++)
                    for (n = l.pages[i].widgets || l.pages[i], r = 0; r < n.length; r++) s = n[r], s.id ? (o = s.id.replace(/\..*/, ""), /^news_.+/.test(o) && (o = s.type = "news", TVSettings.setJSON(this._settingsPrefix + ".widget." + s.id.replace(/news_[^.]*/, "news"), TVSettings.getValue(this._settingsPrefix + ".widget." + s.id)), s.id = s.id.replace(/news_[^.]*/, "news"))) : (o = s.type, /^news_.+/.test(o) && (s.properties = s.properties || {}, s.properties.provider = s.type.replace(/news_([^.]*).*/, "$1"), o = s.type = "news")), e.widgets[o] ? e.widgets[o].push(s) : e.widgets[o] = [s];
                TVSettings.setJSON(this._settingsPrefix + "." + this.layoutKeyName, e)
            } else TVSettings.getJSON(this._settingsPrefix + ".layout", null) && (a = this.getWidgetProperties("watchlist"), a && (e = {
                settings: {},
                widgets: {
                    watchlist: [a]
                }
            }, TVSettings.setJSON(this._settingsPrefix + "." + this.layoutKeyName, e)));
            l && TVSettings.remove(this._settingsPrefix + ".layout-fixed"), TVSettings.getJSON(this._settingsPrefix + ".layout", null) && TVSettings.remove(this._settingsPrefix + ".layout")
        }, s.prototype.saveToTVSettings = function() {
            var t, i;
            this._settingsPrefix && (t = this.layout.marshal(), e.enabled("browser_extension") ? (TVSettings.setJSON(this._settingsPrefix + ".extension." + this.layoutKeyName, t), i = TVSettings.getJSON(this._settingsPrefix + "." + this.layoutKeyName, null), i && i.widgets && (i.widgets = $.extend(!0, i.widgets, t.widgets), TVSettings.setJSON(this._settingsPrefix + "." + this.layoutKeyName, i))) : TVSettings.setJSON(this._settingsPrefix + "." + this.layoutKeyName, t))
        }, s.prototype.getWidgetPropertiesLS = function(t) {}, s.prototype.getWidgetProperties = function(t, e) {
            var i, n;
            return e = e || 0, i = this._settingsPrefix.replace(/\W/g, "\\$&") + ".widget.", n = TVSettings.keysMask(i + t + ".*"), n && n.length && (n = n.sort(), n[e]) ? {
                id: n[e].replace(i, "")
            } : !1
        }, s.prototype.getGenericLayoutState = function(t) {
            var i, n = {
                    version: 2,
                    width: 267,
                    pages: []
                },
                o = [{
                    _gaEvent: "General Widget",
                    title: $.t("Watchlist, details and news"),
                    name: "base",
                    icon: "base",
                    widgets: [{
                        type: "watchlist",
                        properties: t && t.length ? {
                            list: t
                        } : void 0
                    }, {
                        type: "detail"
                    }, {
                        type: "news",
                        properties: {
                            provider: "yahoo"
                        }
                    }]
                }, e.enabled("alerts") ? {
                    _gaEvent: "Alerts",
                    title: $.t("Alerts"),
                    name: "alerts",
                    icon: "alarm-clock",
                    widgets: [{
                        type: "alerts_manage",
                        properties: {}
                    }, {
                        type: "alerts_log",
                        properties: {}
                    }]
                } : null, {
                    _gaEvent: "Data Window",
                    title: $.t("Data Window"),
                    name: "data-window",
                    icon: "datawindow",
                    widgets: [{
                        type: "datawindow"
                    }]
                }, {
                    _gaEvent: "Hotlists",
                    title: $.t("Hotlists"),
                    name: "hotlist",
                    icon: "hotlists",
                    widgets: [{
                        type: "hotlist",
                        properties: {
                            id: "ALL_NOTSX/active"
                        }
                    }, {
                        type: "hotlist",
                        properties: {
                            id: "ALL_NOTSX/pgainers"
                        }
                    }, {
                        type: "hotlist",
                        properties: {
                            id: "ALL_NOTSX/plosers"
                        }
                    }]
                }, {
                    _gaEvent: "Calendar",
                    title: $.t("Calendar"),
                    name: "calendar",
                    icon: "calendar",
                    spaceBottom: !TradingView.isFeatureEnabled("widgetbar.old-my-ideas"),
                    spaceBottomText: $.t("Social"),
                    widgets: [{
                        type: "dfx_calendar",
                        properties: {}
                    }, {
                        type: "earnings_calendar",
                        properties: {}
                    }]
                }, TradingView.isFeatureEnabled("widgetbar.old-my-ideas") ? {
                    _gaEvent: "My Ideas",
                    title: $.t("My Ideas"),
                    name: "notes",
                    icon: "notes",
                    spaceBottom: !0,
                    spaceBottomText: $.t("Social"),
                    widgets: [{
                        type: "notes"
                    }]
                } : null, {
                    _gaEvent: "Public Chats",
                    title: $.t("Chats"),
                    name: "chats",
                    icon: "chat",
                    widgets: [{
                        type: "chat"
                    }, {
                        type: "publicchats"
                    }]
                }, {
                    _gaEvent: "Private Chats",
                    title: $.t("Recent Chats"),
                    name: "pm_chats",
                    icon: "messages",
                    widgets: [{
                        type: "messages"
                    }]
                }, {
                    _gaEvent: "Ideas Stream",
                    title: $.t("Ideas Stream"),
                    name: "ideas_stream",
                    icon: "ideas-stream",
                    widgets: [{
                        type: "notifications_following"
                    }]
                }, {
                    _gaEvent: "Notifications",
                    title: $.t("Notifications"),
                    name: "notifications",
                    icon: "notifications",
                    widgets: [{
                        type: "notifications_user"
                    }]
                }];
            for (i = 0; i < o.length; i++) o[i] && n.pages.push(o[i]);
            return n
        }, s.prototype.getChartingPlatformLayoutState = function(t, e) {
            var i, n, o = {
                version: 2,
                width: 267,
                pages: []
            };
            return (this._customization.watchlist || this._customization.details || this._customization.news) && (i = "", n = [], this._customization.watchlist && (i = $.t("Watchlist"), n.push({
                type: "watchlist",
                id: "watchlist." + e,
                properties: t && t.length ? {
                    list: t
                } : void 0
            })), this._customization.details && (this._customization.watchlist ? i += " " + $.t("and details") : i = $.t("Details"), n.push({
                type: "detail"
            })), this._customization.news && (this._customization.watchlist || this._customization.details ? i += " and news" : i = "News", n.push({
                type: "news",
                id: "news." + e
            })), o.pages.push({
                title: i,
                icon: "base",
                widgets: n
            })), o
        }, s.prototype.getBrowserExtensionLayoutState = function(t) {
            return {
                version: 1,
                width: null,
                pages: [{
                    title: $.t("Market Summary"),
                    name: "market_summary",
                    icon: "hotlists",
                    widgets: [{
                        type: "market_summary",
                        properties: [{
                            symbol: "S&P 500",
                            symbol_full: "FX:SPX500",
                            short_name: "SPX500",
                            color: "#e0725e"
                        }, {
                            symbol: "Nikkei 225",
                            symbol_full: "FX:JPN225",
                            short_name: "JPN225",
                            color: "#64a81e"
                        }, {
                            symbol: "Nasdaq",
                            symbol_full: "FX:NAS100",
                            short_name: "NAS100",
                            color: "#fdaf48"
                        }]
                    }]
                }, {
                    title: $.t("Watchlist"),
                    name: "watchlist",
                    icon: "base",
                    widgets: [{
                        type: "watchlist",
                        properties: t && t.length ? {
                            list: t
                        } : void 0
                    }]
                }, {
                    title: $.t("Chats"),
                    name: "chats",
                    icon: "chat",
                    widgets: [{
                        type: "publicchats_with_select"
                    }]
                }, {
                    title: $.t("Recent chats"),
                    name: "pm_chats",
                    icon: "messages",
                    widgets: [{
                        type: "messages_with_select"
                    }]
                }]
            }
        }, s.prototype.getLayoutState = function() {
            function t(t) {
                return r.chartWidgetCollection || !s.widgetConfig[t.type].chartWidgetRequired
            }
            var i, n, o, r = this,
                a = TVSettings.getJSON("watchlist.list", []);
            for (i = e.enabled("cqg_terminal") ? this.getChartingPlatformLayoutState(a, "cqg") : e.enabled("trading_terminal") ? this.getChartingPlatformLayoutState(a, "terminal") : e.enabled("browser_extension") ? this.getBrowserExtensionLayoutState(a) : this.getGenericLayoutState(a), n = i.pages.length - 1; n >= 0; n--) o = i.pages[n], o.widgets = $.grep(o.widgets, t);
            return i.pages = $.grep(i.pages, function(t) {
                return t.widgets && t.widgets.length
            }), i
        }, s.prototype.createWidgetId = function(t) {
            return t + "." + TradingView.randomHash()
        }, s.prototype.onWindowResize = function(t) {
            if (!this.minimized && this.layout) {
                this.fullscreen && this.layout.syncSize();
                var e = this.layout.getActivePage();
                e && e.updateWidgetsHeight({
                    skipIfHeightUnchanged: !0
                })
            }
        }, s.prototype.onVisibilityChange = function(t, e) {
            arguments.length < 2 || this.layout && this.layout.onVisibilityChange(e)
        }, s.prototype.setPage = function(t) {
            this.layout.setMinimizedState(!1);
            var e = this.layout.activeIndex;
            return this.layout.pages.forEach(function(i, n) {
                i.name === t && (e = n)
            }), this.layout.switchPage(e), this.layout.getActivePage()
        }, a.prototype.startWidgets = function() {
            this.pages.forEach(function(t) {
                t.widgets.forEach(function(t) {
                    t.widgetObject || t.widgetStartDelayed || setTimeout(function() {
                        t.startWidget()
                    }, 0)
                })
            })
        }, a.prototype.syncSize = function(t) {
            this.$pages && this.widgetBar && (this.widgetBar.fullscreen && this.widgetBar.$container.css("width", "100%"), "horizontal" === this.widgetBar.layoutPosition ? this.syncHeight(t) : this.syncWidth(t))
        }, a.prototype.syncHeight = function(t) {
            var e, i = $(document.documentElement).height();
            return this.widgetBar.fullscreen ? (e = parseInt(this.widgetBar.$container.find(".widgetbar-pages").css("top")), void this.$pages.css("height", i - e)) : void TradingView.logError("[Widget Bar] Not defined height sync for horizontal, not fullscreen case")
        }, a.prototype.syncWidth = function(t) {
            var i, n, o, r, s, a, l = $(document.documentElement).width();
            return this.widgetBar.fullscreen ? void this.$pages.css("width", l - this.$tabs.outerWidth()) : (i = e.enabled("widgetbar_tabs") ? 46 : 0, n = 0, o = i + 1, r = !1, this.minimized || (n = Math.min(this.width, Math.round(.75 * l)), r = l - n < this.OVERLAY_THRESHOLD + o, i += n + 1), this.$pages.css("width", n + "px").toggleClass("hidden", this.minimized).toggleClass("layered", r), this._prevContainerWidth !== i && (this._prevContainerWidth = i, this.widgetBar.fixedMode ? $(document.body).css("paddingRight", i + "px") : this.widgetBar.$container && this.widgetBar.$container.css("width", i + "px"), $(window).trigger("resize"), s = document.createEvent("UIEvents"), s.initUIEvent("resize", !0, !1, window, 0), window.dispatchEvent(s)), void(this.minimized || (a = this.getActivePage(), a && a.widgets.forEach(function(t) {
                t.onWidthChange(n)
            }))))
        }, a.prototype.setMinimizedState = function(t, e) {
            if (t = this.widgetBar.fullscreen ? !1 : arguments.length < 1 ? !this.minimized : !!t, this.minimized !== t) {
                this.minimized = t;
                var i = this.pages[this.activeIndex];
                this.syncSize(), i && i.onActiveStateChange(!this.minimized)
            }
        }, a.prototype.switchPage = function(t) {
            var e, i, n;
            if (-1 === t || 0 === this.pages.length) return void(this.activeIndex = -1);
            if (t instanceof l) {
                if (e = this.pages.indexOf(t), -1 === e) return
            } else e = +t;
            i = this.pages[this.activeIndex], this.activeIndex = Math.min(this.pages.length - 1, Math.max(0, e)), n = this.pages[this.activeIndex], this.activeName = n.name, this.minimized || i && i === n || (i && i.onActiveStateChange(!1), n && n.onActiveStateChange(!0))
        }, a.prototype.getActivePage = function() {
            return this.minimized ? null : this.pages[this.activeIndex] || null
        }, a.prototype.onTabClick = function(t, e) {
            if (!t.isDefaultPrevented()) {
                var i = this.pages.indexOf(e); - 1 !== i && (t.preventDefault(), i !== this.activeIndex || this.minimized ? (e._gaEvent && TradingView.trackEvent("Platform Widgets", e._gaEvent), this.switchPage(i), this.minimized && this.setMinimizedState(!1)) : this.setMinimizedState(!0), this.widgetBar && this.widgetBar.saveToTVSettings())
            }
        }, a.prototype.setHelpButton = function() {
            return this.$charthelpbutton || (this.$charthelpbutton = $(document.createElement("div")).attr("class", "widgetbar-chart-helpbutton apply-common-tooltip").attr("title", $.t("Help")).append(n("help", {
                width: "30px",
                height: "30px",
                "class": "widgetbar-icon"
            })), this.$charthelpbutton.appendTo(this.$tabscontrols)), this.$charthelpbutton
        }, a.prototype.setBugReportButton = function() {
            return this.$bugreportbutton || (this.$bugreportbutton = $(document.createElement("div")).attr("class", "widgetbar-bug-report-button apply-common-tooltip").attr("title", $.t("Report Issues")).append(n("bug-report", {
                width: 30,
                height: 30,
                "class": "widgetbar-icon"
            })), this.$bugreportbutton.appendTo(this.$tabscontrols)), this.$bugreportbutton
        }, s.prototype.createHelpButton = function() {
            var t, e, i = this.layout.setHelpButton(),
                n = !(!window.sideToolbar || !window.sideToolbar.options.withWizard);
            n && this.chartWidgetCollection && (t = this.chartWidgetCollection.activeChartWidget.value()), e = function() {
                i.off("click", e), u.onReady(d, function() {
                    i.trigger("click")
                }), u.load(d, null, 0)
            }, u.onReady(d, function(o) {
                i.off("click", e);
                var r = o.ChartHelpMenu;
                r && new r(i, !!n, t)
            }), u.isLoaded(d) || i.on("click", e)
        }, s.prototype.createBugReportButton = function() {
            var t = this.layout.setBugReportButton();
            t.click(function(e) {
                runOrSignIn(function() {
                    t.addClass("active"), u.onReady(d, function(e) {
                        var i, n, o = e.UserBugReportDialog;
                        o && (i = new o, n = i.show(), n.on("destroy", t.removeClass.bind(t, "active")))
                    }), u.load(d, null, 0)
                }, {
                    source: "Bug report dialog",
                    sourceMeta: "Chart"
                })
            })
        }, a.prototype.onLayoutResizeHandleMousedown = function(t) {
            function e(t) {
                var e, i, s, a;
                e = t.originalEvent.touches ? t.originalEvent.touches[0].clientX : t.pageX, i = e - r, s = this.minimized, a = o - i, a < n.MINIMIZE_THRESHOLD ? (a = o, s = !0) : s = !1, a = Math.max(a, n.MIN_WIDTH), isFinite(a) && (n.minimized !== s ? (n.width = a, n.setMinimizedState(s)) : n.width !== a && (n.width = a, n.syncSize()))
            }

            function i(t) {
                $(document.documentElement).off("mousemove touchmove", e).off("mouseup touchend", i), n.widgetBar && n.widgetBar.saveToTVSettings()
            }
            var n, o, r;
            t.isDefaultPrevented() || (t.preventDefault(), n = this, o = this.minimized ? 0 : this.width, r = t.originalEvent.touches ? t.originalEvent.touches[0].clientX : t.pageX, $(document.documentElement).on("mousemove touchmove", e).on("mouseup touchend", i))
        }, a.prototype.removePage = function(t) {
            var e = this.pages.indexOf(t); - 1 !== e && (delete t.widgetBarLayout, this.pages.splice(e, 1), t.$page.detach(), t.$page.detach(), t.$tab.detach(), this.activeIndex === e && this.switchPage(e - 1))
        }, a.prototype.createPage = function() {
            var t = new l({
                widgetBarLayout: this
            });
            return this.pages.push(t), t.createHTML(), this.$tabscontent.append(t.$tab), this.$pagescontent.append(t.$page), t
        }, a.prototype.createWidget = function(t, e) {
            if (e) {
                if (-1 === this.pages.indexOf(e)) return null
            } else e = this.createPage();
            var i = new c({
                widgetBarPage: e
            });
            return i.demarshal({
                type: t
            }), i.createHTML(), e.attachWidget(i), i
        }, a.prototype.widgetInsertionDisallowed = function(t) {
            if ("watchlist" !== t) return !1;
            if (window.user && user.is_pro) return !1;
            var e = this.pages.some(function(e) {
                return e.widgets.some(function(e) {
                    return e.type === t
                })
            });
            return e ? (TVDialogs.showGoProDialog({
                feature: "multipleWatchLists"
            }), !0) : void 0
        }, a.prototype.onVisibilityChange = function(t) {
            this.visible = t, this.pages.forEach(function(e) {
                e.onVisibilityChange(t)
            })
        }, a.prototype.destroy = function() {
            var t, e, i, n;
            for (this.widgetBar && this.widgetBar.layout === this && delete this.widgetBar.layout, t = this.pages.length; t--;)
                for (e = this.pages[t], i = e.widgets.length; i--;) e.widgets[i].destroy();
            for (n in this) this[n] instanceof $ && this[n].remove(), delete this[n]
        }, a.prototype.getWidgetBarOption = function() {
            return this.widgetBar && name in this.widgetBar ? this.widgetBar[name] : void 0
        }, a.prototype.MIN_WIDTH = 200, a.prototype.MINIMIZE_THRESHOLD = 50, a.prototype.OVERLAY_THRESHOLD = 1e3, a.prototype.width = 290, a.prototype.minimized = !1, a.prototype.activeIndex = 0, a.prototype.activeName = "", a.prototype.visible = !0, l.prototype.onActiveStateChange = function(t) {
            t = !!t, $([this.$tab, this.$page]).toggleClass("active", !!t), t && this.updateWidgetsHeight({
                skipIfHeightUnchanged: !0
            }), this.widgets.forEach(function(e) {
                e.onActiveStateChange(t)
            })
        }, l.prototype.updateWidgetsHeight = function(t) {
            var e, i, n, o, r, s, a, l, c, h;
            if (this.$page) {
                if (this.widgetBarLayout && this.widgetBarLayout.getActivePage() !== this) return void(this._invalidated = !0);
                if (t = t || {}, e = this.$page.height(), this._pageHeight === e && t.skipIfHeightUnchanged || (this._invalidated = !0, this._pageHeight = e), this._invalidated) {
                    for (i = e, o = 0, r = this.widgets, i -= this.widgets.length - 1, s = r.length; s--;) a = r[s], a.$widget && (void 0 === n && (n = a.$header.outerHeight(!0)), i -= n, o += a.heightRatio);
                    for (l = i / o, c = r.length - 1, s = 0; c >= s; s++) a = r[s], h = s === c ? i : Math.round(l * a.heightRatio), a.setHeight(h), i -= h
                }
            }
        }, l.prototype.onWidgetResizeHandleMousedown = function(t, e) {
            var i, n, o, r, s, a, l, c, h, d, u, p;
            if (!t.isDefaultPrevented()) {
                for (i = this, t.preventDefault(), r = this.widgets.length - 1; r > 0; r--) this.widgets[r] === e && (n = this.widgets[r], o = this.widgets[r - 1]);
                s = t.originalEvent.touches ? t.originalEvent.touches[0].clientY : t.pageY, a = o.$body.height(), l = o.heightRatio + n.heightRatio, c = a + n.$body.height(), 0 !== c && (d = !1, u = function(t) {
                    var e, r, u;
                    d || i.$page.addClass("widget-resize-mode"), e = t.originalEvent.touches ? t.originalEvent.touches[0].clientY : t.pageY, r = e - s, u = Math.max(0, Math.min(a + r, c)), h !== u && (h = u, o.heightRatio = u / c * l, n.heightRatio = l - o.heightRatio, o.setHeight(u), n.setHeight(c - u))
                }, p = function(t) {
                    $(document.documentElement).off("mousemove touchmove", u).off("mouseup touchend", p), i.$page.removeClass("widget-resize-mode"), h !== a && (i.normalizeRatios(), i.widgetBarLayout && i.widgetBarLayout.widgetBar && i.widgetBarLayout.widgetBar.saveToTVSettings())
                }, $(document.documentElement).on("mousemove touchmove", u).one("mouseup touchend", p))
            }
        }, l.prototype.normalizeRatios = function() {
            var t, e, i, n = 1 / 0;
            for (t = this.widgets.length; t--;) e = this.widgets[t].heightRatio, 0 >= e || !isFinite(e) || n > e && (n = e);
            if (isFinite(n)) {
                for (i = 1; 1 > n;) n *= 2, i *= 2;
                for (; n >= 2;) n /= 2, i /= 2;
                for (t = this.widgets.length; t--;) this.widgets[t].heightRatio *= i
            }
        }, l.prototype.attachWidget = function(t, e) {
            var i, n;
            e = +e, i = this.widgets.indexOf(t), -1 !== i ? this.widgets.splice(i, 1) : t.widgetBarPage && t.widgetBarPage !== this && t.widgetBarPage.removeWidget(t), e < this.widgets.length ? 0 > e && (e = 0) : e = this.widgets.length, delete t.widgetBarPage, Object.defineProperty(t, "widgetBarPage", {
                value: this,
                configurable: !0
            }), this.widgets.splice(e, 0, t), n = this.widgets[e + 1], n ? t.$widget.insertBefore(n.$widget) : t.$widget.appendTo(this.$page), this.widgetBarLayout && this.widgetBarLayout.getActivePage() === this ? t.$icon.addClass("active") : t.$icon.removeClass("active"), this.updateWidgetsHeight(), t.updateVisibleWatchedValue()
        }, l.prototype.removeWidget = function(t) {
            var e = this.widgets.indexOf(t); - 1 !== e && (delete t.widgetBarPage, this.widgets.splice(e, 1), t.$widget && t.$widget.detach(), this.updateWidgetsHeight())
        }, l.prototype.remove = function() {
            this.widgetBarLayout && this.widgetBarLayout.removePage(this)
        }, l.prototype.destroy = function() {
            this.remove();
            for (var t in this) this[t] instanceof $ && this[t].remove(), delete this[t]
        }, l.prototype.isActiveAndVisible = function() {
            var t = this.widgetBarLayout;
            return t && t.visible ? t.getActivePage() === this : !1
        }, l.prototype.onVisibilityChange = function(t) {
            var e = t && this.widgetBarLayout && this.widgetBarLayout.getActivePage() === this;
            this.widgets.forEach(function(i) {
                e && i.clearNotifications(), i.onVisibilityChange(t)
            })
        }, l.prototype.notify = function(t, e) {
            return e = e || {}, e.clear === !0 ? void this.clearNotifications() : e.stopHighlightTab ? void this.$tab.highlight(!1) : (this.notificationCounter = this.notificationCounter + (~~t || 1), this.updateNotifications(e.notificationValue), void(e.highlightTab && this.$tab.highlight()))
        }, l.prototype.clearNotifications = function() {
            0 !== this.notificationCounter && (this.notificationCounter = 0, this.$notificationwrap.fadeOut(400), this.$tab.highlight(!1))
        }, l.prototype.updateNotifications = function(t) {
            this.$notification.text("number" == typeof t ? t : this.notificationCounter), this.$notificationwrap.stop(!0, !0).show()
        }, l.prototype.notificationCounter = 0, c.prototype.setHeight = function(t) {
            this.$body.height(t), this.watchedHeight.setValue(this.$body.height())
        }, c.prototype.onWidthChange = function(t) {
            this.watchedWidth.setValue(t)
        }, c.prototype.remove = function() {
            this.widgetBarPage && this.widgetBarPage.removeWidget(this)
        }, c.prototype.destroy = function() {
            this.widgetObject && "function" == typeof this.widgetObject.destroy && this.widgetObject.destroy(), this.remove(), this.symbolLinking && this.symbolLinking.destroy(), this.intervalLinking && this.intervalLinking.destroy();
            for (var t in this) this[t] instanceof $ && this[t].remove(), delete this[t];
            s._messageHandlers = s._messageHandlers.filter(function(t) {
                return t.widget !== this
            }, this)
        }, c.prototype.onActiveStateChange = function(t) {
            var e = this.getWidgetBarOption("widgetConfig") || s.widgetConfig,
                i = e[this.type];
            this.$icon && this.$icon.toggleClass("active", !!t), t && !i.doNotClearNotifications && this.clearNotifications(), this.updateVisibleWatchedValue(), this.widgetActive.setValue(!!t)
        }, c.prototype.toggleMaximize = function(t) {
            if ("boolean" != typeof t) t = !this.widgetMaximized.value();
            else if (t === this.widgetMaximized.value()) return;
            this.$widget.toggleClass("widgetbar-widget-maximized", t), this.widgetMaximized.setValue(t), this.widgetBarPage && this.widgetBarPage.widgetBarLayout && this.widgetBarPage.widgetBarLayout.widgetBar && this.widgetBarPage.widgetBarLayout.widgetBar.saveToTVSettings();
            var e = this.$body.height();
            e && this.watchedHeight.setValue(e)
        }, c.prototype.startWidget = function() {
            var t, i, n, r, a, l;
            if (!this.widgetObject && !this.widgetStartDelayed && (t = this.getWidgetBarOption("widgetConfig") || s.widgetConfig, i = t[this.type], i && (n = i.ctor))) {
                if (r = this, this.widgetVisible = this.widgetVisible || new o, this.updateVisibleWatchedValue(), i.lazyLoad && !this.widgetVisible.value()) return this.widgetStartDelayed = !0, void this.widgetVisible.when(function() {
                    delete r.widgetStartDelayed, r.startWidget()
                });
                this.symbolLinking = f.symbol.spawn(), this.intervalLinking = f.interval.spawn(), a = {
                    $widget: this.$widget,
                    $header: this.$header,
                    $headerspace: this.$headerspace,
                    $body: this.$body,
                    properties: this.properties,
                    notify: this.notify.bind(this),
                    clearNotifications: this.clearNotifications.bind(this),
                    visible: this.widgetVisible.readonly(),
                    active: this.widgetActive.readonly(),
                    symbol: this.symbolLinking,
                    interval: this.intervalLinking,
                    height: this.watchedHeight.readonly(),
                    width: this.watchedWidth.readonly(),
                    setTitle: this.setTitle.bind(this),
                    id: this.id,
                    toggleMaximize: this.toggleMaximize.bind(this),
                    maxmized: this.widgetMaximized.readonly(),
                    postMessage: s.postMessage.bind(this),
                    onMessage: s.onMessage.bind(this),
                    hideDetach: !!e.enabled("browser_extension")
                }, i.chartWidgetAllowed && (l = function() {
                    return r.widgetBarPage && r.widgetBarPage.widgetBarLayout && r.widgetBarPage.widgetBarLayout.widgetBar && r.widgetBarPage.widgetBarLayout.widgetBar.chartWidgetCollection
                }, a.getChartWidget = function() {
                    var t = l();
                    return t ? t.activeChartWidget.value() : null
                }, a.getChartWidgetCollection = function() {
                    return l() || null
                }), null != this.readonly ? this.readonly && (a.readonly = !0) : this.getWidgetBarOption("readonly") && (a.readonly = !0), null != i.options && (a.options = i.options), null != this.stateData ? a.data = this.stateData : null != i.data && (a.data = i.data), this.widgetObject = new n(a)
            }
        }, c.prototype.notify = function(t, e) {
            return e = e || {}, !this.widgetBarPage || this.widgetBarPage.isActiveAndVisible() && !e.force ? void 0 : this.widgetBarPage.notify(t, e)
        }, c.prototype.clearNotifications = function() {
            return this.widgetBarPage ? this.widgetBarPage.clearNotifications() : void 0
        }, l.prototype.isActiveAndVisible = function() {
            var t = this.widgetBarLayout;
            return t && t.visible ? t.getActivePage() === this : !1
        }, c.prototype.onVisibilityChange = function(t) {
            this.updateVisibleWatchedValue()
        }, c.prototype.updateVisibleWatchedValue = function() {
            this.widgetVisible && this.widgetVisible.setValue(!!this.widgetBarPage && this.widgetBarPage.isActiveAndVisible())
        }, c.prototype.setTitle = function(t) {
            this.customTitle = t + "", this.$title && this.$title.text(this.getTitle())
        }, c.prototype.heightRatio = 1, c.prototype.getWidgetBarOption = function(t) {
            return this.widgetBarPage && this.widgetBarPage.widgetBarLayout && this.widgetBarPage.widgetBarLayout.widgetBar && t in this.widgetBarPage.widgetBarLayout.widgetBar ? this.widgetBarPage.widgetBarLayout.widgetBar[t] : void 0
        }, h.prototype.value = function(t) {
            return this._value
        }, h.prototype.setValue = function(t) {
            return this._value = t, this._settingsKey && (null == t ? (TradingView.trackEvent("Settings debug", "WigdetProperties.setValue: " + this._settingsKey, user.username), TVSettings.remove(this._settingsKey)) : TVSettings.setJSON(this._settingsKey, t)), this._value
        }, s.prototype.createHTML = function() {
            var t = this.$container;
            !t || t.size() < 1 || (t.empty(), this.layout.createHTML(), this.$wrap = $(document.createElement("div")).attr("class", "widgetbar-wrap unselectable js-right-boundary").appendTo(t), this.$wrap.toggleClass("fullscreen", this.fullscreen), this.$wrap.toggleClass("horizontal", "horizontal" === this.layoutPosition), "horizontal" === this.layoutPosition ? (e.enabled("widgetbar_tabs") && this.layout.$tabs.appendTo(this.$wrap), this.layout.$pages.appendTo(this.$wrap)) : (this.layout.$pages.appendTo(this.$wrap), e.enabled("widgetbar_tabs") && this.layout.$tabs.appendTo(this.$wrap)))
        }, a.prototype.createHTML = function() {
            var t = this;
            e.enabled("widgetbar_tabs") && (t.$tabs = $(document.createElement("div")).attr("class", "widgetbar-tabs"), t.$tabscontrols = $(document.createElement("div")).attr("class", "widgetbar-tabscontrols").appendTo(t.$tabs), t.$tabscontent = $(document.createElement("div")).attr("class", "widgetbar-tabscontent").appendTo(t.$tabs)), t.$pages = $(document.createElement("div")).attr("class", "widgetbar-pages"), t.$pagescontent = $(document.createElement("div")).attr("class", "widgetbar-pagescontent").appendTo(t.$pages), e.enabled("widgetbar_tabs") || t.$pages.css("right", "-1px"), this.widgetBar.fullscreen || (t.$handle = $(document.createElement("div")).attr("class", "widgetbar-handle").appendTo(t.$pages), t.$handle.on("mousedown touchstart", t.onLayoutResizeHandleMousedown.bind(t))), $(document.createElement("div")).attr("class", "widgetbar-tab-spacer").text($.t("Tools")).appendTo(t.$tabscontent), t.pages.forEach(function(e) {
                e.createHTML(), e.$tab.appendTo(t.$tabscontent), e.spaceBottom && $(document.createElement("div")).attr("class", "widgetbar-tab-spacer").text(e.spaceBottomText).appendTo(t.$tabscontent), e.$page.appendTo(t.$pagescontent)
            }), this.widgetBar.showCloseButton && $('<a href="#" class="tv-close-panel right" title="' + $.t("Hide Widgets") + '"></a>').on("click", function(t) {
                this.setMinimizedState(), t.preventDefault()
            }.bind(this)).appendTo(t.$pages)
        }, l.prototype.createHTML = function() {
            var t = this;
            t.$page = $(document.createElement("div")).attr("class", "widgetbar-page"), t.$tab = $(document.createElement("div")).attr("class", "widgetbar-tab"), t.$tab.on("click touchstart", function(e) {
                t.widgetBarLayout && t.widgetBarLayout.onTabClick(e, t)
            }), t.$tabcontent = $(document.createElement("div")).attr("class", "widgetbar-tabcontent").appendTo(t.$tab), t.$iconplace = $(document.createElement("div")).attr("class", "widgetbar-iconplace apply-common-tooltip").attr("title", t.title), t.$iconplace.addClass("horizontal" === this.widgetBarLayout.widgetBar.layoutPosition ? "common-tooltip-horizontal" : "common-tooltip-vertical"), t.$icon = $(n(t.icon, {
                "class": "widgetbar-icon"
            })).appendTo(t.$iconplace), t.$notificationwrap = $(document.createElement("div")).attr("class", "widgetbar-notification-wrap").appendTo(t.$iconplace), t.$notification = $(document.createElement("div")).attr("class", "widgetbar-notification").appendTo(t.$notificationwrap), t.$tabcontent.append(t.$iconplace), t.widgets.forEach(function(e) {
                e.createHTML(), e.$widget.appendTo(t.$page)
            })
        }, c.prototype.getTitle = function(t) {
            var e = r(this.type, this.getWidgetBarOption("widgetConfig"));
            return t && this.customTitle && e ? this.customTitle.substr(0, e.length) === e ? this.customTitle : e + ": " + this.customTitle : this.customTitle || e || $.t("Widget")
        }, c.prototype.createHTML = function() {
            var t = this,
                e = t.widgetConfig && t.widgetConfig.icon ? t.widgetConfig.icon : !1,
                i = t.widgetConfig && t.widgetConfig.emptyHeader;
            t.$widget = $(document.createElement("div")).attr("class", "widgetbar-widget widgetbar-widget-" + t.type), t.$header = $(document.createElement("div")).attr("class", "widgetbar-widgetheader").appendTo(t.$widget), e && (t.$headericon = $(document.createElement("div")).attr("class", "widgetbar-widgetheader-icon widgetbar-widgetheader-icon-" + e).append(n(e)).appendTo(t.$header)), t.$headerspace = $(document.createElement("div")).attr("class", "widgetbar-headerspace").appendTo(t.$header), t.$headerspace.on("click", function(t) {
                t.preventDefault()
            }), i || (t.$title = $(document.createElement("div")).attr("class", "widgetbar-widgettitle").appendTo(t.$header), t.$title.text(this.getTitle())), t.$body = $(document.createElement("div")).attr("class", "widgetbar-widgetbody").appendTo(t.$widget), t.$resizehandle = $(document.createElement("div")).attr("class", "widgetbar-widgethandle").appendTo(t.$widget), t.$resizehandle.on("mousedown touchstart", function(e) {
                t.widgetBarPage && t.widgetBarPage.onWidgetResizeHandleMousedown(e, t)
            }), this.maximized === !0 && (this.toggleMaximize(!0), delete this.maximized)
        }, a.demarshal = function(t, e) {
            return (new a).demarshal(t, e)
        }, l.demarshal = function(t, e) {
            return (new l).demarshal(t, e)
        }, c.demarshal = function(t, e) {
            return (new c).demarshal(t, e)
        }, a.prototype.demarshal = function(t, e) {
            var i, n, o, r;
            if ("string" == typeof t) try {
                t = JSON.parse(t)
            } catch (s) {}
            return t && "object" == typeof t ? (this.width = +t.width, !isFinite(this.width) || this.width <= 0 ? delete this.width : this.width < this.MIN_WIDTH && (this.width = this.MIN_WIDTH), "minimized" in t ? this.minimized = !!t.minimized : delete this.minimized, "version" in t && (this.version = t.version), i = +t.activeIndex, n = t.activeName, o = !1, r = this.pages, r.splice(0, this.pages.length), Array.isArray(t.pages) && t.pages.forEach(function(t, s) {
                var a = new l({
                    widgetBarLayout: this
                }).demarshal(t, e);
                n ? t.name === n && a && (i = s, o = !0) : a || s !== i || i--, a && r.push(a)
            }, this), n && !o && (i = 0), 0 === r.length ? this.activeIndex = -1 : i >= 0 && i < r.length && (this.activeIndex = i), this) : null
        }, l.prototype.demarshal = function(t, e) {
            if ("string" == typeof t) try {
                t = JSON.parse(t)
            } catch (i) {}
            if (!t || !t.widgets || !Array.isArray(t.widgets)) return null;
            var n = this.widgets;
            return n.splice(0, n.length), this._gaEvent = t._gaEvent, this.title = t.title, this.name = t.name, this.icon = t.icon, this.spaceBottom = t.spaceBottom, this.spaceBottomText = t.spaceBottomText, t.widgets.forEach(function(t) {
                var i = new c({
                    widgetBarPage: this
                }).demarshal(t, e);
                i && n.push(i)
            }, this), 0 === n.length ? null : this
        }, c.prototype.demarshal = function(t, e) {
            var i, n, o;
            if ("string" == typeof t) try {
                t = JSON.parse(t)
            } catch (r) {}
            return t && "object" == typeof t ? ("id" in t ? (this.id = t.id + "", this.type = this.id.replace(/\..*/, "")) : "type" in t ? (this.type = t.type + "", this.id = s.prototype.createWidgetId(this.type)) : (delete this.type, delete this.id), null != t.readonly ? this.readonly = !!t.readonly : delete this.readonly, this.stateData = t.data, isFinite(+t.heightRatio) && +t.heightRatio >= 0 ? this.heightRatio = +t.heightRatio : delete this.heightRatio, t.maximized === !0 && (this.maximized = !0), t.settingsKey ? i = t.settingsKey : this.id && (n = this.getWidgetBarOption("_settingsPrefix"), n && (i = n + ".widget." + this.id)), this.properties = new h({
                widgetBarWidget: this,
                settingsKey: i
            }), null == t.properties || i && null !== this.properties.value() || this.properties.setValue(t.properties), this.widgetConfig = null, o = this.getWidgetBarOption("widgetConfig"), o[this.type] && (this.widgetConfig = o[this.type]), this) : null
        }, a.prototype.marshal = function(t) {
            var e, i, n, o, r = [];
            for (this.pages.forEach(function(e) {
                var i = e.marshal(t);
                i && (r = r.concat(i))
            }), e = {}, i = 0; i < r.length; i++) r[i].type && (n = r[i].type, r[i].id && delete r[i].type, e[n] ? e[n].push(r[i]) : e[n] = [r[i]]);
            return o = {
                widgets: e,
                settings: {}
            }, ["minimized", "width", "activeIndex", "version", "activeName"].forEach(function(t) {
                this[t] !== a.prototype[t] && (o.settings[t] = this[t])
            }, this), o
        }, l.prototype.marshal = function(t) {
            var e = [];
            return this.widgets.forEach(function(i) {
                var n = i.marshal(t);
                n && e.push(n)
            }), 0 === e.length ? null : e
        }, c.prototype.marshal = function(t) {
            var e = {};
            return this.id && (e.id = this.id), this.type && (e.type = this.type), ["heightRatio"].forEach(function(t) {
                this[t] !== c.prototype[t] && (e[t] = this[t])
            }, this), this.widgetMaximized.value() && (e.maximized = !0), t && t.includeWidgetProperties && this.properties && (e.properties = TradingView.clone(this.properties.value())), e
        }, t.exports = s
    }).call(e, i(3), i(5), i(17))
}, function(t, e) {
    "use strict";

    function i(t) {
        return d.filter(function(e) {
            return e.m === t
        })[0]
    }

    function n(t) {
        var e = i(t);
        e && e.cb && $.when(e.cb()).done(function() {
            e.state = "loaded", e.args = Array.prototype.slice.call(arguments), delete e.cb, o(e.m)
        })
    }

    function o(t) {
        var e = i(t),
            n = function r(t) {
                t && !t.length || (t.shift().apply(null, e.args), r(t))
            },
            o = u[t];
        o && n(o)
    }

    function r(t, e) {
        "number" == typeof e ? setTimeout(function() {
            return n(t)
        }, e) : e === !0 && n(t)
    }

    function s(t) {
        return !!i(t)
    }

    function a(t, e, n) {
        if (e) {
            var o = i(t);
            o ? o.cb = e : d.push({
                m: t,
                cb: e
            })
        }(void 0 !== n || p) && r(t, n)
    }

    function l(t) {
        var e = i(t);
        return e && "loaded" === e.state
    }

    function c(t, e) {
        var n = i(t);
        u[t] = u[t] || [], u[t].push(e), n && "loaded" === n.state && o(t)
    }
    var h, d, u, p;
    Object.defineProperty(e, "__esModule", {
        value: !0
    }), e.isExists = s, e.load = a, e.isLoaded = l, e.onReady = c, h = 5e3, d = [], u = {}, p = !1, setTimeout(function() {
        var t;
        for (p = !0, t = 0; t < d.length; t += 1) n(d[t].m)
    }, h)
}, function(t, e) {
    "use strict";

    function i() {
        return o ? o : this instanceof i ? (o = this, this._ready = $.Deferred(), void n(function(t) {
            t && (c = t), this._ready.resolve()
        }.bind(this))) : new i
    }

    function n(t) {
        var e, i, n, o;
        return Modernizr.websockets ? (e = window.WebSocket || window.MozWebSocket) ? (i = Date.now().toString(36), n = new e(h), n.onopen = function(e) {
            n.send(i), o = setTimeout(function() {
                t("Error. Websocket response timeout")
            }, d)
        }, n.onerror = function(e) {
            clearTimeout(o), t("Error. " + e.data)
        }, void(n.onmessage = function(e) {
            clearTimeout(o), t(e.data === i ? "Success" : "Error. Incorrect response"), n.close()
        })) : void t("Error. Websocket constructor is undefined") : void t("Error. Not Supported")
    }
    var o, r, s, a, l = !1,
        c = "Pending",
        h = "wss://echo.websocket.org/",
        d = 3e4;
    i.prototype.browser = function() {
        var t, e, i;
        return r ? r : (t = (navigator.userAgent + "").toLowerCase().match(/(opera|ie|firefox|chrome|trident|crios|version)[\s\/:]([\w\d\.]+)?.*?(safari|(?:rv[\s\/:]|version[\s\/:])([\w\d\.]+)|$)/) || [null, "unknown", 0], "trident" === t[1] ? (t[1] = "ie", t[4] && (t[2] = t[4])) : "crios" === t[1] && (t[1] = "chrome"), e = ("version" === t[1] ? t[3] : t[1]) + "", i = parseFloat("opera" === t[1] && t[4] ? t[4] : t[2]), e = "ie" === e ? "Internet Explorer" : e.replace(/^[a-z]/, function(t) {
            return t.toUpperCase()
        }), e + " " + i)
    }, i.prototype.setBrowser = function(t) {
        "string" == typeof t && t && (r = t)
    }, i.prototype.os = function() {
        if (s) return s;
        for (var t = 0, e = "Unknown", i = [
            [/Win16/, "Windows 3.11"],
            [/(Windows 95|Win95|Windows_95)/, "Windows 95"],
            [/(Win 9x 4.90|Windows ME)/, "Windows ME"],
            [/(Windows 98|Win98)/, "Windows 98"],
            [/Windows CE/, "Windows CE"],
            [/(Windows NT 5.0|Windows 2000)/, "Windows 2000"],
            [/(Windows NT 5.1|Windows XP)/, "Windows XP"],
            [/Windows NT 5.2/, "Windows Server 2003"],
            [/Windows NT 6.0/, "Windows Vista"],
            [/(Windows 7|Windows NT 6.1)/, "Windows 7"],
            [/(Windows 8.1|Windows NT 6.3)/, "Windows 8.1"],
            [/(Windows 8|Windows NT 6.2)/, "Windows 8"],
            [/(Windows NT 10)/, "Windows 10"],
            [/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/, "Windows NT 4.0"],
            [/Android/, "Android"],
            [/OpenBSD/, "Open BSD"],
            [/SunOS/, "Sun OS"],
            [/(Linux|X11)/, "Linux"],
            [/(iPhone|iPad|iPod)/, "iOS"],
            [/Mac OS X/, "Mac OS X"],
            [/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/, "Mac OS"]
        ], n = navigator.userAgent + ""; t < i.length; t++)
            if (i[t][0].test(n)) {
                e = i[t][1];
                break
            }
        return s = e
    }, i.prototype.setOS = function(t) {
        "string" == typeof t && t && (s = t)
    }, i.prototype.cookieEnabled = function() {
        return navigator.cookieEnabled
    }, i.prototype.flashVersion = function() {
        function t(t) {
            return (t.match(/\d+/g) || []).slice(0, 3).join(",")
        }
        var e, i, n, o, r;
        if (a) return a;
        e = "0,0,0";
        try {
            n = new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6")
        } catch (s) {}
        if (n) {
            try {
                n.AllowScriptAccess = "always"
            } catch (s) {
                i = "6,0,0"
            }
            if (i) return a = t(i) || e
        }
        try {
            n = new ActiveXObject("ShockwaveFlash.ShockwaveFlash")
        } catch (s) {}
        if (n) {
            try {
                i = n.GetVariable("$version")
            } catch (s) {}
            if (i) return a = t(i) || e
        }
        return o = navigator.mimeTypes && navigator.mimeTypes["application/x-shockwave-flash"], a = o && o.enabledPlugin && (r = navigator.plugins["Shockwave Flash 2.0"] || navigator.plugins["Shockwave Flash"], i = r && r.description) ? t(i) || e : e
    }, i.prototype.viewportSize = function() {
        return $(window).width() + " x " + $(window).height()
    }, i.prototype.screenSize = function() {
        return window.screen && (screen.width || screen.availWidth) + " x " + (screen.height || screen.availHeight) || "unknown"
    }, i.prototype.colorDepth = function() {
        return window.screen && screen.colorDepth || "unknown"
    }, i.prototype.pixelRatio = function() {
        return window.hidpiCanvasRatio || window.devicePixelRatio || 0
    }, i.prototype.wsTestResult = function() {
        return c
    }, i.prototype.confirmBrowser = function() {
        l = !0
    }, i.prototype.browserConfirmed = function() {
        return l
    }, i.prototype.ready = function() {
        return this._ready.promise()
    }, i.prototype.state = function() {
        return {
            os: this.os(),
            browser: this.browser(),
            browserConfirmed: l,
            cookieEnabled: this.cookieEnabled(),
            flashVersion: this.flashVersion(),
            websocketTest: this.wsTestResult(),
            viewportSize: this.viewportSize(),
            screenSize: this.screenSize(),
            colorDepth: this.colorDepth(),
            pixelRatio: this.pixelRatio()
        }
    }, TradingView.BrowserInfo = i, t.exports = i
}, function(t, e, i) {
    (function(e, n, o) {
        "use strict";

        function r(t) {
            if (this._freeProductIds = ["tv-scripting", "tv-basicstudies", "tv-prostudies", "Script$USER", "Script$EDGR", "ESD$TV"], !t) return this._products = this._discounts = {}, void(this._offers = this._order = this._devIds = []);
            this.MARKET_DESCRIPTION_COPY = $.t(this.MARKET_DESCRIPTION_COPY), this._products = t.products, this._discounts = t.discounts, this._offers = t.offers;
            var e = this._collectSubOffers();
            this._offers = this._offers.concat(e), this._devIds = t.devIds, this._order = t.order, loginStateChange.subscribe(this, this.onLoginStateChange)
        }
        var s = i(18);
        r.prototype._collectSubOffers = function() {
            var t, e, i, n, o = [];
            for (t = 0; t < this._offers.length; ++t) e = this._offers[t], i = this._products[e], i && (n = i.subproduct_ids, n && (o = o.concat(n)));
            return o
        }, r.prototype.PRODUCT_TYPES = {
            pro_plan: 1,
            study_package: 2,
            news_feed: 3
        }, r.prototype.MARKET_DESCRIPTION_COPY = 'These trading products are integrated in TradingView thanks to our <a href="/marketplace/" target=_blank>Partner Program for Developers</a>. These are independent, unaffiliated studies, which are not part of TradingView subscriptions &ndash; these are separate tools that you buy if you want. Description, algorithm, support and prices are all determined by the author.', r.prototype.onLoginStateChange = function(t) {
            if (!t) {
                var e = this;
                $.get("/market/shopconf/", function(t) {
                    e._offers = t.offers || [];
                    var i = e._collectSubOffers();
                    e._offers = e._offers.concat(i), e._order = t.order || [], this._products = t.products || {}, this._discounts = t.discounts || {}
                })
            }
        }, r.prototype.getProduct = function(t) {
            var e, i;
            return t in this._products ? this._products[t] : t in this._discounts ? (e = this._discounts[t], i = $.extend({}, this._products[e.product]), e.cost && (i.cost = e.cost), e.cost_annual && (i.cost_annual = e.cost_annual), e.cost_biennial && (i.cost_biennial = e.cost_biennial), void 0 !== e.free_months && (i.free_months = e.free_months), void 0 !== e.upgrade_from_m && (i.upgrade_from_m = e.upgrade_from_m), i) : {}
        }, r.prototype.getStudies = function() {
            var t, e, i = {};
            for (t = 0; t < this._order.length; t++) e = this._order[t], this._products[e] && this._products[e].type === this.PRODUCT_TYPES.study_package && (i[e] = window.shopConf.products[e]);
            return i
        }, r.prototype.getStudiesOrder = function() {
            return this._order.filter(function(t) {
                return this._products[t] && this._products[t].type === this.PRODUCT_TYPES.study_package
            }, this)
        }, r.prototype.hasPackage = function(t) {
            return this._offers.indexOf(t) >= 0 || this._freeProductIds.indexOf(t) >= 0
        }, r.prototype.hasPaidSubscription = function() {
            return this._offers.length ? !0 : !!(window.user && window.user.pro_plan in {
                pro: 1,
                pro_realtime: 1,
                pro_premium: 1
            })
        }, r.prototype._showDialog = function(t, i) {
            var n, o, r, a;
            i = i || {}, TVDialogs.createModalDialog("", {
                noHeader: !0,
                addClass: "billing-cycle-dialog ",
                appearance: "flat"
            }), n = TVDialogs.modalDialog.find("._tv-dialog-content"), o = "y", r = this.getProduct(t), a = [r.cost_annual, r.cost], n.html(e.render(s.dialogs.billingCycleSelection, {
                selected_cycle: o,
                product_name: t,
                product_title: r.name,
                price_1_m: a[0].toFixed(2),
                price_1_y: (12 * a[0]).toFixed(2),
                price_2_m: a[1].toFixed(2),
                price_2_y: (12 * a[1]).toFixed(2),
                savings: (12 * a[1] - 12 * a[0]).toFixed(2)
            })), i.disableInactive ? n.find(".bcd-choice:not(.active)").addClass("disabled") : n.find(".bcd-choice").on("click", function(t) {
                t.preventDefault();
                var e = $(this);
                $(".bcd-choice.active").removeClass("active"), e.addClass("active"), o = e.data("cycle")
            }), n.find(".bcd-continue-button").on("click", function(e) {
                e.preventDefault(), TradingView.visitPaymentPage(t, o, {
                    fixedCycle: i.disableInactive
                })
            }), TVDialogs.positionDialog(), TVDialogs.applyHandlers(!1)
        }, r.prototype.showBillingCycleDialog = function(t) {
            this._showDialog(t)
        }, r.prototype.upgradeToAnnualBilling = function(t) {
            TradingView.visitPaymentPage(t, "y", {
                fixedCycle: !0
            })
        }, r.prototype.visitExchangesPage = function(t) {
            t = t || {}, TradingView.visitPaymentPage("pro", "y", {
                exchangesOnly: !0,
                newWindow: t.newWindow
            })
        }, r.prototype.showProductDialog = function(t) {
            var e, i = this.getProduct(t),
                n = "";
            n = this.hasPackage(t) ? this.prepareProductPage(i) : this.prepareProductOfferPage(i), e = TVDialogs.createDialog(i.name, {
                width: "600px",
                content: n
            }), this.hasPackage(t) || e.find(".insert-study-subscribe-button").click(function() {
                TradingView.visitPaymentPage(t)
            }), TVDialogs.positionDialog(e), TVDialogs.applyHandlers(e)
        }, r.prototype.productPageTemplates = function(t) {
            var e = '<div class="insert-study-offer-header"><div class="insert-study-offer-info-header-wrap"><div class="insert-study-offer-info-header-name"><span>{{offer.name}}</span></div><div class="insert-study-offer-info-logo-wrap"><a href="{{offer.logo_link}}" rel="nofollow" target="_blank"><img class="insert-study-offer-info-logo" src="{{{ logo }}}"/></a></div></div><div class="insert-study-offer-info-subheader">{{#showFirstLinks}}<a href="{{ offer.product_link }}" target="_blank" rel="nofollow">' + $.t("Website") + '</a> | <a href="{{ offer.support_link }}" target="_blank" rel="nofollow">' + $.t("Support") + '</a>{{/showFirstLinks}}{{#account}}{{#showSeparator}} | {{/showSeparator}}<a href="https://www.tradingview.com/u/{{offer.tv_account}}/" target="_blank">' + $.t("TradingView Account") + "</a>{{/account}}</div></div>",
                i = '<div class="insert-study-offer-info"><div class="insert-study-offer-info-description">{{{offer.description}}}{{#offer.description_additional_product}}{{{offer.description_additional_product}}}{{/offer.description_additional_product}}</div><a class="insert-study-subscribe-button" href="/u/{{username}}/#billing" target="_blank">' + $.t("EDIT SUBSCRIPTION") + '</a>{{#learnMore}}<a class="insert-study-button" href="/market/{{offer.text_id}}/" target="_blank">' + $.t("LEARN MORE") + '</a>{{/learnMore}}</div>{{#descr}}<div class="insert-study-offer-description">{{{ descr }}}</div>{{/descr}}',
                n = '<div class="insert-study-offer-info"><div class="insert-study-offer-info-description">{{{offer.description}}}{{#offer.description_additional_offer}}{{{offer.description_additional_offer}}}{{/offer.description_additional_offer}}</div><div class="insert-study-offer-info-screenshots">{{#screenshots}}<a rel="{{offer.text_id}}" class="fb-start" href="/static/images/indicators/screenshots/big-{{{.}}}"><img src="/static/images/indicators/screenshots/{{{.}}}"></a>{{/screenshots}}</div>{{#pro_realtime_needed}}<a class="insert-study-button" href="/gopro/" target="_blank" onclick="TradingView.trackGoProPageTransition(\'proRTProduct\')">' + $.t("Go PRO") + '</a>{{/pro_realtime_needed}}{{^pro_realtime_needed}}<span class="insert-study-subscribe-button">' + $.t("SUBSCRIBE FOR ${{ cost }}") + "/" + $.t("M", {
                        context: "dates"
                    }) + '</span>{{#learnMore}}<a class="insert-study-button" href="/market/{{offer.text_id}}/" target="_blank">' + $.t("LEARN MORE") + '</a>{{/learnMore}}{{/pro_realtime_needed}}</div>{{#descr}}<div class="insert-study-offer-description">{{{ descr }}}</div>{{/descr}}';
            return "product" === t ? e + i : "offer" === t ? e + n : void 0
        }, r.prototype.prepareProductPage = function(t, i) {
            var n, o, r;
            return i = i || "product", n = ["tv-volumebyprice", "tv-fxwirepro"].indexOf(t.text_id) < 0, o = t.product_link !== "https://www.tradingview.com/u/" + t.tv_account + "/", r = {
                offer: t,
                descr: "tv-volumebyprice" === t.id ? "" : this.MARKET_DESCRIPTION_COPY,
                logo: this.offerLogoSrc(t),
                username: user.username,
                account: t.tv_account,
                showSeparator: o && t.tv_account,
                learnMore: n,
                showFirstLinks: o
            }, "offer" === i && $.extend(r, {
                cost: (t.cost || t.cost_annual).toFixed(2),
                screenshots: t.screenshots,
                pro_realtime_needed: t.included_in_plans && t.included_in_plans.indexOf("pro_realtime") > -1
            }), e.render(this.productPageTemplates(i), r)
        }, r.prototype.prepareProductOfferPage = function(t) {
            return this.prepareProductPage(t, "offer")
        }, r.prototype.offerLogoSrc = function(t) {
            var e = "/static/images/indicators/logos/";
            return t.has_logo ? e + t.text_id + ".png" : null
        }, r.prototype.updatePaymentInfo = function(t) {
            var i, o;
            t = t || {}, i = {
                address: !0,
                credentials: !0,
                email: !0,
                title: $.t("Update Payment Method"),
                api_host: window.initData.paypal_api_host,
                user: window.user,
                message: "<p>" + $.t("Your account will be charged $0.01 in order to verify it.") + " " + $.t("All your current subscriptions will be updated to use the new account.") + "</p>",
                okText: $.t("Save changes"),
                addressPlaceholder: $.t("Enter your new address")
            }, n.extend(i, t), o = e.render(s.dialogs.paymentMethod, i, s), TVDialogs.createModalDialog(i.title, {
                addClass: "payment-method-dialog",
                width: "500px",
                content: o,
                noHeader: !0
            }), TVDialogs.positionDialog(), TVDialogs.applyHandlers(null, {
                doNotCloseOnBgClickIfShadowbox: !0
            }), i.address && this.assignAddressAutocomplete(TVDialogs.modalDialog), this.createChangePaymentMethodTransaction(t.startTrial), this.assignPaymentDialogHandlers()
        }, r.prototype.createChangePaymentMethodTransaction = function(t) {
            $.post("/paypal/update-payment-info-begin/", {
                start_trial: t
            })
        }, r.prototype.assignAddressAutocomplete = function(t) {
            var e = t.find(".address-autocomplete");
            e.length || console.warn($.t("No address input to apply autocomplete")), e.each(function(t) {
                function e(t) {
                    return l.find('[autocomplete-name="' + t + '"]')
                }

                function i() {
                    r = new google.maps.places.Autocomplete(a.get(0), {
                        types: ["geocode"]
                    }), google.maps.event.addListener(r, "place_changed", function() {
                        n()
                    })
                }

                function n() {
                    var t, i, n, o, s = r.getPlace(),
                        a = $();
                    for (t in h) a = e(t), a.val(""), a.removeAttr("disabled");
                    for (i = 0; i < s.address_components.length; i++) n = s.address_components[i].types[0], h[n] && (o = s.address_components[i][h[n]], e(n).val(o), "country" === n && e("country_code").val(s.address_components[i].short_name));
                    for (i = 0; i < c.length; i++)
                        if (a = e(c[i]), !a.val()) {
                            a.focus();
                            break
                        }
                }

                function o() {
                    navigator.geolocation && navigator.geolocation.getCurrentPosition(function(t) {
                        var e = new google.maps.LatLng(t.coords.latitude, t.coords.longitude);
                        r.setBounds(new google.maps.LatLngBounds(e, e))
                    })
                }
                var r, s, a = $(this),
                    l = a.closest("table"),
                    c = ["route", "locality", "administrative_area_level_1", "country"],
                    h = {
                        route: "long_name",
                        locality: "long_name",
                        administrative_area_level_1: "short_name",
                        country: "long_name",
                        postal_code: "short_name"
                    };
                if (window.google) e("country").change(function() {
                    e("country_code").val("")
                }), i(), a.focus(o);
                else {
                    console.error("Autocomplete requires 'https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places&language=en' to be loaded"), a.hide();
                    for (s in h) a = e(s), a.val(""), a.removeAttr("disabled")
                }
            })
        }, r.prototype.assignPaymentDialogHandlers = function(t, e, i, o, r) {
            function s(t) {
                $("#order-subscribe").toggleClass("process", t), p = !!t
            }

            function a(t) {
                var e = t.find('input[name="ZIP"]'),
                    i = t.find('input[name="STREET"]'),
                    n = t.find('input[name="CITY"]'),
                    o = t.find('input[name="STATE"]'),
                    r = t.find('input[name="COUNTRY"]'),
                    s = t.find('input[name="COUNTRYCODE"]');
                return e.length || i.length || n.length || o.length || r.length || s.length ? {
                    zip: e.val(),
                    street: i.val(),
                    city: n.val(),
                    state: o.val(),
                    country: r.val(),
                    countrycode: s.val()
                } : {}
            }

            function l(t) {
                return t.zip && t.street && t.city && t.state && t.country ? TradingView.isASCII(t.zip) && TradingView.isASCII(t.street) && TradingView.isASCII(t.city) && TradingView.isASCII(t.state) && TradingView.isASCII(t.country) ? !0 : (TVDialogs.showError($.t("Please use only latin characters in address fields")), s(!1), !1) : (TVDialogs.showError($.t("All fields are required")), s(!1), !1)
            }

            function c(t) {
                return /^\d+$/.test(t)
            }

            function h(t, e) {
                return c(t) && c(e) && (t.startsWith("3") && 4 === e.length || (t.startsWith("4") || t.startsWith("5")) && 3 === e.length)
            }

            function d(t, e) {
                return c(t) && 2 === t.length && 0 < parseInt(t) && parseInt(t) < 13 && c(e) && 2 === e.length
            }

            function u(t) {
                var e = !0;
                return $.ajax({
                    type: "POST",
                    async: !1,
                    url: "/paypal/check/",
                    data: t,
                    success: function(t) {
                        t.error && (TVDialogs.showError(t.error), e = !1), t.token && t.token_id && ($('input[name="SECURETOKEN"]').val(t.token), $('input[name="SECURETOKENID"]').val(t.token_id))
                    },
                    error: function() {
                        e = !1
                    }
                }), e
            }
            var p = !1,
                f = t || "cc-form",
                _ = e || "",
                g = i || "",
                m = o || {};
            r = r || "", $("#cc-form input:not(.address-autocomplete)").on("keypress", function(t) {
                function e(t) {
                    return null == t.which ? t.keyCode < 32 ? null : String.fromCharCode(t.keyCode) : 0 !== t.which && 0 !== t.charCode ? t.which < 32 ? null : String.fromCharCode(t.which) : null
                }
                /^[a-zA-Z0-9 ,.\-:@_'"()]*?$/.test(e(t)) ? $("._tv-dialog-message").hide() : (t.preventDefault(), TVDialogs.showMessage($.t("Please, use only latin symbols"), $("._tv-dialog"), {
                withClose: !0
            }))
}), $("#cc-form").submit(function() {
    var t, e, i, o, p, f, v, y, w, b, S, T, x;
    if (s(!0), t = $(this), e = a(t), i = $('input[name="BILLTOEMAIL"]'), p = $('input[name="ACCT_visible"]').val().replace(/\D/g, ""), f = $('[name="CVV2"]').val(), v = $('input[name="EXPDATEMM"]').val(), y = $('input[name="EXPDATEYY"]').val(), w = $('input[name="BILLTOFIRSTNAME"]'), b = $('input[name="BILLTOLASTNAME"]'), $('input[name="ACCT"]').val(p), !n.isEmpty(e) && !l(e)) return !1;
    if (!(p && f && v && y)) return TVDialogs.showError($.t("All fields are required")), s(!1), !1;
    if (i.length) {
        if (o = i.val(), !o) return TVDialogs.showError($.t("All fields are required")), s(!1), !1
    } else o = user.email;
    if (w.length && b.length) {
        if (S = w.val(), T = b.val(), !S || !T) return TVDialogs.showError($.t("All fields are required")), s(!1), !1;
        if (!TradingView.isASCII(S) || !TradingView.isASCII(T)) return TVDialogs.showError($.t("Please use only latin characters in your first and last names")), s(!1), !1
    }
    return c(p) && c(f) && c(v) && c(y) ? h(p, f) ? d(v, y) ? ($('input[name="EXPDATE"]').val(v + y), x = !u({
        email: o,
        firstname: S,
        lastname: T,
        billing_cycle: _,
        exchanges_only: g,
        ZIP: e.zip,
        CITY: e.city,
        STATE: e.state,
        COUNTRYCODE: e.countrycode,
        COUNTRY: e.country,
        STREET: e.street,
        child_products: Object.keys(m).join(","),
        is_upgrade_from_m: r
    }), x ? (s(!1), !1) : void 0) : (TVDialogs.showError($.t("Check expiration date")), s(!1), !1) : (TVDialogs.showError($.t("Check credit card number and CVV/CSC code")), s(!1), !1) : (TVDialogs.showError($.t("Credit card fields may contain only digits")), s(!1), !1)
}), $("#oneclick-form").submit(function() {
    var t, e;
    return s(!0), t = a($(this)), n.isEmpty(t) || l(t) ? (e = !u({
        firstname: $('input[name="BILLTOFIRSTNAME"]').val(),
        lastname: $('input[name="BILLTOLASTNAME"]').val(),
        billing_cycle: _,
        exchanges_only: g,
        ZIP: t.zip,
        CITY: t.city,
        STATE: t.state,
        COUNTRYCODE: t.countrycode,
        COUNTRY: t.country,
        STREET: t.street,
        child_products: Object.keys(m).join(","),
        is_upgrade_from_m: r,
        setup_sell: 0
    }), e ? (s(!1), !1) : void 0) : !1
}), $(".order-detail-head").click(function() {
    var t = $(this);
    f = t.data("method"), $(".order-detail-body, .order-detail-head .order-checkbox").removeClass("active"), t.find(".order-checkbox").addClass("active"), $(".order-detail-body." + f).addClass("active"), TVDialogs.positionDialog(), $('[name="BILLTOFIRSTNAME"]').focus()
}), $("#cc-table-csc-help-link").bind("mousedown mouseenter mouseleave mousedownoutside", function(t) {
    var e = $("#cc-table-csc-help");
    "mouseenter" === t.type || "mousedown" === t.type ? e.css({
        top: t.pageY - 92,
        left: t.pageX + 40
    }).fadeIn("fast") : e.hide()
}), $("#order-subscribe").click(function(t) {
    t.preventDefault(), p || (s(!0), $("#" + f).trigger("submit"))
}), TradingView.inputOnTyping($('[name="ACCT_visible"]'), function(t) {
    var t = t.replace(/[^0-9\s]/g, "").replace(/^\D/, "");
    return (t.startsWith("3") && (4 === t.length || 11 === t.length) || (t.startsWith("4") || t.startsWith("5")) && (4 === t.length || 9 === t.length || 14 === t.length)) && (t += " "), t
}, function(t) {
    var e = t.replace(/\D/g, "");
    $('[name="ACCT"]').val(e), (e.startsWith("3") && 15 === e.length || (e.startsWith("4") || e.startsWith("5")) && 16 === e.length) && $('[name="CVV2"]').focus()
}), TradingView.inputOnTyping($('[name="CVV2"]'), function(t) {
    return t.replace(/\D/g, "")
}, function(t) {
    var e = $('[name="ACCT_visible"]').val();
    (4 === t.length || 3 === t.length && (e.startsWith("4") || e.startsWith("5"))) && $('[name="EXPDATEMM"]').focus()
}), TradingView.inputOnTyping($('[name="EXPDATEMM"]'), function(t) {
    var t = t.replace(/\D/g, "").replace(/^[^0,1]/, "");
    return "00" === t ? t = "01" : 12 < parseInt(t) && (t = "12"), t
}, function(t) {
    2 === t.length && $('[name="EXPDATEYY"]').focus()
}), TradingView.inputOnTyping($('[name="EXPDATEYY"]'), function(t) {
    return t.replace(/\D/g, "")
}, function(t) {
    2 === t.length && $('[name="EXPDATEYY"]').blur()
})
}, r.prototype.showBtcProDialog = function() {
    var t, i = is_authenticated && user && "pro_realtime_trial" === user.pro_plan,
        n = e.render('<div class="main"><div class="order-detail-head" data-product="pro"><h3><span class="order-checkbox radio"></span>' + $.t("PRO") + " (" + $.t("save") + ' {{pro_savings}}%<small>*</small>)<div class="btc-price">${{pro_price}}<span class="btc-price-after">&nbsp;/&nbsp;' + $.t("year") + '</span></div></h3></div>{{#pro_plus_early_access}}<div class="order-detail-head" data-product="pro_realtime"><h3><span class="order-checkbox radio active"></span>' + $.t("PRO Plus Early Access") + " (" + $.t("save") + ' {{pro_plus_early_access_savings}}%<small>*</small>)<div class="btc-price">${{pro_plus_early_access_price}}<span class="btc-price-after">&nbsp;/&nbsp;' + $.t("year") + '</span></div></h3></div>{{/pro_plus_early_access}}{{^pro_plus_early_access}}<div class="order-detail-head" data-product="pro_realtime"><h3><span class="order-checkbox radio active"></span>' + $.t("PRO Plus") + " (" + $.t("save") + ' {{pro_plus_savings}}%<small>*</small>)<div class="btc-price">${{pro_plus_price}}<span class="btc-price-after">&nbsp;/&nbsp;' + $.t("year") + '</span></div></h3></div>{{/pro_plus_early_access}}<div class="order-detail-head" data-product="pro_premium"><h3><span class="order-checkbox radio"></span>' + $.t("PRO Premium") + " (" + $.t("save") + ' {{pro_premium_savings}}%<small>*</small>)<div class="btc-price">${{pro_premium_price}}<span class="btc-price-after">&nbsp;/&nbsp;' + $.t("year") + '</span></div></h3></div><p class="savings-desc">* ' + $.t("Compared to monthly billing") + '</p><div class="order-purchase-button"><a href="#subscribe" class="green" id="order-subscribe">' + $.t("Subscribe with bitcoin") + "</a></div></div>", {
            pro_price: (12 * this._products.pro.cost_annual).toFixed(2),
            pro_savings: Math.ceil(100 * (1 - this._products.pro.cost_annual / this._products.pro.cost)),
            pro_plus_price: (12 * this._products.pro_realtime.cost_annual).toFixed(2),
            pro_plus_savings: Math.ceil(100 * (1 - this._products.pro_realtime.cost_annual / this._products.pro_realtime.cost)),
            pro_premium_price: (12 * this._products.pro_premium.cost_annual).toFixed(2),
            pro_premium_savings: Math.ceil(100 * (1 - this._products.pro_premium.cost_annual / this._products.pro_premium.cost)),
            pro_plus_early_access: i,
            pro_plus_early_access_price: (12 * this._discounts.pro_realtime_discount.cost_annual).toFixed(2),
            pro_plus_early_access_savings: Math.ceil(100 * (1 - this._discounts.pro_realtime_discount.cost_annual / this._products.pro_realtime.cost))
        });
    TVDialogs.createModalDialog($.t("Choose your PRO plan"), {
        addClass: "payment-method-dialog btc-payment-dialog",
        width: "500px",
        content: n
    }), TVDialogs.positionDialog(), TVDialogs.applyHandlers(null, {
        doNotCloseOnBgClickIfShadowbox: !0
    }), t = i ? "pro_realtime_discount" : "pro_realtime", $("#order-subscribe").click(function(e) {
        e.preventDefault(), TradingView.visitPaymentPage(t, "y", {
            paymentMethod: "bitcoin"
        })
    }), $(".order-detail-head").click(function() {
        var e = $(this);
        t = e.data("product"), $(".order-detail-body, .order-detail-head .order-checkbox").removeClass("active"), e.find(".order-checkbox").addClass("active")
    })
}, r.prototype.offers = function() {
    return this._offers
}, r.prototype.devIds = function() {
    return this._devIds
}, r.prototype.hash = function() {
    var t, e = this._offers.slice(0),
        i = this._devIds.slice(0);
    return e.sort(), i.sort(), t = {
        offers: e,
        devIds: i
    }, JSON.stringify(t)
}, r.prototype.canUpgradeFromMtoY = function() {
    var t = pro.getProduct(user.pro_plan);
    return !(user.pro_being_cancelled || !t || "m" !== user.pro_plan_billing_cycle || !user.pro_plan_activated)
}, r.prototype.getPaidMonths = function() {
    var t = o(user.pro_plan_activated);
    return Math.abs(o().diff(t, "months")) + 1
}, r.prototype.getYearUpgradePriceInfo = function() {
    var t, e, i, n, o, r, s, a = this.getProduct(user.pro_plan);
    if (this.canUpgradeFromMtoY() && (t = this.getPaidMonths(), !(0 === t || t > 3))) return e = 12, i = a.cost * e, n = t * a.cost, o = 6, r = e - t, s = a.cost * (r - o), {
        pro_pack: a,
        year_cost: +(i - n).toFixed(2),
        spent: +n.toFixed(2),
        paid_months: t,
        unpaid_months: r,
        cost: +s.toFixed(2)
    }
}, TradingView.Pro = r, t.exports = r
}).call(e, i(86), i(8), i(23))
}, function(t, e, i) {
    "use strict";
    var n = i(313),
        o = function() {
            function t() {
                TVLocalStorage.setItem(a + l, document.hidden), TVXWindowEvents.emit("desktop-notification-tab-visibility-request")
            }

            function e(t) {
                var e = t.split("\n");
                return e.length > 1 && (t = e[0]), t = t.trim(), (t.length > c || e.length > 1) && (t = t.substring(0, c) + "..."), t
            }

            function i() {
                return window.Notification && window.Notification.permissionLevel ? window.Notification.permissionLevel() : window.Notification.permission
            }

            function o(t) {
                var e = i();
                "granted" === e && "function" == typeof t ? t() : "default" === e && window.Notification.requestPermission(function(e) {
                    "granted" === e && "function" == typeof t && t()
                })
            }

            function r(t, i, n) {
                var o = new window.Notification(t, {
                    body: e(i),
                    icon: n || "/static/images/desktop-notification.png"
                });
                return o.onclick = function() {
                    window.focus()
                }, setTimeout(o.close.bind(o), 5e3), o
            }

            function s(e, s, c) {
                n.ownPushStream() && "denied" !== i() && o(function() {
                    t(), setTimeout(function() {
                        "false" !== TVLocalStorage.getItem(a + l) && document.hidden && r(e, s, c)
                    }, 100)
                })
            }
            var a, l, c;
            return TVLocalStorage.setItem(a + l, document.hidden), a = "tvdesktopnotifications.", l = "tabs-hidden", TVXWindowEvents.on("desktop-notification-tab-visibility-request", function() {
                "true" === TVLocalStorage.getItem(a + l) && TVLocalStorage.setItem(a + l, document.hidden)
            }), c = 30, window.Notification ? {
                show: s,
                askPermission: o
            } : {
                show: function() {},
                askPermission: function() {}
            }
        }();
    t.exports = o
}, function(t, e, i) {
    (function(t, e) {
        "use strict";

        function n(e, i) {
            this.options = $.extend({
                throttleTimeout: 125
            }, i), this._connected = !1, this._symbol_data = {}, this._subscriptions = {}, this._delayed_subscriptions = [], this.onConnect = new t, this.onDisconnect = new t, this._quoteApi = new o(ChartApiInstance), this._type = e || "full", this.connect(), this._delayUpdateFastSymbols = TradingView.debounce(this._updateFastSymbols, 250), this._throttledSymbolData = {}, this._formatterValuesCache = {}, this._waitingForFormatters = {}, this.fieldsSent = new $.Deferred
        }
        var o, r = i(83).PriceFormatter;
        o = i(361), n.prototype.type_fields = {
            minichart: ["lp", "open_time", "series_data", "description"],
            simple: ["ch", "chp", "lp", "fractional", "minmov", "minmove2", "original_name", "pricescale", "pro_name", "update_mode", "volume", "symbol_status", "description", "exchange", "short_name", "current_session", "type", "is_tradable"],
            "simple-detailed": ["ch", "chp", "lp", "fractional", "minmov", "minmove2", "original_name", "pricescale", "pro_name", "update_mode", "symbol_status", "description", "exchange", "short_name", "current_session", "type", "volume", "open_price", "high_price", "low_price", "market_cap_basic", "prev_close_price", "earnings_per_share_basic_ttm", "price_earnings_ttm", "beta_1_year"],
            full: []
        }, n.prototype.connect = function(t) {
            this._quoteApi.connect(this.quoteHandler.bind(this))
        }, n.prototype.quoteHandler = function(t) {
            var e = t.method,
                i = t.params;
            switch (e) {
                case "connected":
                    this._connected || (this._connected = !0, this.onConnected());
                    break;
                case "quote_list_fields":
                    break;
                case "quote_symbol_data":
                    this.onSymbolData(i[0]);
                    break;
                case "disconnected":
                    this._connected && (this._connected = !1, this.onDisconnect.fire())
            }
        }, n.prototype.onConnected = function() {
            this.setFields();
            var t = Object.keys(this._symbol_data);
            t.length && this._quoteApi.quoteAddSymbols(t, {
                forcePermission: !0
            }), this._delayed_subscriptions.forEach(function(t) {
                this.subscribe.apply(this, t)
            }, this), this._delayed_subscriptions = [], this.onConnect.fire()
        }, n.prototype.setFields = function() {
            var t = n.prototype.type_fields[this._type];
            t && t.length && this._quoteApi.quoteSetFields(t), this.fieldsSent.resolve()
        }, n.prototype.onSymbolData = function(t) {
            var e = t.symbolname,
                i = this._throttledSymbolData[e];
            i || (i = this._throttledSymbolData[e] = {
                fnDispatch: TradingView.throttle(this.dipatchSymbolData.bind(this), this.options.throttleTimeout)
            }), i.cache ? $.extend(!0, i.cache, t) : i.cache = t, i.fnDispatch(e)
        }, n.prototype.dipatchSymbolData = function(t) {
            var e, i, n = this._symbol_data[t],
                o = this._throttledSymbolData[t].cache;
            if (delete this._throttledSymbolData[t].cache, this._symbol_data[t]) {
                $.extend(!0, n, o);
                for (e in this._subscriptions) i = this._subscriptions[e], i[t] && i[t].forEach(function(t) {
                    t(n, o)
                })
            }
        }, n.prototype.subscribe = function(t, e, i) {
            var n, o;
            return this._connected ? (this._subscriptions[t] = this._subscriptions[t] || {}, n = this._subscriptions[t], e = [].concat(e), o = [], e.forEach(function(t) {
                this._symbol_data[t] ? n && n[t] || this._symbol_data[t].subscribers_count++ : (this._symbol_data[t] = {
                    subscribers_count: 1
                }, o.push(t)), n[t] = n[t] || [], n[t].push(i), n[t].fast = !0, this._symbol_data[t] && this._symbol_data[t].values && i(this._symbol_data[t], this._symbol_data[t])
            }, this), void(o.length && (this._quoteApi.quoteAddSymbols(o, {
                forcePermission: !0
            }), this._delayUpdateFastSymbols()))) : void this._delayed_subscriptions.push(arguments)
        }, n.prototype.unsubscribe = function(t, e, i) {
            var n, o = this._subscriptions[t];
            o && (o[e] && i ? (n = o[e].indexOf(i), ~n && o[e].splice(n, 1), o[e].length || delete o[e]) : delete o[e]), o && 0 === Object.keys(o).length && delete this._subscriptions[t], this._symbol_data.hasOwnProperty(e) && (o && !o[e] && this._symbol_data[e].subscribers_count--, this._symbol_data[e].subscribers_count || (delete this._symbol_data[e], this._quoteApi.quoteRemoveSymbols([e]), this._delayUpdateFastSymbols()))
        }, n.prototype.setFastSymbols = function(t, e) {
            var i, n;
            if (this._subscriptions[t]) {
                i = this._subscriptions[t];
                for (n in i) i[n].fast = -1 !== e.indexOf(n)
            }
            this._delayUpdateFastSymbols()
        }, n.prototype._updateFastSymbols = function() {
            if (this._connected) {
                var t = this._fastSymbols();
                0 === t.length ? this._quoteApi.quoteHibernateAll() : this._quoteApi.quoteFastSymbols(t)
            }
        }, n.prototype._delayUpdateFastSymbols = n.prototype._updateFastSymbols, n.prototype._fastSymbols = function() {
            var t, e, i, n = [];
            for (t in this._subscriptions) {
                e = this._subscriptions[t];
                for (i in e) e[i].fast && n.push(i)
            }
            return n = TradingView.uniq(n)
        }, n.prototype.formatter = function(t) {
            function e(t) {
                var e = new r(t.pricescale, t.minmov, t.fractional, t.minmove2);
                return "forex" === t.type && (e.lastCharSup = !0), e
            }

            function i(t) {
                return t && null != t.pricescale && null != t.minmov && null != t.fractional && null != t.minmove2
            }
            var n, o = this;
            return this._waitingForFormatters[t] ? this._waitingForFormatters[t] : (n = new Promise(function(n, r) {
                if (o._formatterValuesCache[t]) n(e(o._formatterValuesCache[t]));
                else {
                    var s = TradingView.guid();
                    o.subscribe(s, [t], function(a) {
                        a.error && (o._waitingForFormatters[t] = null, r(a.error)), i(a.values) && (o._waitingForFormatters[t] = null, o._formatterValuesCache[t] = a.values, n(e(a.values)), o.unsubscribe(s, t))
                    })
                }
            }), this._waitingForFormatters[t] = n, n)
        }, TradingView.QuoteSessionMultiplexer = n, void 0 !== e && e && e.exports && (e.exports = n)
    }).call(e, i(50), i(4)(t))
}, function(t, e, i) {
    (function(t) {
        "use strict";

        function e(t) {
            this._chartApi = t, this._sessionid = "qs_" + TradingView.randomHash(), this._sessionstarted = !1
        }
        e.prototype.connected = function() {
            return this._chartApi.connected()
        }, e.prototype.connect = function(t) {
            this._globalHandler = t, this._chartApi.createSession(this._sessionid, this), this._chartApi.connect()
        }, e.prototype.disconnect = function() {
            this._chartApi.disconnect()
        }, e.prototype.quoteAddSymbols = function(t, e) {
            t = [].concat(t), e && e.forcePermission && (t = t.concat({
                flags: ["force_permission"]
            })), this._chartApi.quoteAddSymbols(this._sessionid, t)
        }, e.prototype.quoteRemoveSymbols = function(t) {
            this._chartApi.quoteRemoveSymbols(this._sessionid, t)
        }, e.prototype.quoteFastSymbols = function(t) {
            this._chartApi.quoteFastSymbols(this._sessionid, t)
        }, e.prototype.quoteSetFields = function(t) {
            this._chartApi.quoteSetFields(this._sessionid, t)
        }, e.prototype.onMessage = function(t) {
            switch (t.method) {
                case "connected":
                    this._sessionstarted || (this._chartApi.quoteCreateSession(this._sessionid), this._sessionstarted = !0);
                    break;
                case "disconnected":
                    this._sessionstarted = !1;
                    break;
                case "critical_error":
            }
            this._globalHandler(t)
        }, e.prototype.quoteHibernateAll = function(t) {
            this._chartApi.quoteHibernateAll(this._sessionid)
        }, TradingView.QuoteSession = e, void 0 !== t && t && t.exports && (t.exports = e)
    }).call(e, i(4)(t))
}, function(t, e, i) {
    (function(t, e) {
        "use strict";

        function n(i, n) {
            this.$button = $(".market-summary-toggle"), this.$header = i, this.$body = n, this.animationInProcess = new t(!1), this.bodyIsVisible = new t(!1), this.toggled = new e, this.initHeader(), this.$button.click(this.toggle.bind(this));
            var o = !0;
            this.toggle(TVSettings.getBool("marketsummary.opened", o)), loginStateChange.subscribe(this, function() {
                is_authenticated && this.toggle(TVSettings.getBool("marketsummary.opened", o))
            })
        }
        var o = i(363),
            r = i(383),
            s = i(380),
            a = i(320);
        $(function() {
            var t = $("#market-summary-header"),
                e = $("#market-summary-body");
            t.length && e.length && (TradingView.marketSummary = new n(t, e))
        }), n.POPULAR_QUOTES_TABED_WIDGET = 0, n.ACTIVE_QUOTES_TABED_WIDGET = 1, n.prototype.initHeader = function() {
            this._initQouteTickers(), this._bindChartSearchToLinks()
        }, n.prototype.toggle = function(t) {
            function e() {
                n.animationInProcess.setValue(!1), n.toggled.fire(i)
            }
            var i, n = this;
            n.animationInProcess.value() || (n.animationInProcess.setValue(!0), n.$button.toggleClass("opened", t), i = n.$button.hasClass("opened"), i ? n.$body.slideDown(function() {
                e(), n.chart() || n._initChart(), n.activeQuotes() || n._initActiveQuotes(), n.popularQuotes() || n._initPopularQuotes()
            }) : n.$body.slideUp(e), n.bodyIsVisible.setValue(i), TVSettings.setValue("marketsummary.opened", i))
        }, n.prototype._initQouteTickers = function() {
            this.$header.find(".market-summary-quote-ticker").each(function() {
                var t = $(this);
                new a(t.data("symbol"), t)
            })
        }, n.prototype.chart = function() {
            return this._chart
        }, n.prototype.activeQuotes = function() {
            return this._activeQuotes
        }, n.prototype.popularQuotes = function() {
            return this._popularQuotes
        }, n.prototype._initChart = function() {
            function t(t, e) {
                "boolean" != typeof e && (e = !t.hasClass("chart-legend-colored"));
                var i = t.data();
                t.find("a").css("border-left-color", e ? i.color : "transparent"), t.toggleClass("chart-legend-colored", e)
            }
            var e, i, n, o = this,
                r = [],
                a = o.$header.find(".market-summary-quote-ticker.chart-legend");
            for (e = 0; e < a.length; e++) i = a.eq(e), n = i.data(), r.push({
                symbol: n.symbol,
                options: {
                    line: {
                        color: n.color
                    }
                }
            }), t(i, !0);
            o._chart = new s(r, o.$body.find(".tickers-chart"), {
                showMessage: !1,
                timeframe: {
                    visible: !0,
                    value: "5y"
                },
                showTimeframes: !0,
                chartOptions: {
                    minHeight: 18,
                    grid: {
                        xIsVisible: !1,
                        yIsVisible: !0,
                        line: {
                            width: 1,
                            style: CanvasEx.LINESTYLE_DASHED,
                            color: "#3a3b43"
                        }
                    },
                    yScale: {
                        visible: !0,
                        position: "right",
                        isPercentage: !0,
                        paddingLeft: 10,
                        paddingRight: 4,
                        marginInPercents: 10,
                        font: {
                            size: 10,
                            family: "Helvetica",
                            color: "#57585d"
                        },
                        drawOverPlotArea: !1,
                        drawTickMarkLine: !1,
                        maxTickMarkAmount: 5
                    },
                    xScale: {
                        visible: !1
                    },
                    plot: {
                        line: {
                            width: 2
                        },
                        belowLineFillStyle: "transparent",
                        aboveLineFillStyle: "transparent"
                    },
                    loading: {
                        showWhileNoPlots: !0
                    }
                }
            }), o.bodyIsVisible.subscribe(function(e) {
                e ? o._chart.connect() : o._chart.disconnect(), a.each(function() {
                    t($(this), e)
                })
            }), o.animationInProcess.subscribe(function(t) {
                t ? o._chart.widget().unbindOnResize() : o.bodyIsVisible.value() && o._chart.widget().bindOnResize()
            })
        }, n.prototype._initActiveQuotes = function() {
            this._activeQuotes = this._createQuotesWidget(n.ACTIVE_QUOTES_TABED_WIDGET, this.$body.find(".active-quotes"))
        }, n.prototype._initPopularQuotes = function() {
            this._popularQuotes = this._createQuotesWidget(n.POPULAR_QUOTES_TABED_WIDGET, this.$body.find(".populars-quotes"))
        }, n.prototype._createQuotesWidget = function(t, e) {
            var i = this,
                n = new r(t, e);
            return i.bodyIsVisible.subscribe(function(t) {
                n.visible.setValue(t)
            }), i.animationInProcess.subscribe(function(t) {
                n.animationInProcess.setValue(t)
            }), this._bindChartSearchToLinks(), n
        }, n.prototype._bindChartSearchToLinks = function(t, e) {
            this.$header.add(this.$body).find("a.chart-link:not(.inited)").addClass("inited").click(function(t) {
                if (o && o.queryField && o.form) {
                    var e = $(this).data("symbol");
                    if (!e) return;
                    o.queryField.val(e).change(), o.form.submit(), t.preventDefault()
                }
            })
        }
    }).call(e, i(17), i(50))
}, function(t, e, i) {
    (function(e, n) {
        "use strict";
        var o, r, s, a, l, c, h, d, u, p, f, _, g, m, v, y, w, b, S, T;
        i(364), o = i(365), r = i(366), s = i(372), a = i(373), l = i(314), c = i(376), h = i(2), d = i(333).SidebarCustomScroll, u = i(379), p = u.MediumWidgetRenderer, f = u.MediumWidgetFundamentals, _ = {}, g = null, m = "/chart/", y = !0, w = !1, b = "en" === window.language, S = "en" === window.language, _.onSearchBySymbol = new e, _.search = function() {
            return g ? g.apply(this, arguments) : void 0
        }, _.setScriptSearchMode = function() {
            m = "/script/", v = "/script/", y = !1, w = !0
        }, _.prepareLayout = function(t, i) {
            var n, o;
            i = i || {}, b && (this.newsProvider = new r("yahoo"), this.newsProvider.init({})), this.container = $(".search-results"), window.is_authenticated && $(window).on("delete-private-idea", function(t, e) {
                this.container.find("#chart-" + e).remove()
            }.bind(this)), this.form = $("#search-form"), this.queryField = this.form.find('input[name="q"]'), this.streamFilter = this.form.find(".stream-select"), this.streamFilterInput = this.streamFilter.find("input[name=stream]"), this.sortFilter = this.form.find(".stream-sort-select"), this.sortFilterInput = this.sortFilter.find("input[name=sort]"), this.byFilter = this.form.find(".filter-by"), this.scriptTypeFilter = this.form.find(".js-script-type-filter"), this.title = {
                $el: $("#search-data-tag-title"),
                render: function(t) {
                    this.$el.empty().append($('<h1 class="search-data-tag-title"></h1>').text(t))
                },
                clear: function() {
                    this.$el.empty()
                }
            }, this.allInfoItems = $(".info-item"), this.$chart = this.allInfoItems.filter(".symbol-mediumchart"), this.$news = this.allInfoItems.filter(".symbol-news"), this.$description = this.allInfoItems.filter(".symbol-description"), this.$fundamentals = this.allInfoItems.filter(".symbol-fundamentals"), this.is_staff = t, this._filterChanged = new e, n = this.queryField, n.on("change keyup", function() {
                $(this).val() ? $(this).siblings(".input-reset").show() : $(this).siblings(".input-reset").hide()
            }).change().siblings(".input-reset").on("click", function() {
                n.val("").change();
                var t = this.streamFilter.data("interface");
                t && t.setValue(this._last_stream, "stream"), this.form.submit()
            }.bind(this)), o = function() {
                n.change(), n.val() ? _.form.submit() : n.focus()
            }, g = function(t) {
                n.val(t), o()
            }, y && h.bindToInput(n, {
                callback: o,
                keepFocus: !0,
                tickerOnly: !0
            }), this._filterStreamChange = new e, TradingView.bindIdeasStreamFilter($(".ideas-streams"), {
                onChange: function(t, e, i) {
                    TradingView.trackStreamFilterChangeEvent(e, i, w), "stream" === e && n.val(""), t.preventDefault(), this.form.submit(), this._filterStreamChange.fire({
                        name: e,
                        val: i
                    })
                }.bind(this)
            }), this._filterStreamChange.subscribe(this, function(t) {
                "sort" === t.name ? -1 !== TradingView.bindIdeasStreamFilter.noTimePeriodsFilters.indexOf(t.val) ? this.sortFilter.data("interface").disabled(!1, "time") : this.sortFilter.data("interface").enabled("time") : "by" === t.name && "me" === t.val && this.sortFilter.data("interface").disabled(!1, "time")
            }), History.replaceState({
                isSearch: !0,
                filterData: this.getFilterState()
            }, document.title, window.location.href), History.Adapter.bind(window, "statechange", function() {
                var t = History.getState();
                t.data && t.data.isSearch && (this.scriptInitedHashChange ? this.scriptInitedHashChange = !1 : this.setFilterState(t.data.filterData), _gaq.push(["_trackPageview", location.pathname + location.search + location.hash]))
            }.bind(this)), this.form.submit(function(t) {
                t.preventDefault(), window.results_count = 0, window.results_total = 0, this.showMore(null, !0), this._filterChanged.fire()
            }.bind(this)), this.initCharts(), this.columnsBalancer = this.container.columnsBalancer({
                gap: 20,
                columnWidth: 486,
                itemsSelector: ".item",
                balanceType: "height",
                fixHeightOnRecalculate: !0
            }), this.container.on("click", "a.chart-page-popup, a.chart-read-more", function() {
                var t, e, i, n;
                return TradingView.isFeatureEnabled("hard-registration") && TradingView.isFeatureEnabled("hard-registration-ideas") && !window.is_authenticated && TradingView.goRegistrateAfterThreeClicks(), t = $(this), e = t.closest(".item").find(".chart-title a").text(), i = TradingView.parsePublishedChartUrl(this.href), n = new l.ChartPage(i.image_url, e, this.href, i.symbol), n && TradingView.historyManager.push(n), !1
            }), this._last_stream = this.streamFilterInput.val(),
                function() {
                    function t(t, o) {
                        var h = n.scrollTop(),
                            d = Math.min(Math.max(c, s + l - h), l);
                        (o || e !== d) && (e = d, h > s ? (i || (r.addClass("static").css({
                            paddingRight: $(document.body).css("padding-right")
                        }), i = !0), a.css({
                            height: d
                        }).find(".active-underline").css({
                            marginTop: (d - 34) / 2 - 1
                        })) : (i && (r.removeClass("static").css({
                            paddingRight: 0
                        }), i = !1), a.css({
                            height: d
                        }).find(".active-underline").css({
                            marginTop: (d - 34) / 2 - 2
                        })))
                    }
                    var e, i, n = $(window),
                        o = $(".search-filter-place"),
                        r = $(".search-filter"),
                        s = o.position().top,
                        a = r.find(".ideas-streams"),
                        l = a.height(),
                        c = 42;
                    loginStateChange.subscribe(null, function() {
                        s = o.position().top
                    }), TradingView.marketSummary && TradingView.marketSummary.toggled.subscribe(null, function() {
                        s = o.position().top
                    }), this.topPositionOffset = function() {
                        return s + (l - c)
                    }, e = null, i = !1, this._filterStreamChange.subscribe(null, function() {
                        t(null, !0)
                    }), $(window).on("scroll", t).on("resize", function() {
                        i && r.css({
                            paddingRight: $(document.body).css("padding-right")
                        })
                    })
                }.bind(this)(), i.notAutoLoad || this.bindAutoLoad(), this._query_data_str = this.form.serialize()
        }, _.bindAutoLoad = function(t) {
            $(window).bind("scrollto", {
                to: "bottom",
                tolerance: t || 600
            }, function() {
                window.results_count < window.results_total && !window.loading && _.showMore(!0)
            })
        }, _.init = function(t, e, i) {
            var n = {};
            t && (_.initSearchBySymbol(t), n.symbol_info = t), i && (n.tag_info = i), $.isEmptyObject(n) || _.updateInfoWidgets(n)
        }, _.getFilterState = function() {
            return this.form.serializeArray().reduce(function(t, e) {
                return t[e.name] = e.value, t
            }, {})
        }, _.setFilterState = function(t, e) {
            this.streamFilter.data("interface") && this.streamFilter.data("interface").setValue(t.stream, "stream"), this.streamFilter.data("interface") && this.streamFilter.data("interface").setValue(t.interval, "interval"), this.sortFilter.data("interface") && this.sortFilter.data("interface").setValue(t.sort, "sort"), this.sortFilter.data("interface") && this.sortFilter.data("interface").setValue(t.time, "time"), this.byFilter.data("interface") && this.byFilter.data("interface").setValue(t.by, "by"), this.scriptTypeFilter.data("interface") && this.scriptTypeFilter.data("interface").setValue(t.script_type, "script_type"), e || (this.queryField.val(t.q).change(), this.form.submit(), this._filterStreamChange.fire({
                name: "sort",
                val: t.sort
            }))
        }, _.filterChanged = function(t, e, i, n, o) {
            var r, s = $.extend({}, this.getFilterState()),
                a = {},
                l = window.location.pathname + window.location.search;
            o = o || "", r = r || "", s.q && (o = o.replace(/\?q=.+$/, "")), s.sort && "trending" !== s.sort && (a.sort = s.sort), s.by && "everyone" !== s.by && (a.by = s.by), s.interval && "all" !== s.interval && (a.interval = s.interval), s.time && "day" !== s.time && "suggested" !== s.sort && "recent" !== s.sort && (a.time = s.time), s.script_type && (a.script_type = s.script_type), t ? (t.full_name_required && (a.exg = t.exchange), o || (o = "/chart/" + t.short_name + "/")) : i && (n || []).length ? o || (o = (v || "/chart/") + n.join(",") + "/") : (!s.q || s.stream && s.q.toLowerCase() === s.stream.toLowerCase() || (a.q = s.q), !o && s.stream && (o = (v || "/chart/") + s.stream + "/"), o || (o = v || "/")), a = $.param(a), r = o, a && (r += "?" + a), r !== l && (this.scriptInitedHashChange = !0), / - TradingView\.?$/.test(e) || (e += " - TradingView"), History.pushState({
                isSearch: !0,
                filterData: s
            }, e, r)
        }, _.showMore = function(t, e) {
            var i, n, o = [],
                r = $('<div id="js-search-page-spinner-container">');
            r.css({
                width: "100%",
                height: "24px",
                opacity: 1,
                position: "relative",
                clear: "both"
            }), this.currentXHR && (this.currentXHR.abort(), this._spinner && (this._spinner.stop(), delete this._spinner), $("#js-search-page-spinner-container").remove()), t || (i = this.streamFilterInput.val(), this._last_stream = i), t ? this.container.append(r) : this.container.addClass("loading").prepend(r), this._spinner = TradingView.unifiedSpinner("mini").spin(r.get(0)), t || (this._query_data_str = $("#search-form").serialize()), o = this._query_data_str + "&s=" + window.results_count, e && (o += "&show_top_users=true"), "trending" === this.sortFilterInput.val() && t && (o += "&showed_charts=" + T.map(function(t) {
                    return t.id
                }).join(",")), window.loading = !0, n = this, this.currentXHR = $.get(m, o, function(e) {
                if (window.loading = !1, window.results_total = e.results.total_found || 0, t) n.addItems(e.html);
                else {
                    _.updateInfoWidgets({
                        symbol_info: e.symbol_info,
                        news: e.news,
                        tag_info: e.tag_info
                    }), n.resetItems(e.html);
                    var i = n.getFilterState();
                    i = $.extend(i, {
                        stream: e.stream,
                        interval: e.interval,
                        sort: e.sort,
                        time: e.time,
                        by: e.by,
                        script_type: e.script_type,
                        q: e.query
                    }), n.setFilterState(i, !0), n.filterChanged(e.symbol_info, e.page_title, e.search_by_tags_only, e.tags, e.required_path), e.symbol_info ? n.initSearchBySymbol(e.symbol_info) : n.is_search_by_symbol && n.endSearchBySymbol()
                }
                window.results_count += e.results.count, TradingView.followButtonToolipAll(), $(".time-upd").timeUpdate(), $(document).trigger("resize"), this._spinner && (this._spinner.stop(), delete this._spinner), r.remove(), n.container.removeClass("loading"), t || $(window).scrollTop() > n.topPositionOffset() + 100 && $("html, body").animate({
                    scrollTop: n.topPositionOffset()
                }, 200)
            })
        }, T = [], _.initCharts = function() {
            this.container.find(".item:not(.inited)").each(function() {
                var t = $(this),
                    e = t.data("info");
                e && $.isPlainObject(e) && (T.push(e), new c(t, {}, e), TradingView.applyReadMoreToChart(t), t.addClass("inited"))
            })
        }, _.addItems = function(t) {
            var e = this;
            e.container.append(t), e.initCharts(), e.columnsBalancer.rescan()
        }, _.resetItems = function(t) {
            var e;
            T = [], e = this, t = t || $($.grep(e.columnsBalancer.items, function(t) {
                    return !$(t).is(e.allInfoItems)
                })).detach() || "", e.allInfoItems = e.allInfoItems.detach(), e.container.empty(), e.container.append(e.allInfoItems), e.container.append(t), e.initCharts(), e.columnsBalancer.reset()
        }, _.initSearchBySymbol = function(t, e) {
            this.is_search_by_symbol = !0, this.streamFilter.data("interface").setValue("", "stream"), this.streamFilterInput.on("change.endSearchBySymbol", function() {
                this.queryField.val("").change()
            }.bind(this)), this.onSearchBySymbol.fire(t)
        }, _.endSearchBySymbol = function(t) {
            this.streamFilterInput.unbind("change.endSearchBySymbol"), this.is_search_by_symbol = !1, this.streamFilter.data("interface").enabled()
        }, _.updateInfoWidgets = function(t) {
            var t = t || {};
            this.updateMediumChart(t.symbol_info), this.updateNews(t.news, t.symbol_info), this.updateDescription(t.tag_info, t.symbol_info), this.updateFundamentals(t.symbol_info)
        }, _.updateMediumChart = function(t) {
            var e, i, n, o;
            return t ? (e = t.resolved_symbol, this.$chart.empty(), this.$chart.show(), f.prototype.quoteSession || f.assignQuoteSession(quoteSessionMultiplexerInstance.full), i = [
                ["prev_close_price", "open_price"],
                ["high_price", "low_price"]
            ], n = [
                ["prev_close_price", "price_earnings_ttm", "earnings_per_share_basic_ttm"],
                ["market_cap_basic", "open_price", "beta_1_year"]
            ], o = {
                NYSE: !0,
                NASDAQ: !0,
                AMEX: !0,
                OTC: !0
            }, void(this._chart = new p(this.$chart, e, {
                height: 324,
                showSymbolButtons: !0,
                hideFooter: !0,
                fundamentalsOptions: {
                    horzDividerInPercents: 12,
                    structure: o[t.exchange] ? n : i,
                    showSymbol: !0
                },
                miniChartOptions: {
                    chartOptions: {
                        yScale: {
                            marginInPercents: 4
                        }
                    }
                },
                quoteTickerOptions: {
                    showType: !0
                }
            }))) : void this.$chart.hide()
        }, _.updateNews = function(t, e) {
            function i(t) {
                var e, i, o;
                if (t && t.length) {
                    for (e = 0; e < t.length; e++) i = t[e], o = $(n.render('<div class="news-item"><a class="title" href="{{ link }}" title="{{ title }}" target="_blank" rel="nofollow">{{ title }}</a><div class="info">{{ #source }}<div class="source">by <span class="source-name">{{ source }}</span></div>{{ /source }}<time></time></div></div>', i)), TradingView.agoDateFormatter(o.find("time"), i.published, TradingView.agoDateFormatter.shortFormat), r.append(o);
                    c || (l.show(), s.scrollToStart(), a.resetItems())
                } else c && (l.hide(), a.resetItems())
            }
            var o, r, s, a = this,
                l = a.$news,
                c = l.length && "none" !== l.css("display");
            return (t || e) && b ? (o = l.find(".info-item-body"), r = l.find(".news-list"), s = o.data("scroll"), s || (s = new d(o, r), o.data("scroll", s)), l.find(".symbol-short-name").text(e.short_name || e.resolved_symbol), s.scrollToStart(), r.empty(), void(t && t.length ? i(t) : b && this.newsProvider.getBySymbol(e.short_name, null, e.exchange).then(i))) : void(c && (a.$news.hide(), a.resetItems()))
        }, _.updateDescription = function(t, e) {
            function i(t) {
                var e, i;
                t && t.values && (e = t.values, i = e.sector || e.industry || e.number_of_employees, a.find(".company-data").toggle(!!i))
            }
            var o, r, s, a, l, c, h, d, u, p;
            return t = t || {}, o = t.tag, r = t.title || o, s = e ? e.short_name || e.resolved_symbol : null, a = this.$description, l = a.find(".related_tags"), c = this._description, h = {
                business_description: t.description
            }, !s && r ? this.title.render(r) : this.title.clear(), l.empty(), t.related_tags && t.related_tags.length && l.append(n.render('{{#tags}}<a href="{{{url}}}" class="chart-tag">{{#title}}{{title}}{{/title}}{{^title}}{{tag}}{{/title}}</a> {{/tags}}', {
                tags: t.related_tags
            })), S || t && t.description ? (this.$description.removeClass("js-hidden"), c ? void(s ? (c.updateDefautValues(h), c.renderData({
                values: h
            }), c.setSymbol(s)) : (c.unsubscribe(), c.renderData({
                values: h
            }))) : s || h.business_description ? (d = ["web_site_url", "sector", "industry", "number_of_employees", "business_description"], u = d, p = {}, d.forEach(function(t) {
                var e = this.$description.find("." + t);
                e && e.length && (e.addClass("apply-common-tooltip"), p[t] = e)
            }.bind(this)), this._description = this.createFundamentalsWidget(a, p, u, s, {
                onDataRendered: i,
                defaultValues: h,
                useAsHtml: ["business_description"]
            }), void(s || this._description.renderData({
                values: h
            }))) : void a.hide()) : void this.$description.addClass("js-hidden")
        }, _.updateFundamentals = function(t) {
            var e, i, n, o = t ? t.short_name || t.resolved_symbol : null,
                r = this.$fundamentals,
                l = r.find(".info-item-body-inner");
            return this._fundamentals ? void(o ? this._fundamentals.setSymbol(o) : (this._fundamentals.unsubscribe(), r.hide())) : void(o && (l.is(":empty") && (e = s(), e.appendTo(l)), i = {
                description: r.find(".symbol-description").addClass("apply-common-tooltip")
            }, n = [], Object.keys(a.FieldGroups).forEach(function(t) {
                a.FieldGroups[t].forEach(function(t) {
                    i[t] = r.find("#dl-item-" + t + " .dl-col-val").addClass("apply-common-tooltip"), n.push(t)
                })
            }), this._fundamentals = this.createFundamentalsWidget(r, i, n, o)))
        }, _.createFundamentalsWidget = function(t, e, i, n, r) {
            var s, a = this;
            return t = t, e = e || {}, i = i || [], n = n || null, r = r || {}, s = r.onDataRendered, t.data("scroll", new d(t.find(".info-item-body"), t.find(".info-item-body-inner"))), r.onDataRendered = function(e) {
                var n, o, r = "none" !== t.css("display"),
                    l = !1,
                    c = !i.length,
                    h = e.values || {};
                for (o = i.length - 1; o >= 0; o--)
                    if (n = i[o], h[n]) {
                        c = !0;
                        break
                    }
                c && !r ? (t.show(), l = !0) : !c && r && (t.hide(), l = !0), c && t.data("scroll").scrollToStart(), l && a.resetItems(), "function" == typeof s && s(e)
            }, new o(n, e, r)
        }, t.exports = _
    }).call(e, i(50), i(86))
}, function(t, e) {
    "use strict";
    ! function(t) {
        function e(e, i) {
            this.container = t(e), this.options = i || {}, this.options.callbacks || (this.options.callbacks = {}), this.column_num = 0, this.items = [], this.init();
            var n = this;
            window.addEventListener("resize", function() {
                n.resize()
            })
        }
        e.prototype.fireCallback = function(t, e) {
            "function" == typeof this.options.callbacks[t] && this.options.callbacks[t](e)
        }, e.prototype.resize = function() {
            this.columnsCount !== this.calculateColumnsCount() && (this.options.fixHeightOnRecalculate && this.container.css({
                height: this.container.height()
            }), this.removeColumns(), this.init(!0), this.options.fixHeightOnRecalculate && this.container.css({
                height: "auto"
            }))
        }, e.prototype.getItems = function() {
            return this.container.find("> " + this.options.itemsSelector).toArray()
        }, e.prototype.addItems = function(t) {
            this.items = this.items.concat(t), this.balance(t)
        }, e.prototype.balance = function(t) {
            switch (this.options.balanceType) {
                case "height":
                    this.balanceHeight(t);
                    break;
                case "simple":
                default:
                    this.balanceSimple(t)
            }
        }, e.prototype.balanceHeight = function(e) {
            var i = this;
            this.columns.forEach(function(t) {
                t.fragment || (t.fragment = document.createDocumentFragment())
            }), t.each(e, function(e, n) {
                var o, r, s, a, l, c, h, d, u, p = t(n),
                    f = p.data("cb-height") || p.outerHeight(!0);
                if (!f) throw Error("Cant get item height");
                if (p.data("cb-height", f), "none" === p.css("display") && (f = 0), o = null, p.hasClass("two-columns-item")) {
                    if (i.columns.sort(TradingView.sortMultipleFunction("index")), this.columnsCount > 2)
                        for (s = null, a = this.columns.length - 1; a > 0; a--) l = Math.abs(this.columns[a].height - this.columns[a - 1].height), (null === s || s >= l) && (s = l, r = a - 1);
                    else r = 0;
                    o = this.columns[r], c = this.columns[r + 1], h = f, d = 0, o.height > c.height ? h += o.height - c.height : d = c.height - o.height, u = document.createElement("div"), u.style.height = h + "px", u.className = "empty-space", c.fragment.appendChild(u), c.height += h, d && (u = document.createElement("div"), u.style.height = d + "px", u.className = "empty-space", o.fragment.appendChild(u), o.height += d)
                } else i.columns.sort(TradingView.sortMultipleFunction("height", "index")), o = i.columns[0];
                o.height += f, o.fragment.appendChild(n)
            }.bind(this))
        }, e.prototype.balanceSimple = function(e) {
            var i = this;
            t.each(e, function(t, e) {
                var n = i.columns[this.column_num];
                n.fragment || (n.fragment = document.createDocumentFragment()), n.fragment.appendChild(e), n.count++, ++this.column_num >= i.columnsCount && (this.row_num++, this.column_num = 0)
            }.bind(this))
        }, e.prototype.init = function(t) {
            this.column_num = 0, this.row_num = 0, this.columnsCount = this.calculateColumnsCount(), this.createLayout(this.columnsCount), t ? this.balance(this.items) : this.addItems(this.getItems()), this.pushFragmentsToColumns()
        }, e.prototype.calculateColumnsCount = function() {
            var t, e = this.container.width(),
                i = this.options;
            if (!e) throw Error("Can't get container width.");
            for (t = Math.floor(e / i.columnWidth); t >= 0 && t * i.columnWidth + (t - 1) * i.gap > e;) t--;
            return t
        }, e.prototype.createLayout = function(e) {
            var i, n, o;
            for (this.columns = [], i = document.createDocumentFragment(), n = 0; e > n; n++) o = t('<div class="cb-column"></div>'), this.columns.push({
                target: o,
                count: 0,
                height: 0,
                index: n
            }), i.appendChild(o[0]);
            this.container.prepend(i)
        }, e.prototype.pushFragmentsToColumns = function(t) {
            var e, i, n, o, r = this.columns.length;
            for (e = 0; r > e; e++) {
                if (i = this.columns[e], t)
                    for (n = 0; n < i.fragment.childNodes.length; n++) i.fragment.childNodes[n].className += " show-animate animate-init";
                i.target.append(i.fragment), delete i.fragment
            }
            o = this, t && setTimeout(function() {
                o.container.find(".animate-init").removeClass("animate-init")
            }, 1)
        }, e.prototype.removeColumns = function() {
            this.columns.forEach(function(t) {
                t.target.detach()
            })
        }, e.prototype.rescan = function() {
            this.addItems(this.getItems()), this.pushFragmentsToColumns()
        }, e.prototype.reset = function() {
            this.items = [], this.removeColumns(), this.init()
        }, t.fn.columnsBalancer = function(i) {
            if (t(this).length) return new e(t(this), i);
            var n = [];
            return t(this).each(function() {
                n.push(new e(t(this), i))
            }), n
        }
    }(jQuery)
}, function(t, e, i) {
    "use strict";

    function n(t, e, i) {
        this._id = TradingView.guid(), this._options = i || {}, this.elements = e || {}, this._volumeFormatter = new o, this.setSymbol(t)
    }
    var o = i(83).VolumeFormatter;
    n.prototype.updateDefautValues = function(t) {
        this._options.defaultValues || (this._options.defaultValues = {});
        for (var e in t) t.hasOwnProperty(e) && (this._options.defaultValues[e] = t[e])
    }, n.prototype.setSymbol = function(t) {
        t && (t === this._symbol && this._subscribed || (this._subscribed && this.unsubscribe(), this._symbol = t, this.subscribe()))
    }, n.prototype.subscribe = function() {
        this._symbol && (quoteSessionMultiplexerInstance.full.subscribe(this._id, this._symbol, this.onData.bind(this)), this._subscribed = !0)
    }, n.prototype.unsubscribe = function() {
        this._subscribed && (quoteSessionMultiplexerInstance.full.unsubscribe(this._id, this._symbol), this._subscribed = !1)
    }, n.prototype.onData = function(t, e) {
        switch (t.status) {
            case "ok":
                this.successData(t);
                break;
            case "permission_denied":
                this.downgradeData(t);
                break;
            case "error":
                this.errorData(t)
        }
    }, n.prototype.successData = function(t) {
        switch (t.values.symbol_status) {
            case "realtime":
            case "realtime_data":
            case "realtime_fundamental":
                this._options.defaultValues && (t.values = $.extend({}, this._options.defaultValues || {}, t.values)), this.renderData(t)
        }
    }, n.prototype.downgradeData = function(t) {
        console.warn("downgradeData")
    }, n.prototype.errorData = function(t) {
        this.unsubscribe(), console.warn("[Detail Search Widget] invalid symbol: " + this._symbol)
    }, n.prototype.renderData = function(t) {
        var e = this,
            i = Object.keys(this.elements),
            n = !1,
            o = "---";
        i.forEach(function(i) {
            var r, s, a, l = e.findElement(i),
                c = $.isArray(e._options.useAsHtml) && -1 !== e._options.useAsHtml.indexOf(i),
                h = c ? "html" : "text";
            if (l && l.length && (r = t.values[i] || o, a = e.format(r), s = l[h](), a !== s)) switch (n = !0, i) {
                case "web_site_url":
                    a = /http(s)?:\/\//.test(a) ? a.replace(/http(s)?:\/\//, "") : a, a = /\/$/.test(a) ? a.replace(/\/$/, "") : a, l[h](a), r === o ? l.removeAttr("href") : l.attr("href", /http(s)?:\/\//.test(r) ? r : "http://" + r);
                    break;
                default:
                    l[h](a), void 0 !== l.attr("title") && l.attr("title", a)
            }
        }), n && "function" == typeof this._options.onDataRendered && this._options.onDataRendered(t)
    }, n.prototype.findElement = function(t) {
        return this.elements[t]
    }, n.prototype.format = function(t) {
        var e = parseFloat(t);
        return TradingView.isNaN(e) ? t : TradingView.isInteger(e) ? this._volumeFormatter.format(e) : e
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t) {
        if (!this.isValidProvider(t)) throw new TypeError("Invalid provider: " + t);
        this._provider = new this.providers[t], this._baseURL = this._BASE_URL + t + "/"
    }
    var o = i(367),
        r = i(369),
        s = i(370),
        a = i(371),
        l = i(313),
        c = i(12);
    n.prototype.isValidProvider = function(t) {
        return t in this.providers
    }, n.prototype.providers = {
        yahoo: function() {
            this.symbology = new r
        },
        stocktwits: function() {
            this.symbology = new a
        },
        fxwirepro: function() {
            this.symbology = new s, this.package_name = "tv-fxwirepro", this.feed_realtime = "fxwirepro_realtime", this.feed_delayed = "fxwirepro_delayed"
        },
        futuresmag: function() {
            this.symbology = new s
        },
        dailyfx: function() {
            this.symbology = new s
        }
    }, n.prototype._BASE_URL = "/headlines/", n.prototype.getURLforSymbol = function(t, e, i) {
        var n = this.convertSymbol(t, e, i);
        return this._baseURL + "symbol/" + n + "/"
    }, n.prototype.convertSymbol = function(t, e, i) {
        return this.getProvider().symbology.convertTo(t, e, i)
    }, n.prototype.getURLforCategory = function(t) {
        return this._baseURL + "category/" + t + "/"
    }, n.prototype.getURLforSpread = function(t) {
        return t = t.join(","), this._baseURL + "spread/" + t + "/"
    }, n.prototype.getBySymbol = function(t, e, i) {
        var n = this.getProvider(),
            o = "";
        return o = $.isFunction(n.getURLforSymbol) ? n.getURLforSymbol(t, e, i) : this.getURLforSymbol(t, e, i), /^QUANDL/.test(i) ? $.Deferred().reject() : $.ajax(o, {
            type: "GET",
            dataType: "json"
        }).pipe(this._createOnReceivedCallback(o))
    }, n.prototype.getBySpread = function(t, e, i) {
        var n, o = this.getProvider();
        return t = t.map(function(t, n) {
            return t = c.ticker(t), n ? t : this.convertSymbol(t, e, i)
        }.bind(this)), n = "", n = $.isFunction(o.getURLforSpread) ? o.getURLforSpread(t, e, i) : this.getURLforSpread(t), $.ajax(n, {
            type: "GET",
            dataType: "json"
        }).pipe(this._createOnReceivedCallback(n))
    }, n.prototype.getByCategory = function(t) {
        var e = this.getProvider(),
            i = "";
        return i = $.isFunction(e.getURLforCategory) ? e.getURLforCategory(t) : this.getURLforCategory(t), $.ajax(this.getURLforCategory(t), {
            type: "GET",
            dataType: "json"
        }).pipe(this._createOnReceivedCallback(i))
    }, n.prototype._createOnReceivedCallback = function(t) {
        var e, i, n = this;
        return function(o, r, s) {
            return o && Array.isArray(o) || (e = s.getAllResponseHeaders(), i = "[Headlines] Data is not array.\n", i += "	data: " + JSON.stringify(o) + "\n", i += "	url: " + t + "\n", i += "	headers: " + JSON.stringify(e) + "\n", TradingView.logError(i)), n._onReceived(o)
        }
    }, n.prototype._onReceived = function(t) {
        return t && Array.isArray(t) ? (t.forEach(function(t) {
            t.published = new Date(1e3 * t.published)
        }), $.isFunction(this.getProvider().itemTransform) ? t.map(this.getProvider().itemTransform, this._provider) : t) : void 0
    }, n.prototype.init = function(t) {
        var e = this.getProvider();
        $.isFunction(e.init) && e.init(this, t)
    }, n.prototype.update = function(t) {
        $.isFunction(this.getProvider().update) && this.getProvider().update(t)
    }, n.prototype.destroy = function() {
        $.isFunction(this.getProvider().destroy) && this.getProvider().destroy(), this.getProvider().$message instanceof $ && this.getProvider().$message.remove()
    }, n.prototype.options = function(t) {
        return $.isFunction(this.getProvider().getOptions) ? this.getProvider().getOptions(t) : !1
    }, n.prototype.getProvider = function() {
        return this._provider
    }, n.prototype.providers.yahoo.prototype.init = function(t, e) {
        this._newsWidget = e.newsWidget, this._providerBase = t
    }, n.prototype.providers.yahoo.prototype.getURLforSymbol = function(t, e, i) {
        return "MTGOX" === i ? this._providerBase.getURLforCategory("bitcoin") : "futures" !== e && "cfd" !== e || t in this.symbology.specialCases ? this._providerBase.getURLforSymbol(t, e, i) : this._providerBase.getURLforCategory("futures")
    }, n.prototype.providers.yahoo.prototype.getURLforSpread = function(t, e, i) {
        return "MTGOX" === i ? this.getByCategory("bitcoin") : "futures" === e || "cfd" === e ? this.getByCategory("futures") : this._providerBase.getURLforSpread(t)
    }, n.prototype.providers.yahoo.prototype.itemTransform = function(t) {
        return {
            id: t.id,
            link: t.link,
            published: t.published,
            title: t.title,
            source: this.getSource(t)
        }
    }, n.prototype.providers.yahoo.prototype.getSource = function(t) {
        var e, i = t.summary && t.summary.match(/\[[^\-]+\]/g);
        if (i) return i[0].replace(/\[(at )?|\]/g, "");
        for (e in this.NewsSources)
            if (~t.link.indexOf(e)) return this.NewsSources[e];
        return "Yahoo Finance"
    }, n.prototype.providers.yahoo.prototype.NewsSources = {
        "allthingsd.com": "AllThingsD",
        "ap.org": "AP",
        "bankrate.com": "Bankrate.com",
        "barrons.com": "Barrons.com",
        "bizjournals.com": "Business Journals",
        "bloomberg.com": "Bloomberg",
        "businessinsider.com": "Business Insider",
        "businesswire.com": "Business Wire",
        "businessweek.com": "BusinessWeek",
        "cnbc.com": "CNBC",
        "cnnmoney.com": "CNNMoney.com",
        "newswire.ca": "CNW Group",
        consumerreports: "Consumer Reports",
        creditcards: "CreditCards.com",
        "dailyfx.com": "DailyFX",
        "entrepreneur.com": "Entrepreneur",
        etfdb: "ETF Database",
        etftrends: "ETF Trends",
        etfguide: "ETFguide",
        etfzone: "ETFZone",
        "ft.com": "Financial Times",
        "forbes.com": "Forbes",
        "fortune.cnn.com": "Fortune",
        "foxbusiness.com": "Fox Business",
        "futuresmag.com": "Futuresmag.com",
        gftforex: "GFT Forex",
        "globenewswire.com": "GlobeNewswire",
        indieresearch: "IndieResearch",
        indexuniverse: "IndexUniverse.com",
        "investopedia.com": "Investopedia",
        "investors.com": "Investor's Business Daily",
        kiplinger: "Kiplinger",
        "marketwatch.com": "MarketWatch",
        marketwire: "Marketwire",
        minyanville: "Minyanville",
        "money.cnn.com": "Money",
        morningstar: "Morningstar",
        "fool.com": "Motley Fool",
        "nytimes.com": "New York Times",
        "oilprice.com": "Oilprice.com",
        optionetics: "Optionetics",
        optionmonster: "optionMONSTER",
        "paidcontent.org": "paidContent.org",
        newswire: "PR Newswire",
        "reuters.com": "Reuters",
        "seekingalpha.com": "Seeking Alpha",
        "smallcapinvestor.com": "SmallCapInvestor.com",
        smartmoney: "SmartMoney",
        atlantic: "The Atlantic",
        "wsj.com": "The Wall Street Journal",
        "theflyonthewall.com": "Theflyonthewall.com",
        "thestreet.com": "TheStreet",
        thomsonreuters: "Thomson Reuters ONE",
        usnews: "US News & World Report",
        "wallstcheatsheet.com": "Wall St. Cheat Sheet",
        transcript: "Wall Street Transcript",
        zacks: "Zacks"
    }, n.prototype.providers.yahoo.prototype.update = function(t) {
        var e = o.prototype.providers.yahoo.title;
        this._newsWidget._quoteMetaInfo && this._newsWidget._quoteMetaInfo.name && (e += " " + $.t("for") + " " + this._newsWidget._quoteMetaInfo.name), this._newsWidget._bridge.setTitle(e)
    }, n.prototype.providers.stocktwits.prototype.init = function(t, e) {
        this._newsWidget = e.newsWidget
    }, n.prototype.providers.stocktwits.prototype.update = function(t) {
        var e = o.prototype.providers.stocktwits.title;
        this._newsWidget._quoteMetaInfo && this._newsWidget._quoteMetaInfo.name && (e += " " + $.t("for") + " " + this._newsWidget._quoteMetaInfo.name), this._newsWidget._bridge.setTitle(e)
    }, n.prototype.providers.fxwirepro.prototype.init = function(t, e) {
        this._pushstream_channel = this.feed_realtime, this._providerBase = t, this._newsWidget = e.newsWidget, this.currencies = {}, pro.hasPackage(this.package_name) || (this._pushstream_channel = this.feed_delayed, this._newsWidget._properties.value().delayedWarningShown || (this.showDelayedWarning(), this._newsWidget.updateProperties({
            delayedWarningShown: !0
        }))), this.setTitle(), l.on(this._pushstream_channel, function(t) {
            var t = this.filterNews(t);
            e.onData && e.onData(t, {
                incremental: !0
            })
        }.bind(this))
    }, n.prototype.providers.fxwirepro.prototype.getURLforSymbol = function(t, e, i) {
        var n = this._providerBase.convertSymbol(t, e, i),
            o = pro.hasPackage(this.package_name) ? this.feed_realtime : this.feed_delayed;
        return this._providerBase._BASE_URL + o + "/symbol/" + n + "/"
    }, n.prototype.providers.fxwirepro.prototype.getURLforSpread = function(t, e, i) {
        var n = pro.hasPackage(this.package_name) ? this.feed_realtime : this.feed_delayed;
        return t = t.join(","), this._providerBase._BASE_URL + n + "/spread/" + t + "/"
    }, n.prototype.providers.fxwirepro.prototype.update = function(t) {
        if (this.currencies = {}, Array.isArray(t))
            for (var e = 0; e < t.length; e++) this.currencies[t[e].substr(0, 3)] = 1, this.currencies[t[e].substr(3, 3)] = 1;
        else this.currencies[t.substr(0, 3)] = 1, this.currencies[t.substr(3, 3)] = 1
    }, n.prototype.providers.fxwirepro.prototype.destroy = function() {
        l.off(this._pushstream_channel)
    }, n.prototype.providers.fxwirepro.prototype.filterNews = function(t) {
        return t.filter(function(t) {
            return t.published = new Date(1e3 * t.published), "" === t.currency || t.currency in this.currencies
        }, this)
    }, n.prototype.providers.fxwirepro.prototype.showAboutDialog = function() {
        pro.showProductDialog(this.package_name)
    }, n.prototype.providers.fxwirepro.prototype.showDelayedWarning = function() {
        var t = $('<div class="widgetbody-overlay"><span class="ns-fxwire-message-close"></span><div class="ns-fxwire-message"><h3>This is delayed news feed</h3><p>This is delayed FxWire PRO news feed. Want real-time updates and more features?</p><a href="#">Learn More</a></div></div>').appendTo(this._newsWidget._bridge.$body);
        t.find(".ns-fxwire-message a").click(function() {
            this.showAboutDialog(), t.remove()
        }.bind(this)), t.find(".ns-fxwire-message-close").click(function() {
            t.remove()
        }), this.$message = t
    }, n.prototype.providers.fxwirepro.prototype.setTitle = function(t) {
        var e = "FxWire Pro " + (pro.hasPackage(this.package_name) ? "Realtime" : "Delayed");
        this._newsWidget._bridge.setTitle(e)
    }, n.prototype.providers.fxwirepro.prototype.getOptions = function() {
        return [{
            title: "About and Subscription",
            action: this.showAboutDialog.bind(this)
        }]
    }, n.prototype.providers.dailyfx.prototype.categories = {
        all: $.t("All Content"),
        forex_market_news: $.t("Forex Market News"),
        alerts: $.t("Alerts"),
        all_analyst_picks: $.t("Analyst Picks"),
        dfx_for_beginners: $.t("DailyFX For Beginners"),
        dailyfx_arabic_all: $.t("Arabic")
    }, n.prototype.providers.futuresmag.prototype.categories = {
        all: $.t("All Content"),
        news: $.t("News"),
        "market-analysis": $.t("Market Analysis"),
        "trading-strategies": $.t("Trading Strategies"),
        blogs: $.t("Blogs"),
        commodities: $.t("Commodities"),
        forex: $.t("Forex"),
        options: $.t("Options")
    }, n.prototype.providers.dailyfx.prototype.getURLforSymbol = n.prototype.providers.futuresmag.prototype.getURLforSymbol = function(t, e, i) {
        return this._providerBase.getURLforCategory(this._category)
    }, n.prototype.providers.dailyfx.prototype.init = n.prototype.providers.futuresmag.prototype.init = function(t, e) {
        this._news = e.newsWidget, this._providerBase = t, this.setCategory(this._news._properties.value().category || "all", !0)
    }, n.prototype.providers.dailyfx.prototype.setCategory = function(t, e) {
        this._category = t, this._news.updateProperties({
            category: t
        }), this._news._bridge.setTitle($.t("DailyFX") + " - " + this.categories[t]), e || this._news.update()
    }, n.prototype.providers.futuresmag.prototype.setCategory = function(t, e) {
        this._category = t, this._news.updateProperties({
            category: t
        }), this._news._bridge.setTitle($.t("Futures Magazine") + " - " + $.t(this.categories[t])), e || this._news.update()
    }, n.prototype.providers.dailyfx.prototype.getOptions = n.prototype.providers.futuresmag.prototype.getOptions = function() {
        function t(t) {
            return function() {
                this.setCategory(t)
            }.bind(this)
        }
        var e, i = [];
        for (e in this.categories) i.push({
            title: this.categories[e],
            action: t.call(this, e),
            active: e === this._category
        });
        return i.push({
            separator: 1
        }), i.push({
            title: "About",
            action: this.showAboutDialog.bind(this)
        }), i
    }, n.prototype.providers.dailyfx.prototype.showAboutDialog = function() {
        TVDialogs.showNotice($.t("About DailyFX News Feed"), $.t("For 40 years Futures has been a thought leader and independent voice of the commodity, futures, options, forex and stock trader. Here is a list of our services, information and directories to help you learn to or continue to trade successfully."))
    }, n.prototype.providers.futuresmag.prototype.showAboutDialog = function() {
        TVDialogs.showNotice($.t("Forex market news and analysis from DailyFX"), $.t("DailyFX, FXCM's free news website, is one of the worldâ€™s leading news and information sources for the currency trading community."))
    }, t.exports = n, TradingView.NewsProvider = n
}, function(t, e, i) {
    (function(e, n) {
        "use strict";

        function o(t) {
            var i, n, o;
            this._bridge = t, this._properties = t.properties, i = e.enabled("charting_library_base") ? "yahoo" : "stocktwits", this._$container = t.$body, o = (this._properties.value() || {}).provider, n = o ? o : t.options && t.options.provider || i, this._prepareLayout(this._$container), this.setProvider(n, !0), this.lastDigest = null, t.symbol.subscribe(this.onSymbolChange.bind(this), {
                callWithLast: !0
            })
        }
        var r = i(12),
            s = i(333).SidebarCustomScroll,
            a = i(91).bindPopupMenu,
            l = i(368);
        o.prototype.setProvider = function(t, e) {
            this._provider = t, this._dataProvider && this._dataProvider.destroy();
            var n = i(366);
            this._dataProvider = new n(t), this._dataProvider.init({
                newsWidget: this,
                onData: this.updateData.bind(this)
            }), this._readonlyProvider = !this._dataProvider.options(), this.lastDigest = null, this._$categoriesSelector.toggleClass("js-hidden", this._readonlyProvider), e || this.updateProperties()
        }, o.prototype.updateProperties = function(t) {
            this._properties.setValue($.extend(t || {}, {
                provider: this._provider
            }))
        }, o.prototype._prepareLayout = function(t) {
            var i = this;
            this._$container = t, this._$widget = $('<div class="tv-news">').appendTo(t), this._$data = $('<div class="ns-data">').appendTo(this._$widget), this._scroll = new s(this._$widget, this._$data), this._bridge.height.subscribe(this.resize.bind(this)), this._bridge.visible.subscribe(this.resize.bind(this)), this._bridge.visible.subscribe(function(t) {
                t && i._update_skipped && (i._update_skipped = !1, i.update())
            }), this._$categoriesSelector = $('<a class="button"></a>').append(n("properties", "17x17")).appendTo(this._bridge.$headerspace), this._$categoriesSelector.on("click", this._showCategoriesMenu.bind(this)), a(this._$categoriesSelector, null, {
                event: "show-popup",
                hideEvent: "hide-popup",
                addClass: "ch-popup ch-settings-popup",
                careBottomBorder: !0,
                careRightBorder: !0,
                viewportSpacing: 2,
                reverse: !0
            }), this._bridge.options && this._bridge.options.permanentProvider || e.enabled("charting_library_base") || (this._$providerSelector = $('<a class="button"></a>').append(n("list", "16x16")).appendTo(this._bridge.$headerspace), this._$providerSelector.on("click", this._showProviderMenu.bind(this)), a(this._$providerSelector, null, {
                event: "show-popup",
                hideEvent: "hide-popup",
                addClass: "ch-popup ch-settings-popup",
                careBottomBorder: !0,
                careRightBorder: !0,
                viewportSpacing: 2,
                reverse: !0
            }))
        }, o.prototype._showProviderMenu = function(t) {
            var e = this,
                i = [];
            Object.keys(this.providers).forEach(function(t) {
                i.push({
                    title: this.providers[t].longTitle,
                    action: function() {
                        e.setProvider(t), e.update()
                    },
                    active: t === this._provider
                })
            }, this), $(t.target).trigger("show-popup", [i]), t.stopPropagation()
        }, o.prototype._showCategoriesMenu = function(t) {
            var e = this._dataProvider.options();
            $(t.target).trigger("show-popup", [e]), t.stopPropagation()
        }, o.prototype.getUpdateTimeout = function() {
            return this.providers[this._provider].timeout
        }, o.prototype.update = function() {
            var t, e, i, n, o;
            return this._bridge.visible.value() ? (t = this._quoteMetaInfo) ? (e = t.name, this._need_show_screen = e !== this._symbol || this._provider !== this._prevProvider, this._symbol = e, this._prevProvider = this._provider, this._need_show_screen && (this._$data.addClass("loading"), this.lastDigest = null, clearInterval(this._update_interval), i = this.getUpdateTimeout(), i && (this._update_interval = setInterval(this.update.bind(this), i))), "spread" === t.type ? (n = "getBySpread", o = t.legs) : (n = "getBySymbol", o = r.ticker(t.original_name)), this._dataProvider.update(o), void this._dataProvider[n](o, t.type, t.exchange).done(this.updateData.bind(this))) : (this._$data.empty(), void this._$data.removeClass("loading")) : void(this._update_skipped = !0)
        }, o.prototype.updateData = function(t, e) {
            e = e || {}, this._$data.removeClass("loading"), e.incremental || (TradingView.agoDateFormatter.destroy(this._$data), this._$data.empty()), t && t.length && (this._need_scroll_top = this._need_show_screen || t[0].published > this._last_news_time || e.incremental, this._last_news_time = t[0].published, this._need_scroll_top && (this._$data.css("top", 0), this._scroll.resize()), e.incremental && t.reverse(), t.forEach(this.renderItem.bind(this, e)), this.lastDigest = this._getDigest(e.incremental ? t[t.length - 1] : t[0]))
        }, o.prototype._getDigest = function(t) {
            return TradingView.hash(t.title + t.published)
        }, o.prototype.resize = function(t) {
            this._scroll.resize()
        }, o.prototype.providers = {
            yahoo: {
                shortTitle: $.t("Headlines"),
                longTitle: $.t("Headlines"),
                timeout: 3e5
            },
            stocktwits: {
                shortTitle: $.t("StockTwits"),
                longTitle: $.t("StockTwits"),
                timeout: 3e4
            },
            fxwirepro: {
                shortTitle: $.t("FxWire PRO"),
                longTitle: $.t("FxWire PRO"),
                timeout: !1
            },
            futuresmag: {
                shortTitle: $.t("Futures Magazine"),
                longTitle: $.t("Futures Magazine"),
                timeout: 12e4
            },
            dailyfx: {
                shortTitle: $.t("DailyFX"),
                longTitle: $.t("DailyFX"),
                timeout: 12e4
            }
        }, o.prototype.provider = function() {
            return this.providers[this._provider]
        }, o.prototype.renderItem = function(t, e) {
            var i, n;
            t = t || {}, i = this._getDigest(e),
                n = this.provider().renderItem.call(this, e), n.data("digest", i), TradingView.agoDateFormatter(n.find(".ns-item-date time"), e.published, TradingView.agoDateFormatter.shortFormat), this.lastDigest && (this.lastDigest === this._getDigest(e) ? this.lastDigest = null : this.newItem(n)), t.incremental ? n.prependTo(this._$data) : n.appendTo(this._$data)
        }, o.prototype.providers.yahoo.title = $.t("Headlines"), o.prototype.providers.stocktwits.title = $.t("StockTwits"), o.prototype.providers.fxwirepro.title = $.t("FxWire PRO"), o.prototype.providers.futuresmag.title = $.t("Futures Magazine"), o.prototype.providers.dailyfx.title = $.t("DailyFX"), o.prototype.providers.dailyfx.renderItem = o.prototype.providers.futuresmag.renderItem = o.prototype.providers.yahoo.renderItem = function(t) {
            return $(document.createElement("div")).attr("class", "ns-item").html('<div class="ns-item-title"><a href="' + t.link + '" target="_blank">' + t.title + '</a></div><div class="ns-item-desc">' + (t.source ? $.t("at") + ' <span class="source">' + t.source + "</span> " : "") + '</div><div class="ns-item-date"><time></time></div>')
        }, o.prototype.providers.stocktwits.renderItem = function(t) {
            var e = this.providers.stocktwits.replaceTags(t.title),
                i = "http://stocktwits.com/" + t.username;
            return $(document.createElement("div")).attr("class", "ns-item").html('<div class="ns-item-title selectable">' + e + '</div><div class="ns-item-desc">' + $.t("by") + ' <a href="' + i + '" target="_blank">' + t.username + "</a> " + $.t("at") + ' <span class="source">StockTwits</span> </div><div class="ns-item-date"><time></time></div>')
        }, o.prototype.providers.stocktwits.replaceTags = function(t) {
            return t = t.replace(/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/, "<a href='$&' target='_blank'>$&</a>"), t = l.txt.autoLinkCashtags(t, {
                urlClass: "",
                urlTarget: "_blank",
                urlNofollow: !0
            })
        }, o.prototype.providers.fxwirepro.renderItem = function(t) {
            var e = $(document.createElement("div")).attr("class", "ns-item").html('<div class="ns-item-title selectable">' + (t.headline_only ? t.title : "<strong>" + t.title + "</strong><br/>" + t.body) + '</div><div class="ns-item-desc"> ' + $.t("in") + ' <span class="source">' + t.category + "</span>" + (t.currency ? " " + $.t("about") + ' <span class="source">' + t.currency + "</span>" : "") + '</div><div class="ns-item-date"><time></time></div>');
            return e.find(".ns-item-title *").addClass("selectable"), e
        }, o.prototype.highlight = function(t) {
            t.css("background-color", "#f2f5f8"), t.highlight(5)
        }, o.prototype.newItem = function(t) {
            var e, i = this;
            return this._bridge.visible.value() ? void this.highlight(t) : (e = !!this._digestsToHighlight, this._digestsToHighlight = (this._digestsToHighlight || []).concat(t.data("digest")).slice(-20), void(e || this._bridge.visible.when(function() {
                var t = i._digestsToHighlight;
                delete i._digestsToHighlight, t && i._$data.children().each(function(e, n) {
                    var o = $(n); - 1 !== t.indexOf(o.data("digest")) && i.highlight(o)
                })
            })))
        }, o.prototype.onSymbolChange = function(t) {
            var e, i;
            if (t !== this._symbol && t !== this._altSymbol) {
                if (e = this, e._quoteSymbol && quoteSessionMultiplexerInstance.full.unsubscribe(e._bridge.id, e._quoteSymbol), e._quoteMetaInfo = null, !t) return void(e._quoteSymbol = void 0);
                e._quoteSymbol = t, e._altSymbol = void 0, e.update(), this._bridge.clearNotifications(), i = !1, quoteSessionMultiplexerInstance.full.subscribe(e._bridge.id, t, function(n) {
                    return i ? void 0 : "permission_denied" === n.status && n.values && n.values.alternative ? void e.onSymbolChange(n.values.alternative) : void(n.values && n.values.short_name && (e._altSymbol = n.values.original_name, e._quoteMetaInfo = {
                        name: n.values.short_name,
                        exchange: n.values.exchange,
                        type: n.values.type,
                        legs: n.values.legs,
                        pro_name: n.values.pro_name,
                        original_name: n.values.original_name
                    }, "spread" !== n.values.type || n.values.legs || (e._quoteMetaInfo.legs = r.tokenize(n.values.pro_name || "").filter(function(t) {
                        return t instanceof r.SymbolToken
                    }).map(function(t) {
                        return "" + t
                    })), e.update(), i = !0, setTimeout(function() {
                        quoteSessionMultiplexerInstance.full.unsubscribe(e._bridge.id, t)
                    }, 0)))
                })
            }
        }, o.prototype.destroy = function() {
            this._quoteSymbol && quoteSessionMultiplexerInstance.full.unsubscribe(this._bridge.id, this._quoteSymbol), TradingView.agoDateFormatter.destroy(this._$data), this._update_interval && clearInterval(this._update_interval)
        }, t.exports = o
    }).call(e, i(3), i(5))
}, function(t, e) {
    "use strict";
    var i = window.stwt || {};
    i.txt = {}, i.txt.regexen = {}, i.txt.regexen.cashtag = /(^|[\s\,\.\-\+\(\/\"]\$?|^\$)(\$([a-z1-9]{1}[a-z]{1,3}_F|(?!\d+[bmkts]{1}?(il(lion)?|ln|m|n)?\b|[\d]+\b)(?!\d+usd)[a-z0-9]{1,9}(?:[-\.]{1}[a-z]{1,2})?(?:[-\.]{1}[a-z]{1,2})?))\b(?!\$)/gi, i.txt.extractCashtags = function(t) {
        var e = [];
        return t.replace(i.txt.regexen.cashtag, function(t, i, n) {
            e.push(n.slice(1))
        }), e
    }, i.txt.autoLinkCashtags = function(t, e) {
        var n, o;
        return "function" == typeof e ? t.replace(i.txt.regexen.cashtag, function(t, i, n) {
            return i + e.call(this, n.toUpperCase(), n.toUpperCase().slice(1))
        }) : (n = [], o = e || {}, o.urlClass = void 0 === o.urlClass ? "stwt-url cashtag" : o.urlClass, o.urlTarget = o.urlTarget || null, o.urlNofollow = !!o.urlNofollow, o.url = o.url || "http://stocktwits.com/symbol/%s", o.urlClass && n.push('class="' + o.urlClass + '"'), o.urlTarget && n.push('target="' + o.urlTarget + '"'), o.urlNofollow && n.push('rel="nofollow"'), n = n.length > 0 ? " " + n.join(" ") + " " : " ", t.replace(i.txt.regexen.cashtag, function(t, e, i) {
            return i = i.toUpperCase(), e + "<a" + n + 'href="' + o.url.replace("%s", i.slice(1)) + '">' + i + "</a>"
        }))
    }, t.exports = i
}, function(t, e, i) {
    "use strict";

    function n() {
        var t;
        this.specialFromCases = {};
        for (t in this.specialCases) this.specialFromCases[this.specialCases[t]] = t;
        this.exchangeFromMap = {};
        for (t in this.exchangeMap) this.exchangeFromMap[this.exchangeMap[t]] = t
    }
    var o = i(370);
    inherit(n, o), n.prototype.convertTo = function(t, e, i) {
        return t in this.specialCases ? this.specialCases[t] : "forex" === e ? t + "=X" : "TSX" === i ? t + ".TO" : "TSXV" === i ? t + ".V" : "MICEX" === i ? t + ".ME" : "COMEX" === i ? t + ".CMX" : "CME" === i ? t + ".CME" : "CBOT" === i ? t + ".CBT" : "MOEX" === i ? t + ".ME" : "index" === e ? "^" + t : t
    }, n.prototype.convertFrom = function(t) {
        var e, i, n;
        return t in this.specialFromCases ? this.specialFromCases[t] : (e = t.split("."), i = e[1], i ? (n = this.exchangeFromMap["." + i], n ? n + ":" + e[0] : null) : t)
    }, n.prototype.exchangeFromMap = {}, n.prototype.exchangeMap = {
        TSX: ".TO",
        TSXV: ".V",
        MICEX: ".ME",
        COMEX: ".CMX",
        CME: ".CME",
        CBOT: ".CBT"
    }, n.prototype.specialFromCases = {}, n.prototype.specialCases = {
        ESP35: "^IBEX",
        FRA40: "^FCHI",
        GER30: "^GDAXI",
        JPN225: "^N225",
        NAS100: "^NDX",
        SPX500: "SPY",
        SUI30: "^SSMI",
        UK100: "^FTSE",
        FTSE: "^DJI",
        USDOLLAR: "^USDOLLAR",
        DOWI: "^DJI",
        DOWT: "^DJT",
        DOWU: "^DJU"
    }, t.exports = n
}, function(t, e) {
    "use strict";

    function i() {}
    i.prototype.convertTo = function(t, e, i) {
        return t
    }, i.prototype.convertFrom = function(t) {
        return t
    }, t.exports = i
}, function(t, e, i) {
    "use strict";

    function n() {}
    var o = i(370);
    inherit(n, o), n.prototype.convertTo = function(t, e, i) {
        return "futures" === e ? t + "_F" : t
    }, t.exports = n
}, function(t, e, i) {
    "use strict";

    function n(t, e) {
        var n, o = $('<div class="dl-dialog-data clearfix">'),
            r = $('<div class="dl-item-group-col">').appendTo(o),
            s = $('<div class="dl-item-group-col">').appendTo(o),
            a = r;
        return t = t || {}, e = e || function(t) {
                return t
            }, n = i(373), Object.keys(n.FieldGroups).forEach(function(i) {
            $('<div class="dl-item-group-header">' + $.t(i) + "</div>").appendTo(a), n.FieldGroups[i].forEach(function(i) {
                var o = t[i] || "----";
                $('<div class="dl-item full" id="dl-item-' + i + '"><div class="dl-col dl-col-field">' + n.FieldDescription[i][0] + '</div><div class="dl-col dl-col-val" title="' + o + '">' + e(o, i) + "</div></div>").data("field", i).appendTo(a)
            }), a = a === r ? s : r
        }), o
    }
    t.exports = n
}, function(t, e, i) {
    (function(t, n, o) {
        "use strict";

        function r(t) {
            this._bridge = t, this._symbol = "", this._data = {}, this._updateAvailable = !0, this._prev_price = 0, this._prev_extended_price = 0, this._invalidate = !0, this._noDepthSymbols = [], this._volumeFormatter = new d, this._defaultPriceFormatter = new h(100, 1, !1), this._priceFormatter = this._defaultPriceFormatter, this._percentageFormatter = new u, this._dynamicColData = {}, this.prepareLayout(t.$body), this._$dl.on("contextmenu", function(t) {
                t.preventDefault()
            }), this._depthScale = +(t.properties.value() || {}).depthScale, this._depthScale >= 1 && this._depthScale <= 100 || delete this._depthScale, this._estimatesCache = l(), this._estimatesCache.on("data", this.updateEstimate.bind(this)), t.symbol.subscribe(this.setSymbol.bind(this), {
                callWithLast: !0
            }), t.height.subscribe(this.resize.bind(this)), t.width.subscribe(this.resize.bind(this)), t.visible.subscribe(this.resize.bind(this))
        }
        var s = i(374),
            a = i(333).SidebarCustomScroll,
            l = i(138),
            c = i(83),
            h = c.PriceFormatter,
            d = c.VolumeFormatter,
            u = c.PercentageFormatter,
            p = i(375),
            f = i(13).monthsShort,
            _ = {
                "Price History": ["average_volume", "beta_1_year", "beta_3_year", "beta_5_year", "price_52_week_high", "price_52_week_low", "price_percent_change_1_week", "price_percent_change_4_week", "price_percent_change_52_week"],
                Valuation: ["enterprise_value_ebitda_ttm", "enterprise_value_fq", "market_cap_basic", "number_of_employees", "number_of_shareholders", "price_earnings_ttm", "price_revenue_ttm", "total_shares_outstanding_fundamental"],
                Dividends: ["dividends_paid", "dividends_per_share_fq", "expected_annual_dividends", "preferred_dividends"],
                Margins: ["after_tax_margin", "gross_margin", "gross_margin_percent_ttm", "operating_margin", "pre_tax_margin"],
                "Operating Metrics": ["return_on_assets", "return_on_equity", "return_on_invested_capital", "return_of_invested_capital_percent_ttm", "revenue_per_employee"],
                "Balance Sheet": ["cash_ratio", "current_ratio", "debt_to_assets", "debt_to_equity", "long_term_capital", "net_debt", "quick_ratio", "total_assets", "total_capital", "total_debt", "total_current_assets"],
                "Income Statement": ["basic_eps_net_income", "earnings_per_share_basic_ttm", "earnings_per_share_diluted_ttm", "ebitda", "gross_profit", "last_annual_eps", "last_annual_revenue", "net_income", "total_revenue"]
            },
            g = {
                after_tax_margin: [$.t("After-tax Margin"), $.t("Margin AT")],
                average_volume: [$.t("Average Volume"), $.t("Avg Vol")],
                basic_eps_net_income: [$.t("Basic EPS, Net Income"), $.t("EPS NI")],
                beta_1_year: [$.t("Beta - 1 Year"), $.t("Beta 1Y")],
                beta_3_year: [$.t("Beta - 3 Year"), $.t("Beta 3Y")],
                beta_5_year: [$.t("Beta - 5 Year"), $.t("Beta 5Y")],
                cash_ratio: [$.t("Cash Ratio"), "CR"],
                current_ratio: [$.t("Current Ratio"), "CR"],
                debt_to_assets: [$.t("Debt to Assets"), "DTA"],
                debt_to_equity: [$.t("Debt to Equity"), "DTE"],
                dividends_paid: [$.t("Dividends Paid"), $.t("Div Paid")],
                dividends_per_share_fq: [$.t("Dividends per Share, FQ"), $.t("Div Share")],
                earnings_per_share_basic_ttm: [$.t("Earnings per Share, Basic, TTM"), $.t("EPS")],
                earnings_per_share_diluted_ttm: [$.t("Earnings per Share, Diluted, TTM"), $.t("EPS Dil")],
                ebitda: ["EBITDA", "EBITDA"],
                enterprise_value_ebitda_ttm: [$.t("Enterprise Value/EBITDA, TTM"), "EV/EBITDA"],
                enterprise_value_fq: [$.t("Enterprise Value, FQ"), "EV"],
                exchange: [$.t("Primary Exchange"), $.t("Exch")],
                expected_annual_dividends: [$.t("Expected Annual Dividends"), $.t("Div EA")],
                gross_margin: [$.t("Gross Margin"), $.t("Margin G")],
                gross_margin_percent_ttm: [$.t("Gross Margin %, TTM"), $.t("Margin G%")],
                gross_profit: [$.t("Gross Profit"), $.t("Profit")],
                industry: [$.t("Industry"), $.t("Ind")],
                last_annual_eps: [$.t("Last Annual EPS"), "EPS LA"],
                last_annual_revenue: [$.t("Last Annual Revenue"), $.t("Rev LA")],
                long_term_capital: [$.t("Long Term Capital"), $.t("Capital LT")],
                market_cap_basic: [$.t("Market Cap - Basic"), $.t("Mkt Cap")],
                net_debt: [$.t("Net Debt"), $.t("Debt Net")],
                net_income: [$.t("Net Income"), $.t("Income")],
                number_of_employees: [$.t("Number of Employees"), $.t("Emp")],
                number_of_shareholders: [$.t("Number of Shareholders"), $.t("Shareholders")],
                open_price: [$.t("Open Price"), $.t("Open")],
                operating_margin: [$.t("Operating Margin"), $.t("Margin O")],
                pre_tax_margin: [$.t("Pre-tax Margin"), $.t("Margin PT")],
                preferred_dividends: [$.t("Preferred Dividends"), $.t("Div Pref")],
                prev_close_price: [$.t("Previous Close Price"), $.t("Prev")],
                price_52_week_high: [$.t("Price - 52 Week High"), "H 52W"],
                price_52_week_low: [$.t("Price - 52 Week Low"), "L 52W"],
                price_earnings_ttm: [$.t("Price/Earnings, TTM"), $.t("PE")],
                price_percent_change_1_week: [$.t("Price % Change 1 Week"), $.t("Chng 1W")],
                price_percent_change_4_week: [$.t("Price % Change 4 Week"), $.t("Chng 4W")],
                price_percent_change_52_week: [$.t("Price % Change 52 Week"), $.t("Chng 52W")],
                price_revenue_ttm: [$.t("Price/Revenue, TTM"), "PR"],
                quick_ratio: [$.t("Quick Ratio"), "QR"],
                return_of_invested_capital_percent_ttm: [$.t("Return on Invested Capital %, TTM"), "ROI %"],
                return_on_assets: [$.t("Return on Assets"), "ROA"],
                return_on_equity: [$.t("Return on Equity"), "ROE"],
                return_on_invested_capital: [$.t("Return on Invested Capital"), "ROI"],
                revenue_per_employee: [$.t("Revenue per Employee"), "RPE"],
                sector: [$.t("Sector"), "Sec"],
                total_assets: [$.t("Total Assets"), $.t("Assets")],
                total_capital: [$.t("Total Capital"), $.t("Capital")],
                total_current_assets: [$.t("Total Current Assets"), "Assets C"],
                total_debt: [$.t("Total Debt"), "Debt"],
                total_revenue: [$.t("Total Revenue"), "Rev"],
                total_shares_outstanding_fundamental: [$.t("Total Shares Outstanding"), $.t("Shares")],
                volume: [$.t("Volume"), $.t("Vol")]
            },
            m = ["volume", "average_volume", "open_price", "prev_close_price", "market_cap_basic", "earnings_per_share_basic_ttm", "price_earnings_ttm", "total_shares_outstanding_fundamental", "number_of_employees", "beta_1_year"];
        r.prototype.DEPTH_CHART_MIN_HEIGHT = 50, r.prototype._depthScale = 50, r.prototype._width = 267, r.prototype._depthChartIsVisible = !0, r.prototype.depthScale = function(t) {
            var e, i;
            if (arguments.length < 1) return this._depthScale;
            if ("number" != typeof t) throw new TypeError("value must be a number");
            if (!isFinite(t) && 0 >= t) throw new RangeError("value must be positive finite number");
            this._depthScale = t, this._depthSession && this._depthSession.depthSetScale(t), e = this._bridge.properties, i = e.value() || {}, i.depthScale = this._depthScale, e.setValue(i)
        }, r.prototype.sessionStatusText = function() {
            var t, e, i, n = {
                forex: 1,
                index: 1,
                cfd: 1,
                bitcoin: 1
            };
            return this._data.values && (this._data.values.type in n || "pulsed" === this._data.values.update_mode) ? "" : (t = {
                market: '<i class="market-status-marker open"></i>' + $.t("market open"),
                out_of_session: '<i class="market-status-marker closed"></i>' + $.t("market closed")
            }, this._data.values && this._data.values.current_session in t ? t[this._data.values.current_session] : (e = $.t("previous close"), this._data.values && this._data.values.open_time && (i = new Date(1e3 * this._data.values.open_time), e += " (" + i.getDate() + " " + f[i.getMonth()] + ")"), e))
        }, r.prototype.extendedSessionStatusText = function() {
            switch (this._data.values && this._data.values.current_session) {
                case "pre_market":
                    return '<i class="market-status-marker pre-market"></i>' + $.t("pre-market");
                case "post_market":
                    return '<i class="market-status-marker post-market"></i>' + $.t("post-market");
                default:
                    return ""
            }
        }, r.prototype.updateEstimate = function(e) {
            var i, o, r, s, a;
            e.error || (i = t.utc(e.period).format("M/YYYY"), o = t.utc(e.date), r = $('<div class="dl-estimate-tooltip"><strong>' + TradingView.capitalizeFirstLetter(o.fromNow(!0)) + " to next earnings report</strong><div>" + $.t("Date") + ": " + o.format("l") + "</div><div>" + $.t("Period ending") + ": " + i + "</div></div>"), e.estimate && r.append("<div>" + $.t("Estimate") + ": " + n.formatMoney(e.estimate) + "</div>"), s = $("<div></div>").append(r), this._$headerEarning.blueTooltip(s.html(), "top"), a = Math.round(o.diff(t.utc(), "days", !0)), this._$headerEarning.text(a), 7 >= a ? this._$headerEarning.addClass("soon") : this._$headerEarning.removeClass("soon"), this._$headerEarning.show())
        }, r.prototype.onData = function(t, e) {
            var i, n, o, r, s, a, l, c, d, u, p, f, _, g, v, y, w, b, S, T, x, C, P, k, I, E, L, V, M, A, D, O;
            if ("permission_denied" === t.status && t.values && t.values.alternative) return void this.setSymbol(t.values.alternative);
            if (i = !1, n = !1, this._data.values || (i = !0, this._colShown = !1, this._52wkRangeShown = !1, this._daysRangeShown = !1, this._spreadBlockShown = !1, this._$headerSymbolWrap.attr("href", ""), this._$headerSymbolDesc.empty(), this._$headerSymbol.empty(), this._$headerIndustry.empty(), this._$headerPrice.empty(), this._$headerPriceExtended.empty(), this._$headerChange.empty(), this._$headerChangeExtended.empty(), this._$dlMoreLink.hide(), this._$headerSessionStatus.empty()), "ok" !== t.status) "error" === t.status && i && (this._$headerSymbolDesc.text(this._symbol), this._$headerIndustry.text("Invalid symbol"));
            else {
                if (this._data = t, o = t.values, i && (this._$headerEarning.hide(), this._estimatesCache.resetSymbol(), this._estimateRequested = !1), "stock" === o.type && TradingView.isFeatureEnabled("esddetailfeature") && !this._estimateRequested && (this._estimateRequested = !0, this._estimatesCache.setSymbol(o.listed_exchange, o.short_name)), r = e.values, s = null != r.pricescale || null != r.minmov || null != r.fractional || null != r.minmove2, a = null != o.pricescale && null != o.minmov && null != o.fractional && null != o.minmove2, l = null != r.bid || null != r.ask, c = o.bid && o.ask, d = null != r.high_price || null != r.low_price, u = null != o.high_price || null != r.low_price, p = null != r.price_52_week_high || null != r.price_52_week_low, f = null != o.price_52_week_high && null != o.price_52_week_low, _ = null != r.last_price, g = null != r.rtc, v = null != r.current_session, y = ("pre_market" === o.current_session || "post_market" === o.current_session) && !!o.rtc, w = "forex" === o.type, b = "MOEX" === t.values.exchange || "MOEX" === t.values.listed_exchange, s && a && (this._priceFormatter = new h(o.pricescale, o.minmov, o.fractional, o.minmove2)), r.fundamental_data) this._colShown || (this._$col.show(), this._colShown = !0, n = !0), this._$dlMoreLink.show(), this._$headerIndustry.empty().append($(document.createElement("span")).attr("title", "Industry").text(r.industry), document.createTextNode(": "), $(document.createElement("span")).attr("title", "Sector").text(r.sector));
                else if (r.type && !o.fundamental_data) switch (r.type) {
                    case "spread":
                        this._$headerIndustry.text("Composite Symbols");
                        break;
                    case "forex":
                    case "bitcoin":
                    case "index":
                    case "futures":
                    case "equity":
                        this._$headerIndustry.text($.t(r.type).replace(/^./, function(t) {
                            return t.toUpperCase()
                        }));
                        break;
                    default:
                        this._$headerIndustry.empty(), this._$data.css("top", 0)
                }
                this._colShown && Object.keys(r).forEach(function(t) {
                    if (t in this._dynamicColData) {
                        var e = r[t];
                        this._dynamicColData[t].attr("title", e).text(this.format(e, this.fieldType(t)))
                    }
                }, this), _ && (this._$headerPrice.html(this.highlightPrice(r.last_price, this._prev_price)), w && this._$headerPrice.lastCharSup(), this._prev_price = r.last_price), (v || g) && this._toggleExtendedData(y, o.exchange), g && (this._$headerPriceExtended.html(this.highlightPrice(r.rtc, this._prev_extended_price)), this._prev_extended_price = r.rtc), null == r.change && null == r.change_percent || (null == o.change ? this._$headerChange.empty() : (S = this._priceFormatter.format(o.change), null != o.change_percent && (S += " (" + o.change_percent + "%)"), T = this._$headerChange.text(S), o.change > 0 ? T.removeClass("minus").addClass("plus") : o.change < 0 ? T.removeClass("plus").addClass("minus") : T.removeClass("plus").removeClass("minus"))), null == r.rch && null == r.rchp || (null == o.rch ? this._$headerChangeExtended.empty() : (x = this._priceFormatter.format(o.rch), null != o.rchp && (x += " (" + o.rchp + "%)"), C = this._$headerChangeExtended.text(x), o.rch > 0 ? C.removeClass("minus").addClass("plus") : o.rch < 0 ? C.removeClass("plus").addClass("minus") : C.removeClass("plus").removeClass("minus"))), null != r.description && this._$headerSymbolDesc.text((r.description || "").replace(/[+*\(\/]/g, "$&â€‹")), null == r.type && null == r.original_name || ("spread" !== r.type ? (this._$headerSymbol.text("(" + (o.original_name || this._symbol) + ")").show(), this._$headerSymbolWrap.attr("href", "/chart/" + (o.short_name || this._symbol) + "/")) : this._$headerSymbol.hide()), null != r.update_mode && this._$headerDelayed.toggle("pulsed" === r.update_mode), u && d && (this._$daysRangePriceL.text(this._priceFormatter.format(o.low_price)), this._$daysRangePriceR.text(this._priceFormatter.format(o.high_price)), w && (this._$daysRangePriceL.lastCharSup(), this._$daysRangePriceR.lastCharSup())), c && l && !b && (this._spreadBlockShown || (this._$spreadBlock.show(), this._spreadBlockShown = !0, n = !0), this._$bid.text(this._priceFormatter.format(o.bid)), this._$ask.text(this._priceFormatter.format(o.ask)), w && (this._$bid.lastCharSup(), this._$ask.lastCharSup()), o.bid_size && this._$bid.append(document.createTextNode("Ã—" + o.bid_size)), o.ask_size && this._$ask.append(document.createTextNode("Ã—" + o.ask_size))), (_ || l || d) && u && (this._daysRangeShown || (this._$daysRange.show(), this._daysRangeShown = !0, n = !0), I = o.high_price - o.low_price, P = Math.min(o.last_price, o.open_price), k = Math.max(o.last_price, o.open_price), E = 100 * (P - o.low_price) / I, L = 100 * (k - o.low_price) / I, (_ || d) && this._$daysRangeBar.css({
                    left: E + "%",
                    width: L - E + "%"
                }).toggleClass("low", o.last_price < o.open_price), c && !b ? l && (V = 100 * (o.bid - o.low_price) / I, M = 100 * (o.ask - o.low_price) / I, this._$daysRangeBid.css({
                    left: V + "%",
                    display: V > 100 || 0 > V ? "none" : "block"
                }), this._$daysRangeAsk.css({
                    left: M + "%",
                    display: M > 100 || 0 > M ? "none" : "block"
                }), this._$daysRangeLast.hide()) : (_ || b) && (this._$daysRangeLast.css({
                    left: (o.last_price < o.open_price ? E : L) + "%",
                    display: "block"
                }).toggleClass("low", o.last_price < o.open_price), this._$daysRangeBid.hide(), this._$daysRangeAsk.hide())), f && u && (p || d) && (this._52wkRangeShown || (this._$52wkRange.show(), this._52wkRangeShown = !0, n = !0), A = Math.max(t.values.high_price, parseFloat(o.price_52_week_high)), D = Math.min(t.values.low_price, parseFloat(o.price_52_week_low)), I = A - D, E = 100 * (t.values.low_price - D) / I, L = 100 * (t.values.high_price - D) / I, O = 100 * (t.values.last_price - D) / I, this._$52wkRangePriceL.text(this._priceFormatter.format(D)), this._$52wkRangePriceR.text(this._priceFormatter.format(A)), this._$52wkRangeBar.css({
                    left: E + "%",
                    width: L - E + "%"
                }).toggleClass("low", t.values.last_price < t.values.open_price), this._$52wkRangeMark.css({
                    left: O + "%"
                }).toggleClass("low", t.values.last_price < t.values.open_price))
            }
            i && (n = !0, this._colShown || (m.forEach(function(t) {
                var e = this._dynamicColData[t];
                e && e.text("----")
            }, this), this._$col.hide(), this._$headerDelayed.hide()), this._52wkRangeShown || this._$52wkRange.hide(), this._daysRangeShown || this._$daysRange.hide(), this._spreadBlockShown || this._$spreadBlock.hide()), n && this.resize()
        }, r.prototype.showDialog = function() {
            var t, e, n, o, r, s, a;
            this._data.values && this._data.values.fundamental_data && (t = this, e = TVDialogs.createDialog($.t("Fundamentals company", {
                company: this._data.values.description
            })), e.css("width", "600px"), n = $('<div class="main dl-dialog">').css("height", Math.min(500, $(window).height() - 50) + "px").appendTo(e.find("._tv-dialog-content")), $('<div class="dl-dialog-header">').html("<strong>" + this._data.values.description + '</strong> <a href="' + (-1 === this._data.values.web_site_url.indexOf("http") ? "http://" : "") + this._data.values.web_site_url + '" target="_blank">' + this._data.values.web_site_url.replace("http://", "").replace(/\/$/g, "") + "</a>").appendTo(n), o = $('<div class="dl-company-desc">' + this._data.values.business_description + "</div>").appendTo(n).ellipsis(), $('<a class="dl-dialog-more">' + $.t("Show More") + "</a>").click(function() {
                var e = !1;
                return function() {
                    var i = $(this);
                    e ? (o.css("height", "46px").ellipsis(), i.text($.t("Show More"))) : (o.css("height", "auto").text(t._data.values.business_description), i.text($.t("Show Less"))), e = !e
                }
            }()).appendTo(n), r = this._data && this._data.values ? this._data.values : null, s = function(t, e) {
                return this.format(t, this.fieldType(e))
            }.bind(this), a = i(372), a(r, s).appendTo(n), TVDialogs.positionDialog(e, {
                left: $(window).width() / 2 - e.width() / 2,
                top: $(window).height() / 2 - e.height() / 2
            }), TVDialogs.applyHandlers(e))
        }, r.prototype.prepareLayout = function(t) {
            var e, i = this;
            this._$dl = $('<div class="tv-detail">').appendTo(t), this._$dlMoreLink = $('<a class="button apply-common-tooltip" title="' + $.t("Show More") + '"><i class="icon-list-dots"></i></a>').click(function() {
                i.showDialog(), TradingView.trackEvent("GUI", "Detail Show More")
            }).hide().appendTo(this._bridge.$headerspace), this._$data = $('<div class="dl-data">').appendTo(this._$dl), this._$header = $('<div class="dl-header"></div>').appendTo(this._$data), e = $("<div>").appendTo(this._$header), this._$headerEarning = $('<div class="dl-header-earning">7</div>').appendTo(e).hide(), this._$headerSymbolWrap = (o.enabled("charting_library_base") ? $("<span>") : $('<a target="_blank">')).appendTo(this._$header), this._$headerSymbolDesc = $('<span class="dl-header-symbol-desc"></span>').appendTo(this._$headerSymbolWrap), this._$headerSymbol = $('<span class="dl-header-symbol"></span>').appendTo(this._$headerSymbolWrap), this._$headerDelayed = $('<span class="dl-delayed" title="Quotes are delayed by 10 min and updated every 30 seconds">D</span>').appendTo(this._$headerSymbolWrap).hide(), this._$headerSymbolWrap.appendTo(e), this._$headerIndustry = $('<div class="dl-header-industry"></div>').appendTo(this._$header), this._$headerFigures = $('<div class="dl-header-figures">').appendTo(this._$header), this._$headerPrice = $('<span class="dl-header-price"></span>').appendTo(this._$headerFigures), this._$headerChange = $('<span class="dl-header-change"></span>').appendTo(this._$headerFigures), this._$headerSessionStatus = $('<div class="dl-header-session-status"></div>').appendTo(this._$headerFigures), this._$headerExtendedSessionData = $('<div class="dl-header-extended-data"></div>').appendTo(this._$header), this._$headerPriceExtended = $('<span class="dl-header-price-extended"></span>').appendTo(this._$headerExtendedSessionData), this._$headerChangeExtended = $('<span class="dl-header-change-extended"></span>').appendTo(this._$headerExtendedSessionData), this._$headerSessionStatusExtended = $('<div class="dl-header-session-status"></div>').appendTo(this._$headerExtendedSessionData), this._$spreadBlock = $('<div class="dl-bidoffer-spread">').hide().appendTo(this._$header), this._$bid = $('<span class="dl-bid" title="Bid"></span>').appendTo(this._$spreadBlock), this._$ask = $('<span class="dl-ask" title="Ask"></span>').appendTo(this._$spreadBlock), this._$headerTime = $('<div class="dl-header-time"></div>').appendTo(this._$header), this._$daysRange = $('<div class="dl-range first-child">').hide().appendTo(this._$data), this._$daysRangeLast = $('<div class="dl-range-mark icon last"></div>').appendTo(this._$daysRange), this._$daysRangeBid = $('<div class="dl-range-mark icon bid"></div>').appendTo(this._$daysRange), this._$daysRangeAsk = $('<div class="dl-range-mark icon ask"></div>').appendTo(this._$daysRange), this._$daysRangeBarBg = $('<div class="dl-range-bar-bg"></div>').appendTo(this._$daysRange), this._$daysRangeBar = $('<div class="dl-range-bar"></div>').appendTo(this._$daysRangeBarBg), this._$daysRangePriceL = $('<div class="dl-range-price-l"></div>').appendTo(this._$daysRange), this._$daysRangePriceR = $('<div class="dl-range-price-r"></div>').appendTo(this._$daysRange), $('<div class="dl-range-caption">' + $.t("Day's Range") + "</div>").appendTo(this._$daysRange), this._$52wkRange = $('<div class="dl-range">').hide().appendTo(this._$data), this._$52wkRangeMark = $('<div class="dl-range-mark icon"></div>').appendTo(this._$52wkRange), this._$52wkRangeBarBg = $('<div class="dl-range-bar-bg">').appendTo(this._$52wkRange), this._$52wkRangeBar = $('<div class="dl-range-bar"></div>').appendTo(this._$52wkRangeBarBg), this._$52wkRangePriceL = $('<div class="dl-range-price-l"></div>').appendTo(this._$52wkRange), this._$52wkRangePriceR = $('<div class="dl-range-price-r"></div>').appendTo(this._$52wkRange), $('<div class="dl-range-caption">' + $.t("52wk Range") + "</div>").appendTo(this._$52wkRange), this._$col = $('<div class="dl-item-group clearfix">').hide().appendTo(this._$data), m.forEach(function(t) {
                var e, i = this._data.values && this._data.values[t] ? this._data.values[t] : "----",
                    n = $('<div class="dl-item">').appendTo(this._$col);
                $('<div class="dl-col dl-col-field">').attr("title", g[t][0]).text(g[t][1] + ":").appendTo(n), e = $('<div class="dl-col dl-col-val">').attr("title", i).text(this.format(i, this.fieldType(t))).appendTo(n), this._dynamicColData[t] = e
            }, this), this._$depthChart = $(document.createElement("div")).addClass("dl-depthchart").appendTo(this._$dl), this._scroll = new a(this._$dl, this._$data), this._$headerExtendedSessionData.hide()
        }, r.prototype.resetLayout = function() {
            m.forEach(function(t) {
                var e = this._dynamicColData[t];
                e && e.text("----")
            }, this), this._$col.hide(), this._$headerDelayed.hide(), this._colShown = !1, this._$headerSymbolWrap.attr("href", ""), this._$headerSymbolDesc.empty(), this._$headerSymbol.empty(), this._$headerIndustry.empty(), this._$headerPrice.empty(), this._$headerPriceExtended.empty(), this._$headerChange.empty(), this._$headerChangeExtended.empty(), this._$52wkRange.hide(), this._52wkRangeShown = !1, this._$daysRange.hide(), this._daysRangeShown = !1, this._$spreadBlock.hide(), this._spreadBlockShown = !1, this._$dlMoreLink.hide(), this.resize()
        }, r.prototype.resize = function() {
            var t, e;
            this._bridge.visible.value() && (this._scroll.resize(), t = this._$dl.height() - this._$data.outerHeight(), e = this._depthChartIsVisible, this._depthChartIsVisible = t >= this.DEPTH_CHART_MIN_HEIGHT, this._depthChartIsVisible ? (this._$depthChart.height(t), e || this._$depthChart.show()) : e && (this._$depthChart.hide(), this._depthChart && (this._depthChart.destroy(), delete this._depthChart))), this.updateDepthSymbol(), this._depthChart && this._depthChart.resize()
        }, r.prototype.setSymbol = function(t) {
            t !== this._symbol && (t && this._data && (this._data.original_name === t || this._data.pro_name === t) || (this._symbol && quoteSessionMultiplexerInstance.full.unsubscribe(this._bridge.id, this._symbol), this._toggleExtendedDataTimeout && (clearTimeout(this._toggleExtendedDataTimeout), this._toggleExtendedDataTimeout = null), this._symbol = t, this._prev_price = 0, this._prev_extended_price = 0, this._data = {}, this._priceFormatter = this._defaultPriceFormatter, this.onData({}), this._depthChart ? (this._depthChart.destroy(), delete this._depthChart) : this._$depthChart.empty(), t && quoteSessionMultiplexerInstance.full.subscribe(this._bridge.id, this._symbol, this.onData.bind(this)), this.updateDepthSymbol()))
        }, r.prototype.updateDepthSymbol = function() {
            var t = this._symbol;
            t && this._depthChartIsVisible && this._bridge.visible.value() && -1 === this._noDepthSymbols.indexOf(t) || (t = void 0), t !== this._depthSymbol && (this._depthSymbol = t, !this._depthSession && t ? (this._depthSession = new p(ChartApiInstance, this._depthScale, this._width), this._depthSession.connect(this.onDepthData.bind(this))) : t ? this._depthSession.depthSetSymbol(t) : this._depthSession.depthClearSymbol())
        }, r.prototype.onDepthData = function(t) {
            switch (t.method) {
                case "connected":
                    this._depthSymbol && this._depthSession.depthSetSymbol(this._depthSymbol);
                    break;
                case "depth_symbol_error":
                    this._depthSymbol = void 0, -1 === this._noDepthSymbols.indexOf(this._symbol) && (this._noDepthSymbols.push(this._symbol), this._noDepthSymbols.length > 16 && this._noDepthSymbols.shift()), delete this._depthLast;
                    break;
                case "depth_symbol_success":
                    this._depthChart || this._$depthChart.html('<div class="depth-widget-notice"><p>' + $.t("Loading market depth data&hellip;") + "</p></div>"), delete this._depthLast;
                    break;
                case "dd":
                    this._depthChart || (this._depthChart = new s({
                        wrap: this._$depthChart,
                        xAxisFormatter: this._priceFormatter,
                        scaleFn: this.depthScale.bind(this)
                    })), this._depthChart.update(t.params[0]), "_depthLast" in this && (this._depthChart.updateLast(this._depthLast), delete this._depthLast);
                    break;
                case "dpu":
                    this._depthChart && this._depthChart.updateDelta(t.params[0]);
                    break;
                case "depth_bar_last_value":
                    this._depthChart ? this._depthChart.updateLast(t.params[1]) : this._depthLast = t.params[1]
            }
        }, r.prototype.format = function(t, e) {
            var i = parseFloat(t);
            return TradingView.isNaN(i) ? t : "percent" === e ? this._percentageFormatter.format(100 * i) : TradingView.isInteger(i) ? this._volumeFormatter.format(i) : i
        }, r.prototype.highlightPrice = function(t, e) {
            var i, n, o, r, s, a;
            if (!e) return this._priceFormatter.format(t);
            for (i = t - e > 0 ? "plus" : "minus", n = this._priceFormatter.format(t), o = "" + e, r = "", s = !1, a = 0; a < n.length; a++) n[a] === o[a] || s || (r += '<span class="' + i + '">', s = !0), r += n[a];
            return s && (r += "</span>"), r
        }, r.prototype.fieldType = function(t) {
            return quoteSessionMultiplexerInstance.full._fields ? quoteSessionMultiplexerInstance.full._fields[t] : !1
        }, r.prototype.destroy = function() {
            this._depthChart && this._depthChart.destroy(), this._depthSession && this._depthSession.stopSession(), quoteSessionMultiplexerInstance.full.unsubscribe(this._bridge.id, this._symbol)
        }, r.prototype._toggleExtendedData = function(t, e) {
            var i, n;
            this._toggleExtendedDataTimeout && clearTimeout(this._toggleExtendedDataTimeout), i = e && this._toggleExtendedDataExhcange !== e, n = t || i ? 0 : 1e3, this._toggleExtendedDataTimeout = setTimeout(function() {
                this._$headerExtendedSessionData.toggle(t), this._$headerSessionStatus.html(this.sessionStatusText()), this._$headerSessionStatusExtended.html(this.extendedSessionStatusText())
            }.bind(this), n), e && (this._toggleExtendedDataExhcange = e);
        }, e.Widget = r, e.FieldGroups = _, e.FieldDescription = g, e.DefaultFields = m
    }).call(e, i(23), i(137), i(3))
}, function(t, e) {
    "use strict";

    function i(t) {
        this.init(t)
    }
    var n = 16,
        o = 6,
        r = 3,
        s = 3,
        a = "#F0F0F0",
        l = "#555555",
        c = "10px Arial, sans-serif",
        h = 15,
        d = 4,
        u = "rgb(91,133,191)",
        p = "rgba(91,133,191,.2)",
        f = "rgb(179,91,70)",
        _ = "rgba(179,91,70,.2)",
        g = "#AAAAAA",
        m = 5,
        v = 5,
        y = l;
    i.prototype.init = function(t) {
        var e, i, n;
        t || (t = {}), e = this, this.wrap = $(t.wrap).eq(0), this.wrap.empty(), this.element = $(document.createElement("div")).css({
            height: "100%",
            position: "relative"
        }).addClass("depth-widget-wrap").appendTo(this.wrap), this.mainCanvas = $(document.createElement("canvas")).attr("class", "depth-main-canvas").appendTo(this.element), this.initLastIndicator(), this.infoCanvas = $(document.createElement("canvas")).attr("class", "depth-info-canvas").appendTo(this.element), this.mainCanvas.add(this.infoCanvas).css({
            display: "block",
            position: "absolute",
            top: "0",
            left: "0",
            width: "100%",
            height: "100%"
        }), this.infoCanvas.hide(), this.eventShield = $(document.createElement("div")).css({
            position: "absolute",
            left: 0,
            top: 0,
            width: "100%",
            height: "100%",
            background: "rgba(255, 255, 255, 0)",
            overflow: "hidden",
            "-ms-touch-action": "none"
        }).addClass("depth-widget-eventshield").appendTo(this.element), this.eventShield.on("mouseover", function() {
            e.infoCanvas.show(), e.infoShown = !0
        }), this.eventShield.on("mouseout", function() {
            e.infoCanvas.hide(), e.infoShown = !1
        }), "function" == typeof t.scaleFn && this.initZoom(t.scaleFn), n = this.onMouseMove.bind(this), this.eventShield.on("mousemove", function(t) {
            e.mousemoveEvent = t, i || (i = setTimeout(function() {
                n(), i = void 0
            }, 10))
        }), t.xAxisFormatter && (this.xAxisFormatter = t.xAxisFormatter), this.resize()
    }, i.prototype.initLastIndicator = function() {
        var t, e = document.createElement("canvas");
        this.lastIndicator = $(e).attr({
            "class": "depth-last-indicator",
            width: m,
            height: v
        }).css({
            position: "absolute",
            bottom: n - v + "px",
            display: "none"
        }).appendTo(this.element), t = e.getContext("2d"), t.fillStyle = y, t.beginPath(), t.moveTo(0, v), t.lineTo(m / 2, 0), t.lineTo(m, v), t.closePath(), t.fill()
    }, i.prototype.initZoom = function(t) {
        function e(t) {
            return Math.max(c, Math.min(h, Math.exp((u - t) * p)))
        }

        function i(t) {
            return Math.max(0, Math.min(u, Math.round(u - Math.log(t) / p)))
        }

        function n(t) {
            t >= u ? (t = u, r || (r = !0, g.addClass("disabled"))) : r && (r = !1, g.removeClass("disabled")), 0 >= t ? (t = 0, s || (s = !0, m.addClass("disabled"))) : s && (s = !1, m.removeClass("disabled")), v.css("left", t)
        }

        function o(o) {
            var r = t(),
                s = Math.max(0, Math.min(h, i(r) + o)),
                a = e(s);
            a !== r && a === a && (t(a), n(s))
        }
        var r, s, a = this,
            l = 4,
            c = 1,
            h = 100,
            d = 150,
            u = 99,
            p = Math.log(h) / u,
            f = this.element,
            _ = $(document.createElement("div")).attr("class", "depth-zoom-wrapper").appendTo(this.element),
            g = $(document.createElement("div")).attr("class", "depth-zoom-plus").appendTo(_),
            m = $(document.createElement("div")).attr("class", "depth-zoom-minus").appendTo(_),
            v = $(document.createElement("div")).attr("class", "depth-zoom-handle").appendTo(_);
        this.syncScale = function() {
            n(i(t()))
        }, this.syncScale(), g.on("click", function(t) {
            t.preventDefault(), o(+l)
        }), m.on("click", function(t) {
            t.preventDefault(), o(-l)
        }), v.on("mousedown", function(i) {
            function o() {
                p = void 0;
                var i = e(h);
                h !== c && (c = i, t(i))
            }

            function r(t) {
                var e = l + t.pageX - a;
                if (e > u) e = u;
                else if (0 > e) e = 0;
                else if (e !== e) return;
                h = e, p || (p = setTimeout(o, d)), n(e)
            }

            function s() {
                $(document.documentElement).off("mousemove", r), $(document.documentElement).off("mouseup", s), f.removeClass("dragging"), p && (clearTimeout(p), p = void 0), o()
            }
            var a, l, c, h, p;
            i.preventDefault(), a = i.pageX, l = parseFloat(v.css("left")), c = t(), h = c, f.addClass("dragging"), $(document.documentElement).on("mousemove", r), $(document.documentElement).on("mouseup", s)
        }), this.eventShield.on("mousewheel", function(t, e) {
            t.preventDefault(), 0 > e ? o(-l) : e > 0 && o(+l)
        }),
            function() {
                var e, o, r, s = function() {
                    var s = Math.max(c, Math.min(h, e / o));
                    t(s), n(i(s)), r = void 0
                };
                a.eventShield.on("gesturestart", function(i) {
                    e = t(), o = 1
                }), a.eventShield.on("gesturechange", function(t) {
                    t.preventDefault();
                    var e = +t.originalEvent.scale;
                    0 !== e && isFinite(e) && (o = e, r || (r = setTimeout(s, d)))
                })
            }(),
            function() {
                var e, o, r, s, l, u;
                window.navigator.msPointerEnabled && "function" == typeof MSGesture && (e = a.eventShield.get(0), o = new MSGesture, o.target = e, e.addEventListener("MSPointerDown", function(t) {
                    o.addPointer(t.pointerId)
                }, !1), u = function() {
                    var e = Math.max(c, Math.min(h, r / s));
                    isFinite(e) && (t(e), n(i(e)), l = void 0)
                }, e.addEventListener("MSGestureStart", function(e) {
                    r = t(), s = 1
                }, !1), e.addEventListener("MSGestureChange", function(t) {
                    var e = +t.scale;
                    0 !== e && 1 !== e && isFinite(e) && (s *= e, l || (l = setTimeout(u, d)))
                }, !1))
            }()
    }, i.prototype.resize = function() {
        this.width = this.wrap.width(), this.height = this.wrap.height(), this.mainCanvas.attr({
            width: this.width,
            height: this.height
        }), this.infoCanvas.attr({
            width: this.width,
            height: this.height
        }), this.plotWidth = this.width, this.plotYofsset = .05 * this.height, this.plotHeight = this.height - this.plotYofsset - n, this.XpixelPerPrice = this.plotWidth / (this.pmax - this.pmin), this.YpixelPerPrice = this.plotHeight / (this.cmax - this.cmin), this.render()
    }, i.prototype.calcData = function() {
        var t, e, i, n, o, r, s;
        for (this.cmin = 0, this.cmax = 0, t = 0, i = this.bids, n = i.length; n--;) i[n].c = t += i[n].v;
        for (e = t, t = 0, o = this.asks, n = 0; n < o.length; n++) o[n].c = t += o[n].v;
        this.cmax = Math.max(e, t), isFinite(this.pmin) || (r = i.length && i || o.length && o || [{}], this.pmin = r[0].p), isFinite(this.pmax) || (s = o.length && o || i.length && i || [{}], this.pmax = s[s.length - 1].p), this.maxbid = i.length ? i[i.length - 1].p : void 0, this.minask = o.length ? o[0].p : void 0, this.XpixelPerPrice = this.plotWidth / (this.pmax - this.pmin), this.YpixelPerPrice = this.plotHeight / (this.cmax - this.cmin), this.render()
    }, i.prototype.update = function(t) {
        this.bids = t.bids || [], this.asks = t.asks || [], this.pmax = t.right, this.pmin = t.left, this.calcData()
    }, i.prototype.updateDelta = function(t) {
        var e, i, n, o, r, s;
        if (this.bids && this.asks) {
            if (e = t.t, i = t.v, n = t.p, o = null, "a" === e) o = this.asks;
            else {
                if ("b" !== e) return;
                o = this.bids
            }
            r = this.indexBetween(o, n), void 0 === r.min || void 0 === r.max ? i && o.push({
                p: n,
                v: i
            }) : r.min === r.max ? (s = o[r.min], s.p === n ? i ? s.v = i : o.splice(r.min, 1) : n < s.p && i ? o.unshift({
                p: n,
                v: i
            }) : n > s.p && i && o.push({
                p: n,
                v: i
            })) : i && o.splice(r.max, 0, {
                p: n,
                v: i
            }), this.calcData()
        }
    }, i.prototype.updateLast = function(t) {
        this.lastValue = t, this.renderLast()
    }, i.prototype.renderLast = function() {
        if (null != this.lastValue && this.plotWidth) {
            var t = this.p2x(this.lastValue);
            isFinite(t) && this.lastIndicator.css({
                display: "block",
                left: Math.round(t - m / 2)
            })
        }
    }, i.prototype.onMouseMove = function(t) {
        var e, i, a, l, h, d, p, _, m, v, y, w, b, S, T, x, C, P;
        this.infoShown && (e = this.infoCanvas.get(0).getContext("2d"), e.clearRect(0, 0, this.width, this.height), t = t || this.mousemoveEvent, t && (i = +t.offsetX, i !== i && (i = +t.originalEvent.layerX), a = i / this.XpixelPerPrice + this.pmin, isFinite(a) && (l = (this.maxbid + this.minask) / 2, isFinite(l) || (isFinite(this.maxbid) ? l = this.maxbid : isFinite(this.minask) && (l = this.minask)), h = null, d = null, p = null, l >= a ? (p = this.bids, _ = "bid") : a >= l && (p = this.asks, _ = "ask"), m = this.indexBetween(p, a), void 0 !== m.min && (h = p[m.min], d = p[m.max], v = a < (h.p + d.p) / 2 ? h : d, y = this.plotYofsset + this.plotHeight, w = this.p2x(v.p), b = Math.floor(w) + .5, e.lineStyle = CanvasEx.LINESTYLE_DASHED, e.strokeStyle = g, CanvasEx.drawLine(e, b, 0, b, y), e.font = c, e.textBaseline = "top", e.textAlign = "center", e.font = c, S = this.xAxisFormatter.format(v.p), T = Math.ceil(e.measureText(S).width / 2) + 3, e.fillStyle = "bid" === _ ? u : f, e.fillRect(Math.round(w) - T, y + 1, 2 * T, n), e.fillStyle = "#fff", e.fillText(S, b, y + 4), e.strokeStyle = "#fff", e.beginPath(), e.moveTo(b, y + 1), e.lineTo(b, y + r), e.stroke(), x = this.s2y(v.c), C = Math.floor(x) + .5, S = this.yAxisFormatter.format(v.c), P = Math.ceil(e.measureText(S).width) + o + 4, e.fillStyle = "bid" === _ ? u : f, e.fillRect(0, Math.floor(x) - 5, P, 11), e.fillStyle = "#fff", e.textBaseline = "middle", e.textAlign = "left", e.fillText(S, o, C), e.beginPath(), e.moveTo(0, C), e.lineTo(s, C), e.stroke()))))
    }, i.prototype.indexBetween = function(t, e) {
        var i, n, o, r, s, a;
        if (!t || !t.length) return {};
        if (e = +e, e !== e) return {};
        if (i = t.length - 1, n = t[i].p, e >= n) return {
            min: i,
            max: i
        };
        if (o = 0, r = t[o].p, r >= e) return {
            min: o,
            max: o
        };
        for (; i > o + 1;)
            if (s = o + i >> 1, a = t[s].p, a > e) i = s;
            else {
                if (!(e > a)) return a === e ? {
                    min: s,
                    max: s
                } : {};
                o = s
            }
        return {
            min: o,
            max: i
        }
    }, i.prototype.p2x = function(t) {
        return (t - this.pmin) * this.XpixelPerPrice
    }, i.prototype.s2y = function(t) {
        return this.plotYofsset + this.plotHeight - t * this.YpixelPerPrice
    }, i.prototype.yAxisFormatter = {
        format: function(t) {
            return Math.round(t)
        }
    }, i.prototype.xAxisFormatter = {
        format: function(t) {
            return t
        }
    }, i.prototype.sizeFormatter = {
        format: function(t) {
            return t.toFixed(4)
        }
    }, i.prototype.calculateTickmarks = function(t, e, i, n) {
        var o, r = (e - t) * n / i,
            s = Math.pow(10, Math.ceil(Math.log(r) / Math.LN10));
        return s / 5 >= r && (s /= 5), s / 2 >= r && (s /= 2), o = Math.ceil(t / s) * s, {
            tick: s,
            start: o
        }
    }, i.prototype.render = function() {
        var t, e, i, n, s, g, m, v, y, w, b, S, T, x, C, P;
        if (!(this.plotHeight <= 0 || this.plotWidth <= 0) && (t = this.asks, e = this.bids, i = this.mainCanvas.get(0).getContext("2d"), i.clearRect(0, 0, this.width, this.height), this.asks && this.bids && (0 !== this.asks.length || 0 !== this.bids.length))) {
            if (n = this.calculateTickmarks(this.cmin, this.cmax, this.plotHeight, h), s = [], n.tick > 0 && isFinite(n.start))
                for (i.strokeStyle = a, i.strokeWidth = 1, g = 1; m = n.start + n.tick * g, !(m > this.cmax); g++) v = Math.floor(this.s2y(m)) + .5, i.beginPath(), i.moveTo(0, v), i.lineTo(this.plotWidth, v), i.stroke(), s.push({
                    c: m,
                    y: v
                });
            if (i.font = c, y = i.measureText(this.xAxisFormatter.format(this.pmax)).width + d, w = this.calculateTickmarks(this.pmin, this.pmax, this.width, y), b = [], w.tick > 0 && isFinite(w.start))
                for (i.strokeStyle = a, i.strokeWidth = 1, g = 0; S = w.start + w.tick * g, T = Math.floor(this.p2x(S)) + .5, i.beginPath(), i.moveTo(T, this.plotHeight + this.plotYofsset + .5), i.lineTo(T, 0), i.stroke(), b.push({
                    p: S,
                    x: T
                }), !(S > this.pmax); g++);
            if (e.length) {
                for (i.beginPath(), x = this.p2x(e[e.length - 1].p), C = this.plotHeight + this.plotYofsset, i.moveTo(x, C), g = e.length; g--;) T = this.p2x(e[g].p), v = this.s2y(e[g].c), i.lineTo(x, v), i.lineTo(T, v), x = T;
                i.lineTo(0, this.s2y(e[0].c)), i.strokeStyle = u, i.stroke(), i.lineTo(0, this.plotHeight + this.plotYofsset), i.fillStyle = p, i.fill()
            }
            if (t.length) {
                for (i.beginPath(), x = this.p2x(t[0].p), C = this.plotHeight + this.plotYofsset, i.moveTo(x, C), g = 0; g < t.length; g++) T = this.p2x(t[g].p), v = this.s2y(t[g].c), i.lineTo(x, v), i.lineTo(T, v), x = T;
                i.lineTo(this.width, this.s2y(t[t.length - 1].c)), i.strokeStyle = f, i.stroke(), i.lineTo(this.width, this.plotHeight + this.plotYofsset), i.fillStyle = _, i.fill()
            }
            for (i.save(), i.strokeStyle = l, P = this.plotYofsset + this.plotHeight, i.beginPath(), i.moveTo(0, P + .5), i.lineTo(this.plotWidth, P + .5), i.stroke(), g = 0; g < b.length; g++) i.beginPath(), i.moveTo(b[g].x, P + 1), i.lineTo(b[g].x, P + r), i.stroke();
            for (i.shadowColor = "#fff", i.shadowOffsetX = 0, i.shadowOffsetY = 0, i.shadowBlur = 3, i.fillStyle = l, i.textBaseline = "top", i.textAlign = "center", i.font = c, g = 0; g < b.length; g++) i.fillText(this.xAxisFormatter.format(b[g].p), b[g].x, P + 4);
            for (i.textBaseline = "middle", i.textAlign = "left", g = 0; g < s.length; g++) i.fillText(this.yAxisFormatter.format(s[g].c), o, s[g].y);
            i.restore(), this.onMouseMove(), this.renderLast()
        }
    }, i.prototype.destroy = function() {
        this.element.remove()
    }, t.exports = i
}, function(t, e) {
    "use strict";

    function i(t, e, i) {
        if (this._chartApi = t, this._sessionid = "ds_" + TradingView.randomHash(), this._sessionstarted = !1, !isFinite(e)) throw new RangeError("scale must be a finite number");
        if (!isFinite(i)) throw new RangeError("viewportWidth must be a finite number");
        this._scale = e, this._viewportWidth = i
    }
    i.prototype.connected = function() {
        return this._chartApi.connected()
    }, i.prototype.connect = function(t) {
        this._globalHandler = t, this._chartApi.createSession(this._sessionid, this), this._chartApi.connect()
    }, i.prototype.disconnect = function() {
        this._chartApi.disconnect()
    }, i.prototype.depthSetSymbol = function(t) {
        this._chartApi.depthSetSymbol(this._sessionid, t)
    }, i.prototype.depthClearSymbol = function() {
        this._chartApi.depthClearSymbol(this._sessionid)
    }, i.prototype.depthSetScale = function(t) {
        if (!isFinite(t)) throw new RangeError("scale must be a finite number");
        this._chartApi.depthSetScale(this._sessionid, t), this._scale = t
    }, i.prototype.onMessage = function(t) {
        switch (t.method) {
            case "connected":
                this._sessionstarted || (this._chartApi.depthCreateSession(this._sessionid, this._scale, this._viewportWidth), this._sessionstarted = !0);
                break;
            case "disconnected":
                this._sessionstarted = !1;
                break;
            case "critical_error":
        }
        this._globalHandler(t)
    }, i.prototype.stopSession = function() {
        this._chartApi.depthDeleteSession(this._sessionid), this._sessionstarted = !1
    }, t.exports = i
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, i, o) {
            this.container = t, this.options = $.extend({
                updateOnLogin: !0
            }, i || {}), this.data = o, this.buttons = {}, this.initButtons(), this.options.updateOnLogin && this.data.image_url && loginStateChange.subscribe(this, function(t) {
                t || n.endQueueRequestData(this)
            }), this._onDataDelegate = new e
        }

        function o(t, i, n, o) {
            this.buttons = i, this.chartId = t, this.container = o, this._change = new e, this.buttons.agree.on("click", this.toggle.bind(this, !0)), this.buttons.agree.data("controller", this), this.setState(n, !0)
        }

        function r(t, e, i) {
            this.buttons = e, this.chartId = t, this.buttons.favorite.on("click", this.toggle.bind(this)), this.setState(i, !0)
        }
        var s = i(377);
        n._requestQueue = [], n.endQueueRequestData = function(t) {
            0 === n._requestQueue.length && setTimeout(n.resolveQueue, 0), n._requestQueue.push(t)
        }, n.resolveQueue = function() {
            var t = n._requestQueue.reduce(function(t, e) {
                    return t.push(e.data.image_url), t
                }, []),
                e = n._requestQueue;
            n._requestQueue = [], $.get("/ideas-data/", {
                ids: t
            }, function(t) {
                for (var i in e) i = e[i], i.data.image_url in t.charts && i._onData.call(i, t.charts[i.data.image_url])
            }, "json")
        }, n.prototype.getButtonsData = function(t) {
            switch (t) {
                case "agree":
                    return this.data;
                case "status":
                    return $.extend({}, this.data.status);
                case "favorites":
                    return {
                        active: !!this.data.current_user.favoredChart
                    };
                default:
                    return !1
            }
        }, n.prototype.initButtons = function() {
            var t, e, i = this.container.find(".chart-relation-buttons .agree");
            i.length && (this.buttons.agree = new o(this.data.id, {
                agree: i,
                score: i
            }, this.getButtonsData("agree"), this.container)), t = this.container.find(".chart-relation-buttons .fav"), t.length && (this.buttons.favorites = new r(this.data.id, {
                favorite: t,
                count: t
            }, this.getButtonsData("favorites"))), this.container.find(".chart-share-button").length && (e = {
                share: this.container.find(".chart-share-button"),
                container: this.container.find(".chart-container-wrap")
            }, this.buttons.share = new s(e.container, e.share, this.options.chartShare))
        }, n.prototype.mergeData = function(t) {
            this._onData($.extend(!0, this.data, t))
        }, n.prototype._onData = function(t) {
            var e, i;
            this.data = t, this.container.toggleClass("is-staff", !!user.is_staff), this.container.toggleClass("is-my-chart", !t.is_not_my_chart), this.container.toggleClass("is-not-my-chart", t.is_not_my_chart);
            for (e in this.buttons) i = this.getButtonsData(e), i && this.buttons[e].setState(i);
            this._onDataDelegate.fire(t)
        }, n.prototype.onData = function() {
            return this._onDataDelegate
        }, o.prototype.setAgree = function() {
            runOrSignIn(function() {
                this.state.current_user.votedForChart !== !0 && this.toggle(!0)
            }.bind(this), {
                source: "Chart agree"
            })
        }, o.prototype.toggle = function(t) {
            this.state.is_not_my_chart && runOrSignIn(function() {
                var e, i = {
                    current_user: {
                        votedForChart: !!this.state.voted
                    }
                };
                t === this.state.current_user.votedForChart ? this.state.current_user.votedForChart = !1 : this.state.current_user.votedForChart = t, this.setState(this.state), e = $.post("/vote-for-chart/", {
                    id: this.chartId,
                    vote: this.state.current_user.votedForChart
                }, function(t) {
                    var e;
                    t.error ? (TVDialogs.showNotice("Error", {
                        html: t.error
                    }), e = $.extend(!0, this.state, i)) : (delete t.error, e = $.extend(!0, this.state, t)), this.setState(e)
                }.bind(this)), this._change.fire({
                    voted: this.state.current_user.votedForChart,
                    request: e
                })
            }.bind(this), {
                source: "Chart agree",
                verifiedPhoneRequired: !0,
                verifyPhoneMessage: $.t("Verified phone number required to vote for chart.")
            })
        }, o.prototype.onChange = function(t) {
            return this._change
        }, o.prototype.setState = function(t, e) {
            this.state = t, this.updateView(e)
        }, o.prototype.updateView = function(t) {
            this.buttons.score.toggleClass("with-counter", 0 !== this.state.result_score).contents()[0].data = this.state.result_score;
            var e = !!this.state.current_user.votedForChart == !0 || this.state.is_not_my_chart === !1;
            this.buttons.agree.toggleClass("active", e)
        }, r.prototype.toggle = function(t) {
            runOrSignIn(function() {
                this.state.active = !this.state.active, this.setState(this.state), $.post(this.state.active ? "/add-to-favorites/" : "/remove-from-favorites/", {
                    id: this.chartId
                }, TradingView.handleIfNotErrorFunc(function(t) {
                    this.setState(this.state)
                }.bind(this)), "json")
            }.bind(this), {
                source: "Chart favorite"
            })
        }, r.prototype.setState = function(t, e) {
            this.state = t, this.updateView(e)
        }, r.prototype.updateView = function(t) {
            this.buttons.favorite.toggleClass("active", !!this.state.active)
        }, t.exports = n
    }).call(e, i(50))
}, function(t, e, i) {
    (function(e) {
        "use strict";

        function n(t, e, i) {
            this._container = t, this._data = i.data, this._options = i, this._activate_button = $(e), this._activate_button.on("click", this.toggle.bind(this)), this._data.base_url = this._data.protocol + "://" + this._data.host, this._data.full_published_chart_url = this._data.base_url, this._data.published_chart_url ? this._data.full_published_chart_url += this._data.published_chart_url : this._data.image_url && (this._data.full_published_chart_url += "/v/" + this._data.image_url + "/")
        }
        var o = i(378),
            r = i(107).loadScript;
        n.prototype.initForm = function() {
            this._content = $('<div class="share-options"><div class="share-warapper"><p>' + $.t("Share to...") + '</p><div class="addthis"></div><a class="close-button"></a><div class="share-base"><p>' + $.t("Link to this chart") + ':</p><input class="link-to-chart" type="text" value="' + this._data.full_published_chart_url + '" readonly="readonly"/><p>' + $.t("Chart as image") + ':</p><input class="link-to-chart" type="text" value="' + this._data.base_url + "/i/" + this._data.image_url + '/" readonly="readonly"/><p>' + $.t("Make a Copy") + ':</p><form method="POST" target="_blank" action="/chart/" style="display:inline" class="make-it-mine"><input type="hidden" name="id" value="' + this._data.id + '"><label id="chart-rotorealtime-button" class="button">' + $.t("Make It Mine") + '<input type="submit" style="display:none" /></label></form></div><div class="embed-options"></div></div></div>'), this._content.find(".link-to-chart").on("click", function() {
                $(this).select()
            }), this._content.find(".close-button").on("click", this.toggle.bind(this)), this._embed_container = this._content.find(".embed-options"), this._embed_form = new o(this._embed_container, this._data), this._container && this._container.append(this._content), this.loadAddthisScript().done(function() {
                if (window.addthis) {
                    var t = '<div class="addthis_toolbox addthis_default_style addthis_32x32_style" addthis:title="${{short_name}} - {{name}} - " addthis:url="{{url}}"><a class="addthis_button_twitter"></a><a class="custom_button_stocktwits" title="' + $.t("Stocktwits") + '"><i class="icon"> </i></a><a class="addthis_button_facebook"></a><a class="addthis_button_linkedin"></a><a class="addthis_button_email"></a><a class="addthis_button_preferred_1"></a><a class="addthis_button_compact"></a><a class="addthis_counter addthis_bubble_style"></a></div>';
                    $(e.render(t, {
                        short_name: this._data.short_name,
                        name: this._data.name,
                        url: this._data.full_published_chart_url
                    })).prependTo(this._content.find(".addthis")), this.initStockTwitsButton(), window.addthis.toolbox(".addthis_toolbox")
                }
            }.bind(this))
        }, n.prototype.initStockTwitsButton = function() {
            var t = this;
            this._content.find(".custom_button_stocktwits").on("click", function() {
                runOrSignIn(function() {
                    function e() {
                        var e = function(e) {
                            var e = "function" == typeof e ? e : function() {};
                            $.ajax({
                                type: "POST",
                                url: "/post-stocktwits-message/",
                                data: {
                                    image_url: t._data.image_url,
                                    body: n.find("textarea").val().substring(0, o)
                                },
                                error: function() {
                                    console.warn("Stocktwits publishing unknown error")
                                },
                                success: function(t) {
                                    t.error && console.warn("Stocktwits publishing error: " + t.error)
                                },
                                complete: e
                            })
                        }.bind(window);
                        TradingView.authInStocktwits(e)
                    }

                    function i(t, e, i) {
                        return "$" + t + " - " + e + " - " + i
                    }
                    for (var n, o = 119, r = t._data.short_name, s = t._data.name, a = t._data.full_published_chart_url, l = i(r, s, a); l.length >= o && s.length > 1;) s = s.substring(0, s.length - 3) + "â€¦", l = i(r, s, a);
                    n = TVDialogs.showStocktwitsDialog(l, e)
                }, {
                    source: "Share published chart on StockTwits"
                })
            })
        }, n.prototype.toggle = function() {
            return this._content || this.initForm(), this._activate_button.toggleClass("active"), this._content.is("visible") ? this._options.beforeHide && this._options.beforeHide() : this._options.beforeShow && this._options.beforeShow(), this._content.toggle(), !1
        }, n.prototype.loadAddthisScript = function() {
            return this._addThisLoadDfd || (window.addthis ? this._addThisLoadDfd = $.Deferred().resolve() : this._addThisLoadDfd = r("https://s7.addthis.com/js/250/addthis_widget.js#pubid=multicharts&async=1")), this._addThisLoadDfd
        }, t.exports = n
    }).call(e, i(86))
}, function(t, e) {
    "use strict";

    function i(t, e) {
        var i = this;
        this._data = e, this._form = $("<div><p>" + $.t("Embed") + '</p><textarea readonly="readonly"></textarea><p class="desc">' + $.t('After making your selection, copy and paste the embed code above. <a href="/faq/">Learn more</a> how to embed chart into forum or blog.') + '</p><div class="size-select"><div class="size-button b1"><div>400x250</div></div><div class="size-button b2 active"><div>640x400</div></div><div class="size-button b3"><div>720x480</div></div><div class="size-button b4"><div>790x475</div></div><div class="size-custom"><div>' + $.t("Custom") + '</div><input type="text" value="800"/> x <input type="text" value="600"/></div></div></div>'), this._textarea = this._form.find("textarea").click(function() {
            $(this).select()
        }), this._size_buttons = this._form.find(".size-button"), this._size_buttons.on("click", function() {
            i._size_buttons.removeClass("active");
            var t = $(this).addClass("active").find("div").text().split("x");
            i.updateEmbedCode(t[0], t[1])
        }), this._custom_size_inputs = this._form.find(".size-custom input"), this._custom_size_inputs.change(this.customSizeFieldHandler.bind(this)).keyup(this.customSizeFieldHandler.bind(this)), this.updateEmbedCode(), t.html(this._form)
    }
    i.prototype.customSizeFieldHandler = function(t, e) {
        this._size_buttons.removeClass("active"), this.updateEmbedCode(parseInt(this._custom_size_inputs.first().val(), 10), parseInt(this._custom_size_inputs.last().val(), 10))
    }, i.prototype.updateEmbedCode = function(t, e) {
        var i = t || 640,
            n = e || 400,
            o = this._data.protocol + "://" + this._data.host;
        this._textarea.html('&lt;!-- TradingView Chart BEGIN --&gt;\n&lt;script type="text/javascript" src="' + this._data.protocol + "://s3.amazonaws.com/tradingview/tv" + this._data.embed_variant + '.js"&gt;&lt;/script&gt;\n&lt;script type="text/javascript"&gt;\nvar tradingview_embed_options = {};\ntradingview_embed_options.width = ' + i + ";\ntradingview_embed_options.height = " + n + ";\ntradingview_embed_options.chart = '" + this._data.image_url + "';\nnew TradingView.chart(tradingview_embed_options);\n&lt;/script&gt;\n&lt;p&gt;&lt;a href=\"" + this._data.full_published_chart_url + '"&gt;' + this._data.name + '&lt;/a&gt; by &lt;a href="' + o + "/u/" + this._data.username + '/"&gt;' + this._data.username + '&lt;/a&gt; on &lt;a href="' + o + '/"&gt;TradingView.com&lt;/a&gt;&lt;/p&gt;\n&lt;!-- TradingView Chart END --&gt;')
    }, t.exports = i
}, function(t, e, i) {
    (function(t, n, o, r) {
        "use strict";

        function s(e, i, n) {
            this._symbols = this._prepareSymbols(i), this._options = $.extend(!0, {}, this.defaultOptions(), n || {}), n.fundamentalsOptions && n.fundamentalsOptions.structure && (this._options.fundamentalsOptions.structure = n.fundamentalsOptions.structure), this._options.onSymbolChange && (this._onSymbolChange = new t, this._onSymbolChange.subscribe(null, this._options.onSymbolChange)), this.layout = {
                jqContainer: null,
                jqLabelsContainer: null,
                jqPagesContainer: null
            }, this._tabs = [], this._createLayout(e), this._createTabs(), this.selectTab(0)
        }

        function a(t, e, i) {
            this.fields = e, this._symbol = t, this._jqContainer = i, setTimeout(this.connect.bind(this), 0)
        }
        var l = i(380),
            c = i(382).WidgetRendererSymbol,
            h = i(83),
            d = h.PriceFormatter,
            u = h.VolumeFormatter,
            p = i(320);
        s.prototype.defaultOptions = function() {
            return {
                chartOnly: !1,
                miniChartOptions: {
                    showDescription: !1,
                    timeframe: {
                        value: "1y",
                        visible: !0
                    },
                    chartOptions: {
                        minHeight: 200,
                        grid: {
                            xIsVisible: !1,
                            yIsVisible: !0,
                            line: {
                                width: 1,
                                style: CanvasEx.LINESTYLE_DASHED,
                                color: "#e9e9ea"
                            }
                        },
                        yScale: {
                            maxTickMarkAmount: 5
                        },
                        xScale: {
                            visible: !0
                        },
                        plot: {
                            line: {
                                width: 2,
                                color: "#4bafe9"
                            },
                            belowLineFillStyle: "rgba(219,239,251,0.5)"
                        }
                    }
                },
                hideFooter: !1,
                fundamentalsOptions: {
                    horzDividerInPercents: 4,
                    structure: [
                        ["prev_close_price", "open_price"],
                        ["market_cap_basic", "earnings_per_share_basic_ttm"],
                        ["price_earnings_ttm", "beta_1_year"]
                    ],
                    showSymbol: !1
                },
                quoteTickerOptions: {
                    showType: !1
                },
                noBorder: !1,
                noTabsBorder: !1,
                showSymbolButtons: !1
            }
        }, s.prototype._prepareSymbols = function(t) {
            var e, i, n;
            for (t = $.isArray(t) ? t : [t], e = [], i = 0; i < t.length; i++) n = new c(t[i]), e.push(n);
            return e
        }, s.prototype._createLayout = function(t) {
            var e = this,
                i = $(t),
                n = $('<div class="tv-mediumwidget-labels"></div>'),
                o = $('<div class="tv-mediumwidget-pages"></div>'),
                r = e._$footer = $(this._options.hideFooter ? "" : '<div class="footer"><span class="fade">Quotes by </span><a href="https://www.tradingview.com/chart/' + (e._options.utmQuery ? "?" + e._options.utmQuery : "") + '" target="_blank">TradingView</a></div>');
            e.layout = {
                jqContainer: i,
                jqLabelsContainer: n,
                jqPagesContainer: o,
                jqFooter: r
            }, i.addClass("tv-mediumwidget").addClass(this._options.noBorder ? "tv-mediumwidget--no-border" : ""), n.addClass(this._options.noTabsBorder ? "tv-mediumwidget-labels--no-border" : ""), i.append(n, o, r)
        }, s.prototype._createTabs = function() {
            var t, e, i, n = this,
                o = 1 === n._symbols.length,
                r = !!n._options.noTabsBorder,
                a = {
                    chartOnly: !!n._options.chartOnly,
                    miniChartOptions: n._options.miniChartOptions,
                    showSymbolButtons: !!n._options.showSymbolButtons,
                    fundamentalsOptions: n._options.fundamentalsOptions,
                    quoteTickerOptions: n._options.quoteTickerOptions
                };
            for (n.layout.jqLabelsContainer.toggleClass("tv-mediumwidget-labels--no-border", r || o), t = 0; t < n._symbols.length; t++) e = n._symbols[t], i = new s.prototype.Tab(n, e, a), $(window).resize(i.onResize.bind(i)), $(n.layout.jqContainer).resize(i.onResize.bind(i)), o || n.layout.jqLabelsContainer.append(i.jqLabel), n.layout.jqPagesContainer.append(i.jqPage), n._tabs.push(i)
        }, s.prototype.selectTab = function(t) {
            var e, i, n, o = this,
                r = TradingView.isInteger(t) ? t : function() {
                    for (var e = o._tabs.length - 1; e >= 0; e--)
                        if (t.equalTo(o._tabs[e].symbol)) return e;
                    return null
                }();
            if (TradingView.isInteger(r)) {
                for (e = o._tabs.length - 1; e >= 0; e--) o._tabs[e].hide();
                o._tabs[r].show(), o._onSymbolChange && (i = {}, n = o._tabs[r].jqAboveChart.find(".js-symbol-title"), n.length && (i.left = n.position().left + n.children().first().width() + 15), o._onSymbolChange.fire(o._tabs[r].symbol.shortName(), i))
            }
        }, s.prototype.setSymbols = function(t) {
            this._symbols = this._prepareSymbols(t)
        }, s.prototype.Tab = function(e, i, o) {
            var r, s, a, l = this;
            o = o || {}, l.widget = e, l.symbol = i, l.created = new t, l.visible = new n(!1), l.jqPage = $('<div class="tv-mediumwidget-page clearfix"></div>'), o.chartOnly ? l.jqAboveChart = $() : (l.jqAboveChart = $('<table class="ticker-fundamental-container">' + (o.showSymbolButtons ? '<tr><td class="ticker-cell" rowspan="2"></td><td class="buttons-cell"></td></tr><tr><td class="fundamentals-cell"></td></tr>' : '<tr><td class="ticker-cell"></td><td class="fundamentals-cell"></td></tr>') + "</table>"), r = l._createQuoteTicker(i, o.quoteTickerOptions), s = l._createFundamentals(i, o.fundamentalsOptions || {}), a = o.showSymbolButtons ? l._createSymbolButtons(i) : $(), l.jqAboveChart.find(".ticker-cell").append(r), l.jqAboveChart.find(".fundamentals-cell").append(s), l.jqAboveChart.find(".buttons-cell").append(a), l.jqAboveChart.appendTo(l.jqPage)), l._createMiniChart(i, o.miniChartOptions).appendTo(l.jqPage), l.jqLabel = $('<div class="tv-mediumwidget-label"></div>'), l.jqLabel.text(i.description() || i.shortName()), l.jqLabel.click(function() {
                l.widget.selectTab(l.symbol)
            })
        }, s.prototype.Tab.prototype.onResize = function() {
            var t, e = this;
            e.ticker && e.ticker.onResize(), e.miniChart && (t = e.widget.layout.jqContainer.height() - e.widget.layout.jqLabelsContainer.outerHeight(!0) - e.jqAboveChart.outerHeight(!0) - (e.widget.layout.jqFooter.outerHeight(!0) || 0) - parseFloat(e.miniChart.widget().$container.css("margin-top")) - parseFloat(e.miniChart.widget().$container.css("margin-bottom")), e.miniChart.widget().$container.css("height", t), e.miniChart.widget().onResize())
        }, s.prototype.Tab.prototype._createQuoteTicker = function(t, e) {
            var i, n, r, s, a, l = this;
            return e = e || {}, i = '<table class="tv-mediumwidget-ticker"><tr><td class="symbol-ticker-name"><div class="symbol-short-name-container"><h1 class="js-symbol-title symbol-ticker-name-title"><span>{{ shortName }}</span>{{# showType }}&nbsp;<span class="symbol-type"></span>{{/ showType }}</h1></div><div class="symbol-description-name">&nbsp;</div></td></tr><tr><td class="symbol-ticker-value"><div class="symbol-last" title="Last price">&nbsp;</div><div class="symbol-change-container"><div class="symbol-change" title="' + $.t("Change") + '">&nbsp;</div><div class="symbol-change-pt" title="' + $.t("Change, %") + '">&nbsp;</div></div></td></tr></table>', n = $(o.render(i, {
                shortName: t.shortName(),
                showType: e.showType
            })), r = function() {
                var t, e, i = n.find(".symbol-ticker-value");
                i.css("white-space", "nowrap"), t = l.jqPage.width(), e = l.jqAboveChart.width(), e > t && i.css("white-space", "normal")
            }, s = n.find(".symbol-type"), a = function(t) {
                var i, n;
                e.showType && (i = (t || {}).type, n = {
                    stock: {
                        name: $.t("Stock Chart")
                    },
                    bitcoin: {
                        name: $.t("Bitcoin Chart")
                    },
                    index: {
                        name: $.t("Index Chart")
                    },
                    forex: {
                        name: $.t("Forex Chart")
                    },
                    futures: {
                        name: $.t("Commodities Futures Chart")
                    },
                    cfd: {
                        name: $.t("Chart")
                    }
                }, i in n && "QUANDL" !== t.exchange ? s.text(n[i].name).show() : s.hide())
            }, l.ticker = {
                jqEl: n,
                onResize: r
            }, l.visible.subscribe(function() {
                new p(t.name(), n, {
                    changePercentInBrackets: !0,
                    setStateHook: function(t, e) {
                        a(t), l.onResize()
                    }
                })
            }, {
                once: !0
            }), n
        }, s.prototype.Tab.prototype._fundametalsData = function() {
            return {
                prev_close_price: {
                    title: $.t("Previous Close Price"),
                    abbr: $.t("Prev"),
                    formatter: "price"
                },
                price_earnings_ttm: {
                    title: $.t("Price/Earnings, TTM"),
                    abbr: $.t("PE")
                },
                earnings_per_share_basic_ttm: {
                    title: $.t("Earnings per Share, Basic, TTM"),
                    abbr: $.t("EPS")
                },
                market_cap_basic: {
                    title: $.t("Market Cap - Basic"),
                    abbr: $.t("Mkt&nbsp;Cap")
                },
                open_price: {
                    title: $.t("Open Price"),
                    abbr: $.t("Open"),
                    formatter: "price"
                },
                high_price: {
                    title: $.t("High Price"),
                    abbr: $.t("High"),
                    formatter: "price"
                },
                low_price: {
                    title: $.t("Low Price"),
                    abbr: $.t("Low"),
                    formatter: "price"
                },
                beta_1_year: {
                    title: $.t("Beta - 1 Year"),
                    abbr: $.t("Beta")
                }
            }
        }, s.prototype.Tab.prototype._createFundamentals = function(t, e) {
            var i = this._createFundamentalsTemplate(e),
                n = $(o.render(i, "")),
                r = Object.keys(this._fundametalsData());
            return new a(t.name(), r, n), n
        }, s.prototype.Tab.prototype._createFundamentalsTemplate = function(t) {
            var e, i, n, o, s, a, l = (t || {}).structure,
                c = (t || {}).horzDividerInPercents,
                h = (t || {}).showSymbol;
            return l ? (e = this._fundametalsData(), i = 2 * r.max($.map(l, function(t) {
                    return t.length
                })), n = 0, o = 0, s = c || 0, o = n = Math.floor((100 - s * (i - 1)) / i), a = '<div class="tv-mediumwidget-fundamentals"><table>', l.forEach(function(t) {
                a += "<tr>";
                var i = t.length;
                t.forEach(function(t, r) {
                    var l, c;
                    t in e && (l = e[t].title, c = e[t].abbr, a += '<td class="fundamental-name" title="' + l + '" style="width: ' + n + '%;">' + (h ? "{{ shortSymbol }}&nbsp;" : "") + c + "</td>", a += '<td class="fundamental-value ' + t + '" title="' + l + '" style="width: ' + o + '%;">&nbsp;</td>', i > r + 1 && (a += '<td class="fundamental-divider" style="width: ' + s + '%;">&nbsp;</td>'))
                }), a += "</tr>"
            }), a += "</table></div>") : ""
        }, s.prototype.Tab.prototype._createMiniChart = function(t, e) {
            var i = this,
                n = $('<div class="tv-mediumwidget-minichart"></div>'),
                o = $.extend(!0, {}, e, {
                    timeframe: {
                        value: t.timeframe()
                    }
                });
            return i.visible.subscribe(function(e) {
                i.miniChart = new l(t.name(), n, o)
            }, {
                once: !0
            }), n
        }, s.prototype.Tab.prototype._createSymbolButtons = function(t) {
            var e = $('<div class="tv-mediumwidget-symbolbuttons"></div>'),
                i = !TradingView.onWidget();
            return e.append(o.render('<a href="/chart/?symbol={{ symbol }}" target="_blank" class="_tv-button green">' + $.t("Expand __symbol__ chart", {
                    symbol: "{{ shortName }}"
                }) + "</a>" + (i ? '<a class="button-follow-symbol _tv-button ok">' + $.t("Follow __symbol__", {
                    symbol: "{{ shortName }}"
                }) + "</a>" : ""), {
                symbol: t.name(),
                shortName: t.shortName()
            })), TradingView.FollowSymbols.makeButton({
                $button: e.find(".button-follow-symbol"),
                symbol: t.name()
            }), e
        }, s.prototype.Tab.prototype.show = function() {
            this.jqPage.addClass("active"), this.jqLabel.addClass("active"), this.visible.setValue(!0), this.onResize()
        }, s.prototype.Tab.prototype.hide = function() {
            this.jqPage.removeClass("active"), this.jqLabel.removeClass("active"), this.visible.setValue(!1)
        }, a.prototype.quoteSession = null,
            a.assignQuoteSession = function(t) {
                this.prototype.quoteSession || (this.prototype.quoteSession = t)
            }, a.prototype.connect = function() {
            this.quoteSession.subscribe("medium-widget-fundamentals", this._symbol, this.onData.bind(this))
        }, a.prototype.disconnect = function(t) {
            clearTimeout(this._loadErrorTimeout), this.connected = !1, this.quoteSession.unsubscribe("medium-widget-fundamentals", this._symbol, t)
        }, a.prototype.onData = function(t) {
            switch (t.status) {
                case "ok":
                    t.values ? this.fillValues(t.values) : TradingView.logWarn("[Medium Widget Fundamentals] Message doesn't contain required data");
                    break;
                case "permission_denied":
                    TradingView.logWarn("[Medium Widget Fundamentals] permision denied");
                    break;
                case "error":
                    TradingView.logWarn("[Medium Widget Fundamentals] error")
            }
        }, a.prototype.fillValues = function(t) {
            var e, i, n, o, r, a, l = {
                    price: new d(100, t.minmov || 1, !!t.fractional, t.minmove2),
                    volume: new u
                },
                c = function(t) {
                    var e = s.prototype.Tab.prototype._fundametalsData(),
                        i = e && e[t] && e[t].formatter;
                    return l[i]
                },
                h = RegExp("n/a", "i"),
                p = function(t) {
                    return t && !h.test(t) && !TradingView.isNaN(t)
                };
            for (a = this.fields.length - 1; a >= 0; a--) e = this.fields[a], i = parseFloat(t[e]), n = i, o = this._jqContainer.find("." + e), p(i) ? (r = c(e), n = r ? r.format(i) : i > 1e4 ? l.volume.format(i) : i, o.attr("title", i)) : n = "N/A", o.text(n)
        }, e.MediumWidgetRenderer = s, e.MediumWidgetFundamentals = a
    }).call(e, i(50), i(17), i(86), i(40))
}, function(t, e, i) {
    (function(e, n) {
        "use strict";

        function o(t, i, n) {
            this._chartApi = ChartApiInstance, this._options = $.extend(!0, {}, o.defaultOptions, n || {}), this._widget = new s([], i, this._options.chartOptions), this._container = i, this.onAllData = new e, this._initTimefrmeSelector(), this._initPlots(t), this.connect()
        }

        function r(t, i, r) {
            this.id = o.random(), this._miniChart = t, this._viewOptions = r, this._view = null, this.symbol = i, this.symbolInfo = null, this.seriesId = null, this.studyId = null, this.availableResolutions = [], this.minBarIndex = null, this.maxBarIndex = null, this._bars = new l(["time", "open", "high", "low", "close"]), this._turnaround_cnt = "1", this.error = new n(!1), this.complete = new n(!1), this.symbolResolved = new e
        }
        var s = i(381),
            a = i(121),
            l = i(124);
        o.prototype.studyOverlayMetaInfo = null, o.random = function() {
            return (1048576 * (1 + Math.random()) | 0).toString(16).substring(1)
        }, o.defaultOptions = {
            showMessage: !0,
            onFirstData: function() {},
            description: "",
            showDescription: !0,
            onlyLastBars: null,
            timeframe: {
                visible: !1,
                container: null,
                value: "5y"
            },
            chartOptions: {
                grid: {
                    xIsVisible: !1,
                    yIsVisible: !0
                },
                xScale: {
                    visible: !0,
                    position: "bottom",
                    isTimeScale: !0,
                    font: {
                        size: 10,
                        family: "Helvetica",
                        color: "#83888D"
                    },
                    drawOverPlotArea: !0,
                    maxTickMarkAmount: 10
                },
                yScale: {
                    visible: !0,
                    position: "right",
                    font: {
                        size: 10,
                        family: "Helvetica",
                        color: "#83888D"
                    },
                    drawOverPlotArea: !0
                }
            }
        }, o.prototype.setTimeframe = function(t, e) {
            var i, n, r = this;
            e = $.extend({
                updateData: !0,
                updateView: !0
            }, e), i = r._timeframe, n = t || r._options.timeframe.value, r._timeframe = r._timeframeIsValid(n) ? n : o.defaultOptions.timeframe.value, e.updateView && r._$timeframeSelector && r._$timeframeSelector.find("a").removeClass("active").filter(function() {
                return $(this).data("timeframe") === r._timeframe
            }).addClass("active"), e.updateData && i !== r._timeframe && (r.disconnect(), r.plots().forEach(function(t) {
                t.deleteView()
            }), r.connect())
        }, o.prototype._initTimefrmeSelector = function() {
            var t, e, i = this;
            i._options.timeframe.visible && (t = i._options.timeframe.container || $('<div class="mini-chart-timeframes"></div>').appendTo(i._container), e = "", Object.keys(i.timeframes).forEach(function(t) {
                i._timeframeIsValid(t) && (e += '<a href="#" data-timeframe="' + t + '" style="display: none;">' + $.t(t) + "</a>")
            }), t.html(e), t.find("a").click(function(t) {
                t.stopPropagation(), t.preventDefault(), i.setTimeframe($(this).data("timeframe"))
            }), i._$timeframeSelector = t)
        }, o.prototype.timeframes = function() {
            function t(t) {
                return parseInt(t.getTime() / 1e3)
            }
            return {
                "1d": {
                    resolution: "1,1",
                    _realResolution: "1",
                    from: function() {
                        var e = new Date;
                        return e.setDate(e.getDate() - 1), t(e)
                    }()
                },
                "1m": {
                    resolution: "D",
                    from: function() {
                        var e = new Date;
                        return e.setMonth(e.getMonth() - 1), t(e)
                    }()
                },
                "3m": {
                    resolution: "D",
                    from: function() {
                        var e = new Date;
                        return e.setMonth(e.getMonth() - 3), t(e)
                    }()
                },
                "1y": {
                    resolution: "D",
                    from: function() {
                        var e = new Date;
                        return e.setFullYear(e.getFullYear() - 1), t(e)
                    }()
                },
                "5y": {
                    resolution: "M",
                    from: function() {
                        var e = new Date;
                        return e.setFullYear(e.getFullYear() - 5), t(e)
                    }()
                },
                all: {
                    resolution: "M,ALL",
                    _realResolution: "M"
                }
            }
        }(), o.prototype._initPlots = function(t) {
            function e(t) {
                var e, i;
                if (t) {
                    for (e = n.plots(), i = e.length - 1; i >= 0; i--)
                        if (!e[i].error.value()) return;
                    TradingView.logError("[MiniChart] Errors in all plots"), n.showMessage("Error")
                }
            }

            function i(t) {
                var e, i;
                if (t) {
                    for (e = n.plots(), i = e.length - 1; i >= 0; i--)
                        if (!e[i].complete.value()) return;
                    n.disconnect()
                }
            }
            var n = this,
                o = [];
            $.isArray(t) ? o = t : t.hasOwnProperty("symbol") ? o = [t] : "string" == typeof t ? o = [{
                symbol: t
            }] : TradingView.logError("[MiniChart] Wrong 'plots' format"), o = $.map(o, function(t) {
                var o = new r(n, t.symbol, t.options || {});
                return o.error.subscribe(e), o.complete.subscribe(i), o
            }), n._plots = o
        }, o.prototype.connect = function(t) {
            var e = this;
            "function" == typeof t && (this._connectCallback = t), e.connected() || (e._allSymbolsResolved = !1, e.plots().forEach(function(t) {
                t.flush()
            }), e._chartSession || (e._chartSession = new a(e._chartApi, !0)), e._chartSession.connect(e.onMessage.bind(e)), e._chartSession.stopped = !1, e._loadErrorTimeout = setTimeout(function() {
                e.showMessage("No data received"), "function" == typeof e._options.onFirstData && (e._options.onFirstData(), e._options.onFirstData = null)
            }, 15e3))
        }, o.prototype.disconnect = function() {
            var t = this;
            t._chartSession && t._chartSession.connected() && !t._chartSession.stopped && (t._chartSession.stopSession(), t._chartSession.stopped = !0), t._connected = !1, clearTimeout(this._loadErrorTimeout)
        }, o.prototype.connected = function() {
            return this._connected && this._chartSession && this._chartSession.connected()
        }, o.prototype.onMessage = function(t) {
            var e, i, n = this;
            switch (n._loadErrorTimeout && (clearTimeout(n._loadErrorTimeout), delete n._loadErrorTimeout), t.method) {
                case "connected":
                    n._connected = !0, "function" == typeof n._connectCallback && n._connectCallback(), n._requestData();
                    break;
                case "studies_metadata":
                    if (!t.params[1] || !t.params[1].metainfo) return;
                    e = t.params[1].metainfo;
                    t: for (i = e.length - 1; i >= 0; i--)
                        if (-1 !== e[i].id.indexOf("Overlay@tv-basicstudies")) {
                            o.prototype.studyOverlayMetaInfo = e[i];
                            break t
                        }
                    "function" == typeof n._onStudiesMetadata && (n._onStudiesMetadata(), delete n._onStudiesMetadata);
                    break;
                case "critical_error":
                    n._connected = !1;
                    break;
                case "disconnected":
                    n.disconnect()
            }
        }, o.prototype.changeSymbol = function(t) {
            this.disconnect(), this.widget().removeAllPlots(), this._initPlots(t), this.connect()
        }, o.prototype.showMessage = function(t) {
            this._options.showMessage && this.widget().writeText(t)
        }, o.prototype._requestData = function() {
            var t, e, i, n = this;
            if (!n.studyOverlayMetaInfo && n.plots().length > 1) return void n._requestMetadata(n._requestData.bind(n));
            if (!n._allSymbolsResolved) return void n._resolveSymbols(function() {
                n._allSymbolsResolved = !0, n.updateAvailableTimeframes(!1), n._requestData()
            });
            for (t = n.plots()[0], t.createSeries(), this.seriesPlot = t, e = 1, i = n.plots().length; i > e; e++) n.plots()[e].createStudy(t.seriesId)
        }, o.prototype.updateAvailableTimeframes = function(t) {
            var e = this,
                i = [];
            e.plots().forEach(function(t) {
                return i = i.concat(t.availableResolutions || []), t.symbolInfo ? void(i = i.concat(t.symbolInfo.resolutions || [])) : void TradingView.logWarn("[MiniChart] updating available resolutions without full symbol info")
            }), e._availableResolutions = $.unique(i), e._$timeframeSelector && e._options.timeframe.visible && e._$timeframeSelector.find("a").show().each(function(t, i) {
                var n = $(i);
                n.toggle(e._timeframeIsValid(n.data("timeframe")))
            }), e.setTimeframe(e._timeframe, {
                updateData: !!t
            })
        }, o.prototype._requestMetadata = function(t) {
            "function" == typeof t && (this._onStudiesMetadata = t), this._chartSession.requestMetadata("metadata_" + o.random(), this.onMessage.bind(this))
        }, o.prototype._resolveSymbols = function(t) {
            function e() {
                for (var e = n.length - 1; e >= 0; e--)
                    if (!n[e].symbolInfo) return;
                "function" == typeof t && t()
            }
            var i = this,
                n = i.plots();
            n.forEach(function(t) {
                t.symbolResolved.subscribe(null, e, !0), t.resolveSymbol()
            })
        }, o.prototype.chartSession = function() {
            return this._chartSession
        }, o.prototype.plots = function(t) {
            return this._plots
        }, o.prototype.widget = function() {
            return this._widget
        }, o.prototype._timeframeIsValid = function(t) {
            var e = !!this.timeframes[t],
                i = this._availableResolutions && this._availableResolutions.length,
                n = e && i && -1 !== this._availableResolutions.indexOf(this.timeframes[t]._realResolution || this.timeframes[t].resolution);
            return e && (!i || n)
        }, o.prototype.timeframe = function() {
            return this._timeframe
        }, o.prototype.resolution = function() {
            return this.timeframes[this.timeframe()].resolution
        }, o.prototype.from = function() {
            return [this.timeframes[this.timeframe()].from]
        }, r.prototype._resolution = function() {
            return this._miniChart.resolution()
        }, r.prototype._barsNum = function() {
            return /,/.test(this._resolution()) ? 2 : ["from_to"].concat(this._miniChart.from())
        }, r.prototype._makeNextSymbolId = function() {
            return this._nextSymbolId || (this._nextSymbolId = 1), "symbol_" + this.id + "_" + this._nextSymbolId++
        }, r.prototype._makeNextSeriesId = function() {
            return this._nextSeriesId || (this._nextSeriesId = 1), "ser_" + this.id + "_" + this._nextSeriesId++
        }, r.prototype._turnaround = function() {
            return "turn" + this._turnaround_cnt
        }, r.prototype.chartSession = function() {
            return this._miniChart.chartSession()
        }, r.prototype.resolveSymbol = function() {
            this.symbolId = this._makeNextSymbolId(), this.chartSession().resolveSymbol(this.symbolId, this.symbol, this.onMessage.bind(this))
        }, r.prototype.onMessage = function(t) {
            var e, i;
            switch (t.method) {
                case "symbol_resolved":
                    t.params[0] === this.symbolId && (this.symbolInfo = t.params[1], this.symbolResolved.fire(this.symbolInfo));
                    break;
                case "data_update":
                    "function" == typeof this._miniChart._options.onFirstData && (this._miniChart._options.onFirstData(), this._miniChart._options.onFirstData = null), t.params.customId === (this.seriesId || this.studyId) && this.updateData(t.params.plots);
                    break;
                case "series_timeframe":
                    t.params[0] === this.seriesId && t.params[1] === this._turnaround() && this.updateBarIndexes(t.params[2], t.params[3]);
                    break;
                case "symbol_error":
                    t.params[0] === this.symbolId && TradingView.logWarn("[MiniChart] " + this.symbol + " symbol error: " + t.params[1]);
                case "critical_error":
                case "series_error":
                case "study_error":
                    t.params[0] === this._id && t.params[1] === this._turnaround() && (this.updateData(null), TradingView.logError("[MiniChart] " + this.symbol + " plot error"), this.error.setValue(!0)), e = t.params[2], "resolution_not_entitled" !== e && "custom_resolution" !== e || (this._miniChart.showMessage("No data for this resolution"), this.availableResolutions = ["D", "W", "M"], i = this, setTimeout(function() {
                        i._miniChart.updateAvailableTimeframes(!0)
                    }, 1e3));
                    break;
                case "study_completed":
                case "series_completed":
                    this.complete.setValue(!0);
                    break;
                case "timescale_update":
                    break;
                case "study_loading":
                case "series_loading":
            }
        }, r.prototype.createSeries = function() {
            var t = this;
            t.seriesId ? (t._turnaround_cnt++, t.chartSession().modifySeries(t.seriesId, t._turnaround(), t.symbolId, t._resolution(), t.onMessage.bind(t))) : (t.seriesId = t._makeNextSeriesId(), t.chartSession().createSeries(t.seriesId, t._turnaround(), t.symbolId, t._resolution(), t._barsNum(), t.onMessage.bind(t)))
        }, r.prototype.createStudy = function(t) {
            var e = this;
            return e.studyId = "st_" + this.id, e.symbolInfo ? (e.chartSession().createStudy(e.studyId, e._turnaround(), t, e._miniChart.studyOverlayMetaInfo.id, [e.symbolInfo.full_name], e.onMessage.bind(e)), void e._turnaround_cnt++) : void TradingView.logWarn("[MiniChart] Can't create study without symbolInfo")
        }, r.prototype.updateData = function(t) {
            var e, i, n, o, r, s, a = this._miniChart;
            return arguments.length && !t && this._bars.clear(), t && this._bars.merge(t), 0 === this._bars.size() ? void(t && 0 === t.length && a.showMessage("No data for this conditions")) : (e = a.seriesPlot, i = e && TradingView.isInteger(e.minBarIndex) ? e.minBarIndex : null, n = e && TradingView.isInteger(e.maxBarIndex) ? e.maxBarIndex : null, o = TradingView.isInteger(i) ? i : TradingView.isInteger(this.minBarIndex) ? this.minBarIndex : this._bars.firstIndex(), r = TradingView.isInteger(n) ? n : TradingView.isInteger(this.maxBarIndex) ? this.maxBarIndex : this._bars.lastIndex(), s = {
                x: [],
                y: []
            }, this._bars.range(o, r).each(function(t, e) {
                var i = e[window.TradingView.TIME_PLOT || 0],
                    n = e[window.TradingView.CLOSE_PLOT || 4];
                s.x.push(i), s.y.push(n)
            }), void(s.x.length && (this._view ? this._view.setData(s) : this._view = a.widget().addPlot({
                data: s,
                options: this._viewOptions || {}
            }))))
        }, r.prototype.deleteView = function() {
            this._view && (this._miniChart.widget().removePlot(this._view), this._view = null)
        }, r.prototype.flush = function() {
            this.symbolInfo = null, this.seriesId = null, this.studyId = null, this._bars.clear(), this.minBarIndex = null, this.maxBarIndex = null, this.complete.setValue(!1), this.error.setValue(!1)
        }, r.prototype.updateBarIndexes = function(t, e) {
            this.minBarIndex = t, this.maxBarIndex = e, this.updateData()
        }, t.exports = o
    }).call(e, i(50), i(17))
}, function(t, e, i) {
    (function(e, n, o, r, s) {
        "use strict";

        function a(t, i, n) {
            var o, r;
            this.$container = i, o = this._options = $.extend(!0, this.defaults(), n || {}), this._canvas = null, this._ctx = null, this._plots = $.map(t || [], function(t) {
                return new l(t.data, $.extend(!0, {}, o.plot, t.options))
            }), this._initCanvas(), r = function() {
                return this._plots
            }.bind(this), this._xScale = new u(r, this._ctx, this._options.xScale), this._yScale = new p(r, this._ctx, this._options.yScale), this._plotArea = new h(r, this._ctx, this._xScale, this._yScale, {
                grid: this._options.grid,
                plot: this._options.plot,
                loading: this._options.loading,
                overlayLines: this._options.overlayLines
            }), this.height = new e(0), this.width = new e(0), this._initSizeHandling(), this._onPlotsChanged(), n.noAutoResize !== !0 && this.bindOnResize()
        }

        function l(t, e) {
            this.id = TradingView.guid(), this._options = $.extend(!0, {}, e), this._x = null, this._y = null, t && this.setData(t, !0), this.dataChanged = new n
        }

        function c(t, i, n, o) {
            this.originX = new e(t || 0), this.originY = new e(i || 0), this.width = new e(n || 0), this.height = new e(o || 0)
        }

        function h(t, e, i, n, o) {
            c.call(this), this.getWidgetPlots = t, this._ctx = e, this._xScale = i, this._yScale = n, this._options = o, this.originY.setValue("bottom" === this._xScale._options.position ? 0 : this._xScale.height.value()), this.originY.setValue = function() {
                TradingView.logWarn("[MiniChartWidgetPlotArea] updating originY forbidden")
            }
        }

        function d(t, e, i) {
            c.call(this), this._ctx = e, this._options = i, this._min = null, this._max = null, this._tickMarks = [], this.getWidgetPlots = t
        }

        function u(t, e, i) {
            d.apply(this, arguments), this._series = [];
            var n = "number" == typeof this._options.height && this._options.height || this._options.paddingBottom + this._options.font.size + this._options.paddingTop;
            this.height.setValue(n), this.height.setValue = function() {
                TradingView.logWarn("[MiniChartWidgetXScale] updating height forbidden")
            }, this.width.subscribe(this._updateSize.bind(this)), this._GREED_MARGIN = 2
        }

        function p(t, e, i) {
            d.apply(this, arguments), this._min = null, this._max = null, this.height.subscribe(this._updateSize.bind(this)), this._GREED_MARGIN = 1
        }
        var f = i(91),
            _ = f.setCanvasSize,
            g = f.addCanvasTo;
        a.prototype.defaults = function() {
            return {
                minWidth: 100,
                minHeight: 75,
                bgColor: null,
                grid: {
                    xIsVisible: !0,
                    yIsVisible: !0,
                    line: {
                        width: 1,
                        style: CanvasEx.LINESTYLE_DASHED,
                        color: "#e9e9ea"
                    }
                },
                xScale: {
                    visible: !0,
                    position: "bottom",
                    isTimeScale: !0,
                    height: null,
                    paddingTop: 4,
                    paddingBottom: 4,
                    font: {
                        size: 10,
                        family: "Helvetica",
                        color: "#83888d"
                    },
                    drawOverPlotArea: !0,
                    ingnoreFloats: !1,
                    bgColor: "transparent",
                    borderColor: "transparent",
                    drawTickMarkLine: !1,
                    maxTickMarkAmount: 10
                },
                yScale: {
                    visible: !0,
                    position: "right",
                    isPercentage: !1,
                    paddingLeft: 4,
                    paddingRight: 4,
                    marginInPercents: 10,
                    font: {
                        size: 10,
                        family: "Helvetica",
                        color: "#83888d"
                    },
                    drawOverPlotArea: !0,
                    ingnoreFloats: !1,
                    bgColor: "transparent",
                    borderColor: "transparent",
                    drawTickMarkLine: !1,
                    maxTickMarkAmount: 10
                },
                plot: {
                    line: {
                        width: 2,
                        color: "#ff7965"
                    },
                    belowLineFillStyle: "rgba(180, 180, 180, 0.2)",
                    aboveLineFillStyle: null
                },
                loading: {
                    length: 0,
                    radius: 12,
                    width: 2,
                    lines: 14,
                    corners: 1,
                    color: "#00A2E2",
                    speed: 1.5
                }
            }
        }, a.prototype._initCanvas = function() {
            this._canvas = g(this.$container, {
                w: this._options.minWidth,
                h: this._options.minHeight
            }), $(this._canvas).css("display", "block"), this._ctx = this._canvas.getContext("2d"), this._ctx._fillText = function(t, e, i) {
                e = Math.round(e), i = Math.round(i), this._ctx.fillText(t, e, i)
            }.bind(this)
        }, a.prototype._initSizeHandling = function() {
            function t() {
                var t = a._options.drawOverPlotArea || !a._options.visible ? s.height.value() : s.height.value() - a.height.value();
                c.height.setValue(t)
            }

            function e() {
                var t = l._options.drawOverPlotArea || !l._options.visible ? s.width.value() : s.width.value() - l.width.value();
                c.width.setValue(t)
            }

            function i() {
                var t = 0;
                "left" === l._options.position && (t = l.width.value()), c.originX.setValue(t)
            }

            function n() {
                var t = 0;
                "right" === l._options.position && (t = l._options.drawOverPlotArea || !l._options.visible ? c.width.value() - l.width.value() : c.width.value()), l.originX.setValue(t)
            }

            function o() {
                var t = 0;
                "left" === l._options.position && (t = l.width.value()), a.originX.setValue(t)
            }

            function r() {
                var t = 0;
                "bottom" === a._options.position && (t = a._options.drawOverPlotArea || !a._options.visible ? c.height.value() - a.height.value() : c.height.value()), a.originY.setValue(t)
            }
            var s = this,
                a = this._xScale,
                l = this._yScale,
                c = this._plotArea;
            s.height.subscribe(t), a.height.subscribe(t), c.height.subscribe(function(t) {
                l.height.setValue(t), r()
            }), s.width.subscribe(e), l.width.subscribe(e), l.width.subscribe(i), l.width.subscribe(n), l.width.subscribe(o), c.width.subscribe(function(t) {
                a.width.setValue(t), n()
            })
        }, a.prototype.resetSize = function() {
            var t = this.$container.height() || this._options.minHeight,
                e = this.$container.width() || this._options.minWidth;
            this._xScale.originX.setValue("left" === this._yScale._options.position ? this._yScale.width.value() : 0), this._yScale.originY.setValue("top" === this._xScale._options.position ? this._xScale.height.value() : 0), _(this._canvas, {
                h: t,
                w: e
            }), this.height.setValue(t), this.width.setValue(e)
        }, a.prototype.onResize = function() {
            this.resetSize(), this.draw()
        }, a.prototype.bindOnResize = function() {
            this._onResize || (this._onResize = this.onResize.bind(this)), this.$container.resize(this._onResize)
        }, a.prototype.unbindOnResize = function() {
            this._onResize && (this.$container.off("resize", this._onResize), delete this._onResize)
        }, a.prototype.addPlot = function(t) {
            var e, i = t,
                n = this;
            if (!(i instanceof l)) {
                if (!i.data) return void TradingView.logError("[MiniChartWidget] wrong plot format");
                i = new l(i.data, $.extend(!0, {}, this._options.plot, i.options))
            }
            return (e = !!$.grep(n._plots, function(t) {
                return t.id === i.id
            }).length) ? void 0 : (n._plots.push(i), i.dataChanged.subscribe(n, n._onPlotsChanged), n._onPlotsChanged(), i)
        }, a.prototype._onPlotsChanged = function() {
            this.resetSize(), this._yScale.onPlotsChanged(), this._xScale.onPlotsChanged(), this.draw()
        }, a.prototype.removePlot = function(t) {
            this._plots = $.grep(this._plots, function(e) {
                return e.id !== t.id
            }), this._yScale.onPlotsChanged.call(this._yScale), this._xScale.onPlotsChanged.call(this._xScale), this.draw()
        }, a.prototype.removeAllPlots = function() {
            this._plots = [], this._yScale.onPlotsChanged.call(this._yScale), this._xScale.onPlotsChanged.call(this._xScale), this.draw()
        }, a.prototype.draw = function() {
            this._plotArea.draw(), this._yScale.draw(), this._xScale.draw()
        }, a.prototype.showMessage = function(t) {
            this._options.showMessage && this._writeMessage(t)
        }, a.prototype.writeText = function(t) {
            this._options.bgColor && "transparent" !== this._options.bgColor ? (this._ctx.fillStyle = this._options.bgColor, this._ctx.fillRect(0, 0, this.width.value(), this.height.value())) : this._ctx.clearRect(0, 0, this.width.value(), this.height.value());
            var e = this._ctx.measureText(t).width;
            this._ctx.fillStyle = this._options.xScale.font.color, this._ctx.font = this._options.xScale.font.size + "px " + this._options.xScale.font.family, this._ctx._fillText(t, (this.width.value() - e) / 2, (this.height.value() - this._options.xScale.font.size) / 2)
        }, a.prototype.xScale = function() {
            return this._xScale
        }, a.prototype.yScale = function() {
            return this._yScale
        }, l.prototype.setData = function(t, e) {
            t.x && t.y || TradingView.logError("[MiniChartWidgetPlot] wrong data format"), this._x = t.x, this._y = t.y, e || this.dataChanged.fire()
        }, l.prototype.x = function() {
            return this._x
        }, l.prototype.y = function(t) {
            var e, i, n, o, r, s = this._y;
            if (!t) return s;
            for (e = function() {
                for (var t = 0, e = s.length; e > t; t++)
                    if (isNumber(s[t])) return s[t]
            }(), i = e / 100, n = [], r = 0; r < s.length; r++) o = s[r], n.push(isNumber(o) ? o / i - 100 : void 0);
            return n
        }, c.prototype.left = function() {
            return this.originX.value()
        }, c.prototype.right = function() {
            return this.originX.value() + this.width.value()
        }, c.prototype.top = function() {
            return this.originY.value()
        }, c.prototype.bottom = function() {
            return this.originY.value() + this.height.value()
        }, c.prototype.clearBack = function() {
            var t = this._ctx,
                e = this.left() - .5,
                i = this.top() - .5,
                n = this.right() + .5,
                o = this.bottom() + .5;
            this._options.bgColor && "transparent" !== this._options.bgColor ? (t.fillStyle = this._options.bgColor, t.fillRect(e, i, n, o)) : t.clearRect(e, i, n, o)
        }, inherit(h, c), h.prototype.draw = function() {
            this.clearBack(), this._drawGrid(), this.getWidgetPlots().length ? (this._drawPlots(), this._drawOverlayLines(), this._hideLoading()) : this._options.loading.showWhileNoPlots && this._showLoading()
        }, h.prototype._drawGrid = function(t) {
            var e, i, n, o, r, s, a, l = this._ctx,
                c = this.left(),
                h = this.right(),
                d = this.top(),
                u = this.bottom();
            if (l.lineWidth = this._options.grid.line.width, l.strokeStyle = this._options.grid.line.color, l.lineStyle = this._options.grid.line.style, r = this._xScale.tickMarks(), r.length && this._options.grid.xIsVisible)
                for (s = 0; s < r.length; s++) e = r[s].coordinate, i = d, n = r[s].coordinate, o = u, CanvasEx.drawLine(l, e, i, n, o);
            if (a = this._yScale.tickMarks(), a.length && this._options.grid.yIsVisible)
                for (s = 0; s < a.length; s++) e = c, i = a[s].coordinate, n = h, o = a[s].coordinate, CanvasEx.drawLine(l, e, i, n, o)
        }, h.prototype._drawOverlayLine = function(t) {
            function e(t, e) {
                var n = Math.round(t.valueToCoord(e));
                return i % 2 === 0 && (n -= .5), n
            }
            var i, n, o, r, s, a, l;
            "number" != typeof t.x && "number" != typeof t.y || (i = isNumber(t.width) && t.width || 1, n = t.color || "#000", o = t.style || CanvasEx.LINESTYLE_SOLID, isNumber(t.x) ? r = s = e(this._xScale, t.x) : (r = this.left(), s = this.right()), isNumber(t.y) && !isNumber(t.x) ? a = l = e(this._yScale, t.y) : (a = this.top(), l = this.bottom()), this._ctx.lineWidth = i, this._ctx.strokeStyle = n, this._ctx.lineStyle = o, CanvasEx.drawLine(this._ctx, r, a, s, l))
        }, h.prototype._drawOverlayLines = function() {
            Array.isArray(this._options.overlayLines) && this._options.overlayLines.length && this._options.overlayLines.forEach(this._drawOverlayLine, this)
        }, h.prototype._drawPlots = function() {
            function t(t) {
                return l(t)
            }

            function e(t) {
                return c(t)
            }
            var i, n, o, r, s = this.getWidgetPlots(),
                a = this._ctx,
                l = this._xScale.valueToCoord.bind(this._xScale),
                c = this._yScale.valueToCoord.bind(this._yScale),
                h = this.top(),
                d = this.bottom();
            for (r = 0; r < s.length; r++) i = s[r], n = $.map(i.x(), t), o = $.map(i.y(this._yScale._options.isPercentage), e), 1 !== n.length ? (i._options.belowLineFillStyle && "transparent" !== i._options.belowLineFillStyle && this._drawNearAroundArea(a, n, o, d, i._options.belowLineFillStyle), i._options.aboveLineFillStyle && "transparent" !== i._options.aboveLineFillStyle && this._drawNearAroundArea(a, n, o, h, i._options.aboveLineFillStyle), this._drawLine(a, n, o, i._options.line.width, i._options.line.color)) : this._drawCircle(a, n[0], o[0], i._options.line.width, i._options.line.color)
        }, h.prototype._drawNearAroundArea = function(t, e, i, n, o) {
            var r, s = function() {
                    for (var t = 0, n = e.length; n > t; t++)
                        if (isNumber(e[t]) && isNumber(i[t])) return t;
                    return null
                }(),
                a = function() {
                    for (var t = e.length - 1; t >= 0; t--)
                        if (isNumber(e[t]) && isNumber(i[t])) return t;
                    return null
                }();
            if (null !== s || null !== a) {
                for (t.fillStyle = o, t.beginPath(), t.moveTo(e[s], n), r = s; a >= r; r++) isNumber(e[r]) && isNumber(i[r]) && t.lineTo(e[r], i[r]);
                t.lineTo(e[a], n), t.closePath(), t.fill()
            }
        }, h.prototype._drawLine = function(t, e, i, n, o) {
            var r, s = function() {
                    for (var t = 0, n = e.length; n > t; t++)
                        if (isNumber(e[t]) && isNumber(i[t])) return t;
                    return null
                }(),
                a = function() {
                    for (var t = e.length - 1; t >= 0; t--)
                        if (isNumber(e[t]) && isNumber(i[t])) return t;
                    return null
                }();
            if (null !== s || null !== a) {
                for (t.lineWidth = n, t.strokeStyle = o, t.moveTo(e[s], i[s]), t.beginPath(), r = s; a >= r; r++) isNumber(e[r]) && isNumber(i[r]) && t.lineTo(e[r], i[r]);
                t.stroke()
            }
        }, h.prototype._drawCircle = function(t, e, i, n, o) {
            isNumber(e) && isNumber(i) && (t.beginPath(), t.arc(e, i, n, 0, 2 * Math.PI, !1), t.fillStyle = o, t.fill())
        }, h.prototype._showLoading = function() {
            this._$loadingIndicator || (this._$loadingIndicator = $("<div></div>"), new o({
                lines: this._options.loading.lines,
                length: this._options.loading.length,
                width: this._options.loading.width,
                radius: this._options.loading.radius,
                corners: this._options.loading.corners,
                rotate: 0,
                direction: 1,
                color: this._options.loading.color || this._options.grid.line.color,
                speed: this._options.loading.speed,
                trail: 100,
                shadow: !1,
                hwaccel: !1,
                className: "spinner",
                zIndex: 1,
                top: "50%",
                left: "50%"
            }).spin(this._$loadingIndicator.get(0)), this._$loadingIndicator.insertAfter(this._ctx.canvas)), this._$loadingIndicator.show()
        }, h.prototype._hideLoading = function() {
            this._$loadingIndicator && this._$loadingIndicator.hide()
        }, inherit(d, c), d.prototype._calculateTickMarks = function(t, e, i) {
            function n(t) {
                return Math.round(1e6 * t) / 1e6 + (w._options.isPercentage ? "%" : "")
            }

            function o(t) {
                var o = n(t),
                    r = w.valueToCoord(t);
                return "vertical" !== i || h ? "vertical" === i && h ? r + .5 * e(o) : "horizontal" !== i || h ? "horizontal" === i && h ? r - .5 * e(o) : void 0 : r : r
            }

            function r(t) {
                var o = n(t),
                    r = w.valueToCoord(t);
                return "vertical" !== i || h ? "vertical" === i && h ? r - .5 * e(o) : "horizontal" !== i || h ? "horizontal" === i && h ? r + .5 * e(o) : void 0 : r + w._GREED_MARGIN + e(o) : r - w._GREED_MARGIN - e(o)
            }

            function s(t, e) {
                return "vertical" === i ? r(t) - c > o(e) : r(t) + c < o(e)
            }

            function a(t, e) {
                var i = Math.pow(10, e || 0).toFixed(0 > e ? -e : 0);
                return Math.round(t * i) / i
            }
            var l, c, h, d, u, p, f, _, g, m, v, y, w = this,
                b = w._min,
                S = w._max;
            if (!t || null === b || null === S || "function" != typeof e) return [];
            if (i = i || "vertical", l = w._options.maxTickMarkAmount || 10, c = t / (l || 20), h = !w._options.drawOverPlotArea, d = [], b === S) d = [b];
            else
                for (; l > 0;) {
                    for (u = (S - b) / l, p = Math.pow(10, Math.ceil(Math.log(u) / Math.LN10)), p / 5 >= u && (p /= 5), p / 2 >= u && (p /= 2), f = Math.floor(b / p) * p, b > f && (f = Math.ceil(b / p) * p), d = [f];
                         (_ = a(d[d.length - 1] + p, 12)) <= S;) d.push(_);
                    for (g = !1, m = f, y = 1; y < d.length; y++) {
                        if (v = d[y], !s(m, v)) {
                            g = !0;
                            break
                        }
                        m = v
                    }
                    if (!g) break;
                    l--
                }
            return w._options.ingnoreFloats === !0 && (d = d.filter(function(t) {
                return a(t, 12) % 1 === 0
            })), $.map(d, function(t) {
                return {
                    text: n(t),
                    coordinate: Math.round(w.valueToCoord(t))
                }
            })
        }, d.prototype.tickMarks = function() {
            return this._tickMarks
        }, d.prototype.draw = function() {
            var t, e, i, n, o;
            if (this._options.visible) {
                if (t = this._tickMarks, e = this._ctx, this._options.drawOverPlotArea || this.clearBack(), i = !this._options.drawOverPlotArea && this._options.borderColor && "transparent" !== this._options.borderColor) {
                    switch (e.strokeStyle = this._options.borderColor, e.lineWidth = 1, e.beginPath(), this._options.position) {
                        case "left":
                            e.moveTo(this.right(), this.top()), e.lineTo(this.right(), this.bottom());
                            break;
                        case "right":
                            e.moveTo(this.left(), this.top()), e.lineTo(this.left(), this.bottom());
                            break;
                        case "top":
                            e.moveTo(this.left(), this.bottom()), e.lineTo(this.right(), this.bottom());
                            break;
                        case "bottom":
                            e.moveTo(this.left(), this.top()), e.lineTo(this.right(), this.top())
                    }
                    e.stroke()
                }
                for (e.fillStyle = this._options.font.color, e.font = this._options.font.size + "px " + this._options.font.family, o = 0; o < t.length; o++) n = t[o], this._drawLabel(n.coordinate, n.text)
            }
        }, inherit(u, d), u.prototype.valueToCoord = function(t) {
            var e = this._min === this._max;
            return e ? (this.right() - this.left()) / 2 : this.left() + this._pixelsPerValue * (t - this._min)
        }, u.prototype.onPlotsChanged = function() {
            this._updateSeries(), this._updateMinMax(), this._updateSize()
        }, u.prototype._updateSize = function() {
            this._updatePixelsPerValue(), this._updateTickMarks()
        }, u.prototype._updateSeries = function() {
            this._series = this.getWidgetPlots().length ? this.getWidgetPlots()[0].x() : []
        }, u.prototype._updateMinMax = function() {
            this._min = this._series.length ? this._series[0] : null, this._max = this._series.length ? this._series[this._series.length - 1] : null
        }, u.prototype._updatePixelsPerValue = function() {
            this._pixelsPerValue = this.width.value() / (this._max - this._min)
        }, u.prototype._updateTickMarks = function() {
            var t = this.width.value(),
                e = function(t) {
                    return this._ctx.measureText(t).width
                }.bind(this);
            this._options.isTimeScale ? this._tickMarks = this._calculateTimeTickMarks(t, e) : this._tickMarks = this._calculateTickMarks(t, e, "horizontal")
        }, u.prototype._calculateTimeTickMarks = function(t, e) {
            var i, n, o, r, s, a, l, c, h, d, u, p, f;
            if (!t || null === this._min || null === this._max || "function" != typeof e) return [];
            for (i = this._max - this._min, n = i / 86400, o = [], r = [], s = this._ctx, s.font = this._options.fontSize + "px " + this._options.fontFamily, s.fillStyle = this._options.fontColor, s.textBaseline = "bottom", 2 > n ? o = this._timeSplit(t, e, this._trimToHour, this._formatHour) : 3 > n ? o = this._timeSplit(t, e, this._trimToHour, this._formatDayHour) : 6 > n ? o = this._timeSplit(t, e, this._trimToDay, this._formatDay) : (a = i / 604800, 6 > a ? o = this._timeSplit(t, e, this._trimToWeek, this._formatDay) : (l = i / 2592e3, 15 > l ? (c = new Date(1e3 * this._max).getFullYear() === (new Date).getFullYear(), h = c ? this._formatMonthOnly : this._formatMonthYear, o = this._timeSplit(t, e, this._trimToMonth, h)) : (d = i / 31104e3, o = 6 > d ? this._timeSplit(t, e, this._trimToYear, this._formatYear) : 30 > d ? this._timeSplit(t, e, this._trimTo5Years, this._formatYear) : 50 > d ? this._timeSplit(t, e, this._trimTo10Years, this._formatYear) : this._timeSplit(t, e, this._trimTo25Years, this._formatYear)))), u = 0, p = o.length; p > u; u++) f = this.valueToCoord(this._series[o[u].index]), r.push({
                text: "" + o[u].text,
                coordinate: f
            });
            return r
        }, u.prototype._timeSplit = function(t, e, i, n) {
            function o(i, n) {
                var o;
                return m ? (o = e(n), v ? i > o / 2 && t - o / 2 > i : i > 0 && t - o - y > i) : i > 0 && t > i
            }
            var r, s, a, l, c, h, d, u, p, f = [],
                _ = null,
                g = t / 20,
                m = this._options.visible,
                v = !this._options.drawOverPlotArea,
                y = this._GREED_MARGIN;
            for (r = 0, s = this._series.length; s > r; r++) a = new Date(1e3 * this._series[r]), l = i.call(this, a), c = n.call(this, l), null !== _ ? (h = this.valueToCoord(this._series[r]), d = o(h, c), f.length && d && (u = this.valueToCoord(this._series[f[f.length - 1].index]), p = e(f[f.length - 1].text), d = h >= u + p + g), d && _.valueOf() !== l.valueOf() && (f.push({
                index: r,
                text: c
            }), _ = l)) : _ = l;
            return f
        }, u.prototype._trimToHour = function(t) {
            return new Date(t.getFullYear(), t.getMonth(), t.getDate(), t.getHours())
        }, u.prototype._trimToDay = function(t) {
            return new Date(t.getFullYear(), t.getMonth(), t.getDate())
        }, u.prototype._trimToMonth = function(t) {
            return new Date(t.getFullYear(), t.getMonth(), 1)
        }, u.prototype._trimToYear = function(t) {
            return new Date(t.getFullYear(), 1, 1)
        }, u.prototype._trimToWeek = function(t) {
            var e = this._trimToDay(t);
            return new Date(e.valueOf() - 1e3 * e.getDay() * 3600 * 24)
        }, u.prototype._trimTo5Years = function(t) {
            var e = t.getFullYear();
            return e -= e % 5, new Date(e, 1, 1)
        }, u.prototype._trimTo10Years = function(t) {
            var e = t.getFullYear();
            return e -= e % 10, new Date(e, 1, 1)
        }, u.prototype._trimTo25Years = function(t) {
            var e = t.getFullYear();
            return e -= e % 25, new Date(e, 1, 1)
        }, u.prototype._formatHour = function(t) {
            var e = "" + t.getHours();
            return 1 === e.length && (e = "0" + e), e + ":00"
        }, u.prototype._formatDayHour = function(t) {
            return this._formatDay(t) + " " + this._formatHour(t)
        }, u.prototype._formatDay = function(t) {
            return r().month(t.getMonth()).format("MMM") + "," + t.getDate()
        }, u.prototype._formatMonthOnly = function(t) {
            return r().month(t.getMonth()).format("MMM")
        }, u.prototype._formatMonthYear = function(t) {
            return r().month(t.getMonth()).format("MMM") + ", " + t.getFullYear()
        }, u.prototype._formatYear = function(t) {
            return t.getFullYear()
        }, u.prototype._drawLabel = function(t, e) {
            var i, n, o = this._ctx,
                r = o.measureText(e).width,
                s = !this._options.drawOverPlotArea,
                a = s ? t - r / 2 : t + this._GREED_MARGIN;
            a = Math.min(this.right(), a), a = Math.max(this.left(), a), i = "bottom" === this._options.position ? this.bottom() - this._options.paddingBottom : this.top() + this._options.paddingTop + this._options.font.size, o.textBaseline = "bottom", o._fillText(e, a, i), this._options.drawTickMarkLine && this._options.borderColor && "transparent" !== this._options.borderColor && (n = 2, o.strokeStyle = this._options.borderColor, o.beginPath(), "bottom" === this._options.position ? (o.moveTo(t, this.top()), o.lineTo(t, this.top() + n)) : (o.moveTo(t, this.bottom()), o.lineTo(t, this.bottom() - n)), o.stroke())
        }, inherit(p, d), p.prototype.onPlotsChanged = function() {
            this._updateMinMax(), this._updateSize()
        }, p.prototype._updateMinMax = function() {
            var t, e, i, n, o, r, a, l = this.getWidgetPlots(),
                c = null;
            if ("number" == typeof this._options.forceMin && isFinite(this._options.forceMin) && (c = this._options.forceMin, t = !0), e = null, "number" == typeof this._options.forceMax && isFinite(this._options.forceMax) && (e = this._options.forceMax, i = !0), !t || !i)
                for (a = 0; a < l.length; a++) r = $.grep(l[a].y(this._options.isPercentage), isNumber),
                t || (n = s.min(r), (null === c || c > n) && (c = n)), i || (o = s.max(r), (null === e || o > e) && (e = o));
            this._min = c, this._max = e
        }, p.prototype._updatePixelsPerValue = function() {
            this._pixelsPerValue = (this.height.value() - 2 * this._margin()) / (this._max - this._min)
        }, p.prototype._updateTickMarks = function() {
            var t = this.height.value(),
                e = function() {
                    return this._options.font.size
                }.bind(this);
            this._tickMarks = this._calculateTickMarks(t, e, "vertical")
        }, p.prototype._updateSize = function() {
            this._updatePixelsPerValue(), this._updateTickMarks();
            var t = "number" == typeof this._options.width && this._options.width || this._options.paddingLeft + this._maxLabelWidth() + this._options.paddingRight;
            this.width.setValue(t)
        }, p.prototype._maxLabelWidth = function() {
            var t, e = 0;
            for (t = 0; t < this._tickMarks.length; t++) e = Math.max(e, this._ctx.measureText(this._tickMarks[t].text).width);
            return e
        }, p.prototype._margin = function() {
            return this.height.value() * this._options.marginInPercents / 100
        }, p.prototype.valueToCoord = function(t) {
            return this._min === this._max ? (this.bottom() - this.top()) / 2 : this.height.value() - this._margin() - this._pixelsPerValue * (t - this._min)
        }, p.prototype._drawLabel = function(t, e) {
            var i, n, o, r = this._ctx,
                s = !this._options.drawOverPlotArea,
                a = s ? t + this._options.font.size / 2 : t - this._GREED_MARGIN;
            a = Math.max(this.top() + this._options.font.size, a), a = Math.min(this.bottom(), a), i = "number" == typeof this._options.width && this._options.width || this._options.paddingLeft + this._maxLabelWidth() + this._options.paddingRight, n = "left" === this._options.position ? this.left() + i - this._ctx.measureText(e).width - this._options.paddingRight : this.right() - i + this._options.paddingLeft, r.textBaseline = "bottom", r._fillText(e, n, a), this._options.drawTickMarkLine && (o = 2, this._options.borderColor && "transparent" !== this._options.borderColor && (r.strokeStyle = this._options.borderColor), r.beginPath(), "left" === this._options.position ? (r.moveTo(this.right(), t), r.lineTo(this.right() - o, t)) : (r.moveTo(this.left(), t), r.lineTo(this.left() + o, t)), r.stroke())
        }, t.exports = a
    }).call(e, i(17), i(50), i(330), i(23), i(40))
}, function(t, e, i) {
    (function(t, n) {
        "use strict";

        function o(t) {
            this._options = this._prepareOptions(t), this._options.container && this._options.container instanceof $ ? this._$container = this._options.container : this._$container = $('<div style="width:100%; height:100%;"></div>').appendTo(document.body), this._tabs = this._options.tabs, this._symbols = this._options.symbols, this._current_symbol = null, this._graphs = {}, this._init()
        }

        function r(t) {
            if ($.isArray(t)) this._symbol_description = t[0], this._symbol_name = t[1].split("|")[0], this._symbol_timeframe = t[1].split("|")[1];
            else {
                if ("string" != typeof t) return void TradingView.logError("Symbol should be array ['description', 'symbol_name'] or string 'symbol_name'");
                this._symbol_name = t.split("|")[0], this._symbol_timeframe = t.split("|")[1]
            }
            this._symbol = t
        }
        var s = i(381),
            a = i(380),
            l = i(320);
        o.prototype._prepareOptions = function(t) {
            var e, i, n, o, r, s, a, l = this;
            return t.miniChartOptions && t.miniChartOptions.chartOptions && t.miniChartOptions.chartOptions.plot && t.miniChartOptions.chartOptions.plot.belowLineFillStyle && RegExp("^#[0-9a-f]{6}", "i").test(t.miniChartOptions.chartOptions.plot.belowLineFillStyle) && (e = /^#(\w{2})(\w{2})(\w{2})$/.exec(t.miniChartOptions.chartOptions.plot.belowLineFillStyle), t.miniChartOptions.chartOptions.plot.belowLineFillStyle = "rgba(" + [parseInt(e[1], 16), parseInt(e[2], 16), parseInt(e[3], 16), "0.3"].join(",") + ")"), i = $.extend(!0, {}, l.defaultOptions, t), i.minWidth = 0, n = Modernizr.canvas && Modernizr.canvastext, o = "https://www.tradingview.com/chart/" === t.large_chart_url, r = !t.large_chart_url, n ? o || r ? i.large_chart_url = l.defaultOptions.large_chart_url + "?symbol=" : i.large_chart_url = t.large_chart_url + "?tvwidgetsymbol=" : i.large_chart_url = "", i.tabs = l.defaultOptions.tabs, i.symbols = l.defaultOptions.symbols, $.isArray(t.symbols) ? (i.tabs = null, i.symbols = t.symbols) : t.tabs && t.tabs.length > 0 && (s = [], a = {}, t.tabs.forEach(function(e) {
                t.symbols.hasOwnProperty(e) && (s.push(e), a[e] = t.symbols[e])
            }), s.length > 0 && (i.tabs = s, i.symbols = a)), t.locale && (i.locale = t.locale), i
        }, o.prototype.width = function() {
            return this._$container.width()
        }, o.prototype.height = function() {
            return this._$container.height()
        }, o.prototype.defaultOptions = {
            chartBottomMargin: 21,
            symbols: {
                Indices: ["ES1!", "NQ1!", "YM1!", "EW1!", "SP1!", "ND1!", "DJ1!", "VI1!"],
                Metals: ["GC1!", "SI1!", "HG1!", "PL1!", "PA1!", "YG1!", "YI1!"],
                Currencies: ["B61!", "D61!", "J61!", "S61!", "E61!", "A61!", "M61!", "N61!"]
            },
            tabs: ["Indices", "Metals", "Currencies"],
            large_chart_url: "https://www.tradingview.com/chart/",
            large_chart_target: "_blank",
            noGraph: !1,
            miniChartOptions: {
                timeframe: {
                    value: "1y",
                    visible: !0
                },
                showDescription: !1,
                chartOptions: {
                    minHeight: 200,
                    grid: {
                        xIsVisible: !1,
                        yIsVisible: !0,
                        line: {
                            width: 1,
                            style: CanvasEx.LINESTYLE_DASHED,
                            color: "#e9e9ea"
                        }
                    },
                    yScale: {
                        maxTickMarkAmount: 5
                    },
                    xScale: {
                        visible: !0
                    },
                    plot: {
                        line: {
                            width: 2,
                            color: "#4bafe9"
                        },
                        belowLineFillStyle: "rgba(219,239,251,0.5)"
                    }
                }
            },
            styleTickerActiveBg: null,
            styleTabsNoBorder: !1,
            styleWidgetNoBorder: !1,
            styleTabsActiveBorderColor: null,
            styleTickerHeadFontSize: null,
            styleTickerHeadFontWeight: null,
            styleTickerBodyFontSize: null,
            styleTickerBodyFontWeight: null,
            styleTickerChangeDownColor: null,
            styleTickerChangeUpColor: null,
            styleTickerLastDownBg: null,
            styleTickerLastUpBg: null,
            styleTickerSymbolColor: null,
            styleTickerSymbolHoverTextDecoration: null,
            styleTickerActiveSymbolTextDecoration: null
        }, o.prototype._init = function() {
            var t = this;
            t.buildFrame(), t.fixFrameSize(), t.selectFirstSymbol(), t._$container.resize(), $(window).on("resize", t.onResize.bind(t))
        }, o.prototype.buildFrame = function() {
            var t = this,
                e = t._options.noGraph;
            t._$container.addClass("mini-widget").addClass(t._options.styleWidgetNoBorder ? "mini-widget--no-border" : ""), t._$tabs = $('<div class="tabs">'), t._$tabs.appendTo(t._$container), t._$tabs.addClass(t._options.styleTabsNoBorder ? "tabs--no-border" : ""), t._$graphs = e ? $() : $('<div class="graph">').appendTo(t._$container), t._$divider = e ? $() : $('<div class="divider"></div>').appendTo(t._$container), t._$pages = $('<div class="pages">').appendTo(t._$container), t._options.whitelabel ? t._$footer = $("<div>") : t._$footer = $('<div class="footer"><span class="fade">Quotes by </span><a href="https://www.tradingview.com/chart/' + (t._options.utmQuery ? "?" + t._options.utmQuery : "") + '" target="_blank">TradingView</a></div>'), t._$footer.appendTo(t._$container), t._tabs ? $.each(t._tabs, function(i, n) {
                var o = t.createPage(t._symbols[n]).appendTo(t._$pages),
                    r = $('<div class="tab">').appendTo(t._$tabs),
                    s = $("<a></a>").text(n);
                s.attr("stretcher", n), r.append(s).mousedown(function(i) {
                    i.preventDefault(), t._setTabInactiveView(t._$tabs.children()), t._$pages.children().hide(), t._setTabActiveView(r), o.show(), e || t.selectFirstSymbol(o)
                }), t._options.minWidth += r.outerWidth(!0)
            }) : (t._$tabs.addClass("tabs--no-border"), t.createPage(t._symbols).appendTo(t._$pages)), t._options.minWidth && t._$container.css("min-width", t._options.minWidth)
        }, o.prototype.createPage = function(t) {
            var e = $('<div class="page">'),
                i = $('<table class="table"></table>').appendTo(e),
                n = $("<thead><tr><td>" + $.t("Symbol") + '</td><td class="symbol-last">' + $.t("Last") + "</td><td>" + $.t("Change") + "</td><td>(%)</td><tr></thead>").appendTo(i),
                o = $("<tbody>").appendTo(i),
                r = this._options.styleTickerHeadFontSize,
                s = this._options.styleTickerHeadFontWeight,
                a = this._options.styleTickerBodyFontSize,
                l = this._options.styleTickerBodyFontWeight;
            return r && n.css("font-size", r), s && n.css("font-weight", s), a && o.css("font-size", a), l && o.css("font-weight", l), this.createTickers(t, o), e
        }, o.prototype.createTickers = function(e, i) {
            function n() {
                $(this).css("text-decoration", _)
            }

            function o() {
                var t = $(this),
                    e = p._isTickerActive(t.closest(".ticker")),
                    i = e ? g || "" : "";
                t.css("text-decoration", i)
            }

            function s() {
                p.showGraph($(this).data("symbol")), p._setTickerInactiveView($(".ticker")), p._setTickerActiveView($(this))
            }
            var a, c, h, d, u, p = this,
                f = p._options.styleTickerSymbolColor,
                _ = p._options.styleTickerSymbolHoverTextDecoration,
                g = p._options.styleTickerActiveSymbolTextDecoration,
                m = '<tr class="ticker"><td class="symbol-short-name-container" title="{{name}}"><a{{#largeChartUrl}} href="{{largeChartUrl}}"  target="{{largeChartTarget}}"{{/largeChartUrl}}{{^description}} class="symbol-short-name"{{/description}} {{#symbolColor}} style="color: {{symbolColor}}"{{/symbolColor}}>{{ description_or_name }}</a></td><td class="symbol-last">&nbsp;</td><td class="symbol-change">&nbsp;</td><td class="symbol-change-pt">&nbsp;</td></tr>';
            for (a = 0, c = e.length; c > a; a++) h = new r(e[a]), d = {
                largeChartUrl: p._options.large_chart_url ? p._options.large_chart_url + encodeURIComponent(h.name()) : "",
                largeChartTarget: p._options.large_chart_target,
                name: h.name(),
                description_or_name: h.description() || h.name(),
                description: h.description() || "",
                symbolColor: f
            }, u = $(t.render(m, d)), u.appendTo(i), u.data("symbol", h), p._options.noGraph || (u.mousedown(s), c > 1 && u.find("td").css("cursor", "pointer")), _ && u.find(".symbol-short-name-container a").hover(n, o), new l(h.name(), u, {
                changePercentInBrackets: !0,
                signPositive: !0,
                changeDownFontColor: this._options.styleTickerChangeDownColor,
                changeUpFontColor: this._options.styleTickerChangeUpColor,
                fallingBg: this._options.styleTickerLastDownBg,
                growingBg: this._options.styleTickerLastUpBg
            })
        }, o.prototype.showGraph = function(t) {
            var e, i, n, o, r, s;
            if (!(!t || this._current_symbol && t.equalTo(this._current_symbol) || this._options.noGraph)) {
                e = this, e._current_symbol = t;
                for (i in e._graphs) e._graphs[i].model.connected() && e._graphs[i].model.disconnect();
                n = t.name(), e._graphs[n] ? (e._$graphs.children().hide(), e._graphs[n].el.show(), e._graphs[n].model.connect()) : (o = $("<div></div>"), r = $.extend(!0, {}, e._options.miniChartOptions || {}, {
                    onFirstData: function() {
                        Modernizr.canvas && Modernizr.canvastext && e._$graphs.children().css("opacity", "1"), e._$graphs.children().hide(), o.show()
                    },
                    description: t.description(),
                    timeframe: {
                        value: t.timeframe()
                    }
                }), Modernizr.canvas && Modernizr.canvastext ? e._$graphs.children().css("opacity", "0.6") : e._$graphs.children().hide(), o.appendTo(e._$graphs), e._graphs[n] = {
                    el: o,
                    model: new a(t.name(), o, r)
                }, s = 1 === e._$graphs.children().length, s || o.hide())
            }
        }, o.prototype.fixFrameSize = function(t) {
            var e, i = this,
                o = i.height.bind(i),
                r = s.prototype.defaults().minHeight,
                a = n.max($.map(i._$pages.find("table"), function(t) {
                    return $(t).outerHeight(!0)
                })),
                l = i._$tabs.outerHeight(),
                c = i._$divider.outerHeight(),
                h = i._$footer.outerHeight(),
                d = a,
                u = r,
                p = function() {
                    return l + u + c + d + h
                };
            i._options.noGraph ? (e = o() - l - c - h, i._$pages.height(e)) : (p() < o() && (u = Math.max(o() - l - c - d - h, r), i._$pages.height(d)), i._$graphs.height(u), p() !== o() && (d = o() - l - u - c - h, i._$pages.height(d)), p() !== o() && TradingView.logWarn("bad height"))
        }, o.prototype.onResize = function() {
            var t = this;
            t.fixFrameSize(), $.each(t._graphs, function(e, i) {
                i.el && (i.el.height(t._$graphs.height()), i.el.width(t._$container.width())), i.model && i.model.widget().onResize()
            })
        }, o.prototype.selectFirstSymbol = function(t) {
            var e, i, n, o, r, s, a;
            this._tabs && !t && (e = this._$pages.children(), i = e.eq(0), n = this._$tabs.children(), o = n.eq(0), this._setTabInactiveView(n), this._setTabActiveView(o), e.hide(), i.show()), this._options.noGraph || (r = t || this._$container, s = r.find(".ticker"), this._setTickerInactiveView(s), a = s.eq(0), this._setTickerActiveView(a), this.showGraph(a.data("symbol")))
        }, o.prototype._isTickerActive = function(t) {
            return t.hasClass("active")
        }, o.prototype._setTickerInactiveView = function(t) {
            var e = this._options.styleTickerActiveBg,
                i = this._options.styleTickerActiveSymbolTextDecoration;
            t.removeClass("active"), e && t.css("background-color", ""), i && t.find(".symbol-short-name-container a").css("text-decoration", "")
        }, o.prototype._setTickerActiveView = function(t) {
            var e = this._options.styleTickerActiveBg,
                i = this._options.styleTickerActiveSymbolTextDecoration;
            t.addClass("active"), e && t.css("background-color", e), i && t.find(".symbol-short-name-container a").css("text-decoration", i)
        }, o.prototype._setTabInactiveView = function(t) {
            t.removeClass("active"), t.css("border-bottom-color", "")
        }, o.prototype._setTabActiveView = function(t) {
            var e = this._options.styleTabsActiveBorderColor;
            t.addClass("active"), e && t.css("border-bottom-color", e)
        }, r.prototype.description = function(t) {
            return t && (this._symbol_description = t), this._symbol_description
        }, r.prototype.shortName = function(t) {
            return t ? this._symbol_short_name = t : this._symbol_short_name || (this._symbol_short_name = this._symbol_name.replace(/^(.+:)/, "")), this._symbol_short_name
        }, r.prototype.name = function() {
            return this._symbol_name
        }, r.prototype.timeframe = function() {
            return this._symbol_timeframe
        }, r.prototype.equalTo = function(t) {
            return t instanceof r ? this.name() === t.name() && this.description() === t.description() : (TradingView.logWarn("Symbol " + t + " should be instance of WidgetRendererSymbol"), !1)
        }, e.MiniWidgetRenderer = o, e.WidgetRendererSymbol = r
    }).call(e, i(86), i(40))
}, function(t, e, i) {
    (function(e, n) {
        "use strict";

        function o(t, i, n) {
            this._id = t, this.$container = i, this._tabs = n || i.data("quoteTabs"), this.visible = new e(!0), this.animationInProcess = new e(!0), this._init()
        }
        var r = i(341),
            s = i(380),
            a = i(83).PriceColorer,
            l = i(320);
        o.prototype._init = function() {
            var t, e, i, o, s = this;
            s.$container.empty(), s.$container.addClass("quote-tabbed-widget"), t = s.$tabs = $('<div class="tabs"></div>'), e = s.$pages = $('<div class="pages"></div>'), s._tabs.forEach(function(i) {
                i.symbols = $.map(i.symbols || [], function(t) {
                    return t.last && t.pctchange && t.pctchangedir ? ("down" === t.pctchangedir ? t.changeColor = a.formatSign(-1) : "up" === t.pctchangedir && (t.changeColor = a.formatSign(1)), t) : (void 0 !== t.last && delete t.last, void 0 !== t.pctchange && delete t.pctchange, void 0 !== t.pctchangedir && delete t.pctchangedir, t)
                }), t.append(n.render('<div class="tab">{{title}}</div>', i));
                var o = $(n.render('<div class="page-wrapper"><div class="page"><table>{{#symbols}}<tr data-symbol={{symbol_full}} {{^last}}data-need-quote-ticker=true{{/last}}><td class="name"><a href="/chart/{{short_name}}/" data-symbol={{symbol_full}} class="chart-link{{^symbol}} symbol-short-name{{/symbol}}">{{#symbol}}{{symbol}}{{/symbol}}</a></td><td class="ticker"><span class="symbol-last">{{last}}</span>&nbsp;<span class="symbol-change-pt" {{#changeColor}}style="color: {{changeColor}} "{{/changeColor}}>{{#pctchange}}({{pctchange}}){{/pctchange}}</span></td><td class="chart-cell"><a href="/chart/?symbol={{symbol_full}}" class="chart"></a></td></tr>{{/symbols}}</table></div></div>', i));
                e.append(o)
            }), i = new r(t, e, {
                saveTab: this._activeTabKey()
            }), s._onTabChanged(i.index()), i.tabChanged.subscribe(s, s._onTabChanged), o = $('<div class="tabs-wrapper"></div>'), t.appendTo(o), s.$container.append(o), s.$container.append(e), s.visible.subscribe(function(t) {
                s.$pages.children().each(function(e) {
                    var n = t ? i.index() === e : !1;
                    s._setPageActive($(this), n, !0)
                })
            }), s.animationInProcess.subscribe(function(t) {
                s.$pages.children().each(function(e) {
                    var i = $(this).data("chart");
                    i && (t ? i.unbindOnResize() : s.visible.value() && i.bindOnResize())
                })
            })
        }, o.prototype._onTabChanged = function(t) {
            var e = this;
            e.$pages.children().each(function(i) {
                e._setPageActive($(this), t === i)
            })
        }, o.prototype._setPageActive = function(t, e, i) {
            function n() {
                t.find("tr").each(function(e) {
                    var i, n, o = $(this),
                        r = o.data("symbol");
                    r && (o.data("quoteTicker") ? o.data("quoteTicker").enabled = !0 : o.data("needQuoteTicker") && (i = new l(r, o, {
                        changePercentInBrackets: !0
                    }), o.data("quoteTicker", i)), o.data("chart") ? o.data("chart").connect() : (n = new s(r, o.find(".chart"), {
                        minHeight: 18,
                        showMessage: !1,
                        onlyLastBars: 30,
                        timeframe: {
                            value: "1m"
                        },
                        chartOptions: {
                            grid: {
                                xIsVisible: !1,
                                yIsVisible: !1
                            },
                            xScale: {
                                visible: !1
                            },
                            yScale: {
                                visible: !1
                            },
                            plot: {
                                line: {
                                    color: "#2e5c75",
                                    width: 1
                                },
                                belowLineFillStyle: "rgba(46,94,117, 0.2)"
                            }
                        }
                    }), t.resize(n.widget.onResize), o.data("chart", n)))
                })
            }

            function o() {
                t.find("tr").each(function(t) {
                    var e = $(this);
                    e.data("quoteTicker") && (e.data("quoteTicker").enabled = !1), e.data("chart") && e.data("chart").disconnect()
                })
            }
            e ? (clearTimeout(t.data("turnOffTimeout")), n()) : t.data("turnOffTimeout", setTimeout(function() {
                o()
            }, 1e3 * (i ? 0 : 60)))
        }, o.prototype._activeTabKey = function() {
            return void 0 !== this._id ? "marketsummary.quotestabbedwidget." + this._id + ".activetabindex" : null
        }, t.exports = o
    }).call(e, i(17), i(86))
}]);